import{r as C,u as um,N as Rr,a as Ws,L as Js,b as mm,c as Ut,R as fr,d as JA,B as HC,e as JC,f as Xt}from"./router-DM0ICNM8.js";import{r as GC,a as YC,g as GA,c as yu}from"./vendor-c5ypKtDW.js";import{a as QC,u as me,b as De,c as Xr,C as WC,d as KC}from"./convex-T8Kb0Jd7.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();document.title="AVEX - Simplify Management. Amplify Results.";var Bp={exports:{}},Pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function XC(){if(R2)return Pl;R2=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(i,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:t,type:i,key:d,ref:o!==void 0?o:null,props:c}}return Pl.Fragment=s,Pl.jsx=n,Pl.jsxs=n,Pl}var z2;function ZC(){return z2||(z2=1,Bp.exports=XC()),Bp.exports}var e=ZC(),Sp={exports:{}},Tl={},Dp={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2;function e6(){return I2||(I2=1,function(t){function s(I,O){var G=I.length;I.push(O);e:for(;0<G;){var te=G-1>>>1,Q=I[te];if(0<o(Q,O))I[te]=O,I[G]=Q,G=te;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var O=I[0],G=I.pop();if(G!==O){I[0]=G;e:for(var te=0,Q=I.length,ee=Q>>>1;te<ee;){var le=2*(te+1)-1,R=I[le],q=le+1,J=I[q];if(0>o(R,G))q<Q&&0>o(J,R)?(I[te]=J,I[q]=G,te=q):(I[te]=R,I[le]=G,te=le);else if(q<Q&&0>o(J,G))I[te]=J,I[q]=G,te=q;else break e}}return O}function o(I,O){var G=I.sortIndex-O.sortIndex;return G!==0?G:I.id-O.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var h=[],p=[],u=1,f=null,g=3,y=!1,b=!1,j=!1,N=!1,w=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(I){for(var O=n(p);O!==null;){if(O.callback===null)i(p);else if(O.startTime<=I)i(p),O.sortIndex=O.expirationTime,s(h,O);else break;O=n(p)}}function k(I){if(j=!1,_(I),!b)if(n(h)!==null)b=!0,E||(E=!0,L());else{var O=n(p);O!==null&&ne(k,O.startTime-I)}}var E=!1,D=-1,F=5,M=-1;function P(){return N?!0:!(t.unstable_now()-M<F)}function T(){if(N=!1,E){var I=t.unstable_now();M=I;var O=!0;try{e:{b=!1,j&&(j=!1,B(D),D=-1),y=!0;var G=g;try{t:{for(_(I),f=n(h);f!==null&&!(f.expirationTime>I&&P());){var te=f.callback;if(typeof te=="function"){f.callback=null,g=f.priorityLevel;var Q=te(f.expirationTime<=I);if(I=t.unstable_now(),typeof Q=="function"){f.callback=Q,_(I),O=!0;break t}f===n(h)&&i(h),_(I)}else i(h);f=n(h)}if(f!==null)O=!0;else{var ee=n(p);ee!==null&&ne(k,ee.startTime-I),O=!1}}break e}finally{f=null,g=G,y=!1}O=void 0}}finally{O?L():E=!1}}}var L;if(typeof S=="function")L=function(){S(T)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,Z=X.port2;X.port1.onmessage=T,L=function(){Z.postMessage(null)}}else L=function(){w(T,0)};function ne(I,O){D=w(function(){I(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(I){switch(g){case 1:case 2:case 3:var O=3;break;default:O=g}var G=g;g=O;try{return I()}finally{g=G}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var G=g;g=I;try{return O()}finally{g=G}},t.unstable_scheduleCallback=function(I,O,G){var te=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?te+G:te):G=te,I){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=G+Q,I={id:u++,callback:O,priorityLevel:I,startTime:G,expirationTime:Q,sortIndex:-1},G>te?(I.sortIndex=G,s(p,I),n(h)===null&&I===n(p)&&(j?(B(D),D=-1):j=!0,ne(k,G-te))):(I.sortIndex=Q,s(h,I),b||y||(b=!0,E||(E=!0,L()))),I},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(I){var O=g;return function(){var G=g;g=O;try{return I.apply(this,arguments)}finally{g=G}}}}(Fp)),Fp}var L2;function t6(){return L2||(L2=1,Dp.exports=e6()),Dp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2;function s6(){if(q2)return Tl;q2=1;var t=t6(),s=GC(),n=YC();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var a=r,l=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(l=a.return),r=a.return;while(r)}return a.tag===3?l:null}function d(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function m(r){if(c(r)!==r)throw Error(i(188))}function h(r){var a=r.alternate;if(!a){if(a=c(r),a===null)throw Error(i(188));return a!==r?null:r}for(var l=r,x=a;;){var v=l.return;if(v===null)break;var A=v.alternate;if(A===null){if(x=v.return,x!==null){l=x;continue}break}if(v.child===A.child){for(A=v.child;A;){if(A===l)return m(v),r;if(A===x)return m(v),a;A=A.sibling}throw Error(i(188))}if(l.return!==x.return)l=v,x=A;else{for(var z=!1,U=v.child;U;){if(U===l){z=!0,l=v,x=A;break}if(U===x){z=!0,x=v,l=A;break}U=U.sibling}if(!z){for(U=A.child;U;){if(U===l){z=!0,l=A,x=v;break}if(U===x){z=!0,x=A,l=v;break}U=U.sibling}if(!z)throw Error(i(189))}}if(l.alternate!==x)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:a}function p(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=p(r),a!==null)return a;r=r.sibling}return null}var u=Object.assign,f=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=T&&r[T]||r["@@iterator"],typeof r=="function"?r:null)}var X=Symbol.for("react.client.reference");function Z(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===X?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList";case M:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case y:return"Portal";case S:return(r.displayName||"Context")+".Provider";case B:return(r._context.displayName||"Context")+".Consumer";case _:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return a=r.displayName||null,a!==null?a:Z(r.type)||"Memo";case F:a=r._payload,r=r._init;try{return Z(r(a))}catch{}}return null}var ne=Array.isArray,I=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},te=[],Q=-1;function ee(r){return{current:r}}function le(r){0>Q||(r.current=te[Q],te[Q]=null,Q--)}function R(r,a){Q++,te[Q]=r.current,r.current=a}var q=ee(null),J=ee(null),$=ee(null),Y=ee(null);function xe(r,a){switch(R($,a),R(J,r),R(q,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?x2(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=x2(a),r=u2(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}le(q),R(q,r)}function oe(){le(q),le(J),le($)}function de(r){r.memoizedState!==null&&R(Y,r);var a=q.current,l=u2(a,r.type);a!==l&&(R(J,r),R(q,l))}function ve(r){J.current===r&&(le(q),le(J)),Y.current===r&&(le(Y),_l._currentValue=G)}var Me=Object.prototype.hasOwnProperty,Ke=t.unstable_scheduleCallback,pe=t.unstable_cancelCallback,be=t.unstable_shouldYield,Be=t.unstable_requestPaint,Ue=t.unstable_now,ue=t.unstable_getCurrentPriorityLevel,Ie=t.unstable_ImmediatePriority,st=t.unstable_UserBlockingPriority,Le=t.unstable_NormalPriority,kt=t.unstable_LowPriority,Pt=t.unstable_IdlePriority,St=t.log,Jt=t.unstable_setDisableYieldValue,Ne=null,Ye=null;function Ge(r){if(typeof St=="function"&&Jt(r),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Ne,r)}catch{}}var yt=Math.clz32?Math.clz32:We,bt=Math.log,Ee=Math.LN2;function We(r){return r>>>=0,r===0?32:31-(bt(r)/Ee|0)|0}var Qe=256,ht=4194304;function wt(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Bt(r,a,l){var x=r.pendingLanes;if(x===0)return 0;var v=0,A=r.suspendedLanes,z=r.pingedLanes;r=r.warmLanes;var U=x&134217727;return U!==0?(x=U&~A,x!==0?v=wt(x):(z&=U,z!==0?v=wt(z):l||(l=U&~r,l!==0&&(v=wt(l))))):(U=x&~A,U!==0?v=wt(U):z!==0?v=wt(z):l||(l=x&~r,l!==0&&(v=wt(l)))),v===0?0:a!==0&&a!==v&&(a&A)===0&&(A=v&-v,l=a&-a,A>=l||A===32&&(l&4194048)!==0)?a:v}function K(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function V(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function se(){var r=Qe;return Qe<<=1,(Qe&4194048)===0&&(Qe=256),r}function ke(){var r=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),r}function Re(r){for(var a=[],l=0;31>l;l++)a.push(r);return a}function ze(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ve(r,a,l,x,v,A){var z=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var U=r.entanglements,ae=r.expirationTimes,ge=r.hiddenUpdates;for(l=z&~l;0<l;){var Se=31-yt(l),Te=1<<Se;U[Se]=0,ae[Se]=-1;var ye=ge[Se];if(ye!==null)for(ge[Se]=null,Se=0;Se<ye.length;Se++){var je=ye[Se];je!==null&&(je.lane&=-536870913)}l&=~Te}x!==0&&_t(r,x,0),A!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=A&~(z&~a))}function _t(r,a,l){r.pendingLanes|=a,r.suspendedLanes&=~a;var x=31-yt(a);r.entangledLanes|=a,r.entanglements[x]=r.entanglements[x]|1073741824|l&4194090}function _e(r,a){var l=r.entangledLanes|=a;for(r=r.entanglements;l;){var x=31-yt(l),v=1<<x;v&a|r[x]&a&&(r[x]|=a),l&=~v}}function $e(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ot(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ie(){var r=O.p;return r!==0?r:(r=window.event,r===void 0?32:D2(r.type))}function Ae(r,a){var l=O.p;try{return O.p=r,a()}finally{O.p=l}}var nt=Math.random().toString(36).slice(2),ct="__reactFiber$"+nt,pt="__reactProps$"+nt,re="__reactContainer$"+nt,Oe="__reactEvents$"+nt,qe="__reactListeners$"+nt,ut="__reactHandles$"+nt,dt="__reactResources$"+nt,zt="__reactMarker$"+nt;function Zt(r){delete r[ct],delete r[pt],delete r[Oe],delete r[qe],delete r[ut]}function Wt(r){var a=r[ct];if(a)return a;for(var l=r.parentNode;l;){if(a=l[re]||l[ct]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(r=f2(r);r!==null;){if(l=r[ct])return l;r=f2(r)}return a}r=l,l=r.parentNode}return null}function Ls(r){if(r=r[ct]||r[re]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function Ks(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function xa(r){var a=r[dt];return a||(a=r[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function us(r){r[zt]=!0}var _a=new Set,ua={};function xt(r,a){Gt(r,a),Gt(r+"Capture",a)}function Gt(r,a){for(ua[r]=a,r=0;r<a.length;r++)_a.add(a[r])}var _i=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),en={},qn={};function $n(r){return Me.call(qn,r)?!0:Me.call(en,r)?!1:_i.test(r)?qn[r]=!0:(en[r]=!0,!1)}function Bi(r,a,l){if($n(a))if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var x=a.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+l)}}function Si(r,a,l){if(l===null)r.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+l)}}function ra(r,a,l,x){if(x===null)r.removeAttribute(l);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(a,l,""+x)}}var Lo,Un;function tn(r){if(Lo===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Lo=a&&a[1]||"",Un=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lo+r+Un}var qo=!1;function $o(r,a){if(!r||qo)return"";qo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(a){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(je){var ye=je}Reflect.construct(r,[],Te)}else{try{Te.call()}catch(je){ye=je}r.call(Te.prototype)}}else{try{throw Error()}catch(je){ye=je}(Te=r())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(je){if(je&&ye&&typeof je.stack=="string")return[je.stack,ye.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=x.DetermineComponentFrameRoot(),z=A[0],U=A[1];if(z&&U){var ae=z.split(`
`),ge=U.split(`
`);for(v=x=0;x<ae.length&&!ae[x].includes("DetermineComponentFrameRoot");)x++;for(;v<ge.length&&!ge[v].includes("DetermineComponentFrameRoot");)v++;if(x===ae.length||v===ge.length)for(x=ae.length-1,v=ge.length-1;1<=x&&0<=v&&ae[x]!==ge[v];)v--;for(;1<=x&&0<=v;x--,v--)if(ae[x]!==ge[v]){if(x!==1||v!==1)do if(x--,v--,0>v||ae[x]!==ge[v]){var Se=`
`+ae[x].replace(" at new "," at ");return r.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",r.displayName)),Se}while(1<=x&&0<=v);break}}}finally{qo=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?tn(l):""}function Sm(r){switch(r.tag){case 26:case 27:case 5:return tn(r.type);case 16:return tn("Lazy");case 13:return tn("Suspense");case 19:return tn("SuspenseList");case 0:case 15:return $o(r.type,!1);case 11:return $o(r.type.render,!1);case 1:return $o(r.type,!0);case 31:return tn("Activity");default:return""}}function p0(r){try{var a="";do a+=Sm(r),r=r.return;while(r);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function gr(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function f0(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Dm(r){var a=f0(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),x=""+r[a];if(!r.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var v=l.get,A=l.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return v.call(this)},set:function(z){x=""+z,A.call(this,z)}}),Object.defineProperty(r,a,{enumerable:l.enumerable}),{getValue:function(){return x},setValue:function(z){x=""+z},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Di(r){r._valueTracker||(r._valueTracker=Dm(r))}function g0(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var l=a.getValue(),x="";return r&&(x=f0(r)?r.checked?"true":"false":r.value),r=x,r!==l?(a.setValue(r),!0):!1}function Fi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Fm=/[\n"\\]/g;function br(r){return r.replace(Fm,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function W(r,a,l,x,v,A,z,U){r.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?r.type=z:r.removeAttribute("type"),a!=null?z==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+gr(a)):r.value!==""+gr(a)&&(r.value=""+gr(a)):z!=="submit"&&z!=="reset"||r.removeAttribute("value"),a!=null?He(r,z,gr(a)):l!=null?He(r,z,gr(l)):x!=null&&r.removeAttribute("value"),v==null&&A!=null&&(r.defaultChecked=!!A),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+gr(U):r.removeAttribute("name")}function we(r,a,l,x,v,A,z,U){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.type=A),a!=null||l!=null){if(!(A!=="submit"&&A!=="reset"||a!=null))return;l=l!=null?""+gr(l):"",a=a!=null?""+gr(a):l,U||a===r.value||(r.value=a),r.defaultValue=a}x=x??v,x=typeof x!="function"&&typeof x!="symbol"&&!!x,r.checked=U?r.checked:!!x,r.defaultChecked=!!x,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(r.name=z)}function He(r,a,l){a==="number"&&Fi(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Pe(r,a,l,x){if(r=r.options,a){a={};for(var v=0;v<l.length;v++)a["$"+l[v]]=!0;for(l=0;l<r.length;l++)v=a.hasOwnProperty("$"+r[l].value),r[l].selected!==v&&(r[l].selected=v),v&&x&&(r[l].defaultSelected=!0)}else{for(l=""+gr(l),a=null,v=0;v<r.length;v++){if(r[v].value===l){r[v].selected=!0,x&&(r[v].defaultSelected=!0);return}a!==null||r[v].disabled||(a=r[v])}a!==null&&(a.selected=!0)}}function jt(r,a,l){if(a!=null&&(a=""+gr(a),a!==r.value&&(r.value=a),l==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=l!=null?""+gr(l):""}function lt(r,a,l,x){if(a==null){if(x!=null){if(l!=null)throw Error(i(92));if(ne(x)){if(1<x.length)throw Error(i(93));x=x[0]}l=x}l==null&&(l=""),a=l}l=gr(a),r.defaultValue=l,x=r.textContent,x===l&&x!==""&&x!==null&&(r.value=x)}function ft(r,a){if(a){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=a;return}}r.textContent=a}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ps(r,a,l){var x=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?x?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":x?r.setProperty(a,l):typeof l!="number"||l===0||Et.has(a)?a==="float"?r.cssFloat=l:r[a]=(""+l).trim():r[a]=l+"px"}function fs(r,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,l!=null){for(var x in l)!l.hasOwnProperty(x)||a!=null&&a.hasOwnProperty(x)||(x.indexOf("--")===0?r.setProperty(x,""):x==="float"?r.cssFloat="":r[x]="");for(var v in a)x=a[v],a.hasOwnProperty(v)&&l[v]!==x&&ps(r,v,x)}else for(var A in a)a.hasOwnProperty(A)&&ps(r,A,a[A])}function gs(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),it=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(r){return it.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Vn=null;function Cs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var es=null,_r=null;function Hn(r){var a=Ls(r);if(a&&(r=a.stateNode)){var l=r[pt]||null;e:switch(r=a.stateNode,a.type){case"input":if(W(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+br(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var x=l[a];if(x!==r&&x.form===r.form){var v=x[pt]||null;if(!v)throw Error(i(90));W(x,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<l.length;a++)x=l[a],x.form===r.form&&g0(x)}break e;case"textarea":jt(r,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Pe(r,!!l.multiple,a,!1)}}}var ma=!1;function aa(r,a,l){if(ma)return r(a,l);ma=!0;try{var x=r(a);return x}finally{if(ma=!1,(es!==null||_r!==null)&&(Z0(),es&&(a=es,r=_r,_r=es=null,Hn(a),r)))for(a=0;a<r.length;a++)Hn(r[a])}}function sn(r,a){var l=r.stateNode;if(l===null)return null;var x=l[pt]||null;if(x===null)return null;l=x[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(r=r.type,x=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!x;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=!1;if(Es)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){Xs=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{Xs=!1}var Br=null,Pi=null,Jn=null;function Pm(){if(Jn)return Jn;var r,a=Pi,l=a.length,x,v="value"in Br?Br.value:Br.textContent,A=v.length;for(r=0;r<l&&a[r]===v[r];r++);var z=l-r;for(x=1;x<=z&&a[l-x]===v[A-x];x++);return Jn=v.slice(r,1<x?1-x:void 0)}function Ti(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function qs(){return!0}function qt(){return!1}function $s(r){function a(l,x,v,A,z){this._reactName=l,this._targetInst=v,this.type=x,this.nativeEvent=A,this.target=z,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(l=r[U],this[U]=l?l(A):A[U]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?qs:qt,this.isPropagationStopped=qt,this}return u(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),a}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b0=$s(Ba),Uo=u({},Ba,{view:0,detail:0}),H9=$s(Uo),Tm,Om,Vo,v0=u({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rm,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Vo&&(Vo&&r.type==="mousemove"?(Tm=r.screenX-Vo.screenX,Om=r.screenY-Vo.screenY):Om=Tm=0,Vo=r),Tm)},movementY:function(r){return"movementY"in r?r.movementY:Om}}),gb=$s(v0),J9=u({},v0,{dataTransfer:0}),G9=$s(J9),Y9=u({},Uo,{relatedTarget:0}),Mm=$s(Y9),Q9=u({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),W9=$s(Q9),K9=u({},Ba,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),X9=$s(K9),Z9=u({},Ba,{data:0}),bb=$s(Z9),e8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r8(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=s8[r])?!!a[r]:!1}function Rm(){return r8}var a8=u({},Uo,{key:function(r){if(r.key){var a=e8[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Ti(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?t8[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rm,charCode:function(r){return r.type==="keypress"?Ti(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ti(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),n8=$s(a8),i8=u({},v0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vb=$s(i8),o8=u({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rm}),l8=$s(o8),c8=u({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),d8=$s(c8),x8=u({},v0,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),u8=$s(x8),m8=u({},Ba,{newState:0,oldState:0}),h8=$s(m8),p8=[9,13,27,32],zm=Es&&"CompositionEvent"in window,Ho=null;Es&&"documentMode"in document&&(Ho=document.documentMode);var f8=Es&&"TextEvent"in window&&!Ho,yb=Es&&(!zm||Ho&&8<Ho&&11>=Ho),jb=" ",Nb=!1;function wb(r,a){switch(r){case"keyup":return p8.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ab(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Oi=!1;function g8(r,a){switch(r){case"compositionend":return Ab(a);case"keypress":return a.which!==32?null:(Nb=!0,jb);case"textInput":return r=a.data,r===jb&&Nb?null:r;default:return null}}function b8(r,a){if(Oi)return r==="compositionend"||!zm&&wb(r,a)?(r=Pm(),Jn=Pi=Br=null,Oi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yb&&a.locale!=="ko"?null:a.data;default:return null}}var v8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cb(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!v8[r.type]:a==="textarea"}function Eb(r,a,l,x){es?_r?_r.push(x):_r=[x]:es=x,a=nu(a,"onChange"),0<a.length&&(l=new b0("onChange","change",null,l,x),r.push({event:l,listeners:a}))}var Jo=null,Go=null;function y8(r){i2(r,0)}function y0(r){var a=Ks(r);if(g0(a))return r}function kb(r,a){if(r==="change")return a}var _b=!1;if(Es){var Im;if(Es){var Lm="oninput"in document;if(!Lm){var Bb=document.createElement("div");Bb.setAttribute("oninput","return;"),Lm=typeof Bb.oninput=="function"}Im=Lm}else Im=!1;_b=Im&&(!document.documentMode||9<document.documentMode)}function Sb(){Jo&&(Jo.detachEvent("onpropertychange",Db),Go=Jo=null)}function Db(r){if(r.propertyName==="value"&&y0(Go)){var a=[];Eb(a,Go,r,Cs(r)),aa(y8,a)}}function j8(r,a,l){r==="focusin"?(Sb(),Jo=a,Go=l,Jo.attachEvent("onpropertychange",Db)):r==="focusout"&&Sb()}function N8(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return y0(Go)}function w8(r,a){if(r==="click")return y0(a)}function A8(r,a){if(r==="input"||r==="change")return y0(a)}function C8(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Sr=typeof Object.is=="function"?Object.is:C8;function Yo(r,a){if(Sr(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var l=Object.keys(r),x=Object.keys(a);if(l.length!==x.length)return!1;for(x=0;x<l.length;x++){var v=l[x];if(!Me.call(a,v)||!Sr(r[v],a[v]))return!1}return!0}function Fb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Pb(r,a){var l=Fb(r);r=0;for(var x;l;){if(l.nodeType===3){if(x=r+l.textContent.length,r<=a&&x>=a)return{node:l,offset:a-r};r=x}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Fb(l)}}function Tb(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Tb(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Ob(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Fi(r.document);a instanceof r.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)r=a.contentWindow;else break;a=Fi(r.document)}return a}function qm(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var E8=Es&&"documentMode"in document&&11>=document.documentMode,Mi=null,$m=null,Qo=null,Um=!1;function Mb(r,a,l){var x=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Um||Mi==null||Mi!==Fi(x)||(x=Mi,"selectionStart"in x&&qm(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Qo&&Yo(Qo,x)||(Qo=x,x=nu($m,"onSelect"),0<x.length&&(a=new b0("onSelect","select",null,a,l),r.push({event:a,listeners:x}),a.target=Mi)))}function Gn(r,a){var l={};return l[r.toLowerCase()]=a.toLowerCase(),l["Webkit"+r]="webkit"+a,l["Moz"+r]="moz"+a,l}var Ri={animationend:Gn("Animation","AnimationEnd"),animationiteration:Gn("Animation","AnimationIteration"),animationstart:Gn("Animation","AnimationStart"),transitionrun:Gn("Transition","TransitionRun"),transitionstart:Gn("Transition","TransitionStart"),transitioncancel:Gn("Transition","TransitionCancel"),transitionend:Gn("Transition","TransitionEnd")},Vm={},Rb={};Es&&(Rb=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function Yn(r){if(Vm[r])return Vm[r];if(!Ri[r])return r;var a=Ri[r],l;for(l in a)if(a.hasOwnProperty(l)&&l in Rb)return Vm[r]=a[l];return r}var zb=Yn("animationend"),Ib=Yn("animationiteration"),Lb=Yn("animationstart"),k8=Yn("transitionrun"),_8=Yn("transitionstart"),B8=Yn("transitioncancel"),qb=Yn("transitionend"),$b=new Map,Hm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hm.push("scrollEnd");function na(r,a){$b.set(r,a),xt(a,[r])}var Ub=new WeakMap;function $r(r,a){if(typeof r=="object"&&r!==null){var l=Ub.get(r);return l!==void 0?l:(a={value:r,source:a,stack:p0(a)},Ub.set(r,a),a)}return{value:r,source:a,stack:p0(a)}}var Ur=[],zi=0,Jm=0;function j0(){for(var r=zi,a=Jm=zi=0;a<r;){var l=Ur[a];Ur[a++]=null;var x=Ur[a];Ur[a++]=null;var v=Ur[a];Ur[a++]=null;var A=Ur[a];if(Ur[a++]=null,x!==null&&v!==null){var z=x.pending;z===null?v.next=v:(v.next=z.next,z.next=v),x.pending=v}A!==0&&Vb(l,v,A)}}function N0(r,a,l,x){Ur[zi++]=r,Ur[zi++]=a,Ur[zi++]=l,Ur[zi++]=x,Jm|=x,r.lanes|=x,r=r.alternate,r!==null&&(r.lanes|=x)}function Gm(r,a,l,x){return N0(r,a,l,x),w0(r)}function Ii(r,a){return N0(r,null,null,a),w0(r)}function Vb(r,a,l){r.lanes|=l;var x=r.alternate;x!==null&&(x.lanes|=l);for(var v=!1,A=r.return;A!==null;)A.childLanes|=l,x=A.alternate,x!==null&&(x.childLanes|=l),A.tag===22&&(r=A.stateNode,r===null||r._visibility&1||(v=!0)),r=A,A=A.return;return r.tag===3?(A=r.stateNode,v&&a!==null&&(v=31-yt(l),r=A.hiddenUpdates,x=r[v],x===null?r[v]=[a]:x.push(a),a.lane=l|536870912),A):null}function w0(r){if(50<yl)throw yl=0,Zh=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Li={};function S8(r,a,l,x){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(r,a,l,x){return new S8(r,a,l,x)}function Ym(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Sa(r,a){var l=r.alternate;return l===null?(l=Dr(r.tag,a,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=a,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,a=r.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Hb(r,a){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,a=l.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function A0(r,a,l,x,v,A){var z=0;if(x=r,typeof r=="function")Ym(r)&&(z=1);else if(typeof r=="string")z=FC(r,l,q.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case M:return r=Dr(31,l,a,v),r.elementType=M,r.lanes=A,r;case b:return Qn(l.children,v,A,a);case j:z=8,v|=24;break;case N:return r=Dr(12,l,a,v|2),r.elementType=N,r.lanes=A,r;case k:return r=Dr(13,l,a,v),r.elementType=k,r.lanes=A,r;case E:return r=Dr(19,l,a,v),r.elementType=E,r.lanes=A,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case w:case S:z=10;break e;case B:z=9;break e;case _:z=11;break e;case D:z=14;break e;case F:z=16,x=null;break e}z=29,l=Error(i(130,r===null?"null":typeof r,"")),x=null}return a=Dr(z,l,a,v),a.elementType=r,a.type=x,a.lanes=A,a}function Qn(r,a,l,x){return r=Dr(7,r,x,a),r.lanes=l,r}function Qm(r,a,l){return r=Dr(6,r,null,a),r.lanes=l,r}function Wm(r,a,l){return a=Dr(4,r.children!==null?r.children:[],r.key,a),a.lanes=l,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var qi=[],$i=0,C0=null,E0=0,Vr=[],Hr=0,Wn=null,Da=1,Fa="";function Kn(r,a){qi[$i++]=E0,qi[$i++]=C0,C0=r,E0=a}function Jb(r,a,l){Vr[Hr++]=Da,Vr[Hr++]=Fa,Vr[Hr++]=Wn,Wn=r;var x=Da;r=Fa;var v=32-yt(x)-1;x&=~(1<<v),l+=1;var A=32-yt(a)+v;if(30<A){var z=v-v%5;A=(x&(1<<z)-1).toString(32),x>>=z,v-=z,Da=1<<32-yt(a)+v|l<<v|x,Fa=A+r}else Da=1<<A|l<<v|x,Fa=r}function Km(r){r.return!==null&&(Kn(r,1),Jb(r,1,0))}function Xm(r){for(;r===C0;)C0=qi[--$i],qi[$i]=null,E0=qi[--$i],qi[$i]=null;for(;r===Wn;)Wn=Vr[--Hr],Vr[Hr]=null,Fa=Vr[--Hr],Vr[Hr]=null,Da=Vr[--Hr],Vr[Hr]=null}var mr=null,Ss=null,Kt=!1,Xn=null,ha=!1,Zm=Error(i(519));function Zn(r){var a=Error(i(418,""));throw Xo($r(a,r)),Zm}function Gb(r){var a=r.stateNode,l=r.type,x=r.memoizedProps;switch(a[ct]=r,a[pt]=x,l){case"dialog":Rt("cancel",a),Rt("close",a);break;case"iframe":case"object":case"embed":Rt("load",a);break;case"video":case"audio":for(l=0;l<Nl.length;l++)Rt(Nl[l],a);break;case"source":Rt("error",a);break;case"img":case"image":case"link":Rt("error",a),Rt("load",a);break;case"details":Rt("toggle",a);break;case"input":Rt("invalid",a),we(a,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),Di(a);break;case"select":Rt("invalid",a);break;case"textarea":Rt("invalid",a),lt(a,x.value,x.defaultValue,x.children),Di(a)}l=x.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||x.suppressHydrationWarning===!0||d2(a.textContent,l)?(x.popover!=null&&(Rt("beforetoggle",a),Rt("toggle",a)),x.onScroll!=null&&Rt("scroll",a),x.onScrollEnd!=null&&Rt("scrollend",a),x.onClick!=null&&(a.onclick=iu),a=!0):a=!1,a||Zn(r)}function Yb(r){for(mr=r.return;mr;)switch(mr.tag){case 5:case 13:ha=!1;return;case 27:case 3:ha=!0;return;default:mr=mr.return}}function Wo(r){if(r!==mr)return!1;if(!Kt)return Yb(r),Kt=!0,!1;var a=r.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||pp(r.type,r.memoizedProps)),l=!l),l&&Ss&&Zn(r),Yb(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(a===0){Ss=oa(r.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;r=r.nextSibling}Ss=null}}else a===27?(a=Ss,yn(r.type)?(r=vp,vp=null,Ss=r):Ss=a):Ss=mr?oa(r.stateNode.nextSibling):null;return!0}function Ko(){Ss=mr=null,Kt=!1}function Qb(){var r=Xn;return r!==null&&(jr===null?jr=r:jr.push.apply(jr,r),Xn=null),r}function Xo(r){Xn===null?Xn=[r]:Xn.push(r)}var eh=ee(null),ei=null,Pa=null;function an(r,a,l){R(eh,a._currentValue),a._currentValue=l}function Ta(r){r._currentValue=eh.current,le(eh)}function th(r,a,l){for(;r!==null;){var x=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,x!==null&&(x.childLanes|=a)):x!==null&&(x.childLanes&a)!==a&&(x.childLanes|=a),r===l)break;r=r.return}}function sh(r,a,l,x){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var A=v.dependencies;if(A!==null){var z=v.child;A=A.firstContext;e:for(;A!==null;){var U=A;A=v;for(var ae=0;ae<a.length;ae++)if(U.context===a[ae]){A.lanes|=l,U=A.alternate,U!==null&&(U.lanes|=l),th(A.return,l,r),x||(z=null);break e}A=U.next}}else if(v.tag===18){if(z=v.return,z===null)throw Error(i(341));z.lanes|=l,A=z.alternate,A!==null&&(A.lanes|=l),th(z,l,r),z=null}else z=v.child;if(z!==null)z.return=v;else for(z=v;z!==null;){if(z===r){z=null;break}if(v=z.sibling,v!==null){v.return=z.return,z=v;break}z=z.return}v=z}}function Zo(r,a,l,x){r=null;for(var v=a,A=!1;v!==null;){if(!A){if((v.flags&524288)!==0)A=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var z=v.alternate;if(z===null)throw Error(i(387));if(z=z.memoizedProps,z!==null){var U=v.type;Sr(v.pendingProps.value,z.value)||(r!==null?r.push(U):r=[U])}}else if(v===Y.current){if(z=v.alternate,z===null)throw Error(i(387));z.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(_l):r=[_l])}v=v.return}r!==null&&sh(a,r,l,x),a.flags|=262144}function k0(r){for(r=r.firstContext;r!==null;){if(!Sr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ti(r){ei=r,Pa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function cr(r){return Wb(ei,r)}function _0(r,a){return ei===null&&ti(r),Wb(r,a)}function Wb(r,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Pa===null){if(r===null)throw Error(i(308));Pa=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Pa=Pa.next=a;return l}var D8=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(l,x){r.push(x)}};this.abort=function(){a.aborted=!0,r.forEach(function(l){return l()})}},F8=t.unstable_scheduleCallback,P8=t.unstable_NormalPriority,Ys={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rh(){return{controller:new D8,data:new Map,refCount:0}}function el(r){r.refCount--,r.refCount===0&&F8(P8,function(){r.controller.abort()})}var tl=null,ah=0,Ui=0,Vi=null;function T8(r,a){if(tl===null){var l=tl=[];ah=0,Ui=ip(),Vi={status:"pending",value:void 0,then:function(x){l.push(x)}}}return ah++,a.then(Kb,Kb),a}function Kb(){if(--ah===0&&tl!==null){Vi!==null&&(Vi.status="fulfilled");var r=tl;tl=null,Ui=0,Vi=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function O8(r,a){var l=[],x={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return r.then(function(){x.status="fulfilled",x.value=a;for(var v=0;v<l.length;v++)(0,l[v])(a)},function(v){for(x.status="rejected",x.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),x}var Xb=I.S;I.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&T8(r,a),Xb!==null&&Xb(r,a)};var si=ee(null);function nh(){var r=si.current;return r!==null?r:bs.pooledCache}function B0(r,a){a===null?R(si,si.current):R(si,a.pool)}function Zb(){var r=nh();return r===null?null:{parent:Ys._currentValue,pool:r}}var sl=Error(i(460)),ev=Error(i(474)),S0=Error(i(542)),ih={then:function(){}};function tv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function D0(){}function sv(r,a,l){switch(l=r[l],l===void 0?r.push(a):l!==a&&(a.then(D0,D0),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,av(r),r;default:if(typeof a.status=="string")a.then(D0,D0);else{if(r=bs,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(x){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=x}},function(x){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=x}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,av(r),r}throw rl=a,sl}}var rl=null;function rv(){if(rl===null)throw Error(i(459));var r=rl;return rl=null,r}function av(r){if(r===sl||r===S0)throw Error(i(483))}var nn=!1;function oh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lh(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function on(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ln(r,a,l){var x=r.updateQueue;if(x===null)return null;if(x=x.shared,(ts&2)!==0){var v=x.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),x.pending=a,a=w0(r),Vb(r,null,l),a}return N0(r,x,a,l),w0(r)}function al(r,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var x=a.lanes;x&=r.pendingLanes,l|=x,a.lanes=l,_e(r,l)}}function ch(r,a){var l=r.updateQueue,x=r.alternate;if(x!==null&&(x=x.updateQueue,l===x)){var v=null,A=null;if(l=l.firstBaseUpdate,l!==null){do{var z={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};A===null?v=A=z:A=A.next=z,l=l.next}while(l!==null);A===null?v=A=a:A=A.next=a}else v=A=a;l={baseState:x.baseState,firstBaseUpdate:v,lastBaseUpdate:A,shared:x.shared,callbacks:x.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=a:r.next=a,l.lastBaseUpdate=a}var dh=!1;function nl(){if(dh){var r=Vi;if(r!==null)throw r}}function il(r,a,l,x){dh=!1;var v=r.updateQueue;nn=!1;var A=v.firstBaseUpdate,z=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var ae=U,ge=ae.next;ae.next=null,z===null?A=ge:z.next=ge,z=ae;var Se=r.alternate;Se!==null&&(Se=Se.updateQueue,U=Se.lastBaseUpdate,U!==z&&(U===null?Se.firstBaseUpdate=ge:U.next=ge,Se.lastBaseUpdate=ae))}if(A!==null){var Te=v.baseState;z=0,Se=ge=ae=null,U=A;do{var ye=U.lane&-536870913,je=ye!==U.lane;if(je?(Lt&ye)===ye:(x&ye)===ye){ye!==0&&ye===Ui&&(dh=!0),Se!==null&&(Se=Se.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var At=r,gt=U;ye=a;var ls=l;switch(gt.tag){case 1:if(At=gt.payload,typeof At=="function"){Te=At.call(ls,Te,ye);break e}Te=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=gt.payload,ye=typeof At=="function"?At.call(ls,Te,ye):At,ye==null)break e;Te=u({},Te,ye);break e;case 2:nn=!0}}ye=U.callback,ye!==null&&(r.flags|=64,je&&(r.flags|=8192),je=v.callbacks,je===null?v.callbacks=[ye]:je.push(ye))}else je={lane:ye,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Se===null?(ge=Se=je,ae=Te):Se=Se.next=je,z|=ye;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;je=U,U=je.next,je.next=null,v.lastBaseUpdate=je,v.shared.pending=null}}while(!0);Se===null&&(ae=Te),v.baseState=ae,v.firstBaseUpdate=ge,v.lastBaseUpdate=Se,A===null&&(v.shared.lanes=0),fn|=z,r.lanes=z,r.memoizedState=Te}}function nv(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function iv(r,a){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)nv(l[r],a)}var Hi=ee(null),F0=ee(0);function ov(r,a){r=qa,R(F0,r),R(Hi,a),qa=r|a.baseLanes}function xh(){R(F0,qa),R(Hi,Hi.current)}function uh(){qa=F0.current,le(Hi),le(F0)}var cn=0,Ft=null,is=null,Us=null,P0=!1,Ji=!1,ri=!1,T0=0,ol=0,Gi=null,M8=0;function Os(){throw Error(i(321))}function mh(r,a){if(a===null)return!1;for(var l=0;l<a.length&&l<r.length;l++)if(!Sr(r[l],a[l]))return!1;return!0}function hh(r,a,l,x,v,A){return cn=A,Ft=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,I.H=r===null||r.memoizedState===null?Vv:Hv,ri=!1,A=l(x,v),ri=!1,Ji&&(A=cv(a,l,x,v)),lv(r),A}function lv(r){I.H=L0;var a=is!==null&&is.next!==null;if(cn=0,Us=is=Ft=null,P0=!1,ol=0,Gi=null,a)throw Error(i(300));r===null||Zs||(r=r.dependencies,r!==null&&k0(r)&&(Zs=!0))}function cv(r,a,l,x){Ft=r;var v=0;do{if(Ji&&(Gi=null),ol=0,Ji=!1,25<=v)throw Error(i(301));if(v+=1,Us=is=null,r.updateQueue!=null){var A=r.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}I.H=U8,A=a(l,x)}while(Ji);return A}function R8(){var r=I.H,a=r.useState()[0];return a=typeof a.then=="function"?ll(a):a,r=r.useState()[0],(is!==null?is.memoizedState:null)!==r&&(Ft.flags|=1024),a}function ph(){var r=T0!==0;return T0=0,r}function fh(r,a,l){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~l}function gh(r){if(P0){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}P0=!1}cn=0,Us=is=Ft=null,Ji=!1,ol=T0=0,Gi=null}function vr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Us===null?Ft.memoizedState=Us=r:Us=Us.next=r,Us}function Vs(){if(is===null){var r=Ft.alternate;r=r!==null?r.memoizedState:null}else r=is.next;var a=Us===null?Ft.memoizedState:Us.next;if(a!==null)Us=a,is=r;else{if(r===null)throw Ft.alternate===null?Error(i(467)):Error(i(310));is=r,r={memoizedState:is.memoizedState,baseState:is.baseState,baseQueue:is.baseQueue,queue:is.queue,next:null},Us===null?Ft.memoizedState=Us=r:Us=Us.next=r}return Us}function bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(r){var a=ol;return ol+=1,Gi===null&&(Gi=[]),r=sv(Gi,r,a),a=Ft,(Us===null?a.memoizedState:Us.next)===null&&(a=a.alternate,I.H=a===null||a.memoizedState===null?Vv:Hv),r}function O0(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ll(r);if(r.$$typeof===S)return cr(r)}throw Error(i(438,String(r)))}function vh(r){var a=null,l=Ft.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var x=Ft.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(a={data:x.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=bh(),Ft.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(r),x=0;x<r;x++)l[x]=P;return a.index++,l}function Oa(r,a){return typeof a=="function"?a(r):a}function M0(r){var a=Vs();return yh(a,is,r)}function yh(r,a,l){var x=r.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=l;var v=r.baseQueue,A=x.pending;if(A!==null){if(v!==null){var z=v.next;v.next=A.next,A.next=z}a.baseQueue=v=A,x.pending=null}if(A=r.baseState,v===null)r.memoizedState=A;else{a=v.next;var U=z=null,ae=null,ge=a,Se=!1;do{var Te=ge.lane&-536870913;if(Te!==ge.lane?(Lt&Te)===Te:(cn&Te)===Te){var ye=ge.revertLane;if(ye===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Te===Ui&&(Se=!0);else if((cn&ye)===ye){ge=ge.next,ye===Ui&&(Se=!0);continue}else Te={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ae===null?(U=ae=Te,z=A):ae=ae.next=Te,Ft.lanes|=ye,fn|=ye;Te=ge.action,ri&&l(A,Te),A=ge.hasEagerState?ge.eagerState:l(A,Te)}else ye={lane:Te,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ae===null?(U=ae=ye,z=A):ae=ae.next=ye,Ft.lanes|=Te,fn|=Te;ge=ge.next}while(ge!==null&&ge!==a);if(ae===null?z=A:ae.next=U,!Sr(A,r.memoizedState)&&(Zs=!0,Se&&(l=Vi,l!==null)))throw l;r.memoizedState=A,r.baseState=z,r.baseQueue=ae,x.lastRenderedState=A}return v===null&&(x.lanes=0),[r.memoizedState,x.dispatch]}function jh(r){var a=Vs(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var x=l.dispatch,v=l.pending,A=a.memoizedState;if(v!==null){l.pending=null;var z=v=v.next;do A=r(A,z.action),z=z.next;while(z!==v);Sr(A,a.memoizedState)||(Zs=!0),a.memoizedState=A,a.baseQueue===null&&(a.baseState=A),l.lastRenderedState=A}return[A,x]}function dv(r,a,l){var x=Ft,v=Vs(),A=Kt;if(A){if(l===void 0)throw Error(i(407));l=l()}else l=a();var z=!Sr((is||v).memoizedState,l);z&&(v.memoizedState=l,Zs=!0),v=v.queue;var U=mv.bind(null,x,v,r);if(cl(2048,8,U,[r]),v.getSnapshot!==a||z||Us!==null&&Us.memoizedState.tag&1){if(x.flags|=2048,Yi(9,R0(),uv.bind(null,x,v,l,a),null),bs===null)throw Error(i(349));A||(cn&124)!==0||xv(x,a,l)}return l}function xv(r,a,l){r.flags|=16384,r={getSnapshot:a,value:l},a=Ft.updateQueue,a===null?(a=bh(),Ft.updateQueue=a,a.stores=[r]):(l=a.stores,l===null?a.stores=[r]:l.push(r))}function uv(r,a,l,x){a.value=l,a.getSnapshot=x,hv(a)&&pv(r)}function mv(r,a,l){return l(function(){hv(a)&&pv(r)})}function hv(r){var a=r.getSnapshot;r=r.value;try{var l=a();return!Sr(r,l)}catch{return!0}}function pv(r){var a=Ii(r,2);a!==null&&Mr(a,r,2)}function Nh(r){var a=vr();if(typeof r=="function"){var l=r;if(r=l(),ri){Ge(!0);try{l()}finally{Ge(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:r},a}function fv(r,a,l,x){return r.baseState=l,yh(r,is,typeof x=="function"?x:Oa)}function z8(r,a,l,x,v){if(I0(r))throw Error(i(485));if(r=a.action,r!==null){var A={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){A.listeners.push(z)}};I.T!==null?l(!0):A.isTransition=!1,x(A),l=a.pending,l===null?(A.next=a.pending=A,gv(a,A)):(A.next=l.next,a.pending=l.next=A)}}function gv(r,a){var l=a.action,x=a.payload,v=r.state;if(a.isTransition){var A=I.T,z={};I.T=z;try{var U=l(v,x),ae=I.S;ae!==null&&ae(z,U),bv(r,a,U)}catch(ge){wh(r,a,ge)}finally{I.T=A}}else try{A=l(v,x),bv(r,a,A)}catch(ge){wh(r,a,ge)}}function bv(r,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(x){vv(r,a,x)},function(x){return wh(r,a,x)}):vv(r,a,l)}function vv(r,a,l){a.status="fulfilled",a.value=l,yv(a),r.state=l,a=r.pending,a!==null&&(l=a.next,l===a?r.pending=null:(l=l.next,a.next=l,gv(r,l)))}function wh(r,a,l){var x=r.pending;if(r.pending=null,x!==null){x=x.next;do a.status="rejected",a.reason=l,yv(a),a=a.next;while(a!==x)}r.action=null}function yv(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function jv(r,a){return a}function Nv(r,a){if(Kt){var l=bs.formState;if(l!==null){e:{var x=Ft;if(Kt){if(Ss){t:{for(var v=Ss,A=ha;v.nodeType!==8;){if(!A){v=null;break t}if(v=oa(v.nextSibling),v===null){v=null;break t}}A=v.data,v=A==="F!"||A==="F"?v:null}if(v){Ss=oa(v.nextSibling),x=v.data==="F!";break e}}Zn(x)}x=!1}x&&(a=l[0])}}return l=vr(),l.memoizedState=l.baseState=a,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jv,lastRenderedState:a},l.queue=x,l=qv.bind(null,Ft,x),x.dispatch=l,x=Nh(!1),A=_h.bind(null,Ft,!1,x.queue),x=vr(),v={state:a,dispatch:null,action:r,pending:null},x.queue=v,l=z8.bind(null,Ft,v,A,l),v.dispatch=l,x.memoizedState=r,[a,l,!1]}function wv(r){var a=Vs();return Av(a,is,r)}function Av(r,a,l){if(a=yh(r,a,jv)[0],r=M0(Oa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var x=ll(a)}catch(z){throw z===sl?S0:z}else x=a;a=Vs();var v=a.queue,A=v.dispatch;return l!==a.memoizedState&&(Ft.flags|=2048,Yi(9,R0(),I8.bind(null,v,l),null)),[x,A,r]}function I8(r,a){r.action=a}function Cv(r){var a=Vs(),l=is;if(l!==null)return Av(a,l,r);Vs(),a=a.memoizedState,l=Vs();var x=l.queue.dispatch;return l.memoizedState=r,[a,x,!1]}function Yi(r,a,l,x){return r={tag:r,create:l,deps:x,inst:a,next:null},a=Ft.updateQueue,a===null&&(a=bh(),Ft.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=r.next=r:(x=l.next,l.next=r,r.next=x,a.lastEffect=r),r}function R0(){return{destroy:void 0,resource:void 0}}function Ev(){return Vs().memoizedState}function z0(r,a,l,x){var v=vr();x=x===void 0?null:x,Ft.flags|=r,v.memoizedState=Yi(1|a,R0(),l,x)}function cl(r,a,l,x){var v=Vs();x=x===void 0?null:x;var A=v.memoizedState.inst;is!==null&&x!==null&&mh(x,is.memoizedState.deps)?v.memoizedState=Yi(a,A,l,x):(Ft.flags|=r,v.memoizedState=Yi(1|a,A,l,x))}function kv(r,a){z0(8390656,8,r,a)}function _v(r,a){cl(2048,8,r,a)}function Bv(r,a){return cl(4,2,r,a)}function Sv(r,a){return cl(4,4,r,a)}function Dv(r,a){if(typeof a=="function"){r=r();var l=a(r);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Fv(r,a,l){l=l!=null?l.concat([r]):null,cl(4,4,Dv.bind(null,a,r),l)}function Ah(){}function Pv(r,a){var l=Vs();a=a===void 0?null:a;var x=l.memoizedState;return a!==null&&mh(a,x[1])?x[0]:(l.memoizedState=[r,a],r)}function Tv(r,a){var l=Vs();a=a===void 0?null:a;var x=l.memoizedState;if(a!==null&&mh(a,x[1]))return x[0];if(x=r(),ri){Ge(!0);try{r()}finally{Ge(!1)}}return l.memoizedState=[x,a],x}function Ch(r,a,l){return l===void 0||(cn&1073741824)!==0?r.memoizedState=a:(r.memoizedState=l,r=Ry(),Ft.lanes|=r,fn|=r,l)}function Ov(r,a,l,x){return Sr(l,a)?l:Hi.current!==null?(r=Ch(r,l,x),Sr(r,a)||(Zs=!0),r):(cn&42)===0?(Zs=!0,r.memoizedState=l):(r=Ry(),Ft.lanes|=r,fn|=r,a)}function Mv(r,a,l,x,v){var A=O.p;O.p=A!==0&&8>A?A:8;var z=I.T,U={};I.T=U,_h(r,!1,a,l);try{var ae=v(),ge=I.S;if(ge!==null&&ge(U,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Se=O8(ae,x);dl(r,a,Se,Or(r))}else dl(r,a,x,Or(r))}catch(Te){dl(r,a,{then:function(){},status:"rejected",reason:Te},Or())}finally{O.p=A,I.T=z}}function L8(){}function Eh(r,a,l,x){if(r.tag!==5)throw Error(i(476));var v=Rv(r).queue;Mv(r,v,a,G,l===null?L8:function(){return zv(r),l(x)})}function Rv(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:G},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:l},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function zv(r){var a=Rv(r).next.queue;dl(r,a,{},Or())}function kh(){return cr(_l)}function Iv(){return Vs().memoizedState}function Lv(){return Vs().memoizedState}function q8(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var l=Or();r=on(l);var x=ln(a,r,l);x!==null&&(Mr(x,a,l),al(x,a,l)),a={cache:rh()},r.payload=a;return}a=a.return}}function $8(r,a,l){var x=Or();l={lane:x,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},I0(r)?$v(a,l):(l=Gm(r,a,l,x),l!==null&&(Mr(l,r,x),Uv(l,a,x)))}function qv(r,a,l){var x=Or();dl(r,a,l,x)}function dl(r,a,l,x){var v={lane:x,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(I0(r))$v(a,v);else{var A=r.alternate;if(r.lanes===0&&(A===null||A.lanes===0)&&(A=a.lastRenderedReducer,A!==null))try{var z=a.lastRenderedState,U=A(z,l);if(v.hasEagerState=!0,v.eagerState=U,Sr(U,z))return N0(r,a,v,0),bs===null&&j0(),!1}catch{}finally{}if(l=Gm(r,a,v,x),l!==null)return Mr(l,r,x),Uv(l,a,x),!0}return!1}function _h(r,a,l,x){if(x={lane:2,revertLane:ip(),action:x,hasEagerState:!1,eagerState:null,next:null},I0(r)){if(a)throw Error(i(479))}else a=Gm(r,l,x,2),a!==null&&Mr(a,r,2)}function I0(r){var a=r.alternate;return r===Ft||a!==null&&a===Ft}function $v(r,a){Ji=P0=!0;var l=r.pending;l===null?a.next=a:(a.next=l.next,l.next=a),r.pending=a}function Uv(r,a,l){if((l&4194048)!==0){var x=a.lanes;x&=r.pendingLanes,l|=x,a.lanes=l,_e(r,l)}}var L0={readContext:cr,use:O0,useCallback:Os,useContext:Os,useEffect:Os,useImperativeHandle:Os,useLayoutEffect:Os,useInsertionEffect:Os,useMemo:Os,useReducer:Os,useRef:Os,useState:Os,useDebugValue:Os,useDeferredValue:Os,useTransition:Os,useSyncExternalStore:Os,useId:Os,useHostTransitionStatus:Os,useFormState:Os,useActionState:Os,useOptimistic:Os,useMemoCache:Os,useCacheRefresh:Os},Vv={readContext:cr,use:O0,useCallback:function(r,a){return vr().memoizedState=[r,a===void 0?null:a],r},useContext:cr,useEffect:kv,useImperativeHandle:function(r,a,l){l=l!=null?l.concat([r]):null,z0(4194308,4,Dv.bind(null,a,r),l)},useLayoutEffect:function(r,a){return z0(4194308,4,r,a)},useInsertionEffect:function(r,a){z0(4,2,r,a)},useMemo:function(r,a){var l=vr();a=a===void 0?null:a;var x=r();if(ri){Ge(!0);try{r()}finally{Ge(!1)}}return l.memoizedState=[x,a],x},useReducer:function(r,a,l){var x=vr();if(l!==void 0){var v=l(a);if(ri){Ge(!0);try{l(a)}finally{Ge(!1)}}}else v=a;return x.memoizedState=x.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},x.queue=r,r=r.dispatch=$8.bind(null,Ft,r),[x.memoizedState,r]},useRef:function(r){var a=vr();return r={current:r},a.memoizedState=r},useState:function(r){r=Nh(r);var a=r.queue,l=qv.bind(null,Ft,a);return a.dispatch=l,[r.memoizedState,l]},useDebugValue:Ah,useDeferredValue:function(r,a){var l=vr();return Ch(l,r,a)},useTransition:function(){var r=Nh(!1);return r=Mv.bind(null,Ft,r.queue,!0,!1),vr().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,l){var x=Ft,v=vr();if(Kt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),bs===null)throw Error(i(349));(Lt&124)!==0||xv(x,a,l)}v.memoizedState=l;var A={value:l,getSnapshot:a};return v.queue=A,kv(mv.bind(null,x,A,r),[r]),x.flags|=2048,Yi(9,R0(),uv.bind(null,x,A,l,a),null),l},useId:function(){var r=vr(),a=bs.identifierPrefix;if(Kt){var l=Fa,x=Da;l=(x&~(1<<32-yt(x)-1)).toString(32)+l,a=""+a+"R"+l,l=T0++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=M8++,a=""+a+"r"+l.toString(32)+"";return r.memoizedState=a},useHostTransitionStatus:kh,useFormState:Nv,useActionState:Nv,useOptimistic:function(r){var a=vr();a.memoizedState=a.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=_h.bind(null,Ft,!0,l),l.dispatch=a,[r,a]},useMemoCache:vh,useCacheRefresh:function(){return vr().memoizedState=q8.bind(null,Ft)}},Hv={readContext:cr,use:O0,useCallback:Pv,useContext:cr,useEffect:_v,useImperativeHandle:Fv,useInsertionEffect:Bv,useLayoutEffect:Sv,useMemo:Tv,useReducer:M0,useRef:Ev,useState:function(){return M0(Oa)},useDebugValue:Ah,useDeferredValue:function(r,a){var l=Vs();return Ov(l,is.memoizedState,r,a)},useTransition:function(){var r=M0(Oa)[0],a=Vs().memoizedState;return[typeof r=="boolean"?r:ll(r),a]},useSyncExternalStore:dv,useId:Iv,useHostTransitionStatus:kh,useFormState:wv,useActionState:wv,useOptimistic:function(r,a){var l=Vs();return fv(l,is,r,a)},useMemoCache:vh,useCacheRefresh:Lv},U8={readContext:cr,use:O0,useCallback:Pv,useContext:cr,useEffect:_v,useImperativeHandle:Fv,useInsertionEffect:Bv,useLayoutEffect:Sv,useMemo:Tv,useReducer:jh,useRef:Ev,useState:function(){return jh(Oa)},useDebugValue:Ah,useDeferredValue:function(r,a){var l=Vs();return is===null?Ch(l,r,a):Ov(l,is.memoizedState,r,a)},useTransition:function(){var r=jh(Oa)[0],a=Vs().memoizedState;return[typeof r=="boolean"?r:ll(r),a]},useSyncExternalStore:dv,useId:Iv,useHostTransitionStatus:kh,useFormState:Cv,useActionState:Cv,useOptimistic:function(r,a){var l=Vs();return is!==null?fv(l,is,r,a):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:vh,useCacheRefresh:Lv},Qi=null,xl=0;function q0(r){var a=xl;return xl+=1,Qi===null&&(Qi=[]),sv(Qi,r,a)}function ul(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function $0(r,a){throw a.$$typeof===f?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Jv(r){var a=r._init;return a(r._payload)}function Gv(r){function a(he,ce){if(r){var fe=he.deletions;fe===null?(he.deletions=[ce],he.flags|=16):fe.push(ce)}}function l(he,ce){if(!r)return null;for(;ce!==null;)a(he,ce),ce=ce.sibling;return null}function x(he){for(var ce=new Map;he!==null;)he.key!==null?ce.set(he.key,he):ce.set(he.index,he),he=he.sibling;return ce}function v(he,ce){return he=Sa(he,ce),he.index=0,he.sibling=null,he}function A(he,ce,fe){return he.index=fe,r?(fe=he.alternate,fe!==null?(fe=fe.index,fe<ce?(he.flags|=67108866,ce):fe):(he.flags|=67108866,ce)):(he.flags|=1048576,ce)}function z(he){return r&&he.alternate===null&&(he.flags|=67108866),he}function U(he,ce,fe,Fe){return ce===null||ce.tag!==6?(ce=Qm(fe,he.mode,Fe),ce.return=he,ce):(ce=v(ce,fe),ce.return=he,ce)}function ae(he,ce,fe,Fe){var at=fe.type;return at===b?Se(he,ce,fe.props.children,Fe,fe.key):ce!==null&&(ce.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===F&&Jv(at)===ce.type)?(ce=v(ce,fe.props),ul(ce,fe),ce.return=he,ce):(ce=A0(fe.type,fe.key,fe.props,null,he.mode,Fe),ul(ce,fe),ce.return=he,ce)}function ge(he,ce,fe,Fe){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==fe.containerInfo||ce.stateNode.implementation!==fe.implementation?(ce=Wm(fe,he.mode,Fe),ce.return=he,ce):(ce=v(ce,fe.children||[]),ce.return=he,ce)}function Se(he,ce,fe,Fe,at){return ce===null||ce.tag!==7?(ce=Qn(fe,he.mode,Fe,at),ce.return=he,ce):(ce=v(ce,fe),ce.return=he,ce)}function Te(he,ce,fe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=Qm(""+ce,he.mode,fe),ce.return=he,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case g:return fe=A0(ce.type,ce.key,ce.props,null,he.mode,fe),ul(fe,ce),fe.return=he,fe;case y:return ce=Wm(ce,he.mode,fe),ce.return=he,ce;case F:var Fe=ce._init;return ce=Fe(ce._payload),Te(he,ce,fe)}if(ne(ce)||L(ce))return ce=Qn(ce,he.mode,fe,null),ce.return=he,ce;if(typeof ce.then=="function")return Te(he,q0(ce),fe);if(ce.$$typeof===S)return Te(he,_0(he,ce),fe);$0(he,ce)}return null}function ye(he,ce,fe,Fe){var at=ce!==null?ce.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return at!==null?null:U(he,ce,""+fe,Fe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case g:return fe.key===at?ae(he,ce,fe,Fe):null;case y:return fe.key===at?ge(he,ce,fe,Fe):null;case F:return at=fe._init,fe=at(fe._payload),ye(he,ce,fe,Fe)}if(ne(fe)||L(fe))return at!==null?null:Se(he,ce,fe,Fe,null);if(typeof fe.then=="function")return ye(he,ce,q0(fe),Fe);if(fe.$$typeof===S)return ye(he,ce,_0(he,fe),Fe);$0(he,fe)}return null}function je(he,ce,fe,Fe,at){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return he=he.get(fe)||null,U(ce,he,""+Fe,at);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case g:return he=he.get(Fe.key===null?fe:Fe.key)||null,ae(ce,he,Fe,at);case y:return he=he.get(Fe.key===null?fe:Fe.key)||null,ge(ce,he,Fe,at);case F:var Tt=Fe._init;return Fe=Tt(Fe._payload),je(he,ce,fe,Fe,at)}if(ne(Fe)||L(Fe))return he=he.get(fe)||null,Se(ce,he,Fe,at,null);if(typeof Fe.then=="function")return je(he,ce,fe,q0(Fe),at);if(Fe.$$typeof===S)return je(he,ce,fe,_0(ce,Fe),at);$0(ce,Fe)}return null}function At(he,ce,fe,Fe){for(var at=null,Tt=null,mt=ce,vt=ce=0,tr=null;mt!==null&&vt<fe.length;vt++){mt.index>vt?(tr=mt,mt=null):tr=mt.sibling;var Yt=ye(he,mt,fe[vt],Fe);if(Yt===null){mt===null&&(mt=tr);break}r&&mt&&Yt.alternate===null&&a(he,mt),ce=A(Yt,ce,vt),Tt===null?at=Yt:Tt.sibling=Yt,Tt=Yt,mt=tr}if(vt===fe.length)return l(he,mt),Kt&&Kn(he,vt),at;if(mt===null){for(;vt<fe.length;vt++)mt=Te(he,fe[vt],Fe),mt!==null&&(ce=A(mt,ce,vt),Tt===null?at=mt:Tt.sibling=mt,Tt=mt);return Kt&&Kn(he,vt),at}for(mt=x(mt);vt<fe.length;vt++)tr=je(mt,he,vt,fe[vt],Fe),tr!==null&&(r&&tr.alternate!==null&&mt.delete(tr.key===null?vt:tr.key),ce=A(tr,ce,vt),Tt===null?at=tr:Tt.sibling=tr,Tt=tr);return r&&mt.forEach(function(Cn){return a(he,Cn)}),Kt&&Kn(he,vt),at}function gt(he,ce,fe,Fe){if(fe==null)throw Error(i(151));for(var at=null,Tt=null,mt=ce,vt=ce=0,tr=null,Yt=fe.next();mt!==null&&!Yt.done;vt++,Yt=fe.next()){mt.index>vt?(tr=mt,mt=null):tr=mt.sibling;var Cn=ye(he,mt,Yt.value,Fe);if(Cn===null){mt===null&&(mt=tr);break}r&&mt&&Cn.alternate===null&&a(he,mt),ce=A(Cn,ce,vt),Tt===null?at=Cn:Tt.sibling=Cn,Tt=Cn,mt=tr}if(Yt.done)return l(he,mt),Kt&&Kn(he,vt),at;if(mt===null){for(;!Yt.done;vt++,Yt=fe.next())Yt=Te(he,Yt.value,Fe),Yt!==null&&(ce=A(Yt,ce,vt),Tt===null?at=Yt:Tt.sibling=Yt,Tt=Yt);return Kt&&Kn(he,vt),at}for(mt=x(mt);!Yt.done;vt++,Yt=fe.next())Yt=je(mt,he,vt,Yt.value,Fe),Yt!==null&&(r&&Yt.alternate!==null&&mt.delete(Yt.key===null?vt:Yt.key),ce=A(Yt,ce,vt),Tt===null?at=Yt:Tt.sibling=Yt,Tt=Yt);return r&&mt.forEach(function(VC){return a(he,VC)}),Kt&&Kn(he,vt),at}function ls(he,ce,fe,Fe){if(typeof fe=="object"&&fe!==null&&fe.type===b&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case g:e:{for(var at=fe.key;ce!==null;){if(ce.key===at){if(at=fe.type,at===b){if(ce.tag===7){l(he,ce.sibling),Fe=v(ce,fe.props.children),Fe.return=he,he=Fe;break e}}else if(ce.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===F&&Jv(at)===ce.type){l(he,ce.sibling),Fe=v(ce,fe.props),ul(Fe,fe),Fe.return=he,he=Fe;break e}l(he,ce);break}else a(he,ce);ce=ce.sibling}fe.type===b?(Fe=Qn(fe.props.children,he.mode,Fe,fe.key),Fe.return=he,he=Fe):(Fe=A0(fe.type,fe.key,fe.props,null,he.mode,Fe),ul(Fe,fe),Fe.return=he,he=Fe)}return z(he);case y:e:{for(at=fe.key;ce!==null;){if(ce.key===at)if(ce.tag===4&&ce.stateNode.containerInfo===fe.containerInfo&&ce.stateNode.implementation===fe.implementation){l(he,ce.sibling),Fe=v(ce,fe.children||[]),Fe.return=he,he=Fe;break e}else{l(he,ce);break}else a(he,ce);ce=ce.sibling}Fe=Wm(fe,he.mode,Fe),Fe.return=he,he=Fe}return z(he);case F:return at=fe._init,fe=at(fe._payload),ls(he,ce,fe,Fe)}if(ne(fe))return At(he,ce,fe,Fe);if(L(fe)){if(at=L(fe),typeof at!="function")throw Error(i(150));return fe=at.call(fe),gt(he,ce,fe,Fe)}if(typeof fe.then=="function")return ls(he,ce,q0(fe),Fe);if(fe.$$typeof===S)return ls(he,ce,_0(he,fe),Fe);$0(he,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,ce!==null&&ce.tag===6?(l(he,ce.sibling),Fe=v(ce,fe),Fe.return=he,he=Fe):(l(he,ce),Fe=Qm(fe,he.mode,Fe),Fe.return=he,he=Fe),z(he)):l(he,ce)}return function(he,ce,fe,Fe){try{xl=0;var at=ls(he,ce,fe,Fe);return Qi=null,at}catch(mt){if(mt===sl||mt===S0)throw mt;var Tt=Dr(29,mt,null,he.mode);return Tt.lanes=Fe,Tt.return=he,Tt}finally{}}}var Wi=Gv(!0),Yv=Gv(!1),Jr=ee(null),pa=null;function dn(r){var a=r.alternate;R(Qs,Qs.current&1),R(Jr,r),pa===null&&(a===null||Hi.current!==null||a.memoizedState!==null)&&(pa=r)}function Qv(r){if(r.tag===22){if(R(Qs,Qs.current),R(Jr,r),pa===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(pa=r)}}else xn()}function xn(){R(Qs,Qs.current),R(Jr,Jr.current)}function Ma(r){le(Jr),pa===r&&(pa=null),le(Qs)}var Qs=ee(0);function U0(r){for(var a=r;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||bp(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Bh(r,a,l,x){a=r.memoizedState,l=l(x,a),l=l==null?a:u({},a,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Sh={enqueueSetState:function(r,a,l){r=r._reactInternals;var x=Or(),v=on(x);v.payload=a,l!=null&&(v.callback=l),a=ln(r,v,x),a!==null&&(Mr(a,r,x),al(a,r,x))},enqueueReplaceState:function(r,a,l){r=r._reactInternals;var x=Or(),v=on(x);v.tag=1,v.payload=a,l!=null&&(v.callback=l),a=ln(r,v,x),a!==null&&(Mr(a,r,x),al(a,r,x))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var l=Or(),x=on(l);x.tag=2,a!=null&&(x.callback=a),a=ln(r,x,l),a!==null&&(Mr(a,r,l),al(a,r,l))}};function Wv(r,a,l,x,v,A,z){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(x,A,z):a.prototype&&a.prototype.isPureReactComponent?!Yo(l,x)||!Yo(v,A):!0}function Kv(r,a,l,x){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,x),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,x),a.state!==r&&Sh.enqueueReplaceState(a,a.state,null)}function ai(r,a){var l=a;if("ref"in a){l={};for(var x in a)x!=="ref"&&(l[x]=a[x])}if(r=r.defaultProps){l===a&&(l=u({},l));for(var v in r)l[v]===void 0&&(l[v]=r[v])}return l}var V0=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Xv(r){V0(r)}function Zv(r){console.error(r)}function ey(r){V0(r)}function H0(r,a){try{var l=r.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(x){setTimeout(function(){throw x})}}function ty(r,a,l){try{var x=r.onCaughtError;x(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Dh(r,a,l){return l=on(l),l.tag=3,l.payload={element:null},l.callback=function(){H0(r,a)},l}function sy(r){return r=on(r),r.tag=3,r}function ry(r,a,l,x){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var A=x.value;r.payload=function(){return v(A)},r.callback=function(){ty(a,l,x)}}var z=l.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(r.callback=function(){ty(a,l,x),typeof v!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var U=x.stack;this.componentDidCatch(x.value,{componentStack:U!==null?U:""})})}function V8(r,a,l,x,v){if(l.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(a=l.alternate,a!==null&&Zo(a,l,v,!0),l=Jr.current,l!==null){switch(l.tag){case 13:return pa===null?tp():l.alternate===null&&Ds===0&&(Ds=3),l.flags&=-257,l.flags|=65536,l.lanes=v,x===ih?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([x]):a.add(x),rp(r,x,v)),!1;case 22:return l.flags|=65536,x===ih?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([x])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([x]):l.add(x)),rp(r,x,v)),!1}throw Error(i(435,l.tag))}return rp(r,x,v),tp(),!1}if(Kt)return a=Jr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,x!==Zm&&(r=Error(i(422),{cause:x}),Xo($r(r,l)))):(x!==Zm&&(a=Error(i(423),{cause:x}),Xo($r(a,l))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,x=$r(x,l),v=Dh(r.stateNode,x,v),ch(r,v),Ds!==4&&(Ds=2)),!1;var A=Error(i(520),{cause:x});if(A=$r(A,l),vl===null?vl=[A]:vl.push(A),Ds!==4&&(Ds=2),a===null)return!0;x=$r(x,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,r=v&-v,l.lanes|=r,r=Dh(l.stateNode,x,r),ch(l,r),!1;case 1:if(a=l.type,A=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(gn===null||!gn.has(A))))return l.flags|=65536,v&=-v,l.lanes|=v,v=sy(v),ry(v,r,l,x),ch(l,v),!1}l=l.return}while(l!==null);return!1}var ay=Error(i(461)),Zs=!1;function ar(r,a,l,x){a.child=r===null?Yv(a,null,l,x):Wi(a,r.child,l,x)}function ny(r,a,l,x,v){l=l.render;var A=a.ref;if("ref"in x){var z={};for(var U in x)U!=="ref"&&(z[U]=x[U])}else z=x;return ti(a),x=hh(r,a,l,z,A,v),U=ph(),r!==null&&!Zs?(fh(r,a,v),Ra(r,a,v)):(Kt&&U&&Km(a),a.flags|=1,ar(r,a,x,v),a.child)}function iy(r,a,l,x,v){if(r===null){var A=l.type;return typeof A=="function"&&!Ym(A)&&A.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=A,oy(r,a,A,x,v)):(r=A0(l.type,null,x,a,a.mode,v),r.ref=a.ref,r.return=a,a.child=r)}if(A=r.child,!Ih(r,v)){var z=A.memoizedProps;if(l=l.compare,l=l!==null?l:Yo,l(z,x)&&r.ref===a.ref)return Ra(r,a,v)}return a.flags|=1,r=Sa(A,x),r.ref=a.ref,r.return=a,a.child=r}function oy(r,a,l,x,v){if(r!==null){var A=r.memoizedProps;if(Yo(A,x)&&r.ref===a.ref)if(Zs=!1,a.pendingProps=x=A,Ih(r,v))(r.flags&131072)!==0&&(Zs=!0);else return a.lanes=r.lanes,Ra(r,a,v)}return Fh(r,a,l,x,v)}function ly(r,a,l){var x=a.pendingProps,v=x.children,A=r!==null?r.memoizedState:null;if(x.mode==="hidden"){if((a.flags&128)!==0){if(x=A!==null?A.baseLanes|l:l,r!==null){for(v=a.child=r.child,A=0;v!==null;)A=A|v.lanes|v.childLanes,v=v.sibling;a.childLanes=A&~x}else a.childLanes=0,a.child=null;return cy(r,a,x,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&B0(a,A!==null?A.cachePool:null),A!==null?ov(a,A):xh(),Qv(a);else return a.lanes=a.childLanes=536870912,cy(r,a,A!==null?A.baseLanes|l:l,l)}else A!==null?(B0(a,A.cachePool),ov(a,A),xn(),a.memoizedState=null):(r!==null&&B0(a,null),xh(),xn());return ar(r,a,v,l),a.child}function cy(r,a,l,x){var v=nh();return v=v===null?null:{parent:Ys._currentValue,pool:v},a.memoizedState={baseLanes:l,cachePool:v},r!==null&&B0(a,null),xh(),Qv(a),r!==null&&Zo(r,a,x,!0),null}function J0(r,a){var l=a.ref;if(l===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(a.flags|=4194816)}}function Fh(r,a,l,x,v){return ti(a),l=hh(r,a,l,x,void 0,v),x=ph(),r!==null&&!Zs?(fh(r,a,v),Ra(r,a,v)):(Kt&&x&&Km(a),a.flags|=1,ar(r,a,l,v),a.child)}function dy(r,a,l,x,v,A){return ti(a),a.updateQueue=null,l=cv(a,x,l,v),lv(r),x=ph(),r!==null&&!Zs?(fh(r,a,A),Ra(r,a,A)):(Kt&&x&&Km(a),a.flags|=1,ar(r,a,l,A),a.child)}function xy(r,a,l,x,v){if(ti(a),a.stateNode===null){var A=Li,z=l.contextType;typeof z=="object"&&z!==null&&(A=cr(z)),A=new l(x,A),a.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Sh,a.stateNode=A,A._reactInternals=a,A=a.stateNode,A.props=x,A.state=a.memoizedState,A.refs={},oh(a),z=l.contextType,A.context=typeof z=="object"&&z!==null?cr(z):Li,A.state=a.memoizedState,z=l.getDerivedStateFromProps,typeof z=="function"&&(Bh(a,l,z,x),A.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(z=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),z!==A.state&&Sh.enqueueReplaceState(A,A.state,null),il(a,x,A,v),nl(),A.state=a.memoizedState),typeof A.componentDidMount=="function"&&(a.flags|=4194308),x=!0}else if(r===null){A=a.stateNode;var U=a.memoizedProps,ae=ai(l,U);A.props=ae;var ge=A.context,Se=l.contextType;z=Li,typeof Se=="object"&&Se!==null&&(z=cr(Se));var Te=l.getDerivedStateFromProps;Se=typeof Te=="function"||typeof A.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,Se||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(U||ge!==z)&&Kv(a,A,x,z),nn=!1;var ye=a.memoizedState;A.state=ye,il(a,x,A,v),nl(),ge=a.memoizedState,U||ye!==ge||nn?(typeof Te=="function"&&(Bh(a,l,Te,x),ge=a.memoizedState),(ae=nn||Wv(a,l,ae,x,ye,ge,z))?(Se||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(a.flags|=4194308)):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=x,a.memoizedState=ge),A.props=x,A.state=ge,A.context=z,x=ae):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),x=!1)}else{A=a.stateNode,lh(r,a),z=a.memoizedProps,Se=ai(l,z),A.props=Se,Te=a.pendingProps,ye=A.context,ge=l.contextType,ae=Li,typeof ge=="object"&&ge!==null&&(ae=cr(ge)),U=l.getDerivedStateFromProps,(ge=typeof U=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z!==Te||ye!==ae)&&Kv(a,A,x,ae),nn=!1,ye=a.memoizedState,A.state=ye,il(a,x,A,v),nl();var je=a.memoizedState;z!==Te||ye!==je||nn||r!==null&&r.dependencies!==null&&k0(r.dependencies)?(typeof U=="function"&&(Bh(a,l,U,x),je=a.memoizedState),(Se=nn||Wv(a,l,Se,x,ye,je,ae)||r!==null&&r.dependencies!==null&&k0(r.dependencies))?(ge||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(x,je,ae),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(x,je,ae)),typeof A.componentDidUpdate=="function"&&(a.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof A.componentDidUpdate!="function"||z===r.memoizedProps&&ye===r.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ye===r.memoizedState||(a.flags|=1024),a.memoizedProps=x,a.memoizedState=je),A.props=x,A.state=je,A.context=ae,x=Se):(typeof A.componentDidUpdate!="function"||z===r.memoizedProps&&ye===r.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||z===r.memoizedProps&&ye===r.memoizedState||(a.flags|=1024),x=!1)}return A=x,J0(r,a),x=(a.flags&128)!==0,A||x?(A=a.stateNode,l=x&&typeof l.getDerivedStateFromError!="function"?null:A.render(),a.flags|=1,r!==null&&x?(a.child=Wi(a,r.child,null,v),a.child=Wi(a,null,l,v)):ar(r,a,l,v),a.memoizedState=A.state,r=a.child):r=Ra(r,a,v),r}function uy(r,a,l,x){return Ko(),a.flags|=256,ar(r,a,l,x),a.child}var Ph={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Th(r){return{baseLanes:r,cachePool:Zb()}}function Oh(r,a,l){return r=r!==null?r.childLanes&~l:0,a&&(r|=Gr),r}function my(r,a,l){var x=a.pendingProps,v=!1,A=(a.flags&128)!==0,z;if((z=A)||(z=r!==null&&r.memoizedState===null?!1:(Qs.current&2)!==0),z&&(v=!0,a.flags&=-129),z=(a.flags&32)!==0,a.flags&=-33,r===null){if(Kt){if(v?dn(a):xn(),Kt){var U=Ss,ae;if(ae=U){e:{for(ae=U,U=ha;ae.nodeType!==8;){if(!U){U=null;break e}if(ae=oa(ae.nextSibling),ae===null){U=null;break e}}U=ae}U!==null?(a.memoizedState={dehydrated:U,treeContext:Wn!==null?{id:Da,overflow:Fa}:null,retryLane:536870912,hydrationErrors:null},ae=Dr(18,null,null,0),ae.stateNode=U,ae.return=a,a.child=ae,mr=a,Ss=null,ae=!0):ae=!1}ae||Zn(a)}if(U=a.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return bp(U)?a.lanes=32:a.lanes=536870912,null;Ma(a)}return U=x.children,x=x.fallback,v?(xn(),v=a.mode,U=G0({mode:"hidden",children:U},v),x=Qn(x,v,l,null),U.return=a,x.return=a,U.sibling=x,a.child=U,v=a.child,v.memoizedState=Th(l),v.childLanes=Oh(r,z,l),a.memoizedState=Ph,x):(dn(a),Mh(a,U))}if(ae=r.memoizedState,ae!==null&&(U=ae.dehydrated,U!==null)){if(A)a.flags&256?(dn(a),a.flags&=-257,a=Rh(r,a,l)):a.memoizedState!==null?(xn(),a.child=r.child,a.flags|=128,a=null):(xn(),v=x.fallback,U=a.mode,x=G0({mode:"visible",children:x.children},U),v=Qn(v,U,l,null),v.flags|=2,x.return=a,v.return=a,x.sibling=v,a.child=x,Wi(a,r.child,null,l),x=a.child,x.memoizedState=Th(l),x.childLanes=Oh(r,z,l),a.memoizedState=Ph,a=v);else if(dn(a),bp(U)){if(z=U.nextSibling&&U.nextSibling.dataset,z)var ge=z.dgst;z=ge,x=Error(i(419)),x.stack="",x.digest=z,Xo({value:x,source:null,stack:null}),a=Rh(r,a,l)}else if(Zs||Zo(r,a,l,!1),z=(l&r.childLanes)!==0,Zs||z){if(z=bs,z!==null&&(x=l&-l,x=(x&42)!==0?1:$e(x),x=(x&(z.suspendedLanes|l))!==0?0:x,x!==0&&x!==ae.retryLane))throw ae.retryLane=x,Ii(r,x),Mr(z,r,x),ay;U.data==="$?"||tp(),a=Rh(r,a,l)}else U.data==="$?"?(a.flags|=192,a.child=r.child,a=null):(r=ae.treeContext,Ss=oa(U.nextSibling),mr=a,Kt=!0,Xn=null,ha=!1,r!==null&&(Vr[Hr++]=Da,Vr[Hr++]=Fa,Vr[Hr++]=Wn,Da=r.id,Fa=r.overflow,Wn=a),a=Mh(a,x.children),a.flags|=4096);return a}return v?(xn(),v=x.fallback,U=a.mode,ae=r.child,ge=ae.sibling,x=Sa(ae,{mode:"hidden",children:x.children}),x.subtreeFlags=ae.subtreeFlags&65011712,ge!==null?v=Sa(ge,v):(v=Qn(v,U,l,null),v.flags|=2),v.return=a,x.return=a,x.sibling=v,a.child=x,x=v,v=a.child,U=r.child.memoizedState,U===null?U=Th(l):(ae=U.cachePool,ae!==null?(ge=Ys._currentValue,ae=ae.parent!==ge?{parent:ge,pool:ge}:ae):ae=Zb(),U={baseLanes:U.baseLanes|l,cachePool:ae}),v.memoizedState=U,v.childLanes=Oh(r,z,l),a.memoizedState=Ph,x):(dn(a),l=r.child,r=l.sibling,l=Sa(l,{mode:"visible",children:x.children}),l.return=a,l.sibling=null,r!==null&&(z=a.deletions,z===null?(a.deletions=[r],a.flags|=16):z.push(r)),a.child=l,a.memoizedState=null,l)}function Mh(r,a){return a=G0({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function G0(r,a){return r=Dr(22,r,null,a),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Rh(r,a,l){return Wi(a,r.child,null,l),r=Mh(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function hy(r,a,l){r.lanes|=a;var x=r.alternate;x!==null&&(x.lanes|=a),th(r.return,a,l)}function zh(r,a,l,x,v){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:x,tail:l,tailMode:v}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=x,A.tail=l,A.tailMode=v)}function py(r,a,l){var x=a.pendingProps,v=x.revealOrder,A=x.tail;if(ar(r,a,x.children,l),x=Qs.current,(x&2)!==0)x=x&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hy(r,l,a);else if(r.tag===19)hy(r,l,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}x&=1}switch(R(Qs,x),v){case"forwards":for(l=a.child,v=null;l!==null;)r=l.alternate,r!==null&&U0(r)===null&&(v=l),l=l.sibling;l=v,l===null?(v=a.child,a.child=null):(v=l.sibling,l.sibling=null),zh(a,!1,v,l,A);break;case"backwards":for(l=null,v=a.child,a.child=null;v!==null;){if(r=v.alternate,r!==null&&U0(r)===null){a.child=v;break}r=v.sibling,v.sibling=l,l=v,v=r}zh(a,!0,l,null,A);break;case"together":zh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ra(r,a,l){if(r!==null&&(a.dependencies=r.dependencies),fn|=a.lanes,(l&a.childLanes)===0)if(r!==null){if(Zo(r,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,l=Sa(r,r.pendingProps),a.child=l,l.return=a;r.sibling!==null;)r=r.sibling,l=l.sibling=Sa(r,r.pendingProps),l.return=a;l.sibling=null}return a.child}function Ih(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&k0(r)))}function H8(r,a,l){switch(a.tag){case 3:xe(a,a.stateNode.containerInfo),an(a,Ys,r.memoizedState.cache),Ko();break;case 27:case 5:de(a);break;case 4:xe(a,a.stateNode.containerInfo);break;case 10:an(a,a.type,a.memoizedProps.value);break;case 13:var x=a.memoizedState;if(x!==null)return x.dehydrated!==null?(dn(a),a.flags|=128,null):(l&a.child.childLanes)!==0?my(r,a,l):(dn(a),r=Ra(r,a,l),r!==null?r.sibling:null);dn(a);break;case 19:var v=(r.flags&128)!==0;if(x=(l&a.childLanes)!==0,x||(Zo(r,a,l,!1),x=(l&a.childLanes)!==0),v){if(x)return py(r,a,l);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),R(Qs,Qs.current),x)break;return null;case 22:case 23:return a.lanes=0,ly(r,a,l);case 24:an(a,Ys,r.memoizedState.cache)}return Ra(r,a,l)}function fy(r,a,l){if(r!==null)if(r.memoizedProps!==a.pendingProps)Zs=!0;else{if(!Ih(r,l)&&(a.flags&128)===0)return Zs=!1,H8(r,a,l);Zs=(r.flags&131072)!==0}else Zs=!1,Kt&&(a.flags&1048576)!==0&&Jb(a,E0,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var x=a.elementType,v=x._init;if(x=v(x._payload),a.type=x,typeof x=="function")Ym(x)?(r=ai(x,r),a.tag=1,a=xy(null,a,x,r,l)):(a.tag=0,a=Fh(null,a,x,r,l));else{if(x!=null){if(v=x.$$typeof,v===_){a.tag=11,a=ny(null,a,x,r,l);break e}else if(v===D){a.tag=14,a=iy(null,a,x,r,l);break e}}throw a=Z(x)||x,Error(i(306,a,""))}}return a;case 0:return Fh(r,a,a.type,a.pendingProps,l);case 1:return x=a.type,v=ai(x,a.pendingProps),xy(r,a,x,v,l);case 3:e:{if(xe(a,a.stateNode.containerInfo),r===null)throw Error(i(387));x=a.pendingProps;var A=a.memoizedState;v=A.element,lh(r,a),il(a,x,null,l);var z=a.memoizedState;if(x=z.cache,an(a,Ys,x),x!==A.cache&&sh(a,[Ys],l,!0),nl(),x=z.element,A.isDehydrated)if(A={element:x,isDehydrated:!1,cache:z.cache},a.updateQueue.baseState=A,a.memoizedState=A,a.flags&256){a=uy(r,a,x,l);break e}else if(x!==v){v=$r(Error(i(424)),a),Xo(v),a=uy(r,a,x,l);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ss=oa(r.firstChild),mr=a,Kt=!0,Xn=null,ha=!0,l=Yv(a,null,x,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ko(),x===v){a=Ra(r,a,l);break e}ar(r,a,x,l)}a=a.child}return a;case 26:return J0(r,a),r===null?(l=y2(a.type,null,a.pendingProps,null))?a.memoizedState=l:Kt||(l=a.type,r=a.pendingProps,x=ou($.current).createElement(l),x[ct]=a,x[pt]=r,ir(x,l,r),us(x),a.stateNode=x):a.memoizedState=y2(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return de(a),r===null&&Kt&&(x=a.stateNode=g2(a.type,a.pendingProps,$.current),mr=a,ha=!0,v=Ss,yn(a.type)?(vp=v,Ss=oa(x.firstChild)):Ss=v),ar(r,a,a.pendingProps.children,l),J0(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Kt&&((v=x=Ss)&&(x=vC(x,a.type,a.pendingProps,ha),x!==null?(a.stateNode=x,mr=a,Ss=oa(x.firstChild),ha=!1,v=!0):v=!1),v||Zn(a)),de(a),v=a.type,A=a.pendingProps,z=r!==null?r.memoizedProps:null,x=A.children,pp(v,A)?x=null:z!==null&&pp(v,z)&&(a.flags|=32),a.memoizedState!==null&&(v=hh(r,a,R8,null,null,l),_l._currentValue=v),J0(r,a),ar(r,a,x,l),a.child;case 6:return r===null&&Kt&&((r=l=Ss)&&(l=yC(l,a.pendingProps,ha),l!==null?(a.stateNode=l,mr=a,Ss=null,r=!0):r=!1),r||Zn(a)),null;case 13:return my(r,a,l);case 4:return xe(a,a.stateNode.containerInfo),x=a.pendingProps,r===null?a.child=Wi(a,null,x,l):ar(r,a,x,l),a.child;case 11:return ny(r,a,a.type,a.pendingProps,l);case 7:return ar(r,a,a.pendingProps,l),a.child;case 8:return ar(r,a,a.pendingProps.children,l),a.child;case 12:return ar(r,a,a.pendingProps.children,l),a.child;case 10:return x=a.pendingProps,an(a,a.type,x.value),ar(r,a,x.children,l),a.child;case 9:return v=a.type._context,x=a.pendingProps.children,ti(a),v=cr(v),x=x(v),a.flags|=1,ar(r,a,x,l),a.child;case 14:return iy(r,a,a.type,a.pendingProps,l);case 15:return oy(r,a,a.type,a.pendingProps,l);case 19:return py(r,a,l);case 31:return x=a.pendingProps,l=a.mode,x={mode:x.mode,children:x.children},r===null?(l=G0(x,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=Sa(r.child,x),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return ly(r,a,l);case 24:return ti(a),x=cr(Ys),r===null?(v=nh(),v===null&&(v=bs,A=rh(),v.pooledCache=A,A.refCount++,A!==null&&(v.pooledCacheLanes|=l),v=A),a.memoizedState={parent:x,cache:v},oh(a),an(a,Ys,v)):((r.lanes&l)!==0&&(lh(r,a),il(a,null,null,l),nl()),v=r.memoizedState,A=a.memoizedState,v.parent!==x?(v={parent:x,cache:x},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),an(a,Ys,x)):(x=A.cache,an(a,Ys,x),x!==v.cache&&sh(a,[Ys],l,!0))),ar(r,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function za(r){r.flags|=4}function gy(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!C2(a)){if(a=Jr.current,a!==null&&((Lt&4194048)===Lt?pa!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||a!==pa))throw rl=ih,ev;r.flags|=8192}}function Y0(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?ke():536870912,r.lanes|=a,eo|=a)}function ml(r,a){if(!Kt)switch(r.tailMode){case"hidden":a=r.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var x=null;l!==null;)l.alternate!==null&&(x=l),l=l.sibling;x===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:x.sibling=null}}function ks(r){var a=r.alternate!==null&&r.alternate.child===r.child,l=0,x=0;if(a)for(var v=r.child;v!==null;)l|=v.lanes|v.childLanes,x|=v.subtreeFlags&65011712,x|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)l|=v.lanes|v.childLanes,x|=v.subtreeFlags,x|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=x,r.childLanes=l,a}function J8(r,a,l){var x=a.pendingProps;switch(Xm(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ks(a),null;case 1:return ks(a),null;case 3:return l=a.stateNode,x=null,r!==null&&(x=r.memoizedState.cache),a.memoizedState.cache!==x&&(a.flags|=2048),Ta(Ys),oe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Wo(a)?za(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Qb())),ks(a),null;case 26:return l=a.memoizedState,r===null?(za(a),l!==null?(ks(a),gy(a,l)):(ks(a),a.flags&=-16777217)):l?l!==r.memoizedState?(za(a),ks(a),gy(a,l)):(ks(a),a.flags&=-16777217):(r.memoizedProps!==x&&za(a),ks(a),a.flags&=-16777217),null;case 27:ve(a),l=$.current;var v=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==x&&za(a);else{if(!x){if(a.stateNode===null)throw Error(i(166));return ks(a),null}r=q.current,Wo(a)?Gb(a):(r=g2(v,x,l),a.stateNode=r,za(a))}return ks(a),null;case 5:if(ve(a),l=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==x&&za(a);else{if(!x){if(a.stateNode===null)throw Error(i(166));return ks(a),null}if(r=q.current,Wo(a))Gb(a);else{switch(v=ou($.current),r){case 1:r=v.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=v.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=v.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=v.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof x.is=="string"?v.createElement("select",{is:x.is}):v.createElement("select"),x.multiple?r.multiple=!0:x.size&&(r.size=x.size);break;default:r=typeof x.is=="string"?v.createElement(l,{is:x.is}):v.createElement(l)}}r[ct]=a,r[pt]=x;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)r.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=r;e:switch(ir(r,l,x),l){case"button":case"input":case"select":case"textarea":r=!!x.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&za(a)}}return ks(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==x&&za(a);else{if(typeof x!="string"&&a.stateNode===null)throw Error(i(166));if(r=$.current,Wo(a)){if(r=a.stateNode,l=a.memoizedProps,x=null,v=mr,v!==null)switch(v.tag){case 27:case 5:x=v.memoizedProps}r[ct]=a,r=!!(r.nodeValue===l||x!==null&&x.suppressHydrationWarning===!0||d2(r.nodeValue,l)),r||Zn(a)}else r=ou(r).createTextNode(x),r[ct]=a,a.stateNode=r}return ks(a),null;case 13:if(x=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Wo(a),x!==null&&x.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[ct]=a}else Ko(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ks(a),v=!1}else v=Qb(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Ma(a),a):(Ma(a),null)}if(Ma(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=x!==null,r=r!==null&&r.memoizedState!==null,l){x=a.child,v=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(v=x.alternate.memoizedState.cachePool.pool);var A=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(A=x.memoizedState.cachePool.pool),A!==v&&(x.flags|=2048)}return l!==r&&l&&(a.child.flags|=8192),Y0(a,a.updateQueue),ks(a),null;case 4:return oe(),r===null&&dp(a.stateNode.containerInfo),ks(a),null;case 10:return Ta(a.type),ks(a),null;case 19:if(le(Qs),v=a.memoizedState,v===null)return ks(a),null;if(x=(a.flags&128)!==0,A=v.rendering,A===null)if(x)ml(v,!1);else{if(Ds!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(A=U0(r),A!==null){for(a.flags|=128,ml(v,!1),r=A.updateQueue,a.updateQueue=r,Y0(a,r),a.subtreeFlags=0,r=l,l=a.child;l!==null;)Hb(l,r),l=l.sibling;return R(Qs,Qs.current&1|2),a.child}r=r.sibling}v.tail!==null&&Ue()>K0&&(a.flags|=128,x=!0,ml(v,!1),a.lanes=4194304)}else{if(!x)if(r=U0(A),r!==null){if(a.flags|=128,x=!0,r=r.updateQueue,a.updateQueue=r,Y0(a,r),ml(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!Kt)return ks(a),null}else 2*Ue()-v.renderingStartTime>K0&&l!==536870912&&(a.flags|=128,x=!0,ml(v,!1),a.lanes=4194304);v.isBackwards?(A.sibling=a.child,a.child=A):(r=v.last,r!==null?r.sibling=A:a.child=A,v.last=A)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=Ue(),a.sibling=null,r=Qs.current,R(Qs,x?r&1|2:r&1),a):(ks(a),null);case 22:case 23:return Ma(a),uh(),x=a.memoizedState!==null,r!==null?r.memoizedState!==null!==x&&(a.flags|=8192):x&&(a.flags|=8192),x?(l&536870912)!==0&&(a.flags&128)===0&&(ks(a),a.subtreeFlags&6&&(a.flags|=8192)):ks(a),l=a.updateQueue,l!==null&&Y0(a,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),x=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(x=a.memoizedState.cachePool.pool),x!==l&&(a.flags|=2048),r!==null&&le(si),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ta(Ys),ks(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function G8(r,a){switch(Xm(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ta(Ys),oe(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return ve(a),null;case 13:if(Ma(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ko()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return le(Qs),null;case 4:return oe(),null;case 10:return Ta(a.type),null;case 22:case 23:return Ma(a),uh(),r!==null&&le(si),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Ta(Ys),null;case 25:return null;default:return null}}function by(r,a){switch(Xm(a),a.tag){case 3:Ta(Ys),oe();break;case 26:case 27:case 5:ve(a);break;case 4:oe();break;case 13:Ma(a);break;case 19:le(Qs);break;case 10:Ta(a.type);break;case 22:case 23:Ma(a),uh(),r!==null&&le(si);break;case 24:Ta(Ys)}}function hl(r,a){try{var l=a.updateQueue,x=l!==null?l.lastEffect:null;if(x!==null){var v=x.next;l=v;do{if((l.tag&r)===r){x=void 0;var A=l.create,z=l.inst;x=A(),z.destroy=x}l=l.next}while(l!==v)}}catch(U){ms(a,a.return,U)}}function un(r,a,l){try{var x=a.updateQueue,v=x!==null?x.lastEffect:null;if(v!==null){var A=v.next;x=A;do{if((x.tag&r)===r){var z=x.inst,U=z.destroy;if(U!==void 0){z.destroy=void 0,v=a;var ae=l,ge=U;try{ge()}catch(Se){ms(v,ae,Se)}}}x=x.next}while(x!==A)}}catch(Se){ms(a,a.return,Se)}}function vy(r){var a=r.updateQueue;if(a!==null){var l=r.stateNode;try{iv(a,l)}catch(x){ms(r,r.return,x)}}}function yy(r,a,l){l.props=ai(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(x){ms(r,a,x)}}function pl(r,a){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var x=r.stateNode;break;case 30:x=r.stateNode;break;default:x=r.stateNode}typeof l=="function"?r.refCleanup=l(x):l.current=x}}catch(v){ms(r,a,v)}}function fa(r,a){var l=r.ref,x=r.refCleanup;if(l!==null)if(typeof x=="function")try{x()}catch(v){ms(r,a,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){ms(r,a,v)}else l.current=null}function jy(r){var a=r.type,l=r.memoizedProps,x=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&x.focus();break e;case"img":l.src?x.src=l.src:l.srcSet&&(x.srcset=l.srcSet)}}catch(v){ms(r,r.return,v)}}function Lh(r,a,l){try{var x=r.stateNode;hC(x,r.type,l,a),x[pt]=a}catch(v){ms(r,r.return,v)}}function Ny(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&yn(r.type)||r.tag===4}function qh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ny(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&yn(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $h(r,a,l){var x=r.tag;if(x===5||x===6)r=r.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(r),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=iu));else if(x!==4&&(x===27&&yn(r.type)&&(l=r.stateNode,a=null),r=r.child,r!==null))for($h(r,a,l),r=r.sibling;r!==null;)$h(r,a,l),r=r.sibling}function Q0(r,a,l){var x=r.tag;if(x===5||x===6)r=r.stateNode,a?l.insertBefore(r,a):l.appendChild(r);else if(x!==4&&(x===27&&yn(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Q0(r,a,l),r=r.sibling;r!==null;)Q0(r,a,l),r=r.sibling}function wy(r){var a=r.stateNode,l=r.memoizedProps;try{for(var x=r.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);ir(a,x,l),a[ct]=r,a[pt]=l}catch(A){ms(r,r.return,A)}}var Ia=!1,Ms=!1,Uh=!1,Ay=typeof WeakSet=="function"?WeakSet:Set,er=null;function Y8(r,a){if(r=r.containerInfo,mp=mu,r=Ob(r),qm(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var x=l.getSelection&&l.getSelection();if(x&&x.rangeCount!==0){l=x.anchorNode;var v=x.anchorOffset,A=x.focusNode;x=x.focusOffset;try{l.nodeType,A.nodeType}catch{l=null;break e}var z=0,U=-1,ae=-1,ge=0,Se=0,Te=r,ye=null;t:for(;;){for(var je;Te!==l||v!==0&&Te.nodeType!==3||(U=z+v),Te!==A||x!==0&&Te.nodeType!==3||(ae=z+x),Te.nodeType===3&&(z+=Te.nodeValue.length),(je=Te.firstChild)!==null;)ye=Te,Te=je;for(;;){if(Te===r)break t;if(ye===l&&++ge===v&&(U=z),ye===A&&++Se===x&&(ae=z),(je=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=je}l=U===-1||ae===-1?null:{start:U,end:ae}}else l=null}l=l||{start:0,end:0}}else l=null;for(hp={focusedElem:r,selectionRange:l},mu=!1,er=a;er!==null;)if(a=er,r=a.child,(a.subtreeFlags&1024)!==0&&r!==null)r.return=a,er=r;else for(;er!==null;){switch(a=er,A=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&A!==null){r=void 0,l=a,v=A.memoizedProps,A=A.memoizedState,x=l.stateNode;try{var At=ai(l.type,v,l.elementType===l.type);r=x.getSnapshotBeforeUpdate(At,A),x.__reactInternalSnapshotBeforeUpdate=r}catch(gt){ms(l,l.return,gt)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,l=r.nodeType,l===9)gp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":gp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,er=r;break}er=a.return}}function Cy(r,a,l){var x=l.flags;switch(l.tag){case 0:case 11:case 15:mn(r,l),x&4&&hl(5,l);break;case 1:if(mn(r,l),x&4)if(r=l.stateNode,a===null)try{r.componentDidMount()}catch(z){ms(l,l.return,z)}else{var v=ai(l.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(v,a,r.__reactInternalSnapshotBeforeUpdate)}catch(z){ms(l,l.return,z)}}x&64&&vy(l),x&512&&pl(l,l.return);break;case 3:if(mn(r,l),x&64&&(r=l.updateQueue,r!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{iv(r,a)}catch(z){ms(l,l.return,z)}}break;case 27:a===null&&x&4&&wy(l);case 26:case 5:mn(r,l),a===null&&x&4&&jy(l),x&512&&pl(l,l.return);break;case 12:mn(r,l);break;case 13:mn(r,l),x&4&&_y(r,l),x&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=rC.bind(null,l),jC(r,l))));break;case 22:if(x=l.memoizedState!==null||Ia,!x){a=a!==null&&a.memoizedState!==null||Ms,v=Ia;var A=Ms;Ia=x,(Ms=a)&&!A?hn(r,l,(l.subtreeFlags&8772)!==0):mn(r,l),Ia=v,Ms=A}break;case 30:break;default:mn(r,l)}}function Ey(r){var a=r.alternate;a!==null&&(r.alternate=null,Ey(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Zt(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ws=null,yr=!1;function La(r,a,l){for(l=l.child;l!==null;)ky(r,a,l),l=l.sibling}function ky(r,a,l){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Ne,l)}catch{}switch(l.tag){case 26:Ms||fa(l,a),La(r,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ms||fa(l,a);var x=ws,v=yr;yn(l.type)&&(ws=l.stateNode,yr=!1),La(r,a,l),Al(l.stateNode),ws=x,yr=v;break;case 5:Ms||fa(l,a);case 6:if(x=ws,v=yr,ws=null,La(r,a,l),ws=x,yr=v,ws!==null)if(yr)try{(ws.nodeType===9?ws.body:ws.nodeName==="HTML"?ws.ownerDocument.body:ws).removeChild(l.stateNode)}catch(A){ms(l,a,A)}else try{ws.removeChild(l.stateNode)}catch(A){ms(l,a,A)}break;case 18:ws!==null&&(yr?(r=ws,p2(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Fl(r)):p2(ws,l.stateNode));break;case 4:x=ws,v=yr,ws=l.stateNode.containerInfo,yr=!0,La(r,a,l),ws=x,yr=v;break;case 0:case 11:case 14:case 15:Ms||un(2,l,a),Ms||un(4,l,a),La(r,a,l);break;case 1:Ms||(fa(l,a),x=l.stateNode,typeof x.componentWillUnmount=="function"&&yy(l,a,x)),La(r,a,l);break;case 21:La(r,a,l);break;case 22:Ms=(x=Ms)||l.memoizedState!==null,La(r,a,l),Ms=x;break;default:La(r,a,l)}}function _y(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Fl(r)}catch(l){ms(a,a.return,l)}}function Q8(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new Ay),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new Ay),a;default:throw Error(i(435,r.tag))}}function Vh(r,a){var l=Q8(r);a.forEach(function(x){var v=aC.bind(null,r,x);l.has(x)||(l.add(x),x.then(v,v))})}function Fr(r,a){var l=a.deletions;if(l!==null)for(var x=0;x<l.length;x++){var v=l[x],A=r,z=a,U=z;e:for(;U!==null;){switch(U.tag){case 27:if(yn(U.type)){ws=U.stateNode,yr=!1;break e}break;case 5:ws=U.stateNode,yr=!1;break e;case 3:case 4:ws=U.stateNode.containerInfo,yr=!0;break e}U=U.return}if(ws===null)throw Error(i(160));ky(A,z,v),ws=null,yr=!1,A=v.alternate,A!==null&&(A.return=null),v.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)By(a,r),a=a.sibling}var ia=null;function By(r,a){var l=r.alternate,x=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Fr(a,r),Pr(r),x&4&&(un(3,r,r.return),hl(3,r),un(5,r,r.return));break;case 1:Fr(a,r),Pr(r),x&512&&(Ms||l===null||fa(l,l.return)),x&64&&Ia&&(r=r.updateQueue,r!==null&&(x=r.callbacks,x!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?x:l.concat(x))));break;case 26:var v=ia;if(Fr(a,r),Pr(r),x&512&&(Ms||l===null||fa(l,l.return)),x&4){var A=l!==null?l.memoizedState:null;if(x=r.memoizedState,l===null)if(x===null)if(r.stateNode===null){e:{x=r.type,l=r.memoizedProps,v=v.ownerDocument||v;t:switch(x){case"title":A=v.getElementsByTagName("title")[0],(!A||A[zt]||A[ct]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=v.createElement(x),v.head.insertBefore(A,v.querySelector("head > title"))),ir(A,x,l),A[ct]=r,us(A),x=A;break e;case"link":var z=w2("link","href",v).get(x+(l.href||""));if(z){for(var U=0;U<z.length;U++)if(A=z[U],A.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&A.getAttribute("rel")===(l.rel==null?null:l.rel)&&A.getAttribute("title")===(l.title==null?null:l.title)&&A.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){z.splice(U,1);break t}}A=v.createElement(x),ir(A,x,l),v.head.appendChild(A);break;case"meta":if(z=w2("meta","content",v).get(x+(l.content||""))){for(U=0;U<z.length;U++)if(A=z[U],A.getAttribute("content")===(l.content==null?null:""+l.content)&&A.getAttribute("name")===(l.name==null?null:l.name)&&A.getAttribute("property")===(l.property==null?null:l.property)&&A.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&A.getAttribute("charset")===(l.charSet==null?null:l.charSet)){z.splice(U,1);break t}}A=v.createElement(x),ir(A,x,l),v.head.appendChild(A);break;default:throw Error(i(468,x))}A[ct]=r,us(A),x=A}r.stateNode=x}else A2(v,r.type,r.stateNode);else r.stateNode=N2(v,x,r.memoizedProps);else A!==x?(A===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):A.count--,x===null?A2(v,r.type,r.stateNode):N2(v,x,r.memoizedProps)):x===null&&r.stateNode!==null&&Lh(r,r.memoizedProps,l.memoizedProps)}break;case 27:Fr(a,r),Pr(r),x&512&&(Ms||l===null||fa(l,l.return)),l!==null&&x&4&&Lh(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Fr(a,r),Pr(r),x&512&&(Ms||l===null||fa(l,l.return)),r.flags&32){v=r.stateNode;try{ft(v,"")}catch(je){ms(r,r.return,je)}}x&4&&r.stateNode!=null&&(v=r.memoizedProps,Lh(r,v,l!==null?l.memoizedProps:v)),x&1024&&(Uh=!0);break;case 6:if(Fr(a,r),Pr(r),x&4){if(r.stateNode===null)throw Error(i(162));x=r.memoizedProps,l=r.stateNode;try{l.nodeValue=x}catch(je){ms(r,r.return,je)}}break;case 3:if(du=null,v=ia,ia=lu(a.containerInfo),Fr(a,r),ia=v,Pr(r),x&4&&l!==null&&l.memoizedState.isDehydrated)try{Fl(a.containerInfo)}catch(je){ms(r,r.return,je)}Uh&&(Uh=!1,Sy(r));break;case 4:x=ia,ia=lu(r.stateNode.containerInfo),Fr(a,r),Pr(r),ia=x;break;case 12:Fr(a,r),Pr(r);break;case 13:Fr(a,r),Pr(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wh=Ue()),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,Vh(r,x)));break;case 22:v=r.memoizedState!==null;var ae=l!==null&&l.memoizedState!==null,ge=Ia,Se=Ms;if(Ia=ge||v,Ms=Se||ae,Fr(a,r),Ms=Se,Ia=ge,Pr(r),x&8192)e:for(a=r.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(l===null||ae||Ia||Ms||ni(r)),l=null,a=r;;){if(a.tag===5||a.tag===26){if(l===null){ae=l=a;try{if(A=ae.stateNode,v)z=A.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{U=ae.stateNode;var Te=ae.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;U.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(je){ms(ae,ae.return,je)}}}else if(a.tag===6){if(l===null){ae=a;try{ae.stateNode.nodeValue=v?"":ae.memoizedProps}catch(je){ms(ae,ae.return,je)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}x&4&&(x=r.updateQueue,x!==null&&(l=x.retryQueue,l!==null&&(x.retryQueue=null,Vh(r,l))));break;case 19:Fr(a,r),Pr(r),x&4&&(x=r.updateQueue,x!==null&&(r.updateQueue=null,Vh(r,x)));break;case 30:break;case 21:break;default:Fr(a,r),Pr(r)}}function Pr(r){var a=r.flags;if(a&2){try{for(var l,x=r.return;x!==null;){if(Ny(x)){l=x;break}x=x.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var v=l.stateNode,A=qh(r);Q0(r,A,v);break;case 5:var z=l.stateNode;l.flags&32&&(ft(z,""),l.flags&=-33);var U=qh(r);Q0(r,U,z);break;case 3:case 4:var ae=l.stateNode.containerInfo,ge=qh(r);$h(r,ge,ae);break;default:throw Error(i(161))}}catch(Se){ms(r,r.return,Se)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function Sy(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;Sy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function mn(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Cy(r,a.alternate,a),a=a.sibling}function ni(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:un(4,a,a.return),ni(a);break;case 1:fa(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&yy(a,a.return,l),ni(a);break;case 27:Al(a.stateNode);case 26:case 5:fa(a,a.return),ni(a);break;case 22:a.memoizedState===null&&ni(a);break;case 30:ni(a);break;default:ni(a)}r=r.sibling}}function hn(r,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var x=a.alternate,v=r,A=a,z=A.flags;switch(A.tag){case 0:case 11:case 15:hn(v,A,l),hl(4,A);break;case 1:if(hn(v,A,l),x=A,v=x.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ge){ms(x,x.return,ge)}if(x=A,v=x.updateQueue,v!==null){var U=x.stateNode;try{var ae=v.shared.hiddenCallbacks;if(ae!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ae.length;v++)nv(ae[v],U)}catch(ge){ms(x,x.return,ge)}}l&&z&64&&vy(A),pl(A,A.return);break;case 27:wy(A);case 26:case 5:hn(v,A,l),l&&x===null&&z&4&&jy(A),pl(A,A.return);break;case 12:hn(v,A,l);break;case 13:hn(v,A,l),l&&z&4&&_y(v,A);break;case 22:A.memoizedState===null&&hn(v,A,l),pl(A,A.return);break;case 30:break;default:hn(v,A,l)}a=a.sibling}}function Hh(r,a){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&el(l))}function Jh(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&el(r))}function ga(r,a,l,x){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Dy(r,a,l,x),a=a.sibling}function Dy(r,a,l,x){var v=a.flags;switch(a.tag){case 0:case 11:case 15:ga(r,a,l,x),v&2048&&hl(9,a);break;case 1:ga(r,a,l,x);break;case 3:ga(r,a,l,x),v&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&el(r)));break;case 12:if(v&2048){ga(r,a,l,x),r=a.stateNode;try{var A=a.memoizedProps,z=A.id,U=A.onPostCommit;typeof U=="function"&&U(z,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ae){ms(a,a.return,ae)}}else ga(r,a,l,x);break;case 13:ga(r,a,l,x);break;case 23:break;case 22:A=a.stateNode,z=a.alternate,a.memoizedState!==null?A._visibility&2?ga(r,a,l,x):fl(r,a):A._visibility&2?ga(r,a,l,x):(A._visibility|=2,Ki(r,a,l,x,(a.subtreeFlags&10256)!==0)),v&2048&&Hh(z,a);break;case 24:ga(r,a,l,x),v&2048&&Jh(a.alternate,a);break;default:ga(r,a,l,x)}}function Ki(r,a,l,x,v){for(v=v&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var A=r,z=a,U=l,ae=x,ge=z.flags;switch(z.tag){case 0:case 11:case 15:Ki(A,z,U,ae,v),hl(8,z);break;case 23:break;case 22:var Se=z.stateNode;z.memoizedState!==null?Se._visibility&2?Ki(A,z,U,ae,v):fl(A,z):(Se._visibility|=2,Ki(A,z,U,ae,v)),v&&ge&2048&&Hh(z.alternate,z);break;case 24:Ki(A,z,U,ae,v),v&&ge&2048&&Jh(z.alternate,z);break;default:Ki(A,z,U,ae,v)}a=a.sibling}}function fl(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=r,x=a,v=x.flags;switch(x.tag){case 22:fl(l,x),v&2048&&Hh(x.alternate,x);break;case 24:fl(l,x),v&2048&&Jh(x.alternate,x);break;default:fl(l,x)}a=a.sibling}}var gl=8192;function Xi(r){if(r.subtreeFlags&gl)for(r=r.child;r!==null;)Fy(r),r=r.sibling}function Fy(r){switch(r.tag){case 26:Xi(r),r.flags&gl&&r.memoizedState!==null&&TC(ia,r.memoizedState,r.memoizedProps);break;case 5:Xi(r);break;case 3:case 4:var a=ia;ia=lu(r.stateNode.containerInfo),Xi(r),ia=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=gl,gl=16777216,Xi(r),gl=a):Xi(r));break;default:Xi(r)}}function Py(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function bl(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var x=a[l];er=x,Oy(x,r)}Py(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ty(r),r=r.sibling}function Ty(r){switch(r.tag){case 0:case 11:case 15:bl(r),r.flags&2048&&un(9,r,r.return);break;case 3:bl(r);break;case 12:bl(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,W0(r)):bl(r);break;default:bl(r)}}function W0(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var x=a[l];er=x,Oy(x,r)}Py(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:un(8,a,a.return),W0(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,W0(a));break;default:W0(a)}r=r.sibling}}function Oy(r,a){for(;er!==null;){var l=er;switch(l.tag){case 0:case 11:case 15:un(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var x=l.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:el(l.memoizedState.cache)}if(x=l.child,x!==null)x.return=l,er=x;else e:for(l=r;er!==null;){x=er;var v=x.sibling,A=x.return;if(Ey(x),x===l){er=null;break e}if(v!==null){v.return=A,er=v;break e}er=A}}}var W8={getCacheForType:function(r){var a=cr(Ys),l=a.data.get(r);return l===void 0&&(l=r(),a.data.set(r,l)),l}},K8=typeof WeakMap=="function"?WeakMap:Map,ts=0,bs=null,Mt=null,Lt=0,ss=0,Tr=null,pn=!1,Zi=!1,Gh=!1,qa=0,Ds=0,fn=0,ii=0,Yh=0,Gr=0,eo=0,vl=null,jr=null,Qh=!1,Wh=0,K0=1/0,X0=null,gn=null,nr=0,bn=null,to=null,so=0,Kh=0,Xh=null,My=null,yl=0,Zh=null;function Or(){if((ts&2)!==0&&Lt!==0)return Lt&-Lt;if(I.T!==null){var r=Ui;return r!==0?r:ip()}return ie()}function Ry(){Gr===0&&(Gr=(Lt&536870912)===0||Kt?se():536870912);var r=Jr.current;return r!==null&&(r.flags|=32),Gr}function Mr(r,a,l){(r===bs&&(ss===2||ss===9)||r.cancelPendingCommit!==null)&&(ro(r,0),vn(r,Lt,Gr,!1)),ze(r,l),((ts&2)===0||r!==bs)&&(r===bs&&((ts&2)===0&&(ii|=l),Ds===4&&vn(r,Lt,Gr,!1)),ba(r))}function zy(r,a,l){if((ts&6)!==0)throw Error(i(327));var x=!l&&(a&124)===0&&(a&r.expiredLanes)===0||K(r,a),v=x?eC(r,a):sp(r,a,!0),A=x;do{if(v===0){Zi&&!x&&vn(r,a,0,!1);break}else{if(l=r.current.alternate,A&&!X8(l)){v=sp(r,a,!1),A=!1;continue}if(v===2){if(A=a,r.errorRecoveryDisabledLanes&A)var z=0;else z=r.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){a=z;e:{var U=r;v=vl;var ae=U.current.memoizedState.isDehydrated;if(ae&&(ro(U,z).flags|=256),z=sp(U,z,!1),z!==2){if(Gh&&!ae){U.errorRecoveryDisabledLanes|=A,ii|=A,v=4;break e}A=jr,jr=v,A!==null&&(jr===null?jr=A:jr.push.apply(jr,A))}v=z}if(A=!1,v!==2)continue}}if(v===1){ro(r,0),vn(r,a,0,!0);break}e:{switch(x=r,A=v,A){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:vn(x,a,Gr,!pn);break e;case 2:jr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(v=Wh+300-Ue(),10<v)){if(vn(x,a,Gr,!pn),Bt(x,0,!0)!==0)break e;x.timeoutHandle=m2(Iy.bind(null,x,l,jr,X0,Qh,a,Gr,ii,eo,pn,A,2,-0,0),v);break e}Iy(x,l,jr,X0,Qh,a,Gr,ii,eo,pn,A,0,-0,0)}}break}while(!0);ba(r)}function Iy(r,a,l,x,v,A,z,U,ae,ge,Se,Te,ye,je){if(r.timeoutHandle=-1,Te=a.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(kl={stylesheets:null,count:0,unsuspend:PC},Fy(a),Te=OC(),Te!==null)){r.cancelPendingCommit=Te(Jy.bind(null,r,a,A,l,x,v,z,U,ae,Se,1,ye,je)),vn(r,A,z,!ge);return}Jy(r,a,A,l,x,v,z,U,ae)}function X8(r){for(var a=r;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var x=0;x<l.length;x++){var v=l[x],A=v.getSnapshot;v=v.value;try{if(!Sr(A(),v))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function vn(r,a,l,x){a&=~Yh,a&=~ii,r.suspendedLanes|=a,r.pingedLanes&=~a,x&&(r.warmLanes|=a),x=r.expirationTimes;for(var v=a;0<v;){var A=31-yt(v),z=1<<A;x[A]=-1,v&=~z}l!==0&&_t(r,l,a)}function Z0(){return(ts&6)===0?(jl(0),!1):!0}function ep(){if(Mt!==null){if(ss===0)var r=Mt.return;else r=Mt,Pa=ei=null,gh(r),Qi=null,xl=0,r=Mt;for(;r!==null;)by(r.alternate,r),r=r.return;Mt=null}}function ro(r,a){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,fC(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),ep(),bs=r,Mt=l=Sa(r.current,null),Lt=a,ss=0,Tr=null,pn=!1,Zi=K(r,a),Gh=!1,eo=Gr=Yh=ii=fn=Ds=0,jr=vl=null,Qh=!1,(a&8)!==0&&(a|=a&32);var x=r.entangledLanes;if(x!==0)for(r=r.entanglements,x&=a;0<x;){var v=31-yt(x),A=1<<v;a|=r[v],x&=~A}return qa=a,j0(),l}function Ly(r,a){Ft=null,I.H=L0,a===sl||a===S0?(a=rv(),ss=3):a===ev?(a=rv(),ss=4):ss=a===ay?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Tr=a,Mt===null&&(Ds=1,H0(r,$r(a,r.current)))}function qy(){var r=I.H;return I.H=L0,r===null?L0:r}function $y(){var r=I.A;return I.A=W8,r}function tp(){Ds=4,pn||(Lt&4194048)!==Lt&&Jr.current!==null||(Zi=!0),(fn&134217727)===0&&(ii&134217727)===0||bs===null||vn(bs,Lt,Gr,!1)}function sp(r,a,l){var x=ts;ts|=2;var v=qy(),A=$y();(bs!==r||Lt!==a)&&(X0=null,ro(r,a)),a=!1;var z=Ds;e:do try{if(ss!==0&&Mt!==null){var U=Mt,ae=Tr;switch(ss){case 8:ep(),z=6;break e;case 3:case 2:case 9:case 6:Jr.current===null&&(a=!0);var ge=ss;if(ss=0,Tr=null,ao(r,U,ae,ge),l&&Zi){z=0;break e}break;default:ge=ss,ss=0,Tr=null,ao(r,U,ae,ge)}}Z8(),z=Ds;break}catch(Se){Ly(r,Se)}while(!0);return a&&r.shellSuspendCounter++,Pa=ei=null,ts=x,I.H=v,I.A=A,Mt===null&&(bs=null,Lt=0,j0()),z}function Z8(){for(;Mt!==null;)Uy(Mt)}function eC(r,a){var l=ts;ts|=2;var x=qy(),v=$y();bs!==r||Lt!==a?(X0=null,K0=Ue()+500,ro(r,a)):Zi=K(r,a);e:do try{if(ss!==0&&Mt!==null){a=Mt;var A=Tr;t:switch(ss){case 1:ss=0,Tr=null,ao(r,a,A,1);break;case 2:case 9:if(tv(A)){ss=0,Tr=null,Vy(a);break}a=function(){ss!==2&&ss!==9||bs!==r||(ss=7),ba(r)},A.then(a,a);break e;case 3:ss=7;break e;case 4:ss=5;break e;case 7:tv(A)?(ss=0,Tr=null,Vy(a)):(ss=0,Tr=null,ao(r,a,A,7));break;case 5:var z=null;switch(Mt.tag){case 26:z=Mt.memoizedState;case 5:case 27:var U=Mt;if(!z||C2(z)){ss=0,Tr=null;var ae=U.sibling;if(ae!==null)Mt=ae;else{var ge=U.return;ge!==null?(Mt=ge,eu(ge)):Mt=null}break t}}ss=0,Tr=null,ao(r,a,A,5);break;case 6:ss=0,Tr=null,ao(r,a,A,6);break;case 8:ep(),Ds=6;break e;default:throw Error(i(462))}}tC();break}catch(Se){Ly(r,Se)}while(!0);return Pa=ei=null,I.H=x,I.A=v,ts=l,Mt!==null?0:(bs=null,Lt=0,j0(),Ds)}function tC(){for(;Mt!==null&&!be();)Uy(Mt)}function Uy(r){var a=fy(r.alternate,r,qa);r.memoizedProps=r.pendingProps,a===null?eu(r):Mt=a}function Vy(r){var a=r,l=a.alternate;switch(a.tag){case 15:case 0:a=dy(l,a,a.pendingProps,a.type,void 0,Lt);break;case 11:a=dy(l,a,a.pendingProps,a.type.render,a.ref,Lt);break;case 5:gh(a);default:by(l,a),a=Mt=Hb(a,qa),a=fy(l,a,qa)}r.memoizedProps=r.pendingProps,a===null?eu(r):Mt=a}function ao(r,a,l,x){Pa=ei=null,gh(a),Qi=null,xl=0;var v=a.return;try{if(V8(r,v,a,l,Lt)){Ds=1,H0(r,$r(l,r.current)),Mt=null;return}}catch(A){if(v!==null)throw Mt=v,A;Ds=1,H0(r,$r(l,r.current)),Mt=null;return}a.flags&32768?(Kt||x===1?r=!0:Zi||(Lt&536870912)!==0?r=!1:(pn=r=!0,(x===2||x===9||x===3||x===6)&&(x=Jr.current,x!==null&&x.tag===13&&(x.flags|=16384))),Hy(a,r)):eu(a)}function eu(r){var a=r;do{if((a.flags&32768)!==0){Hy(a,pn);return}r=a.return;var l=J8(a.alternate,a,qa);if(l!==null){Mt=l;return}if(a=a.sibling,a!==null){Mt=a;return}Mt=a=r}while(a!==null);Ds===0&&(Ds=5)}function Hy(r,a){do{var l=G8(r.alternate,r);if(l!==null){l.flags&=32767,Mt=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(r=r.sibling,r!==null)){Mt=r;return}Mt=r=l}while(r!==null);Ds=6,Mt=null}function Jy(r,a,l,x,v,A,z,U,ae){r.cancelPendingCommit=null;do tu();while(nr!==0);if((ts&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(A=a.lanes|a.childLanes,A|=Jm,Ve(r,l,A,z,U,ae),r===bs&&(Mt=bs=null,Lt=0),to=a,bn=r,so=l,Kh=A,Xh=v,My=x,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,nC(Le,function(){return Ky(),null})):(r.callbackNode=null,r.callbackPriority=0),x=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||x){x=I.T,I.T=null,v=O.p,O.p=2,z=ts,ts|=4;try{Y8(r,a,l)}finally{ts=z,O.p=v,I.T=x}}nr=1,Gy(),Yy(),Qy()}}function Gy(){if(nr===1){nr=0;var r=bn,a=to,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=I.T,I.T=null;var x=O.p;O.p=2;var v=ts;ts|=4;try{By(a,r);var A=hp,z=Ob(r.containerInfo),U=A.focusedElem,ae=A.selectionRange;if(z!==U&&U&&U.ownerDocument&&Tb(U.ownerDocument.documentElement,U)){if(ae!==null&&qm(U)){var ge=ae.start,Se=ae.end;if(Se===void 0&&(Se=ge),"selectionStart"in U)U.selectionStart=ge,U.selectionEnd=Math.min(Se,U.value.length);else{var Te=U.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var je=ye.getSelection(),At=U.textContent.length,gt=Math.min(ae.start,At),ls=ae.end===void 0?gt:Math.min(ae.end,At);!je.extend&&gt>ls&&(z=ls,ls=gt,gt=z);var he=Pb(U,gt),ce=Pb(U,ls);if(he&&ce&&(je.rangeCount!==1||je.anchorNode!==he.node||je.anchorOffset!==he.offset||je.focusNode!==ce.node||je.focusOffset!==ce.offset)){var fe=Te.createRange();fe.setStart(he.node,he.offset),je.removeAllRanges(),gt>ls?(je.addRange(fe),je.extend(ce.node,ce.offset)):(fe.setEnd(ce.node,ce.offset),je.addRange(fe))}}}}for(Te=[],je=U;je=je.parentNode;)je.nodeType===1&&Te.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Te.length;U++){var Fe=Te[U];Fe.element.scrollLeft=Fe.left,Fe.element.scrollTop=Fe.top}}mu=!!mp,hp=mp=null}finally{ts=v,O.p=x,I.T=l}}r.current=a,nr=2}}function Yy(){if(nr===2){nr=0;var r=bn,a=to,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=I.T,I.T=null;var x=O.p;O.p=2;var v=ts;ts|=4;try{Cy(r,a.alternate,a)}finally{ts=v,O.p=x,I.T=l}}nr=3}}function Qy(){if(nr===4||nr===3){nr=0,Be();var r=bn,a=to,l=so,x=My;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?nr=5:(nr=0,to=bn=null,Wy(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(gn=null),ot(l),a=a.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Ne,a,void 0,(a.current.flags&128)===128)}catch{}if(x!==null){a=I.T,v=O.p,O.p=2,I.T=null;try{for(var A=r.onRecoverableError,z=0;z<x.length;z++){var U=x[z];A(U.value,{componentStack:U.stack})}}finally{I.T=a,O.p=v}}(so&3)!==0&&tu(),ba(r),v=r.pendingLanes,(l&4194090)!==0&&(v&42)!==0?r===Zh?yl++:(yl=0,Zh=r):yl=0,jl(0)}}function Wy(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,el(a)))}function tu(r){return Gy(),Yy(),Qy(),Ky()}function Ky(){if(nr!==5)return!1;var r=bn,a=Kh;Kh=0;var l=ot(so),x=I.T,v=O.p;try{O.p=32>l?32:l,I.T=null,l=Xh,Xh=null;var A=bn,z=so;if(nr=0,to=bn=null,so=0,(ts&6)!==0)throw Error(i(331));var U=ts;if(ts|=4,Ty(A.current),Dy(A,A.current,z,l),ts=U,jl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Ne,A)}catch{}return!0}finally{O.p=v,I.T=x,Wy(r,a)}}function Xy(r,a,l){a=$r(l,a),a=Dh(r.stateNode,a,2),r=ln(r,a,2),r!==null&&(ze(r,2),ba(r))}function ms(r,a,l){if(r.tag===3)Xy(r,r,l);else for(;a!==null;){if(a.tag===3){Xy(a,r,l);break}else if(a.tag===1){var x=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(gn===null||!gn.has(x))){r=$r(l,r),l=sy(2),x=ln(a,l,2),x!==null&&(ry(l,x,a,r),ze(x,2),ba(x));break}}a=a.return}}function rp(r,a,l){var x=r.pingCache;if(x===null){x=r.pingCache=new K8;var v=new Set;x.set(a,v)}else v=x.get(a),v===void 0&&(v=new Set,x.set(a,v));v.has(l)||(Gh=!0,v.add(l),r=sC.bind(null,r,a,l),a.then(r,r))}function sC(r,a,l){var x=r.pingCache;x!==null&&x.delete(a),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,bs===r&&(Lt&l)===l&&(Ds===4||Ds===3&&(Lt&62914560)===Lt&&300>Ue()-Wh?(ts&2)===0&&ro(r,0):Yh|=l,eo===Lt&&(eo=0)),ba(r)}function Zy(r,a){a===0&&(a=ke()),r=Ii(r,a),r!==null&&(ze(r,a),ba(r))}function rC(r){var a=r.memoizedState,l=0;a!==null&&(l=a.retryLane),Zy(r,l)}function aC(r,a){var l=0;switch(r.tag){case 13:var x=r.stateNode,v=r.memoizedState;v!==null&&(l=v.retryLane);break;case 19:x=r.stateNode;break;case 22:x=r.stateNode._retryCache;break;default:throw Error(i(314))}x!==null&&x.delete(a),Zy(r,l)}function nC(r,a){return Ke(r,a)}var su=null,no=null,ap=!1,ru=!1,np=!1,oi=0;function ba(r){r!==no&&r.next===null&&(no===null?su=no=r:no=no.next=r),ru=!0,ap||(ap=!0,oC())}function jl(r,a){if(!np&&ru){np=!0;do for(var l=!1,x=su;x!==null;){if(r!==0){var v=x.pendingLanes;if(v===0)var A=0;else{var z=x.suspendedLanes,U=x.pingedLanes;A=(1<<31-yt(42|r)+1)-1,A&=v&~(z&~U),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(l=!0,r2(x,A))}else A=Lt,A=Bt(x,x===bs?A:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(A&3)===0||K(x,A)||(l=!0,r2(x,A));x=x.next}while(l);np=!1}}function iC(){e2()}function e2(){ru=ap=!1;var r=0;oi!==0&&(pC()&&(r=oi),oi=0);for(var a=Ue(),l=null,x=su;x!==null;){var v=x.next,A=t2(x,a);A===0?(x.next=null,l===null?su=v:l.next=v,v===null&&(no=l)):(l=x,(r!==0||(A&3)!==0)&&(ru=!0)),x=v}jl(r)}function t2(r,a){for(var l=r.suspendedLanes,x=r.pingedLanes,v=r.expirationTimes,A=r.pendingLanes&-62914561;0<A;){var z=31-yt(A),U=1<<z,ae=v[z];ae===-1?((U&l)===0||(U&x)!==0)&&(v[z]=V(U,a)):ae<=a&&(r.expiredLanes|=U),A&=~U}if(a=bs,l=Lt,l=Bt(r,r===a?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),x=r.callbackNode,l===0||r===a&&(ss===2||ss===9)||r.cancelPendingCommit!==null)return x!==null&&x!==null&&pe(x),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||K(r,l)){if(a=l&-l,a===r.callbackPriority)return a;switch(x!==null&&pe(x),ot(l)){case 2:case 8:l=st;break;case 32:l=Le;break;case 268435456:l=Pt;break;default:l=Le}return x=s2.bind(null,r),l=Ke(l,x),r.callbackPriority=a,r.callbackNode=l,a}return x!==null&&x!==null&&pe(x),r.callbackPriority=2,r.callbackNode=null,2}function s2(r,a){if(nr!==0&&nr!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(tu()&&r.callbackNode!==l)return null;var x=Lt;return x=Bt(r,r===bs?x:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),x===0?null:(zy(r,x,a),t2(r,Ue()),r.callbackNode!=null&&r.callbackNode===l?s2.bind(null,r):null)}function r2(r,a){if(tu())return null;zy(r,a,!0)}function oC(){gC(function(){(ts&6)!==0?Ke(Ie,iC):e2()})}function ip(){return oi===0&&(oi=se()),oi}function a2(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:It(""+r)}function n2(r,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,r.id&&l.setAttribute("form",r.id),a.parentNode.insertBefore(l,a),r=new FormData(r),l.parentNode.removeChild(l),r}function lC(r,a,l,x,v){if(a==="submit"&&l&&l.stateNode===v){var A=a2((v[pt]||null).action),z=x.submitter;z&&(a=(a=z[pt]||null)?a2(a.formAction):z.getAttribute("formAction"),a!==null&&(A=a,z=null));var U=new b0("action","action",null,x,v);r.push({event:U,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(oi!==0){var ae=z?n2(v,z):new FormData(v);Eh(l,{pending:!0,data:ae,method:v.method,action:A},null,ae)}}else typeof A=="function"&&(U.preventDefault(),ae=z?n2(v,z):new FormData(v),Eh(l,{pending:!0,data:ae,method:v.method,action:A},A,ae))},currentTarget:v}]})}}for(var op=0;op<Hm.length;op++){var lp=Hm[op],cC=lp.toLowerCase(),dC=lp[0].toUpperCase()+lp.slice(1);na(cC,"on"+dC)}na(zb,"onAnimationEnd"),na(Ib,"onAnimationIteration"),na(Lb,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(k8,"onTransitionRun"),na(_8,"onTransitionStart"),na(B8,"onTransitionCancel"),na(qb,"onTransitionEnd"),Gt("onMouseEnter",["mouseout","mouseover"]),Gt("onMouseLeave",["mouseout","mouseover"]),Gt("onPointerEnter",["pointerout","pointerover"]),Gt("onPointerLeave",["pointerout","pointerover"]),xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function i2(r,a){a=(a&4)!==0;for(var l=0;l<r.length;l++){var x=r[l],v=x.event;x=x.listeners;e:{var A=void 0;if(a)for(var z=x.length-1;0<=z;z--){var U=x[z],ae=U.instance,ge=U.currentTarget;if(U=U.listener,ae!==A&&v.isPropagationStopped())break e;A=U,v.currentTarget=ge;try{A(v)}catch(Se){V0(Se)}v.currentTarget=null,A=ae}else for(z=0;z<x.length;z++){if(U=x[z],ae=U.instance,ge=U.currentTarget,U=U.listener,ae!==A&&v.isPropagationStopped())break e;A=U,v.currentTarget=ge;try{A(v)}catch(Se){V0(Se)}v.currentTarget=null,A=ae}}}}function Rt(r,a){var l=a[Oe];l===void 0&&(l=a[Oe]=new Set);var x=r+"__bubble";l.has(x)||(o2(a,r,2,!1),l.add(x))}function cp(r,a,l){var x=0;a&&(x|=4),o2(l,r,x,a)}var au="_reactListening"+Math.random().toString(36).slice(2);function dp(r){if(!r[au]){r[au]=!0,_a.forEach(function(l){l!=="selectionchange"&&(xC.has(l)||cp(l,!1,r),cp(l,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[au]||(a[au]=!0,cp("selectionchange",!1,a))}}function o2(r,a,l,x){switch(D2(a)){case 2:var v=zC;break;case 8:v=IC;break;default:v=Ap}l=v.bind(null,a,l,r),v=void 0,!Xs||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),x?v!==void 0?r.addEventListener(a,l,{capture:!0,passive:v}):r.addEventListener(a,l,!0):v!==void 0?r.addEventListener(a,l,{passive:v}):r.addEventListener(a,l,!1)}function xp(r,a,l,x,v){var A=x;if((a&1)===0&&(a&2)===0&&x!==null)e:for(;;){if(x===null)return;var z=x.tag;if(z===3||z===4){var U=x.stateNode.containerInfo;if(U===v)break;if(z===4)for(z=x.return;z!==null;){var ae=z.tag;if((ae===3||ae===4)&&z.stateNode.containerInfo===v)return;z=z.return}for(;U!==null;){if(z=Wt(U),z===null)return;if(ae=z.tag,ae===5||ae===6||ae===26||ae===27){x=A=z;continue e}U=U.parentNode}}x=x.return}aa(function(){var ge=A,Se=Cs(l),Te=[];e:{var ye=$b.get(r);if(ye!==void 0){var je=b0,At=r;switch(r){case"keypress":if(Ti(l)===0)break e;case"keydown":case"keyup":je=n8;break;case"focusin":At="focus",je=Mm;break;case"focusout":At="blur",je=Mm;break;case"beforeblur":case"afterblur":je=Mm;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=gb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=G9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=l8;break;case zb:case Ib:case Lb:je=W9;break;case qb:je=d8;break;case"scroll":case"scrollend":je=H9;break;case"wheel":je=u8;break;case"copy":case"cut":case"paste":je=X9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=vb;break;case"toggle":case"beforetoggle":je=h8}var gt=(a&4)!==0,ls=!gt&&(r==="scroll"||r==="scrollend"),he=gt?ye!==null?ye+"Capture":null:ye;gt=[];for(var ce=ge,fe;ce!==null;){var Fe=ce;if(fe=Fe.stateNode,Fe=Fe.tag,Fe!==5&&Fe!==26&&Fe!==27||fe===null||he===null||(Fe=sn(ce,he),Fe!=null&&gt.push(wl(ce,Fe,fe))),ls)break;ce=ce.return}0<gt.length&&(ye=new je(ye,At,null,l,Se),Te.push({event:ye,listeners:gt}))}}if((a&7)===0){e:{if(ye=r==="mouseover"||r==="pointerover",je=r==="mouseout"||r==="pointerout",ye&&l!==Vn&&(At=l.relatedTarget||l.fromElement)&&(Wt(At)||At[re]))break e;if((je||ye)&&(ye=Se.window===Se?Se:(ye=Se.ownerDocument)?ye.defaultView||ye.parentWindow:window,je?(At=l.relatedTarget||l.toElement,je=ge,At=At?Wt(At):null,At!==null&&(ls=c(At),gt=At.tag,At!==ls||gt!==5&&gt!==27&&gt!==6)&&(At=null)):(je=null,At=ge),je!==At)){if(gt=gb,Fe="onMouseLeave",he="onMouseEnter",ce="mouse",(r==="pointerout"||r==="pointerover")&&(gt=vb,Fe="onPointerLeave",he="onPointerEnter",ce="pointer"),ls=je==null?ye:Ks(je),fe=At==null?ye:Ks(At),ye=new gt(Fe,ce+"leave",je,l,Se),ye.target=ls,ye.relatedTarget=fe,Fe=null,Wt(Se)===ge&&(gt=new gt(he,ce+"enter",At,l,Se),gt.target=fe,gt.relatedTarget=ls,Fe=gt),ls=Fe,je&&At)t:{for(gt=je,he=At,ce=0,fe=gt;fe;fe=io(fe))ce++;for(fe=0,Fe=he;Fe;Fe=io(Fe))fe++;for(;0<ce-fe;)gt=io(gt),ce--;for(;0<fe-ce;)he=io(he),fe--;for(;ce--;){if(gt===he||he!==null&&gt===he.alternate)break t;gt=io(gt),he=io(he)}gt=null}else gt=null;je!==null&&l2(Te,ye,je,gt,!1),At!==null&&ls!==null&&l2(Te,ls,At,gt,!0)}}e:{if(ye=ge?Ks(ge):window,je=ye.nodeName&&ye.nodeName.toLowerCase(),je==="select"||je==="input"&&ye.type==="file")var at=kb;else if(Cb(ye))if(_b)at=A8;else{at=N8;var Tt=j8}else je=ye.nodeName,!je||je.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?ge&&gs(ge.elementType)&&(at=kb):at=w8;if(at&&(at=at(r,ge))){Eb(Te,at,l,Se);break e}Tt&&Tt(r,ye,ge),r==="focusout"&&ge&&ye.type==="number"&&ge.memoizedProps.value!=null&&He(ye,"number",ye.value)}switch(Tt=ge?Ks(ge):window,r){case"focusin":(Cb(Tt)||Tt.contentEditable==="true")&&(Mi=Tt,$m=ge,Qo=null);break;case"focusout":Qo=$m=Mi=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,Mb(Te,l,Se);break;case"selectionchange":if(E8)break;case"keydown":case"keyup":Mb(Te,l,Se)}var mt;if(zm)e:{switch(r){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Oi?wb(r,l)&&(vt="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(vt="onCompositionStart");vt&&(yb&&l.locale!=="ko"&&(Oi||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Oi&&(mt=Pm()):(Br=Se,Pi="value"in Br?Br.value:Br.textContent,Oi=!0)),Tt=nu(ge,vt),0<Tt.length&&(vt=new bb(vt,r,null,l,Se),Te.push({event:vt,listeners:Tt}),mt?vt.data=mt:(mt=Ab(l),mt!==null&&(vt.data=mt)))),(mt=f8?g8(r,l):b8(r,l))&&(vt=nu(ge,"onBeforeInput"),0<vt.length&&(Tt=new bb("onBeforeInput","beforeinput",null,l,Se),Te.push({event:Tt,listeners:vt}),Tt.data=mt)),lC(Te,r,ge,l,Se)}i2(Te,a)})}function wl(r,a,l){return{instance:r,listener:a,currentTarget:l}}function nu(r,a){for(var l=a+"Capture",x=[];r!==null;){var v=r,A=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||A===null||(v=sn(r,l),v!=null&&x.unshift(wl(r,v,A)),v=sn(r,a),v!=null&&x.push(wl(r,v,A))),r.tag===3)return x;r=r.return}return[]}function io(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function l2(r,a,l,x,v){for(var A=a._reactName,z=[];l!==null&&l!==x;){var U=l,ae=U.alternate,ge=U.stateNode;if(U=U.tag,ae!==null&&ae===x)break;U!==5&&U!==26&&U!==27||ge===null||(ae=ge,v?(ge=sn(l,A),ge!=null&&z.unshift(wl(l,ge,ae))):v||(ge=sn(l,A),ge!=null&&z.push(wl(l,ge,ae)))),l=l.return}z.length!==0&&r.push({event:a,listeners:z})}var uC=/\r\n?/g,mC=/\u0000|\uFFFD/g;function c2(r){return(typeof r=="string"?r:""+r).replace(uC,`
`).replace(mC,"")}function d2(r,a){return a=c2(a),c2(r)===a}function iu(){}function os(r,a,l,x,v,A){switch(l){case"children":typeof x=="string"?a==="body"||a==="textarea"&&x===""||ft(r,x):(typeof x=="number"||typeof x=="bigint")&&a!=="body"&&ft(r,""+x);break;case"className":Si(r,"class",x);break;case"tabIndex":Si(r,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Si(r,l,x);break;case"style":fs(r,x,A);break;case"data":if(a!=="object"){Si(r,"data",x);break}case"src":case"href":if(x===""&&(a!=="a"||l!=="href")){r.removeAttribute(l);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){r.removeAttribute(l);break}x=It(""+x),r.setAttribute(l,x);break;case"action":case"formAction":if(typeof x=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(l==="formAction"?(a!=="input"&&os(r,a,"name",v.name,v,null),os(r,a,"formEncType",v.formEncType,v,null),os(r,a,"formMethod",v.formMethod,v,null),os(r,a,"formTarget",v.formTarget,v,null)):(os(r,a,"encType",v.encType,v,null),os(r,a,"method",v.method,v,null),os(r,a,"target",v.target,v,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){r.removeAttribute(l);break}x=It(""+x),r.setAttribute(l,x);break;case"onClick":x!=null&&(r.onclick=iu);break;case"onScroll":x!=null&&Rt("scroll",r);break;case"onScrollEnd":x!=null&&Rt("scrollend",r);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(l=x.__html,l!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":r.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){r.removeAttribute("xlink:href");break}l=It(""+x),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(l,""+x):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":x===!0?r.setAttribute(l,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?r.setAttribute(l,x):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?r.setAttribute(l,x):r.removeAttribute(l);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?r.removeAttribute(l):r.setAttribute(l,x);break;case"popover":Rt("beforetoggle",r),Rt("toggle",r),Bi(r,"popover",x);break;case"xlinkActuate":ra(r,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ra(r,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ra(r,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ra(r,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ra(r,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ra(r,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ra(r,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ra(r,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ra(r,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Bi(r,"is",x);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=et.get(l)||l,Bi(r,l,x))}}function up(r,a,l,x,v,A){switch(l){case"style":fs(r,x,A);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(l=x.__html,l!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof x=="string"?ft(r,x):(typeof x=="number"||typeof x=="bigint")&&ft(r,""+x);break;case"onScroll":x!=null&&Rt("scroll",r);break;case"onScrollEnd":x!=null&&Rt("scrollend",r);break;case"onClick":x!=null&&(r.onclick=iu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),a=l.slice(2,v?l.length-7:void 0),A=r[pt]||null,A=A!=null?A[l]:null,typeof A=="function"&&r.removeEventListener(a,A,v),typeof x=="function")){typeof A!="function"&&A!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(a,x,v);break e}l in r?r[l]=x:x===!0?r.setAttribute(l,""):Bi(r,l,x)}}}function ir(r,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",r),Rt("load",r);var x=!1,v=!1,A;for(A in l)if(l.hasOwnProperty(A)){var z=l[A];if(z!=null)switch(A){case"src":x=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:os(r,a,A,z,l,null)}}v&&os(r,a,"srcSet",l.srcSet,l,null),x&&os(r,a,"src",l.src,l,null);return;case"input":Rt("invalid",r);var U=A=z=v=null,ae=null,ge=null;for(x in l)if(l.hasOwnProperty(x)){var Se=l[x];if(Se!=null)switch(x){case"name":v=Se;break;case"type":z=Se;break;case"checked":ae=Se;break;case"defaultChecked":ge=Se;break;case"value":A=Se;break;case"defaultValue":U=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,a));break;default:os(r,a,x,Se,l,null)}}we(r,A,U,ae,ge,z,v,!1),Di(r);return;case"select":Rt("invalid",r),x=z=A=null;for(v in l)if(l.hasOwnProperty(v)&&(U=l[v],U!=null))switch(v){case"value":A=U;break;case"defaultValue":z=U;break;case"multiple":x=U;default:os(r,a,v,U,l,null)}a=A,l=z,r.multiple=!!x,a!=null?Pe(r,!!x,a,!1):l!=null&&Pe(r,!!x,l,!0);return;case"textarea":Rt("invalid",r),A=v=x=null;for(z in l)if(l.hasOwnProperty(z)&&(U=l[z],U!=null))switch(z){case"value":x=U;break;case"defaultValue":v=U;break;case"children":A=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:os(r,a,z,U,l,null)}lt(r,x,v,A),Di(r);return;case"option":for(ae in l)if(l.hasOwnProperty(ae)&&(x=l[ae],x!=null))switch(ae){case"selected":r.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:os(r,a,ae,x,l,null)}return;case"dialog":Rt("beforetoggle",r),Rt("toggle",r),Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":Rt("load",r);break;case"video":case"audio":for(x=0;x<Nl.length;x++)Rt(Nl[x],r);break;case"image":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"embed":case"source":case"link":Rt("error",r),Rt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in l)if(l.hasOwnProperty(ge)&&(x=l[ge],x!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:os(r,a,ge,x,l,null)}return;default:if(gs(a)){for(Se in l)l.hasOwnProperty(Se)&&(x=l[Se],x!==void 0&&up(r,a,Se,x,l,void 0));return}}for(U in l)l.hasOwnProperty(U)&&(x=l[U],x!=null&&os(r,a,U,x,l,null))}function hC(r,a,l,x){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,A=null,z=null,U=null,ae=null,ge=null,Se=null;for(je in l){var Te=l[je];if(l.hasOwnProperty(je)&&Te!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":ae=Te;default:x.hasOwnProperty(je)||os(r,a,je,null,x,Te)}}for(var ye in x){var je=x[ye];if(Te=l[ye],x.hasOwnProperty(ye)&&(je!=null||Te!=null))switch(ye){case"type":A=je;break;case"name":v=je;break;case"checked":ge=je;break;case"defaultChecked":Se=je;break;case"value":z=je;break;case"defaultValue":U=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(i(137,a));break;default:je!==Te&&os(r,a,ye,je,x,Te)}}W(r,z,U,ae,ge,Se,A,v);return;case"select":je=z=U=ye=null;for(A in l)if(ae=l[A],l.hasOwnProperty(A)&&ae!=null)switch(A){case"value":break;case"multiple":je=ae;default:x.hasOwnProperty(A)||os(r,a,A,null,x,ae)}for(v in x)if(A=x[v],ae=l[v],x.hasOwnProperty(v)&&(A!=null||ae!=null))switch(v){case"value":ye=A;break;case"defaultValue":U=A;break;case"multiple":z=A;default:A!==ae&&os(r,a,v,A,x,ae)}a=U,l=z,x=je,ye!=null?Pe(r,!!l,ye,!1):!!x!=!!l&&(a!=null?Pe(r,!!l,a,!0):Pe(r,!!l,l?[]:"",!1));return;case"textarea":je=ye=null;for(U in l)if(v=l[U],l.hasOwnProperty(U)&&v!=null&&!x.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:os(r,a,U,null,x,v)}for(z in x)if(v=x[z],A=l[z],x.hasOwnProperty(z)&&(v!=null||A!=null))switch(z){case"value":ye=v;break;case"defaultValue":je=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==A&&os(r,a,z,v,x,A)}jt(r,ye,je);return;case"option":for(var At in l)if(ye=l[At],l.hasOwnProperty(At)&&ye!=null&&!x.hasOwnProperty(At))switch(At){case"selected":r.selected=!1;break;default:os(r,a,At,null,x,ye)}for(ae in x)if(ye=x[ae],je=l[ae],x.hasOwnProperty(ae)&&ye!==je&&(ye!=null||je!=null))switch(ae){case"selected":r.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:os(r,a,ae,ye,x,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in l)ye=l[gt],l.hasOwnProperty(gt)&&ye!=null&&!x.hasOwnProperty(gt)&&os(r,a,gt,null,x,ye);for(ge in x)if(ye=x[ge],je=l[ge],x.hasOwnProperty(ge)&&ye!==je&&(ye!=null||je!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,a));break;default:os(r,a,ge,ye,x,je)}return;default:if(gs(a)){for(var ls in l)ye=l[ls],l.hasOwnProperty(ls)&&ye!==void 0&&!x.hasOwnProperty(ls)&&up(r,a,ls,void 0,x,ye);for(Se in x)ye=x[Se],je=l[Se],!x.hasOwnProperty(Se)||ye===je||ye===void 0&&je===void 0||up(r,a,Se,ye,x,je);return}}for(var he in l)ye=l[he],l.hasOwnProperty(he)&&ye!=null&&!x.hasOwnProperty(he)&&os(r,a,he,null,x,ye);for(Te in x)ye=x[Te],je=l[Te],!x.hasOwnProperty(Te)||ye===je||ye==null&&je==null||os(r,a,Te,ye,x,je)}var mp=null,hp=null;function ou(r){return r.nodeType===9?r:r.ownerDocument}function x2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u2(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function pp(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var fp=null;function pC(){var r=window.event;return r&&r.type==="popstate"?r===fp?!1:(fp=r,!0):(fp=null,!1)}var m2=typeof setTimeout=="function"?setTimeout:void 0,fC=typeof clearTimeout=="function"?clearTimeout:void 0,h2=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof h2<"u"?function(r){return h2.resolve(null).then(r).catch(bC)}:m2;function bC(r){setTimeout(function(){throw r})}function yn(r){return r==="head"}function p2(r,a){var l=a,x=0,v=0;do{var A=l.nextSibling;if(r.removeChild(l),A&&A.nodeType===8)if(l=A.data,l==="/$"){if(0<x&&8>x){l=x;var z=r.ownerDocument;if(l&1&&Al(z.documentElement),l&2&&Al(z.body),l&4)for(l=z.head,Al(l),z=l.firstChild;z;){var U=z.nextSibling,ae=z.nodeName;z[zt]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&z.rel.toLowerCase()==="stylesheet"||l.removeChild(z),z=U}}if(v===0){r.removeChild(A),Fl(a);return}v--}else l==="$"||l==="$?"||l==="$!"?v++:x=l.charCodeAt(0)-48;else x=0;l=A}while(l);Fl(a)}function gp(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":gp(l),Zt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function vC(r,a,l,x){for(;r.nodeType===1;){var v=l;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!x&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(x){if(!r[zt])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(A=r.getAttribute("rel"),A==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(A!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(A=r.getAttribute("src"),(A!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&A&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var A=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===A)return r}else return r;if(r=oa(r.nextSibling),r===null)break}return null}function yC(r,a,l){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=oa(r.nextSibling),r===null))return null;return r}function bp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function jC(r,a){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")a();else{var x=function(){a(),l.removeEventListener("DOMContentLoaded",x)};l.addEventListener("DOMContentLoaded",x),r._reactRetry=x}}function oa(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}var vp=null;function f2(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return r;a--}else l==="/$"&&a++}r=r.previousSibling}return null}function g2(r,a,l){switch(a=ou(l),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Al(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Zt(r)}var Yr=new Map,b2=new Set;function lu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var $a=O.d;O.d={f:NC,r:wC,D:AC,C:CC,L:EC,m:kC,X:BC,S:_C,M:SC};function NC(){var r=$a.f(),a=Z0();return r||a}function wC(r){var a=Ls(r);a!==null&&a.tag===5&&a.type==="form"?zv(a):$a.r(r)}var oo=typeof document>"u"?null:document;function v2(r,a,l){var x=oo;if(x&&typeof a=="string"&&a){var v=br(a);v='link[rel="'+r+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),b2.has(v)||(b2.add(v),r={rel:r,crossOrigin:l,href:a},x.querySelector(v)===null&&(a=x.createElement("link"),ir(a,"link",r),us(a),x.head.appendChild(a)))}}function AC(r){$a.D(r),v2("dns-prefetch",r,null)}function CC(r,a){$a.C(r,a),v2("preconnect",r,a)}function EC(r,a,l){$a.L(r,a,l);var x=oo;if(x&&r&&a){var v='link[rel="preload"][as="'+br(a)+'"]';a==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+br(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+br(l.imageSizes)+'"]')):v+='[href="'+br(r)+'"]';var A=v;switch(a){case"style":A=lo(r);break;case"script":A=co(r)}Yr.has(A)||(r=u({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:r,as:a},l),Yr.set(A,r),x.querySelector(v)!==null||a==="style"&&x.querySelector(Cl(A))||a==="script"&&x.querySelector(El(A))||(a=x.createElement("link"),ir(a,"link",r),us(a),x.head.appendChild(a)))}}function kC(r,a){$a.m(r,a);var l=oo;if(l&&r){var x=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+br(x)+'"][href="'+br(r)+'"]',A=v;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=co(r)}if(!Yr.has(A)&&(r=u({rel:"modulepreload",href:r},a),Yr.set(A,r),l.querySelector(v)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(El(A)))return}x=l.createElement("link"),ir(x,"link",r),us(x),l.head.appendChild(x)}}}function _C(r,a,l){$a.S(r,a,l);var x=oo;if(x&&r){var v=xa(x).hoistableStyles,A=lo(r);a=a||"default";var z=v.get(A);if(!z){var U={loading:0,preload:null};if(z=x.querySelector(Cl(A)))U.loading=5;else{r=u({rel:"stylesheet",href:r,"data-precedence":a},l),(l=Yr.get(A))&&yp(r,l);var ae=z=x.createElement("link");us(ae),ir(ae,"link",r),ae._p=new Promise(function(ge,Se){ae.onload=ge,ae.onerror=Se}),ae.addEventListener("load",function(){U.loading|=1}),ae.addEventListener("error",function(){U.loading|=2}),U.loading|=4,cu(z,a,x)}z={type:"stylesheet",instance:z,count:1,state:U},v.set(A,z)}}}function BC(r,a){$a.X(r,a);var l=oo;if(l&&r){var x=xa(l).hoistableScripts,v=co(r),A=x.get(v);A||(A=l.querySelector(El(v)),A||(r=u({src:r,async:!0},a),(a=Yr.get(v))&&jp(r,a),A=l.createElement("script"),us(A),ir(A,"link",r),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},x.set(v,A))}}function SC(r,a){$a.M(r,a);var l=oo;if(l&&r){var x=xa(l).hoistableScripts,v=co(r),A=x.get(v);A||(A=l.querySelector(El(v)),A||(r=u({src:r,async:!0,type:"module"},a),(a=Yr.get(v))&&jp(r,a),A=l.createElement("script"),us(A),ir(A,"link",r),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},x.set(v,A))}}function y2(r,a,l,x){var v=(v=$.current)?lu(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=lo(l.href),l=xa(v).hoistableStyles,x=l.get(a),x||(x={type:"style",instance:null,count:0,state:null},l.set(a,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=lo(l.href);var A=xa(v).hoistableStyles,z=A.get(r);if(z||(v=v.ownerDocument||v,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(r,z),(A=v.querySelector(Cl(r)))&&!A._p&&(z.instance=A,z.state.loading=5),Yr.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Yr.set(r,l),A||DC(v,r,l,z.state))),a&&x===null)throw Error(i(528,""));return z}if(a&&x!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=co(l),l=xa(v).hoistableScripts,x=l.get(a),x||(x={type:"script",instance:null,count:0,state:null},l.set(a,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function lo(r){return'href="'+br(r)+'"'}function Cl(r){return'link[rel="stylesheet"]['+r+"]"}function j2(r){return u({},r,{"data-precedence":r.precedence,precedence:null})}function DC(r,a,l,x){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?x.loading=1:(a=r.createElement("link"),x.preload=a,a.addEventListener("load",function(){return x.loading|=1}),a.addEventListener("error",function(){return x.loading|=2}),ir(a,"link",l),us(a),r.head.appendChild(a))}function co(r){return'[src="'+br(r)+'"]'}function El(r){return"script[async]"+r}function N2(r,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var x=r.querySelector('style[data-href~="'+br(l.href)+'"]');if(x)return a.instance=x,us(x),x;var v=u({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return x=(r.ownerDocument||r).createElement("style"),us(x),ir(x,"style",v),cu(x,l.precedence,r),a.instance=x;case"stylesheet":v=lo(l.href);var A=r.querySelector(Cl(v));if(A)return a.state.loading|=4,a.instance=A,us(A),A;x=j2(l),(v=Yr.get(v))&&yp(x,v),A=(r.ownerDocument||r).createElement("link"),us(A);var z=A;return z._p=new Promise(function(U,ae){z.onload=U,z.onerror=ae}),ir(A,"link",x),a.state.loading|=4,cu(A,l.precedence,r),a.instance=A;case"script":return A=co(l.src),(v=r.querySelector(El(A)))?(a.instance=v,us(v),v):(x=l,(v=Yr.get(A))&&(x=u({},l),jp(x,v)),r=r.ownerDocument||r,v=r.createElement("script"),us(v),ir(v,"link",x),r.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(x=a.instance,a.state.loading|=4,cu(x,l.precedence,r));return a.instance}function cu(r,a,l){for(var x=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=x.length?x[x.length-1]:null,A=v,z=0;z<x.length;z++){var U=x[z];if(U.dataset.precedence===a)A=U;else if(A!==v)break}A?A.parentNode.insertBefore(r,A.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(r,a.firstChild))}function yp(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function jp(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var du=null;function w2(r,a,l){if(du===null){var x=new Map,v=du=new Map;v.set(l,x)}else v=du,x=v.get(l),x||(x=new Map,v.set(l,x));if(x.has(r))return x;for(x.set(r,null),l=l.getElementsByTagName(r),v=0;v<l.length;v++){var A=l[v];if(!(A[zt]||A[ct]||r==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var z=A.getAttribute(a)||"";z=r+z;var U=x.get(z);U?U.push(A):x.set(z,[A])}}return x}function A2(r,a,l){r=r.ownerDocument||r,r.head.insertBefore(l,a==="title"?r.querySelector("head > title"):null)}function FC(r,a,l){if(l===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function C2(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var kl=null;function PC(){}function TC(r,a,l){if(kl===null)throw Error(i(475));var x=kl;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var v=lo(l.href),A=r.querySelector(Cl(v));if(A){r=A._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(x.count++,x=xu.bind(x),r.then(x,x)),a.state.loading|=4,a.instance=A,us(A);return}A=r.ownerDocument||r,l=j2(l),(v=Yr.get(v))&&yp(l,v),A=A.createElement("link"),us(A);var z=A;z._p=new Promise(function(U,ae){z.onload=U,z.onerror=ae}),ir(A,"link",l),a.instance=A}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(x.count++,a=xu.bind(x),r.addEventListener("load",a),r.addEventListener("error",a))}}function OC(){if(kl===null)throw Error(i(475));var r=kl;return r.stylesheets&&r.count===0&&Np(r,r.stylesheets),0<r.count?function(a){var l=setTimeout(function(){if(r.stylesheets&&Np(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(l)}}:null}function xu(){if(this.count--,this.count===0){if(this.stylesheets)Np(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var uu=null;function Np(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,uu=new Map,a.forEach(MC,r),uu=null,xu.call(r))}function MC(r,a){if(!(a.state.loading&4)){var l=uu.get(r);if(l)var x=l.get(null);else{l=new Map,uu.set(r,l);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<v.length;A++){var z=v[A];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(l.set(z.dataset.precedence,z),x=z)}x&&l.set(null,x)}v=a.instance,z=v.getAttribute("data-precedence"),A=l.get(z)||x,A===x&&l.set(null,v),l.set(z,v),this.count++,x=xu.bind(this),v.addEventListener("load",x),v.addEventListener("error",x),A?A.parentNode.insertBefore(v,A.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),a.state.loading|=4}}var _l={$$typeof:S,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function RC(r,a,l,x,v,A,z,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=x,this.onUncaughtError=v,this.onCaughtError=A,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function E2(r,a,l,x,v,A,z,U,ae,ge,Se,Te){return r=new RC(r,a,l,z,U,ae,ge,Te),a=1,A===!0&&(a|=24),A=Dr(3,null,null,a),r.current=A,A.stateNode=r,a=rh(),a.refCount++,r.pooledCache=a,a.refCount++,A.memoizedState={element:x,isDehydrated:l,cache:a},oh(A),r}function k2(r){return r?(r=Li,r):Li}function _2(r,a,l,x,v,A){v=k2(v),x.context===null?x.context=v:x.pendingContext=v,x=on(a),x.payload={element:l},A=A===void 0?null:A,A!==null&&(x.callback=A),l=ln(r,x,a),l!==null&&(Mr(l,r,a),al(l,r,a))}function B2(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<a?l:a}}function wp(r,a){B2(r,a),(r=r.alternate)&&B2(r,a)}function S2(r){if(r.tag===13){var a=Ii(r,67108864);a!==null&&Mr(a,r,67108864),wp(r,67108864)}}var mu=!0;function zC(r,a,l,x){var v=I.T;I.T=null;var A=O.p;try{O.p=2,Ap(r,a,l,x)}finally{O.p=A,I.T=v}}function IC(r,a,l,x){var v=I.T;I.T=null;var A=O.p;try{O.p=8,Ap(r,a,l,x)}finally{O.p=A,I.T=v}}function Ap(r,a,l,x){if(mu){var v=Cp(x);if(v===null)xp(r,a,x,hu,l),F2(r,x);else if(qC(v,r,a,l,x))x.stopPropagation();else if(F2(r,x),a&4&&-1<LC.indexOf(r)){for(;v!==null;){var A=Ls(v);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var z=wt(A.pendingLanes);if(z!==0){var U=A;for(U.pendingLanes|=2,U.entangledLanes|=2;z;){var ae=1<<31-yt(z);U.entanglements[1]|=ae,z&=~ae}ba(A),(ts&6)===0&&(K0=Ue()+500,jl(0))}}break;case 13:U=Ii(A,2),U!==null&&Mr(U,A,2),Z0(),wp(A,2)}if(A=Cp(x),A===null&&xp(r,a,x,hu,l),A===v)break;v=A}v!==null&&x.stopPropagation()}else xp(r,a,x,null,l)}}function Cp(r){return r=Cs(r),Ep(r)}var hu=null;function Ep(r){if(hu=null,r=Wt(r),r!==null){var a=c(r);if(a===null)r=null;else{var l=a.tag;if(l===13){if(r=d(a),r!==null)return r;r=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return hu=r,null}function D2(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case Ie:return 2;case st:return 8;case Le:case kt:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var kp=!1,jn=null,Nn=null,wn=null,Bl=new Map,Sl=new Map,An=[],LC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F2(r,a){switch(r){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":Bl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(a.pointerId)}}function Dl(r,a,l,x,v,A){return r===null||r.nativeEvent!==A?(r={blockedOn:a,domEventName:l,eventSystemFlags:x,nativeEvent:A,targetContainers:[v]},a!==null&&(a=Ls(a),a!==null&&S2(a)),r):(r.eventSystemFlags|=x,a=r.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),r)}function qC(r,a,l,x,v){switch(a){case"focusin":return jn=Dl(jn,r,a,l,x,v),!0;case"dragenter":return Nn=Dl(Nn,r,a,l,x,v),!0;case"mouseover":return wn=Dl(wn,r,a,l,x,v),!0;case"pointerover":var A=v.pointerId;return Bl.set(A,Dl(Bl.get(A)||null,r,a,l,x,v)),!0;case"gotpointercapture":return A=v.pointerId,Sl.set(A,Dl(Sl.get(A)||null,r,a,l,x,v)),!0}return!1}function P2(r){var a=Wt(r.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){r.blockedOn=a,Ae(r.priority,function(){if(l.tag===13){var x=Or();x=$e(x);var v=Ii(l,x);v!==null&&Mr(v,l,x),wp(l,x)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pu(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var l=Cp(r.nativeEvent);if(l===null){l=r.nativeEvent;var x=new l.constructor(l.type,l);Vn=x,l.target.dispatchEvent(x),Vn=null}else return a=Ls(l),a!==null&&S2(a),r.blockedOn=l,!1;a.shift()}return!0}function T2(r,a,l){pu(r)&&l.delete(a)}function $C(){kp=!1,jn!==null&&pu(jn)&&(jn=null),Nn!==null&&pu(Nn)&&(Nn=null),wn!==null&&pu(wn)&&(wn=null),Bl.forEach(T2),Sl.forEach(T2)}function fu(r,a){r.blockedOn===a&&(r.blockedOn=null,kp||(kp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$C)))}var gu=null;function O2(r){gu!==r&&(gu=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){gu===r&&(gu=null);for(var a=0;a<r.length;a+=3){var l=r[a],x=r[a+1],v=r[a+2];if(typeof x!="function"){if(Ep(x||l)===null)continue;break}var A=Ls(l);A!==null&&(r.splice(a,3),a-=3,Eh(A,{pending:!0,data:v,method:l.method,action:x},x,v))}}))}function Fl(r){function a(ae){return fu(ae,r)}jn!==null&&fu(jn,r),Nn!==null&&fu(Nn,r),wn!==null&&fu(wn,r),Bl.forEach(a),Sl.forEach(a);for(var l=0;l<An.length;l++){var x=An[l];x.blockedOn===r&&(x.blockedOn=null)}for(;0<An.length&&(l=An[0],l.blockedOn===null);)P2(l),l.blockedOn===null&&An.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(x=0;x<l.length;x+=3){var v=l[x],A=l[x+1],z=v[pt]||null;if(typeof A=="function")z||O2(l);else if(z){var U=null;if(A&&A.hasAttribute("formAction")){if(v=A,z=A[pt]||null)U=z.formAction;else if(Ep(v)!==null)continue}else U=z.action;typeof U=="function"?l[x+1]=U:(l.splice(x,3),x-=3),O2(l)}}}function _p(r){this._internalRoot=r}bu.prototype.render=_p.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,x=Or();_2(l,x,r,a,null,null)},bu.prototype.unmount=_p.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;_2(r.current,2,null,r,null,null),Z0(),a[re]=null}};function bu(r){this._internalRoot=r}bu.prototype.unstable_scheduleHydration=function(r){if(r){var a=ie();r={blockedOn:null,target:r,priority:a};for(var l=0;l<An.length&&a!==0&&a<An[l].priority;l++);An.splice(l,0,r),l===0&&P2(r)}};var M2=s.version;if(M2!=="19.1.1")throw Error(i(527,M2,"19.1.1"));O.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(a),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var UC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Ne=vu.inject(UC),Ye=vu}catch{}}return Tl.createRoot=function(r,a){if(!o(r))throw Error(i(299));var l=!1,x="",v=Xv,A=Zv,z=ey,U=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(z=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(U=a.unstable_transitionCallbacks)),a=E2(r,1,!1,null,null,l,x,v,A,z,U,null),r[re]=a.current,dp(r),new _p(a)},Tl.hydrateRoot=function(r,a,l){if(!o(r))throw Error(i(299));var x=!1,v="",A=Xv,z=Zv,U=ey,ae=null,ge=null;return l!=null&&(l.unstable_strictMode===!0&&(x=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(A=l.onUncaughtError),l.onCaughtError!==void 0&&(z=l.onCaughtError),l.onRecoverableError!==void 0&&(U=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ae=l.unstable_transitionCallbacks),l.formState!==void 0&&(ge=l.formState)),a=E2(r,1,!0,a,l??null,x,v,A,z,U,ae,ge),a.context=k2(null),l=a.current,x=Or(),x=$e(x),v=on(x),v.callback=null,ln(l,v,x),l=x,a.current.lanes=l,ze(a,l),ba(a),r[re]=a.current,dp(r),new bu(a)},Tl.version="19.1.1",Tl}var $2;function r6(){if($2)return Sp.exports;$2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Sp.exports=s6(),Sp.exports}var a6=r6();const H=QC;function If(t){if(!t)return null;const s=t.indexOf("{");if(s===-1)return null;const n=t.indexOf(" at ",s),i=n!==-1?n:t.length;let o=t.substring(s,i).trim();o=o.replace(/[.,;:]$/,"");try{const c=JSON.parse(o);if(c&&typeof c=="object"&&c.message)return c}catch{let d=0,m=s;for(let h=s;h<t.length;h++)if(t[h]==="{"&&d++,t[h]==="}"&&d--,d===0){m=h+1;break}if(m>s)try{const h=JSON.parse(t.substring(s,m));if(h&&typeof h=="object"&&h.message)return h}catch{}}return null}function U2(t){if(!t)return"";const s=If(t);if(s&&s.message)return s.message;let n=t;n=n.replace(/\[CONVEX M\([^\]]+\)\]/g,""),n=n.replace(/\[Request ID: [^\]]+\]/g,""),n=n.replace(/Server\s+Error\s+Uncaught\s+Error:\s*/gi,""),n=n.replace(/Server\s+Error\s+Uncaught\s+Error\s*/gi,""),n=n.replace(/Server Error Uncaught Error:\s*/gi,""),n=n.replace(/Server Error Uncaught Error\s*/gi,""),n=n.replace(/Uncaught\s+Error:\s*/gi,""),n=n.replace(/Uncaught\s+Error\s*/gi,""),n=n.replace(/Server\s+Error:\s*/gi,""),n=n.replace(/Server\s+Error\s*/gi,""),n=n.replace(/\s*at\s+[^\n]+/g,""),n=n.replace(/\s*Called by client\s*/gi,"");const i=If(n);return i&&i.message?i.message:(n=n.trim().replace(/\s+/g," "),n=n.replace(/^(Error|Exception|Uncaught):\s*/i,""),n)}function n6(t){try{if(t?.message){const n=If(t.message);if(n&&n.message&&n.code)return{message:n.message,details:n.details||"",action:n.action||"",code:n.code||""};const i=U2(t.message);try{const o=JSON.parse(i);if(o.message&&o.code)return{message:o.message,details:o.details||"",action:o.action||"",code:o.code||""}}catch{const c=i.toLowerCase();return c.includes("email")&&c.includes("already exists")?{message:"An account with this email already exists.",details:"This email address is already registered in our system.",action:"Try signing in instead, or use a different email address to create a new account.",code:"AUTH_EMAIL_EXISTS"}:c.includes("username")&&c.includes("already exists")?{message:"This username is already taken.",details:"Someone else is already using this username.",action:"Please choose a different username for your account.",code:"AUTH_USERNAME_EXISTS"}:c.includes("invalid")&&(c.includes("password")||c.includes("credential"))?{message:"The email or password you entered is incorrect.",details:"Please check your email and password and try again.",action:'Double-check your credentials or use the "Forgot Password" option if needed.',code:"AUTH_INVALID_CREDENTIALS"}:c.includes("inactive")||c.includes("deactivated")?{message:"Your account has been deactivated.",details:"This account is currently inactive and cannot be used to sign in.",action:"Please contact our support team to reactivate your account.",code:"AUTH_ACCOUNT_INACTIVE"}:c.includes("session")&&c.includes("expired")?{message:"Your session has expired.",details:"For security reasons, you need to sign in again.",action:"Please sign in again to continue using the application.",code:"AUTH_SESSION_EXPIRED"}:c.includes("branch")&&c.includes("required")?{message:"Branch assignment is required.",details:"Staff, barbers, branch admins, and admins must be assigned to a branch.",action:"Please contact an administrator to assign you to a branch.",code:"VALIDATION_ERROR"}:c.includes("reset")&&(c.includes("expired")||c.includes("invalid"))?{message:"Password reset link is invalid or expired.",details:"Your password reset link has expired or is invalid.",action:"Please request a new password reset link.",code:"AUTH_INVALID_CREDENTIALS"}:c.includes("facebook")&&(c.includes("invalid")||c.includes("failed"))?{message:"Facebook login failed.",details:"Unable to authenticate with Facebook. The token may be invalid or expired.",action:"Please try logging in again or use email/password instead.",code:"AUTH_INVALID_CREDENTIALS"}:{message:i||"An unexpected error occurred",details:"Please try again or contact support if the problem persists.",action:"",code:"OPERATION_FAILED"}}}}catch(n){console.error("Error parsing Convex error:",n)}return{message:(t?.message?U2(t.message):"An unexpected error occurred")||"An unexpected error occurred",details:"Please try again or contact support if the problem persists.",action:"",code:"OPERATION_FAILED"}}const YA=C.createContext(null),Dt=()=>{const t=C.useContext(YA);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},i6=({children:t})=>{const[s,n]=C.useState(!1),[i,o]=C.useState(null),[c,d]=C.useState(!0),[m,h]=C.useState(null);C.useEffect(()=>{const k=localStorage.getItem("session_token");k?h(k):(d(!1),n(!1),o(null))},[]);const p=me(H.services.auth.getCurrentUser,m?{sessionToken:m}:"skip"),u=De(H.services.auth.loginUser),f=Xr(H.services.auth.loginWithFacebook),g=De(H.services.auth.logoutUser),y=De(H.services.auth.requestPasswordReset),b=Xr(H.services.auth.sendPasswordResetEmail),j=De(H.services.auth.resetPassword);C.useEffect(()=>{m&&p!==void 0&&(d(!1),p?(n(!0),o({_id:p._id,id:p._id,username:p.username,email:p.email,nickname:p.nickname,mobile_number:p.mobile_number,role:p.role,avatar:p.avatar,is_staff:p.role==="staff"||p.role==="admin"||p.role==="super_admin"||p.role==="branch_admin",branch_id:p.branch_id,page_access:p.page_access})):(n(!1),o(null),h(null),localStorage.removeItem("session_token")))},[p,m]);const N=async(k,E)=>{try{const D=await u({email:k,password:E});if(D&&D.sessionToken&&D.user){localStorage.setItem("session_token",D.sessionToken),h(D.sessionToken);const F={_id:D.user._id,id:D.user._id,username:D.user.username,email:D.user.email,nickname:D.user.nickname,mobile_number:D.user.mobile_number,role:D.user.role,avatar:D.user.avatar,is_staff:D.user.role==="staff"||D.user.role==="admin"||D.user.role==="super_admin"||D.user.role==="branch_admin",branch_id:D.user.branch_id,page_access:D.user.page_access};return n(!0),o(F),{success:!0,data:F}}return{success:!1,error:"Invalid email or password"}}catch(D){console.error("Login error:",D);const F=n6(D);return{success:!1,error:F.message,details:F.details,action:F.action}}},w=async k=>{try{const E=await f({access_token:k});if(E?.sessionToken&&E?.user){localStorage.setItem("session_token",E.sessionToken),h(E.sessionToken);const D={_id:E.user._id,id:E.user._id,username:E.user.username,email:E.user.email,nickname:E.user.nickname,mobile_number:E.user.mobile_number,role:E.user.role,avatar:E.user.avatar,is_staff:E.user.role==="staff"||E.user.role==="admin"||E.user.role==="super_admin"||E.user.role==="branch_admin",branch_id:E.user.branch_id};return n(!0),o(D),{success:!0,data:D}}return{success:!1,error:"Facebook login failed"}}catch(E){console.error("Facebook login error:",E);let D=E.message||"Facebook login failed";return E.message&&E.message.includes("development mode")&&(D="Facebook authentication failed. Email service is in development mode."),{success:!1,error:D}}},B=async()=>{try{m&&await g({sessionToken:m})}catch(k){console.error("Logout error:",k)}finally{localStorage.removeItem("session_token"),h(null),n(!1),o(null)}},S=async k=>{try{const E=await y({email:k});if(E.success&&E.token&&E.email){const D=await b({email:E.email,token:E.token});D.success||console.error("Failed to send reset email:",D.error)}return{success:!0}}catch(E){return console.error("Request password reset error:",E),{success:!1,error:E.message||"Failed to request reset"}}},_=async(k,E)=>{try{const D=await j({token:k,new_password:E});return{success:!0}}catch(D){return console.error("Reset password error:",D),{success:!1,error:D.message||"Failed to reset password"}}};return e.jsx(YA.Provider,{value:{isAuthenticated:s,user:i,loading:c,login:N,logout:B,loginWithFacebook:w,sessionToken:m,requestPasswordReset:S,resetPassword:_},children:t})},Xu="branding_global_cache",o6=1440*60*1e3,Pp={display_name:"",primary_color:"#000000",accent_color:"#000000",bg_color:"#0A0A0A",text_color:"#FFFFFF",muted_color:"#333333",hero_image_url:"/landing/2.webp",feature_toggles:{kiosk:!0,wallet:!0,vouchers:!0,referrals:!1}},QA=C.createContext(null),Ts=()=>{const t=C.useContext(QA);if(!t)throw new Error("useBranding must be used within a BrandingProvider");return t},l6=()=>{if(typeof window>"u")return null;try{const t=localStorage.getItem(Xu);if(!t)return null;const s=JSON.parse(t);return s.cachedAt&&Date.now()-s.cachedAt>o6?(localStorage.removeItem(Xu),null):s.data}catch{return null}},c6=t=>{if(!(typeof window>"u"))try{localStorage.setItem(Xu,JSON.stringify({data:t,cachedAt:Date.now()}))}catch(s){console.warn("Failed to cache branding:",s)}},WA=({children:t})=>{const[s,n]=C.useState(0),[i,o]=C.useState(()=>l6()||Pp),[c,d]=C.useState(!1),[m,h]=C.useState(!0),[p,u]=C.useState(null),f=me(H.services.branding.getGlobalBranding,C.useMemo(()=>({version:s}),[s])),g=C.useCallback(j=>{const N={...Pp,...j};if(typeof document>"u")return;const w=document.documentElement,B=(S,_)=>{_&&w.style.setProperty(S,_)};if(B("--color-primary",N.primary_color),B("--color-accent",N.accent_color),B("--color-bg",N.bg_color),B("--color-text",N.text_color),B("--color-muted",N.muted_color),N.favicon_url){let S=document.querySelector("link[rel='icon']");S||(S=document.createElement("link"),S.setAttribute("rel","icon"),document.head.appendChild(S)),S.setAttribute("href",N.favicon_url)}},[]);C.useEffect(()=>{if(f===void 0){h(!0);return}if(h(!1),!f){u("Failed to load branding configuration"),o(Pp);try{typeof window<"u"&&localStorage.removeItem(Xu)}catch{}return}u(null),o(j=>{const N=j?.updatedAt||0,w=f.updatedAt||0;return!j||w>=N?(c6(f),f):j})},[f]),C.useEffect(()=>{i&&(g(i),d(!0))},[i,g]);const y=C.useCallback(()=>{n(j=>j+1)},[]),b=C.useMemo(()=>({branding:i,applied:c,loading:m,error:p,refresh:y}),[i,c,m,p,y]);return e.jsx(QA.Provider,{value:b,children:t})},gg=C.createContext({});function bg(t){const s=C.useRef(null);return s.current===null&&(s.current=t()),s.current}const vg=typeof window<"u",KA=vg?C.useLayoutEffect:C.useEffect,hm=C.createContext(null);function yg(t,s){t.indexOf(s)===-1&&t.push(s)}function jg(t,s){const n=t.indexOf(s);n>-1&&t.splice(n,1)}const Ga=(t,s,n)=>n>s?s:n<t?t:n;let Ng=()=>{};const Ya={},XA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ZA(t){return typeof t=="object"&&t!==null}const e5=t=>/^0[^.\s]+$/u.test(t);function wg(t){let s;return()=>(s===void 0&&(s=t()),s)}const ta=t=>t,d6=(t,s)=>n=>s(t(n)),n0=(...t)=>t.reduce(d6),Wx=(t,s,n)=>{const i=s-t;return i===0?1:(n-t)/i};class Ag{constructor(){this.subscriptions=[]}add(s){return yg(this.subscriptions,s),()=>jg(this.subscriptions,s)}notify(s,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](s,n,i);else for(let c=0;c<o;c++){const d=this.subscriptions[c];d&&d(s,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Na=t=>t*1e3,Zr=t=>t/1e3;function t5(t,s){return s?t*(1e3/s):0}const s5=(t,s,n)=>(((1-3*n+3*s)*t+(3*n-6*s))*t+3*s)*t,x6=1e-7,u6=12;function m6(t,s,n,i,o){let c,d,m=0;do d=s+(n-s)/2,c=s5(d,i,o)-t,c>0?n=d:s=d;while(Math.abs(c)>x6&&++m<u6);return d}function i0(t,s,n,i){if(t===s&&n===i)return ta;const o=c=>m6(c,0,1,t,n);return c=>c===0||c===1?c:s5(o(c),s,i)}const r5=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,a5=t=>s=>1-t(1-s),n5=i0(.33,1.53,.69,.99),Cg=a5(n5),i5=r5(Cg),o5=t=>(t*=2)<1?.5*Cg(t):.5*(2-Math.pow(2,-10*(t-1))),Eg=t=>1-Math.sin(Math.acos(t)),l5=a5(Eg),c5=r5(Eg),h6=i0(.42,0,1,1),p6=i0(0,0,.58,1),d5=i0(.42,0,.58,1),f6=t=>Array.isArray(t)&&typeof t[0]!="number",x5=t=>Array.isArray(t)&&typeof t[0]=="number",g6={linear:ta,easeIn:h6,easeInOut:d5,easeOut:p6,circIn:Eg,circInOut:c5,circOut:l5,backIn:Cg,backInOut:i5,backOut:n5,anticipate:o5},b6=t=>typeof t=="string",V2=t=>{if(x5(t)){Ng(t.length===4);const[s,n,i,o]=t;return i0(s,n,i,o)}else if(b6(t))return g6[t];return t},ju=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function v6(t,s){let n=new Set,i=new Set,o=!1,c=!1;const d=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function h(u){d.has(u)&&(p.schedule(u),t()),u(m)}const p={schedule:(u,f=!1,g=!1)=>{const b=g&&o?n:i;return f&&d.add(u),b.has(u)||b.add(u),u},cancel:u=>{i.delete(u),d.delete(u)},process:u=>{if(m=u,o){c=!0;return}o=!0,[n,i]=[i,n],n.forEach(h),n.clear(),o=!1,c&&(c=!1,p.process(u))}};return p}const y6=40;function u5(t,s){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},c=()=>n=!0,d=ju.reduce((S,_)=>(S[_]=v6(c),S),{}),{setup:m,read:h,resolveKeyframes:p,preUpdate:u,update:f,preRender:g,render:y,postRender:b}=d,j=()=>{const S=Ya.useManualTiming?o.timestamp:performance.now();n=!1,Ya.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(S-o.timestamp,y6),1)),o.timestamp=S,o.isProcessing=!0,m.process(o),h.process(o),p.process(o),u.process(o),f.process(o),g.process(o),y.process(o),b.process(o),o.isProcessing=!1,n&&s&&(i=!1,t(j))},N=()=>{n=!0,i=!0,o.isProcessing||t(j)};return{schedule:ju.reduce((S,_)=>{const k=d[_];return S[_]=(E,D=!1,F=!1)=>(n||N(),k.schedule(E,D,F)),S},{}),cancel:S=>{for(let _=0;_<ju.length;_++)d[ju[_]].cancel(S)},state:o,steps:d}}const{schedule:As,cancel:Pn,state:or,steps:Tp}=u5(typeof requestAnimationFrame<"u"?requestAnimationFrame:ta,!0);let $u;function j6(){$u=void 0}const Ar={now:()=>($u===void 0&&Ar.set(or.isProcessing||Ya.useManualTiming?or.timestamp:performance.now()),$u),set:t=>{$u=t,queueMicrotask(j6)}},m5=t=>s=>typeof s=="string"&&s.startsWith(t),kg=m5("--"),N6=m5("var(--"),_g=t=>N6(t)?w6.test(t.split("/*")[0].trim()):!1,w6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,To={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Kx={...To,transform:t=>Ga(0,1,t)},Nu={...To,default:1},Vx=t=>Math.round(t*1e5)/1e5,Bg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function A6(t){return t==null}const C6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sg=(t,s)=>n=>!!(typeof n=="string"&&C6.test(n)&&n.startsWith(t)||s&&!A6(n)&&Object.prototype.hasOwnProperty.call(n,s)),h5=(t,s,n)=>i=>{if(typeof i!="string")return i;const[o,c,d,m]=i.match(Bg);return{[t]:parseFloat(o),[s]:parseFloat(c),[n]:parseFloat(d),alpha:m!==void 0?parseFloat(m):1}},E6=t=>Ga(0,255,t),Op={...To,transform:t=>Math.round(E6(t))},pi={test:Sg("rgb","red"),parse:h5("red","green","blue"),transform:({red:t,green:s,blue:n,alpha:i=1})=>"rgba("+Op.transform(t)+", "+Op.transform(s)+", "+Op.transform(n)+", "+Vx(Kx.transform(i))+")"};function k6(t){let s="",n="",i="",o="";return t.length>5?(s=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(s=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),s+=s,n+=n,i+=i,o+=o),{red:parseInt(s,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Lf={test:Sg("#"),parse:k6,transform:pi.transform},o0=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),Bn=o0("deg"),wa=o0("%"),Ct=o0("px"),_6=o0("vh"),B6=o0("vw"),H2={...wa,parse:t=>wa.parse(t)/100,transform:t=>wa.transform(t*100)},vo={test:Sg("hsl","hue"),parse:h5("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+wa.transform(Vx(s))+", "+wa.transform(Vx(n))+", "+Vx(Kx.transform(i))+")"},Hs={test:t=>pi.test(t)||Lf.test(t)||vo.test(t),parse:t=>pi.test(t)?pi.parse(t):vo.test(t)?vo.parse(t):Lf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?pi.transform(t):vo.transform(t),getAnimatableNone:t=>{const s=Hs.parse(t);return s.alpha=0,Hs.transform(s)}},S6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function D6(t){return isNaN(t)&&typeof t=="string"&&(t.match(Bg)?.length||0)+(t.match(S6)?.length||0)>0}const p5="number",f5="color",F6="var",P6="var(",J2="${}",T6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xx(t){const s=t.toString(),n=[],i={color:[],number:[],var:[]},o=[];let c=0;const m=s.replace(T6,h=>(Hs.test(h)?(i.color.push(c),o.push(f5),n.push(Hs.parse(h))):h.startsWith(P6)?(i.var.push(c),o.push(F6),n.push(h)):(i.number.push(c),o.push(p5),n.push(parseFloat(h))),++c,J2)).split(J2);return{values:n,split:m,indexes:i,types:o}}function g5(t){return Xx(t).values}function b5(t){const{split:s,types:n}=Xx(t),i=s.length;return o=>{let c="";for(let d=0;d<i;d++)if(c+=s[d],o[d]!==void 0){const m=n[d];m===p5?c+=Vx(o[d]):m===f5?c+=Hs.transform(o[d]):c+=o[d]}return c}}const O6=t=>typeof t=="number"?0:Hs.test(t)?Hs.getAnimatableNone(t):t;function M6(t){const s=g5(t);return b5(t)(s.map(O6))}const Tn={test:D6,parse:g5,createTransformer:b5,getAnimatableNone:M6};function Mp(t,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(s-t)*6*n:n<1/2?s:n<2/3?t+(s-t)*(2/3-n)*6:t}function R6({hue:t,saturation:s,lightness:n,alpha:i}){t/=360,s/=100,n/=100;let o=0,c=0,d=0;if(!s)o=c=d=n;else{const m=n<.5?n*(1+s):n+s-n*s,h=2*n-m;o=Mp(h,m,t+1/3),c=Mp(h,m,t),d=Mp(h,m,t-1/3)}return{red:Math.round(o*255),green:Math.round(c*255),blue:Math.round(d*255),alpha:i}}function Zu(t,s){return n=>n>0?s:t}const Bs=(t,s,n)=>t+(s-t)*n,Rp=(t,s,n)=>{const i=t*t,o=n*(s*s-i)+i;return o<0?0:Math.sqrt(o)},z6=[Lf,pi,vo],I6=t=>z6.find(s=>s.test(t));function G2(t){const s=I6(t);if(!s)return!1;let n=s.parse(t);return s===vo&&(n=R6(n)),n}const Y2=(t,s)=>{const n=G2(t),i=G2(s);if(!n||!i)return Zu(t,s);const o={...n};return c=>(o.red=Rp(n.red,i.red,c),o.green=Rp(n.green,i.green,c),o.blue=Rp(n.blue,i.blue,c),o.alpha=Bs(n.alpha,i.alpha,c),pi.transform(o))},qf=new Set(["none","hidden"]);function L6(t,s){return qf.has(t)?n=>n<=0?t:s:n=>n>=1?s:t}function q6(t,s){return n=>Bs(t,s,n)}function Dg(t){return typeof t=="number"?q6:typeof t=="string"?_g(t)?Zu:Hs.test(t)?Y2:V6:Array.isArray(t)?v5:typeof t=="object"?Hs.test(t)?Y2:$6:Zu}function v5(t,s){const n=[...t],i=n.length,o=t.map((c,d)=>Dg(c)(c,s[d]));return c=>{for(let d=0;d<i;d++)n[d]=o[d](c);return n}}function $6(t,s){const n={...t,...s},i={};for(const o in n)t[o]!==void 0&&s[o]!==void 0&&(i[o]=Dg(t[o])(t[o],s[o]));return o=>{for(const c in i)n[c]=i[c](o);return n}}function U6(t,s){const n=[],i={color:0,var:0,number:0};for(let o=0;o<s.values.length;o++){const c=s.types[o],d=t.indexes[c][i[c]],m=t.values[d]??0;n[o]=m,i[c]++}return n}const V6=(t,s)=>{const n=Tn.createTransformer(s),i=Xx(t),o=Xx(s);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?qf.has(t)&&!o.values.length||qf.has(s)&&!i.values.length?L6(t,s):n0(v5(U6(i,o),o.values),n):Zu(t,s)};function y5(t,s,n){return typeof t=="number"&&typeof s=="number"&&typeof n=="number"?Bs(t,s,n):Dg(t)(t,s)}const H6=t=>{const s=({timestamp:n})=>t(n);return{start:(n=!0)=>As.update(s,n),stop:()=>Pn(s),now:()=>or.isProcessing?or.timestamp:Ar.now()}},j5=(t,s,n=10)=>{let i="";const o=Math.max(Math.round(s/n),2);for(let c=0;c<o;c++)i+=Math.round(t(c/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},em=2e4;function Fg(t){let s=0;const n=50;let i=t.next(s);for(;!i.done&&s<em;)s+=n,i=t.next(s);return s>=em?1/0:s}function J6(t,s=100,n){const i=n({...t,keyframes:[0,s]}),o=Math.min(Fg(i),em);return{type:"keyframes",ease:c=>i.next(o*c).value/s,duration:Zr(o)}}const G6=5;function N5(t,s,n){const i=Math.max(s-G6,0);return t5(n-t(i),s-i)}const Fs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zp=.001;function Y6({duration:t=Fs.duration,bounce:s=Fs.bounce,velocity:n=Fs.velocity,mass:i=Fs.mass}){let o,c,d=1-s;d=Ga(Fs.minDamping,Fs.maxDamping,d),t=Ga(Fs.minDuration,Fs.maxDuration,Zr(t)),d<1?(o=p=>{const u=p*d,f=u*t,g=u-n,y=$f(p,d),b=Math.exp(-f);return zp-g/y*b},c=p=>{const f=p*d*t,g=f*n+n,y=Math.pow(d,2)*Math.pow(p,2)*t,b=Math.exp(-f),j=$f(Math.pow(p,2),d);return(-o(p)+zp>0?-1:1)*((g-y)*b)/j}):(o=p=>{const u=Math.exp(-p*t),f=(p-n)*t+1;return-zp+u*f},c=p=>{const u=Math.exp(-p*t),f=(n-p)*(t*t);return u*f});const m=5/t,h=W6(o,c,m);if(t=Na(t),isNaN(h))return{stiffness:Fs.stiffness,damping:Fs.damping,duration:t};{const p=Math.pow(h,2)*i;return{stiffness:p,damping:d*2*Math.sqrt(i*p),duration:t}}}const Q6=12;function W6(t,s,n){let i=n;for(let o=1;o<Q6;o++)i=i-t(i)/s(i);return i}function $f(t,s){return t*Math.sqrt(1-s*s)}const K6=["duration","bounce"],X6=["stiffness","damping","mass"];function Q2(t,s){return s.some(n=>t[n]!==void 0)}function Z6(t){let s={velocity:Fs.velocity,stiffness:Fs.stiffness,damping:Fs.damping,mass:Fs.mass,isResolvedFromDuration:!1,...t};if(!Q2(t,X6)&&Q2(t,K6))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,c=2*Ga(.05,1,1-(t.bounce||0))*Math.sqrt(o);s={...s,mass:Fs.mass,stiffness:o,damping:c}}else{const n=Y6(t);s={...s,...n,mass:Fs.mass},s.isResolvedFromDuration=!0}return s}function tm(t=Fs.visualDuration,s=Fs.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:i,restDelta:o}=n;const c=n.keyframes[0],d=n.keyframes[n.keyframes.length-1],m={done:!1,value:c},{stiffness:h,damping:p,mass:u,duration:f,velocity:g,isResolvedFromDuration:y}=Z6({...n,velocity:-Zr(n.velocity||0)}),b=g||0,j=p/(2*Math.sqrt(h*u)),N=d-c,w=Zr(Math.sqrt(h/u)),B=Math.abs(N)<5;i||(i=B?Fs.restSpeed.granular:Fs.restSpeed.default),o||(o=B?Fs.restDelta.granular:Fs.restDelta.default);let S;if(j<1){const k=$f(w,j);S=E=>{const D=Math.exp(-j*w*E);return d-D*((b+j*w*N)/k*Math.sin(k*E)+N*Math.cos(k*E))}}else if(j===1)S=k=>d-Math.exp(-w*k)*(N+(b+w*N)*k);else{const k=w*Math.sqrt(j*j-1);S=E=>{const D=Math.exp(-j*w*E),F=Math.min(k*E,300);return d-D*((b+j*w*N)*Math.sinh(F)+k*N*Math.cosh(F))/k}}const _={calculatedDuration:y&&f||null,next:k=>{const E=S(k);if(y)m.done=k>=f;else{let D=k===0?b:0;j<1&&(D=k===0?Na(b):N5(S,k,E));const F=Math.abs(D)<=i,M=Math.abs(d-E)<=o;m.done=F&&M}return m.value=m.done?d:E,m},toString:()=>{const k=Math.min(Fg(_),em),E=j5(D=>_.next(k*D).value,k,30);return k+"ms "+E},toTransition:()=>{}};return _}tm.applyToOptions=t=>{const s=J6(t,100,tm);return t.ease=s.ease,t.duration=Na(s.duration),t.type="keyframes",t};function Uf({keyframes:t,velocity:s=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:c=500,modifyTarget:d,min:m,max:h,restDelta:p=.5,restSpeed:u}){const f=t[0],g={done:!1,value:f},y=F=>m!==void 0&&F<m||h!==void 0&&F>h,b=F=>m===void 0?h:h===void 0||Math.abs(m-F)<Math.abs(h-F)?m:h;let j=n*s;const N=f+j,w=d===void 0?N:d(N);w!==N&&(j=w-f);const B=F=>-j*Math.exp(-F/i),S=F=>w+B(F),_=F=>{const M=B(F),P=S(F);g.done=Math.abs(M)<=p,g.value=g.done?w:P};let k,E;const D=F=>{y(g.value)&&(k=F,E=tm({keyframes:[g.value,b(g.value)],velocity:N5(S,F,g.value),damping:o,stiffness:c,restDelta:p,restSpeed:u}))};return D(0),{calculatedDuration:null,next:F=>{let M=!1;return!E&&k===void 0&&(M=!0,_(F),D(F)),k!==void 0&&F>=k?E.next(F-k):(!M&&_(F),g)}}}function eE(t,s,n){const i=[],o=n||Ya.mix||y5,c=t.length-1;for(let d=0;d<c;d++){let m=o(t[d],t[d+1]);if(s){const h=Array.isArray(s)?s[d]||ta:s;m=n0(h,m)}i.push(m)}return i}function tE(t,s,{clamp:n=!0,ease:i,mixer:o}={}){const c=t.length;if(Ng(c===s.length),c===1)return()=>s[0];if(c===2&&s[0]===s[1])return()=>s[1];const d=t[0]===t[1];t[0]>t[c-1]&&(t=[...t].reverse(),s=[...s].reverse());const m=eE(s,i,o),h=m.length,p=u=>{if(d&&u<t[0])return s[0];let f=0;if(h>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const g=Wx(t[f],t[f+1],u);return m[f](g)};return n?u=>p(Ga(t[0],t[c-1],u)):p}function sE(t,s){const n=t[t.length-1];for(let i=1;i<=s;i++){const o=Wx(0,s,i);t.push(Bs(n,1,o))}}function rE(t){const s=[0];return sE(s,t.length-1),s}function aE(t,s){return t.map(n=>n*s)}function nE(t,s){return t.map(()=>s||d5).splice(0,t.length-1)}function Hx({duration:t=300,keyframes:s,times:n,ease:i="easeInOut"}){const o=f6(i)?i.map(V2):V2(i),c={done:!1,value:s[0]},d=aE(n&&n.length===s.length?n:rE(s),t),m=tE(d,s,{ease:Array.isArray(o)?o:nE(s,o)});return{calculatedDuration:t,next:h=>(c.value=m(h),c.done=h>=t,c)}}const iE=t=>t!==null;function Pg(t,{repeat:s,repeatType:n="loop"},i,o=1){const c=t.filter(iE),m=o<0||s&&n!=="loop"&&s%2===1?0:c.length-1;return!m||i===void 0?c[m]:i}const oE={decay:Uf,inertia:Uf,tween:Hx,keyframes:Hx,spring:tm};function w5(t){typeof t.type=="string"&&(t.type=oE[t.type])}class Tg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(s=>{this.resolve=s})}notifyFinished(){this.resolve()}then(s,n){return this.finished.then(s,n)}}const lE=t=>t/100;class Og extends Tg{constructor(s){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Ar.now()&&this.tick(Ar.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=s,this.initAnimation(),this.play(),s.autoplay===!1&&this.pause()}initAnimation(){const{options:s}=this;w5(s);const{type:n=Hx,repeat:i=0,repeatDelay:o=0,repeatType:c,velocity:d=0}=s;let{keyframes:m}=s;const h=n||Hx;h!==Hx&&typeof m[0]!="number"&&(this.mixKeyframes=n0(lE,y5(m[0],m[1])),m=[0,100]);const p=h({...s,keyframes:m});c==="mirror"&&(this.mirroredGenerator=h({...s,keyframes:[...m].reverse(),velocity:-d})),p.calculatedDuration===null&&(p.calculatedDuration=Fg(p));const{calculatedDuration:u}=p;this.calculatedDuration=u,this.resolvedDuration=u+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=p}updateTime(s){const n=Math.round(s-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(s,n=!1){const{generator:i,totalDuration:o,mixKeyframes:c,mirroredGenerator:d,resolvedDuration:m,calculatedDuration:h}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:u,repeat:f,repeatType:g,repeatDelay:y,type:b,onUpdate:j,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-o/this.speed,this.startTime)),n?this.currentTime=s:this.updateTime(s);const w=this.currentTime-p*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?w<0:w>o;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let S=this.currentTime,_=i;if(f){const F=Math.min(this.currentTime,o)/m;let M=Math.floor(F),P=F%1;!P&&F>=1&&(P=1),P===1&&M--,M=Math.min(M,f+1),!!(M%2)&&(g==="reverse"?(P=1-P,y&&(P-=y/m)):g==="mirror"&&(_=d)),S=Ga(0,1,P)*m}const k=B?{done:!1,value:u[0]}:_.next(S);c&&(k.value=c(k.value));let{done:E}=k;!B&&h!==null&&(E=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return D&&b!==Uf&&(k.value=Pg(u,this.options,N,this.speed)),j&&j(k.value),D&&this.finish(),k}then(s,n){return this.finished.then(s,n)}get duration(){return Zr(this.calculatedDuration)}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Zr(s)}get time(){return Zr(this.currentTime)}set time(s){s=Na(s),this.currentTime=s,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(s){this.updateTime(Ar.now());const n=this.playbackSpeed!==s;this.playbackSpeed=s,n&&(this.time=Zr(this.currentTime))}play(){if(this.isStopped)return;const{driver:s=H6,startTime:n}=this.options;this.driver||(this.driver=s(o=>this.tick(o))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ar.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}attachTimeline(s){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),s.observe(this)}}function cE(t){for(let s=1;s<t.length;s++)t[s]??(t[s]=t[s-1])}const fi=t=>t*180/Math.PI,Vf=t=>{const s=fi(Math.atan2(t[1],t[0]));return Hf(s)},dE={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Vf,rotateZ:Vf,skewX:t=>fi(Math.atan(t[1])),skewY:t=>fi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Hf=t=>(t=t%360,t<0&&(t+=360),t),W2=Vf,K2=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),X2=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),xE={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:K2,scaleY:X2,scale:t=>(K2(t)+X2(t))/2,rotateX:t=>Hf(fi(Math.atan2(t[6],t[5]))),rotateY:t=>Hf(fi(Math.atan2(-t[2],t[0]))),rotateZ:W2,rotate:W2,skewX:t=>fi(Math.atan(t[4])),skewY:t=>fi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Jf(t){return t.includes("scale")?1:0}function Gf(t,s){if(!t||t==="none")return Jf(s);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=xE,o=n;else{const m=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=dE,o=m}if(!o)return Jf(s);const c=i[s],d=o[1].split(",").map(mE);return typeof c=="function"?c(d):d[c]}const uE=(t,s)=>{const{transform:n="none"}=getComputedStyle(t);return Gf(n,s)};function mE(t){return parseFloat(t.trim())}const Oo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mo=new Set(Oo),Z2=t=>t===To||t===Ct,hE=new Set(["x","y","z"]),pE=Oo.filter(t=>!hE.has(t));function fE(t){const s=[];return pE.forEach(n=>{const i=t.getValue(n);i!==void 0&&(s.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),s}const bi={width:({x:t},{paddingLeft:s="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),height:({y:t},{paddingTop:s="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(s)-parseFloat(n),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:(t,{transform:s})=>Gf(s,"x"),y:(t,{transform:s})=>Gf(s,"y")};bi.translateX=bi.x;bi.translateY=bi.y;const vi=new Set;let Yf=!1,Qf=!1,Wf=!1;function A5(){if(Qf){const t=Array.from(vi).filter(i=>i.needsMeasurement),s=new Set(t.map(i=>i.element)),n=new Map;s.forEach(i=>{const o=fE(i);o.length&&(n.set(i,o),i.render())}),t.forEach(i=>i.measureInitialState()),s.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([c,d])=>{i.getValue(c)?.set(d)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Qf=!1,Yf=!1,vi.forEach(t=>t.complete(Wf)),vi.clear()}function C5(){vi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Qf=!0)})}function gE(){Wf=!0,C5(),A5(),Wf=!1}class Mg{constructor(s,n,i,o,c,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...s],this.onComplete=n,this.name=i,this.motionValue=o,this.element=c,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(vi.add(this),Yf||(Yf=!0,As.read(C5),As.resolveKeyframes(A5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:n,element:i,motionValue:o}=this;if(s[0]===null){const c=o?.get(),d=s[s.length-1];if(c!==void 0)s[0]=c;else if(i&&n){const m=i.readValue(n,d);m!=null&&(s[0]=m)}s[0]===void 0&&(s[0]=d),o&&c===void 0&&o.set(s[0])}cE(s)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(s=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,s),vi.delete(this)}cancel(){this.state==="scheduled"&&(vi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bE=t=>t.startsWith("--");function vE(t,s,n){bE(s)?t.style.setProperty(s,n):t.style[s]=n}const yE=wg(()=>window.ScrollTimeline!==void 0),jE={};function NE(t,s){const n=wg(t);return()=>jE[s]??n()}const E5=NE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$x=([t,s,n,i])=>`cubic-bezier(${t}, ${s}, ${n}, ${i})`,e1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$x([0,.65,.55,1]),circOut:$x([.55,0,1,.45]),backIn:$x([.31,.01,.66,-.59]),backOut:$x([.33,1.53,.69,.99])};function k5(t,s){if(t)return typeof t=="function"?E5()?j5(t,s):"ease-out":x5(t)?$x(t):Array.isArray(t)?t.map(n=>k5(n,s)||e1.easeOut):e1[t]}function wE(t,s,n,{delay:i=0,duration:o=300,repeat:c=0,repeatType:d="loop",ease:m="easeOut",times:h}={},p=void 0){const u={[s]:n};h&&(u.offset=h);const f=k5(m,o);Array.isArray(f)&&(u.easing=f);const g={delay:i,duration:o,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:c+1,direction:d==="reverse"?"alternate":"normal"};return p&&(g.pseudoElement=p),t.animate(u,g)}function _5(t){return typeof t=="function"&&"applyToOptions"in t}function AE({type:t,...s}){return _5(t)&&E5()?t.applyToOptions(s):(s.duration??(s.duration=300),s.ease??(s.ease="easeOut"),s)}class CE extends Tg{constructor(s){if(super(),this.finishedTime=null,this.isStopped=!1,!s)return;const{element:n,name:i,keyframes:o,pseudoElement:c,allowFlatten:d=!1,finalKeyframe:m,onComplete:h}=s;this.isPseudoElement=!!c,this.allowFlatten=d,this.options=s,Ng(typeof s.type!="string");const p=AE(s);this.animation=wE(n,i,o,p,c),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const u=Pg(o,this.options,m,this.speed);this.updateMotionValue?this.updateMotionValue(u):vE(n,i,u),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:s}=this;s==="idle"||s==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const s=this.animation.effect?.getComputedTiming?.().duration||0;return Zr(Number(s))}get iterationDuration(){const{delay:s=0}=this.options||{};return this.duration+Zr(s)}get time(){return Zr(Number(this.animation.currentTime)||0)}set time(s){this.finishedTime=null,this.animation.currentTime=Na(s)}get speed(){return this.animation.playbackRate}set speed(s){s<0&&(this.finishedTime=null),this.animation.playbackRate=s}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(s){this.animation.startTime=s}attachTimeline({timeline:s,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,s&&yE()?(this.animation.timeline=s,ta):n(this)}}const B5={anticipate:o5,backInOut:i5,circInOut:c5};function EE(t){return t in B5}function kE(t){typeof t.ease=="string"&&EE(t.ease)&&(t.ease=B5[t.ease])}const t1=10;class _E extends CE{constructor(s){kE(s),w5(s),super(s),s.startTime&&(this.startTime=s.startTime),this.options=s}updateMotionValue(s){const{motionValue:n,onUpdate:i,onComplete:o,element:c,...d}=this.options;if(!n)return;if(s!==void 0){n.set(s);return}const m=new Og({...d,autoplay:!1}),h=Na(this.finishedTime??this.time);n.setWithVelocity(m.sample(h-t1).value,m.sample(h).value,t1),m.stop()}}const s1=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Tn.test(t)||t==="0")&&!t.startsWith("url("));function BE(t){const s=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}function SE(t,s,n,i){const o=t[0];if(o===null)return!1;if(s==="display"||s==="visibility")return!0;const c=t[t.length-1],d=s1(o,s),m=s1(c,s);return!d||!m?!1:BE(t)||(n==="spring"||_5(n))&&i}function Kf(t){t.duration=0,t.type="keyframes"}const DE=new Set(["opacity","clipPath","filter","transform"]),FE=wg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function PE(t){const{motionValue:s,name:n,repeatDelay:i,repeatType:o,damping:c,type:d}=t;if(!(s?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=s.owner.getProps();return FE()&&n&&DE.has(n)&&(n!=="transform"||!p)&&!h&&!i&&o!=="mirror"&&c!==0&&d!=="inertia"}const TE=40;class OE extends Tg{constructor({autoplay:s=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:c=0,repeatType:d="loop",keyframes:m,name:h,motionValue:p,element:u,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Ar.now();const g={autoplay:s,delay:n,type:i,repeat:o,repeatDelay:c,repeatType:d,name:h,motionValue:p,element:u,...f},y=u?.KeyframeResolver||Mg;this.keyframeResolver=new y(m,(b,j,N)=>this.onKeyframesResolved(b,j,g,!N),h,p,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(s,n,i,o){this.keyframeResolver=void 0;const{name:c,type:d,velocity:m,delay:h,isHandoff:p,onUpdate:u}=i;this.resolvedAt=Ar.now(),SE(s,c,d,m)||((Ya.instantAnimations||!h)&&u?.(Pg(s,i,n)),s[0]=s[s.length-1],Kf(i),i.repeat=0);const g={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>TE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:s},y=!p&&PE(g)?new _E({...g,element:g.motionValue.owner.current}):new Og(g);y.finished.then(()=>this.notifyFinished()).catch(ta),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(s,n){return this.finished.finally(s).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),gE()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(s){this.animation.time=s}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(s){this.animation.speed=s}get startTime(){return this.animation.startTime}attachTimeline(s){return this._animation?this.stopTimeline=this.animation.attachTimeline(s):this.pendingTimeline=s,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ME=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RE(t){const s=ME.exec(t);if(!s)return[,];const[,n,i,o]=s;return[`--${n??i}`,o]}function S5(t,s,n=1){const[i,o]=RE(t);if(!i)return;const c=window.getComputedStyle(s).getPropertyValue(i);if(c){const d=c.trim();return XA(d)?parseFloat(d):d}return _g(o)?S5(o,s,n+1):o}function Rg(t,s){return t?.[s]??t?.default??t}const D5=new Set(["width","height","top","left","right","bottom",...Oo]),zE={test:t=>t==="auto",parse:t=>t},F5=t=>s=>s.test(t),P5=[To,Ct,wa,Bn,B6,_6,zE],r1=t=>P5.find(F5(t));function IE(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||e5(t):!0}const LE=new Set(["brightness","contrast","saturate","opacity"]);function qE(t){const[s,n]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[i]=n.match(Bg)||[];if(!i)return t;const o=n.replace(i,"");let c=LE.has(s)?1:0;return i!==n&&(c*=100),s+"("+c+o+")"}const $E=/\b([a-z-]*)\(.*?\)/gu,Xf={...Tn,getAnimatableNone:t=>{const s=t.match($E);return s?s.map(qE).join(" "):t}},a1={...To,transform:Math.round},UE={rotate:Bn,rotateX:Bn,rotateY:Bn,rotateZ:Bn,scale:Nu,scaleX:Nu,scaleY:Nu,scaleZ:Nu,skew:Bn,skewX:Bn,skewY:Bn,distance:Ct,translateX:Ct,translateY:Ct,translateZ:Ct,x:Ct,y:Ct,z:Ct,perspective:Ct,transformPerspective:Ct,opacity:Kx,originX:H2,originY:H2,originZ:Ct},zg={borderWidth:Ct,borderTopWidth:Ct,borderRightWidth:Ct,borderBottomWidth:Ct,borderLeftWidth:Ct,borderRadius:Ct,radius:Ct,borderTopLeftRadius:Ct,borderTopRightRadius:Ct,borderBottomRightRadius:Ct,borderBottomLeftRadius:Ct,width:Ct,maxWidth:Ct,height:Ct,maxHeight:Ct,top:Ct,right:Ct,bottom:Ct,left:Ct,padding:Ct,paddingTop:Ct,paddingRight:Ct,paddingBottom:Ct,paddingLeft:Ct,margin:Ct,marginTop:Ct,marginRight:Ct,marginBottom:Ct,marginLeft:Ct,backgroundPositionX:Ct,backgroundPositionY:Ct,...UE,zIndex:a1,fillOpacity:Kx,strokeOpacity:Kx,numOctaves:a1},VE={...zg,color:Hs,backgroundColor:Hs,outlineColor:Hs,fill:Hs,stroke:Hs,borderColor:Hs,borderTopColor:Hs,borderRightColor:Hs,borderBottomColor:Hs,borderLeftColor:Hs,filter:Xf,WebkitFilter:Xf},T5=t=>VE[t];function O5(t,s){let n=T5(t);return n!==Xf&&(n=Tn),n.getAnimatableNone?n.getAnimatableNone(s):void 0}const HE=new Set(["auto","none","0"]);function JE(t,s,n){let i=0,o;for(;i<t.length&&!o;){const c=t[i];typeof c=="string"&&!HE.has(c)&&Xx(c).values.length&&(o=t[i]),i++}if(o&&n)for(const c of s)t[c]=O5(n,o)}class GE extends Mg{constructor(s,n,i,o,c){super(s,n,i,o,c,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<s.length;h++){let p=s[h];if(typeof p=="string"&&(p=p.trim(),_g(p))){const u=S5(p,n.current);u!==void 0&&(s[h]=u),h===s.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!D5.has(i)||s.length!==2)return;const[o,c]=s,d=r1(o),m=r1(c);if(d!==m)if(Z2(d)&&Z2(m))for(let h=0;h<s.length;h++){const p=s[h];typeof p=="string"&&(s[h]=parseFloat(p))}else bi[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:n}=this,i=[];for(let o=0;o<s.length;o++)(s[o]===null||IE(s[o]))&&i.push(o);i.length&&JE(s,i,n)}measureInitialState(){const{element:s,unresolvedKeyframes:n,name:i}=this;if(!s||!s.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bi[i](s.measureViewportBox(),window.getComputedStyle(s.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&s.getValue(i,o).jump(o,!1)}measureEndState(){const{element:s,name:n,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const o=s.getValue(n);o&&o.jump(this.measuredOrigin,!1);const c=i.length-1,d=i[c];i[c]=bi[n](s.measureViewportBox(),window.getComputedStyle(s.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([m,h])=>{s.getValue(m).set(h)}),this.resolveNoneKeyframes()}}function YE(t,s,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const o=n?.[t]??i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const M5=(t,s)=>s&&typeof t=="number"?s.transform(t):t;function R5(t){return ZA(t)&&"offsetHeight"in t}const n1=30,QE=t=>!isNaN(parseFloat(t));class WE{constructor(s,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const o=Ar.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(s),this.owner=n.owner}setCurrent(s){this.current=s,this.updatedAt=Ar.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=QE(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,n){this.events[s]||(this.events[s]=new Ag);const i=this.events[s].add(n);return s==="change"?()=>{i(),As.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,n){this.passiveEffect=s,this.stopPassiveEffect=n}set(s){this.passiveEffect?this.passiveEffect(s,this.updateAndNotify):this.updateAndNotify(s)}setWithVelocity(s,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-i}jump(s,n=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(s){this.dependents||(this.dependents=new Set),this.dependents.add(s)}removeDependent(s){this.dependents&&this.dependents.delete(s)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=Ar.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>n1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,n1);return t5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(s){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=s(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _o(t,s){return new WE(t,s)}const{schedule:Ig}=u5(queueMicrotask,!1),la={x:!1,y:!1};function z5(){return la.x||la.y}function KE(t){return t==="x"||t==="y"?la[t]?null:(la[t]=!0,()=>{la[t]=!1}):la.x||la.y?null:(la.x=la.y=!0,()=>{la.x=la.y=!1})}function I5(t,s){const n=YE(t),i=new AbortController,o={passive:!0,...s,signal:i.signal};return[n,o,()=>i.abort()]}function i1(t){return!(t.pointerType==="touch"||z5())}function XE(t,s,n={}){const[i,o,c]=I5(t,n),d=m=>{if(!i1(m))return;const{target:h}=m,p=s(h,m);if(typeof p!="function"||!h)return;const u=f=>{i1(f)&&(p(f),h.removeEventListener("pointerleave",u))};h.addEventListener("pointerleave",u,o)};return i.forEach(m=>{m.addEventListener("pointerenter",d,o)}),c}const L5=(t,s)=>s?t===s?!0:L5(t,s.parentElement):!1,Lg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ZE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ek(t){return ZE.has(t.tagName)||t.tabIndex!==-1}const Uu=new WeakSet;function o1(t){return s=>{s.key==="Enter"&&t(s)}}function Ip(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const tk=(t,s)=>{const n=t.currentTarget;if(!n)return;const i=o1(()=>{if(Uu.has(n))return;Ip(n,"down");const o=o1(()=>{Ip(n,"up")}),c=()=>Ip(n,"cancel");n.addEventListener("keyup",o,s),n.addEventListener("blur",c,s)});n.addEventListener("keydown",i,s),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),s)};function l1(t){return Lg(t)&&!z5()}function sk(t,s,n={}){const[i,o,c]=I5(t,n),d=m=>{const h=m.currentTarget;if(!l1(m))return;Uu.add(h);const p=s(h,m),u=(y,b)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),Uu.has(h)&&Uu.delete(h),l1(y)&&typeof p=="function"&&p(y,{success:b})},f=y=>{u(y,h===window||h===document||n.useGlobalTarget||L5(h,y.target))},g=y=>{u(y,!1)};window.addEventListener("pointerup",f,o),window.addEventListener("pointercancel",g,o)};return i.forEach(m=>{(n.useGlobalTarget?window:m).addEventListener("pointerdown",d,o),R5(m)&&(m.addEventListener("focus",p=>tk(p,o)),!ek(m)&&!m.hasAttribute("tabindex")&&(m.tabIndex=0))}),c}function q5(t){return ZA(t)&&"ownerSVGElement"in t}function rk(t){return q5(t)&&t.tagName==="svg"}const dr=t=>!!(t&&t.getVelocity),ak=[...P5,Hs,Tn],nk=t=>ak.find(F5(t)),qg=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function c1(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function ik(...t){return s=>{let n=!1;const i=t.map(o=>{const c=c1(o,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let o=0;o<i.length;o++){const c=i[o];typeof c=="function"?c():c1(t[o],null)}}}}function ok(...t){return C.useCallback(ik(...t),t)}class lk extends C.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const i=n.offsetParent,o=R5(i)&&i.offsetWidth||0,c=this.props.sizeRef.current;c.height=n.offsetHeight||0,c.width=n.offsetWidth||0,c.top=n.offsetTop,c.left=n.offsetLeft,c.right=o-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ck({children:t,isPresent:s,anchorX:n,root:i}){const o=C.useId(),c=C.useRef(null),d=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:m}=C.useContext(qg),h=ok(c,t?.ref);return C.useInsertionEffect(()=>{const{width:p,height:u,top:f,left:g,right:y}=d.current;if(s||!c.current||!p||!u)return;const b=n==="left"?`left: ${g}`:`right: ${y}`;c.current.dataset.motionPopId=o;const j=document.createElement("style");m&&(j.nonce=m);const N=i??document.head;return N.appendChild(j),j.sheet&&j.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${u}px !important;
            ${b}px !important;
            top: ${f}px !important;
          }
        `),()=>{N.contains(j)&&N.removeChild(j)}},[s]),e.jsx(lk,{isPresent:s,childRef:c,sizeRef:d,children:C.cloneElement(t,{ref:h})})}const dk=({children:t,initial:s,isPresent:n,onExitComplete:i,custom:o,presenceAffectsLayout:c,mode:d,anchorX:m,root:h})=>{const p=bg(xk),u=C.useId();let f=!0,g=C.useMemo(()=>(f=!1,{id:u,initial:s,isPresent:n,custom:o,onExitComplete:y=>{p.set(y,!0);for(const b of p.values())if(!b)return;i&&i()},register:y=>(p.set(y,!1),()=>p.delete(y))}),[n,p,i]);return c&&f&&(g={...g}),C.useMemo(()=>{p.forEach((y,b)=>p.set(b,!1))},[n]),C.useEffect(()=>{!n&&!p.size&&i&&i()},[n]),d==="popLayout"&&(t=e.jsx(ck,{isPresent:n,anchorX:m,root:h,children:t})),e.jsx(hm.Provider,{value:g,children:t})};function xk(){return new Map}function $5(t=!0){const s=C.useContext(hm);if(s===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=s,c=C.useId();C.useEffect(()=>{if(t)return o(c)},[t]);const d=C.useCallback(()=>t&&i&&i(c),[c,i,t]);return!n&&i?[!1,d]:[!0]}const wu=t=>t.key||"";function d1(t){const s=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&s.push(n)}),s}const Vu=({children:t,custom:s,initial:n=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:c="sync",propagate:d=!1,anchorX:m="left",root:h})=>{const[p,u]=$5(d),f=C.useMemo(()=>d1(t),[t]),g=d&&!p?[]:f.map(wu),y=C.useRef(!0),b=C.useRef(f),j=bg(()=>new Map),[N,w]=C.useState(f),[B,S]=C.useState(f);KA(()=>{y.current=!1,b.current=f;for(let E=0;E<B.length;E++){const D=wu(B[E]);g.includes(D)?j.delete(D):j.get(D)!==!0&&j.set(D,!1)}},[B,g.length,g.join("-")]);const _=[];if(f!==N){let E=[...f];for(let D=0;D<B.length;D++){const F=B[D],M=wu(F);g.includes(M)||(E.splice(D,0,F),_.push(F))}return c==="wait"&&_.length&&(E=_),S(d1(E)),w(f),null}const{forceRender:k}=C.useContext(gg);return e.jsx(e.Fragment,{children:B.map(E=>{const D=wu(E),F=d&&!p?!1:f===B||g.includes(D),M=()=>{if(j.has(D))j.set(D,!0);else return;let P=!0;j.forEach(T=>{T||(P=!1)}),P&&(k?.(),S(b.current),d&&u?.(),i&&i())};return e.jsx(dk,{isPresent:F,initial:!y.current||n?void 0:!1,custom:s,presenceAffectsLayout:o,mode:c,root:h,onExitComplete:F?void 0:M,anchorX:m,children:E},D)})})},U5=C.createContext({strict:!1}),x1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const t in x1)Bo[t]={isEnabled:s=>x1[t].some(n=>!!s[n])};function uk(t){for(const s in t)Bo[s]={...Bo[s],...t[s]}}const mk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||mk.has(t)}let V5=t=>!sm(t);function hk(t){typeof t=="function"&&(V5=s=>s.startsWith("on")?!sm(s):t(s))}try{hk(require("@emotion/is-prop-valid").default)}catch{}function pk(t,s,n){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(V5(o)||n===!0&&sm(o)||!s&&!sm(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}const pm=C.createContext({});function fm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Zx(t){return typeof t=="string"||Array.isArray(t)}const $g=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ug=["initial",...$g];function gm(t){return fm(t.animate)||Ug.some(s=>Zx(t[s]))}function H5(t){return!!(gm(t)||t.variants)}function fk(t,s){if(gm(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Zx(n)?n:void 0,animate:Zx(i)?i:void 0}}return t.inherit!==!1?s:{}}function gk(t){const{initial:s,animate:n}=fk(t,C.useContext(pm));return C.useMemo(()=>({initial:s,animate:n}),[u1(s),u1(n)])}function u1(t){return Array.isArray(t)?t.join(" "):t}const e0={};function bk(t){for(const s in t)e0[s]=t[s],kg(s)&&(e0[s].isCSSVariable=!0)}function J5(t,{layout:s,layoutId:n}){return Mo.has(t)||t.startsWith("origin")||(s||n!==void 0)&&(!!e0[t]||t==="opacity")}const vk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yk=Oo.length;function jk(t,s,n){let i="",o=!0;for(let c=0;c<yk;c++){const d=Oo[c],m=t[d];if(m===void 0)continue;let h=!0;if(typeof m=="number"?h=m===(d.startsWith("scale")?1:0):h=parseFloat(m)===0,!h||n){const p=M5(m,zg[d]);if(!h){o=!1;const u=vk[d]||d;i+=`${u}(${p}) `}n&&(s[d]=p)}}return i=i.trim(),n?i=n(s,o?"":i):o&&(i="none"),i}function Vg(t,s,n){const{style:i,vars:o,transformOrigin:c}=t;let d=!1,m=!1;for(const h in s){const p=s[h];if(Mo.has(h)){d=!0;continue}else if(kg(h)){o[h]=p;continue}else{const u=M5(p,zg[h]);h.startsWith("origin")?(m=!0,c[h]=u):i[h]=u}}if(s.transform||(d||n?i.transform=jk(s,t.transform,n):i.transform&&(i.transform="none")),m){const{originX:h="50%",originY:p="50%",originZ:u=0}=c;i.transformOrigin=`${h} ${p} ${u}`}}const Hg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function G5(t,s,n){for(const i in s)!dr(s[i])&&!J5(i,n)&&(t[i]=s[i])}function Nk({transformTemplate:t},s){return C.useMemo(()=>{const n=Hg();return Vg(n,s,t),Object.assign({},n.vars,n.style)},[s])}function wk(t,s){const n=t.style||{},i={};return G5(i,n,t),Object.assign(i,Nk(t,s)),i}function Ak(t,s){const n={},i=wk(t,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const Ck={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ek={offset:"strokeDashoffset",array:"strokeDasharray"};function kk(t,s,n=1,i=0,o=!0){t.pathLength=1;const c=o?Ck:Ek;t[c.offset]=Ct.transform(-i);const d=Ct.transform(s),m=Ct.transform(n);t[c.array]=`${d} ${m}`}function Y5(t,{attrX:s,attrY:n,attrScale:i,pathLength:o,pathSpacing:c=1,pathOffset:d=0,...m},h,p,u){if(Vg(t,m,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g}=t;f.transform&&(g.transform=f.transform,delete f.transform),(g.transform||f.transformOrigin)&&(g.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),g.transform&&(g.transformBox=u?.transformBox??"fill-box",delete f.transformBox),s!==void 0&&(f.x=s),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),o!==void 0&&kk(f,o,c,d,!1)}const Q5=()=>({...Hg(),attrs:{}}),W5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _k(t,s,n,i){const o=C.useMemo(()=>{const c=Q5();return Y5(c,s,W5(i),t.transformTemplate,t.style),{...c.attrs,style:{...c.style}}},[s]);if(t.style){const c={};G5(c,t.style,t),o.style={...c,...o.style}}return o}const Bk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jg(t){return typeof t!="string"||t.includes("-")?!1:!!(Bk.indexOf(t)>-1||/[A-Z]/u.test(t))}function Sk(t,s,n,{latestValues:i},o,c=!1){const m=(Jg(t)?_k:Ak)(s,i,o,t),h=pk(s,typeof t=="string",c),p=t!==C.Fragment?{...h,...m,ref:n}:{},{children:u}=s,f=C.useMemo(()=>dr(u)?u.get():u,[u]);return C.createElement(t,{...p,children:f})}function m1(t){const s=[{},{}];return t?.values.forEach((n,i)=>{s[0][i]=n.get(),s[1][i]=n.getVelocity()}),s}function Gg(t,s,n,i){if(typeof s=="function"){const[o,c]=m1(i);s=s(n!==void 0?n:t.custom,o,c)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[o,c]=m1(i);s=s(n!==void 0?n:t.custom,o,c)}return s}function Hu(t){return dr(t)?t.get():t}function Dk({scrapeMotionValuesFromProps:t,createRenderState:s},n,i,o){return{latestValues:Fk(n,i,o,t),renderState:s()}}function Fk(t,s,n,i){const o={},c=i(t,{});for(const g in c)o[g]=Hu(c[g]);let{initial:d,animate:m}=t;const h=gm(t),p=H5(t);s&&p&&!h&&t.inherit!==!1&&(d===void 0&&(d=s.initial),m===void 0&&(m=s.animate));let u=n?n.initial===!1:!1;u=u||d===!1;const f=u?m:d;if(f&&typeof f!="boolean"&&!fm(f)){const g=Array.isArray(f)?f:[f];for(let y=0;y<g.length;y++){const b=Gg(t,g[y]);if(b){const{transitionEnd:j,transition:N,...w}=b;for(const B in w){let S=w[B];if(Array.isArray(S)){const _=u?S.length-1:0;S=S[_]}S!==null&&(o[B]=S)}for(const B in j)o[B]=j[B]}}}return o}const K5=t=>(s,n)=>{const i=C.useContext(pm),o=C.useContext(hm),c=()=>Dk(t,s,i,o);return n?c():bg(c)};function Yg(t,s,n){const{style:i}=t,o={};for(const c in i)(dr(i[c])||s.style&&dr(s.style[c])||J5(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(o[c]=i[c]);return o}const Pk=K5({scrapeMotionValuesFromProps:Yg,createRenderState:Hg});function X5(t,s,n){const i=Yg(t,s,n);for(const o in t)if(dr(t[o])||dr(s[o])){const c=Oo.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[c]=t[o]}return i}const Tk=K5({scrapeMotionValuesFromProps:X5,createRenderState:Q5}),Ok=Symbol.for("motionComponentSymbol");function yo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Mk(t,s,n){return C.useCallback(i=>{i&&t.onMount&&t.onMount(i),s&&(i?s.mount(i):s.unmount()),n&&(typeof n=="function"?n(i):yo(n)&&(n.current=i))},[s])}const Qg=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Rk="framerAppearId",Z5="data-"+Qg(Rk),e3=C.createContext({});function zk(t,s,n,i,o){const{visualElement:c}=C.useContext(pm),d=C.useContext(U5),m=C.useContext(hm),h=C.useContext(qg).reducedMotion,p=C.useRef(null);i=i||d.renderer,!p.current&&i&&(p.current=i(t,{visualState:s,parent:c,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:h}));const u=p.current,f=C.useContext(e3);u&&!u.projection&&o&&(u.type==="html"||u.type==="svg")&&Ik(p.current,n,o,f);const g=C.useRef(!1);C.useInsertionEffect(()=>{u&&g.current&&u.update(n,m)});const y=n[Z5],b=C.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return KA(()=>{u&&(g.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),b.current&&u.animationState&&u.animationState.animateChanges())}),C.useEffect(()=>{u&&(!b.current&&u.animationState&&u.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),b.current=!1),u.enteringChildren=void 0)}),u}function Ik(t,s,n,i){const{layoutId:o,layout:c,drag:d,dragConstraints:m,layoutScroll:h,layoutRoot:p,layoutCrossfade:u}=s;t.projection=new n(t.latestValues,s["data-framer-portal-id"]?void 0:t3(t.parent)),t.projection.setOptions({layoutId:o,layout:c,alwaysMeasureLayout:!!d||m&&yo(m),visualElement:t,animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:h,layoutRoot:p})}function t3(t){if(t)return t.options.allowProjection!==!1?t.projection:t3(t.parent)}function Lp(t,{forwardMotionProps:s=!1}={},n,i){n&&uk(n);const o=Jg(t)?Tk:Pk;function c(m,h){let p;const u={...C.useContext(qg),...m,layoutId:Lk(m)},{isStatic:f}=u,g=gk(m),y=o(m,f);if(!f&&vg){qk();const b=$k(u);p=b.MeasureLayout,g.visualElement=zk(t,y,u,i,b.ProjectionNode)}return e.jsxs(pm.Provider,{value:g,children:[p&&g.visualElement?e.jsx(p,{visualElement:g.visualElement,...u}):null,Sk(t,m,Mk(y,g.visualElement,h),y,f,s)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const d=C.forwardRef(c);return d[Ok]=t,d}function Lk({layoutId:t}){const s=C.useContext(gg).id;return s&&t!==void 0?s+"-"+t:t}function qk(t,s){C.useContext(U5).strict}function $k(t){const{drag:s,layout:n}=Bo;if(!s&&!n)return{};const i={...s,...n};return{MeasureLayout:s?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Uk(t,s){if(typeof Proxy>"u")return Lp;const n=new Map,i=(c,d)=>Lp(c,d,t,s),o=(c,d)=>i(c,d);return new Proxy(o,{get:(c,d)=>d==="create"?i:(n.has(d)||n.set(d,Lp(d,void 0,t,s)),n.get(d))})}function s3({top:t,left:s,right:n,bottom:i}){return{x:{min:s,max:n},y:{min:t,max:i}}}function Vk({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function Hk(t,s){if(!s)return t;const n=s({x:t.left,y:t.top}),i=s({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function qp(t){return t===void 0||t===1}function Zf({scale:t,scaleX:s,scaleY:n}){return!qp(t)||!qp(s)||!qp(n)}function ui(t){return Zf(t)||r3(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function r3(t){return h1(t.x)||h1(t.y)}function h1(t){return t&&t!=="0%"}function rm(t,s,n){const i=t-n,o=s*i;return n+o}function p1(t,s,n,i,o){return o!==void 0&&(t=rm(t,o,i)),rm(t,n,i)+s}function eg(t,s=0,n=1,i,o){t.min=p1(t.min,s,n,i,o),t.max=p1(t.max,s,n,i,o)}function a3(t,{x:s,y:n}){eg(t.x,s.translate,s.scale,s.originPoint),eg(t.y,n.translate,n.scale,n.originPoint)}const f1=.999999999999,g1=1.0000000000001;function Jk(t,s,n,i=!1){const o=n.length;if(!o)return;s.x=s.y=1;let c,d;for(let m=0;m<o;m++){c=n[m],d=c.projectionDelta;const{visualElement:h}=c.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&c.options.layoutScroll&&c.scroll&&c!==c.root&&No(t,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),d&&(s.x*=d.x.scale,s.y*=d.y.scale,a3(t,d)),i&&ui(c.latestValues)&&No(t,c.latestValues))}s.x<g1&&s.x>f1&&(s.x=1),s.y<g1&&s.y>f1&&(s.y=1)}function jo(t,s){t.min=t.min+s,t.max=t.max+s}function b1(t,s,n,i,o=.5){const c=Bs(t.min,t.max,o);eg(t,s,n,c,i)}function No(t,s){b1(t.x,s.x,s.scaleX,s.scale,s.originX),b1(t.y,s.y,s.scaleY,s.scale,s.originY)}function n3(t,s){return s3(Hk(t.getBoundingClientRect(),s))}function Gk(t,s,n){const i=n3(t,n),{scroll:o}=s;return o&&(jo(i.x,o.offset.x),jo(i.y,o.offset.y)),i}const v1=()=>({translate:0,scale:1,origin:0,originPoint:0}),wo=()=>({x:v1(),y:v1()}),y1=()=>({min:0,max:0}),Rs=()=>({x:y1(),y:y1()}),tg={current:null},i3={current:!1};function Yk(){if(i3.current=!0,!!vg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>tg.current=t.matches;t.addEventListener("change",s),s()}else tg.current=!1}const Qk=new WeakMap;function Wk(t,s,n){for(const i in s){const o=s[i],c=n[i];if(dr(o))t.addValue(i,o);else if(dr(c))t.addValue(i,_o(o,{owner:t}));else if(c!==o)if(t.hasValue(i)){const d=t.getValue(i);d.liveStyle===!0?d.jump(o):d.hasAnimated||d.set(o)}else{const d=t.getStaticValue(i);t.addValue(i,_o(d!==void 0?d:o,{owner:t}))}}for(const i in n)s[i]===void 0&&t.removeValue(i);return s}const j1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Kk{scrapeMotionValuesFromProps(s,n,i){return{}}constructor({parent:s,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:c,visualState:d},m={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Mg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ar.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,As.render(this.render,!1,!0))};const{latestValues:h,renderState:p}=d;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=p,this.parent=s,this.props=n,this.presenceContext=i,this.depth=s?s.depth+1:0,this.reducedMotionConfig=o,this.options=m,this.blockInitialAnimation=!!c,this.isControllingVariants=gm(n),this.isVariantNode=H5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const y=f[g];h[g]!==void 0&&dr(y)&&y.set(h[g])}}mount(s){this.current=s,Qk.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),i3.current||Yk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tg.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Pn(this.notifyUpdate),Pn(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const n=this.features[s];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(s){this.children.add(s),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(s)}removeChild(s){this.children.delete(s),this.enteringChildren&&this.enteringChildren.delete(s)}bindToMotionValue(s,n){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const i=Mo.has(s);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",d=>{this.latestValues[s]=d,this.props.onUpdate&&As.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,s,n)),this.valueSubscriptions.set(s,()=>{o(),c&&c(),n.owner&&n.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in Bo){const n=Bo[s];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[s]&&o&&i(this.props)&&(this.features[s]=new o(this)),this.features[s]){const c=this.features[s];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rs()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,n){this.latestValues[s]=n}update(s,n){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<j1.length;i++){const o=j1[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const c="on"+o,d=s[c];d&&(this.propEventSubscriptions[o]=this.on(o,d))}this.prevMotionValues=Wk(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(s),()=>n.variantChildren.delete(s)}addValue(s,n){const i=this.values.get(s);n!==i&&(i&&this.removeValue(s),this.bindToMotionValue(s,n),this.values.set(s,n),this.latestValues[s]=n.get())}removeValue(s){this.values.delete(s);const n=this.valueSubscriptions.get(s);n&&(n(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,n){if(this.props.values&&this.props.values[s])return this.props.values[s];let i=this.values.get(s);return i===void 0&&n!==void 0&&(i=_o(n===null?void 0:n,{owner:this}),this.addValue(s,i)),i}readValue(s,n){let i=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:this.getBaseTargetFromProps(this.props,s)??this.readValueFromInstance(this.current,s,this.options);return i!=null&&(typeof i=="string"&&(XA(i)||e5(i))?i=parseFloat(i):!nk(i)&&Tn.test(n)&&(i=O5(s,n)),this.setBaseTarget(s,dr(i)?i.get():i)),dr(i)?i.get():i}setBaseTarget(s,n){this.baseTarget[s]=n}getBaseTarget(s){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const c=Gg(this.props,n,this.presenceContext?.custom);c&&(i=c[s])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,s);return o!==void 0&&!dr(o)?o:this.initialValues[s]!==void 0&&i===void 0?void 0:this.baseTarget[s]}on(s,n){return this.events[s]||(this.events[s]=new Ag),this.events[s].add(n)}notify(s,...n){this.events[s]&&this.events[s].notify(...n)}scheduleRenderMicrotask(){Ig.render(this.render)}}class o3 extends Kk{constructor(){super(...arguments),this.KeyframeResolver=GE}sortInstanceNodePosition(s,n){return s.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(s,n){return s.style?s.style[n]:void 0}removeValueFromRenderState(s,{vars:n,style:i}){delete n[s],delete i[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;dr(s)&&(this.childSubscription=s.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function l3(t,{style:s,vars:n},i,o){const c=t.style;let d;for(d in s)c[d]=s[d];o?.applyProjectionStyles(c,i);for(d in n)c.setProperty(d,n[d])}function Xk(t){return window.getComputedStyle(t)}class Zk extends o3{constructor(){super(...arguments),this.type="html",this.renderInstance=l3}readValueFromInstance(s,n){if(Mo.has(n))return this.projection?.isProjecting?Jf(n):uE(s,n);{const i=Xk(s),o=(kg(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(s,{transformPagePoint:n}){return n3(s,n)}build(s,n,i){Vg(s,n,i.transformTemplate)}scrapeMotionValuesFromProps(s,n,i){return Yg(s,n,i)}}const c3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function e_(t,s,n,i){l3(t,s,void 0,i);for(const o in s.attrs)t.setAttribute(c3.has(o)?o:Qg(o),s.attrs[o])}class t_ extends o3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rs}getBaseTargetFromProps(s,n){return s[n]}readValueFromInstance(s,n){if(Mo.has(n)){const i=T5(n);return i&&i.default||0}return n=c3.has(n)?n:Qg(n),s.getAttribute(n)}scrapeMotionValuesFromProps(s,n,i){return X5(s,n,i)}build(s,n,i){Y5(s,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(s,n,i,o){e_(s,n,i,o)}mount(s){this.isSVGTag=W5(s.tagName),super.mount(s)}}const s_=(t,s)=>Jg(t)?new t_(s):new Zk(s,{allowProjection:t!==C.Fragment});function Co(t,s,n){const i=t.getProps();return Gg(i,s,n!==void 0?n:i.custom,t)}const sg=t=>Array.isArray(t);function r_(t,s,n){t.hasValue(s)?t.getValue(s).set(n):t.addValue(s,_o(n))}function a_(t){return sg(t)?t[t.length-1]||0:t}function n_(t,s){const n=Co(t,s);let{transitionEnd:i={},transition:o={},...c}=n||{};c={...c,...i};for(const d in c){const m=a_(c[d]);r_(t,d,m)}}function i_(t){return!!(dr(t)&&t.add)}function rg(t,s){const n=t.getValue("willChange");if(i_(n))return n.add(s);if(!n&&Ya.WillChange){const i=new Ya.WillChange("auto");t.addValue("willChange",i),i.add(s)}}function d3(t){return t.props[Z5]}const o_=t=>t!==null;function l_(t,{repeat:s,repeatType:n="loop"},i){const o=t.filter(o_),c=s&&n!=="loop"&&s%2===1?0:o.length-1;return o[c]}const c_={type:"spring",stiffness:500,damping:25,restSpeed:10},d_=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),x_={type:"keyframes",duration:.8},u_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},m_=(t,{keyframes:s})=>s.length>2?x_:Mo.has(t)?t.startsWith("scale")?d_(s[1]):c_:u_;function h_({when:t,delay:s,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:c,repeatType:d,repeatDelay:m,from:h,elapsed:p,...u}){return!!Object.keys(u).length}const Wg=(t,s,n,i={},o,c)=>d=>{const m=Rg(i,t)||{},h=m.delay||i.delay||0;let{elapsed:p=0}=i;p=p-Na(h);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:s.getVelocity(),...m,delay:-p,onUpdate:g=>{s.set(g),m.onUpdate&&m.onUpdate(g)},onComplete:()=>{d(),m.onComplete&&m.onComplete()},name:t,motionValue:s,element:c?void 0:o};h_(m)||Object.assign(u,m_(t,u)),u.duration&&(u.duration=Na(u.duration)),u.repeatDelay&&(u.repeatDelay=Na(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Kf(u),u.delay===0&&(f=!0)),(Ya.instantAnimations||Ya.skipAnimations)&&(f=!0,Kf(u),u.delay=0),u.allowFlatten=!m.type&&!m.ease,f&&!c&&s.get()!==void 0){const g=l_(u.keyframes,m);if(g!==void 0){As.update(()=>{u.onUpdate(g),u.onComplete()});return}}return m.isSync?new Og(u):new OE(u)};function p_({protectedKeys:t,needsAnimating:s},n){const i=t.hasOwnProperty(n)&&s[n]!==!0;return s[n]=!1,i}function x3(t,s,{delay:n=0,transitionOverride:i,type:o}={}){let{transition:c=t.getDefaultTransition(),transitionEnd:d,...m}=s;i&&(c=i);const h=[],p=o&&t.animationState&&t.animationState.getState()[o];for(const u in m){const f=t.getValue(u,t.latestValues[u]??null),g=m[u];if(g===void 0||p&&p_(p,u))continue;const y={delay:n,...Rg(c||{},u)},b=f.get();if(b!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===b&&!y.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const w=d3(t);if(w){const B=window.MotionHandoffAnimation(w,u,As);B!==null&&(y.startTime=B,j=!0)}}rg(t,u),f.start(Wg(u,f,g,t.shouldReduceMotion&&D5.has(u)?{type:!1}:y,t,j));const N=f.animation;N&&h.push(N)}return d&&Promise.all(h).then(()=>{As.update(()=>{d&&n_(t,d)})}),h}function u3(t,s,n,i=0,o=1){const c=Array.from(t).sort((p,u)=>p.sortNodePosition(u)).indexOf(s),d=t.size,m=(d-1)*i;return typeof n=="function"?n(c,d):o===1?c*i:m-c*i}function ag(t,s,n={}){const i=Co(t,s,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const c=i?()=>Promise.all(x3(t,i,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:u,staggerDirection:f}=o;return f_(t,s,h,p,u,f,n)}:()=>Promise.resolve(),{when:m}=o;if(m){const[h,p]=m==="beforeChildren"?[c,d]:[d,c];return h().then(()=>p())}else return Promise.all([c(),d(n.delay)])}function f_(t,s,n=0,i=0,o=0,c=1,d){const m=[];for(const h of t.variantChildren)h.notify("AnimationStart",s),m.push(ag(h,s,{...d,delay:n+(typeof i=="function"?0:i)+u3(t.variantChildren,h,i,o,c)}).then(()=>h.notify("AnimationComplete",s)));return Promise.all(m)}function g_(t,s,n={}){t.notify("AnimationStart",s);let i;if(Array.isArray(s)){const o=s.map(c=>ag(t,c,n));i=Promise.all(o)}else if(typeof s=="string")i=ag(t,s,n);else{const o=typeof s=="function"?Co(t,s,n.custom):s;i=Promise.all(x3(t,o,n))}return i.then(()=>{t.notify("AnimationComplete",s)})}function m3(t,s){if(!Array.isArray(s))return!1;const n=s.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(s[i]!==t[i])return!1;return!0}const b_=Ug.length;function h3(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?h3(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const s={};for(let n=0;n<b_;n++){const i=Ug[n],o=t.props[i];(Zx(o)||o===!1)&&(s[i]=o)}return s}const v_=[...$g].reverse(),y_=$g.length;function j_(t){return s=>Promise.all(s.map(({animation:n,options:i})=>g_(t,n,i)))}function N_(t){let s=j_(t),n=N1(),i=!0;const o=h=>(p,u)=>{const f=Co(t,u,h==="exit"?t.presenceContext?.custom:void 0);if(f){const{transition:g,transitionEnd:y,...b}=f;p={...p,...b,...y}}return p};function c(h){s=h(t)}function d(h){const{props:p}=t,u=h3(t.parent)||{},f=[],g=new Set;let y={},b=1/0;for(let N=0;N<y_;N++){const w=v_[N],B=n[w],S=p[w]!==void 0?p[w]:u[w],_=Zx(S),k=w===h?B.isActive:null;k===!1&&(b=N);let E=S===u[w]&&S!==p[w]&&_;if(E&&i&&t.manuallyAnimateOnMount&&(E=!1),B.protectedKeys={...y},!B.isActive&&k===null||!S&&!B.prevProp||fm(S)||typeof S=="boolean")continue;const D=w_(B.prevProp,S);let F=D||w===h&&B.isActive&&!E&&_||N>b&&_,M=!1;const P=Array.isArray(S)?S:[S];let T=P.reduce(o(w),{});k===!1&&(T={});const{prevResolvedValues:L={}}=B,X={...L,...T},Z=O=>{F=!0,g.has(O)&&(M=!0,g.delete(O)),B.needsAnimating[O]=!0;const G=t.getValue(O);G&&(G.liveStyle=!1)};for(const O in X){const G=T[O],te=L[O];if(y.hasOwnProperty(O))continue;let Q=!1;sg(G)&&sg(te)?Q=!m3(G,te):Q=G!==te,Q?G!=null?Z(O):g.add(O):G!==void 0&&g.has(O)?Z(O):B.protectedKeys[O]=!0}B.prevProp=S,B.prevResolvedValues=T,B.isActive&&(y={...y,...T}),i&&t.blockInitialAnimation&&(F=!1);const ne=E&&D;F&&(!ne||M)&&f.push(...P.map(O=>{const G={type:w};if(typeof O=="string"&&i&&!ne&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,Q=Co(te,O);if(te.enteringChildren&&Q){const{delayChildren:ee}=Q.transition||{};G.delay=u3(te.enteringChildren,t,ee)}}return{animation:O,options:G}}))}if(g.size){const N={};if(typeof p.initial!="boolean"){const w=Co(t,Array.isArray(p.initial)?p.initial[0]:p.initial);w&&w.transition&&(N.transition=w.transition)}g.forEach(w=>{const B=t.getBaseTarget(w),S=t.getValue(w);S&&(S.liveStyle=!0),N[w]=B??null}),f.push({animation:N})}let j=!!f.length;return i&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(j=!1),i=!1,j?s(f):Promise.resolve()}function m(h,p){if(n[h].isActive===p)return Promise.resolve();t.variantChildren?.forEach(f=>f.animationState?.setActive(h,p)),n[h].isActive=p;const u=d(h);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:d,setActive:m,setAnimateFunction:c,getState:()=>n,reset:()=>{n=N1(),i=!0}}}function w_(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!m3(s,t):!1}function li(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function N1(){return{animate:li(!0),whileInView:li(),whileHover:li(),whileTap:li(),whileDrag:li(),whileFocus:li(),exit:li()}}class zn{constructor(s){this.isMounted=!1,this.node=s}update(){}}class A_ extends zn{constructor(s){super(s),s.animationState||(s.animationState=N_(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();fm(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:n}=this.node.prevProps||{};s!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let C_=0;class E_ extends zn{constructor(){super(...arguments),this.id=C_++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===i)return;const o=this.node.animationState.setActive("exit",!s);n&&!s&&o.then(()=>{n(this.id)})}mount(){const{register:s,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),s&&(this.unmount=s(this.id))}unmount(){}}const k_={animation:{Feature:A_},exit:{Feature:E_}};function t0(t,s,n,i={passive:!0}){return t.addEventListener(s,n,i),()=>t.removeEventListener(s,n)}function l0(t){return{point:{x:t.pageX,y:t.pageY}}}const __=t=>s=>Lg(s)&&t(s,l0(s));function Jx(t,s,n,i){return t0(t,s,__(n),i)}const p3=1e-4,B_=1-p3,S_=1+p3,f3=.01,D_=0-f3,F_=0+f3;function pr(t){return t.max-t.min}function P_(t,s,n){return Math.abs(t-s)<=n}function w1(t,s,n,i=.5){t.origin=i,t.originPoint=Bs(s.min,s.max,t.origin),t.scale=pr(n)/pr(s),t.translate=Bs(n.min,n.max,t.origin)-t.originPoint,(t.scale>=B_&&t.scale<=S_||isNaN(t.scale))&&(t.scale=1),(t.translate>=D_&&t.translate<=F_||isNaN(t.translate))&&(t.translate=0)}function Gx(t,s,n,i){w1(t.x,s.x,n.x,i?i.originX:void 0),w1(t.y,s.y,n.y,i?i.originY:void 0)}function A1(t,s,n){t.min=n.min+s.min,t.max=t.min+pr(s)}function T_(t,s,n){A1(t.x,s.x,n.x),A1(t.y,s.y,n.y)}function C1(t,s,n){t.min=s.min-n.min,t.max=t.min+pr(s)}function Yx(t,s,n){C1(t.x,s.x,n.x),C1(t.y,s.y,n.y)}function Wr(t){return[t("x"),t("y")]}const g3=({current:t})=>t?t.ownerDocument.defaultView:null,E1=(t,s)=>Math.abs(t-s);function O_(t,s){const n=E1(t.x,s.x),i=E1(t.y,s.y);return Math.sqrt(n**2+i**2)}class b3{constructor(s,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:c=!1,distanceThreshold:d=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Up(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,b=O_(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!b)return;const{point:j}=g,{timestamp:N}=or;this.history.push({...j,timestamp:N});const{onStart:w,onMove:B}=this.handlers;y||(w&&w(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=$p(y,this.transformPagePoint),As.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:b,onSessionEnd:j,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Up(g.type==="pointercancel"?this.lastMoveEventInfo:$p(y,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,w),j&&j(g,w)},!Lg(s))return;this.dragSnapToOrigin=c,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=d,this.contextWindow=o||window;const m=l0(s),h=$p(m,this.transformPagePoint),{point:p}=h,{timestamp:u}=or;this.history=[{...p,timestamp:u}];const{onSessionStart:f}=n;f&&f(s,Up(h,this.history)),this.removeListeners=n0(Jx(this.contextWindow,"pointermove",this.handlePointerMove),Jx(this.contextWindow,"pointerup",this.handlePointerUp),Jx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Pn(this.updatePoint)}}function $p(t,s){return s?{point:s(t.point)}:t}function k1(t,s){return{x:t.x-s.x,y:t.y-s.y}}function Up({point:t},s){return{point:t,delta:k1(t,v3(s)),offset:k1(t,M_(s)),velocity:R_(s,.1)}}function M_(t){return t[0]}function v3(t){return t[t.length-1]}function R_(t,s){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const o=v3(t);for(;n>=0&&(i=t[n],!(o.timestamp-i.timestamp>Na(s)));)n--;if(!i)return{x:0,y:0};const c=Zr(o.timestamp-i.timestamp);if(c===0)return{x:0,y:0};const d={x:(o.x-i.x)/c,y:(o.y-i.y)/c};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function z_(t,{min:s,max:n},i){return s!==void 0&&t<s?t=i?Bs(s,t,i.min):Math.max(t,s):n!==void 0&&t>n&&(t=i?Bs(n,t,i.max):Math.min(t,n)),t}function _1(t,s,n){return{min:s!==void 0?t.min+s:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function I_(t,{top:s,left:n,bottom:i,right:o}){return{x:_1(t.x,n,o),y:_1(t.y,s,i)}}function B1(t,s){let n=s.min-t.min,i=s.max-t.max;return s.max-s.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function L_(t,s){return{x:B1(t.x,s.x),y:B1(t.y,s.y)}}function q_(t,s){let n=.5;const i=pr(t),o=pr(s);return o>i?n=Wx(s.min,s.max-i,t.min):i>o&&(n=Wx(t.min,t.max-o,s.min)),Ga(0,1,n)}function $_(t,s){const n={};return s.min!==void 0&&(n.min=s.min-t.min),s.max!==void 0&&(n.max=s.max-t.min),n}const ng=.35;function U_(t=ng){return t===!1?t=0:t===!0&&(t=ng),{x:S1(t,"left","right"),y:S1(t,"top","bottom")}}function S1(t,s,n){return{min:D1(t,s),max:D1(t,n)}}function D1(t,s){return typeof t=="number"?t:t[s]||0}const V_=new WeakMap;class H_{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=s}start(s,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const c=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(l0(f).point)},d=(f,g)=>{const{drag:y,dragPropagation:b,onDragStart:j}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KE(y),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wr(w=>{let B=this.getAxisMotionValue(w).get()||0;if(wa.test(B)){const{projection:S}=this.visualElement;if(S&&S.layout){const _=S.layout.layoutBox[w];_&&(B=pr(_)*(parseFloat(B)/100))}}this.originPoint[w]=B}),j&&As.postRender(()=>j(f,g)),rg(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},m=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:j,onDrag:N}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:w}=g;if(b&&this.currentDirection===null){this.currentDirection=J_(w),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",g.point,w),this.updateAxis("y",g.point,w),this.visualElement.render(),N&&N(f,g)},h=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g,this.stop(f,g),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>Wr(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new b3(s,{onSessionStart:c,onStart:d,onMove:m,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:g3(this.visualElement)})}stop(s,n){const i=s||this.latestPointerEvent,o=n||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!o||!i)return;const{velocity:d}=o;this.startAnimation(d);const{onDragEnd:m}=this.getProps();m&&As.postRender(()=>m(i,o))}cancel(){this.isDragging=!1;const{projection:s,animationState:n}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(s,n,i){const{drag:o}=this.getProps();if(!i||!Au(s,o,this.currentDirection))return;const c=this.getAxisMotionValue(s);let d=this.originPoint[s]+i[s];this.constraints&&this.constraints[s]&&(d=z_(d,this.constraints[s],this.elastic[s])),c.set(d)}resolveConstraints(){const{dragConstraints:s,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;s&&yo(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=I_(i.layoutBox,s):this.constraints=!1,this.elastic=U_(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Wr(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=$_(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:n}=this.getProps();if(!s||!yo(s))return!1;const i=s.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const c=Gk(i,o.root,this.visualElement.getTransformPagePoint());let d=L_(o.layout.layoutBox,c);if(n){const m=n(Vk(d));this.hasMutatedConstraints=!!m,m&&(d=s3(m))}return d}startAnimation(s){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:c,dragSnapToOrigin:d,onDragTransitionEnd:m}=this.getProps(),h=this.constraints||{},p=Wr(u=>{if(!Au(u,n,this.currentDirection))return;let f=h&&h[u]||{};d&&(f={min:0,max:0});const g=o?200:1e6,y=o?40:1e7,b={type:"inertia",velocity:i?s[u]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...c,...f};return this.startAxisValueAnimation(u,b)});return Promise.all(p).then(m)}startAxisValueAnimation(s,n){const i=this.getAxisMotionValue(s);return rg(this.visualElement,s),i.start(Wg(s,i,0,n,this.visualElement,!1))}stopAnimation(){Wr(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){Wr(s=>this.getAxisMotionValue(s).animation?.pause())}getAnimationState(s){return this.getAxisMotionValue(s).animation?.state}getAxisMotionValue(s){const n=`_drag${s.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(s,(i.initial?i.initial[s]:void 0)||0)}snapToCursor(s){Wr(n=>{const{drag:i}=this.getProps();if(!Au(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,c=this.getAxisMotionValue(n);if(o&&o.layout){const{min:d,max:m}=o.layout.layoutBox[n];c.set(s[n]-Bs(d,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!yo(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Wr(d=>{const m=this.getAxisMotionValue(d);if(m&&this.constraints!==!1){const h=m.get();o[d]=q_({min:h,max:h},this.constraints[d])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Wr(d=>{if(!Au(d,s,null))return;const m=this.getAxisMotionValue(d),{min:h,max:p}=this.constraints[d];m.set(Bs(h,p,o[d]))})}addListeners(){if(!this.visualElement.current)return;V_.set(this.visualElement,this);const s=this.visualElement.current,n=Jx(s,"pointerdown",h=>{const{drag:p,dragListener:u=!0}=this.getProps();p&&u&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();yo(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,c=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),As.read(i);const d=t0(window,"resize",()=>this.scalePositionWithinConstraints()),m=o.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p})=>{this.isDragging&&p&&(Wr(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=h[u].translate,f.set(f.get()+h[u].translate))}),this.visualElement.render())});return()=>{d(),n(),c(),m&&m()}}getProps(){const s=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:c=!1,dragElastic:d=ng,dragMomentum:m=!0}=s;return{...s,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:c,dragElastic:d,dragMomentum:m}}}function Au(t,s,n){return(s===!0||s===t)&&(n===null||n===t)}function J_(t,s=10){let n=null;return Math.abs(t.y)>s?n="y":Math.abs(t.x)>s&&(n="x"),n}class G_ extends zn{constructor(s){super(s),this.removeGroupControls=ta,this.removeListeners=ta,this.controls=new H_(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ta}unmount(){this.removeGroupControls(),this.removeListeners()}}const F1=t=>(s,n)=>{t&&As.postRender(()=>t(s,n))};class Y_ extends zn{constructor(){super(...arguments),this.removePointerDownListener=ta}onPointerDown(s){this.session=new b3(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:g3(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:F1(s),onStart:F1(n),onMove:i,onEnd:(c,d)=>{delete this.session,o&&As.postRender(()=>o(c,d))}}}mount(){this.removePointerDownListener=Jx(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ju={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function P1(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Ol={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(Ct.test(t))t=parseFloat(t);else return t;const n=P1(t,s.target.x),i=P1(t,s.target.y);return`${n}% ${i}%`}},Q_={correct:(t,{treeScale:s,projectionDelta:n})=>{const i=t,o=Tn.parse(t);if(o.length>5)return i;const c=Tn.createTransformer(t),d=typeof o[0]!="number"?1:0,m=n.x.scale*s.x,h=n.y.scale*s.y;o[0+d]/=m,o[1+d]/=h;const p=Bs(m,h,.5);return typeof o[2+d]=="number"&&(o[2+d]/=p),typeof o[3+d]=="number"&&(o[3+d]/=p),c(o)}};let Vp=!1;class W_ extends C.Component{componentDidMount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:c}=s;bk(K_),c&&(n.group&&n.group.add(c),i&&i.register&&o&&i.register(c),Vp&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),Ju.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:n,visualElement:i,drag:o,isPresent:c}=this.props,{projection:d}=i;return d&&(d.isPresent=c,Vp=!0,o||s.layoutDependency!==n||n===void 0||s.isPresent!==c?d.willUpdate():this.safeToRemove(),s.isPresent!==c&&(c?d.promote():d.relegate()||As.postRender(()=>{const m=d.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),Ig.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=s;Vp=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function y3(t){const[s,n]=$5(),i=C.useContext(gg);return e.jsx(W_,{...t,layoutGroup:i,switchLayoutGroup:C.useContext(e3),isPresent:s,safeToRemove:n})}const K_={borderRadius:{...Ol,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ol,borderTopRightRadius:Ol,borderBottomLeftRadius:Ol,borderBottomRightRadius:Ol,boxShadow:Q_};function X_(t,s,n){const i=dr(t)?t:_o(t);return i.start(Wg("",i,s,n)),i.animation}const Z_=(t,s)=>t.depth-s.depth;class eB{constructor(){this.children=[],this.isDirty=!1}add(s){yg(this.children,s),this.isDirty=!0}remove(s){jg(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(Z_),this.isDirty=!1,this.children.forEach(s)}}function tB(t,s){const n=Ar.now(),i=({timestamp:o})=>{const c=o-n;c>=s&&(Pn(i),t(c-s))};return As.setup(i,!0),()=>Pn(i)}const j3=["TopLeft","TopRight","BottomLeft","BottomRight"],sB=j3.length,T1=t=>typeof t=="string"?parseFloat(t):t,O1=t=>typeof t=="number"||Ct.test(t);function rB(t,s,n,i,o,c){o?(t.opacity=Bs(0,n.opacity??1,aB(i)),t.opacityExit=Bs(s.opacity??1,0,nB(i))):c&&(t.opacity=Bs(s.opacity??1,n.opacity??1,i));for(let d=0;d<sB;d++){const m=`border${j3[d]}Radius`;let h=M1(s,m),p=M1(n,m);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||O1(h)===O1(p)?(t[m]=Math.max(Bs(T1(h),T1(p),i),0),(wa.test(p)||wa.test(h))&&(t[m]+="%")):t[m]=p}(s.rotate||n.rotate)&&(t.rotate=Bs(s.rotate||0,n.rotate||0,i))}function M1(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const aB=N3(0,.5,l5),nB=N3(.5,.95,ta);function N3(t,s,n){return i=>i<t?0:i>s?1:n(Wx(t,s,i))}function R1(t,s){t.min=s.min,t.max=s.max}function Qr(t,s){R1(t.x,s.x),R1(t.y,s.y)}function z1(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function I1(t,s,n,i,o){return t-=s,t=rm(t,1/n,i),o!==void 0&&(t=rm(t,1/o,i)),t}function iB(t,s=0,n=1,i=.5,o,c=t,d=t){if(wa.test(s)&&(s=parseFloat(s),s=Bs(d.min,d.max,s/100)-d.min),typeof s!="number")return;let m=Bs(c.min,c.max,i);t===c&&(m-=s),t.min=I1(t.min,s,n,m,o),t.max=I1(t.max,s,n,m,o)}function L1(t,s,[n,i,o],c,d){iB(t,s[n],s[i],s[o],s.scale,c,d)}const oB=["x","scaleX","originX"],lB=["y","scaleY","originY"];function q1(t,s,n,i){L1(t.x,s,oB,n?n.x:void 0,i?i.x:void 0),L1(t.y,s,lB,n?n.y:void 0,i?i.y:void 0)}function $1(t){return t.translate===0&&t.scale===1}function w3(t){return $1(t.x)&&$1(t.y)}function U1(t,s){return t.min===s.min&&t.max===s.max}function cB(t,s){return U1(t.x,s.x)&&U1(t.y,s.y)}function V1(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function A3(t,s){return V1(t.x,s.x)&&V1(t.y,s.y)}function H1(t){return pr(t.x)/pr(t.y)}function J1(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class dB{constructor(){this.members=[]}add(s){yg(this.members,s),s.scheduleRender()}remove(s){if(jg(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(s){const n=this.members.findIndex(o=>s===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const c=this.members[o];if(c.isPresent!==!1){i=c;break}}return i?(this.promote(i),!0):!1}promote(s,n){const i=this.lead;if(s!==i&&(this.prevLead=i,this.lead=s,s.show(),i)){i.instance&&i.scheduleRender(),s.scheduleRender(),s.resumeFrom=i,n&&(s.resumeFrom.preserveOpacity=!0),i.snapshot&&(s.snapshot=i.snapshot,s.snapshot.latestValues=i.animationValues||i.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:o}=s.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:n,resumingFrom:i}=s;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xB(t,s,n){let i="";const o=t.x.translate/s.x,c=t.y.translate/s.y,d=n?.z||0;if((o||c||d)&&(i=`translate3d(${o}px, ${c}px, ${d}px) `),(s.x!==1||s.y!==1)&&(i+=`scale(${1/s.x}, ${1/s.y}) `),n){const{transformPerspective:p,rotate:u,rotateX:f,rotateY:g,skewX:y,skewY:b}=n;p&&(i=`perspective(${p}px) ${i}`),u&&(i+=`rotate(${u}deg) `),f&&(i+=`rotateX(${f}deg) `),g&&(i+=`rotateY(${g}deg) `),y&&(i+=`skewX(${y}deg) `),b&&(i+=`skewY(${b}deg) `)}const m=t.x.scale*s.x,h=t.y.scale*s.y;return(m!==1||h!==1)&&(i+=`scale(${m}, ${h})`),i||"none"}const Hp=["","X","Y","Z"],uB=1e3;let mB=0;function Jp(t,s,n,i){const{latestValues:o}=s;o[t]&&(n[t]=o[t],s.setStaticValue(t,0),i&&(i[t]=0))}function C3(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const n=d3(s);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:c}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",As,!(o||c))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&C3(i)}function E3({attachResizeListener:t,defaultParent:s,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(d={},m=s?.()){this.id=mB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fB),this.nodes.forEach(yB),this.nodes.forEach(jB),this.nodes.forEach(gB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new eB)}addEventListener(d,m){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new Ag),this.eventHandlers.get(d).add(m)}notifyListeners(d,...m){const h=this.eventHandlers.get(d);h&&h.notify(...m)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=q5(d)&&!rk(d),this.instance=d;const{layoutId:m,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||m)&&(this.isLayoutDirty=!0),t){let u,f=0;const g=()=>this.root.updateBlockedByResize=!1;As.read(()=>{f=window.innerWidth}),t(d,()=>{const y=window.innerWidth;y!==f&&(f=y,this.root.updateBlockedByResize=!0,u&&u(),u=tB(g,250),Ju.hasAnimatedSinceResize&&(Ju.hasAnimatedSinceResize=!1,this.nodes.forEach(Q1)))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&p&&(m||h)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||p.getDefaultTransition()||EB,{onLayoutAnimationStart:j,onLayoutAnimationComplete:N}=p.getProps(),w=!this.targetLayout||!A3(this.targetLayout,y),B=!f&&g;if(this.options.layoutRoot||this.resumeFrom||B||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...Rg(b,"layout"),onPlay:j,onComplete:N};(p.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(u,B)}else f||Q1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Pn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NB),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&C3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:m,layout:h}=this.options;if(m===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(G1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Y1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(vB),this.nodes.forEach(hB),this.nodes.forEach(pB)):this.nodes.forEach(Y1),this.clearAllSnapshots();const m=Ar.now();or.delta=Ga(0,1e3/60,m-or.timestamp),or.timestamp=m,or.isProcessing=!0,Tp.update.process(or),Tp.preRender.process(or),Tp.render.process(or),or.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ig.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bB),this.sharedNodes.forEach(wB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,As.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){As.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pr(this.snapshot.measuredBox.x)&&!pr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let m=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(m=!1),m&&this.instance){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!o)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,m=this.projectionDelta&&!w3(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,u=p!==this.prevTransformTemplateValue;d&&this.instance&&(m||ui(this.latestValues)||u)&&(o(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const m=this.measurePageBox();let h=this.removeElementScroll(m);return d&&(h=this.removeTransform(h)),kB(h),{animationId:this.root.animationId,measuredBox:m,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return Rs();const m=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(_B))){const{scroll:p}=this.root;p&&(jo(m.x,p.offset.x),jo(m.y,p.offset.y))}return m}removeElementScroll(d){const m=Rs();if(Qr(m,d),this.scroll?.wasRoot)return m;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:u,options:f}=p;p!==this.root&&u&&f.layoutScroll&&(u.wasRoot&&Qr(m,d),jo(m.x,u.offset.x),jo(m.y,u.offset.y))}return m}applyTransform(d,m=!1){const h=Rs();Qr(h,d);for(let p=0;p<this.path.length;p++){const u=this.path[p];!m&&u.options.layoutScroll&&u.scroll&&u!==u.root&&No(h,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ui(u.latestValues)&&No(h,u.latestValues)}return ui(this.latestValues)&&No(h,this.latestValues),h}removeTransform(d){const m=Rs();Qr(m,d);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!ui(p.latestValues))continue;Zf(p.latestValues)&&p.updateSnapshot();const u=Rs(),f=p.measurePageBox();Qr(u,f),q1(m,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,u)}return ui(this.latestValues)&&q1(m,this.latestValues),m}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==or.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==m;if(!(d||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=or.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rs(),this.relativeTargetOrigin=Rs(),Yx(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Rs(),this.targetWithTransforms=Rs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),T_(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qr(this.target,this.layout.layoutBox),a3(this.target,this.targetDelta)):Qr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rs(),this.relativeTargetOrigin=Rs(),Yx(this.relativeTargetOrigin,this.target,g.target),Qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Zf(this.parent.latestValues)||r3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const d=this.getLead(),m=!!this.resumingFrom||this!==d;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===or.timestamp&&(h=!1),h)return;const{layout:p,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||u))return;Qr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;Jk(this.layoutCorrected,this.treeScale,this.path,m),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=Rs());const{target:y}=d;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(z1(this.prevProjectionDelta.x,this.projectionDelta.x),z1(this.prevProjectionDelta.y,this.projectionDelta.y)),Gx(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!J1(this.projectionDelta.x,this.prevProjectionDelta.x)||!J1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wo(),this.projectionDelta=wo(),this.projectionDeltaWithTransform=wo()}setAnimationOrigin(d,m=!1){const h=this.snapshot,p=h?h.latestValues:{},u={...this.latestValues},f=wo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const g=Rs(),y=h?h.source:void 0,b=this.layout?this.layout.source:void 0,j=y!==b,N=this.getStack(),w=!N||N.members.length<=1,B=!!(j&&!w&&this.options.crossfade===!0&&!this.path.some(CB));this.animationProgress=0;let S;this.mixTargetDelta=_=>{const k=_/1e3;W1(f.x,d.x,k),W1(f.y,d.y,k),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yx(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AB(this.relativeTarget,this.relativeTargetOrigin,g,k),S&&cB(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Rs()),Qr(S,this.relativeTarget)),j&&(this.animationValues=u,rB(u,p,this.latestValues,k,B,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Pn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=As.update(()=>{Ju.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_o(0)),this.currentAnimation=X_(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),d.onUpdate&&d.onUpdate(m)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:m,target:h,layout:p,latestValues:u}=d;if(!(!m||!h||!p)){if(this!==d&&this.layout&&p&&k3(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Rs();const f=pr(this.layout.layoutBox.x);h.x.min=d.target.x.min,h.x.max=h.x.min+f;const g=pr(this.layout.layoutBox.y);h.y.min=d.target.y.min,h.y.max=h.y.min+g}Qr(m,h),No(m,u),Gx(this.projectionDeltaWithTransform,this.layoutCorrected,m,u)}}registerSharedNode(d,m){this.sharedNodes.has(d)||this.sharedNodes.set(d,new dB),this.sharedNodes.get(d).add(m);const p=m.options.initialPromotionConfig;m.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(m):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:m,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),d&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let m=!1;const{latestValues:h}=d;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(m=!0),!m)return;const p={};h.z&&Jp("z",d,p,this.animationValues);for(let u=0;u<Hp.length;u++)Jp(`rotate${Hp[u]}`,d,p,this.animationValues),Jp(`skew${Hp[u]}`,d,p,this.animationValues);d.render();for(const u in p)d.setStaticValue(u,p[u]),this.animationValues&&(this.animationValues[u]=p[u]);d.scheduleRender()}applyProjectionStyles(d,m){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=Hu(m?.pointerEvents)||"",d.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=Hu(m?.pointerEvents)||""),this.hasProjected&&!ui(this.latestValues)&&(d.transform=h?h({},""):"none",this.hasProjected=!1);return}d.visibility="";const u=p.animationValues||p.latestValues;this.applyTransformsToTarget();let f=xB(this.projectionDeltaWithTransform,this.treeScale,u);h&&(f=h(u,f)),d.transform=f;const{x:g,y}=this.projectionDelta;d.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,p.animationValues?d.opacity=p===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:d.opacity=p===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const b in e0){if(u[b]===void 0)continue;const{correct:j,applyTo:N,isCSSVariable:w}=e0[b],B=f==="none"?u[b]:j(u[b],p);if(N){const S=N.length;for(let _=0;_<S;_++)d[N[_]]=B}else w?this.options.visualElement.renderState.vars[b]=B:d[b]=B}this.options.layoutId&&(d.pointerEvents=p===this?Hu(m?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(G1),this.root.sharedNodes.clear()}}}function hB(t){t.updateLayout()}function pB(t){const s=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:o}=t.options,c=s.source!==t.layout.source;o==="size"?Wr(u=>{const f=c?s.measuredBox[u]:s.layoutBox[u],g=pr(f);f.min=n[u].min,f.max=f.min+g}):k3(o,s.layoutBox,n)&&Wr(u=>{const f=c?s.measuredBox[u]:s.layoutBox[u],g=pr(n[u]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+g)});const d=wo();Gx(d,n,s.layoutBox);const m=wo();c?Gx(m,t.applyTransform(i,!0),s.measuredBox):Gx(m,n,s.layoutBox);const h=!w3(d);let p=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:g}=u;if(f&&g){const y=Rs();Yx(y,s.layoutBox,f.layoutBox);const b=Rs();Yx(b,n,g.layoutBox),A3(y,b)||(p=!0),u.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=y,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:m,layoutDelta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function fB(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function gB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bB(t){t.clearSnapshot()}function G1(t){t.clearMeasurements()}function Y1(t){t.isLayoutDirty=!1}function vB(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function Q1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yB(t){t.resolveTargetDelta()}function jB(t){t.calcProjection()}function NB(t){t.resetSkewAndRotation()}function wB(t){t.removeLeadSnapshot()}function W1(t,s,n){t.translate=Bs(s.translate,0,n),t.scale=Bs(s.scale,1,n),t.origin=s.origin,t.originPoint=s.originPoint}function K1(t,s,n,i){t.min=Bs(s.min,n.min,i),t.max=Bs(s.max,n.max,i)}function AB(t,s,n,i){K1(t.x,s.x,n.x,i),K1(t.y,s.y,n.y,i)}function CB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EB={duration:.45,ease:[.4,0,.1,1]},X1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Z1=X1("applewebkit/")&&!X1("chrome/")?Math.round:ta;function ej(t){t.min=Z1(t.min),t.max=Z1(t.max)}function kB(t){ej(t.x),ej(t.y)}function k3(t,s,n){return t==="position"||t==="preserve-aspect"&&!P_(H1(s),H1(n),.2)}function _B(t){return t!==t.root&&t.scroll?.wasRoot}const BB=E3({attachResizeListener:(t,s)=>t0(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gp={current:void 0},_3=E3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gp.current){const t=new BB({});t.mount(window),t.setOptions({layoutScroll:!0}),Gp.current=t}return Gp.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),SB={pan:{Feature:Y_},drag:{Feature:G_,ProjectionNode:_3,MeasureLayout:y3}};function tj(t,s,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,c=i[o];c&&As.postRender(()=>c(s,l0(s)))}class DB extends zn{mount(){const{current:s}=this.node;s&&(this.unmount=XE(s,(n,i)=>(tj(this.node,i,"Start"),o=>tj(this.node,o,"End"))))}unmount(){}}class FB extends zn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=n0(t0(this.node.current,"focus",()=>this.onFocus()),t0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sj(t,s,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),c=i[o];c&&As.postRender(()=>c(s,l0(s)))}class PB extends zn{mount(){const{current:s}=this.node;s&&(this.unmount=sk(s,(n,i)=>(sj(this.node,i,"Start"),(o,{success:c})=>sj(this.node,o,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ig=new WeakMap,Yp=new WeakMap,TB=t=>{const s=ig.get(t.target);s&&s(t)},OB=t=>{t.forEach(TB)};function MB({root:t,...s}){const n=t||document;Yp.has(n)||Yp.set(n,{});const i=Yp.get(n),o=JSON.stringify(s);return i[o]||(i[o]=new IntersectionObserver(OB,{root:t,...s})),i[o]}function RB(t,s,n){const i=MB(s);return ig.set(t,n),i.observe(t),()=>{ig.delete(t),i.unobserve(t)}}const zB={some:0,all:1};class IB extends zn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:c}=s,d={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:zB[o]},m=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,c&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),g=p?u:f;g&&g(h)};return RB(this.node.current,d,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:n}=this.node;["amount","margin","root"].some(LB(s,n))&&this.startObserver()}unmount(){}}function LB({viewport:t={}},{viewport:s={}}={}){return n=>t[n]!==s[n]}const qB={inView:{Feature:IB},tap:{Feature:PB},focus:{Feature:FB},hover:{Feature:DB}},$B={layout:{ProjectionNode:_3,MeasureLayout:y3}},UB={...k_,...qB,...SB,...$B},ca=Uk(UB,s_);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,i)=>i?i.toUpperCase():n.toLowerCase()),rj=t=>{const s=HB(t);return s.charAt(0).toUpperCase()+s.slice(1)},B3=(...t)=>t.filter((s,n,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===n).join(" ").trim(),JB=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=C.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:d,...m},h)=>C.createElement("svg",{ref:h,...GB,width:s,height:s,stroke:t,strokeWidth:i?Number(n)*24/Number(s):n,className:B3("lucide",o),...!c&&!JB(m)&&{"aria-hidden":"true"},...m},[...d.map(([p,u])=>C.createElement(p,u)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(t,s)=>{const n=C.forwardRef(({className:i,...o},c)=>C.createElement(YB,{ref:c,iconNode:s,className:B3(`lucide-${VB(rj(t))}`,`lucide-${t}`,i),...o}));return n.displayName=rj(t),n};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Qa=Ce("activity",QB);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],KB=Ce("arrow-down-right",WB);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Kg=Ce("arrow-down",XB);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vs=Ce("arrow-left",ZB);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ux=Ce("arrow-right",eS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],sS=Ce("arrow-up-right",tS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Xg=Ce("arrow-up",rS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],c0=Ce("award",aS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ml=Ce("ban",nS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],bm=Ce("banknote",iS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],lS=Ce("bell-off",oS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],dS=Ce("bell-ring",cS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Is=Ce("bell",xS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],S3=Ce("book-open",uS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],hS=Ce("bookmark",mS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Gu=Ce("bot",pS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],gS=Ce("brain",fS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],D3=Ce("briefcase",bS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Gs=Ce("building",vS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Eo=Ce("calculator",yS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],s0=Ce("calendar-days",jS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rt=Ce("calendar",NS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],da=Ce("camera",wS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ja=Ce("chart-column",AS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],ES=Ce("chart-line",CS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],_S=Ce("chart-pie",kS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],aj=Ce("check-check",BS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hr=Ce("check",SS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ea=Ce("chevron-down",DS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xa=Ce("chevron-left",FS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],sr=Ce("chevron-right",PS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TS=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Zg=Ce("chevron-up",TS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xe=Ce("circle-alert",OS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Je=Ce("circle-check-big",MS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zS=Ce("circle-check",RS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],LS=Ce("circle-plus",IS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$S=Ce("circle-question-mark",qS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],VS=Ce("circle-user",US);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xs=Ce("circle-x",HS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],GS=Ce("clock-3",JS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nt=Ce("clock",YS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],WS=Ce("code",QS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],XS=Ce("copy",KS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ds=Ce("credit-card",ZS);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ja=Ce("crown",e7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],s7=Ce("database",t7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],as=Ce("dollar-sign",r7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ka=Ce("download",a7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],i7=Ce("ellipsis-vertical",n7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Qp=Ce("ellipsis",o7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],c7=Ce("external-link",l7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],x7=Ce("eye-off",d7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dn=Ce("eye",u7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ao=Ce("file-text",m7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Za=Ce("funnel",h7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Qt=Ce("gift",p7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],og=Ce("globe",f7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],b7=Ce("graduation-cap",g7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],vm=Ce("grid-3x3",v7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],nj=Ce("heart",y7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],lg=Ce("history",j7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],F3=Ce("house",N7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],On=Ce("image",w7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ir=Ce("info",A7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],E7=Ce("keyboard",C7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],am=Ce("layout-dashboard",k7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],B7=Ce("layout-grid",_7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],eb=Ce("list",S7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],So=Ce("loader-circle",D7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Cu=Ce("loader",F7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],P3=Ce("lock",P7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Mn=Ce("log-out",T7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ht=Ce("mail",O7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yi=Ce("map-pin",M7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],T3=Ce("medal",R7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],O3=Ce("menu",z7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],cg=Ce("message-circle",I7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],M3=Ce("message-square",L7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"M5 12h14",key:"1ays0h"}]],Eu=Ce("minus",q7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ij=Ce("monitor",$7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Aa=Ce("package",U7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],r0=Ce("palette",V7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],J7=Ce("pause",H7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Y7=Ce("pen-line",G7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],W7=Ce("pen",Q7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],go=Ce("percent",K7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Er=Ce("phone",X7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],eD=Ce("play",Z7);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cs=Ce("plus",tD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],tb=Ce("printer",sD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],rr=Ce("qr-code",rD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ya=Ce("receipt",aD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ps=Ce("refresh-cw",nD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ro=Ce("rotate-ccw",iD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qr=Ce("save",oD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],ys=Ce("scissors",lD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ns=Ce("search",cD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qx=Ce("send",dD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],uD=Ce("server",xD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lr=Ce("settings",mD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],pD=Ce("shield-alert",hD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],R3=Ce("shield-check",fD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ni=Ce("shield",gD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],z3=Ce("shopping-cart",bD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],yD=Ce("smartphone",vD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}]],ND=Ce("sparkle",jD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ca=Ce("sparkles",wD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sa=Ce("square-pen",AD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Vt=Ce("star",CD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],d0=Ce("target",ED);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],oj=Ce("test-tube",kD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],lj=Ce("ticket",_D);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],SD=Ce("toggle-left",BD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],js=Ce("trash-2",DD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],I3=Ce("trending-down",FD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M14.828 14.828 21 21",key:"ar5fw7"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"m21 3-9 9-4-4-6 6",key:"1h02xo"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}]],TD=Ce("trending-up-down",PD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wr=Ce("trending-up",OD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ea=Ce("triangle-alert",MD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ym=Ce("trophy",RD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],ID=Ce("type",zD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],L3=Ce("undo-2",LD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ji=Ce("upload",qD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],a0=Ce("user-check",$D);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],zr=Ce("user-plus",UD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],cj=Ce("user-x",VD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tt=Ce("user",HD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hs=Ce("users",JD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],gi=Ce("wallet",GD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ze=Ce("x",YD);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Do=Ce("zap",QD),q3=C.createContext(),wi=()=>{const t=C.useContext(q3);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},WD=({children:t})=>{const[s,n]=C.useState([]),i=C.useCallback(j=>{const N=Date.now()+Math.random(),w={id:N,...j,duration:j.duration||5e3};return n(B=>[...B,w]),w.duration>0&&setTimeout(()=>{o(N)},w.duration),N},[]),o=C.useCallback(j=>{n(N=>N.filter(w=>w.id!==j))},[]),c=C.useCallback(()=>{n([])},[]),d=C.useCallback((j,N,w={})=>i({type:"success",title:j,message:N,icon:hr,bgColor:"bg-green-500",borderColor:"border-green-500",iconColor:"text-green-400",...w}),[i]),m=C.useCallback((j,N,w={})=>i({type:"error",title:j,message:N,icon:Ea,bgColor:"bg-red-500",borderColor:"border-red-500",iconColor:"text-red-400",duration:7e3,...w}),[i]),h=C.useCallback((j,N,w={})=>i({type:"warning",title:j,message:N,icon:Ea,bgColor:"bg-yellow-500",borderColor:"border-yellow-500",iconColor:"text-yellow-400",...w}),[i]),p=C.useCallback((j,N,w={})=>i({type:"info",title:j,message:N,icon:Ir,bgColor:"bg-blue-500",borderColor:"border-blue-500",iconColor:"text-blue-400",...w}),[i]),u=C.useCallback((j,N,w={})=>i({type:"booking",title:j,message:N,icon:rt,bgColor:"bg-[var(--color-primary)]",borderColor:"border-[var(--color-primary)]",iconColor:"text-[var(--color-primary)]",...w}),[i]),f=C.useCallback((j,N,w={})=>i({type:"payment",title:j,message:N,icon:ds,bgColor:"bg-green-500",borderColor:"border-green-500",iconColor:"text-green-400",...w}),[i]),g=C.useCallback((j,N,w={})=>i({type:"reminder",title:j,message:N,icon:Nt,bgColor:"bg-yellow-500",borderColor:"border-yellow-500",iconColor:"text-yellow-400",...w}),[i]),y=C.useCallback((j,N,w={})=>i({type:"promotion",title:j,message:N,icon:Qt,bgColor:"bg-[var(--color-primary)]",borderColor:"border-[var(--color-primary)]",iconColor:"text-[var(--color-primary)]",...w}),[i]),b={toasts:s,addToast:i,removeToast:o,clearAllToasts:c,success:d,error:m,warning:h,info:p,booking:u,payment:f,reminder:g,promotion:y};return e.jsxs(q3.Provider,{value:b,children:[t,e.jsx(KD,{})]})},KD=()=>{const{toasts:t,removeToast:s}=wi(),n=t[0],i=t.length-1;return e.jsxs("div",{className:"fixed top-6 right-6 z-[9999] pointer-events-none max-w-sm",children:[e.jsx(Vu,{mode:"wait",children:n&&e.jsx(XD,{toast:n,onRemove:s},n.id)}),i>0&&e.jsx(ca.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-3 pointer-events-auto",children:e.jsx("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-[#1A1A1A]/95 border border-[#2A2A2A] backdrop-blur-xl shadow-lg",children:e.jsxs("span",{className:"text-xs font-semibold text-gray-400",children:["+",i," more"]})})})]})},XD=({toast:t,onRemove:s})=>{const[n,i]=C.useState(100);C.useEffect(()=>{if(t.duration<=0)return;const m=50,h=100/(t.duration/m),p=setInterval(()=>{i(u=>{const f=u-h;return f<=0?(clearInterval(p),0):f})},m);return()=>clearInterval(p)},[t.duration]);const o=t.icon||Ir,c=t.bgColor||"bg-gray-500",d=t.iconColor||"text-gray-400";return e.jsxs(ca.div,{initial:{opacity:0,x:100,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.95,transition:{duration:.2}},className:"relative rounded-[20px] shadow-2xl backdrop-blur-2xl pointer-events-auto overflow-hidden bg-[#0A0A0A]/98 border border-[#1A1A1A] w-80",children:[t.duration>0&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] transition-all duration-50",style:{width:`${n}%`}}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-xl ${c}/10 border border-${c.replace("bg-","")}/30 flex items-center justify-center`,children:e.jsx(o,{className:d,size:18})}),e.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("h4",{className:"font-bold text-white text-sm leading-tight",children:t.title}),e.jsx("button",{onClick:()=>s(t.id),className:"ml-2 p-1 text-gray-500 hover:text-white transition-colors rounded-lg hover:bg-white/5 flex-shrink-0 active:scale-95",children:e.jsx(Ze,{size:16})})]}),t.message&&e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-3",children:t.message}),t.action&&e.jsxs(ca.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t.action.onClick,className:"inline-flex items-center px-3 py-1.5 text-xs font-bold rounded-lg bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white transition-all duration-200 shadow-lg hover:shadow-xl",children:[t.action.label,e.jsx("svg",{className:"w-3 h-3 ml-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})]})]})})]})},$3=({message:t="Loading..."})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-[#333333] opacity-20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-[var(--color-primary)] animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-transparent border-t-[var(--color-primary)] animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full animate-pulse"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-white text-lg font-medium",children:t}),e.jsxs("div",{className:"flex justify-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-transparent via-[var(--color-primary)] to-transparent mx-auto opacity-50"})})]})}),ZD=({idleTime:t=1800*1e3,warningTime:s=60*1e3,onIdle:n,onWarning:i,onActive:o,enabled:c=!0})=>{const[d,m]=C.useState(!1),[h,p]=C.useState(!1),[u,f]=C.useState(s),g=C.useRef(null),y=C.useRef(null),b=C.useRef(null),j=C.useRef(Date.now()),N=C.useCallback(()=>{g.current&&(clearTimeout(g.current),g.current=null),y.current&&(clearTimeout(y.current),y.current=null),b.current&&(clearInterval(b.current),b.current=null)},[]),w=C.useCallback(()=>{f(s),b.current=setInterval(()=>{f(E=>E<=1e3?(clearInterval(b.current),0):E-1e3)},1e3)},[s]),B=C.useCallback(()=>{p(!0),w(),i?.(),y.current=setTimeout(()=>{m(!0),p(!1),n?.()},s)},[i,n,s,w]),S=C.useCallback(()=>{c&&(N(),j.current=Date.now(),m(!1),p(!1),f(s),g.current=setTimeout(()=>{B()},t))},[c,N,t,B,s]),_=C.useCallback(()=>{if(!c)return;const E=Date.now();E-j.current<1e3||(j.current=E,(h||d)&&o?.(),S())},[c,h,d,o,S]),k=C.useCallback(()=>{_()},[_]);return C.useEffect(()=>{if(!c){N();return}const E=["mousedown","mousemove","keydown","touchstart","scroll","wheel","click"];let D=null;const F=()=>{D||(D=setTimeout(()=>{_(),D=null},500))};E.forEach(P=>{document.addEventListener(P,F,{passive:!0})});const M=()=>{if(document.visibilityState==="visible"){const P=Date.now()-j.current;P>=t+s?(m(!0),p(!1),n?.()):P>=t&&B()}};return document.addEventListener("visibilitychange",M),S(),()=>{E.forEach(P=>{document.removeEventListener(P,F)}),document.removeEventListener("visibilitychange",M),N(),D&&clearTimeout(D)}},[c,t,s,_,B,n,S,N]),{isIdle:d,isWarning:h,remainingTime:u,extendSession:k,resetTimer:S}},eF=({open:t,remainingTime:s,onStayLoggedIn:n,onLogout:i})=>{if(!t)return null;const o=m=>{const h=Math.ceil(m/1e3);if(h>=60){const p=Math.floor(h/60),u=h%60;return`${p}:${u.toString().padStart(2,"0")}`}return`${h} seconds`},d=Math.ceil(s/1e3)<=10;return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm",children:e.jsxs("div",{className:"relative w-full max-w-md mx-4 rounded-3xl border border-white/10 bg-[#1A1A1A] p-6 shadow-2xl animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"mb-4 flex flex-col items-center",children:[e.jsxs("div",{className:`relative mb-3 ${d?"animate-pulse":""}`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full ${d?"bg-red-500/20":"bg-[var(--color-primary)]/20"} blur-xl`}),e.jsx("div",{className:`relative flex h-16 w-16 items-center justify-center rounded-full ${d?"bg-red-500/10":"bg-[var(--color-primary)]/10"}`,children:e.jsx(Nt,{className:`h-8 w-8 ${d?"text-red-500":"text-[var(--color-primary)]"}`})})]}),e.jsx("h3",{className:"text-xl font-bold text-white text-center",children:"Session Timeout Warning"})]}),e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:`inline-flex items-center gap-2 rounded-xl px-4 py-2 ${d?"bg-red-500/10 border border-red-500/20":"bg-white/5 border border-white/10"}`,children:e.jsx("span",{className:`text-2xl font-mono font-bold ${d?"text-red-500":"text-white"}`,children:o(s)})})}),e.jsxs("p",{className:"mb-6 text-center text-sm text-gray-300",children:["You've been inactive for a while. For security, you'll be automatically logged out",d?e.jsx("span",{className:"text-red-400 font-medium",children:" in just a few seconds!"}):" soon."]}),e.jsx("div",{className:"mb-6 h-1.5 w-full overflow-hidden rounded-full bg-white/10",children:e.jsx("div",{className:`h-full transition-all duration-1000 ease-linear rounded-full ${d?"bg-red-500":"bg-[var(--color-primary)]"}`,style:{width:`${s/6e4*100}%`}})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:i,className:"flex flex-1 items-center justify-center gap-2 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-semibold text-white transition hover:bg-white/10",children:[e.jsx(Mn,{className:"h-4 w-4"}),"Log Out"]}),e.jsxs("button",{onClick:n,className:"flex flex-1 items-center justify-center gap-2 rounded-xl bg-[var(--color-primary)] px-4 py-3 text-sm font-semibold text-white transition hover:bg-[var(--color-accent)]",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Stay Logged In"]})]}),e.jsx("p",{className:"mt-4 text-center text-xs text-gray-500",children:"Any mouse movement or keyboard activity will keep you logged in"})]})})},tF=1800*1e3,sF=60*1e3,Ua=({children:t,requireStaff:s=!1,requireBarber:n=!1,requireSuperAdmin:i=!1,requirePageAccess:o=null})=>{const{isAuthenticated:c,user:d,loading:m,logout:h}=Dt(),p=um(),[u,f]=C.useState(!1),g=s||n||i,y=C.useCallback(async()=>{f(!1),await h()},[h]),b=C.useCallback(()=>{f(!0)},[]),j=C.useCallback(()=>{f(!1)},[]),{isWarning:N,remainingTime:w,extendSession:B}=ZD({idleTime:tF,warningTime:sF,onIdle:y,onWarning:b,onActive:j,enabled:g&&c}),S=C.useCallback(()=>{f(!1),B()},[B]),_=C.useCallback(async()=>{f(!1),await h()},[h]);return m?e.jsx($3,{message:"Verifying access..."}):c?s&&d?.role!=="staff"&&d?.role!=="admin"&&d?.role!=="super_admin"&&d?.role!=="branch_admin"?e.jsx(Rr,{to:Wp(d?.role),replace:!0}):n&&d?.role!=="barber"?e.jsx(Rr,{to:Wp(d?.role),replace:!0}):i&&d?.role!=="super_admin"?e.jsx(Rr,{to:Wp(d?.role),replace:!0}):o&&d?.role!=="super_admin"&&d?.role!=="admin"&&d?.page_access&&Array.isArray(d.page_access)&&!d.page_access.includes(o)?e.jsx(Rr,{to:"/staff/dashboard",replace:!0}):e.jsxs(e.Fragment,{children:[t,g&&e.jsx(eF,{open:u||N,remainingTime:w,onStayLoggedIn:S,onLogout:_})]}):e.jsx(Rr,{to:"/auth/login",state:{from:p},replace:!0})},Wp=t=>{switch(t){case"super_admin":return"/admin/dashboard";case"staff":case"admin":case"branch_admin":return"/staff/dashboard";case"barber":return"/barber/home";case"customer":default:return"/customer/dashboard"}},ku=({children:t})=>{const{isAuthenticated:s,user:n,loading:i}=Dt();if(i)return e.jsx($3,{message:"Authenticating..."});if(s&&n)switch(n.role){case"super_admin":return e.jsx(Rr,{to:"/admin/dashboard",replace:!0});case"staff":case"admin":case"branch_admin":return e.jsx(Rr,{to:"/staff/dashboard",replace:!0});case"barber":return e.jsx(Rr,{to:"/barber/home",replace:!0});case"customer":default:return e.jsx(Rr,{to:"/customer/dashboard",replace:!0})}return t},xo=({className:t,...s})=>e.jsx("div",{className:`animate-pulse bg-gray-700/50 rounded ${t}`,...s}),dj=()=>{const t=Ws(),{branding:s,loading:n}=Ts(),[i,o]=C.useState(!1),[c,d]=C.useState(!1),[m,h]=C.useState(""),[p,u]=C.useState(""),f=me(H.services.services.getActiveServices),g=me(H.services.branches.getActiveBranches),y=f===void 0,b=g===void 0;if(C.useEffect(()=>{const N=()=>{o(window.scrollY>20)};return window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)},[]),n||y||b)return e.jsxs("div",{className:"min-h-screen bg-black text-white",children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 py-6 bg-black border-b border-white/10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[e.jsx(xo,{className:"w-32 h-10"}),e.jsxs("div",{className:"hidden md:flex gap-8",children:[e.jsx(xo,{className:"w-20 h-6"}),e.jsx(xo,{className:"w-20 h-6"}),e.jsx(xo,{className:"w-20 h-6"})]})]})}),e.jsxs("div",{className:"pt-32 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(xo,{className:"w-full h-[400px] rounded-2xl mb-12 bg-gray-800"}),e.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:[...Array(4)].map((N,w)=>e.jsx(xo,{className:"w-full h-64 rounded-xl bg-gray-800"},w))})]})]});const j=f?f.slice(0,4):[];return e.jsxs("div",{className:"min-h-screen bg-black text-gray-100 font-sans selection:bg-[var(--color-primary)]/30",children:[e.jsx("style",{children:`
        :root {
          --color-bg: #000000;
          --color-text: #ffffff;
        }
      `}),e.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${i?"bg-black/80 backdrop-blur-md border-b border-white/10 py-4":"bg-transparent py-6"}`,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("/"),children:[s?.logo_light_url?e.jsx("img",{src:s.logo_light_url,alt:"Logo",className:"w-10 h-10 object-contain"}):e.jsx("div",{className:"w-10 h-10 bg-[var(--color-primary)] rounded-lg flex items-center justify-center shadow-lg shadow-[var(--color-primary)]/20",children:e.jsx(ys,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight leading-none text-white",children:s?.display_name||"Title"}),e.jsx("p",{className:"text-[10px] font-medium tracking-[0.2em] uppercase mt-1 text-gray-400",children:"Premium Grooming"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[e.jsx("a",{href:"#",className:"text-sm font-medium text-gray-300 hover:text-white transition-colors",children:"For Business"}),e.jsx("a",{href:"#",className:"text-sm font-medium text-gray-300 hover:text-white transition-colors",children:"Help"}),e.jsxs("div",{className:"flex items-center gap-4 pl-4 border-l border-white/10",children:[e.jsx("button",{onClick:()=>t("/auth/login"),className:"text-sm font-bold text-white hover:text-[var(--color-primary)] transition-colors",children:"Log In"}),e.jsx("button",{onClick:()=>t("/guest/booking"),className:"px-5 py-2.5 rounded-full text-sm font-bold transition-all active:scale-95 shadow-lg bg-[var(--color-primary)] text-white hover:brightness-110",children:"Book Now"})]})]}),e.jsx("button",{className:"md:hidden p-2 text-white",onClick:()=>d(!c),children:c?e.jsx(Ze,{}):e.jsx(O3,{})})]})}),c&&e.jsxs("div",{className:"absolute top-full left-0 right-0 bg-gray-900 border-b border-white/10 p-4 md:hidden flex flex-col gap-4 shadow-2xl",children:[e.jsx("a",{href:"#services",className:"text-lg font-medium text-gray-300 py-2",children:"Services"}),e.jsx("a",{href:"#about",className:"text-lg font-medium text-gray-300 py-2",children:"About"}),e.jsx("a",{href:"#reviews",className:"text-lg font-medium text-gray-300 py-2",children:"Reviews"}),e.jsx("hr",{className:"border-white/10"}),e.jsx("button",{onClick:()=>t("/auth/login"),className:"text-left text-lg font-medium text-white py-2",children:"Log In"}),e.jsx("button",{onClick:()=>t("/guest/booking"),className:"w-full py-3 rounded-xl bg-[var(--color-primary)] text-white font-bold",children:"Book Now"})]})]}),e.jsxs("section",{className:"relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:s?.hero_image_url||"/landing/2.webp",alt:"Background",className:"w-full h-full object-cover opacity-50"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"})]}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsxs("h1",{className:"text-4xl sm:text-6xl font-bold text-white mb-6 leading-tight",children:["Refine Your ",e.jsx("br",{}),e.jsx("span",{className:"text-[var(--color-primary)]",children:"Signature Look"})]}),e.jsxs("p",{className:"text-lg text-gray-400 mb-8 max-w-lg",children:["Experience the pinnacle of grooming. Where traditional barbering meets modern luxury."," "]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md p-2 rounded-2xl border border-white/10 flex flex-col md:flex-row gap-2",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none group-focus-within:text-[var(--color-primary)] transition-colors",children:e.jsx(Ns,{className:"w-5 h-5"})}),e.jsxs("select",{value:p,onChange:N=>u(N.target.value),className:`w-full h-14 pl-12 pr-10 bg-transparent rounded-xl focus:bg-white/5 outline-none font-medium transition-colors appearance-none cursor-pointer [&>option]:bg-black [&>option]:text-white ${p===""?"text-gray-400":"text-white"}`,children:[e.jsx("option",{value:"",children:"Book your services..."}),f?.map(N=>e.jsx("option",{value:N._id,children:N.name},N._id))]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:e.jsx(ea,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"w-px h-10 bg-white/10 my-auto hidden md:block"}),e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none group-focus-within:text-[var(--color-primary)] transition-colors",children:e.jsx(yi,{className:"w-5 h-5"})}),e.jsxs("select",{value:m,onChange:N=>h(N.target.value),className:`w-full h-14 pl-12 pr-10 bg-transparent rounded-xl focus:bg-white/5 outline-none font-medium transition-colors appearance-none cursor-pointer [&>option]:bg-black [&>option]:text-white ${m===""?"text-gray-400":"text-white"}`,children:[e.jsx("option",{value:"",children:"Select branch..."}),g?.map(N=>e.jsx("option",{value:N._id,children:N.name},N._id))]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:e.jsx(ea,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>t("/guest/booking"),className:"bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white h-14 px-8 rounded-xl font-bold transition-colors shadow-lg shadow-[var(--color-primary)]/20",children:"Search"})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Popular:"}),["Haircut","Massage","Skin Fade","Beard Trim"].map(N=>e.jsx("button",{className:"text-sm text-gray-400 hover:text-white bg-white/5 hover:bg-white/10 px-3 py-1 rounded-full transition-colors border border-white/5 hover:border-white/20",children:N},N))]})]})})]}),e.jsx("section",{className:"py-20 bg-[#050505]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-end mb-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Our Services"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Premium grooming experiences tailored for you"})]}),e.jsxs("button",{onClick:()=>t("/guest/booking"),className:"hidden md:flex items-center gap-2 text-[var(--color-primary)] font-bold hover:brightness-110 transition-all",children:["View all ",e.jsx(Ux,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-5",children:[j.map((N,w)=>e.jsxs("div",{className:"group relative bg-gradient-to-br from-[#1A1A1A] to-[#0D0D0D] rounded-2xl p-6 border border-[#2A2A2A] hover:border-[var(--color-primary)]/50 transition-all duration-300 cursor-pointer overflow-hidden",onClick:()=>t("/guest/booking"),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--color-primary)]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("span",{className:"inline-block px-3 py-1 text-[10px] font-bold uppercase tracking-wider text-[var(--color-primary)] bg-[var(--color-primary)]/10 rounded-full border border-[var(--color-primary)]/20 mb-4",children:N.category||"Service"}),e.jsx("h3",{className:"font-bold text-xl text-white mb-2 group-hover:text-[var(--color-primary)] transition-colors line-clamp-1",children:N.name}),e.jsx("p",{className:"text-gray-500 text-sm mb-5 line-clamp-2 min-h-[40px]",children:N.description||"Premium service"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-xs mb-5",children:[e.jsx(Nt,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[N.duration_minutes||30," mins"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-[#2A2A2A]",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-600 uppercase font-semibold tracking-wider",children:"Starting at"}),e.jsxs("p",{className:"text-2xl font-black text-white",children:["",N.price]})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-[var(--color-primary)] flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx(Ux,{className:"w-5 h-5 text-white"})})]})]})]},w)),j.length===0&&!y&&e.jsx("div",{className:"col-span-full text-center py-10 text-gray-500",children:"No services found."})]}),e.jsxs("button",{onClick:()=>t("/guest/booking"),className:"md:hidden w-full mt-8 py-3 rounded-xl border border-white/10 bg-white/5 text-white font-bold hover:bg-white/10 transition-colors flex items-center justify-center gap-2",children:["View all services ",e.jsx(Ux,{className:"w-4 h-4"})]})]})}),e.jsx("section",{className:"py-20 bg-black border-y border-white/5",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsx("div",{className:"order-2 lg:order-1",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("img",{src:"/landing/4.webp",alt:"Barber working",className:"rounded-2xl w-full h-64 object-cover mt-12 shadow-2xl shadow-[var(--color-primary)]/10 border border-white/5"}),e.jsx("img",{src:"/landing/2.webp",alt:"Haircut detail",className:"rounded-2xl w-full h-64 object-cover shadow-2xl shadow-[var(--color-primary)]/10 border border-white/5"})]})}),e.jsxs("div",{className:"order-1 lg:order-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-[var(--color-primary)]/10 text-[var(--color-primary)] text-xs font-bold tracking-wider uppercase mb-6 border border-[var(--color-primary)]/20",children:[e.jsx(c0,{className:"w-4 h-4"}),"World Class Service"]}),e.jsxs("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-white",children:["Why ",s?.display_name||"Tipuno X"," is the best choice"]}),e.jsx("p",{className:"text-gray-400 text-lg mb-8 leading-relaxed",children:"We combine traditional barbering techniques with modern styling to create a unique experience. Our platform makes booking easier than ever."}),e.jsx("div",{className:"space-y-6",children:[{title:"Expert Barbers",desc:"Highly trained professionals",icon:hs},{title:"Easy Booking",desc:"Book in seconds, 24/7",icon:Nt},{title:"Hygienic Safe",desc:"Top-tier sterilization",icon:Ni}].map((N,w)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--color-primary)]/10 flex items-center justify-center flex-shrink-0 text-[var(--color-primary)] border border-[var(--color-primary)]/20",children:e.jsx(N.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:N.title}),e.jsx("p",{className:"text-gray-500 text-sm",children:N.desc})]})]},w))})]})]})})}),e.jsxs("section",{className:"py-24 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"rounded-3xl p-8 md:p-16 relative overflow-hidden",style:{backgroundColor:"var(--color-primary)"},children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-full bg-[url('/noise.png')] opacity-10 mix-blend-overlay"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"text-white space-y-6",children:[e.jsxs("h2",{className:"text-3xl md:text-5xl font-bold",children:["Get the ",s?.display_name," App"]}),e.jsx("p",{className:"text-white/80 text-lg max-w-md",children:"Book appointments, track your loyalty points, and get exclusive offers right from your phone."}),e.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[e.jsxs("button",{className:"flex items-center gap-3 bg-black/50 text-white px-6 py-3 rounded-xl cursor-not-allowed border border-white/10 opacity-80",children:[e.jsx(yD,{className:"w-6 h-6"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-yellow-400",children:"Coming Soon"}),e.jsx("p",{className:"text-sm font-bold leading-none",children:"App Store"})]})]}),e.jsxs("button",{className:"flex items-center gap-3 bg-black/50 text-white px-6 py-3 rounded-xl cursor-not-allowed border border-white/10 opacity-80",children:[e.jsx(ka,{className:"w-6 h-6"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-yellow-400",children:"Coming Soon"}),e.jsx("p",{className:"text-sm font-bold leading-none",children:"Google Play"})]})]})]})]}),e.jsx("div",{className:"relative hidden md:flex flex-col items-center justify-center",children:e.jsxs("div",{className:"relative bg-black/20 backdrop-blur-sm rounded-3xl p-10 border border-white/10",children:[e.jsx("div",{className:"absolute top-0 left-0 w-20 h-20 border-l-2 border-t-2 border-white/20 rounded-tl-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-20 h-20 border-r-2 border-b-2 border-white/20 rounded-br-3xl"}),e.jsxs("div",{className:"text-center px-6",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/50 font-medium mb-6",children:"Available Soon"}),e.jsx("h3",{className:"text-4xl font-black text-white mb-3 tracking-tight",children:"COMING SOON"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("div",{className:"h-px w-12 bg-gradient-to-r from-transparent to-white/40"}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60"}),e.jsx("div",{className:"h-px w-12 bg-gradient-to-l from-transparent to-white/40"})]}),e.jsx("p",{className:"text-white/60 text-sm leading-relaxed max-w-[240px]",children:"Your premium grooming experience, right in your pocket"})]})]})})]})]})})]}),e.jsx("footer",{className:"bg-black border-t border-white/10 pt-20 pb-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-12 mb-16",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s?.logo_light_url?e.jsx("img",{src:s.logo_light_url,alt:"Logo",className:"w-8 h-8 object-contain"}):e.jsx(ys,{className:"w-6 h-6 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-xl font-bold text-white",children:s?.display_name||"Tipuno X"})]}),e.jsx("p",{className:"text-gray-500 text-sm leading-relaxed",children:"Premium grooming experiences for the modern gentleman. Elevating style, one cut at a time."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-6 text-white",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-4 text-sm text-gray-500",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-[var(--color-primary)] transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"hover:text-[var(--color-primary)] transition-colors",children:"Services"})}),e.jsx("li",{children:e.jsx("a",{href:"#about",className:"hover:text-[var(--color-primary)] transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#reviews",className:"hover:text-[var(--color-primary)] transition-colors",children:"Reviews"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-6 text-white",children:"Contact"}),e.jsxs("ul",{className:"space-y-4 text-sm text-gray-500",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(yi,{className:"w-4 h-4"}),"123 Main Street, Quezon City"]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(Er,{className:"w-4 h-4"}),"+63 912 345 6789"]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(Nt,{className:"w-4 h-4"}),"Mon-Sat: 9am - 9pm"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold mb-6 text-white",children:"Newsletter"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Subscribe for updates and exclusive offers."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-sm w-full focus:outline-none focus:border-[var(--color-primary)] text-white placeholder-gray-500"}),e.jsx("button",{className:"p-2 rounded-lg transition-colors text-white bg-[var(--color-primary)] hover:bg-[var(--color-accent)]",children:e.jsx(Ux,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("p",{className:"text-gray-500 text-sm",children:[" 2024 ",s?.display_name||"Tipuno X",". All rights reserved."]}),e.jsxs("div",{className:"flex gap-6 text-sm text-gray-500",children:[e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"})]})]})]})})]})},rF=()=>{const t=Ws(),i=(um().state?.action||"signin")==="booking",o=()=>{t(i?"/auth/register":"/auth/login")},c=()=>{t("/download-app")};return e.jsxs("div",{className:"min-h-screen relative bg-gray-900 overflow-hidden flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:'url("/landing/4.webp")'}}),e.jsx("div",{className:"absolute inset-0 bg-gray-900/90"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/95 via-gray-900/90 to-gray-900/95"}),e.jsxs("button",{onClick:()=>t("/"),className:"absolute top-6 left-6 z-10 flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("div",{className:"relative z-10 px-4 w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex items-center justify-center gap-3 mb-6",children:e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"Logo",className:"w-20 h-20 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-3",children:i?"Ready to Book?":"Welcome Back"}),e.jsx("p",{className:"text-gray-300",children:"Choose your preferred way to continue"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("button",{onClick:c,className:"w-full bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:bg-white/15 hover:border-orange-500/50 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-black rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 overflow-hidden",children:e.jsx("img",{src:"/img/android.png",alt:"Android",className:"w-8 h-8 object-contain"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg font-bold text-white",children:"Android App"}),e.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded-full",children:"Recommended"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"AI assistant & premium features"})]}),e.jsx(ka,{className:"w-5 h-5 text-orange-400"})]})}),e.jsx("button",{onClick:o,className:"w-full bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:bg-white/10 hover:border-white/30 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(og,{className:"w-6 h-6 text-gray-300"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:"text-lg font-bold text-white block mb-1",children:"Web Browser"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Quick access, no download"})]}),e.jsx(vs,{className:"w-5 h-5 text-gray-400 rotate-180"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-400",children:[e.jsx(Vt,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-white font-semibold",children:"4.9"}),e.jsx("span",{children:" 2,500+ customers"})]})})]})]})},jm="/assets/banner-CSqrWLZa.jpg";function dg(t){if(!t)return null;const s=t.indexOf("{");if(s===-1)return null;const n=t.indexOf(" at ",s),i=n!==-1?n:t.length;let o=t.substring(s,i).trim();o=o.replace(/[.,;:]$/,"");try{const c=JSON.parse(o);if(c&&typeof c=="object"&&c.message)return c}catch{let d=0,m=s;for(let h=s;h<t.length;h++)if(t[h]==="{"&&d++,t[h]==="}"&&d--,d===0){m=h+1;break}if(m>s)try{const h=JSON.parse(t.substring(s,m));if(h&&typeof h=="object"&&h.message)return h}catch{}}return null}function xj(t){if(!t)return"";const s=dg(t);if(s&&s.message)return s.message;let n=t;n=n.replace(/\[CONVEX M\([^\]]+\)\]/g,""),n=n.replace(/\[Request ID: [^\]]+\]/g,""),n=n.replace(/Server\s+Error\s+Uncaught\s+Error:\s*/gi,""),n=n.replace(/Server\s+Error\s+Uncaught\s+Error\s*/gi,""),n=n.replace(/Server Error Uncaught Error:\s*/gi,""),n=n.replace(/Server Error Uncaught Error\s*/gi,""),n=n.replace(/Uncaught\s+Error:\s*/gi,""),n=n.replace(/Uncaught\s+Error\s*/gi,""),n=n.replace(/Server\s+Error:\s*/gi,""),n=n.replace(/Server\s+Error\s*/gi,""),n=n.replace(/\s*at\s+[^\n]+/g,""),n=n.replace(/\s*Called by client\s*/gi,"");const i=dg(n);return i&&i.message?i.message:(n=n.trim().replace(/\s+/g," "),n=n.replace(/^(Error|Exception|Uncaught):\s*/i,""),n)}function sb(t){let s="",n="",i="",o="";try{const c=h=>{s=h.message||"An error occurred",n=h.code||"UNKNOWN_ERROR",i=h.details||"",o=h.action||""},d=typeof t=="string"?t:t?.message||"",m=dg(d);if(m&&m.message)c(m);else{const h=xj(d);if(h.includes('{"message"')){const p=h.match(/\{[\s\S]*"message"[\s\S]*\}/);if(p)try{const u=JSON.parse(p[0]);c(u)}catch{s=h}else s=h}else s=h||"An unexpected error occurred"}}catch{const d=t?.message||t||"An unexpected error occurred";s=xj(d)||"An unexpected error occurred"}return{message:s,code:n,details:i,action:o,isUserError:!!(n&&i)}}function Yu(t){if(t&&typeof t=="object"&&!(t instanceof Error)&&(t.message||t.details||t.action))return{title:"Error",message:t.message||"An error occurred",details:t.details||"",action:t.action||"",type:uj(t.code||""),code:t.code||""};const s=sb(t);return{title:s.isUserError?"Error":"Something went wrong",message:s.message,details:s.details,action:s.action,type:uj(s.code),code:s.code}}function uj(t){return t.includes("AUTH_")?"auth":t.includes("BOOKING_")?"booking":t.includes("VOUCHER_")?"voucher":t.includes("TRANSACTION_")?"transaction":t.includes("PRODUCT_")?"product":t.includes("EVENT_")?"event":t.includes("PERMISSION_")?"permission":"general"}const x0=({error:t,onClose:s,onRetry:n,className:i="",variant:o="default"})=>{if(!t)return null;const c=Yu(t),p=i.includes("dark")||document.body.classList.contains("dark")||window.location.pathname.includes("/auth")?{container:"bg-red-500/10 border-red-500/30",icon:"text-red-400",message:"text-red-300",action:"text-[var(--color-primary)]",closeButton:"text-red-400 hover:text-red-300"}:{container:"bg-red-50 border-red-200",icon:"text-red-500",message:"text-red-800",action:"text-red-600",closeButton:"text-red-400 hover:text-red-600"};if(o==="inline")return e.jsxs("div",{className:`flex items-start space-x-3 p-3 ${p.container} border rounded-lg ${i}`,children:[e.jsx(Xe,{className:`w-4 h-4 ${p.icon} flex-shrink-0 mt-0.5`}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:`text-sm ${p.message}`,children:c.message})}),s&&e.jsx("button",{onClick:s,className:`${p.closeButton} transition-colors`,children:e.jsx(Ze,{className:"w-4 h-4"})})]});if(o==="compact")return e.jsx("div",{className:`${p.container} border rounded-lg p-4 ${i}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Xe,{className:`w-5 h-5 ${p.icon}`}),e.jsx("div",{children:e.jsx("p",{className:`text-sm font-medium ${p.message}`,children:c.message})})]}),e.jsx("div",{className:"flex items-center space-x-2",children:s&&e.jsx("button",{onClick:s,className:`${p.closeButton} transition-colors`,children:e.jsx(Ze,{className:"w-4 h-4"})})})]})});let u=c.message;return c.details&&(c.message.endsWith(".")||c.message.endsWith("!")||c.message.endsWith("?")?u=`${c.message} ${c.details}`:u=`${c.message}. ${c.details}`),u=u.replace(/^(Server Error|Uncaught Error|Error):\s*/i,""),u=u.trim(),e.jsx("div",{className:`${p.container} border rounded-xl p-4 ${i}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Xe,{className:`w-5 h-5 ${p.icon} flex-shrink-0 mt-0.5`}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${p.message}`,children:u}),c.action&&e.jsxs("p",{className:`text-xs ${p.action} mt-2`,children:[" ",c.action]})]}),s&&e.jsx("button",{onClick:s,className:`${p.closeButton} transition-colors ml-3`,children:e.jsx(Ze,{className:"w-4 h-4"})})]})})]})})},zo="1.0.27";function aF(){const[t,s]=C.useState({email:"",password:""}),[n,i]=C.useState(!1),[o,c]=C.useState(""),[d,m]=C.useState(""),[h,p]=C.useState(""),u=Ws(),{login:f,loginWithFacebook:g}=Dt(),{branding:y}=Ts(),[b,j]=C.useState(!1),[N,w]=C.useState(!1);C.useEffect(()=>{if(window.FB)return;const k="815755054211011";window.fbAsyncInit=function(){try{window.FB.init({appId:k,cookie:!0,xfbml:!1,version:"v19.0"}),w(!0)}catch(E){console.error("FB.init error:",E)}},function(E,D,F){const M=E.getElementsByTagName(D)[0];if(E.getElementById(F))return;const P=E.createElement(D);P.id=F,P.async=!0,P.defer=!0,P.src="https://connect.facebook.net/en_US/sdk.js",M.parentNode.insertBefore(P,M)}(document,"script","facebook-jssdk")},[]);const B=k=>{s({...t,[k.target.name]:k.target.value})},S=async k=>{k.preventDefault(),i(!0),c(""),m(""),p("");try{const E=await f(t.email,t.password);if(E.success){const{role:D}=E.data;u(D==="staff"||D==="admin"||D==="super_admin"||D==="branch_admin"?"/staff/dashboard":D==="barber"?"/barber/home":"/customer/dashboard")}else{let D=E.error||"An error occurred";D=D.replace(/^(Server Error|Uncaught Error|Error):\s*/i,""),D=D.replace(/Server\s+Error\s+Uncaught\s+Error:\s*/gi,""),D=D.trim(),c(D),m(E.details||""),p(E.action||"")}}catch{c("An unexpected error occurred. Please try again."),m("If this problem persists, please contact support.")}finally{i(!1)}},_=()=>{try{i(!0),c(""),u("/guest/booking")}catch{c("Unable to continue as guest. Please try again.")}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:`url(${jm})`,filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-1",children:e.jsx("img",{src:y?.logo_light_url||"/img/tipuno_x_logo_white.avif",alt:" Barbershop Logo",className:"w-52 h-32 object-contain"})}),e.jsx("p",{className:"text-sm font-light text-gray-400",children:"Welcome back! Please sign in to continue."})]}),e.jsx("div",{className:"bg-[#1A1A1A] backdrop-blur-xl rounded-3xl shadow-2xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"p-8",children:[o&&e.jsx("div",{className:"mb-4",children:e.jsx(x0,{error:{message:o,details:d,action:h},variant:"default",onClose:()=>{c(""),m(""),p("")}})}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{children:e.jsx("input",{type:"email",name:"email",value:t.email,onChange:B,placeholder:"Email address",required:!0,className:"w-full h-14 px-5 bg-[#2A2A2A] border border-[#3A3A3A] rounded-2xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)] transition-all duration-300 text-base text-white placeholder-gray-400"})}),e.jsx("div",{children:e.jsx("input",{type:"password",name:"password",value:t.password,onChange:B,placeholder:"Password",required:!0,className:"w-full h-14 px-5 bg-[#2A2A2A] border border-[#3A3A3A] rounded-2xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)] transition-all duration-300 text-base text-white placeholder-gray-400"})})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(Js,{to:"/auth/forgot-password",className:"text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-accent)] transition-colors active:text-[var(--color-accent)]",children:"Forgot Password?"})}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:n,className:"w-full h-14 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 active:from-[var(--color-accent)] active:brightness-75 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 disabled:transform-none text-base",children:n?"Signing In...":"Sign In"})}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",disabled:!0,className:"w-full h-12 bg-gray-600 text-gray-400 font-semibold rounded-2xl transition-all duration-200 cursor-not-allowed text-sm flex items-center justify-center gap-2 opacity-60",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{d:"M22.675 0h-21.35C.595 0 0 .594 0 1.326v21.348C0 23.406.595 24 1.325 24h11.495v-9.294H9.847v-3.622h2.973V8.413c0-2.943 1.796-4.548 4.418-4.548 1.256 0 2.336.093 2.65.135v3.07l-1.82.001c-1.428 0-1.703.679-1.703 1.675v2.197h3.406l-.444 3.622h-2.962V24h5.809C23.406 24 24 23.406 24 22.674V1.326C24 .594 23.406 0 22.675 0z"})}),"Continue with Facebook"]}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-[var(--color-primary)] text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg",children:"Coming Soon"})]})}),e.jsxs("div",{className:"pt-3",children:[e.jsx("button",{type:"button",onClick:_,disabled:n,className:"w-full h-12 bg-[#2A2A2A] hover:bg-[#3A3A3A] active:brightness-95 text-white font-semibold rounded-2xl transition-all duration-200 shadow-md hover:shadow-lg active:scale-95 disabled:cursor-not-allowed text-sm",children:"Book as Guest"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Limited access  your data wont be saved"})]}),e.jsxs("div",{className:"text-center pt-4 border-t border-[#2A2A2A]/30 mt-8",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Don't have an account? "}),e.jsx(Js,{to:"/auth/register",className:"text-sm font-semibold text-[var(--color-primary)] hover:text-[var(--color-accent)] active:text-[var(--color-accent)] transition-colors",children:"Sign up"})]})]})]})})]})}),e.jsxs("div",{className:"fixed bottom-4 right-4 text-xs text-gray-500 text-right",children:[e.jsxs("p",{children:["v",zo]}),e.jsx("p",{className:"text-gray-600",children:"Barbershop"})]})]})}function nF(){const[t,s]=C.useState({fullName:"",password:"",confirmPassword:"",mobile_number:"",email:"",birthday:""}),[n,i]=C.useState(!1),[o,c]=C.useState({}),[d,m]=C.useState(""),h=Ws(),{branding:p}=Ts(),u=De(H.services.auth.registerUser),f=N=>{const{name:w,value:B}=N.target;s({...t,[w]:B}),o[w]&&c({...o,[w]:""})},g=()=>{const N={};return t.fullName.trim()?t.fullName.trim().length<2&&(N.fullName="Full name must be at least 2 characters"):N.fullName="Full name is required",t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(N.email="Please enter a valid email address"):N.email="Email address is required",t.mobile_number.trim()?/^\+?[0-9\s\-\(\)]{7,}$/.test(t.mobile_number)||(N.mobile_number="Please enter a valid mobile number (at least 7 digits)"):N.mobile_number="Mobile number is required",t.password?t.password.length<6&&(N.password="Password must be at least 6 characters long"):N.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(N.confirmPassword="Passwords do not match"):N.confirmPassword="Please confirm your password",N},y=async N=>{N.preventDefault(),m(""),c({});const w=g();if(Object.keys(w).length>0){c(w);return}i(!0);try{const B="customer",S=Date.now().toString(36),_=t.fullName.toLowerCase().replace(/[^a-z0-9]/g,""),k=_?`${_}_${S}`:`user_${S}`;await u({username:k,password:t.password,nickname:t.fullName||void 0,mobile_number:t.mobile_number,email:t.email,birthday:t.birthday||void 0,role:B,branch_id:void 0}),m(" Registration successful! Redirecting to login..."),setTimeout(()=>{h("/auth/login")},2e3)}catch(B){console.error("Registration error:",B);let S={message:"An unexpected error occurred. Please try again.",details:"Please try again or contact support if the problem persists.",action:"",code:""};try{if(B?.message)try{const _=JSON.parse(B.message);_.message&&_.code&&(S=_)}catch{const k=B.message.toLowerCase();k.includes("email")&&(k.includes("already exists")||k.includes("exists"))?(S={message:"An account with this email already exists.",details:"This email address is already registered in our system.",action:"Try signing in instead, or use a different email address.",code:"AUTH_EMAIL_EXISTS"},c({email:S.message})):k.includes("username")&&(k.includes("already exists")||k.includes("taken"))?(S={message:"This username is already taken.",details:"Someone else is already using this username.",action:"Please choose a different name.",code:"AUTH_USERNAME_EXISTS"},c({fullName:S.message})):k.includes("branch")&&k.includes("required")?S={message:"Registration failed.",details:"Branch assignment is required for this account type.",action:"Please contact support for assistance.",code:"VALIDATION_ERROR"}:S.message=B.message}}catch(_){console.error("Error parsing registration error:",_)}!o.email&&!o.fullName&&c({general:S.message})}finally{i(!1)}},b=N=>o[N],j=N=>!!o[N];return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:`url(${jm})`,filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-1",children:e.jsx("img",{src:p?.logo_light_url,alt:" Barbershop Logo",className:"w-52 h-32 object-contain"})}),e.jsx("p",{className:"text-sm font-light text-gray-400",children:"Create your account to get started"})]}),e.jsx("div",{className:"bg-[#1A1A1A] backdrop-blur-xl rounded-3xl shadow-2xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"p-6",children:[o.general&&e.jsxs("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/30 rounded-xl flex items-start space-x-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-red-300 font-medium",children:"Registration Error"}),e.jsx("p",{className:"text-xs text-red-200 mt-1",children:o.general})]})]}),d&&e.jsxs("div",{className:"mb-4 p-4 bg-green-500/10 border border-green-500/30 rounded-xl flex items-start space-x-3",children:[e.jsx(Je,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-green-300 font-medium",children:d})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"fullName",value:t.fullName,onChange:f,placeholder:"Full Name",className:`w-full h-14 px-5 bg-[#2A2A2A] border rounded-2xl focus:outline-none focus:ring-2 transition-all duration-300 text-base text-white placeholder-gray-400 ${j("fullName")?"border-red-500/50 focus:ring-red-500/50 focus:border-red-500":"border-[#3A3A3A] focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)]"}`}),b("fullName")&&e.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),e.jsx("span",{children:b("fullName")})]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",name:"email",value:t.email,onChange:f,placeholder:"Email address",className:`w-full h-14 px-5 bg-[#2A2A2A] border rounded-2xl focus:outline-none focus:ring-2 transition-all duration-300 text-base text-white placeholder-gray-400 ${j("email")?"border-red-500/50 focus:ring-red-500/50 focus:border-red-500":"border-[#3A3A3A] focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)]"}`}),b("email")&&e.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),e.jsx("span",{children:b("email")})]})]}),e.jsxs("div",{children:[e.jsx("input",{type:"tel",name:"mobile_number",value:t.mobile_number,onChange:f,placeholder:"Mobile number",className:`w-full h-14 px-5 bg-[#2A2A2A] border rounded-2xl focus:outline-none focus:ring-2 transition-all duration-300 text-base text-white placeholder-gray-400 ${j("mobile_number")?"border-red-500/50 focus:ring-red-500/50 focus:border-red-500":"border-[#3A3A3A] focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)]"}`}),b("mobile_number")&&e.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),e.jsx("span",{children:b("mobile_number")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date of Birth (Optional)"}),e.jsx("input",{type:"date",name:"birthday",value:t.birthday,onChange:f,className:"w-full h-14 px-5 bg-[#2A2A2A] border border-[#3A3A3A] rounded-2xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)] transition-all duration-300 text-base text-white"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",name:"password",value:t.password,onChange:f,placeholder:"Password",className:`w-full h-14 px-5 bg-[#2A2A2A] border rounded-2xl focus:outline-none focus:ring-2 transition-all duration-300 text-base text-white placeholder-gray-400 ${j("password")?"border-red-500/50 focus:ring-red-500/50 focus:border-red-500":"border-[#3A3A3A] focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)]"}`}),b("password")&&e.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),e.jsx("span",{children:b("password")})]}),!b("password")&&t.password&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:" Password requirements met"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:f,placeholder:"Confirm password",className:`w-full h-14 px-5 bg-[#2A2A2A] border rounded-2xl focus:outline-none focus:ring-2 transition-all duration-300 text-base text-white placeholder-gray-400 ${j("confirmPassword")?"border-red-500/50 focus:ring-red-500/50 focus:border-red-500":"border-[#3A3A3A] focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)]"}`}),b("confirmPassword")&&e.jsxs("p",{className:"text-xs text-red-400 mt-1 flex items-center space-x-1",children:[e.jsx(Xe,{className:"w-3 h-3"}),e.jsx("span",{children:b("confirmPassword")})]}),!b("confirmPassword")&&t.confirmPassword&&t.password===t.confirmPassword&&e.jsx("p",{className:"text-xs text-green-400 mt-1",children:" Passwords match"})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:n,className:"w-full h-14 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 active:from-[var(--color-accent)] active:brightness-75 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 disabled:transform-none text-base",children:n?"Creating Account...":"Create Account"})}),e.jsxs("div",{className:"text-center pt-4 border-t border-[#2A2A2A]/30 mt-6",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Already have an account? "}),e.jsx(Js,{to:"/auth/login",className:"text-sm font-semibold text-[var(--color-primary)] hover:text-[var(--color-accent)] active:text-[var(--color-accent)] transition-colors",children:"Sign In"})]})]})]})})]})})]})}function iF(){const[t,s]=C.useState(""),[n,i]=C.useState(!1),{requestPasswordReset:o}=Dt(),c=wi(),{branding:d}=Ts(),m=async h=>{h.preventDefault(),i(!0);try{const p=await o(t);p.success?c.success("Reset link sent","If the email exists, we sent instructions to your email."):c.error("Request failed",p.error||"Please try again")}catch(p){console.error("Password reset request error:",p),p.message&&p.message.includes("development mode")?c.error("Service unavailable","Email service is currently in development mode. Please contact support."):c.error("Request failed",p.message||"Please try again")}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:`url(${jm})`,filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-1",children:e.jsx("img",{src:d?.logo_light_url,alt:" Barbershop Logo",className:"w-52 h-32 object-contain"})}),e.jsx("p",{className:"text-sm font-light text-gray-400",children:"Forgot your password? We'll help you reset it with email instructions."})]}),e.jsx("div",{className:"bg-[#1A1A1A] backdrop-blur-xl rounded-3xl shadow-2xl border border-[#2A2A2A]/50",children:e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"email",name:"email",value:t,onChange:h=>s(h.target.value),placeholder:"Email address",required:!0,className:"w-full h-14 px-5 bg-[#2A2A2A] border border-[#3A3A3A] rounded-2xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)] transition-all duration-300 text-base text-white placeholder-gray-400"})}),e.jsx("button",{type:"submit",disabled:n,className:"w-full h-14 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 active:from-[var(--color-accent)] active:brightness-75 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 disabled:transform-none text-base",children:n?"Sending...":"Send Reset Link"}),e.jsx("div",{className:"text-center pt-2",children:e.jsx(Js,{to:"/auth/login",className:"text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-accent)] transition-colors",children:"Back to Sign In"})})]})})})]})})]})}function oF(){const[t]=mm(),[s,n]=C.useState(""),[i,o]=C.useState(""),[c,d]=C.useState(!1),[m,h]=C.useState(""),{resetPassword:p}=Dt(),u=wi(),f=Ws(),{branding:g}=Ts();C.useEffect(()=>{const b=t.get("token")||"";h(b)},[t]);const y=async b=>{if(b.preventDefault(),!m){u.error("Invalid link","Reset token is missing");return}if(s.length<6){u.warning("Weak password","Use at least 6 characters");return}if(s!==i){u.error("Mismatch","Passwords do not match");return}d(!0);try{const j=await p(m,s);if(j.success)u.success("Password reset","You can now sign in with your new password"),f("/auth/login");else{let N=j.error||"Failed to reset password";(N.toLowerCase().includes("expired")||N.toLowerCase().includes("invalid"))&&(N="Your password reset link has expired or is invalid. Please request a new one."),u.error("Reset failed",N)}}catch(j){console.error("Reset password error:",j);let N="Failed to reset password. Please try again.";if(j?.message)try{const w=JSON.parse(j.message);w.message&&(N=w.message)}catch{j.message.toLowerCase().includes("expired")||j.message.toLowerCase().includes("invalid")?N="Your password reset link has expired or is invalid. Please request a new one.":N=j.message}u.error("Reset failed",N)}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:`url(${jm})`,filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-1",children:e.jsx("img",{src:g?.logo_light_url,alt:" Barbershop Logo",className:"w-52 h-32 object-contain"})}),e.jsx("p",{className:"text-sm font-light text-gray-400",children:"Enter your new password below."})]}),e.jsx("div",{className:"bg-[#1A1A1A] backdrop-blur-xl rounded-3xl shadow-2xl border border-[#2A2A2A]/50",children:e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsx("div",{children:e.jsx("input",{type:"password",name:"password",value:s,onChange:b=>n(b.target.value),placeholder:"New password",required:!0,className:"w-full h-14 px-5 bg-[#2A2A2A] border border-[#3A3A3A] rounded-2xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)] transition-all duration-300 text-base text-white placeholder-gray-400"})}),e.jsx("div",{children:e.jsx("input",{type:"password",name:"confirm",value:i,onChange:b=>o(b.target.value),placeholder:"Confirm new password",required:!0,className:"w-full h-14 px-5 bg-[#2A2A2A] border border-[#3A3A3A] rounded-2xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)] transition-all duration-300 text-base text-white placeholder-gray-400"})}),e.jsx("button",{type:"submit",disabled:c,className:"w-full h-14 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 active:from-[var(--color-accent)] active:brightness-75 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 disabled:transform-none text-base",children:c?"Resetting...":"Reset Password"}),e.jsx("div",{className:"text-center pt-2",children:e.jsx(Js,{to:"/auth/login",className:"text-sm font-medium text-[var(--color-primary)] hover:text-[var(--color-accent)] transition-colors",children:"Back to Sign In"})})]})})})]})})]})}const Fo=({size:t="md",message:s=null,variant:n="primary",className:i=""})=>{const o={xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},c={primary:"border-[var(--color-primary)]",white:"border-white",gray:"border-gray-400"};return e.jsxs("div",{className:`flex items-center justify-center ${i}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`${o[t]} rounded-full border-2 border-gray-600 border-t-${c[n]} animate-spin`}),(t==="lg"||t==="xl")&&e.jsx("div",{className:`absolute inset-1 rounded-full border border-transparent border-t-${c[n]} animate-spin opacity-60`,style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),s&&e.jsx("span",{className:"ml-3 text-gray-300 text-sm font-medium",children:s})]})};function lF(){const t=Ws(),{loginWithFacebook:s}=Dt(),[n,i]=C.useState(""),[o,c]=C.useState(!0);return C.useEffect(()=>{const d=window.location.hash||"",m=new URLSearchParams(d.startsWith("#")?d.slice(1):d),h=m.get("access_token"),p=m.get("error");async function u(){try{if(p){i("Facebook authorization was cancelled or failed"),c(!1);return}if(!h){i("No access token returned from Facebook"),c(!1);return}const f=await s(h);if(f.success)t("/customer/dashboard");else{let g=f.error||"Facebook login failed";g.toLowerCase().includes("invalid")||g.toLowerCase().includes("expired")?g="Facebook authentication failed. The login token is invalid or expired. Please try again.":g.toLowerCase().includes("development")&&(g="Facebook login is currently unavailable. Please use email/password login instead."),i(g)}}catch(f){console.error("Facebook login error:",f);let g="Facebook login error. Please try again.";if(f?.message)try{const y=JSON.parse(f.message);y.message&&(g=y.message)}catch{f.message.toLowerCase().includes("invalid")||f.message.toLowerCase().includes("expired")?g="Facebook authentication failed. Please try logging in again.":g=f.message||g}i(g)}finally{c(!1)}}u()},[s,t]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-sm p-6",children:[o&&e.jsxs("div",{className:"flex flex-col items-center gap-4 text-white",children:[e.jsx(Fo,{}),e.jsx("span",{children:"Completing Facebook sign-in"})]}),!!n&&e.jsx(x0,{error:n,onClose:()=>i("")})]})})}const cF=({isOpen:t,onClose:s,onSave:n,currentBranch:i,user:o})=>{const[c,d]=C.useState("general"),[m,h]=C.useState({emailNotifications:!0,smsNotifications:!1,bookingReminders:!0,paymentNotifications:!0,compactView:!1,showTutorials:!0,sessionTimeout:"60",autoLogout:!0,bookingStartHour:10,bookingEndHour:20,carouselImages:[]}),[p,u]=C.useState(!1),[f,g]=C.useState(""),[y,b]=C.useState(""),[j,N]=C.useState(!1),w=De(H.services.branches.updateBranch),B=["/carousel/IMG_0154-min.JPG","/carousel/IMG_0155-min.JPG","/carousel/IMG_0164-min.JPG","/carousel/IMG_0165-min.JPG","/carousel/IMG_0166-min.JPG"];C.useEffect(()=>{t&&i&&h(T=>({...T,bookingStartHour:i.booking_start_hour??10,bookingEndHour:i.booking_end_hour??20,carouselImages:i.carousel_images&&i.carousel_images.length>0?i.carousel_images:B}))},[t,i]);const S=(T,L)=>{h(X=>({...X,[T]:L}))},_=(T,L)=>{h(X=>({...X,[T]:L}))},k=T=>{const L=T.target.files[0];if(!L)return;if(!L.type.startsWith("image/")){g("Please upload an image file");return}if(L.size>5*1024*1024){g("Image size must be less than 5MB");return}N(!0);const X=new FileReader;X.onloadend=()=>{const Z=X.result;h(ne=>({...ne,carouselImages:[...ne.carouselImages,Z]})),N(!1),T.target.value=""},X.readAsDataURL(L)},E=T=>{h(L=>({...L,carouselImages:L.carouselImages.filter((X,Z)=>Z!==T)}))},D=T=>{T.trim()&&h(L=>({...L,carouselImages:[...L.carouselImages,T.trim()]}))},F=async()=>{if(i&&(o?.role==="branch_admin"||o?.role==="super_admin"||o?.role==="staff")){u(!0),g(""),b("");try{await w({id:i._id,booking_start_hour:m.bookingStartHour,booking_end_hour:m.bookingEndHour,carousel_images:m.carouselImages.length>0?m.carouselImages:B}),b("Settings updated successfully!"),setTimeout(()=>{n?.(m),s()},1500)}catch(T){console.error("Error updating settings:",T),g(T.message||"Failed to update settings"),u(!1)}}else n?.(m),s()},M=()=>{h({emailNotifications:!0,smsNotifications:!1,bookingReminders:!0,paymentNotifications:!0,compactView:!1,showTutorials:!0,sessionTimeout:"60",autoLogout:!0,bookingStartHour:10,bookingEndHour:20,carouselImages:B}),g(""),b("")};if(!t)return null;const P=[{id:"general",label:"General",icon:Gs},{id:"notifications",label:"Notifications",icon:Is},{id:"display",label:"Display",icon:r0},{id:"carousel",label:"Carousel",icon:On}];return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-4xl transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Lr,{className:"w-5 h-5 text-[var(--color-primary)]"}),"Settings"]}),e.jsx("button",{onClick:s,className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"flex border-b border-[#2A2A2A]/50 px-6",children:P.map(T=>{const L=T.icon;return e.jsxs("button",{onClick:()=>d(T.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors border-b-2 ${c===T.id?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-400 hover:text-gray-300"}`,children:[e.jsx(L,{className:"w-4 h-4"}),T.label]},T.id)})}),e.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f&&e.jsx("div",{className:"p-3 bg-red-400/20 border border-red-400/30 rounded-lg text-sm text-red-400 mb-4",children:f}),y&&e.jsxs("div",{className:"p-3 bg-green-400/20 border border-green-400/30 rounded-lg text-sm text-green-400 flex items-center gap-2 mb-4",children:[e.jsx("span",{children:""})," ",y]}),c==="general"&&i&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(Gs,{className:"w-4 h-4 text-[var(--color-primary)]"}),"Branch Booking Hours"]}),e.jsxs("div",{className:"bg-[#232323] rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Configure available booking hours for ",i.name]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Start Time"}),e.jsx("select",{value:m.bookingStartHour,onChange:T=>S("bookingStartHour",parseInt(T.target.value)),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:Array.from({length:24},(T,L)=>e.jsx("option",{value:L,children:L===0?"12:00 AM":L<12?`${L}:00 AM`:L===12?"12:00 PM":`${L-12}:00 PM`},L))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"End Time"}),e.jsx("select",{value:m.bookingEndHour,onChange:T=>S("bookingEndHour",parseInt(T.target.value)),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:Array.from({length:24},(T,L)=>e.jsx("option",{value:L,children:L===0?"12:00 AM":L<12?`${L}:00 AM`:L===12?"12:00 PM":`${L-12}:00 PM`},L))})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These hours determine when customers can book appointments at this branch."})]})]})}),c==="notifications"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(Is,{className:"w-4 h-4 text-[var(--color-primary)]"}),"Notifications"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-[#232323] cursor-pointer transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Email Notifications"}),e.jsx("input",{type:"checkbox",checked:m.emailNotifications,onChange:T=>_("emailNotifications",T.target.checked),className:"w-4 h-4 text-[var(--color-primary)] rounded cursor-pointer"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-[#232323] cursor-pointer transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"SMS Notifications"}),e.jsx("input",{type:"checkbox",checked:m.smsNotifications,onChange:T=>_("smsNotifications",T.target.checked),className:"w-4 h-4 text-[var(--color-primary)] rounded cursor-pointer"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-[#232323] cursor-pointer transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Booking Reminders"}),e.jsx("input",{type:"checkbox",checked:m.bookingReminders,onChange:T=>_("bookingReminders",T.target.checked),className:"w-4 h-4 text-[var(--color-primary)] rounded cursor-pointer"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-[#232323] cursor-pointer transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Payment Notifications"}),e.jsx("input",{type:"checkbox",checked:m.paymentNotifications,onChange:T=>_("paymentNotifications",T.target.checked),className:"w-4 h-4 text-[var(--color-primary)] rounded cursor-pointer"})]})]})]}),c==="display"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(r0,{className:"w-4 h-4 text-[var(--color-primary)]"}),"Display"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-[#232323] cursor-pointer transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Compact View"}),e.jsx("input",{type:"checkbox",checked:m.compactView,onChange:T=>_("compactView",T.target.checked),className:"w-4 h-4 text-[var(--color-primary)] rounded cursor-pointer"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-[#232323] cursor-pointer transition-colors",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Show Tutorials"}),e.jsx("input",{type:"checkbox",checked:m.showTutorials,onChange:T=>_("showTutorials",T.target.checked),className:"w-4 h-4 text-[var(--color-primary)] rounded cursor-pointer"})]})]})]}),c==="carousel"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(On,{className:"w-4 h-4 text-[var(--color-primary)]"}),"Carousel Banner Settings"]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Manage carousel images displayed on the client dashboard. Minimum 5 images recommended."}),e.jsxs("div",{className:"bg-[#232323] rounded-lg p-4 space-y-3",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Upload Image"}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("label",{className:"flex-1 cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",disabled:j}),e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg hover:bg-[#2A2A2A] transition-colors",children:[e.jsx(ji,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:j?"Uploading...":"Choose File"})]})]})})]}),e.jsxs("div",{className:"bg-[#232323] rounded-lg p-4 space-y-3",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Add Image URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"https://example.com/image.jpg",className:"flex-1 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",onKeyPress:T=>{T.key==="Enter"&&(D(T.target.value),T.target.value="")}}),e.jsx("button",{onClick:T=>{const L=T.target.previousElementSibling;L&&(D(L.value),L.value="")},className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-colors",children:e.jsx(cs,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:m.carouselImages.map((T,L)=>e.jsxs("div",{className:"relative group bg-[#232323] rounded-lg overflow-hidden",children:[e.jsx("img",{src:T,alt:`Carousel ${L+1}`,className:"w-full h-32 object-cover",onError:X=>{X.target.src="/carousel/IMG_0154-min.JPG"}}),e.jsx("button",{onClick:()=>E(L),className:"absolute top-2 right-2 w-8 h-8 bg-red-500/80 hover:bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(js,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 p-2",children:e.jsxs("p",{className:"text-xs text-white truncate",children:[T.substring(0,30),"..."]})})]},L))}),m.carouselImages.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No carousel images. Add images to display on the client dashboard."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-[#2A2A2A]/50",children:[e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-400 hover:text-[var(--color-primary)] transition-colors duration-200",children:[e.jsx(Ps,{className:"w-4 h-4"}),"Reset"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#555555]/70 transition-all duration-200 text-sm font-medium",children:"Cancel"}),e.jsx("button",{onClick:F,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 text-sm font-medium",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]})})]})]})]})]})}),document.body)},ns=({isOpen:t,onClose:s,title:n,children:i,size:o="md",variant:c="light",compact:d=!1})=>{if(!t)return null;const m={xs:"max-w-sm",sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",compact:"max-w-sm",balanced:"max-w-lg"},h=c==="dark",p=`${h?"bg-gradient-to-br from-[#1E1E1E] to-[#2A2A2A] border border-[#333333]/60":"bg-white"} relative w-full ${m[o]} transform lg:rounded-3xl shadow-2xl transition-all z-[10000] lg:max-h-[90vh] max-h-screen overflow-hidden flex flex-col`,u=h?`flex items-center justify-between ${d?"p-4 lg:p-5":"p-4 lg:p-8"} border-b border-[#2F2F2F] flex-shrink-0`:`flex items-center justify-between ${d?"p-4 lg:p-5":"p-4 lg:p-8"} border-b border-[#F5F5F5] flex-shrink-0`,f=h?"text-lg lg:text-2xl font-black text-white":"text-lg lg:text-2xl font-black text-[#1A1A1A]",g=h?"w-9 h-9 lg:w-10 lg:h-10 rounded-xl lg:rounded-2xl bg-[#2A2A2A] hover:bg-[var(--color-primary)]/10 flex items-center justify-center transition-colors duration-200 flex-shrink-0":"w-9 h-9 lg:w-10 lg:h-10 rounded-xl lg:rounded-2xl bg-[#F5F5F5] hover:bg-[var(--color-primary)]/10 flex items-center justify-center transition-colors duration-200 flex-shrink-0",y=h?"w-5 h-5 text-gray-300 hover:text-[var(--color-primary)]":"w-5 h-5 text-[#6B6B6B] hover:text-[var(--color-primary)]",b=d?"p-4 lg:p-5":"p-4 lg:p-8";return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-end lg:items-center justify-center lg:p-2",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),e.jsxs("div",{className:p,children:[n&&e.jsxs("div",{className:u,children:[e.jsx("h2",{className:f,children:n}),e.jsx("button",{onClick:s,className:g,children:e.jsx(Ze,{className:y})})]}),e.jsx("div",{className:`${n?b:"p-0"} overflow-y-auto flex-1`,children:i})]})]})}),document.body)},dF=({isOpen:t,onClose:s,onConfirm:n})=>{const i=()=>{n(),s()};return e.jsx(ns,{isOpen:t,onClose:s,title:null,size:"xs",children:e.jsxs("div",{className:"text-center p-6 relative",children:[e.jsx("button",{onClick:s,className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-500"})}),e.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-full flex items-center justify-center mb-4",children:e.jsx(Mn,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-[#1A1A1A] mb-2",children:"Sign Out?"}),e.jsx("p",{className:"text-sm text-[#6B6B6B]",children:"You'll need to sign in again to access the dashboard."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:s,className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium rounded-lg transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:i,className:"flex-1 py-2 px-4 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white hover:from-[var(--color-accent)] hover:brightness-110 font-medium rounded-lg transition-all duration-200",children:"Sign Out"})]})]})})},xF=({isOpen:t,onClose:s,user:n,sessionToken:i})=>{const[o,c]=C.useState(!1),[d,m]=C.useState(!1),[h,p]=C.useState(null),[u,f]=C.useState(!1),[g,y]=C.useState({nickname:n?.nickname||"",mobile_number:n?.mobile_number||""}),b=De(H.services.auth.updateUserProfile),j=(B,S)=>{y(_=>({..._,[B]:S})),p(null)},N=C.useCallback(async()=>{if(p(null),f(!1),!i){p("Session expired. Please refresh the page.");return}if(g.mobile_number&&!/^\+?[0-9\s\-\(\)]{7,}$/.test(g.mobile_number)){p("Invalid mobile number format");return}if(g.nickname&&g.nickname.length>100){p("Nickname must be less than 100 characters");return}try{m(!0),await b({sessionToken:i,nickname:g.nickname||void 0,mobile_number:g.mobile_number||void 0}),f(!0),c(!1),setTimeout(()=>f(!1),3e3)}catch(B){const S=B.message||"Failed to update profile";p(S),console.error("Profile update error:",B)}finally{m(!1)}},[g,i,b]),w=()=>{y({nickname:n?.nickname||"",mobile_number:n?.mobile_number||""}),c(!1),p(null),f(!1)};return!n||!t?null:Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-2xl transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center text-white text-2xl font-bold",children:n.username?n.username.charAt(0).toUpperCase():"U"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:n.nickname||n.username}),e.jsxs("p",{className:"text-sm text-gray-400",children:["@",n.username]})]})]}),e.jsx("button",{onClick:s,className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto space-y-4",children:[h&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-3",children:[e.jsx(Xe,{className:"w-4 h-4 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-red-300",children:h})]}),u&&e.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/30 flex items-start gap-3",children:[e.jsx(Je,{className:"w-4 h-4 text-green-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-green-300",children:"Profile updated successfully!"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium text-white ${n.role==="super_admin"?"bg-purple-500/20 border border-purple-500/50":n.role==="branch_admin"?"bg-blue-500/20 border border-blue-500/50":n.role==="staff"?"bg-green-500/20 border border-green-500/50":n.role==="barber"?"bg-yellow-500/20 border border-yellow-500/50":"bg-gray-500/20 border border-gray-500/50"}`,children:[e.jsx(Ni,{className:"w-3 h-3 mr-1"}),n.role.replace("_"," ").toUpperCase()]}),n.is_active&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium text-white bg-green-500/20 border border-green-500/50",children:"Active"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4 text-[var(--color-primary)]"}),"Contact"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-[#0F0F0F] border border-[#2A2A2A]/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-300 font-mono",children:n.email||"N/A"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-[#0F0F0F] border border-[#2A2A2A]/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Mobile"}),o?e.jsx("input",{type:"tel",value:g.mobile_number,onChange:B=>j("mobile_number",B.target.value),placeholder:"09123456789",className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded px-2 py-1 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"}):e.jsx("p",{className:"text-sm text-gray-300",children:n.mobile_number||"N/A"})]})]})]}),e.jsx("div",{className:"h-px bg-[#2A2A2A]/50"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(tt,{className:"w-4 h-4 text-[var(--color-primary)]"}),"Personal"]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"p-3 rounded-lg bg-[#0F0F0F] border border-[#2A2A2A]/50",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Nickname"}),o?e.jsx("input",{type:"text",value:g.nickname,onChange:B=>j("nickname",B.target.value),placeholder:"Your preferred name",className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded px-2 py-1 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"}):e.jsx("p",{className:"text-sm text-gray-300",children:n.nickname||"Not set"})]})})]}),e.jsx("div",{className:"h-px bg-[#2A2A2A]/50"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 flex items-center gap-2",children:[e.jsx(D3,{className:"w-4 h-4 text-[var(--color-primary)]"}),"Account"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[e.jsx("p",{className:"text-xs text-blue-300 mb-1",children:"ID"}),e.jsx("p",{className:"text-xs font-mono text-gray-300 truncate",title:n._id,children:n._id?`${n._id.substring(0,6)}...`:"N/A"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/20",children:[e.jsx("p",{className:"text-xs text-green-300 mb-1",children:"Status"}),e.jsx("p",{className:"text-xs font-semibold text-green-300",children:n.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[e.jsx("p",{className:"text-xs text-purple-300 mb-1",children:"Verified"}),e.jsx("p",{className:"text-xs font-semibold text-purple-300",children:n.isVerified?"Yes":"No"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-[#2A2A2A]/50",children:[e.jsx("button",{onClick:()=>o?w():c(!0),disabled:d,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${o?"bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 hover:bg-[#555555]/70 disabled:opacity-50":"bg-[var(--color-primary)] text-white hover:bg-[var(--color-primary)]/90 disabled:opacity-50"}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4"}),"Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(sa,{className:"w-4 h-4"}),"Edit"]})}),o&&e.jsx("button",{onClick:N,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/30 border-t-white animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-4 h-4"}),"Save"]})})]})]})]})}),document.body)},uF={booking:rt,payment:ds,system:Ir,promotion:Qt,reminder:Nt,alert:Ea},mj={low:"text-blue-400",medium:"text-yellow-400",high:"text-orange-400",urgent:"text-red-400"},hj={booking:"bg-blue-500/20 border-blue-500/50",payment:"bg-green-500/20 border-green-500/50",system:"bg-gray-500/20 border-gray-500/50",promotion:"bg-purple-500/20 border-purple-500/50",reminder:"bg-yellow-500/20 border-yellow-500/50",alert:"bg-red-500/20 border-red-500/50"},mF=({notification:t,onMarkAsRead:s,onDelete:n,userRole:i})=>{const[o,c]=C.useState(!1),d=uF[t.type]||Ir,m=mj[t.priority]||mj.medium,h=hj[t.type]||hj.system,p=f=>{const y=Date.now()-f,b=Math.floor(y/(1e3*60)),j=Math.floor(y/(1e3*60*60)),N=Math.floor(y/(1e3*60*60*24));return b<1?"Just now":b<60?`${b}m ago`:j<24?`${j}h ago`:N<7?`${N}d ago`:new Date(f).toLocaleDateString()},u=()=>{t.action_url&&(window.location.href=t.action_url)};return e.jsxs(ca.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`relative p-3 rounded-lg border backdrop-blur-sm transition-all duration-200 cursor-pointer
        ${t.is_read?"bg-[#2A2A2A]/50 border-[#444444]/30 hover:bg-[#333333]/70":"bg-gradient-to-r from-[#333333] to-[#3A3A3A] border-[var(--color-primary)]/30 hover:border-[var(--color-primary)]/50 hover:shadow-lg hover:shadow-[var(--color-primary)]/10"}
        ${h}
      `,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClick:()=>!t.is_read&&s(t._id),children:[!t.is_read&&e.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-[var(--color-primary)] rounded-full animate-pulse shadow-lg shadow-[var(--color-primary)]/30"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-md ${h} border ${t.is_read?"opacity-60":""} flex-shrink-0`,children:e.jsx(d,{className:`${m} ${t.is_read?"opacity-70":""}`,size:14})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold text-sm leading-tight ${t.is_read?"text-gray-300":"text-white"} truncate`,children:t.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-0.5",children:[e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:p(t.createdAt)}),e.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t.is_read?"bg-gray-500/20 text-gray-400":"bg-[var(--color-primary)]/20 text-[var(--color-primary)]"}`,children:t.type})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2 flex-shrink-0",children:[!t.is_read&&e.jsx("button",{onClick:f=>{f.stopPropagation(),s(t._id)},className:"p-1 text-gray-400 hover:text-[var(--color-primary)] transition-colors rounded hover:bg-[var(--color-primary)]/10",title:"Mark as read",children:e.jsx(hr,{size:12})}),o&&e.jsx("button",{onClick:f=>{f.stopPropagation(),n(t._id)},className:"p-1 text-gray-400 hover:text-red-400 transition-colors rounded hover:bg-red-500/10",title:"Delete notification",children:e.jsx(Ze,{size:12})})]})]}),e.jsx("p",{className:`text-xs leading-relaxed mb-1 ${t.is_read?"text-gray-400":"text-gray-300"} line-clamp-2`,children:t.message}),t.action_label&&i==="customer"&&e.jsxs(ca.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-md
                bg-[var(--color-primary)] hover:bg-[var(--color-primary)]/90 text-white transition-all duration-200 shadow-lg shadow-[var(--color-primary)]/20`,children:[t.action_label,e.jsx("span",{className:"ml-1",children:""})]})]})]})]})},xg=({userId:t,className:s="",onOpenModal:n})=>{const i=me(H.services.bookingNotifications.getNotificationStats,{userId:t});return e.jsxs(ca.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:`relative p-1.5 sm:p-2 text-gray-400 hover:text-white transition-colors rounded-lg sm:rounded-xl hover:bg-white/10 touch-manipulation w-9 h-9 sm:w-10 sm:h-10 md:w-11 md:h-11 flex items-center justify-center ${s}`,children:[e.jsx(Is,{className:"w-4 h-4 sm:w-4 sm:h-4 md:w-5 md:h-5"}),i&&i.unreadCount>0&&e.jsx(ca.div,{initial:{scale:0},animate:{scale:1},className:`absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 min-w-[16px] h-[16px] sm:min-w-[18px] sm:h-[18px] bg-[var(--color-primary)] text-white text-[10px] sm:text-xs
            font-semibold rounded-full flex items-center justify-center px-0.5 sm:px-1 shadow-lg`,children:i.unreadCount>99?"99+":i.unreadCount})]})},hF=({userId:t,isOpen:s,onClose:n,userRole:i="customer"})=>{const[o,c]=C.useState("all"),[d,m]=C.useState(!1),[h,p]=C.useState(!1),u=me(H.services.bookingNotifications.getRecentNotifications,{userId:t,limit:50,type:o==="all"?void 0:o,unreadOnly:d}),f=me(H.services.bookingNotifications.getNotificationStats,{userId:t}),g=De(H.services.bookingNotifications.markNotificationsAsRead),y=De(H.services.notifications.deleteNotification),b=De(H.services.notifications.markAllAsRead);De(H.services.bookingNotifications.cleanupExpiredNotifications);const j=async _=>{try{await g({userId:t,notificationIds:[_]})}catch(k){console.error("Failed to mark notification as read:",k)}},N=async _=>{try{await y({notificationId:_,userId:t})}catch(k){console.error("Failed to delete notification:",k)}},w=async()=>{try{await b({userId:t})}catch(_){console.error("Failed to mark all as read:",_)}},B=async()=>{try{if(console.log("Clearing all notifications for user:",t),u&&u.length>0){console.log(`Deleting ${u.length} notifications...`);const _=u.map(async F=>{try{return await y({notificationId:F._id,userId:t}),{success:!0,id:F._id}}catch(M){return console.error("Failed to delete notification:",F._id,M),{success:!1,id:F._id,error:M}}}),k=await Promise.all(_),E=k.filter(F=>F.success).length,D=k.filter(F=>!F.success).length;console.log(`Clear all complete: ${E} deleted, ${D} failed`),D>0&&console.warn(`${D} notifications failed to delete`)}else console.log("No notifications to clear");p(!1)}catch(_){console.error("Failed to clear all notifications:",_),alert("Failed to clear notifications: "+_.message)}},S=[{value:"all",label:"All",count:f?.totalCount||0},{value:"booking",label:"Bookings",count:f?.byType?.booking||0},{value:"payment",label:"Payments",count:f?.byType?.payment||0},{value:"reminder",label:"Reminders",count:f?.byType?.reminder||0},{value:"alert",label:"Alerts",count:f?.byType?.alert||0}];return e.jsx(Vu,{children:s&&e.jsxs(ca.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]",onClick:n,children:[e.jsxs(ca.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:_=>_.stopPropagation(),className:"relative w-full max-w-2xl rounded-3xl shadow-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-[var(--color-primary)]/20 rounded-lg border border-[var(--color-primary)]/50",children:e.jsx(Is,{className:"text-[var(--color-primary)]",size:18})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white",children:"Notification Center"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Stay updated with real-time alerts"})]})]}),e.jsx("button",{onClick:n,className:"w-8 h-8 rounded-lg bg-[#0A0A0A] hover:bg-[#2A2A2A] flex items-center justify-center transition-colors duration-200 border border-[#2A2A2A]/50",title:"Close",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-300 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 px-4 pt-4",children:[e.jsxs("div",{className:"bg-[#0A0A0A] rounded-lg p-2 border border-[#2A2A2A]/50 text-center",children:[e.jsx("div",{className:"text-base font-bold text-white",children:f?.totalCount||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Total"})]}),e.jsxs("div",{className:"bg-[var(--color-primary)]/20 rounded-lg p-2 border border-[var(--color-primary)]/50 text-center",children:[e.jsx("div",{className:"text-base font-bold text-[var(--color-primary)]",children:f?.unreadCount||0}),e.jsx("div",{className:"text-xs text-gray-300",children:"Unread"})]}),e.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-2 border border-blue-500/50 text-center",children:[e.jsx("div",{className:"text-base font-bold text-blue-400",children:f?.byType?.booking||0}),e.jsx("div",{className:"text-xs text-blue-300",children:"Bookings"})]}),e.jsxs("div",{className:"bg-green-500/20 rounded-lg p-2 border border-green-500/50 text-center",children:[e.jsx("div",{className:"text-base font-bold text-green-400",children:f?.byType?.payment||0}),e.jsx("div",{className:"text-xs text-green-300",children:"Payments"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4 px-4",children:S.map(_=>e.jsxs("button",{onClick:()=>c(_.value),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all duration-200
                    ${o===_.value?"bg-[var(--color-primary)] text-white shadow-lg shadow-[var(--color-primary)]/20":"bg-[#0A0A0A] text-gray-300 hover:bg-[#2A2A2A] hover:text-white border border-[#2A2A2A]/50"}`,children:[_.label,_.count>0&&e.jsx("span",{className:`ml-1 text-xs px-1.5 py-0.5 rounded-full ${o===_.value?"bg-white/20 text-white":"bg-[var(--color-primary)]/20 text-[var(--color-primary)]"}`,children:_.count})]},_.value))}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-[#2A2A2A] px-4",children:[e.jsxs("label",{className:"flex items-center text-xs text-gray-400 cursor-pointer hover:text-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:_=>m(_.target.checked),className:"mr-2 w-3 h-3 accent-[var(--color-primary)] rounded"}),"Show unread only"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f&&f.totalCount>0&&e.jsx("button",{onClick:()=>p(!0),className:"px-3 py-1.5 text-xs bg-red-600/20 hover:bg-red-600/30 text-red-400 border border-red-600/50 rounded-md transition-colors font-medium",children:"Clear All"}),f&&f.unreadCount>0&&e.jsx("button",{onClick:w,className:"px-3 py-1.5 text-xs bg-[var(--color-primary)] hover:bg-[var(--color-primary)]/90 text-white rounded-md transition-colors font-medium",children:"Mark all as read"})]})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:u===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-t-2 border-[var(--color-primary)]"}),e.jsx("p",{className:"text-gray-400 text-sm mt-3",children:"Loading notifications..."})]}):u.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-400",children:[e.jsx("div",{className:"p-3 bg-[#0A0A0A] rounded-xl border border-[#2A2A2A]/50 mb-3",children:e.jsx(Is,{size:32,className:"text-gray-500"})}),e.jsx("h4",{className:"text-base font-semibold mb-2",children:"No notifications found"}),e.jsx("p",{className:"text-xs text-center max-w-sm",children:d?"No unread notifications at the moment.":"You're all caught up! Check back later for new updates."})]}):e.jsx("div",{className:"p-4 space-y-2",children:e.jsx(Vu,{mode:"wait",children:u.map(_=>e.jsx(mF,{notification:_,onMarkAsRead:j,onDelete:N,userRole:i},_._id))})})}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-3 text-gray-400",children:[e.jsx("span",{className:"text-xs",children:"Notifications expire after 7 days"}),e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("span",{className:"text-xs",children:[f?.totalCount||0," total notifications"]})]}),e.jsx("button",{onClick:n,className:"px-4 py-2 text-xs font-medium bg-[#0A0A0A] hover:bg-[#2A2A2A] text-gray-300 hover:text-white rounded-md transition-colors duration-200 border border-[#2A2A2A]/50",children:"Close"})]})]}),e.jsx(Vu,{children:h&&e.jsx(ca.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-[10000]",onClick:()=>p(!1),children:e.jsxs(ca.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:_=>_.stopPropagation(),className:"relative w-full max-w-md rounded-2xl shadow-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-600/20 rounded-lg border border-red-600/50",children:e.jsx(Ea,{className:"text-red-400",size:18})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Clear All Notifications"}),e.jsx("p",{className:"text-xs text-gray-400",children:"This action cannot be undone"})]})]}),e.jsx("button",{onClick:()=>p(!1),className:"w-6 h-6 rounded-lg bg-[#0A0A0A] hover:bg-[#2A2A2A] flex items-center justify-center transition-colors duration-200 border border-[#2A2A2A]/50",children:e.jsx(Ze,{className:"w-3 h-3 text-gray-300 hover:text-red-400"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Are you sure you want to delete all notifications? This will permanently remove:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 ml-4",children:[e.jsxs("li",{children:[" ",f?.totalCount||0," total notifications"]}),e.jsxs("li",{children:[" ",f?.unreadCount||0," unread notifications"]}),e.jsx("li",{children:" All notification history"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-xs font-medium bg-[#0A0A0A] hover:bg-[#2A2A2A] text-gray-300 hover:text-white rounded-md transition-colors duration-200 border border-[#2A2A2A]/50",children:"Cancel"}),e.jsx("button",{onClick:B,className:"px-4 py-2 text-xs font-medium bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors duration-200",children:"Clear All"})]})]})]})})})]})})},U3=document.createElement("style");U3.textContent=`
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
`;document.head.appendChild(U3);const pF=({onLogout:t,user:s,onOpenNotifications:n})=>{const{sessionToken:i}=Dt(),{branding:o}=Ts(),[c,d]=C.useState(!1),[m,h]=C.useState(!1),[p,u]=C.useState(!1),[f,g]=C.useState(!1),b=(me(H.services.branches.getAllBranches)||[]).find(N=>N._id===s?.branch_id);C.useEffect(()=>{if(f)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[f]);const j=N=>{g(!1),N==="profile"&&u(!0),N==="settings"&&d(!0),N==="logout"&&h(!0)};return e.jsxs("div",{className:"relative bg-[#050505] border-b border-[#1A1A1A]/30 overflow-hidden",style:{paddingTop:"env(safe-area-inset-top)"},children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-[0.02]",style:{backgroundImage:o?.logo_dark_url?`url(${o.logo_dark_url})`:"",filter:"brightness(0.2)"}})}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-4 md:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-2.5 md:py-3 gap-1.5 sm:gap-2 md:gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2 md:space-x-3 min-w-0 flex-1",children:[e.jsx("img",{src:o?.logo_light_url,alt:o?.display_name||"Logo",className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 lg:w-11 lg:h-11 object-contain flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-1.5 md:space-x-2 flex-wrap",children:[e.jsxs("h1",{className:"text-[11px] sm:text-sm md:text-base lg:text-lg font-bold text-[var(--color-primary)] tracking-tight truncate",children:[e.jsx("span",{className:"hidden md:inline",children:o?.display_name||""}),e.jsx("span",{className:"hidden sm:inline md:hidden",children:o?.display_name||""}),e.jsx("span",{className:"sm:hidden",children:o?.display_name||""})]}),e.jsx("div",{className:"bg-[var(--color-primary)]/15 backdrop-blur-sm rounded-md px-1 sm:px-1.5 py-0.5 border border-[var(--color-primary)]/25 flex-shrink-0 hidden sm:block",children:e.jsxs("span",{className:"text-[9px] sm:text-[10px] font-semibold text-[var(--color-primary)]",children:["v",zo]})})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-1.5 mt-0.5 flex-wrap",children:[e.jsx("p",{className:"text-[9px] sm:text-[10px] md:text-xs font-medium text-[var(--color-primary)] hidden sm:inline",children:"Staff Dashboard"}),b&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-600 text-xs hidden md:inline",children:""}),e.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[e.jsx(Gs,{className:"w-2.5 h-2.5 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-[10px] font-medium text-gray-400 truncate max-w-[120px] lg:max-w-none",children:b.name}),e.jsxs("span",{className:"text-[10px] text-gray-500 hidden lg:inline",children:["(",b.branch_code,")"]})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 md:gap-2 lg:gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"hidden xl:block text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Welcome back, Staff"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-1.5",children:[s?.role!=="branch_owner"&&e.jsxs(e.Fragment,{children:[e.jsxs(Js,{to:"/staff/pos",className:"bg-green-500/15 backdrop-blur-sm rounded-xl flex items-center justify-start space-x-1 px-3 py-2 hover:bg-green-500/25 active:scale-95 transition-all duration-200 border border-green-500/25 group touch-manipulation min-w-[44px] h-[44px]",title:"POS Mode",children:[e.jsx(ds,{className:"w-5 h-5 text-green-400 group-hover:text-green-300 transition-colors duration-200 flex-shrink-0"}),e.jsx("span",{className:"text-green-400 group-hover:text-green-300 font-semibold text-xs transition-colors duration-200",children:"POS"})]}),e.jsxs(Js,{to:"/kiosk",className:"bg-blue-500/15 backdrop-blur-sm rounded-xl flex items-center justify-start space-x-1 px-3 py-2 hover:bg-blue-500/25 active:scale-95 transition-all duration-200 border border-blue-500/25 group touch-manipulation min-w-[44px] h-[44px]",title:"Kiosk Mode",children:[e.jsx(ij,{className:"w-5 h-5 text-blue-400 group-hover:text-blue-300 transition-colors duration-200 flex-shrink-0"}),e.jsx("span",{className:"text-blue-400 group-hover:text-blue-300 font-semibold text-xs transition-colors duration-200",children:"Kiosk"})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(xg,{userId:s._id,onOpenModal:n})}),e.jsx("button",{onClick:()=>d(!0),className:"w-11 h-11 bg-white/5 backdrop-blur-sm rounded-xl flex items-center justify-center hover:bg-white/10 active:scale-95 transition-all duration-200 border border-white/10 group touch-manipulation",title:"Settings",children:e.jsx(Lr,{className:"w-5 h-5 text-gray-400 group-hover:text-white group-hover:rotate-90 transition-all duration-200"})}),e.jsx("button",{onClick:()=>u(!0),className:"w-11 h-11 bg-white/5 backdrop-blur-sm rounded-xl flex items-center justify-center hover:bg-white/10 active:scale-95 transition-all duration-200 cursor-pointer border border-white/10 group touch-manipulation",title:"My Profile",children:e.jsx(tt,{className:"w-5 h-5 text-gray-400 group-hover:text-white transition-colors duration-200"})}),e.jsx("button",{onClick:()=>h(!0),className:"w-11 h-11 bg-red-500/15 backdrop-blur-sm rounded-xl flex items-center justify-center hover:bg-red-500/25 active:scale-95 transition-all duration-200 border border-red-500/25 group touch-manipulation",title:"Logout",children:e.jsx(Mn,{className:"w-5 h-5 text-red-400 group-hover:text-red-300 transition-colors duration-200"})})]}),e.jsxs("div",{className:"flex md:hidden items-center space-x-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(xg,{userId:s._id,onOpenModal:n})}),e.jsx("button",{onClick:()=>g(!f),className:"w-9 h-9 bg-white/5 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/10 active:scale-95 transition-all duration-200 border border-white/10 touch-manipulation relative z-[9998]",title:"Menu",type:"button",children:f?e.jsx(Ze,{className:"w-5 h-5 text-white"}):e.jsx(O3,{className:"w-5 h-5 text-gray-400"})})]})]})]})}),e.jsx(xF,{isOpen:p,onClose:()=>u(!1),user:s,sessionToken:i}),e.jsx(cF,{isOpen:c,onClose:()=>d(!1),currentBranch:b,user:s,onSave:N=>{console.log("Settings saved:",N)}}),e.jsx(dF,{isOpen:m,onClose:()=>h(!1),onConfirm:t}),f&&Ut.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>g(!1)}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--color-bg)] via-[#1A1A1A] to-[#0F0F0F] overflow-y-auto",style:{paddingTop:"env(safe-area-inset-top)",paddingBottom:"env(safe-area-inset-bottom)"},children:[e.jsxs("div",{className:"sticky top-0 z-10 bg-[var(--color-bg)]/95 backdrop-blur-md border-b border-[#2A2A2A]/50 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:o?.logo_light_url,alt:o?.display_name||"Logo",className:"w-10 h-10 object-contain"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-bold text-white",children:"Menu"}),e.jsx("p",{className:"text-xs text-gray-400",children:" Staff Dashboard"})]})]}),e.jsx("button",{onClick:()=>g(!1),className:"w-10 h-10 bg-white/5 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/10 active:scale-95 transition-all duration-200 border border-white/10 touch-manipulation",title:"Close Menu",children:e.jsx(Ze,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"px-4 py-6 space-y-2",children:[s?.role!=="branch_owner"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Js,{to:"/staff/pos",onClick:()=>g(!1),className:"w-full flex items-center space-x-4 px-4 py-4 bg-gradient-to-r from-green-500/10 to-green-500/5 rounded-xl border border-green-500/20 hover:border-green-500/40 transition-all duration-200 touch-manipulation active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ds,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-semibold text-base",children:"POS Mode"}),e.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:"Point of Sale system"})]})]}),e.jsxs(Js,{to:"/kiosk",onClick:()=>g(!1),className:"w-full flex items-center space-x-4 px-4 py-4 bg-gradient-to-r from-blue-500/10 to-blue-500/5 rounded-xl border border-blue-500/20 hover:border-blue-500/40 transition-all duration-200 touch-manipulation active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ij,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-semibold text-base",children:"Kiosk Mode"}),e.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:"Customer self-service"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-2",children:"Account"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>j("profile"),className:"w-full flex items-center space-x-4 px-4 py-4 bg-[#1A1A1A]/50 rounded-xl border border-[#2A2A2A]/50 hover:bg-[#222222] hover:border-[#333333] transition-all duration-200 touch-manipulation active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(tt,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-white font-semibold text-base",children:"My Profile"}),e.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:"View and edit profile"})]})]}),e.jsxs("button",{onClick:()=>j("settings"),className:"w-full flex items-center space-x-4 px-4 py-4 bg-[#1A1A1A]/50 rounded-xl border border-[#2A2A2A]/50 hover:bg-[#222222] hover:border-[#333333] transition-all duration-200 touch-manipulation active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Lr,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-white font-semibold text-base",children:"Settings"}),e.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:"App preferences"})]})]})]})]}),b&&e.jsx("div",{className:"mb-6 px-4 py-3 bg-[#1A1A1A]/30 rounded-xl border border-[#2A2A2A]/30",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Gs,{className:"w-5 h-5 text-[var(--color-primary)]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-semibold text-sm",children:b.name}),e.jsxs("p",{className:"text-gray-400 text-xs mt-0.5",children:["Branch Code: ",b.branch_code]})]})]})}),e.jsx("div",{className:"pt-4 border-t border-[#2A2A2A]/50",children:e.jsxs("button",{onClick:()=>j("logout"),className:"w-full flex items-center space-x-4 px-4 py-4 bg-red-500/10 rounded-xl border border-red-500/20 hover:bg-red-500/20 hover:border-red-500/40 transition-all duration-200 touch-manipulation active:scale-[0.98]",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Mn,{className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-red-400 font-semibold text-base",children:"Logout"}),e.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:"Sign out of your account"})]})]})})]})]})]}),document.body)]})};function Kr({children:t,variant:s="primary",onClick:n,disabled:i=!1,className:o="",type:c="button"}){const d="w-full min-h-[48px] rounded-lg font-bold text-base transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",m={primary:"bg-[var(--color-primary)] text-white hover:bg-[var(--color-accent)] active:bg-[var(--color-primary)]",secondary:"bg-[var(--color-bg)] text-white hover:bg-white/10 active:bg-white/20",outline:"border-2 border-[var(--color-primary)] text-[var(--color-primary)] bg-transparent hover:bg-[var(--color-primary)] hover:text-white"};return e.jsx("button",{type:c,onClick:n,disabled:i,className:`${d} ${m[s]} ${o}`,children:t})}const fF="modulepreload",gF=function(t){return"/"+t},pj={},nm=function(s,n,i){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");o=h(n.map(p=>{if(p=gF(p),p in pj)return;pj[p]=!0;const u=p.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${f}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":fF,u||(g.as="script"),g.crossOrigin="",g.href=p,m&&g.setAttribute("nonce",m),document.head.appendChild(g),u)return new Promise((y,b)=>{g.addEventListener("load",y),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&c(m.reason);return s().catch(c)})};let Fn=class $t{constructor(s,n,i,o,c){this._legacyCanvasSize=$t.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=s,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=n:(console.warn(i||o||c?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),n=typeof i=="object"?i:{},this._onDecodeError=n.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||(typeof o=="function"?o:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||c||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof o=="number"?o:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),s.disablePictureInPicture=!0,s.playsInline=!0,s.muted=!0;let d=!1;if(s.hidden&&(s.hidden=!1,d=!0),document.body.contains(s)||(document.body.appendChild(s),d=!0),i=s.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(o=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),c=this.$overlay.style,c.position="absolute",c.display="none",c.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!o&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(s),requestAnimationFrame(()=>{let m=window.getComputedStyle(s);m.display==="none"&&(s.style.setProperty("display","block","important"),d=!0),m.visibility!=="visible"&&(s.style.setProperty("visibility","visible","important"),d=!0),d&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),s.style.opacity="0",s.style.width="0",s.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),s.addEventListener("play",this._onPlay),s.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=$t.createQrEngine()}static set WORKER_PATH(s){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await $t.listCameras(!1)).length}catch{return!1}}static async listCameras(s=!1){if(!navigator.mediaDevices)return[];let n=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(o=>o.kind==="videoinput"),i;try{s&&(await n()).every(o=>!o.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await n()).map((o,c)=>({id:o.deviceId,label:o.label||(c===0?"Default Camera":`Camera ${c+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),$t._stopVideoStream(i))}}async hasFlash(){let s;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;s=this.$video.srcObject}else s=(await this._getCameraStream()).stream;return"torch"in s.getVideoTracks()[0].getSettings()}catch{return!1}finally{s&&s!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),$t._stopVideoStream(s))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(s){throw this._flashOn=!1,s}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),$t._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:s,facingMode:n}=await this._getCameraStream();!this._active||this._paused?$t._stopVideoStream(s):(this._setVideoMirror(n),this.$video.srcObject=s,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(s){if(!this._paused)throw this._active=!1,s}}stop(){this.pause(),this._active=!1}async pause(s=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let n=()=>{this.$video.srcObject instanceof MediaStream&&($t._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return s?(n(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(n(),!0):!1)}async setCamera(s){s!==this._preferredCamera&&(this._preferredCamera=s,await this._restartVideoStream())}static async scanImage(s,n,i,o,c=!1,d=!1){let m,h=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(m=n.scanRegion,i=n.qrEngine,o=n.canvas,c=n.disallowCanvasResizing||!1,d=n.alsoTryWithoutScanRegion||!1,h=!0):console.warn(n||i||o||c||d?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let p,u;[i,p]=await Promise.all([i||$t.createQrEngine(),$t._loadImage(s)]),[o,u]=$t._drawToCanvas(p,m,o,c);let f;if(i instanceof Worker){let g=i;n||$t._postWorkerMessageSync(g,"inversionMode","both"),f=await new Promise((y,b)=>{let j,N,w,B=-1;N=_=>{_.data.id===B&&(g.removeEventListener("message",N),g.removeEventListener("error",w),clearTimeout(j),_.data.data!==null?y({data:_.data.data,cornerPoints:$t._convertPoints(_.data.cornerPoints,m)}):b($t.NO_QR_CODE_FOUND))},w=_=>{g.removeEventListener("message",N),g.removeEventListener("error",w),clearTimeout(j),b("Scanner error: "+(_?_.message||_:"Unknown Error"))},g.addEventListener("message",N),g.addEventListener("error",w),j=setTimeout(()=>w("timeout"),1e4);let S=u.getImageData(0,0,o.width,o.height);B=$t._postWorkerMessageSync(g,"decode",S,[S.data.buffer])})}else f=await Promise.race([new Promise((g,y)=>window.setTimeout(()=>y("Scanner error: timeout"),1e4)),(async()=>{try{var[g]=await i.detect(o);if(!g)throw $t.NO_QR_CODE_FOUND;return{data:g.rawValue,cornerPoints:$t._convertPoints(g.cornerPoints,m)}}catch(y){if(g=y.message||y,/not implemented|service unavailable/.test(g))return $t._disableBarcodeDetector=!0,$t.scanImage(s,{scanRegion:m,canvas:o,disallowCanvasResizing:c,alsoTryWithoutScanRegion:d});throw`Scanner error: ${g}`}})()]);return h?f:f.data}catch(p){if(!m||!d)throw p;let u=await $t.scanImage(s,{qrEngine:i,canvas:o,disallowCanvasResizing:c});return h?u:u.data}finally{n||$t._postWorkerMessage(i,"close")}}setGrayscaleWeights(s,n,i,o=!0){$t._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:s,green:n,blue:i,useIntegerApproximation:o})}setInversionMode(s){$t._postWorkerMessage(this._qrEnginePromise,"inversionMode",s)}static async createQrEngine(s){if(s&&console.warn("Specifying a worker path is not required and not supported anymore."),s=()=>nm(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(i=>i.createWorker()),!(!$t._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return s();let n=navigator.userAgentData;return n&&n.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(n.platform)&&await n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:o})=>/arm/i.test(i||"arm")&&13<=parseInt(o||"13")).catch(()=>!0)?s():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(s){let n=Math.round(.6666666666666666*Math.min(s.videoWidth,s.videoHeight));return{x:Math.round((s.videoWidth-n)/2),y:Math.round((s.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var s=this.$video,n=s.videoWidth,i=s.videoHeight,o=s.offsetWidth,c=s.offsetHeight,d=s.offsetLeft,m=s.offsetTop,h=window.getComputedStyle(s),p=h.objectFit,u=n/i,f=o/c;switch(p){case"none":var g=n,y=i;break;case"fill":g=o,y=c;break;default:(p==="cover"?u>f:u<f)?(y=c,g=y*u):(g=o,y=g/u),p==="scale-down"&&(g=Math.min(g,n),y=Math.min(y,i))}var[b,j]=h.objectPosition.split(" ").map((w,B)=>{const S=parseFloat(w);return w.endsWith("%")?(B?c-y:o-g)*S/100:S});h=this._scanRegion.width||n,f=this._scanRegion.height||i,p=this._scanRegion.x||0;var N=this._scanRegion.y||0;u=this.$overlay.style,u.width=`${h/n*g}px`,u.height=`${f/i*y}px`,u.top=`${m+j+N/i*y}px`,i=/scaleX\(-1\)/.test(s.style.transform),u.left=`${d+(i?o-b-g:b)+(i?n-p-h:p)/n*g}px`,u.transform=s.style.transform}})}static _convertPoints(s,n){if(!n)return s;let i=n.x||0,o=n.y||0,c=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let d of s)d.x=d.x*c+i,d.y=d.y*n+o;return s}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var s=Date.now()-this._lastScanTimestamp,n=1e3/this._maxScansPerSecond;s<n&&await new Promise(o=>setTimeout(o,n-s)),this._lastScanTimestamp=Date.now();try{var i=await $t.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(o){if(!this._active)return;this._onDecodeError(o)}!$t._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=$t.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:o,y:c})=>`${o},${c}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(s){s!==$t.NO_QR_CODE_FOUND&&console.log(s)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let s=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",n=[{width:{min:1024}},{width:{min:768}},{}],i=n.map(o=>Object.assign({},o,{[s]:{exact:this._preferredCamera}}));for(let o of[...i,...n])try{let c=await navigator.mediaDevices.getUserMedia({video:o,audio:!1}),d=this._getFacingMode(c)||(o.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:c,facingMode:d}}catch{}throw"Camera not found."}async _restartVideoStream(){let s=this._paused;await this.pause(!0)&&!s&&this._active&&await this.start()}static _stopVideoStream(s){for(let n of s.getTracks())n.stop(),s.removeTrack(n)}_setVideoMirror(s){this.$video.style.transform="scaleX("+(s==="user"?-1:1)+")"}_getFacingMode(s){return(s=s.getVideoTracks()[0])?/rear|back|environment/i.test(s.label)?"environment":/front|user|face/i.test(s.label)?"user":null:null}static _drawToCanvas(s,n,i,o=!1){i=i||document.createElement("canvas");let c=n&&n.x?n.x:0,d=n&&n.y?n.y:0,m=n&&n.width?n.width:s.videoWidth||s.width,h=n&&n.height?n.height:s.videoHeight||s.height;return o||(o=n&&n.downScaledWidth?n.downScaledWidth:m,n=n&&n.downScaledHeight?n.downScaledHeight:h,i.width!==o&&(i.width=o),i.height!==n&&(i.height=n)),n=i.getContext("2d",{alpha:!1}),n.imageSmoothingEnabled=!1,n.drawImage(s,c,d,m,h,0,0,i.width,i.height),[i,n]}static async _loadImage(s){if(s instanceof Image)return await $t._awaitImageLoad(s),s;if(s instanceof HTMLVideoElement||s instanceof HTMLCanvasElement||s instanceof SVGImageElement||"OffscreenCanvas"in window&&s instanceof OffscreenCanvas||"ImageBitmap"in window&&s instanceof ImageBitmap)return s;if(s instanceof File||s instanceof Blob||s instanceof URL||typeof s=="string"){let n=new Image;n.src=s instanceof File||s instanceof Blob?URL.createObjectURL(s):s.toString();try{return await $t._awaitImageLoad(n),n}finally{(s instanceof File||s instanceof Blob)&&URL.revokeObjectURL(n.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(s){s.complete&&s.naturalWidth!==0||await new Promise((n,i)=>{let o=c=>{s.removeEventListener("load",o),s.removeEventListener("error",o),c instanceof ErrorEvent?i("Image load error"):n()};s.addEventListener("load",o),s.addEventListener("error",o)})}static async _postWorkerMessage(s,n,i,o){return $t._postWorkerMessageSync(await s,n,i,o)}static _postWorkerMessageSync(s,n,i,o){if(!(s instanceof Worker))return-1;let c=$t._workerMessageId++;return s.postMessage({id:c,type:n,data:i},o),c}};Fn.DEFAULT_CANVAS_SIZE=400;Fn.NO_QR_CODE_FOUND="No QR code found";Fn._disableBarcodeDetector=!1;Fn._workerMessageId=0;const fj=({isOpen:t,onClose:s,onVoucherScanned:n,onBookingScanned:i})=>{const o=C.useRef(null),c=C.useRef(null),[d,m]=C.useState(!1),[h,p]=C.useState(null),[u,f]=C.useState(null),[g,y]=C.useState(!1),[b,j]=C.useState([]),[N,w]=C.useState(null),[B,S]=C.useState(!1),_=De(H.services.bookings.validateBookingByCode),k=De(H.services.bookings.updateBooking),E=De(H.services.vouchers.redeemVoucherByStaff);C.useEffect(()=>(t?D():P(),P),[t]);const D=async()=>{try{if(!Fn.hasCamera()){f("No camera found on this device");return}const G=await Fn.listCameras(!0);j(G);const te=G.find(Q=>Q.label.toLowerCase().includes("back")||Q.label.toLowerCase().includes("rear")||Q.label.toLowerCase().includes("environment"));w(te||G[0]),(te||G[0])&&F()}catch{f("Failed to access camera. Please check permissions.")}},F=async()=>{if(!(!o.current||!N))try{m(!0),f(null),c.current=new Fn(o.current,T,{onDecodeError:()=>{},highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:N.id,maxScansPerSecond:3}),await c.current.start()}catch(G){m(!1),G.name==="NotAllowedError"?f("Camera permission denied. Please allow camera access."):f("Failed to start camera. Please try again.")}},M=()=>{c.current&&(c.current.stop(),c.current.destroy(),c.current=null),m(!1)},P=()=>{M(),p(null),f(null),y(!1)},T=async G=>{if(!(g||h)){y(!0),M(),navigator.vibrate&&navigator.vibrate(200);try{const te=G.data;if(/^[A-Z0-9]{8}$/.test(te))await L(te);else if(te.startsWith("{"))await X(te);else throw new Error("Invalid QR code format")}catch(te){f(te.message||"Failed to process QR code"),y(!1)}}},L=async G=>{try{const te=await _({bookingCode:G});if(!te)throw new Error("Booking not found");p({type:"booking",id:te._id,code:G,customer_name:te.customer_name,service_name:te.service_name,barber_name:te.barber_name,date:te.formattedDate,time:te.formattedTime,price:te.service_price||te.price,status:"scanned"})}catch(te){throw new Error(te.message||"Failed to validate booking")}finally{y(!1)}},X=async G=>{try{const te=JSON.parse(G);if(!te.code)throw new Error("Invalid voucher QR code");let Q="N/A";if(te.expires_at&&te.expires_at!=="N/A")try{const ee=new Date(te.expires_at);isNaN(ee.getTime())||(Q=ee.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}catch{console.warn("Failed to parse expiry date:",te.expires_at)}p({type:"voucher",code:te.code,value:te.value||"N/A",expires_at:Q,user:te.user||te.username||"N/A",status:"scanned"})}catch(te){throw new Error(te.message||"Invalid voucher QR format")}finally{y(!1)}},Z=async()=>{if(h){y(!0),f(null);try{if(h.type==="booking"){if(i){i(h),I();return}await k({id:h.id,status:"confirmed"}),p(G=>({...G,status:"confirmed"}))}else{if(n){const te={_id:h.id||h.code,code:h.code,value:h.value,expires_at:h.expires_at};n(te),I();return}const G=await E({code:h.code});if(G.success)p(te=>({...te,status:"redeemed",value:G.value||te.value}));else throw new Error("Voucher redemption failed")}}catch(G){f(G.message||`Failed to ${h.type==="booking"?"confirm booking":"redeem voucher"}`)}finally{y(!1)}}},ne=()=>{p(null),f(null),y(!1),F()},I=()=>{P(),s()},O=async G=>{if(w(G),S(!1),d&&c.current)try{await c.current.setCamera(G.id)}catch{f("Failed to switch camera")}};return e.jsx(ns,{isOpen:t,onClose:I,title:"QR Scanner",size:"md",variant:"dark",children:e.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[!h&&e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative bg-black rounded-lg lg:rounded-xl overflow-hidden",style:{aspectRatio:"4/3"},children:[e.jsx("video",{ref:o,className:"w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-32 h-32 lg:w-40 lg:h-40 border-2 border-[var(--color-primary)] rounded-xl lg:rounded-2xl animate-pulse",children:e.jsx("div",{className:"absolute inset-2 lg:inset-3 border border-[var(--color-primary)] rounded-lg lg:rounded-xl opacity-50"})})}),g&&e.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ps,{className:"w-5 h-5 text-[var(--color-primary)] animate-spin"}),e.jsx("span",{className:"font-medium text-sm",children:"Processing..."})]})})}),!d&&!u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsxs("div",{className:"text-center text-white px-4",children:[e.jsx(rr,{className:"w-10 h-10 lg:w-12 lg:h-12 mx-auto mb-2 lg:mb-3 opacity-70"}),e.jsx("p",{className:"font-semibold text-sm lg:text-base",children:"Ready to Scan"}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"Position QR code in frame"})]})}),b.length>1&&e.jsx("button",{onClick:()=>S(!B),className:"absolute top-3 right-3 p-2 bg-black/50 rounded-lg text-white hover:bg-black/70 transition-colors",children:e.jsx(Lr,{className:"w-4 h-4"})})]}),B&&e.jsxs("div",{className:"absolute top-12 right-0 z-10 bg-white rounded-lg shadow-lg border p-3 min-w-48",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Select Camera"}),e.jsx("div",{className:"space-y-1",children:b.map(G=>e.jsx("button",{onClick:()=>O(G),className:`w-full p-2 rounded text-left text-sm transition-colors ${N?.id===G.id?"bg-[var(--color-primary)] text-white":"hover:bg-gray-100"}`,children:G.label.includes("back")?"Back Camera":G.label.includes("front")?"Front Camera":G.label},G.id))})]}),e.jsx("div",{className:"mt-2 lg:mt-3 flex justify-center gap-2",children:d?e.jsxs(Kr,{onClick:M,variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50 px-4 lg:px-6 py-2.5 text-sm lg:text-base",children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),"Stop"]}):e.jsxs(Kr,{onClick:F,disabled:!N,className:"bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white px-4 lg:px-6 py-2.5 text-sm lg:text-base",children:[e.jsx(da,{className:"w-4 h-4 mr-2"}),"Start Scanning"]})}),e.jsx("div",{className:"mt-2 lg:mt-3 p-2.5 lg:p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3 lg:space-x-4 text-xs text-blue-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(rt,{className:"w-3 h-3"}),e.jsx("span",{children:"Booking QRs"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Qt,{className:"w-3 h-3"}),e.jsx("span",{children:"Voucher QRs"})]})]})})]}),h&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#1A1A1A] border border-[#444444] rounded-lg lg:rounded-xl p-3 lg:p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 lg:mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${h.type==="booking"?"bg-blue-500/20":"bg-purple-500/20"}`,children:h.type==="booking"?e.jsx(rt,{className:`w-4 h-4 lg:w-5 lg:h-5 ${h.type==="booking"?"text-blue-400":"text-purple-400"}`}):e.jsx(Qt,{className:"w-4 h-4 lg:w-5 lg:h-5 text-purple-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-bold text-white font-mono text-sm lg:text-lg truncate",children:h.code}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-400 capitalize",children:h.type==="booking"?"Booking Details":"Voucher Details"})]})]}),e.jsx("span",{className:`px-2 lg:px-3 py-1 text-[10px] lg:text-xs font-bold rounded-full uppercase flex-shrink-0 ${h.status==="confirmed"||h.status==="redeemed"||h.status==="validated"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-blue-500/20 text-blue-400 border border-blue-500/30"}`,children:h.status})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 lg:gap-4 mb-3 lg:mb-4",children:h.type==="booking"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-2.5 lg:p-3 border border-[#444444]",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 mb-1",children:[e.jsx(tt,{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-500"}),e.jsx("span",{className:"text-[10px] lg:text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Customer"})]}),e.jsx("p",{className:"font-semibold text-white text-xs lg:text-sm truncate",children:h.customer_name})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-2.5 lg:p-3 border border-[#444444]",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 mb-1",children:[e.jsx(as,{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-500"}),e.jsx("span",{className:"text-[10px] lg:text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Price"})]}),e.jsxs("p",{className:"font-bold text-[var(--color-primary)] text-base lg:text-lg",children:["",h.price]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-2.5 lg:p-3 border border-[#444444]",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 mb-1",children:[e.jsx(rt,{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-500"}),e.jsx("span",{className:"text-[10px] lg:text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Date & Time"})]}),e.jsx("p",{className:"font-semibold text-white text-xs lg:text-sm truncate",children:h.date}),e.jsx("p",{className:"text-[var(--color-primary)] font-medium text-xs lg:text-sm",children:h.time})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-2.5 lg:p-3 border border-[#444444]",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 mb-1",children:[e.jsx(tt,{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-500"}),e.jsx("span",{className:"text-[10px] lg:text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Barber"})]}),e.jsx("p",{className:"font-semibold text-white text-xs lg:text-sm truncate",children:h.barber_name}),e.jsx("p",{className:"text-gray-400 text-[10px] lg:text-xs truncate",children:h.service_name})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-2.5 lg:p-3 border border-[#444444]",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 mb-1",children:[e.jsx(Qt,{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-500"}),e.jsx("span",{className:"text-[10px] lg:text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Code"})]}),e.jsx("p",{className:"font-semibold text-white text-xs lg:text-sm truncate",children:h.code})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-2.5 lg:p-3 border border-[#444444]",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 mb-1",children:[e.jsx(as,{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-500"}),e.jsx("span",{className:"text-[10px] lg:text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Value"})]}),e.jsx("p",{className:"font-bold text-[var(--color-primary)] text-base lg:text-lg",children:h.value})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-2.5 lg:p-3 border border-[#444444] col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 lg:space-x-2 mb-1",children:[e.jsx(rt,{className:"w-3 h-3 lg:w-4 lg:h-4 text-gray-500"}),e.jsx("span",{className:"text-[10px] lg:text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Expires"})]}),e.jsx("p",{className:"font-semibold text-white text-xs lg:text-sm",children:h.expires_at}),h.user!=="N/A"&&e.jsxs("p",{className:"text-gray-400 text-xs lg:text-sm mt-1",children:["User: ",h.user]})]})]})}),h.status==="scanned"&&e.jsx("div",{className:"p-2.5 lg:p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg mb-3 lg:mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsxs("p",{className:"text-xs lg:text-sm font-medium text-blue-300",children:[h.type==="booking"?"Booking":"Voucher"," scanned  Ready to ",h.type==="booking"?"confirm":"use"]})]})}),(h.status==="confirmed"||h.status==="redeemed")&&e.jsx("div",{className:"p-2.5 lg:p-3 bg-green-500/10 border border-green-500/30 rounded-lg mb-3 lg:mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),e.jsxs("p",{className:"text-xs lg:text-sm font-medium text-green-300",children:[" ",h.type==="booking"?"Booking confirmed!":"Voucher used!"," Transaction completed."]})]})})]}),u&&e.jsx("div",{className:"p-2.5 lg:p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xs,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-red-300 font-medium text-xs lg:text-sm",children:u})]})}),e.jsxs("div",{className:"flex justify-center gap-2 lg:gap-3 pt-3 lg:pt-4 border-t border-[#444444]",children:[h&&h.status!=="confirmed"&&h.status!=="redeemed"&&e.jsx(Kr,{onClick:Z,disabled:g,className:`flex items-center justify-center text-white px-4 lg:px-6 py-2.5 lg:py-3 font-semibold rounded-lg text-sm lg:text-base transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${h.type==="booking"?"bg-green-600 hover:bg-green-700":"bg-[var(--color-primary)] hover:bg-[#E67A1A]"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4 mr-2 animate-spin"}),e.jsx("span",{className:"hidden lg:inline",children:"Processing..."}),e.jsx("span",{className:"lg:hidden",children:"Processing"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:h.type==="booking"?"Confirm Booking":"Use Voucher"}),e.jsx("span",{className:"lg:hidden",children:"Confirm"})]})}),h&&e.jsxs(Kr,{variant:"outline",onClick:ne,disabled:g,className:"flex items-center justify-center px-4 lg:px-5 py-2.5 lg:py-3 border-2 border-[#555555] text-gray-300 font-medium rounded-lg text-sm lg:text-base hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(da,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden lg:inline",children:"Scan Again"}),e.jsx("span",{className:"lg:hidden",children:"Again"})]}),e.jsx(Kr,{variant:"outline",onClick:I,disabled:g,className:"flex items-center justify-center px-4 lg:px-5 py-2.5 lg:py-3 border-2 border-[#555555] text-gray-300 font-medium rounded-lg text-sm lg:text-base hover:border-gray-400 hover:bg-[#1A1A1A] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{children:"Close"})})]})]})})};function uo({label:t,type:s="text",placeholder:n,value:i,onChange:o,required:c=!1,className:d=""}){return e.jsxs("div",{className:"w-full",children:[t&&e.jsxs("label",{className:"block text-primary-black font-medium text-base mb-2",children:[t,c&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:s,placeholder:n,value:i,onChange:o,required:c,className:`w-full h-12 px-4 border-2 border-gray-300 rounded-lg text-base focus:outline-none focus:border-primary-orange transition-colors duration-200 ${d}`})]})}const gj=({isOpen:t,onClose:s,onSubmit:n,onCustomerAdded:i})=>{const[o,c]=C.useState({username:"",password:"",nickname:"",email:"",mobile_number:"",birthday:""}),d=De(H.services.auth.registerUser),[m,h]=C.useState(!1),[p,u]=C.useState(null),[f,g]=C.useState({}),y=async N=>{N.preventDefault(),h(!0),u(null),g({});try{const w={username:o.username.trim(),password:o.password,mobile_number:o.mobile_number.trim(),email:o.email.trim(),...o.nickname&&{nickname:o.nickname.trim()},...o.birthday&&{birthday:o.birthday}};console.log("Creating new customer:",w);const B={...w,role:"customer"},S=await d(B);console.log("Customer created successfully:",S),n&&await n(S),i&&i({_id:S,username:w.username,email:w.email,mobile_number:w.mobile_number,nickname:w.nickname,role:"customer"}),b(),s()}catch(w){if(console.error("Error creating customer:",w),w.response?.data){const B=w.response.data;if(typeof B=="object")if(g(B),B.non_field_errors)u(B.non_field_errors[0]);else{const S=Object.entries(B).filter(([_])=>_!=="non_field_errors").map(([_,k])=>`${_}: ${k[0]}`);u(`Please fix the following errors: ${S.join(", ")}`)}else u(B||"Failed to create customer")}else u(w.message||"Failed to create customer. Please try again.")}finally{h(!1)}},b=()=>{c({username:"",password:"",nickname:"",email:"",mobile_number:"",birthday:""}),u(null),g({})},j=(N,w)=>{c(B=>({...B,[N]:w}))};return e.jsx(ns,{isOpen:t,onClose:s,title:"Add New Customer",size:"lg",children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:p})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(tt,{className:"w-5 h-5 text-[var(--color-primary)] mr-2"}),"Account Information"]}),e.jsx(uo,{label:"Username",placeholder:"Enter unique username",value:o.username,onChange:N=>j("username",N.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[var(--color-primary)]",error:f.username?.[0]}),e.jsx(uo,{label:"Password",type:"password",placeholder:"Enter secure password",value:o.password,onChange:N=>j("password",N.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[var(--color-primary)]",error:f.password?.[0]}),e.jsx(uo,{label:"Email Address",type:"email",placeholder:"customer@example.com",value:o.email,onChange:N=>j("email",N.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[var(--color-primary)]",error:f.email?.[0]}),e.jsx(uo,{label:"Mobile Number",type:"tel",placeholder:"09123456789",value:o.mobile_number,onChange:N=>j("mobile_number",N.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[var(--color-primary)]",error:f.mobile_number?.[0]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(rt,{className:"w-5 h-5 text-[var(--color-primary)] mr-2"}),"Personal Details"]}),e.jsx(uo,{label:"Nickname (Optional)",placeholder:"Preferred name or alias",value:o.nickname,onChange:N=>j("nickname",N.target.value),className:"border-[#F5F5F5] focus:border-[var(--color-primary)]",error:f.nickname?.[0]}),e.jsx(uo,{label:"Birthday (Optional)",type:"date",value:o.birthday,onChange:N=>j("birthday",N.target.value),className:"border-[#F5F5F5] focus:border-[var(--color-primary)]",error:f.birthday?.[0]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(tt,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Customer Account"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[e.jsx("p",{children:"This will create a new customer account that they can use to:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"Book appointments online"}),e.jsx("li",{children:"View booking history"}),e.jsx("li",{children:"Manage loyalty points"})]})]})]})]})})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-[#F5F5F5]",children:[e.jsx(Kr,{type:"button",variant:"outline",onClick:()=>{b(),s()},disabled:m,className:"flex-1 border-[#6B6B6B] text-[#6B6B6B] hover:bg-[#6B6B6B] hover:text-white",children:"Cancel"}),e.jsx(Kr,{type:"submit",disabled:m,className:"flex-1 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white hover:shadow-lg disabled:opacity-50",children:m?"Creating...":"Create Customer"})]})]})})},bF=({isOpen:t,onClose:s,onSubmit:n,user:i})=>{const[o,c]=C.useState({customerType:"existing",customer:"",walkinName:"",walkinPhone:"",walkinEmail:"",service:"",barber:"",date:"",time:"",notes:"",paymentMethod:"cash"}),[d,m]=C.useState(!1),[h,p]=C.useState(null),[u,f]=C.useState({}),[g,y]=C.useState(!1),[b,j]=C.useState(!1),[N,w]=C.useState([]),[B,S]=C.useState(null),_=C.useRef(null),k=C.useRef(null),E=i?.role==="super_admin"?me(H.services.services.getAllServices):i?.branch_id?me(H.services.services.getServicesByBranch,{branch_id:i.branch_id}):void 0,D=i?.role==="super_admin"?me(H.services.barbers.getActiveBarbers):i?.branch_id?me(H.services.barbers.getBarbersByBranch,{branch_id:i.branch_id})?.filter(I=>I.is_active):void 0,F=i?.role==="super_admin"?me(H.services.auth.getAllUsers):i?.branch_id?me(H.services.auth.getUsersByBranch,{branch_id:i.branch_id}):void 0,M=me(H.services.bookings.getBookingsByBarberAndDate,o.barber&&o.date?{barberId:o.barber,date:o.date}:"skip"),P=De(H.services.bookings.createBooking),T=De(H.services.auth.registerUser);C.useEffect(()=>{const I=O=>{_.current&&!_.current.contains(O.target)&&y(!1),k.current&&!k.current.contains(O.target)&&j(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),C.useEffect(()=>{if(o.date&&o.barber&&M&&M!=="skip"){const I=M.filter(Q=>Q.status!=="cancelled").map(Q=>Q.time),G=E?.find(Q=>Q._id===o.service)?.duration_minutes||60,te=Z(o.date,I,G);w(te)}else w(Z(o.date,[],60))},[o.date,o.barber,o.service,M,E]);const L=async I=>{I.preventDefault(),m(!0),p(null),f({});try{let O=o.customer;if(o.customerType==="existing"&&!o.customer){f({customer:"Please select a customer"}),m(!1);return}if(o.customerType==="walkin"){if(!o.walkinName.trim()){f({walkinName:"Customer name is required"}),m(!1);return}if(o.walkinName.trim().length<2){f({walkinName:"Customer name must be at least 2 characters"}),m(!1);return}if(!o.walkinPhone.trim()){f({walkinPhone:"Phone number is required"}),m(!1);return}if(!/^(\+63|0)[9][0-9]{9}$/.test(o.walkinPhone.replace(/\s/g,""))){f({walkinPhone:"Please enter a valid Philippine phone number (e.g., 09123456789)"}),m(!1);return}if(o.walkinEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.walkinEmail)){f({walkinEmail:"Please enter a valid email address"}),m(!1);return}try{const ve={username:`walkin_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,password:"walkin_temp",email:o.walkinEmail||`walkin_${Date.now()}@temp.local`,mobile_number:o.walkinPhone,role:"customer",branch_id:i?.branch_id};if(O=(await T(ve)).userId,console.log("Walk-in customer created:",O),!O)throw new Error("Walk-in customer creation returned no user ID")}catch(ve){console.error("Error creating walk-in customer:",ve),p(`Failed to create walk-in customer: ${ve.message||"Unknown error"}`),m(!1);return}}if(!o.service){f({service:"Please select a service"}),m(!1);return}if(!o.date){f({date:"Please select a date"}),m(!1);return}if(!o.time){f({time:"Please select a time"}),m(!1);return}if(!E?.find(de=>de._id===o.service)){p("Selected service is no longer available. Please refresh and try again."),m(!1);return}const te=new Date(o.date),Q=new Date;if(Q.setHours(0,0,0,0),te<Q){f({date:"Cannot book appointments in the past"}),m(!1);return}const ee=new Date;if(ee.setDate(ee.getDate()+30),te>ee){f({date:"Cannot book appointments more than 30 days in advance"}),m(!1);return}const le=o.time.split(" ");let R=0;if(le.length===2){const[de,ve]=le,[Me]=de.split(":");R=parseInt(Me,10),ve==="PM"&&R!==12&&(R+=12),ve==="AM"&&R===12&&(R=0)}else R=parseInt(o.time.split(":")[0],10);if(R<9||R>=17){f({time:"Please select a time between 9:00 AM and 5:00 PM"}),m(!1);return}const q=N.find(de=>de.display===o.time);if(q&&!q.available){f({time:"This time slot is already booked. Please select another time."}),m(!1);return}if(o.notes&&o.notes.length>500){f({notes:"Notes cannot exceed 500 characters"}),m(!1);return}const J=de=>{const ve=de.split(" ");if(ve.length===1)return ve[0];const[Me,Ke]=ve;let[pe,be]=Me.split(":");return pe=parseInt(pe,10),Ke==="AM"?pe===12&&(pe=0):Ke==="PM"&&pe!==12&&(pe+=12),`${pe.toString().padStart(2,"0")}:${be}`},$={customer:O,service:o.service,branch_id:i.branch_id,barber:o.barber||void 0,date:o.date,time:J(o.time),status:"booked",notes:o.notes||void 0};if(o.barber&&!D?.find(ve=>ve._id===o.barber)){p("Selected barber is no longer available. Please select another."),m(!1);return}console.log("Creating booking:",$),o.customerType==="walkin"&&await new Promise(de=>setTimeout(de,500));const Y=await P($);console.log("Booking created successfully:",Y);const xe=E?.find(de=>de._id===o.service),oe=o.barber?D?.find(de=>de._id===o.barber):null;S({bookingCode:`BK${Date.now().toString().slice(-6)}`,service:xe?.name||"Unknown Service",barber:oe?.full_name||"Any available",date:o.date,time:o.time,price:xe?.price||0,customerName:o.customerType==="walkin"?o.walkinName:void 0}),n&&await n({_id:Y,...$,customer_name:o.customerType==="walkin"?o.walkinName:void 0}),X()}catch(O){if(console.error("Error creating booking:",O),O.response?.data){const G=O.response.data;if(typeof G=="object")if(f(G),G.non_field_errors)p(G.non_field_errors[0]);else{const te=Object.entries(G).filter(([Q])=>Q!=="non_field_errors").map(([Q,ee])=>`${Q}: ${ee[0]}`);p(`Please fix the following errors: ${te.join(", ")}`)}else p(G||"Failed to create booking")}else O.message?p(`Booking error: ${O.message}`):p("Failed to create booking. Please try again.")}finally{m(!1)}},X=()=>{c({customerType:"existing",customer:"",walkinName:"",walkinPhone:"",walkinEmail:"",service:"",barber:"",date:"",time:"",notes:"",paymentMethod:"cash"}),p(null),f({}),w([])},Z=(I,O,G)=>{if(!I)return[];const te=[],Q=9,ee=17,le=30;for(let R=Q;R<ee;R++)for(let q=0;q<60;q+=le){const J=`${R.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`,$=new Date(`1970-01-01T${J}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),Y=O.some(xe=>{const oe=parseInt(xe.split(":")[0]),de=parseInt(xe.split(":")[1]);return oe===R&&Math.abs(de-q)<G});te.push({value:J,display:$,available:!Y})}return te},ne=(I,O)=>{u[I]&&f(G=>{const te={...G};return delete te[I],te}),I==="customerType"&&(f({}),p(null)),c(G=>({...G,[I]:O}))};return e.jsxs(ns,{isOpen:t,onClose:s,title:"Create New Booking",size:"xl",compact:!0,variant:"dark",children:[e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[h&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 text-red-300 px-3 py-2.5 rounded-lg flex items-center space-x-2 text-sm",children:[e.jsx(Xe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("p",{children:h})]}),(!E||!D||!F)&&e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Ps,{className:"w-5 h-5 animate-spin text-[var(--color-primary)] mr-2"}),e.jsx("span",{className:"text-gray-300 text-sm font-medium",children:"Loading..."})]}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-4 border border-[#333333]/50",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-200 mb-3 flex items-center",children:[e.jsx(tt,{className:"w-4 h-4 text-[var(--color-primary)] mr-2"}),"Customer"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[e.jsx("input",{type:"radio",name:"customerType",value:"existing",checked:o.customerType==="existing",onChange:I=>ne("customerType",I.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-300",children:"Existing"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[e.jsx("input",{type:"radio",name:"customerType",value:"walkin",checked:o.customerType==="walkin",onChange:I=>ne("customerType",I.target.value),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-300",children:"Walk-in"})]})]}),o.customerType==="existing"?e.jsxs("div",{children:[e.jsxs("div",{className:"relative",ref:k,children:[e.jsxs("button",{type:"button",onClick:()=>j(!b),disabled:!F,className:"w-full h-10 px-3 border border-[#444444] rounded-lg text-left text-sm flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] transition-all disabled:opacity-50 bg-[#1A1A1A] text-gray-300 hover:border-[#555555]",children:[e.jsx("div",{className:"flex items-center gap-2",children:o.customer?(()=>{const I=F?.find(O=>O._id===o.customer);return I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[var(--color-primary)] flex items-center justify-center flex-shrink-0",children:e.jsx(tt,{className:"w-3 h-3 text-white"})}),e.jsx("div",{className:"text-left min-w-0",children:e.jsx("div",{className:"font-medium text-gray-200 text-xs",children:I.username})})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"Select customer"})})():e.jsx("span",{className:"text-gray-400 text-xs",children:"Select customer"})}),e.jsx(ea,{className:`w-4 h-4 text-gray-400 flex-shrink-0 transition-transform ${b?"rotate-180":""}`})]}),b&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-[#1A1A1A] border border-[#444444] rounded-lg shadow-lg max-h-40 overflow-y-auto",children:F?.filter(I=>I.role==="customer").map(I=>e.jsxs("button",{type:"button",onClick:()=>{ne("customer",I._id),j(!1)},className:"w-full px-3 py-2 flex items-center hover:bg-[#2A2A2A] transition-colors text-left",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[var(--color-primary)] flex items-center justify-center mr-2 flex-shrink-0",children:e.jsx(tt,{className:"w-3 h-3 text-white"})}),e.jsx("div",{className:"text-xs flex-1 min-w-0",children:e.jsx("div",{className:"font-medium text-gray-200",children:I.username})}),o.customer===I._id&&e.jsx(hr,{className:"w-4 h-4 text-[var(--color-primary)] flex-shrink-0"})]},I._id))||[]})]}),u.customer&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.customer})]}):e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:o.walkinName,onChange:I=>ne("walkinName",I.target.value),className:"w-full h-8 px-2 border border-[#444444] rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 text-xs",placeholder:"Name"}),u.walkinName&&e.jsx("p",{className:"text-red-400 text-xs mt-0.5",children:u.walkinName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Phone *"}),e.jsx("input",{type:"tel",value:o.walkinPhone,onChange:I=>ne("walkinPhone",I.target.value),className:"w-full h-8 px-2 border border-[#444444] rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 text-xs",placeholder:"09..."}),u.walkinPhone&&e.jsx("p",{className:"text-red-400 text-xs mt-0.5",children:u.walkinPhone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email (Optional)"}),e.jsx("input",{type:"email",value:o.walkinEmail,onChange:I=>ne("walkinEmail",I.target.value),className:"w-full h-8 px-2 border border-[#444444] rounded-lg focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 text-xs",placeholder:"Email"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-3 border border-[#333333]/50",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-200 mb-2 flex items-center",children:[e.jsx(ys,{className:"w-3.5 h-3.5 text-[var(--color-primary)] mr-1.5"}),"Service"]}),e.jsxs("select",{value:o.service,onChange:I=>ne("service",I.target.value),required:!0,disabled:!E,className:"w-full h-9 px-2 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select service"}),E?.filter(I=>I.is_active).map(I=>e.jsxs("option",{value:I._id,children:[I.name," - ",I.hide_price?"Ask for Price":`${parseFloat(I.price).toFixed(0)}`]},I._id))||[]]}),u.service&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.service}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Barber (Optional)"}),e.jsxs("div",{className:"relative",ref:_,children:[e.jsxs("button",{type:"button",onClick:()=>y(!g),disabled:!D,className:"w-full h-8 px-2 border border-[#444444] rounded-lg text-left text-xs flex items-center justify-between focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 disabled:opacity-50 hover:border-[#555555]",children:[e.jsx("span",{className:"truncate",children:o.barber?D?.find(I=>I._id===o.barber)?.full_name:"Any"}),e.jsx(ea,{className:`w-3 h-3 flex-shrink-0 transition-transform ${g?"rotate-180":""}`})]}),g&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-[#1A1A1A] border border-[#444444] rounded-lg shadow-lg max-h-32 overflow-y-auto text-xs",children:[e.jsxs("button",{type:"button",onClick:()=>{ne("barber",""),y(!1)},className:"w-full px-2 py-1.5 hover:bg-[#2A2A2A] transition-colors text-left text-gray-300",children:["Any available",!o.barber&&e.jsx(hr,{className:"w-3 h-3 text-[var(--color-primary)] float-right mt-0.5"})]}),D?.filter(I=>I.is_active).map(I=>e.jsxs("button",{type:"button",onClick:()=>{ne("barber",I._id),y(!1)},className:"w-full px-2 py-1.5 hover:bg-[#2A2A2A] transition-colors text-left text-gray-300",children:[I.full_name,o.barber===I._id&&e.jsx(hr,{className:"w-3 h-3 text-[var(--color-primary)] float-right mt-0.5"})]},I._id))||[]]})]})]})]}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-3 border border-[#333333]/50",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-200 mb-2 flex items-center",children:[e.jsx(rt,{className:"w-3.5 h-3.5 text-[var(--color-primary)] mr-1.5"}),"Schedule"]}),e.jsxs("div",{children:[e.jsx("input",{type:"date",value:o.date,onChange:I=>ne("date",I.target.value),min:new Date().toISOString().split("T")[0],className:"w-full h-9 px-2 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300",required:!0}),u.date&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.date})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("select",{value:o.time,onChange:I=>ne("time",I.target.value),className:"w-full h-9 px-2 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300",required:!0,children:[e.jsx("option",{value:"",children:"Select time"}),N.map(I=>e.jsxs("option",{value:I.display,disabled:!I.available,children:[I.display," ",I.available?"":"(Booked)"]},I.value))]}),u.time&&e.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.time})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Payment"}),e.jsxs("select",{value:o.paymentMethod,onChange:I=>ne("paymentMethod",I.target.value),className:"w-full h-8 px-2 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"digital_wallet",children:"Digital Wallet"})]})]})]})]}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-3 border border-[#333333]/50",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:o.notes,onChange:I=>ne("notes",I.target.value),className:"w-full h-12 px-2 py-1.5 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 resize-none",placeholder:"Special requests..."})]}),o.service&&o.date&&o.time&&e.jsxs("div",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#222222] rounded-lg p-3 border border-[var(--color-primary)]/20",children:[e.jsxs("h3",{className:"text-xs font-bold text-white mb-2 flex items-center",children:[e.jsx(hr,{className:"w-3.5 h-3.5 text-[var(--color-primary)] mr-1.5"}),"Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Service"}),e.jsx("p",{className:"text-white font-medium",children:E?.find(I=>I._id===o.service)?.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Date & Time"}),e.jsxs("p",{className:"text-white font-medium",children:[o.date?new Date(o.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"," ",o.time]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Barber"}),e.jsx("p",{className:"text-white font-medium text-xs",children:o.barber?D?.find(I=>I._id===o.barber)?.full_name:"Any"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Price"}),e.jsx("p",{className:"text-[var(--color-primary)] font-bold",children:E?.find(I=>I._id===o.service)?.hide_price?"Ask for Price":`${E?.find(I=>I._id===o.service)?.price?.toFixed(0)}`})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-3 border-t border-[#333333]",children:[e.jsx("button",{type:"button",onClick:()=>{X(),s()},disabled:d,className:"flex-1 h-9 bg-[#2A2A2A] text-gray-300 rounded-lg font-medium hover:bg-[#333333] transition-colors text-sm disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||!E||!D||!F,className:"flex-1 h-9 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg font-medium hover:shadow-lg disabled:opacity-50 transition-all text-sm flex items-center justify-center gap-1.5",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:"Create"})]})})]})]}),B&&e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>{S(null),s()}}),e.jsx("div",{className:"relative w-full max-w-sm transform rounded-2xl bg-gradient-to-br from-[#1A1A1A] to-[#222222] shadow-2xl transition-all z-[10000] border border-[#333333]/50",children:e.jsxs("div",{className:"text-center space-y-3 p-5",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mx-auto bg-green-500/20 border border-green-500/30",children:e.jsx(hr,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-white mb-1",children:"Booking Created!"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Details saved and customer notified"})]}),e.jsxs("div",{className:"text-left space-y-1.5 p-3 rounded-lg bg-[#0F0F0F]/50 border border-[#333333]/50 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Code:"}),e.jsxs("span",{className:"font-mono text-[var(--color-primary)]",children:["#",B.bookingCode]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Service:"}),e.jsx("span",{className:"text-gray-300",children:B.service})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Date & Time:"}),e.jsxs("span",{className:"text-gray-300",children:[new Date(B.date).toLocaleDateString()," ",B.time]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Barber:"}),e.jsx("span",{className:"text-gray-300",children:B.barber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Price:"}),e.jsx("span",{className:"text-green-400 font-bold",children:E?.find(I=>I.name===B.service)?.hide_price?"Ask for Price":`${B.price?.toFixed(2)}`})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{S(null),s()},className:"flex-1 py-2 px-3 rounded-lg font-medium text-gray-300 bg-[#2A2A2A] hover:bg-[#333333] transition-colors text-sm",children:"Close"}),e.jsx("button",{onClick:()=>{S(null),s()},className:"flex-1 py-2 px-3 rounded-lg font-medium text-white bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:shadow-lg transition-all text-sm",children:"Done"})]})]})})]})})]})};var mo={},Kp,bj;function vF(){return bj||(bj=1,Kp=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Kp}var Xp={},En={},vj;function Ai(){if(vj)return En;vj=1;let t;const s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return En.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},En.getSymbolTotalCodewords=function(i){return s[i]},En.getBCHDigit=function(n){let i=0;for(;n!==0;)i++,n>>>=1;return i},En.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');t=i},En.isKanjiModeEnabled=function(){return typeof t<"u"},En.toSJIS=function(i){return t(i)},En}var Zp={},yj;function rb(){return yj||(yj=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function s(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,o){if(t.isValid(i))return i;try{return s(i)}catch{return o}}}(Zp)),Zp}var ef,jj;function yF(){if(jj)return ef;jj=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(s){const n=Math.floor(s/8);return(this.buffer[n]>>>7-s%8&1)===1},put:function(s,n){for(let i=0;i<n;i++)this.putBit((s>>>n-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),s&&(this.buffer[n]|=128>>>this.length%8),this.length++}},ef=t,ef}var tf,Nj;function jF(){if(Nj)return tf;Nj=1;function t(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}return t.prototype.set=function(s,n,i,o){const c=s*this.size+n;this.data[c]=i,o&&(this.reservedBit[c]=!0)},t.prototype.get=function(s,n){return this.data[s*this.size+n]},t.prototype.xor=function(s,n,i){this.data[s*this.size+n]^=i},t.prototype.isReserved=function(s,n){return this.reservedBit[s*this.size+n]},tf=t,tf}var sf={},wj;function NF(){return wj||(wj=1,function(t){const s=Ai().getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,c=s(i),d=c===145?26:Math.ceil((c-13)/(2*o-2))*2,m=[c-7];for(let h=1;h<o-1;h++)m[h]=m[h-1]-d;return m.push(6),m.reverse()},t.getPositions=function(i){const o=[],c=t.getRowColCoords(i),d=c.length;for(let m=0;m<d;m++)for(let h=0;h<d;h++)m===0&&h===0||m===0&&h===d-1||m===d-1&&h===0||o.push([c[m],c[h]]);return o}}(sf)),sf}var rf={},Aj;function wF(){if(Aj)return rf;Aj=1;const t=Ai().getSymbolSize,s=7;return rf.getPositions=function(i){const o=t(i);return[[0,0],[o-s,0],[0,o-s]]},rf}var af={},Cj;function AF(){return Cj||(Cj=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const c=o.size;let d=0,m=0,h=0,p=null,u=null;for(let f=0;f<c;f++){m=h=0,p=u=null;for(let g=0;g<c;g++){let y=o.get(f,g);y===p?m++:(m>=5&&(d+=s.N1+(m-5)),p=y,m=1),y=o.get(g,f),y===u?h++:(h>=5&&(d+=s.N1+(h-5)),u=y,h=1)}m>=5&&(d+=s.N1+(m-5)),h>=5&&(d+=s.N1+(h-5))}return d},t.getPenaltyN2=function(o){const c=o.size;let d=0;for(let m=0;m<c-1;m++)for(let h=0;h<c-1;h++){const p=o.get(m,h)+o.get(m,h+1)+o.get(m+1,h)+o.get(m+1,h+1);(p===4||p===0)&&d++}return d*s.N2},t.getPenaltyN3=function(o){const c=o.size;let d=0,m=0,h=0;for(let p=0;p<c;p++){m=h=0;for(let u=0;u<c;u++)m=m<<1&2047|o.get(p,u),u>=10&&(m===1488||m===93)&&d++,h=h<<1&2047|o.get(u,p),u>=10&&(h===1488||h===93)&&d++}return d*s.N3},t.getPenaltyN4=function(o){let c=0;const d=o.data.length;for(let h=0;h<d;h++)c+=o.data[h];return Math.abs(Math.ceil(c*100/d/5)-10)*s.N4};function n(i,o,c){switch(i){case t.Patterns.PATTERN000:return(o+c)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return c%3===0;case t.Patterns.PATTERN011:return(o+c)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(c/3))%2===0;case t.Patterns.PATTERN101:return o*c%2+o*c%3===0;case t.Patterns.PATTERN110:return(o*c%2+o*c%3)%2===0;case t.Patterns.PATTERN111:return(o*c%3+(o+c)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(o,c){const d=c.size;for(let m=0;m<d;m++)for(let h=0;h<d;h++)c.isReserved(h,m)||c.xor(h,m,n(o,h,m))},t.getBestMask=function(o,c){const d=Object.keys(t.Patterns).length;let m=0,h=1/0;for(let p=0;p<d;p++){c(p),t.applyMask(p,o);const u=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(p,o),u<h&&(h=u,m=p)}return m}}(af)),af}var _u={},Ej;function V3(){if(Ej)return _u;Ej=1;const t=rb(),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return _u.getBlocksCount=function(o,c){switch(c){case t.L:return s[(o-1)*4+0];case t.M:return s[(o-1)*4+1];case t.Q:return s[(o-1)*4+2];case t.H:return s[(o-1)*4+3];default:return}},_u.getTotalCodewordsCount=function(o,c){switch(c){case t.L:return n[(o-1)*4+0];case t.M:return n[(o-1)*4+1];case t.Q:return n[(o-1)*4+2];case t.H:return n[(o-1)*4+3];default:return}},_u}var nf={},Rl={},kj;function CF(){if(kj)return Rl;kj=1;const t=new Uint8Array(512),s=new Uint8Array(256);return function(){let i=1;for(let o=0;o<255;o++)t[o]=i,s[i]=o,i<<=1,i&256&&(i^=285);for(let o=255;o<512;o++)t[o]=t[o-255]}(),Rl.log=function(i){if(i<1)throw new Error("log("+i+")");return s[i]},Rl.exp=function(i){return t[i]},Rl.mul=function(i,o){return i===0||o===0?0:t[s[i]+s[o]]},Rl}var _j;function EF(){return _j||(_j=1,function(t){const s=CF();t.mul=function(i,o){const c=new Uint8Array(i.length+o.length-1);for(let d=0;d<i.length;d++)for(let m=0;m<o.length;m++)c[d+m]^=s.mul(i[d],o[m]);return c},t.mod=function(i,o){let c=new Uint8Array(i);for(;c.length-o.length>=0;){const d=c[0];for(let h=0;h<o.length;h++)c[h]^=s.mul(o[h],d);let m=0;for(;m<c.length&&c[m]===0;)m++;c=c.slice(m)}return c},t.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let c=0;c<i;c++)o=t.mul(o,new Uint8Array([1,s.exp(c)]));return o}}(nf)),nf}var of,Bj;function kF(){if(Bj)return of;Bj=1;const t=EF();function s(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return s.prototype.initialize=function(i){this.degree=i,this.genPoly=t.generateECPolynomial(this.degree)},s.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(i.length+this.degree);o.set(i);const c=t.mod(o,this.genPoly),d=this.degree-c.length;if(d>0){const m=new Uint8Array(this.degree);return m.set(c,d),m}return c},of=s,of}var lf={},cf={},df={},Sj;function H3(){return Sj||(Sj=1,df.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40}),df}var va={},Dj;function J3(){if(Dj)return va;Dj=1;const t="[0-9]+",s="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;va.KANJI=new RegExp(n,"g"),va.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),va.BYTE=new RegExp(i,"g"),va.NUMERIC=new RegExp(t,"g"),va.ALPHANUMERIC=new RegExp(s,"g");const o=new RegExp("^"+n+"$"),c=new RegExp("^"+t+"$"),d=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return va.testKanji=function(h){return o.test(h)},va.testNumeric=function(h){return c.test(h)},va.testAlphanumeric=function(h){return d.test(h)},va}var Fj;function Ci(){return Fj||(Fj=1,function(t){const s=H3(),n=J3();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(c,d){if(!c.ccBits)throw new Error("Invalid mode: "+c);if(!s.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?c.ccBits[0]:d<27?c.ccBits[1]:c.ccBits[2]},t.getBestModeForData=function(c){return n.testNumeric(c)?t.NUMERIC:n.testAlphanumeric(c)?t.ALPHANUMERIC:n.testKanji(c)?t.KANJI:t.BYTE},t.toString=function(c){if(c&&c.id)return c.id;throw new Error("Invalid mode")},t.isValid=function(c){return c&&c.bit&&c.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(c,d){if(t.isValid(c))return c;try{return i(c)}catch{return d}}}(cf)),cf}var Pj;function _F(){return Pj||(Pj=1,function(t){const s=Ai(),n=V3(),i=rb(),o=Ci(),c=H3(),d=7973,m=s.getBCHDigit(d);function h(g,y,b){for(let j=1;j<=40;j++)if(y<=t.getCapacity(j,b,g))return j}function p(g,y){return o.getCharCountIndicator(g,y)+4}function u(g,y){let b=0;return g.forEach(function(j){const N=p(j.mode,y);b+=N+j.getBitsLength()}),b}function f(g,y){for(let b=1;b<=40;b++)if(u(g,b)<=t.getCapacity(b,y,o.MIXED))return b}t.from=function(y,b){return c.isValid(y)?parseInt(y,10):b},t.getCapacity=function(y,b,j){if(!c.isValid(y))throw new Error("Invalid QR Code version");typeof j>"u"&&(j=o.BYTE);const N=s.getSymbolTotalCodewords(y),w=n.getTotalCodewordsCount(y,b),B=(N-w)*8;if(j===o.MIXED)return B;const S=B-p(j,y);switch(j){case o.NUMERIC:return Math.floor(S/10*3);case o.ALPHANUMERIC:return Math.floor(S/11*2);case o.KANJI:return Math.floor(S/13);case o.BYTE:default:return Math.floor(S/8)}},t.getBestVersionForData=function(y,b){let j;const N=i.from(b,i.M);if(Array.isArray(y)){if(y.length>1)return f(y,N);if(y.length===0)return 1;j=y[0]}else j=y;return h(j.mode,j.getLength(),N)},t.getEncodedBits=function(y){if(!c.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;s.getBCHDigit(b)-m>=0;)b^=d<<s.getBCHDigit(b)-m;return y<<12|b}}(lf)),lf}var xf={},Tj;function BF(){if(Tj)return xf;Tj=1;const t=Ai(),s=1335,n=21522,i=t.getBCHDigit(s);return xf.getEncodedBits=function(c,d){const m=c.bit<<3|d;let h=m<<10;for(;t.getBCHDigit(h)-i>=0;)h^=s<<t.getBCHDigit(h)-i;return(m<<10|h)^n},xf}var uf={},mf,Oj;function SF(){if(Oj)return mf;Oj=1;const t=Ci();function s(n){this.mode=t.NUMERIC,this.data=n.toString()}return s.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(i){let o,c,d;for(o=0;o+3<=this.data.length;o+=3)c=this.data.substr(o,3),d=parseInt(c,10),i.put(d,10);const m=this.data.length-o;m>0&&(c=this.data.substr(o),d=parseInt(c,10),i.put(d,m*3+1))},mf=s,mf}var hf,Mj;function DF(){if(Mj)return hf;Mj=1;const t=Ci(),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(i){this.mode=t.ALPHANUMERIC,this.data=i}return n.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(o){let c;for(c=0;c+2<=this.data.length;c+=2){let d=s.indexOf(this.data[c])*45;d+=s.indexOf(this.data[c+1]),o.put(d,11)}this.data.length%2&&o.put(s.indexOf(this.data[c]),6)},hf=n,hf}var pf,Rj;function FF(){if(Rj)return pf;Rj=1;const t=Ci();function s(n){this.mode=t.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return s.getBitsLength=function(i){return i*8},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(n){for(let i=0,o=this.data.length;i<o;i++)n.put(this.data[i],8)},pf=s,pf}var ff,zj;function PF(){if(zj)return ff;zj=1;const t=Ci(),s=Ai();function n(i){this.mode=t.KANJI,this.data=i}return n.getBitsLength=function(o){return o*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let o;for(o=0;o<this.data.length;o++){let c=s.toSJIS(this.data[o]);if(c>=33088&&c<=40956)c-=33088;else if(c>=57408&&c<=60351)c-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);c=(c>>>8&255)*192+(c&255),i.put(c,13)}},ff=n,ff}var gf={exports:{}},Ij;function TF(){return Ij||(Ij=1,function(t){var s={single_source_shortest_paths:function(n,i,o){var c={},d={};d[i]=0;var m=s.PriorityQueue.make();m.push(i,0);for(var h,p,u,f,g,y,b,j,N;!m.empty();){h=m.pop(),p=h.value,f=h.cost,g=n[p]||{};for(u in g)g.hasOwnProperty(u)&&(y=g[u],b=f+y,j=d[u],N=typeof d[u]>"u",(N||j>b)&&(d[u]=b,m.push(u,b),c[u]=p))}if(typeof o<"u"&&typeof d[o]>"u"){var w=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(w)}return c},extract_shortest_path_from_predecessor_list:function(n,i){for(var o=[],c=i;c;)o.push(c),n[c],c=n[c];return o.reverse(),o},find_path:function(n,i,o){var c=s.single_source_shortest_paths(n,i,o);return s.extract_shortest_path_from_predecessor_list(c,o)},PriorityQueue:{make:function(n){var i=s.PriorityQueue,o={},c;n=n||{};for(c in i)i.hasOwnProperty(c)&&(o[c]=i[c]);return o.queue=[],o.sorter=n.sorter||i.default_sorter,o},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var o={value:n,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=s}(gf)),gf.exports}var Lj;function OF(){return Lj||(Lj=1,function(t){const s=Ci(),n=SF(),i=DF(),o=FF(),c=PF(),d=J3(),m=Ai(),h=TF();function p(w){return unescape(encodeURIComponent(w)).length}function u(w,B,S){const _=[];let k;for(;(k=w.exec(S))!==null;)_.push({data:k[0],index:k.index,mode:B,length:k[0].length});return _}function f(w){const B=u(d.NUMERIC,s.NUMERIC,w),S=u(d.ALPHANUMERIC,s.ALPHANUMERIC,w);let _,k;return m.isKanjiModeEnabled()?(_=u(d.BYTE,s.BYTE,w),k=u(d.KANJI,s.KANJI,w)):(_=u(d.BYTE_KANJI,s.BYTE,w),k=[]),B.concat(S,_,k).sort(function(D,F){return D.index-F.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function g(w,B){switch(B){case s.NUMERIC:return n.getBitsLength(w);case s.ALPHANUMERIC:return i.getBitsLength(w);case s.KANJI:return c.getBitsLength(w);case s.BYTE:return o.getBitsLength(w)}}function y(w){return w.reduce(function(B,S){const _=B.length-1>=0?B[B.length-1]:null;return _&&_.mode===S.mode?(B[B.length-1].data+=S.data,B):(B.push(S),B)},[])}function b(w){const B=[];for(let S=0;S<w.length;S++){const _=w[S];switch(_.mode){case s.NUMERIC:B.push([_,{data:_.data,mode:s.ALPHANUMERIC,length:_.length},{data:_.data,mode:s.BYTE,length:_.length}]);break;case s.ALPHANUMERIC:B.push([_,{data:_.data,mode:s.BYTE,length:_.length}]);break;case s.KANJI:B.push([_,{data:_.data,mode:s.BYTE,length:p(_.data)}]);break;case s.BYTE:B.push([{data:_.data,mode:s.BYTE,length:p(_.data)}])}}return B}function j(w,B){const S={},_={start:{}};let k=["start"];for(let E=0;E<w.length;E++){const D=w[E],F=[];for(let M=0;M<D.length;M++){const P=D[M],T=""+E+M;F.push(T),S[T]={node:P,lastCount:0},_[T]={};for(let L=0;L<k.length;L++){const X=k[L];S[X]&&S[X].node.mode===P.mode?(_[X][T]=g(S[X].lastCount+P.length,P.mode)-g(S[X].lastCount,P.mode),S[X].lastCount+=P.length):(S[X]&&(S[X].lastCount=P.length),_[X][T]=g(P.length,P.mode)+4+s.getCharCountIndicator(P.mode,B))}}k=F}for(let E=0;E<k.length;E++)_[k[E]].end=0;return{map:_,table:S}}function N(w,B){let S;const _=s.getBestModeForData(w);if(S=s.from(B,_),S!==s.BYTE&&S.bit<_.bit)throw new Error('"'+w+'" cannot be encoded with mode '+s.toString(S)+`.
 Suggested mode is: `+s.toString(_));switch(S===s.KANJI&&!m.isKanjiModeEnabled()&&(S=s.BYTE),S){case s.NUMERIC:return new n(w);case s.ALPHANUMERIC:return new i(w);case s.KANJI:return new c(w);case s.BYTE:return new o(w)}}t.fromArray=function(B){return B.reduce(function(S,_){return typeof _=="string"?S.push(N(_,null)):_.data&&S.push(N(_.data,_.mode)),S},[])},t.fromString=function(B,S){const _=f(B,m.isKanjiModeEnabled()),k=b(_),E=j(k,S),D=h.find_path(E.map,"start","end"),F=[];for(let M=1;M<D.length-1;M++)F.push(E.table[D[M]].node);return t.fromArray(y(F))},t.rawSplit=function(B){return t.fromArray(f(B,m.isKanjiModeEnabled()))}}(uf)),uf}var qj;function MF(){if(qj)return Xp;qj=1;const t=Ai(),s=rb(),n=yF(),i=jF(),o=NF(),c=wF(),d=AF(),m=V3(),h=kF(),p=_F(),u=BF(),f=Ci(),g=OF();function y(E,D){const F=E.size,M=c.getPositions(D);for(let P=0;P<M.length;P++){const T=M[P][0],L=M[P][1];for(let X=-1;X<=7;X++)if(!(T+X<=-1||F<=T+X))for(let Z=-1;Z<=7;Z++)L+Z<=-1||F<=L+Z||(X>=0&&X<=6&&(Z===0||Z===6)||Z>=0&&Z<=6&&(X===0||X===6)||X>=2&&X<=4&&Z>=2&&Z<=4?E.set(T+X,L+Z,!0,!0):E.set(T+X,L+Z,!1,!0))}}function b(E){const D=E.size;for(let F=8;F<D-8;F++){const M=F%2===0;E.set(F,6,M,!0),E.set(6,F,M,!0)}}function j(E,D){const F=o.getPositions(D);for(let M=0;M<F.length;M++){const P=F[M][0],T=F[M][1];for(let L=-2;L<=2;L++)for(let X=-2;X<=2;X++)L===-2||L===2||X===-2||X===2||L===0&&X===0?E.set(P+L,T+X,!0,!0):E.set(P+L,T+X,!1,!0)}}function N(E,D){const F=E.size,M=p.getEncodedBits(D);let P,T,L;for(let X=0;X<18;X++)P=Math.floor(X/3),T=X%3+F-8-3,L=(M>>X&1)===1,E.set(P,T,L,!0),E.set(T,P,L,!0)}function w(E,D,F){const M=E.size,P=u.getEncodedBits(D,F);let T,L;for(T=0;T<15;T++)L=(P>>T&1)===1,T<6?E.set(T,8,L,!0):T<8?E.set(T+1,8,L,!0):E.set(M-15+T,8,L,!0),T<8?E.set(8,M-T-1,L,!0):T<9?E.set(8,15-T-1+1,L,!0):E.set(8,15-T-1,L,!0);E.set(M-8,8,1,!0)}function B(E,D){const F=E.size;let M=-1,P=F-1,T=7,L=0;for(let X=F-1;X>0;X-=2)for(X===6&&X--;;){for(let Z=0;Z<2;Z++)if(!E.isReserved(P,X-Z)){let ne=!1;L<D.length&&(ne=(D[L]>>>T&1)===1),E.set(P,X-Z,ne),T--,T===-1&&(L++,T=7)}if(P+=M,P<0||F<=P){P-=M,M=-M;break}}}function S(E,D,F){const M=new n;F.forEach(function(Z){M.put(Z.mode.bit,4),M.put(Z.getLength(),f.getCharCountIndicator(Z.mode,E)),Z.write(M)});const P=t.getSymbolTotalCodewords(E),T=m.getTotalCodewordsCount(E,D),L=(P-T)*8;for(M.getLengthInBits()+4<=L&&M.put(0,4);M.getLengthInBits()%8!==0;)M.putBit(0);const X=(L-M.getLengthInBits())/8;for(let Z=0;Z<X;Z++)M.put(Z%2?17:236,8);return _(M,E,D)}function _(E,D,F){const M=t.getSymbolTotalCodewords(D),P=m.getTotalCodewordsCount(D,F),T=M-P,L=m.getBlocksCount(D,F),X=M%L,Z=L-X,ne=Math.floor(M/L),I=Math.floor(T/L),O=I+1,G=ne-I,te=new h(G);let Q=0;const ee=new Array(L),le=new Array(L);let R=0;const q=new Uint8Array(E.buffer);for(let oe=0;oe<L;oe++){const de=oe<Z?I:O;ee[oe]=q.slice(Q,Q+de),le[oe]=te.encode(ee[oe]),Q+=de,R=Math.max(R,de)}const J=new Uint8Array(M);let $=0,Y,xe;for(Y=0;Y<R;Y++)for(xe=0;xe<L;xe++)Y<ee[xe].length&&(J[$++]=ee[xe][Y]);for(Y=0;Y<G;Y++)for(xe=0;xe<L;xe++)J[$++]=le[xe][Y];return J}function k(E,D,F,M){let P;if(Array.isArray(E))P=g.fromArray(E);else if(typeof E=="string"){let ne=D;if(!ne){const I=g.rawSplit(E);ne=p.getBestVersionForData(I,F)}P=g.fromString(E,ne||40)}else throw new Error("Invalid data");const T=p.getBestVersionForData(P,F);if(!T)throw new Error("The amount of data is too big to be stored in a QR Code");if(!D)D=T;else if(D<T)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+T+`.
`);const L=S(D,F,P),X=t.getSymbolSize(D),Z=new i(X);return y(Z,D),b(Z),j(Z,D),w(Z,F,0),D>=7&&N(Z,D),B(Z,L),isNaN(M)&&(M=d.getBestMask(Z,w.bind(null,Z,F))),d.applyMask(M,Z),w(Z,F,M),{modules:Z,version:D,errorCorrectionLevel:F,maskPattern:M,segments:P}}return Xp.create=function(D,F){if(typeof D>"u"||D==="")throw new Error("No input text");let M=s.M,P,T;return typeof F<"u"&&(M=s.from(F.errorCorrectionLevel,s.M),P=p.from(F.version),T=d.from(F.maskPattern),F.toSJISFunc&&t.setToSJISFunction(F.toSJISFunc)),k(D,P,M,T)},Xp}var bf={},vf={},$j;function G3(){return $j||($j=1,function(t){function s(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(c){return[c,c]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,c=i.width&&i.width>=21?i.width:void 0,d=i.scale||4;return{width:c,scale:c?4:d,margin:o,color:{dark:s(i.color.dark||"#000000ff"),light:s(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},t.getImageWidth=function(i,o){const c=t.getScale(i,o);return Math.floor((i+o.margin*2)*c)},t.qrToImageData=function(i,o,c){const d=o.modules.size,m=o.modules.data,h=t.getScale(d,c),p=Math.floor((d+c.margin*2)*h),u=c.margin*h,f=[c.color.light,c.color.dark];for(let g=0;g<p;g++)for(let y=0;y<p;y++){let b=(g*p+y)*4,j=c.color.light;if(g>=u&&y>=u&&g<p-u&&y<p-u){const N=Math.floor((g-u)/h),w=Math.floor((y-u)/h);j=f[m[N*d+w]?1:0]}i[b++]=j.r,i[b++]=j.g,i[b++]=j.b,i[b]=j.a}}}(vf)),vf}var Uj;function RF(){return Uj||(Uj=1,function(t){const s=G3();function n(o,c,d){o.clearRect(0,0,c.width,c.height),c.style||(c.style={}),c.height=d,c.width=d,c.style.height=d+"px",c.style.width=d+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(c,d,m){let h=m,p=d;typeof h>"u"&&(!d||!d.getContext)&&(h=d,d=void 0),d||(p=i()),h=s.getOptions(h);const u=s.getImageWidth(c.modules.size,h),f=p.getContext("2d"),g=f.createImageData(u,u);return s.qrToImageData(g.data,c,h),n(f,p,u),f.putImageData(g,0,0),p},t.renderToDataURL=function(c,d,m){let h=m;typeof h>"u"&&(!d||!d.getContext)&&(h=d,d=void 0),h||(h={});const p=t.render(c,d,h),u=h.type||"image/png",f=h.rendererOpts||{};return p.toDataURL(u,f.quality)}}(bf)),bf}var yf={},Vj;function zF(){if(Vj)return yf;Vj=1;const t=G3();function s(o,c){const d=o.a/255,m=c+'="'+o.hex+'"';return d<1?m+" "+c+'-opacity="'+d.toFixed(2).slice(1)+'"':m}function n(o,c,d){let m=o+c;return typeof d<"u"&&(m+=" "+d),m}function i(o,c,d){let m="",h=0,p=!1,u=0;for(let f=0;f<o.length;f++){const g=Math.floor(f%c),y=Math.floor(f/c);!g&&!p&&(p=!0),o[f]?(u++,f>0&&g>0&&o[f-1]||(m+=p?n("M",g+d,.5+y+d):n("m",h,0),h=0,p=!1),g+1<c&&o[f+1]||(m+=n("h",u),u=0)):h++}return m}return yf.render=function(c,d,m){const h=t.getOptions(d),p=c.modules.size,u=c.modules.data,f=p+h.margin*2,g=h.color.light.a?"<path "+s(h.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",y="<path "+s(h.color.dark,"stroke")+' d="'+i(u,p,h.margin)+'"/>',b='viewBox="0 0 '+f+" "+f+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(h.width?'width="'+h.width+'" height="'+h.width+'" ':"")+b+' shape-rendering="crispEdges">'+g+y+`</svg>
`;return typeof m=="function"&&m(null,N),N},yf}var Hj;function IF(){if(Hj)return mo;Hj=1;const t=vF(),s=MF(),n=RF(),i=zF();function o(c,d,m,h,p){const u=[].slice.call(arguments,1),f=u.length,g=typeof u[f-1]=="function";if(!g&&!t())throw new Error("Callback required as last argument");if(g){if(f<2)throw new Error("Too few arguments provided");f===2?(p=m,m=d,d=h=void 0):f===3&&(d.getContext&&typeof p>"u"?(p=h,h=void 0):(p=h,h=m,m=d,d=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(m=d,d=h=void 0):f===2&&!d.getContext&&(h=m,m=d,d=void 0),new Promise(function(y,b){try{const j=s.create(m,h);y(c(j,d,h))}catch(j){b(j)}})}try{const y=s.create(m,h);p(null,c(y,d,h))}catch(y){p(y)}}return mo.create=s.create,mo.toCanvas=o.bind(null,n.render),mo.toDataURL=o.bind(null,n.renderToDataURL),mo.toString=o.bind(null,function(c,d,m){return i.render(c,m)}),mo}var LF=IF();const Cr=GA(LF),qF=({stats:t=[]})=>{const s=(n,i)=>i.toLowerCase().includes("revenue")?as:i.toLowerCase().includes("booking")||i.toLowerCase().includes("appointment")?rt:i.toLowerCase().includes("customer")||i.toLowerCase().includes("client")?hs:i.toLowerCase().includes("voucher")?Qt:i.toLowerCase().includes("service")?Vt:i.toLowerCase().includes("barber")?ys:i.toLowerCase().includes("point")?c0:Vt;return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4",children:t.map((n,i)=>{const o=s(n.icon,n.label);return e.jsx("div",{className:"bg-[#1A1A1A] p-3 sm:p-4 rounded-xl border border-[#2A2A2A]/50 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02]",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-1 truncate",children:n.label}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:n.value})]}),e.jsx(o,{className:"h-5 w-5 text-[var(--color-primary)] flex-shrink-0"})]})},i)})})},$F=({activities:t=[]})=>{const{user:s}=Dt(),n=s?.role==="super_admin"?me(H.services.bookings.getAllBookings):s?.branch_id?me(H.services.bookings.getBookingsByBranch,{branch_id:s.branch_id}):void 0,i=s?.branch_id?me(H.services.transactions.getTransactionsByBranch,{branch_id:s.branch_id}):void 0,o=()=>{if(t.length>0)return t;const p=[];return n&&n.length>0&&n.sort((f,g)=>g.createdAt-f.createdAt).slice(0,5).forEach(f=>{const g=c(f.createdAt),y=f.customer_name||"Customer";let b="",j="new",N="booking";f.status==="completed"?(b=`${y} completed their ${f.service_name||"service"} appointment`,j="completed"):f.status==="cancelled"?(b=`${y} cancelled their ${f.service_name||"service"} appointment`,j="cancelled",N="info"):f.status==="confirmed"?(b=`${y} confirmed their ${f.service_name||"service"} appointment`,j="confirmed"):b=`New booking from ${y} for ${f.service_name||"service"}`,p.push({id:f._id,type:N,message:b,time:g,status:j})}),i&&i.length>0&&i.sort((f,g)=>g.createdAt-f.createdAt).slice(0,3).forEach(f=>{const g=c(f.createdAt),y=f.customer_name||"Customer";p.push({id:f._id,type:"sale",message:`${y} made a purchase - ${f.total_amount.toFixed(2)}`,time:g,status:f.payment_status==="completed"?"completed":"new"})}),p.sort((u,f)=>{const g=y=>y.includes("just now")?0:y.includes("min")?parseInt(y):y.includes("hour")?parseInt(y)*60:y.includes("day")?parseInt(y)*1440:99999;return g(u.time)-g(f.time)}).slice(0,8)},c=p=>{const f=Date.now()-p,g=Math.floor(f/6e4),y=Math.floor(f/36e5),b=Math.floor(f/864e5);return g<1?"just now":g<60?`${g} min ago`:y<24?`${y} hour${y>1?"s":""} ago`:`${b} day${b>1?"s":""} ago`},d=o(),m=p=>{switch(p){case"booking":case"appointment":return rt;case"voucher":return Qt;case"customer":case"client":return zr;case"sale":return as;case"user":return tt;case"info":default:return Ir}},h=(p,u)=>{if(u==="completed")return{icon:"text-green-500",status:"bg-green-500/10 text-green-500 border border-green-500/20"};if(u==="cancelled")return{icon:"text-red-500",status:"bg-red-500/10 text-red-500 border border-red-500/20"};if(u==="confirmed")return{icon:"text-blue-500",status:"bg-blue-500/10 text-blue-500 border border-blue-500/20"};const g={booking:"blue",appointment:"blue",voucher:"orange",customer:"purple",client:"purple",sale:"green",user:"gray",info:"gray"}[p]||"gray";return{blue:{icon:"text-blue-500",status:"bg-blue-500/10 text-blue-500 border border-blue-500/20"},orange:{icon:"text-[var(--color-primary)]",status:"bg-[var(--color-primary)]/10 text-[var(--color-primary)] border border-[var(--color-primary)]/20"},purple:{icon:"text-purple-500",status:"bg-purple-500/10 text-purple-500 border border-purple-500/20"},green:{icon:"text-green-500",status:"bg-green-500/10 text-green-500 border border-green-500/20"},gray:{icon:"text-gray-500",status:"bg-gray-500/10 text-gray-500 border border-gray-500/20"}}[g]};return e.jsxs("div",{className:"p-6 bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 rounded-2xl shadow-lg",children:[e.jsx("div",{className:"flex items-center justify-between mb-5",children:e.jsx("h3",{className:"text-xl font-bold text-white",children:"Recent Activity"})}),e.jsx("div",{className:"space-y-2",children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ir,{className:"mx-auto h-10 w-10 text-gray-500 mb-3"}),e.jsx("p",{className:"text-sm text-gray-400",children:"No recent activity available"})]}):d.map(p=>{const u=m(p.type),f=h(p.type,p.status);return e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-[#1A1A1A]/50 border border-transparent hover:bg-[#1A1A1A]/80 hover:border-[var(--color-primary)]/30 transition-all duration-200 group cursor-pointer",children:[e.jsx(u,{className:`w-5 h-5 flex-shrink-0 ${f.icon}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white mb-0.5 group-hover:text-[var(--color-primary)] transition-colors truncate",children:p.message}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Nt,{className:"w-3 h-3 text-gray-500"}),e.jsx("p",{className:"text-xs text-gray-500",children:p.time})]})]}),e.jsx("div",{className:`px-2.5 py-1 rounded-md text-xs font-semibold uppercase tracking-wide ${f.status} flex-shrink-0`,children:p.status})]},p.id)})})]})},UF=({tabs:t,activeTab:s,onTabChange:n,incompleteBookingsCount:i=0})=>{const[o,c]=C.useState(!1),d=C.useRef(null);C.useEffect(()=>{const y=b=>{d.current&&!d.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[]);const m=y=>({overview:am,customers:hs,bookings:rt,services:ys,vouchers:Qt,reports:ja,barbers:a0,users:hs,events:s0,calendar:s0,products:Aa,notifications:Is,branches:Gs,payroll:as,email_marketing:Ht,pos:ds})[y]||am,h=["overview","reports","bookings","calendar","barbers","users","services","vouchers","payroll"],p=t.filter(y=>h.includes(y.id)),u=t.filter(y=>!h.includes(y.id)),f=u.find(y=>y.id===s),g=y=>{n(y),c(!1)};return e.jsxs("div",{className:"bg-[#0A0A0A] backdrop-blur-sm border border-[#1A1A1A]/30 rounded-xl sm:rounded-2xl shadow-2xl shadow-black/40 overflow-visible relative z-10",children:[e.jsx("nav",{className:"hidden lg:flex items-center justify-center p-1.5",children:e.jsxs("div",{className:"flex items-center space-x-0.5 bg-[#050505]/60 rounded-lg p-1",children:[p.map(y=>{const b=m(y.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>g(y.id),className:`relative flex items-center space-x-2 px-3 py-2.5 rounded-md font-medium text-xs transition-all duration-250 group min-w-0 ${s===y.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-md shadow-[var(--color-primary)]/20":"text-gray-400 hover:text-white hover:bg-[#1A1A1A]/40"}`,children:[s===y.id&&e.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-full"}),e.jsx("div",{className:`flex items-center justify-center w-4 h-4 transition-all duration-200 ${s===y.id?"text-white":"text-gray-500 group-hover:text-[var(--color-primary)]"}`,children:e.jsx(b,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:y.label}),y.id==="bookings"&&i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[16px] h-[16px] flex items-center justify-center px-0.5",children:i>99?"99+":i})]})},y.id)}),u.length>0&&e.jsxs("div",{className:"relative",ref:d,children:[e.jsx("button",{onClick:()=>c(!o),className:`relative flex items-center space-x-1.5 px-3 py-2.5 rounded-md font-medium text-xs transition-all duration-250 group ${f?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-md shadow-[var(--color-primary)]/20":"text-gray-400 hover:text-white hover:bg-[#1A1A1A]/40"}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-0.5 h-0.5 bg-white rounded-full"}),e.jsx("div",{className:"flex items-center justify-center w-4 h-4 text-white",children:fr.createElement(m(f.id),{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:f.label}),e.jsx(ea,{className:`w-3.5 h-3.5 text-white transition-transform duration-200 ${o?"rotate-180":""}`})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center w-4 h-4 text-gray-500 group-hover:text-[var(--color-primary)]",children:e.jsx(Qp,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:"More"}),e.jsx(ea,{className:`w-3.5 h-3.5 text-gray-500 group-hover:text-[var(--color-primary)] transition-transform duration-200 ${o?"rotate-180":""}`})]})}),o&&e.jsx("div",{className:"absolute top-full left-0 mt-1.5 w-44 bg-[#050505]/95 backdrop-blur-xl rounded-lg shadow-2xl border border-[#1A1A1A]/50 py-1.5",style:{zIndex:10,position:"absolute"},children:u.map(y=>{const b=m(y.id);return e.jsxs("button",{onClick:()=>g(y.id),className:`w-full flex items-center space-x-2.5 px-3 py-2 text-left transition-all duration-200 ${s===y.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white":"text-gray-400 hover:bg-[#1A1A1A]/40 hover:text-white"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-4 h-4 ${s===y.id?"text-white":"text-gray-500"}`,children:e.jsx(b,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium text-xs",children:y.label})]},y.id)})})]})]})}),e.jsx("nav",{className:"lg:hidden",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 p-2 sm:p-3 justify-center",children:[p.map(y=>{const b=m(y.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>g(y.id),className:`flex flex-col items-center justify-center px-2.5 sm:px-3 py-2 sm:py-2.5 rounded-lg sm:rounded-xl font-medium text-xs transition-all duration-200 whitespace-nowrap relative flex-shrink-0 min-w-[60px] sm:min-w-[70px] touch-manipulation ${s===y.id?"bg-gradient-to-b from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg scale-105":"text-gray-300 hover:text-white hover:bg-[#2A2A2A] active:scale-95"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 sm:w-6 sm:h-6 mb-1 transition-all duration-200 ${s===y.id?"text-white":"text-gray-400"}`,children:e.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("span",{className:"font-semibold text-[10px] sm:text-xs leading-tight",children:y.label}),s===y.id&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),y.id==="bookings"&&i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[16px] h-[16px] flex items-center justify-center px-1",children:i>99?"99+":i})]})},y.id)}),u.length>0&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!o),className:`flex flex-col items-center justify-center px-2.5 sm:px-3 py-2 sm:py-2.5 rounded-lg sm:rounded-xl font-medium text-xs transition-all duration-200 whitespace-nowrap flex-shrink-0 min-w-[60px] sm:min-w-[70px] touch-manipulation ${f?"bg-gradient-to-b from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-md scale-105":"text-gray-400 hover:text-white hover:bg-[#1A1A1A]/40 active:scale-95"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 sm:w-6 sm:h-6 mb-1 transition-all duration-200 ${f?"text-white":"text-gray-400"}`,children:f?fr.createElement(m(f.id),{className:"w-4 h-4 sm:w-5 sm:h-5"}):e.jsx(Qp,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("span",{className:"font-semibold text-[10px] sm:text-xs leading-tight",children:f?f.label:"More"}),f&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]}),o&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 sm:w-52 bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-xl shadow-2xl border border-[#2A2A2A]/50 py-2 z-50 max-h-[60vh] overflow-y-auto custom-scrollbar",children:u.map(y=>{const b=m(y.id);return e.jsxs("button",{onClick:()=>g(y.id),className:`w-full flex items-center space-x-3 px-4 py-2.5 sm:py-3 text-left transition-all duration-200 touch-manipulation active:scale-95 ${s===y.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white":"text-gray-300 hover:bg-[#333333] hover:text-[var(--color-primary)]"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 flex-shrink-0 ${s===y.id?"text-white":"text-gray-400"}`,children:e.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("span",{className:"font-semibold text-xs sm:text-sm",children:y.label})]},y.id)})})]})]})}),e.jsx("nav",{className:"hidden md:flex lg:hidden items-center justify-center p-2",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-[#0A0A0A]/50 rounded-xl p-1",children:[p.map(y=>{const b=m(y.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>g(y.id),className:`flex items-center space-x-2 px-3 py-2.5 rounded-lg font-semibold text-sm transition-all duration-300 whitespace-nowrap relative ${s===y.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-[#333333]/50"}`,children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:y.label}),y.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:y.badge>99?"99+":y.badge})]})},y.id)}),u.length>0&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!o),className:`flex items-center space-x-2 px-3 py-2.5 rounded-lg font-semibold text-sm transition-all duration-300 whitespace-nowrap ${f?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-[#333333]/50"}`,children:f?e.jsxs(e.Fragment,{children:[fr.createElement(m(f.id),{className:"w-4 h-4"}),e.jsx("span",{children:f.label}),e.jsx(ea,{className:`w-4 h-4 transition-transform duration-200 ${o?"rotate-180":""}`})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qp,{className:"w-4 h-4"}),e.jsx("span",{children:"More"}),e.jsx(ea,{className:`w-4 h-4 transition-transform duration-200 ${o?"rotate-180":""}`})]})}),o&&e.jsx("div",{className:"absolute top-full left-0 mt-2 w-44 bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-xl shadow-2xl border border-[#2A2A2A]/50 py-2",style:{zIndex:10,position:"absolute"},children:u.map(y=>{const b=m(y.id);return e.jsxs("button",{onClick:()=>g(y.id),className:`w-full flex items-center space-x-3 px-4 py-2.5 text-left transition-all duration-200 ${s===y.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white":"text-gray-300 hover:bg-[#333333] hover:text-[var(--color-primary)]"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-4 h-4 ${s===y.id?"text-white":"text-gray-400"}`,children:e.jsx(b,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold text-sm",children:y.label})]},y.id)})})]})]})})]})};function Bu({children:t,className:s="",variant:n="default"}){const i="rounded-2xl shadow-xl backdrop-blur-sm p-6",o={default:"bg-gradient-to-b from-[#1A1A1A] to-[#2A2A2A] border border-[#2A2A2A]/50 text-white",light:"bg-white border border-gray-200 text-gray-900",success:"bg-gradient-to-b from-green-500/20 to-green-600/20 border border-green-500/50 text-white",error:"bg-gradient-to-b from-red-500/20 to-red-600/20 border border-red-500/50 text-white"};return e.jsx("div",{className:`${i} ${o[n]} ${s}`,children:t})}const VF=({isOpen:t,onClose:s,title:n,message:i,details:o=[]})=>e.jsx(ns,{isOpen:t,onClose:s,title:"",size:"md",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:e.jsx(Je,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n||"Success!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i}),o.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Details:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:o.map((c,d)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Je,{className:"h-3 w-3 text-green-500 mr-2 flex-shrink-0"}),c]},d))})]}),e.jsx("button",{onClick:s,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Close"})]})}),HF=({isOpen:t,onClose:s,voucher:n})=>{const{user:i}=Dt(),[o,c]=C.useState([]),[d,m]=C.useState([]),[h,p]=C.useState(""),[u,f]=C.useState(!1),[g,y]=C.useState(!1),[b,j]=C.useState(!1),[N,w]=C.useState([]),[B,S]=C.useState(null),{branding:_}=Ts(),k=me(H.services.auth.getAllUsers),E=me(H.services.vouchers.getVoucherAssignedUsers,n?{voucherId:n._id}:"skip"),D=De(H.services.vouchers.assignVoucherByCode),F=Xr(H.services.auth.sendVoucherEmailWithQR),[M,P]=C.useState(0),[T,L]=C.useState(""),X=C.useRef(null);C.useEffect(()=>{t&&Z()},[t,n]),C.useEffect(()=>{if(k&&Array.isArray(k)){const Q=E?E.map(le=>le._id||le.id):[],ee=k.filter(le=>le.role==="customer"&&!Q.includes(le._id||le.id));c(ee)}},[k,E]),C.useEffect(()=>{const Q=ee=>{X.current&&!X.current.contains(ee.target)&&(ee.target.closest("[data-user-item]")||p(""))};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]),C.useEffect(()=>{if(k&&Array.isArray(k)){const Q=E?E.map(le=>le._id||le.id):[],ee=k.filter(le=>le.role==="customer"&&!Q.includes(le._id||le.id)&&(le.username?.toLowerCase().includes(h.toLowerCase())||le.email?.toLowerCase().includes(h.toLowerCase())||le.nickname?.toLowerCase().includes(h.toLowerCase())));c(ee)}},[k,h,E]);const Z=async()=>{if(n)try{const Q={username:"",code:n.code,value:n.value},ee=await Cr.toDataURL(JSON.stringify(Q),{width:300,margin:2,color:{dark:"#1A1A1A",light:"#FFFFFF"}});L(ee)}catch(Q){console.error("Failed to generate QR code:",Q)}},ne=()=>{j(!1),w([]),s()},I=Q=>{m(ee=>{const le=Q._id||Q.id;return ee.find(q=>(q._id||q.id)===le)?ee.filter(q=>(q._id||q.id)!==le):[...ee,Q]})},O=()=>{m([...o])},G=()=>{m([])},te=async()=>{if(d.length===0){S({title:"No Users Selected",message:"Please select at least one user to send the voucher to."});return}const Q=d.filter(le=>!le.email||le.email.trim()==="");if(Q.length>0){const le=Q.map(R=>R.username).join(", ");S({title:"Missing Email Addresses",message:`The following users don't have email addresses: ${le}`});return}y(!0),P(0);let ee=0;try{for(const R of d)try{const q=R._id||R.id,J=i._id||i.id;if(!q)throw new Error(`Invalid user ID for ${R.username}`);if(!J)throw new Error("Invalid staff ID (you must be logged in)");const $={code:n.code,user_id:q,assigned_by:J};console.log("Assigning voucher to user:",$),await D($),console.log(`Voucher ${n.code} assigned to ${R.username}`);const Y={voucherId:n.id,username:R.username,code:n.code,value:n.value,expires_at:n.expires_at,type:"voucher",brand:_?.display_name};console.log("Generating QR code for user:",R.username,"with data:",Y);const xe=await Cr.toDataURL(JSON.stringify(Y),{width:300,margin:2,color:{dark:"#1A1A1A",light:"#FFFFFF"},errorCorrectionLevel:"H",type:"image/png",quality:.92});if(!xe||!xe.startsWith("data:image/png;base64,"))throw new Error("Failed to generate QR code for user: "+R.username);console.log("Sending voucher email to:",R.email);const oe={email:R.email,recipientName:R.nickname||R.username,voucherCode:n.code,voucherValue:`${parseFloat(n.value).toFixed(2)}`,pointsRequired:n.points_required||0,expiresAt:new Date(n.expires_at).toLocaleDateString(),voucherId:n._id||n.id};console.log("Sending voucher email with data:",oe);const de=await F(oe);if(de.success)console.log(`Email sent successfully to ${R.email}:`,de),ee++,P(ve=>{const Me=ve+1;return console.log(`Incrementing sent count from ${ve} to ${Me}`),Me});else throw new Error(de.error||"Unknown email error")}catch(q){console.error(`Failed to assign/send voucher to ${R.username}:`,q),S({title:"Error Processing Voucher",message:`Failed to process voucher for ${R.username}: ${q.message}`})}console.log("Final email send count:",ee,"out of",d.length);const le=d.map(R=>`${R.username} (${R.email})`);ee>0?(w(le.slice(0,ee)),j(!0)):d.length>0&&S({title:"Email Sending Failed",message:"Vouchers were assigned but no emails were sent. Please check the console for errors."})}catch(le){console.error("Failed to assign vouchers:",le),S({title:"Error",message:"Failed to assign vouchers. Please try again."})}finally{y(!1)}};return n?e.jsxs(e.Fragment,{children:[e.jsx(ns,{isOpen:t,onClose:s,title:"Send Voucher",size:"lg",compact:!0,variant:"dark",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-[#0F0F0F]/50 border border-[var(--color-primary)]/20 rounded-lg p-3.5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:T&&e.jsx("img",{src:T,alt:"Voucher QR",className:"w-16 h-16 rounded-lg"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-sm font-bold text-white mb-2",children:["Voucher ",n.code]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Value:"}),e.jsxs("span",{className:"text-[var(--color-primary)] font-bold",children:["",parseFloat(n.value).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Points:"}),e.jsx("span",{className:"text-gray-300 font-bold",children:n.points_required||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Max Uses:"}),e.jsx("span",{className:"text-gray-300 font-bold",children:n.max_uses||1})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Expires:"}),e.jsx("span",{className:"text-gray-300 font-bold",children:new Date(n.expires_at).toLocaleDateString()})]})]})]})]})}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-3.5 border border-[#333333]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-xs font-bold text-gray-200 flex items-center",children:[e.jsx(hs,{className:"w-3.5 h-3.5 text-[var(--color-primary)] mr-1.5"}),"Recipients (",d.length," selected)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:O,className:"text-xs px-2 py-1 bg-[#2A2A2A] text-gray-300 rounded hover:bg-[#333333] transition-colors",children:"All"}),e.jsx("button",{onClick:G,className:"text-xs px-2 py-1 bg-[#2A2A2A] text-gray-300 rounded hover:bg-[#333333] transition-colors",children:"Clear"})]})]}),e.jsxs("div",{className:"relative mb-2.5",ref:X,children:[e.jsx(Ns,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-500 w-3.5 h-3.5"}),e.jsx("input",{type:"text",placeholder:"Search by username or email...",value:h,onChange:Q=>p(Q.target.value),className:"w-full h-8 pl-8 pr-2.5 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 transition-all"})]}),d.length>0&&e.jsx("div",{className:"mb-2.5 flex flex-wrap gap-1.5",children:d.map(Q=>e.jsxs("div",{className:"flex items-center gap-1 bg-[var(--color-primary)]/20 border border-[var(--color-primary)]/30 rounded px-2 py-1 text-xs",children:[e.jsx("span",{className:"text-gray-300",children:Q.username}),e.jsx("button",{onClick:()=>I(Q),className:"text-[var(--color-primary)] hover:text-[var(--color-accent)] ml-0.5",children:e.jsx(Ze,{className:"w-2.5 h-2.5"})})]},Q._id||Q.id))}),e.jsx("div",{className:"border border-[#444444] rounded-lg max-h-48 overflow-y-auto bg-[#1A1A1A]",children:u?e.jsx("div",{className:"p-3 text-center text-gray-400 text-sm",children:"Loading customers..."}):o.length>0?e.jsx("div",{className:"divide-y divide-[#333333]/30",children:o.map(Q=>{const ee=d.find(le=>(le._id||le.id)===(Q._id||Q.id));return e.jsxs("div",{onClick:()=>I(Q),className:`flex items-center gap-2 p-2 cursor-pointer transition-colors text-xs ${ee?"bg-[var(--color-primary)]/10 hover:bg-[var(--color-primary)]/20":"hover:bg-[#2A2A2A]"}`,"data-user-item":!0,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center flex-shrink-0 ${ee?"bg-[var(--color-primary)] border-[var(--color-primary)]":"border-[#444444] bg-[#1A1A1A]"}`,children:ee&&e.jsx(Je,{className:"w-2.5 h-2.5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-200",children:Q.username}),e.jsx("div",{className:"text-gray-500 truncate",children:Q.email})]})]},Q._id||Q.id)})}):e.jsx("div",{className:"p-3 text-center text-gray-400 text-sm",children:h?"No customers found":"No customers available"})})]}),g&&e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-2.5 flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-transparent border-t-blue-400"}),e.jsxs("div",{className:"text-xs text-blue-300",children:["Sending... (",M,"/",d.length,")"]})]}),e.jsxs("div",{className:"flex gap-3 pt-3 border-t border-[#333333]",children:[e.jsx("button",{type:"button",onClick:s,disabled:g,className:"flex-1 h-9 bg-[#2A2A2A] text-gray-300 rounded-lg font-medium hover:bg-[#333333] transition-colors text-sm disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:te,disabled:d.length===0||g,className:"flex-1 h-9 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg font-medium hover:shadow-lg disabled:opacity-50 transition-all text-sm flex items-center justify-center gap-1.5",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-2 border-transparent border-t-white"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"w-3.5 h-3.5"}),"Send to ",d.length]})})]})]})}),e.jsx(VF,{isOpen:b,onClose:ne,title:"Vouchers Sent Successfully!",message:`Successfully assigned vouchers and sent ${N.length} emails.`,details:N}),e.jsx(ns,{isOpen:!!B,onClose:()=>S(null),title:B?.title||"Error",size:"sm",variant:"dark",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center",children:e.jsx(Xe,{className:"w-5 h-5 text-red-400"})}),e.jsx("p",{className:"text-sm text-gray-300",children:B?.message})]}),e.jsx("button",{onClick:()=>S(null),className:"w-full px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white rounded-lg transition-colors text-sm font-medium",children:"Close"})]})})]}):null},JF=({isOpen:t,onClose:s,voucher:n,assignedUsers:i=[]})=>n?e.jsx(ns,{isOpen:t,onClose:s,title:`Voucher: ${n.code}`,size:"md",compact:!0,variant:"dark",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#222222] border border-[var(--color-primary)]/20 rounded-lg p-3.5",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-gray-200 text-uppercase tracking-wider mb-2",children:"Voucher Details"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("p",{className:"text-gray-400",children:["Code: ",e.jsx("span",{className:"text-[var(--color-primary)] font-bold",children:n.code})]}),e.jsxs("p",{className:"text-gray-400",children:["Value: ",e.jsxs("span",{className:"text-[var(--color-primary)] font-bold",children:["",parseFloat(n.value).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:i.length})]})]})}),i.length>0?e.jsx("div",{className:"bg-[#0F0F0F]/50 border border-[#333333]/50 rounded-lg max-h-64 overflow-y-auto divide-y divide-[#333333]/30",children:i.map((o,c)=>e.jsx("div",{className:"p-3 hover:bg-[#1A1A1A]/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[var(--color-primary)]/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(tt,{className:"w-4 h-4 text-[var(--color-primary)]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-200",children:o.username||"Unknown User"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:o.email||"No email"})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium ${o.assignment_status==="redeemed"?"text-green-400":"text-blue-400"}`,children:[e.jsx(Je,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:o.assignment_status||"Assigned"})]}),o.assigned_at&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(o.assigned_at).toLocaleDateString()}),o.redeemed_at&&e.jsxs("p",{className:"text-xs text-green-500 mt-1",children:["Redeemed: ",new Date(o.redeemed_at).toLocaleDateString()]})]})]})},o._id||c))}):e.jsxs("div",{className:"text-center py-8 bg-[#0F0F0F]/50 rounded-lg border border-[#333333]/50",children:[e.jsx(tt,{className:"mx-auto h-10 w-10 text-gray-500 mb-2"}),e.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-1",children:"No Users Assigned"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This voucher hasn't been assigned yet"})]}),e.jsx("button",{onClick:s,className:"w-full h-9 px-3 bg-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#333333] transition-colors font-medium text-sm border border-[#333333]",children:"Close"})]})}):null,GF=({vouchers:t=[],onRefresh:s,onCreateVoucher:n})=>{const[i,o]=C.useState(""),[c,d]=C.useState("all"),[m,h]=C.useState("created_at"),[p,u]=C.useState(null),[f,g]=C.useState(null),[y,b]=C.useState(null),[j,N]=C.useState(!1),[w,B]=C.useState("table"),{branding:S}=Ts(),{user:_}=Dt(),[k,E]=C.useState(null),[D,F]=C.useState(null),M=De(H.services.vouchers.deleteVoucher),P=me(H.services.vouchers.getVoucherAssignedUsers,y?{voucherId:y._id}:"skip"),T=O=>O.status==="pending_approval"?{status:"pending_approval",label:"Pending Approval",icon:Nt,bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",iconColor:"text-yellow-500"}:O.status==="rejected"?{status:"rejected",label:"Rejected",icon:xs,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"}:O.redeemed?{status:"redeemed",label:"Redeemed",icon:Je,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"}:O.expires_at<Date.now()?{status:"expired",label:"Expired",icon:xs,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"}:{status:"active",label:"Active",icon:Je,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"},L=async O=>{E({title:"Delete Voucher",message:`Are you sure you want to delete voucher "${O.code}"?`,type:"delete",onConfirm:async()=>{E(null),N(!0);try{await M({id:O._id,user_id:_._id}),s()}catch(G){console.error("Failed to delete voucher:",G),F({title:"Delete Failed",message:"Failed to delete voucher. Please try again."})}finally{N(!1)}},onCancel:()=>{E(null)}})},X=t.filter(O=>{const G=O.code.toLowerCase().includes(i.toLowerCase()),te=c==="all"||T(O).status===c;return G&&te}).sort((O,G)=>m==="value"?parseFloat(G.value)-parseFloat(O.value):m==="expires_at"?new Date(O.expires_at)-new Date(G.expires_at):new Date(G.created_at)-new Date(O.created_at)),Z={total:t.length,active:t.filter(O=>!O.redeemed&&!O.isExpired).length,redeemed:t.filter(O=>O.redeemed).length,expired:t.filter(O=>O.isExpired&&!O.redeemed).length,totalValue:t.reduce((O,G)=>O+parseFloat(G.value),0)},ne=({voucher:O})=>{const G=C.useRef(null),te=JSON.stringify({voucherId:O.id,code:O.code,type:"voucher",brand:S?.display_name});return C.useEffect(()=>{G.current&&Cr.toCanvas(G.current,te,{width:32,margin:0,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"M"},Q=>{Q&&console.error("Mini QR error:",Q)})},[te]),e.jsx("canvas",{ref:G,className:"rounded w-8 h-8",style:{maxWidth:"32px",maxHeight:"32px"}})},I=({voucher:O,onClose:G})=>{const te=C.useRef(null),Q=JSON.stringify({voucherId:O.id,code:O.code,value:O.value,expires_at:O.expires_at,user:O.user,redeemed:!!O.redeemed,type:"voucher",brand:S?.display_name});C.useEffect(()=>{te.current&&Cr.toCanvas(te.current,Q,{width:220,margin:2,color:{dark:"#FF8C42",light:"#1A1A1A"},errorCorrectionLevel:"H"},J=>{J&&console.error("QR generation error:",J)})},[Q]);const ee=async()=>{try{const J=await Cr.toDataURL(Q,{width:600,margin:2,color:{dark:"#FF8C42",light:"#1A1A1A"},errorCorrectionLevel:"H"}),$=document.createElement("a");$.href=J,$.download=`voucher-${O.code}.png`,$.click()}catch(J){console.error("Failed to download QR:",J)}},le=async()=>{try{const J=await Cr.toDataURL(Q,{width:600,margin:2,color:{dark:"#FF8C42",light:"#ffffff"},errorCorrectionLevel:"H"}),$=window.open("","_blank");if(!$)return;$.document.write(`
          <html>
            <head>
              <title>Voucher ${O.code} - QR</title>
              <style>
                body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; text-align: center; padding: 24px; }
                .code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-weight: 700; color: #F68B24; }
              </style>
            </head>
            <body>
              <h2>Voucher <span class="code">${O.code}</span></h2>
              <img src="${J}" alt="Voucher QR" style="width: 320px; height: 320px;" />
              <p>Present this QR at the counter to redeem.</p>
              <script>window.onload = () => { window.print(); window.onafterprint = () => window.close(); };<\/script>
            </body>
          </html>
        `),$.document.close()}catch(J){console.error("Failed to print QR:",J)}},R=async()=>{try{await navigator.clipboard.writeText(O.code)}catch(J){console.error("Failed to copy code:",J)}},q=T(O);return e.jsx(ns,{isOpen:!0,onClose:G,title:"Voucher QR Code",size:"sm",variant:"dark",compact:!0,children:e.jsxs("div",{className:"text-center space-y-4 p-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-mono font-bold text-[var(--color-primary)] tracking-wider",children:O.code}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Scan to validate or redeem"})]}),e.jsx("div",{className:"p-4 rounded-xl bg-[#0F0F0F]/50 border border-[var(--color-primary)]/20 inline-block shadow-lg",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("canvas",{ref:te,className:"rounded"})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-[#0F0F0F]/50 border border-[#333333]/50",children:[e.jsx("div",{className:"text-gray-400 mb-1 uppercase tracking-wider text-[10px]",children:"Value"}),e.jsxs("div",{className:"font-bold text-lg text-[var(--color-primary)]",children:["",parseFloat(O.value).toFixed(2)]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-[#0F0F0F]/50 border border-[#333333]/50",children:[e.jsx("div",{className:"text-gray-400 mb-1 uppercase tracking-wider text-[10px]",children:"Status"}),e.jsx("div",{className:"font-bold text-white text-base inline-flex items-center gap-1",children:e.jsx("span",{className:q.label==="Active"?"text-green-400":q.label==="Redeemed"?"text-blue-400":"text-red-400",children:q.label})})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-[#0F0F0F]/50 border border-[#333333]/50",children:[e.jsx("div",{className:"text-gray-400 mb-1 uppercase tracking-wider text-[10px]",children:"Expires"}),e.jsx("div",{className:`font-bold text-sm ${O.isExpired?"text-red-400":"text-gray-300"}`,children:new Date(O.expires_at).toLocaleDateString()})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-[#0F0F0F]/50 border border-[#333333]/50",children:[e.jsx("div",{className:"text-gray-400 mb-1 uppercase tracking-wider text-[10px]",children:"Points"}),e.jsx("div",{className:"font-bold text-white text-sm",children:O.points_required})]})]}),e.jsxs("button",{onClick:R,className:"w-full px-4 py-3 bg-[#2A2A2A] text-gray-300 rounded-xl hover:bg-[#333333] transition-colors text-sm font-medium flex items-center justify-center gap-2 border border-[#333333]",children:[e.jsx(XS,{className:"w-4 h-4"})," Copy Code"]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:G,className:"flex-1 h-10 bg-[#2A2A2A] text-gray-300 rounded-xl hover:bg-[#333333] transition-colors text-sm font-medium",children:"Close"}),e.jsxs("button",{onClick:ee,className:"flex-1 h-10 bg-[#444444] text-gray-300 rounded-xl hover:bg-[#555555] transition-colors text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(ka,{className:"w-4 h-4"})," Download"]}),e.jsxs("button",{onClick:le,className:"flex-1 h-10 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-xl hover:shadow-lg transition-all text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(tb,{className:"w-4 h-4"})," Print"]})]})]})})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:Z.total})]}),e.jsx(Qt,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Active"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:Z.active})]}),e.jsx(Nt,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Redeemed"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:Z.redeemed})]}),e.jsx(Je,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Expired"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:Z.expired})]}),e.jsx(xs,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Total Value"}),e.jsxs("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:["",Z.totalValue.toFixed(0)]})]}),e.jsx(as,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search voucher code...",value:i,onChange:O=>o(O.target.value),className:"pl-9 pr-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white placeholder-gray-500 rounded-md focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:c,onChange:O=>d(O.target.value),className:"bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"pending_approval",children:"Pending Approval"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"redeemed",children:"Redeemed"}),e.jsx("option",{value:"expired",children:"Expired"})]})]}),e.jsxs("select",{value:m,onChange:O=>h(O.target.value),className:"bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",children:[e.jsx("option",{value:"created_at",children:"Sort by Date"}),e.jsx("option",{value:"value",children:"Sort by Value"}),e.jsx("option",{value:"expires_at",children:"Sort by Expiry"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center bg-[#1A1A1A] rounded-lg border border-[#444444] p-1",children:[e.jsx("button",{onClick:()=>B("card"),className:`p-2 rounded-md transition-colors ${w==="card"?"bg-[var(--color-primary)] text-white":"text-gray-400 hover:text-gray-300"}`,children:e.jsx(vm,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>B("table"),className:`p-2 rounded-md transition-colors ${w==="table"?"bg-[var(--color-primary)] text-white":"text-gray-400 hover:text-gray-300"}`,children:e.jsx(eb,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(Ro,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"New Voucher"})]})]})]})}),w==="card"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X.map(O=>{const G=T(O),te=G.icon;return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm hover:shadow-lg transition-all duration-200 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center w-12 h-12",children:e.jsx(ne,{voucher:O})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-mono text-sm font-bold text-white",children:O.code}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Points: ",O.points_required]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full ${G.status==="active"?"bg-green-500/20 text-green-400 border border-green-500/30":G.status==="pending_approval"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":G.status==="rejected"?"bg-red-500/20 text-red-400 border border-red-500/30":G.status==="redeemed"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[e.jsx(te,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-medium",children:G.label})]}),(_?.role==="branch_admin"||_?.role==="super_admin")&&e.jsx("button",{onClick:()=>L(O),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded transition-colors",title:"Delete Voucher",children:e.jsx(js,{className:"h-3 w-3"})})]})]}),O.status==="rejected"&&O.rejection_reason&&e.jsxs("div",{className:"mb-3 p-2 bg-red-500/10 border border-red-500/20 rounded text-xs text-red-300",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",O.rejection_reason]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Value"}),e.jsxs("span",{className:"text-lg font-bold text-[var(--color-primary)]",children:["",parseFloat(O.value).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Points Required"}),e.jsx("span",{className:"text-sm font-medium text-white",children:O.points_required})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Assignments"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[O.assignedCount||0,"/",O.max_uses,O.redeemedCount>0&&e.jsxs("span",{className:"text-green-400 ml-1",children:["(",O.redeemedCount," redeemed)"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Created"}),e.jsx("span",{className:"text-sm text-gray-300",children:new Date(O.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Expires"}),e.jsx("span",{className:`text-sm ${O.expires_at<Date.now()?"text-red-400":"text-gray-300"}`,children:new Date(O.expires_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-[#444444]/30",children:[e.jsxs("button",{onClick:()=>b(O),disabled:O.status!=="active",className:`w-full mb-2 px-3 py-2 border rounded-lg transition-colors text-sm font-medium flex items-center justify-center ${O.status==="active"?"bg-blue-500/20 text-blue-400 border-blue-500/30 hover:bg-blue-500/30":"bg-gray-500/10 text-gray-500 border-gray-500/20 cursor-not-allowed"}`,children:[e.jsx(hs,{className:"h-4 w-4 mr-2"})," View Assigned Users"]}),!O.redeemed&&O.expires_at>=Date.now()&&O.status==="active"&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>u(O),className:"flex-1 px-3 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm font-medium flex items-center justify-center",children:[e.jsx(rr,{className:"h-4 w-4 mr-2"})," View QR"]}),e.jsxs("button",{onClick:()=>g(O),className:"flex-1 px-3 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-colors text-sm font-semibold flex items-center justify-center",children:[e.jsx(Ht,{className:"h-4 w-4 mr-2"})," Send Email"]})]}),O.status==="pending_approval"&&e.jsx("div",{className:"text-center py-2 text-xs text-yellow-500 bg-yellow-500/10 rounded-lg border border-yellow-500/20",children:"Waiting for Admin Approval"})]})]},O._id)})}):e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#0A0A0A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Voucher"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#444444]/30",children:X.map(O=>{const G=T(O),te=G.icon;return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg mr-3",children:e.jsx(Qt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-mono font-bold text-white",children:O.code}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Created:"," ",new Date(O.createdAt).toLocaleDateString()]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-[var(--color-primary)]",children:["",parseFloat(O.value).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:O.points_required})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[O.assignedCount||0,"/",O.max_uses,O.redeemedCount>0&&e.jsxs("div",{className:"text-xs text-green-400",children:["(",O.redeemedCount," redeemed)"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full w-fit ${G.status==="active"?"bg-green-500/20 text-green-400 border border-green-500/30":G.status==="pending_approval"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":G.status==="rejected"?"bg-red-500/20 text-red-400 border border-red-500/30":G.status==="redeemed"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[e.jsx(te,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-medium",children:G.label})]}),O.status==="rejected"&&O.rejection_reason&&e.jsx("div",{className:"text-[10px] text-red-400 mt-1 truncate max-w-[150px]",title:O.rejection_reason,children:O.rejection_reason})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${O.expires_at<Date.now()?"text-red-400":"text-gray-300"}`,children:new Date(O.expires_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>b(O),disabled:O.status!=="active",className:`p-2 rounded-lg transition-colors ${O.status==="active"?"text-gray-400 hover:text-blue-400 hover:bg-[#444444]":"text-gray-600 cursor-not-allowed"}`,title:"View Users",children:e.jsx(hs,{className:"h-4 w-4"})}),!O.redeemed&&O.expires_at>=Date.now()&&O.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(O),className:"p-2 text-gray-400 hover:text-[var(--color-primary)] hover:bg-[#444444] rounded-lg transition-colors",title:"View QR",children:e.jsx(rr,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>g(O),className:"p-2 text-gray-400 hover:text-[var(--color-primary)] hover:bg-[#444444] rounded-lg transition-colors",title:"Send Email",children:e.jsx(Ht,{className:"h-4 w-4"})})]}),(_?.role==="branch_admin"||_?.role==="super_admin")&&e.jsx("button",{onClick:()=>L(O),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded-lg transition-colors",title:"Delete",children:e.jsx(js,{className:"h-4 w-4"})})]})})]},O._id)})})]})})}),X.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qt,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No vouchers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:i||c!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new voucher."})]}),p&&e.jsx(I,{voucher:p,onClose:()=>u(null)}),f&&e.jsx(HF,{voucher:f,isOpen:!!f,onClose:()=>g(null)}),y&&e.jsx(JF,{voucher:y,isOpen:!!y,onClose:()=>b(null),assignedUsers:P||[]}),e.jsx(ns,{isOpen:!!k,onClose:()=>E(null),title:k?.title||"Confirm",size:"sm",variant:"dark",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center",children:e.jsx(Xe,{className:"w-5 h-5 text-orange-400"})}),e.jsx("p",{className:"text-sm text-gray-300",children:k?.message})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>E(null),className:"flex-1 px-4 py-2 bg-[#2A2A2A] hover:bg-[#333333] text-gray-300 rounded-lg transition-colors text-sm font-medium",children:"Cancel"}),e.jsx("button",{onClick:k?.onConfirm,disabled:j,className:`flex-1 px-4 py-2 rounded-lg transition-colors text-sm font-medium ${k?.type==="delete"?"bg-red-600 hover:bg-red-700 text-white disabled:opacity-50":"bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white disabled:opacity-50"}`,children:j?"Processing...":"Confirm"})]})]})}),e.jsx(ns,{isOpen:!!D,onClose:()=>F(null),title:D?.title||"Error",size:"sm",variant:"dark",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center",children:e.jsx(Xe,{className:"w-5 h-5 text-red-400"})}),e.jsx("p",{className:"text-sm text-gray-300",children:D?.message})]}),e.jsx("button",{onClick:()=>F(null),className:"w-full px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white rounded-lg transition-colors text-sm font-medium",children:"Close"})]})})]})},YF=({isOpen:t,onClose:s,onSubmit:n,editingService:i=null,branchId:o})=>{const[c,d]=C.useState({name:"",description:"",duration_minutes:30,price:"",category:"Haircut",is_active:!0,hide_price:!1}),[m,h]=C.useState(!1),[p,u]=C.useState(""),[f,g]=C.useState({});C.useEffect(()=>{i?d({name:i.name||"",description:i.description||"",duration_minutes:i.duration_minutes||30,price:i.price?parseFloat(i.price).toFixed(2):"",category:i.category||"Haircut",is_active:i.is_active??!0,hide_price:i.hide_price??!1}):B(),u(""),g({})},[i,t]);const y=De(H.services.services.createService),b=De(H.services.services.updateService),j=(_,k)=>{f[_]&&g(E=>{const D={...E};return delete D[_],D}),d(E=>({...E,[_]:k}))},N=()=>{const _={};if(c.name.trim()?c.name.trim().length<2?_.name="Service name must be at least 2 characters":c.name.trim().length>100&&(_.name="Service name must be 100 characters or less"):_.name="Service name is required",c.description&&c.description.length>500&&(_.description="Description must be 500 characters or less"),!c.price)_.price="Price is required";else{const E=parseFloat(c.price);isNaN(E)?_.price="Price must be a valid number":E<0?_.price="Price cannot be negative":E>999999.99&&(_.price="Price cannot exceed 999,999.99")}if(!c.duration_minutes)_.duration_minutes="Duration is required";else{const E=parseInt(c.duration_minutes);isNaN(E)?_.duration_minutes="Duration must be a valid number":E<1?_.duration_minutes="Duration must be at least 1 minute":E>480&&(_.duration_minutes="Duration cannot exceed 480 minutes (8 hours)")}return["Haircut","Package","Other Services"].includes(c.category)||(_.category="Invalid category selected"),_},w=async _=>{_.preventDefault();const k=N();if(Object.keys(k).length>0){g(k),u("Please fix the errors below");return}h(!0),u("");try{if(!o){u("Branch information is missing. Please refresh the page."),h(!1);return}const E={name:c.name.trim(),description:c.description.trim()||"",price:parseFloat(c.price),duration_minutes:parseInt(c.duration_minutes),category:c.category,is_active:c.is_active,hide_price:c.hide_price,branch_id:o};if(isNaN(E.price)||isNaN(E.duration_minutes)){u("Invalid price or duration. Please check and try again."),h(!1);return}i?await b({id:i._id,...E}):await y(E),s(),n&&n()}catch(E){console.error("Error saving service:",E),u(E.message||"Failed to save service. Please try again.")}finally{h(!1)}},B=()=>{d({name:"",description:"",duration_minutes:30,price:"",category:"Haircut",is_active:!0,hide_price:!1}),u(""),g({})},S=()=>{B(),s()};return e.jsx(ns,{isOpen:t,onClose:S,title:i?"Edit Service":"Create Service",size:"lg",compact:!0,variant:"dark",children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[p&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 text-red-300 px-3 py-2.5 rounded-lg flex items-center gap-2 text-sm",children:[e.jsx(Xe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("p",{children:p})]}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-3.5 border border-[#333333]/50",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-200 mb-3 flex items-center",children:[e.jsx(ys,{className:"w-3.5 h-3.5 text-[var(--color-primary)] mr-1.5"}),"Service Details"]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Service Name *"}),e.jsx("input",{type:"text",value:c.name,onChange:_=>j("name",_.target.value),placeholder:"e.g., Classic Haircut",maxLength:"100",className:"w-full h-9 px-2.5 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 transition-all"}),f.name&&e.jsx("p",{className:"text-red-400 text-xs mt-0.5",children:f.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{value:c.description,onChange:_=>j("description",_.target.value),placeholder:"Describe the service...",maxLength:"500",rows:2,className:"w-full px-2.5 py-1.5 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 resize-none transition-all"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[c.description.length,"/500"]}),f.description&&e.jsx("p",{className:"text-red-400 text-xs mt-0.5",children:f.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:c.category,onChange:_=>j("category",_.target.value),className:"w-full h-9 px-2.5 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 transition-all",children:[e.jsx("option",{value:"Haircut",children:"Haircut"}),e.jsx("option",{value:"Package",children:"Package"}),e.jsx("option",{value:"Other Services",children:"Other Services"})]}),f.category&&e.jsx("p",{className:"text-red-400 text-xs mt-0.5",children:f.category})]})]})]}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-3.5 border border-[#333333]/50",children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-200 mb-3 flex items-center",children:[e.jsx(as,{className:"w-3.5 h-3.5 text-[var(--color-primary)] mr-1.5"}),"Pricing & Duration"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Price () *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:c.price,onChange:_=>j("price",_.target.value),placeholder:"0.00",step:"0.01",min:"0",max:"999999.99",className:"w-full h-9 px-2.5 pr-20 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 transition-all"}),e.jsxs("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 flex items-center bg-[#2A2A2A] rounded-full p-0.5 border border-[#444444]",children:[e.jsx("button",{type:"button",onClick:()=>j("hide_price",!1),className:`px-2 py-1 rounded-full text-xs font-medium transition-all duration-200 ${c.hide_price?"text-gray-400 hover:text-gray-300":"bg-[var(--color-primary)] text-white shadow-sm"}`,children:"Show"}),e.jsx("button",{type:"button",onClick:()=>j("hide_price",!0),className:`px-2 py-1 rounded-full text-xs font-medium transition-all duration-200 ${c.hide_price?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-sm":"text-gray-400 hover:text-gray-300"}`,children:"Hide"})]})]}),f.price&&e.jsx("p",{className:"text-red-400 text-xs mt-0.5",children:f.price}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-200 ${c.hide_price?"bg-red-400":"bg-green-400"}`}),e.jsx("span",{className:"text-xs text-gray-400",children:c.hide_price?"Price hidden from customers":"Price visible to customers"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Duration (min) *"}),e.jsx("input",{type:"number",value:c.duration_minutes,onChange:_=>j("duration_minutes",_.target.value),placeholder:"30",min:"1",max:"480",className:"w-full h-9 px-2.5 border border-[#444444] rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] bg-[#1A1A1A] text-gray-300 transition-all"}),f.duration_minutes&&e.jsx("p",{className:"text-red-400 text-xs mt-0.5",children:f.duration_minutes})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-3 border border-[#333333]/50",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-2.5",children:"Status"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs",children:[e.jsx("input",{type:"radio",name:"is_active",checked:c.is_active===!0,onChange:()=>j("is_active",!0),className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-gray-300",children:"Active"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs",children:[e.jsx("input",{type:"radio",name:"is_active",checked:c.is_active===!1,onChange:()=>j("is_active",!1),className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-gray-300",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#222222] rounded-lg p-3 border border-[var(--color-primary)]/20",children:[e.jsx("h4",{className:"text-xs font-bold text-white mb-1.5 uppercase tracking-wide",children:"Preview"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Price:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[var(--color-primary)] font-bold",children:c.hide_price?"Discrete":`${c.price||"0.00"}`}),e.jsx("div",{className:`w-2 h-1.5 rounded-full transition-colors duration-200 ${c.hide_price?"bg-red-400":"bg-green-400"}`})]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Duration:"}),e.jsxs("span",{className:"text-gray-300 font-bold",children:[c.duration_minutes||30,"m"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-bold ${c.is_active?"text-green-400":"text-red-400"}`,children:c.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-3 border-t border-[#333333]",children:[e.jsx("button",{type:"button",onClick:S,disabled:m,className:"flex-1 h-9 bg-[#2A2A2A] text-gray-300 rounded-lg font-medium hover:bg-[#333333] transition-colors text-sm disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"flex-1 h-9 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg font-medium hover:shadow-lg disabled:opacity-50 transition-all text-sm",children:m?"Saving...":i?"Update Service":"Create Service"})]})]})})},QF=({services:t=[],onRefresh:s,user:n})=>{const[i,o]=C.useState(""),[c,d]=C.useState("name"),[m,h]=C.useState(!1),[p,u]=C.useState(null),[f,g]=C.useState(!1),[y,b]=C.useState("table"),[j,N]=C.useState(1),w=8,B=De(H.services.services.deleteService),S=t.filter(I=>I.name.toLowerCase().includes(i.toLowerCase())||I.description.toLowerCase().includes(i.toLowerCase())).sort((I,O)=>c==="name"?I.name.localeCompare(O.name):c==="price"?parseFloat(O.price)-parseFloat(I.price):c==="duration"?O.duration_minutes-I.duration_minutes:I.id-O.id);C.useEffect(()=>{N(1)},[i,c]);const _=Math.ceil(S.length/w),k=(j-1)*w,E=k+w,D=S.slice(k,E),F=()=>{N(I=>Math.max(I-1,1))},M=()=>{N(I=>Math.min(I+1,_))},P={total:t.length,totalRevenue:t.reduce((I,O)=>I+parseFloat(O.price),0),avgPrice:t.length?t.reduce((I,O)=>I+parseFloat(O.price),0)/t.length:0,avgDuration:t.length?t.reduce((I,O)=>I+O.duration_minutes,0)/t.length:0},T=()=>{u(null),h(!0)},L=I=>{u(I),h(!0)},X=()=>{h(!1),u(null)},Z=()=>{h(!1),u(null),s()},ne=async I=>{if(confirm(`Are you sure you want to delete "${I.name}"?`)){g(!0);try{await B({id:I._id}),s()}catch(O){console.error("Failed to delete service:",O),alert("Failed to delete service. Please try again.")}finally{g(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Total Services"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:P.total})]}),e.jsx(ys,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Avg. Price"}),e.jsxs("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:["",P.avgPrice.toFixed(0)]})]}),e.jsx(as,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Avg. Duration"}),e.jsxs("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:[Math.round(P.avgDuration),"m"]})]}),e.jsx(Nt,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400",children:"Total Value"}),e.jsxs("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:["",P.totalRevenue.toFixed(0)]})]}),e.jsx(as,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-3.5 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-3 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-3 md:space-y-0 md:space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search services...",value:i,onChange:I=>o(I.target.value),className:"pl-9 pr-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white placeholder-gray-500 rounded-md focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] text-sm"})]}),e.jsxs("select",{value:c,onChange:I=>d(I.target.value),className:"bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price",children:"Sort by Price"}),e.jsx("option",{value:"duration",children:"Sort by Duration"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center bg-[#2A2A2A] rounded-md border border-[#3A3A3A] p-0.5",children:[e.jsx("button",{onClick:()=>b("card"),className:`p-1.5 rounded-md transition-colors ${y==="card"?"bg-[var(--color-primary)] text-white":"text-gray-500 hover:text-white"}`,children:e.jsx(vm,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b("table"),className:`p-1.5 rounded-md transition-colors ${y==="table"?"bg-[var(--color-primary)] text-white":"text-gray-500 hover:text-white"}`,children:e.jsx(eb,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-1.5 px-3 py-2 bg-[#2A2A2A] text-gray-300 rounded-md hover:bg-[#333333] transition-colors text-sm border border-[#3A3A3A]",children:[e.jsx(Ro,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:T,className:"flex items-center space-x-1.5 px-3 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-md hover:from-[var(--color-accent)] hover:brightness-110 transition-colors text-sm",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"New Service"})]})]})]})}),e.jsx(YF,{isOpen:m,onClose:X,onSubmit:Z,editingService:p,branchId:n?.branch_id}),y==="card"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:D.map(I=>e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm hover:shadow-md transition-all duration-200 p-4 hover:border-[var(--color-primary)]/30",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2.5",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-md",children:e.jsx(ys,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-sm",children:I.name}),e.jsx("p",{className:"text-xs text-gray-400",children:I.category})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>L(I),className:"p-2 text-gray-400 hover:text-[var(--color-primary)] hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(sa,{className:"h-4 w-4"})}),(n?.role==="branch_admin"||n?.role==="super_admin")&&e.jsx("button",{onClick:()=>ne(I),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(js,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-300",children:I.description}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(as,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Price"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-lg font-bold ${I.hide_price?"text-gray-400":"text-[var(--color-primary)]"}`,children:I.hide_price?"Discrete":`${parseFloat(I.price).toFixed(2)}`}),I.hide_price&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-400"}),e.jsx("span",{className:"text-xs text-red-400",children:"Hidden"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Duration"})]}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[I.duration_minutes," mins"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-[#1A1A1A] rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Status"})}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.is_active?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:I.is_active?"Active":"Inactive"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-[#444444]/30",children:e.jsx("button",{onClick:()=>L(I),className:"w-full px-3 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-colors text-sm font-medium",children:"Edit Service"})})]},I._id))}):e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#444444]/30",children:D.map(I=>e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg mr-3",children:e.jsx(ys,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:I.name}),e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:I.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:I.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`text-sm font-medium ${I.hide_price?"text-gray-400":"text-[var(--color-primary)]"}`,children:I.hide_price?"Discrete":`${parseFloat(I.price).toFixed(2)}`}),I.hide_price&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-400"}),e.jsx("span",{className:"text-xs text-red-400",children:"Hidden"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[I.duration_minutes," mins"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.is_active?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:I.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>L(I),className:"p-2 text-gray-400 hover:text-[var(--color-primary)] hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(sa,{className:"h-4 w-4"})}),(n?.role==="branch_admin"||n?.role==="super_admin")&&e.jsx("button",{onClick:()=>ne(I),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(js,{className:"h-4 w-4"})})]})})]},I._id))})]})})}),S.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ys,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No services found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:i?"Try adjusting your search criteria.":"Get started by creating your first service."}),!i&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:T,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110",children:[e.jsx(cs,{className:"-ml-1 mr-2 h-4 w-4"}),"New Service"]})})]}),S.length>0&&_>1&&e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:F,disabled:j===1,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${j===1?"text-gray-500 cursor-not-allowed":"text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx(Xa,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Page ",e.jsx("span",{className:"text-[var(--color-primary)] font-semibold",children:j})," of ",e.jsx("span",{className:"text-white font-semibold",children:_})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",k+1,"-",Math.min(E,S.length)," of ",S.length,")"]})]}),e.jsxs("button",{onClick:M,disabled:j===_,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${j===_?"text-gray-500 cursor-not-allowed":"text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx("span",{className:"text-sm",children:"Next"}),e.jsx(sr,{className:"w-4 h-4"})]})]})})]})},WF=({onRefresh:t,user:s})=>{const[n,i]=C.useState(""),[o,c]=C.useState("all"),[d,m]=C.useState("date"),[h,p]=C.useState(""),[u,f]=C.useState(""),[g,y]=C.useState(!1),[b,j]=C.useState(null),[N,w]=C.useState(null),[B,S]=C.useState({service:"",barber:"",date:"",time:"",notes:""}),[_,k]=C.useState(!1),[E,D]=C.useState(""),[F,M]=C.useState({show:!1,booking:null,action:null}),[P,T]=C.useState({show:!1,booking:null}),[L,X]=C.useState({show:!1,booking:null}),[Z,ne]=C.useState("bookings"),[I,O]=C.useState(null),[G,te]=C.useState(!1),[Q,ee]=C.useState(!1),[le,R]=C.useState(1),q=8,[J,$]=C.useState(!1),[Y,xe]=C.useState({id:null,position:null}),[oe,de]=C.useState(Date.now());C.useEffect(()=>{const re=setInterval(()=>{de(Date.now())},6e4);return()=>clearInterval(re)},[]);const ve=s?.role==="super_admin"?me(H.services.bookings.getAllBookings)||[]:s?.branch_id?me(H.services.bookings.getBookingsByBranch,{branch_id:s.branch_id})||[]:[],Me=s?.role==="super_admin"?me(H.services.services.getAllServices)||[]:s?.branch_id?me(H.services.services.getServicesByBranch,{branch_id:s.branch_id})||[]:[],Ke=s?.role==="super_admin"?me(H.services.barbers.getActiveBarbers)||[]:s?.branch_id?(me(H.services.barbers.getBarbersByBranch,{branch_id:s.branch_id})||[]).filter(re=>re.is_active):[],pe=me(H.services.bookings.getBookingPayments,{bookingId:I?._id}),be=me(H.services.bookings.getBookingTransactions,{bookingId:I?._id}),Be=me(H.services.bookings.getBookingTransactions,{bookingId:b?._id}),Ue=De(H.services.bookings.updateBooking),ue=De(H.services.bookings.deleteBooking);De(H.services.bookings.updatePaymentStatus);const Ie=De(H.services.bookings.cancelBooking),st=re=>{switch(re){case"booked":return{label:"Booked",icon:Je,bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",iconColor:"text-blue-500"};case"confirmed":return{label:"Confirmed",icon:Je,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"};case"completed":return{label:"Completed",icon:Je,bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",iconColor:"text-orange-500"};case"cancelled":return{label:"Cancelled",icon:xs,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"};default:return{label:"Pending",icon:Xe,bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",iconColor:"text-orange-500"}}},Le=ve.filter(re=>{const qe=(Me.find(zt=>zt._id===re.service)?.name||"").toLowerCase().includes(n.toLowerCase())||(re.barber_name||"").toLowerCase().includes(n.toLowerCase())||(re.booking_code||"").toLowerCase().includes(n.toLowerCase())||(re.customer_name||"").toLowerCase().includes(n.toLowerCase()),ut=o==="all"||re.status===o;let dt=!0;if(h||u){const zt=new Date(re.date);if(zt.setHours(0,0,0,0),h){const Zt=new Date(h);Zt.setHours(0,0,0,0),zt<Zt&&(dt=!1)}if(u&&dt){const Zt=new Date(u);Zt.setHours(23,59,59,999),zt>Zt&&(dt=!1)}}return qe&&ut&&dt}).sort((re,Oe)=>{if(d==="date"){const qe=new Date(re.date+" "+re.time);return new Date(Oe.date+" "+Oe.time)-qe}if(d==="status")return re.status.localeCompare(Oe.status);if(d==="service"){const qe=Me.find(dt=>dt._id===re.service)?.name||"",ut=Me.find(dt=>dt._id===Oe.service)?.name||"";return qe.localeCompare(ut)}return re._id.localeCompare(Oe._id)});C.useEffect(()=>{R(1)},[o,n,d,h,u]);const kt=Math.ceil(Le.length/q),Pt=(le-1)*q,St=Pt+q,Jt=Le.slice(Pt,St),Ne=()=>{R(re=>Math.max(re-1,1))},Ye=()=>{R(re=>Math.min(re+1,kt))},Ge={total:ve.length,pending:ve.filter(re=>re.status==="pending").length,booked:ve.filter(re=>re.status==="booked").length,confirmed:ve.filter(re=>re.status==="confirmed").length,completed:ve.filter(re=>re.status==="completed").length,cancelled:ve.filter(re=>re.status==="cancelled").length,today:ve.filter(re=>{const Oe=new Date(re.date).toDateString(),qe=new Date().toDateString();return Oe===qe}).length,paid:ve.filter(re=>(re.payment_status||"unpaid")==="paid").length,unpaid:ve.filter(re=>(re.payment_status||"unpaid")==="unpaid").length,refunded:ve.filter(re=>(re.payment_status||"unpaid")==="refunded").length},yt=()=>{y(!0)},bt=async re=>{console.log("New booking created:",re),t()},Ee=()=>{S({service:"",barber:"",date:"",time:"",notes:""})},We=re=>{S({service:re.service,barber:re.barber||"",date:re.date,time:re.time&&re.time!=="N/A"?re.time.slice(0,5):"",notes:re.notes||""}),j(re),ee(!0),D("")},Qe=()=>{ee(!1),j(null),Ee(),D("")},ht=async()=>{if(!B.service||!B.date||!B.time){D("Service, date, and time are required");return}if(!b){D("No booking selected for editing");return}k(!0),D("");try{const re=B.date!==b.date,Oe={id:b._id,service:B.service,date:B.date,time:B.time,notes:B.notes?.trim()||void 0};B.barber&&B.barber.trim()!==""?Oe.barber=B.barber:Oe.barber=void 0,await Ue(Oe),Qe(),re&&console.log("Booking date changed - payroll may need recalculation")}catch(re){console.error("Error updating booking:",re),D(re.message||"Failed to update booking")}finally{k(!1)}},wt=re=>{T({show:!0,booking:re})},Bt=async()=>{if(P.booking){k(!0);try{await ue({id:P.booking._id}),T({show:!1,booking:null})}catch(re){console.error("Error deleting booking:",re),D(re.message||"Failed to delete booking"),T({show:!1,booking:null})}finally{k(!1)}}},K=async(re,Oe)=>{k(!0);try{await Ue({id:re._id,status:Oe})}catch(qe){console.error("Error updating booking status:",qe),D(qe.message||"Failed to update booking status")}finally{k(!1)}},V=async()=>{if(L.booking){k(!0);try{await Ie({id:L.booking._id,reason:"Cancelled by staff"}),X({show:!1,booking:null})}catch(re){console.error("Error cancelling booking:",re),D(re.message||"Failed to cancel booking")}finally{k(!1)}}},se=async()=>{if(!F.booking||!F.action)return;const{booking:re,action:Oe}=F,qe=Oe==="confirm"?"confirmed":"completed";if(J&&re.customer_phone){const ut=Me.find(Zt=>Zt._id===re.service),dt=Oe==="confirm"?`Hi ${re.customer_name||"Customer"}! Your booking #${re.booking_code} at  Barbershop has been confirmed for ${Ve(re.date)} at ${_t(re.time)}. Service: ${ut?.name}. See you soon!`:`Hi ${re.customer_name||"Customer"}! Your booking #${re.booking_code} at  Barbershop has been completed. Thank you for choosing us!`,zt=`sms:${re.customer_phone}${/iPhone|iPad|iPod/.test(navigator.userAgent)?"&":"?"}body=${encodeURIComponent(dt)}`;window.location.href=zt}M({show:!1,booking:null,action:null}),$(!1),await K(re,qe)},ke=re=>{switch(re){case"paid":return{label:"Paid",icon:Je,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"};case"refunded":return{label:"Refunded",icon:xs,bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",iconColor:"text-yellow-500"};default:return{label:"Unpaid",icon:ds,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"}}},Re=re=>{O(re),te(!0)},ze=re=>{sessionStorage.setItem("posBooking",JSON.stringify(re)),window.location.href="/staff/pos"},Ve=re=>re?new Date(re).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",_t=re=>{if(!re||re==="N/A")return"N/A";let Oe=re;re.includes(".")&&(Oe=re.split(".")[0]),Oe.split(":").length>2&&(Oe=Oe.split(":").slice(0,2).join(":"));try{return new Date(`1970-01-01T${Oe}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return re}},_e=(re,Oe)=>{try{const qe=new Date,dt=new Date(`${re}T${Oe}`)-qe,zt=Math.floor(dt/6e4);if(zt<0)return{text:"Past",color:"gray",show:!1};if(zt<10)return{text:`${zt}m`,color:"red",show:!0,bgClass:"bg-red-500/20",textClass:"text-red-400",borderClass:"border-red-500/30"};if(zt<20)return{text:`${zt}m`,color:"yellow",show:!0,bgClass:"bg-yellow-500/20",textClass:"text-yellow-400",borderClass:"border-yellow-500/30"};if(zt<30)return{text:`${zt}m`,color:"green",show:!0,bgClass:"bg-green-500/20",textClass:"text-green-400",borderClass:"border-green-500/30"};if(zt<60)return{text:`${zt}m`,color:"blue",show:!0,bgClass:"bg-blue-500/20",textClass:"text-blue-400",borderClass:"border-blue-500/30"};const Zt=Math.floor(zt/60);return Zt<24?{text:`${Zt}h`,color:"blue",show:!0,bgClass:"bg-blue-500/20",textClass:"text-blue-400",borderClass:"border-blue-500/30"}:{text:`${Math.floor(Zt/24)}d`,color:"gray",show:!0,bgClass:"bg-gray-500/20",textClass:"text-gray-400",borderClass:"border-gray-500/30"}}catch{return{text:"",color:"gray",show:!1}}},$e=({booking:re,onClose:Oe})=>{const qe=C.useRef(null),ut=JSON.stringify({bookingId:re._id,bookingCode:re.booking_code,service:Me.find(dt=>dt._id===re.service)?.name,barber:re.barber_name,date:re.date,time:re.time,status:re.status,barbershop:" Barbershop"});return C.useEffect(()=>{qe.current&&Cr.toCanvas(qe.current,ut,{width:200,margin:2,color:{dark:"var(--color-primary)",light:"#1A1A1A"},errorCorrectionLevel:"H"},dt=>{dt&&console.error("QR Code generation error:",dt)})},[ut]),Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:Oe}),e.jsxs("div",{className:"relative w-full max-w-sm transform rounded-2xl bg-gradient-to-br from-[#1A1A1A] to-[#222222] shadow-2xl transition-all z-[10000] border border-[#333333]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[#333333]/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center",children:e.jsx(rr,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-white",children:"Booking QR Code"}),e.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["#",re.booking_code]})]})]}),e.jsx("button",{onClick:Oe,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(Ze,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-white flex justify-center",children:e.jsx("canvas",{ref:qe,className:"rounded-lg"})}),e.jsxs("div",{className:"space-y-2.5 bg-[#0F0F0F]/50 rounded-lg p-3.5",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Service:"}),e.jsx("span",{className:"text-white font-medium",children:Me.find(dt=>dt._id===re.service)?.name})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Date & Time:"}),e.jsxs("span",{className:"text-white font-medium",children:[Ve(re.date)," ",_t(re.time)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Barber:"}),e.jsx("span",{className:"text-white font-medium",children:re.barber_name||"Not assigned"})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs pt-1 border-t border-[#333333]",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${st(re.status).bg} ${st(re.status).text}`,children:st(re.status).label})]})]}),e.jsx("button",{onClick:Oe,className:"w-full py-2.5 px-4 rounded-lg font-medium text-white bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 transition-all text-sm",children:"Close"})]})]})]})}),document.body)},ot=()=>{if(!b)return null;const re=Me?.find(Oe=>Oe._id===B.service);return e.jsx(ns,{isOpen:Q,onClose:Qe,title:"Edit Booking",size:"xl",variant:"dark",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[E&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 text-red-300 px-4 py-3 rounded-lg flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:E})]}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-4 border border-[#333333]/50",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-200 mb-3 flex items-center",children:[e.jsx(Dn,{className:"w-4 h-4 text-[var(--color-primary)] mr-2"}),"Current Booking"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Booking Code:"}),e.jsxs("div",{className:"text-white font-mono font-semibold",children:["#",b.booking_code]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Service:"}),e.jsx("div",{className:"text-white font-medium",children:Me?.find(Oe=>Oe._id===b.service)?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Date & Time:"}),e.jsxs("div",{className:"text-white font-medium",children:[Ve(b.date)," at ",_t(b.time)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Barber:"}),e.jsx("div",{className:"text-white font-medium",children:b.barber_name||"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Current Status:"}),e.jsx("div",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium mt-1 ${st(b.status).bg} ${st(b.status).text}`,children:st(b.status).label})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Payment Status:"}),e.jsx("div",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium mt-1 ${ke(b.payment_status||"unpaid").bg} ${ke(b.payment_status||"unpaid").text}`,children:ke(b.payment_status||"unpaid").label})]})]})]}),e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-4 border border-[#333333]/50",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-200 mb-3 flex items-center",children:[e.jsx(tt,{className:"w-4 h-4 text-[var(--color-primary)] mr-2"}),"Customer Details"]}),b&&Be===void 0?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-[var(--color-primary)] border-t-transparent rounded-full animate-spin mr-2"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Loading customer details..."})]}):e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Name:"}),e.jsxs("div",{className:"text-white font-medium",children:[b?.customer_name||"N/A",b?.customer&&e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Registered Customer)"}),!b?.customer&&b?.customer_name&&e.jsx("span",{className:"text-xs text-[var(--color-primary)] ml-2",children:"(Walk-in Customer)"})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"}),e.jsx("div",{className:"text-white font-medium",children:b?.customer_phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("div",{className:"text-white font-medium",children:b?.customer_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Address:"}),e.jsx("div",{className:"text-white font-medium",children:Be&&Be.length>0&&Be[0]?.customer_address||"N/A"})]}),Be&&Be.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-[#333333]/50 pt-3 mt-4",children:e.jsx("span",{className:"text-gray-300 text-xs font-semibold",children:"POS Transaction Details:"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Transaction ID:"}),e.jsx("div",{className:"text-white font-mono text-xs",children:Be[0]?.transaction_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Transaction Date:"}),e.jsx("div",{className:"text-white font-medium",children:new Date(Be[0]?.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Payment Method:"}),e.jsx("div",{className:"text-white font-medium",children:Be[0]?.payment_method||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Total Amount:"}),e.jsxs("div",{className:"text-green-400 font-bold",children:["",Be[0]?.total_amount?.toFixed(2)||"0.00"]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#0F0F0F]/50 rounded-lg p-4 border border-[#333333]/50",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-200 mb-4 flex items-center",children:[e.jsx(sa,{className:"w-4 h-4 text-[var(--color-primary)] mr-2"}),"Edit Booking Details"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Service ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{value:B.service,onChange:Oe=>S(qe=>({...qe,service:Oe.target.value})),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors",required:!0,children:[e.jsx("option",{value:"",children:"Select a service"}),Me?.map(Oe=>e.jsxs("option",{value:Oe._id,children:[Oe.name," - ",parseFloat(Oe.price||0).toFixed(2)," (",Oe.duration_minutes,"min)"]},Oe._id))||[]]}),re&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Duration: ",re.duration_minutes,"min  Price: ",parseFloat(re.price||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Barber"}),e.jsxs("select",{value:B.barber,onChange:Oe=>S(qe=>({...qe,barber:Oe.target.value})),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors",children:[e.jsx("option",{value:"",children:"Any available barber"}),Ke?.map(Oe=>e.jsx("option",{value:Oe._id,children:Oe.full_name},Oe._id))||[]]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Date ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",value:B.date,onChange:Oe=>S(qe=>({...qe,date:Oe.target.value})),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors",required:!0}),e.jsxs("p",{className:"text-xs text-amber-400 mt-1 flex items-center",children:[e.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Changing the date may affect payroll calculations"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Time ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"time",value:B.time,onChange:Oe=>S(qe=>({...qe,time:Oe.target.value})),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),e.jsx("textarea",{value:B.notes,onChange:Oe=>S(qe=>({...qe,notes:Oe.target.value})),placeholder:"Add any additional notes about this booking...",rows:3,className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors resize-none"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:Qe,className:"px-6 py-2 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#333333] hover:text-white transition-colors",disabled:_,children:"Cancel"}),e.jsx("button",{onClick:ht,disabled:_,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Changes"})]})})]})]})]})})},ie=({booking:re,onClose:Oe})=>{if(!re)return null;const qe=Me.find(ut=>ut._id===re.service);return e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:Oe}),e.jsxs("div",{className:"relative w-full max-w-4xl transform rounded-2xl bg-[#1A1A1A] shadow-2xl transition-all z-[10000] max-h-[90vh] overflow-y-auto custom-scrollbar border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Transaction Details"}),e.jsx("button",{onClick:Oe,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(Ze,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h4",{className:"text-lg font-bold text-white",children:"Booking Summary"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Booking Code"}),e.jsxs("p",{className:"text-sm font-mono font-bold text-white",children:["#",re.booking_code]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Service"}),e.jsx("p",{className:"text-sm font-bold text-white",children:qe?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Date & Time"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[Ve(re.date)," at ",_t(re.time)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-sm font-bold text-green-400",children:["",qe?.price?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h4",{className:"text-lg font-bold text-white",children:"Payment History"})}),e.jsx("div",{className:"overflow-x-auto",children:pe&&pe.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#2A2A2A]/30",children:pe.map(ut=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:ut.payment_request_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:ut.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",ut.amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ut.status==="completed"?"bg-green-50 text-green-700":ut.status==="pending"?"bg-yellow-50 text-yellow-700":"bg-red-50 text-red-700"}`,children:ut.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(ut.created_at).toLocaleDateString()})})]},ut._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(as,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No payments found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No payment records found for this booking."})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h4",{className:"text-lg font-bold text-white",children:"POS Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:be&&be.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Services"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#2A2A2A]/30",children:be.map(ut=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:ut.transaction_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:ut.services?.map(dt=>dt.service_name).join(", ")||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",ut.total_amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:ut.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(ut.createdAt).toLocaleDateString()})})]},ut._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ya,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No transactions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No POS transactions found for this booking."})]})})]})]})]})]})})},Ae=()=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-4 bg-[#2A2A2A] rounded w-24"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"h-4 bg-[#2A2A2A] rounded w-32 mb-2"}),e.jsx("div",{className:"h-3 bg-[#2A2A2A] rounded w-16"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-4 bg-[#2A2A2A] rounded w-28"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"h-4 bg-[#2A2A2A] rounded w-20 mb-2"}),e.jsx("div",{className:"h-3 bg-[#2A2A2A] rounded w-16"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-4 bg-[#2A2A2A] rounded w-24"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-6 bg-[#2A2A2A] rounded-full w-20"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-4 bg-[#2A2A2A] rounded w-16"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"h-6 bg-[#2A2A2A] rounded-full w-20"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("div",{className:"h-8 bg-[#2A2A2A] rounded w-16"}),e.jsx("div",{className:"h-8 bg-[#2A2A2A] rounded w-8"})]})})]}),nt=()=>{if(!L.show||!L.booking)return null;const re=L.booking,Oe=Me.find(qe=>qe._id===re.service);return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:99999},children:e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-6 max-w-md w-full shadow-2xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto bg-red-500/20",children:e.jsx(Ml,{className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:"Cancel Confirmed Booking"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Are you sure you want to cancel this confirmed booking? The customer and barber will be notified."}),e.jsxs("div",{className:"text-left space-y-2 p-4 rounded-xl bg-[#2A2A2A]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Booking Code:"}),e.jsxs("span",{className:"text-sm font-mono font-bold text-white",children:["#",re.booking_code]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Customer:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:re.customer_name||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Service:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Oe?.name||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Date & Time:"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[Ve(re.date)," at ",_t(re.time)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Barber:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:re.barber_name||"Not assigned"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>X({show:!1,booking:null}),className:"flex-1 py-2 px-4 rounded-xl font-medium text-gray-300 bg-[#2A2A2A] hover:bg-[#333333] transition-colors",disabled:_,children:"Keep Booking"}),e.jsx("button",{onClick:V,disabled:_,className:"flex-1 py-2 px-4 rounded-xl font-medium text-white transition-colors bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Cancelling..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ml,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel Booking"})]})})]})]})})}),document.body)},ct=()=>{if(!P.show||!P.booking)return null;const re=P.booking,Oe=Me.find(qe=>qe._id===re.service);return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:99999},children:e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-6 max-w-md w-full shadow-2xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto bg-red-500/20",children:e.jsx(js,{className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:"Delete Booking"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["Are you sure you want to delete booking ",e.jsxs("span",{className:"font-mono font-semibold text-white",children:["#",re.booking_code]}),"? This action cannot be undone."]}),e.jsxs("div",{className:"text-left space-y-2 p-4 rounded-xl bg-[#2A2A2A]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Customer:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:re.customer_name||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Service:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Oe?.name||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Date & Time:"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[Ve(re.date)," at ",_t(re.time)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Status:"}),e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${st(re.status).bg} ${st(re.status).text}`,children:st(re.status).label})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>T({show:!1,booking:null}),className:"flex-1 py-2 px-4 rounded-xl font-medium text-gray-300 bg-[#2A2A2A] hover:bg-[#333333] transition-colors",disabled:_,children:"Cancel"}),e.jsx("button",{onClick:Bt,disabled:_,className:"flex-1 py-2 px-4 rounded-xl font-medium text-white transition-colors bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Deleting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"w-4 h-4"}),e.jsx("span",{children:"Delete"})]})})]})]})})}),document.body)},pt=()=>{if(!I)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Select a Booking"}),!ve||!Me?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading bookings..."})]}):(Le||[]).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(rt,{className:"mx-auto h-12 w-12 text-white"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No bookings found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"Create some bookings first to view transaction details."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Booking Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#2A2A2A]/30",children:(Le||[]).slice(0,10).map(qe=>{const ut=st(qe.status),dt=ke(qe.payment_status||"unpaid");ut.icon,dt.icon;const zt=Me.find(Zt=>Zt._id===qe.service);return e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-mono font-bold text-white",children:["#",qe.booking_code]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:zt?.name||"Unknown"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:Ve(qe.date)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${ut.bg} ${ut.text}`,children:ut.label})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${dt.bg} ${dt.text}`,children:dt.label})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsx("button",{onClick:()=>O(qe),className:"inline-flex items-center px-3 py-1 border border-blue-500/30 text-xs font-medium rounded text-blue-400 bg-blue-400/20 hover:bg-blue-400/30 transition-colors",children:"View Details"})})]},qe._id)})})]})})]})});const re=I,Oe=Me?Me.find(qe=>qe._id===re.service):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Booking Summary"}),e.jsx("button",{onClick:()=>O(null),className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(Ze,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Booking Code"}),e.jsxs("p",{className:"text-sm font-mono font-bold text-white",children:["#",re.booking_code]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Service"}),e.jsx("p",{className:"text-sm font-bold text-white",children:Oe?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Date & Time"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[Ve(re.date)," at ",_t(re.time)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-sm font-bold text-green-400",children:["",Oe?.price?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h3",{className:"text-lg font-bold text-white",children:"Payment History"})}),e.jsx("div",{className:"overflow-x-auto",children:I?pe?pe.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#2A2A2A]/30",children:pe.map(qe=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:qe.payment_request_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:qe.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",qe.amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${qe.status==="completed"?"bg-green-50 text-green-700":qe.status==="pending"?"bg-yellow-50 text-yellow-700":"bg-red-50 text-red-700"}`,children:qe.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(qe.created_at).toLocaleDateString()})})]},qe._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(as,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No payments found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No payment records found for this booking."})]}):e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading payment history..."})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ya,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Select a booking to view payment history"})]})})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h3",{className:"text-lg font-bold text-white",children:"POS Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:I?be?be.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Services"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#2A2A2A]/30",children:be.map(qe=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:qe.transaction_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:qe.services?.map(ut=>ut.service_name).join(", ")||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",qe.total_amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:qe.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(qe.createdAt).toLocaleDateString()})})]},qe._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ya,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No transactions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No POS transactions found for this booking."})]}):e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading POS transactions..."})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ds,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Select a booking to view POS transactions"})]})})]})]})};return e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A] px-4 py-2.5",children:e.jsxs("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Total:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.total})]}),e.jsx("div",{className:"h-4 w-px bg-[#2A2A2A]"}),e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 rounded bg-[var(--color-primary)]/10",children:[e.jsx(Nt,{className:"h-3.5 w-3.5 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Today:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.today})]}),e.jsx("div",{className:"h-4 w-px bg-[#2A2A2A]"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Xe,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Pending"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.pending})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Je,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Booked"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.booked})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Je,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Confirmed"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.confirmed})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(xs,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Cancelled"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.cancelled})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Je,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Paid"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.paid})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ds,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Unpaid"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.unpaid})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(xs,{className:"h-3.5 w-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Refunded"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Ge.refunded})]})]})]})}),e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A] px-3 py-2",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-[250px]",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(Ns,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3.5 w-3.5 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search...",value:n,onChange:re=>i(re.target.value),className:"pl-8 pr-3 py-1.5 w-40 bg-[#0A0A0A] border border-[#2A2A2A] text-white placeholder-gray-500 rounded-md focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] text-xs"})]}),e.jsxs("select",{value:o,onChange:re=>c(re.target.value),className:"bg-[#0A0A0A] border border-[#2A2A2A] text-white text-gray-400 rounded-md px-2 py-1.5 text-xs focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] hover:border-[var(--color-primary)]/50 transition-colors",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"booked",children:"Booked"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{value:d,onChange:re=>m(re.target.value),className:"bg-[#0A0A0A] border border-[#2A2A2A] text-white text-gray-400 rounded-md px-2 py-1.5 text-xs focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] hover:border-[var(--color-primary)]/50 transition-colors",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"status",children:"Sort by Status"}),e.jsx("option",{value:"service",children:"Sort by Service"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("input",{type:"date",value:h,onChange:re=>p(re.target.value),className:"px-2 py-1.5 w-32 bg-[#0A0A0A] border border-[#2A2A2A] text-white text-gray-400 rounded-md text-xs focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"}),e.jsx("span",{className:"text-gray-500 text-xs",children:"to"}),e.jsx("input",{type:"date",value:u,onChange:re=>f(re.target.value),min:h||void 0,className:"px-2 py-1.5 w-32 bg-[#0A0A0A] border border-[#2A2A2A] text-white text-gray-400 rounded-md text-xs focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"}),(h||u)&&e.jsx("button",{onClick:()=>{p(""),f("")},className:"p-1 text-gray-400 hover:text-white hover:bg-[#2A2A2A] rounded transition-colors",title:"Clear dates",children:e.jsx(Ze,{className:"h-3.5 w-3.5"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:t,className:"p-1.5 text-gray-400 hover:text-white hover:bg-[#2A2A2A] rounded-md transition-colors",title:"Refresh",children:e.jsx(Ro,{className:"h-4 w-4"})}),e.jsxs("button",{onClick:yt,className:"flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-md hover:from-[var(--color-accent)] hover:brightness-110 transition-all text-xs font-medium shadow-sm",children:[e.jsx(cs,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"New Booking"}),e.jsx("span",{className:"sm:hidden",children:"New"})]})]})]})}),e.jsx(ot,{}),e.jsx("div",{className:"bg-[#1A1A1A] p-2 rounded-lg border border-[#2A2A2A]/50 shadow-lg",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("button",{onClick:()=>ne("bookings"),className:`flex items-center space-x-1.5 px-3 py-1.5 rounded-lg font-semibold transition-colors text-xs ${Z==="bookings"?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-md":"text-gray-400 hover:bg-[#1A1A1A] hover:text-white"}`,children:[e.jsx(rt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Bookings"})]}),e.jsxs("button",{onClick:()=>ne("transaction"),className:`flex items-center space-x-1.5 px-3 py-1.5 rounded-lg font-semibold transition-colors text-xs ${Z==="transaction"?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-md":"text-gray-400 hover:bg-[#1A1A1A] hover:text-white"}`,children:[e.jsx(ya,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Transaction"})]})]})}),Z==="bookings"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#2A2A2A]/30",children:[e.jsx("thead",{className:"bg-[#0A0A0A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Booking"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Barber"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-4 py-2.5 text-left text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Payment Status"}),e.jsx("th",{className:"px-4 py-2.5 text-right text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#2A2A2A]/30",children:ve===void 0?Array.from({length:q}).map((re,Oe)=>e.jsx(Ae,{},`skeleton-${Oe}`)):Jt.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center",children:[e.jsx(rt,{className:"mx-auto h-12 w-12 text-white mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-white mb-1",children:"No bookings found"}),e.jsx("p",{className:"text-sm text-gray-400",children:n||o!=="all"||h||u?"Try adjusting your search or filter criteria.":"Get started by creating a new booking."})]})}):Jt.map(re=>{const Oe=st(re.status),qe=ke(re.payment_status||"unpaid"),ut=re.payment_status||"unpaid",dt=Oe.icon,zt=qe.icon,Zt=Me.find(Wt=>Wt._id===re.service);return e.jsxs("tr",{className:"hover:bg-[#1A1A1A]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-mono font-bold text-white",children:["#",re.booking_code]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:Zt?.name||"Unknown Service"}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Zt?.duration_minutes,"min"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:(()=>{const Wt=re.customer_name||"N/A";if(Wt.startsWith("guest_")){const Ls=Wt.split("_");if(Ls.length>=2){const Ks=Ls[1].replace(/[_\d]/g,"");return`Guest${Ks?` (${Ks.substring(0,10)})`:""}`}return"Guest"}return Wt.startsWith("walkin_")?"Walk-in":Wt})()}),re.customer_phone&&e.jsx("div",{className:"text-xs text-gray-400 font-mono mt-0.5",children:re.customer_phone})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-white",children:Ve(re.date)}),e.jsx("div",{className:"text-sm text-gray-400",children:_t(re.time)})]}),(()=>{const Wt=_e(re.date,re.time);return Wt.show&&re.status!=="completed"&&re.status!=="cancelled"?e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold border ${Wt.bgClass} ${Wt.textClass} ${Wt.borderClass}`,children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),Wt.text]}):null})()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:re.barber_name||"Not assigned"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Oe.bg} ${Oe.text}`,children:[e.jsx(dt,{className:`-ml-0.5 mr-1.5 h-3 w-3 ${Oe.iconColor}`}),Oe.label]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",Zt?parseFloat(Zt.price).toFixed(2):"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${qe.bg} ${qe.text}`,children:[e.jsx(zt,{className:`-ml-0.5 mr-1.5 h-3 w-3 ${qe.iconColor}`}),qe.label]}),re.status==="confirmed"&&ut==="unpaid"&&e.jsxs("button",{onClick:()=>ze(re),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-green-400 bg-green-400/20 hover:bg-green-400/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-400",disabled:_,title:"Process Payment at POS",children:[e.jsx(ds,{className:"h-3 w-3 mr-1"}),"POS"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>w(re),className:"p-1.5 text-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 rounded-md transition-colors",title:"View QR Code",children:e.jsx(rr,{className:"h-4 w-4"})}),re.status==="completed"&&ut==="paid"&&e.jsx("button",{onClick:()=>Re(re),className:"p-1.5 text-blue-400 hover:bg-blue-400/10 rounded-md transition-colors",title:"View Transaction",children:e.jsx(ya,{className:"h-4 w-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:Wt=>{Wt.stopPropagation();const Ls=Wt.currentTarget.getBoundingClientRect();xe(Ks=>Ks.id===re._id?{id:null,position:null}:{id:re._id,position:{top:Ls.bottom+window.scrollY,left:Ls.right+window.scrollX}})},className:"p-1.5 text-gray-400 hover:text-white hover:bg-[#2A2A2A] rounded-md transition-colors",title:"More actions",children:e.jsx(i7,{className:"h-4 w-4"})}),Y.id===re._id&&Ut.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9999]",onClick:Wt=>{Wt.stopPropagation(),xe({id:null,position:null})}}),e.jsxs("div",{className:"absolute z-[10000] w-48 bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg shadow-xl py-1",style:{top:Y.position.top+4,left:Y.position.left,transform:"translateX(-100%)"},onClick:Wt=>Wt.stopPropagation(),children:[re.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{K(re,"booked"),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(hr,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{children:"Book"})]}),e.jsxs("button",{onClick:()=>{K(re,"cancelled"),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(Ml,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{children:"Cancel"})]})]}),re.status==="booked"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{M({show:!0,booking:re,action:"confirm"}),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(Je,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"Confirm"})]}),e.jsxs("button",{onClick:()=>{K(re,"cancelled"),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(Ml,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{children:"Cancel"})]})]}),re.status==="confirmed"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{ze(re),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(ds,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{children:"POS"})]}),e.jsxs("button",{onClick:()=>{X({show:!0,booking:re}),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(Ml,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{children:"Cancel Booking"})]})]}),(re.status==="pending"||re.status==="booked"||re.status==="confirmed")&&e.jsx("div",{className:"my-1 border-t border-[#2A2A2A]"}),e.jsxs("button",{onClick:()=>{We(re),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(sa,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{children:"Edit"})]}),(s?.role==="branch_admin"||s?.role==="super_admin")&&e.jsxs("button",{onClick:()=>{wt(re),xe({id:null,position:null})},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-[#2A2A2A] transition-colors flex items-center gap-2",disabled:_,children:[e.jsx(js,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{children:"Delete"})]})]})]}),document.body)]})]})})]},re._id)})})]})})}),Le.length>0&&kt>1&&e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:Ne,disabled:le===1,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${le===1?"text-gray-500 cursor-not-allowed":"text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx(Xa,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Page ",e.jsx("span",{className:"text-[var(--color-primary)] font-semibold",children:le})," of ",e.jsx("span",{className:"text-white font-semibold",children:kt})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",Pt+1,"-",Math.min(St,Le.length)," of ",Le.length,")"]})]}),e.jsxs("button",{onClick:Ye,disabled:le===kt,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${le===kt?"text-gray-500 cursor-not-allowed":"text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx("span",{className:"text-sm",children:"Next"}),e.jsx(sr,{className:"w-4 h-4"})]})]})})]}):e.jsx(pt,{}),G&&e.jsx(ie,{booking:I,onClose:()=>{te(!1),O(null)}}),e.jsx(bF,{isOpen:g,onClose:()=>y(!1),onSubmit:bt,user:s}),N&&e.jsx($e,{booking:N,onClose:()=>w(null)}),e.jsx(nt,{}),e.jsx(ct,{}),F.show&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:99999},children:e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-6 max-w-md w-full shadow-2xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(Je,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-white",children:F.action==="confirm"?"Confirm Booking":"Complete Booking"}),e.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["Are you sure you want to ",F.action==="confirm"?"confirm":"mark as completed"," booking #",F.booking?.booking_code,"?"]}),F.booking&&e.jsxs("div",{className:"text-left space-y-2 p-4 rounded-xl bg-[#2A2A2A]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Customer:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:F.booking.customer_name||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Phone:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:F.booking.customer_phone||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Service:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:Me.find(re=>re._id===F.booking.service)?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Date & Time:"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[Ve(F.booking.date)," at ",_t(F.booking.time)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Barber:"}),e.jsx("span",{className:"text-sm font-bold text-white",children:F.booking.barber_name||"Not assigned"})]})]}),F.booking?.customer_phone&&e.jsx("div",{className:"mt-4 p-3 rounded-xl bg-[#2A2A2A] border border-[#3A3A3A]",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:J,onChange:re=>$(re.target.checked),className:"w-5 h-5 text-[#F68B24] bg-[#1A1A1A] border-[#3A3A3A] rounded focus:ring-[#F68B24] focus:ring-2"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M3,{className:"w-4 h-4 text-[#F68B24]"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Send SMS notification to customer"})]})]})})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{M({show:!1,booking:null,action:null}),$(!1)},className:"flex-1 py-2 px-4 rounded-xl font-medium text-gray-300 bg-[#2A2A2A] hover:bg-[#333333] transition-colors",children:"Cancel"}),e.jsx("button",{onClick:se,disabled:_,className:"flex-1 py-2 px-4 rounded-xl font-medium text-white transition-colors bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:_?void 0:"#F68B24"},children:_?"Processing...":F.action==="confirm"?"Confirm":"Complete"})]})]})})}),document.body)]})},Y3=6048e5,KF=864e5,Jj=Symbol.for("constructDateFrom");function kr(t,s){return typeof t=="function"?t(s):t&&typeof t=="object"&&Jj in t?t[Jj](s):t instanceof Date?new t.constructor(s):new Date(s)}function xr(t,s){return kr(s||t,t)}function Q3(t,s,n){const i=xr(t,n?.in);return isNaN(s)?kr(t,NaN):(s&&i.setDate(i.getDate()+s),i)}function Nm(t,s,n){const i=xr(t,n?.in);if(isNaN(s))return kr(t,NaN);if(!s)return i;const o=i.getDate(),c=kr(t,i.getTime());c.setMonth(i.getMonth()+s+1,0);const d=c.getDate();return o>=d?c:(i.setFullYear(c.getFullYear(),c.getMonth(),o),i)}let XF={};function u0(){return XF}function Rn(t,s){const n=u0(),i=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=xr(t,s?.in),c=o.getDay(),d=(c<i?7:0)+c-i;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function im(t,s){return Rn(t,{...s,weekStartsOn:1})}function W3(t,s){const n=xr(t,s?.in),i=n.getFullYear(),o=kr(n,0);o.setFullYear(i+1,0,4),o.setHours(0,0,0,0);const c=im(o),d=kr(n,0);d.setFullYear(i,0,4),d.setHours(0,0,0,0);const m=im(d);return n.getTime()>=c.getTime()?i+1:n.getTime()>=m.getTime()?i:i-1}function Gj(t){const s=xr(t),n=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return n.setUTCFullYear(s.getFullYear()),+t-+n}function wm(t,...s){const n=kr.bind(null,s.find(i=>typeof i=="object"));return s.map(n)}function om(t,s){const n=xr(t,s?.in);return n.setHours(0,0,0,0),n}function ZF(t,s,n){const[i,o]=wm(n?.in,t,s),c=om(i),d=om(o),m=+c-Gj(c),h=+d-Gj(d);return Math.round((m-h)/KF)}function eP(t,s){const n=W3(t,s),i=kr(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),im(i)}function tP(t){return kr(t,Date.now())}function ug(t,s,n){const[i,o]=wm(n?.in,t,s);return+om(i)==+om(o)}function sP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function rP(t){return!(!sP(t)&&typeof t!="number"||isNaN(+xr(t)))}function ab(t,s){const n=xr(t,s?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}function aP(t,s){const[n,i]=wm(t,s.start,s.end);return{start:n,end:i}}function nb(t,s){const{start:n,end:i}=aP(s?.in,t);let o=+n>+i;const c=o?+n:+i,d=o?i:n;d.setHours(0,0,0,0);let m=1;const h=[];for(;+d<=c;)h.push(kr(n,d)),d.setDate(d.getDate()+m),d.setHours(0,0,0,0);return o?h.reverse():h}function ib(t,s){const n=xr(t,s?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function nP(t,s){const n=xr(t,s?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function ob(t,s){const n=u0(),i=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=xr(t,s?.in),c=o.getDay(),d=(c<i?-7:0)+6-(c-i);return o.setDate(o.getDate()+d),o.setHours(23,59,59,999),o}const iP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oP=(t,s,n)=>{let i;const o=iP[t];return typeof o=="string"?i=o:s===1?i=o.one:i=o.other.replace("{{count}}",s.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function jf(t){return(s={})=>{const n=s.width?String(s.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xP={date:jf({formats:lP,defaultWidth:"full"}),time:jf({formats:cP,defaultWidth:"full"}),dateTime:jf({formats:dP,defaultWidth:"full"})},uP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mP=(t,s,n,i)=>uP[t];function zl(t){return(s,n)=>{const i=n?.context?String(n.context):"standalone";let o;if(i==="formatting"&&t.formattingValues){const d=t.defaultFormattingWidth||t.defaultWidth,m=n?.width?String(n.width):d;o=t.formattingValues[m]||t.formattingValues[d]}else{const d=t.defaultWidth,m=n?.width?String(n.width):t.defaultWidth;o=t.values[m]||t.values[d]}const c=t.argumentCallback?t.argumentCallback(s):s;return o[c]}}const hP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},bP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yP=(t,s)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},jP={ordinalNumber:yP,era:zl({values:hP,defaultWidth:"wide"}),quarter:zl({values:pP,defaultWidth:"wide",argumentCallback:t=>t-1}),month:zl({values:fP,defaultWidth:"wide"}),day:zl({values:gP,defaultWidth:"wide"}),dayPeriod:zl({values:bP,defaultWidth:"wide",formattingValues:vP,defaultFormattingWidth:"wide"})};function Il(t){return(s,n={})=>{const i=n.width,o=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],c=s.match(o);if(!c)return null;const d=c[0],m=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(m)?wP(m,f=>f.test(d)):NP(m,f=>f.test(d));let p;p=t.valueCallback?t.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;const u=s.slice(d.length);return{value:p,rest:u}}}function NP(t,s){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&s(t[n]))return n}function wP(t,s){for(let n=0;n<t.length;n++)if(s(t[n]))return n}function AP(t){return(s,n={})=>{const i=s.match(t.matchPattern);if(!i)return null;const o=i[0],c=s.match(t.parsePattern);if(!c)return null;let d=t.valueCallback?t.valueCallback(c[0]):c[0];d=n.valueCallback?n.valueCallback(d):d;const m=s.slice(o.length);return{value:d,rest:m}}}const CP=/^(\d+)(th|st|nd|rd)?/i,EP=/\d+/i,kP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_P={any:[/^b/i,/^(a|c)/i]},BP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},SP={any:[/1/i,/2/i,/3/i,/4/i]},DP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},PP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},OP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},MP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RP={ordinalNumber:AP({matchPattern:CP,parsePattern:EP,valueCallback:t=>parseInt(t,10)}),era:Il({matchPatterns:kP,defaultMatchWidth:"wide",parsePatterns:_P,defaultParseWidth:"any"}),quarter:Il({matchPatterns:BP,defaultMatchWidth:"wide",parsePatterns:SP,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Il({matchPatterns:DP,defaultMatchWidth:"wide",parsePatterns:FP,defaultParseWidth:"any"}),day:Il({matchPatterns:PP,defaultMatchWidth:"wide",parsePatterns:TP,defaultParseWidth:"any"}),dayPeriod:Il({matchPatterns:OP,defaultMatchWidth:"any",parsePatterns:MP,defaultParseWidth:"any"})},zP={code:"en-US",formatDistance:oP,formatLong:xP,formatRelative:mP,localize:jP,match:RP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function IP(t,s){const n=xr(t,s?.in);return ZF(n,nP(n))+1}function LP(t,s){const n=xr(t,s?.in),i=+im(n)-+eP(n);return Math.round(i/Y3)+1}function K3(t,s){const n=xr(t,s?.in),i=n.getFullYear(),o=u0(),c=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,d=kr(s?.in||t,0);d.setFullYear(i+1,0,c),d.setHours(0,0,0,0);const m=Rn(d,s),h=kr(s?.in||t,0);h.setFullYear(i,0,c),h.setHours(0,0,0,0);const p=Rn(h,s);return+n>=+m?i+1:+n>=+p?i:i-1}function qP(t,s){const n=u0(),i=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=K3(t,s),c=kr(s?.in||t,0);return c.setFullYear(o,0,i),c.setHours(0,0,0,0),Rn(c,s)}function $P(t,s){const n=xr(t,s?.in),i=+Rn(n,s)-+qP(n,s);return Math.round(i/Y3)+1}function rs(t,s){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(s,"0");return n+i}const kn={y(t,s){const n=t.getFullYear(),i=n>0?n:1-n;return rs(s==="yy"?i%100:i,s.length)},M(t,s){const n=t.getMonth();return s==="M"?String(n+1):rs(n+1,2)},d(t,s){return rs(t.getDate(),s.length)},a(t,s){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,s){return rs(t.getHours()%12||12,s.length)},H(t,s){return rs(t.getHours(),s.length)},m(t,s){return rs(t.getMinutes(),s.length)},s(t,s){return rs(t.getSeconds(),s.length)},S(t,s){const n=s.length,i=t.getMilliseconds(),o=Math.trunc(i*Math.pow(10,n-3));return rs(o,s.length)}},ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Yj={G:function(t,s,n){const i=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,s,n){if(s==="yo"){const i=t.getFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return kn.y(t,s)},Y:function(t,s,n,i){const o=K3(t,i),c=o>0?o:1-o;if(s==="YY"){const d=c%100;return rs(d,2)}return s==="Yo"?n.ordinalNumber(c,{unit:"year"}):rs(c,s.length)},R:function(t,s){const n=W3(t);return rs(n,s.length)},u:function(t,s){const n=t.getFullYear();return rs(n,s.length)},Q:function(t,s,n){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(i);case"QQ":return rs(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,s,n){const i=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(i);case"qq":return rs(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,s,n){const i=t.getMonth();switch(s){case"M":case"MM":return kn.M(t,s);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,s,n){const i=t.getMonth();switch(s){case"L":return String(i+1);case"LL":return rs(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,s,n,i){const o=$P(t,i);return s==="wo"?n.ordinalNumber(o,{unit:"week"}):rs(o,s.length)},I:function(t,s,n){const i=LP(t);return s==="Io"?n.ordinalNumber(i,{unit:"week"}):rs(i,s.length)},d:function(t,s,n){return s==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):kn.d(t,s)},D:function(t,s,n){const i=IP(t);return s==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):rs(i,s.length)},E:function(t,s,n){const i=t.getDay();switch(s){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,s,n,i){const o=t.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(s){case"e":return String(c);case"ee":return rs(c,2);case"eo":return n.ordinalNumber(c,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,s,n,i){const o=t.getDay(),c=(o-i.weekStartsOn+8)%7||7;switch(s){case"c":return String(c);case"cc":return rs(c,s.length);case"co":return n.ordinalNumber(c,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,s,n){const i=t.getDay(),o=i===0?7:i;switch(s){case"i":return String(o);case"ii":return rs(o,s.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,s,n){const o=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,s,n){const i=t.getHours();let o;switch(i===12?o=ho.noon:i===0?o=ho.midnight:o=i/12>=1?"pm":"am",s){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,s,n){const i=t.getHours();let o;switch(i>=17?o=ho.evening:i>=12?o=ho.afternoon:i>=4?o=ho.morning:o=ho.night,s){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,s,n){if(s==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return kn.h(t,s)},H:function(t,s,n){return s==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):kn.H(t,s)},K:function(t,s,n){const i=t.getHours()%12;return s==="Ko"?n.ordinalNumber(i,{unit:"hour"}):rs(i,s.length)},k:function(t,s,n){let i=t.getHours();return i===0&&(i=24),s==="ko"?n.ordinalNumber(i,{unit:"hour"}):rs(i,s.length)},m:function(t,s,n){return s==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):kn.m(t,s)},s:function(t,s,n){return s==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):kn.s(t,s)},S:function(t,s){return kn.S(t,s)},X:function(t,s,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(s){case"X":return Wj(i);case"XXXX":case"XX":return mi(i);case"XXXXX":case"XXX":default:return mi(i,":")}},x:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"x":return Wj(i);case"xxxx":case"xx":return mi(i);case"xxxxx":case"xxx":default:return mi(i,":")}},O:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Qj(i,":");case"OOOO":default:return"GMT"+mi(i,":")}},z:function(t,s,n){const i=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Qj(i,":");case"zzzz":default:return"GMT"+mi(i,":")}},t:function(t,s,n){const i=Math.trunc(+t/1e3);return rs(i,s.length)},T:function(t,s,n){return rs(+t,s.length)}};function Qj(t,s=""){const n=t>0?"-":"+",i=Math.abs(t),o=Math.trunc(i/60),c=i%60;return c===0?n+String(o):n+String(o)+s+rs(c,2)}function Wj(t,s){return t%60===0?(t>0?"-":"+")+rs(Math.abs(t)/60,2):mi(t,s)}function mi(t,s=""){const n=t>0?"-":"+",i=Math.abs(t),o=rs(Math.trunc(i/60),2),c=rs(i%60,2);return n+o+s+c}const Kj=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},X3=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},UP=(t,s)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return Kj(t,s);let c;switch(i){case"P":c=s.dateTime({width:"short"});break;case"PP":c=s.dateTime({width:"medium"});break;case"PPP":c=s.dateTime({width:"long"});break;case"PPPP":default:c=s.dateTime({width:"full"});break}return c.replace("{{date}}",Kj(i,s)).replace("{{time}}",X3(o,s))},VP={p:X3,P:UP},HP=/^D+$/,JP=/^Y+$/,GP=["D","DD","YY","YYYY"];function YP(t){return HP.test(t)}function QP(t){return JP.test(t)}function WP(t,s,n){const i=KP(t,s,n);if(console.warn(i),GP.includes(t))throw new RangeError(i)}function KP(t,s,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const XP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eT=/^'([^]*?)'?$/,tT=/''/g,sT=/[a-zA-Z]/;function zs(t,s,n){const i=u0(),o=i.locale??zP,c=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,d=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,m=xr(t,n?.in);if(!rP(m))throw new RangeError("Invalid time value");let h=s.match(ZP).map(u=>{const f=u[0];if(f==="p"||f==="P"){const g=VP[f];return g(u,o.formatLong)}return u}).join("").match(XP).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const f=u[0];if(f==="'")return{isToken:!1,value:rT(u)};if(Yj[f])return{isToken:!0,value:u};if(f.match(sT))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:u}});o.localize.preprocessor&&(h=o.localize.preprocessor(m,h));const p={firstWeekContainsDate:c,weekStartsOn:d,locale:o};return h.map(u=>{if(!u.isToken)return u.value;const f=u.value;(QP(f)||YP(f))&&WP(f,s,String(t));const g=Yj[f[0]];return g(m,f,o.localize,p)}).join("")}function rT(t){const s=t.match(eT);return s?s[1].replace(tT,"'"):t}function lb(t,s,n){const[i,o]=wm(n?.in,t,s);return i.getFullYear()===o.getFullYear()&&i.getMonth()===o.getMonth()}function Z3(t,s){return ug(kr(t,t),tP(t))}function aT(t,s,n){return Q3(t,-1,n)}function cb(t,s,n){return Nm(t,-1,n)}const nT=({barber:t,className:s="w-12 h-12"})=>{const[n,i]=C.useState(!1),c=me(H.services.barbers.getImageUrl,{storageId:t.avatarStorageId})||t.avatarUrl;return n||!c?e.jsx("div",{className:`flex items-center justify-center bg-[#333] rounded-full ${s}`,children:e.jsx(tt,{className:"w-4 h-4 text-gray-400"})}):e.jsx("img",{src:c,alt:`${t.full_name} avatar`,className:`${s} rounded-full object-cover border border-[#333]`,onError:()=>i(!0)})},iT=({user:t})=>{const[s,n]=C.useState(new Date),[i,o]=C.useState("day"),[c,d]=C.useState(null),[m,h]=C.useState(!1),[p,u]=C.useState(null),f=8,g=20,y=100,b=t?.role==="super_admin",j=t?.branch_id,N=me(H.services.bookings.getAllBookings,b?void 0:"skip"),w=me(H.services.bookings.getBookingsByBranch,j&&!b?{branch_id:j}:"skip"),B=(b?N:w)||[],S=me(H.services.services.getAllServices,b?void 0:"skip"),_=me(H.services.services.getServicesByBranch,j&&!b?{branch_id:j}:"skip"),k=(b?S:_)||[],E=me(H.services.barbers.getActiveBarbers,b?void 0:"skip"),D=me(H.services.barbers.getBarbersByBranch,j&&!b?{branch_id:j}:"skip"),M=((b?E:D)||[]).filter(R=>R.is_active),P=C.useMemo(()=>{const R=[];for(let q=f;q<=g;q++)R.push(q);return R},[]),T=()=>{n(i==="month"?cb(s):aT(s))},L=()=>{n(i==="month"?Nm(s,1):Q3(s,1))},X=()=>{n(new Date)},Z=(R,q=null)=>B.filter(J=>{const $=new Date(J.date);return!(!ug($,R)||q&&J.barber!==q||J.status==="cancelled")}),ne=R=>{switch(R){case"confirmed":return"bg-green-500/20 border-green-500 text-green-200";case"completed":return"bg-blue-500/20 border-blue-500 text-blue-200";case"booked":return"bg-purple-500/20 border-purple-500 text-purple-200";default:return"bg-yellow-500/20 border-yellow-500 text-yellow-200"}},I=(R,q)=>{q.stopPropagation(),d(R),h(!0),u(null)},O=R=>{if(!R)return"";try{const[q,J]=R.split(":"),$=new Date;return $.setHours(parseInt(q),parseInt(J)),zs($,"h:mm a")}catch{return R}},G=R=>{if(!R)return"Walk-in";if(R.startsWith("guest_")){const J=R.split("_").slice(1).filter($=>isNaN($)&&$.length>4);if(J.length>0)return J.map($=>$.charAt(0).toUpperCase()+$.slice(1).toLowerCase()).join(" ")}return R},te=R=>{const q=[...R].sort((xe,oe)=>{const de=parseInt(xe.time.split(":")[0])*60+parseInt(xe.time.split(":")[1]),ve=parseInt(oe.time.split(":")[0])*60+parseInt(oe.time.split(":")[1]);if(de!==ve)return de-ve;const Me=k.find(pe=>pe._id===xe.service);return(k.find(pe=>pe._id===oe.service)?.duration_minutes||0)-(Me?.duration_minutes||0)}),J=[],$={};q.forEach(xe=>{const oe=parseInt(xe.time.split(":")[0]),de=parseInt(xe.time.split(":")[1]),ve=oe*60+de,Me=k.find(Ue=>Ue._id===xe.service),Ke=Me?Me.duration_minutes:60,pe=ve+Ke;let be=0,Be=!1;for(;!Be;)J[be]||(J[be]=[]),J[be].some(ue=>{const Ie=parseInt(ue.time.split(":")[0]),st=parseInt(ue.time.split(":")[1]),Le=Ie*60+st,kt=k.find(Jt=>Jt._id===ue.service),Pt=kt?kt.duration_minutes:60,St=Le+Pt;return ve<St&&pe>Le})?be++:(J[be].push(xe),$[xe._id]={columnIndex:be},Be=!0)});const Y=J.length;return q.forEach(xe=>{const{columnIndex:oe}=$[xe._id],de=95/Y,ve=oe*de+2.5;$[xe._id]={width:`${de}%`,left:`${ve}%`,zIndex:oe+10}}),$},Q=()=>e.jsxs("div",{className:"flex flex-col h-[calc(100vh-240px)] overflow-hidden bg-[#1A1A1A] rounded-xl border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex border-b border-[#2A2A2A] bg-[#222]",children:[e.jsx("div",{className:"w-16 flex-shrink-0 border-r border-[#2A2A2A] p-2"})," ",e.jsx("div",{className:"flex-1 flex overflow-x-auto scrollbar-hide",children:M.map(R=>e.jsx("div",{className:"flex-1 min-w-[200px] p-3 border-r border-[#2A2A2A] text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(nT,{barber:R,className:"w-8 h-8"}),e.jsx("span",{className:"font-bold text-white truncate",children:R.full_name})]})},R._id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto relative custom-scrollbar",children:e.jsxs("div",{className:"flex min-h-full relative",children:[e.jsx("div",{className:"w-16 flex-shrink-0 border-r border-[#2A2A2A] bg-[#1A1A1A] sticky left-0 z-10",children:P.map(R=>e.jsx("div",{className:"relative border-b border-[#2A2A2A]/30",style:{height:`${y}px`},children:e.jsx("span",{className:"absolute -top-3 left-2 text-xs text-gray-500 font-medium",children:R>12?`${R-12} PM`:R===12?"12 PM":`${R} AM`})},R))}),e.jsxs("div",{className:"flex-1 flex relative",children:[e.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",children:P.map(R=>e.jsx("div",{className:"border-b border-[#2A2A2A]/30 w-full",style:{height:`${y}px`}},R))}),M.map(R=>{const q=Z(s,R._id),J=te(q);return e.jsx("div",{className:"flex-1 min-w-[200px] border-r border-[#2A2A2A] relative z-1",children:q.map($=>{const Y=k.find(ue=>ue._id===$.service),xe=Y?Y.name:"Unknown Service",oe=ne($.status),de=J[$._id]||{width:"95%",left:"2.5%",zIndex:10},[ve,Me]=$.time.split(":").map(Number),Ke=(ve-f)*60+Me,pe=Y?Y.duration_minutes:60,be=Ke/60*y,Be=pe/60*y,Ue=pe<45;return e.jsx("div",{style:{top:`${be}px`,height:`${Be}px`,position:"absolute",width:de.width,left:de.left,zIndex:de.zIndex},onClick:ue=>I($,ue),className:`rounded-lg border-l-4 p-2 cursor-pointer hover:brightness-110 transition-all shadow-lg overflow-hidden ${oe}`,children:Ue?e.jsxs("div",{className:"flex flex-col h-full justify-center gap-0.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-bold text-white text-xs truncate",children:G($.customer_name)}),e.jsx("span",{className:"text-[10px] font-medium opacity-90 whitespace-nowrap",children:O($.time)})]}),e.jsx("div",{className:"text-[10px] opacity-80 truncate",children:xe})]}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"font-bold text-white text-sm leading-tight mb-0.5 line-clamp-1",children:G($.customer_name)}),e.jsx("div",{className:"text-xs opacity-90 leading-tight line-clamp-1",children:xe}),e.jsxs("div",{className:"mt-auto flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-mono text-xs font-semibold opacity-95",children:O($.time)}),e.jsxs("span",{className:"text-[10px] opacity-80",children:[pe," min"]})]}),$.price&&e.jsxs("div",{className:"text-[10px] font-semibold text-white/90 mt-0.5",children:["$",$.price]})]})},$._id)})},R._id)})]})]})})]}),ee=()=>{const R=ib(s),q=ab(R),J=Rn(R),$=ob(q),Y=nb({start:J,end:$}),xe=[];let oe=[];return Y.forEach(de=>{oe.push(de),oe.length===7&&(xe.push(oe),oe=[])}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl border border-[#2A2A2A] overflow-hidden flex flex-col h-[calc(100vh-240px)]",children:[e.jsx("div",{className:"grid grid-cols-7 border-b border-[#2A2A2A] bg-[#222]",children:["S","M","T","W","T","F","S"].map((de,ve)=>e.jsxs("div",{className:"p-1 sm:p-3 text-center text-xs sm:text-sm font-bold text-gray-400 uppercase tracking-wider",children:[e.jsx("span",{className:"hidden sm:inline",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][ve]}),e.jsx("span",{className:"sm:hidden",children:de})]},ve))}),e.jsx("div",{className:"flex-1 grid grid-rows-5 sm:grid-rows-6 overflow-hidden",children:xe.map((de,ve)=>e.jsx("div",{className:"grid grid-cols-7 h-full min-h-0",children:de.map(Me=>{const Ke=lb(Me,R),pe=ug(Me,new Date),be=Z(Me);return e.jsxs("div",{onClick:()=>{n(Me),o("day")},className:`
                       border-r border-b border-[#2A2A2A] p-1 sm:p-2 transition-colors cursor-pointer relative group overflow-hidden
                       ${Ke?"bg-[#1A1A1A] text-white hover:bg-[#222]":"bg-[#111] text-gray-600"}
                       ${pe?"bg-[var(--color-primary)]/10":""}
                     `,children:[e.jsx("div",{className:`
                       flex items-center justify-center rounded-full text-sm sm:text-sm font-bold mb-1
                       ${pe?"w-6 h-6 sm:w-7 sm:h-7 bg-[var(--color-primary)] text-white shadow-lg shadow-[var(--color-primary)]/30":"w-6 h-6 sm:w-7 sm:h-7"}
                     `,children:zs(Me,"d")}),e.jsxs("div",{className:"space-y-0.5 sm:space-y-1 overflow-hidden",children:[e.jsx("div",{className:"sm:hidden",children:be.length>0&&e.jsxs("div",{className:"text-[8px] text-center bg-[#2A2A2A] rounded px-1 py-0.5 text-[var(--color-primary)] font-medium",children:[be.length," booking",be.length!==1?"s":""]})}),e.jsxs("div",{className:"hidden sm:block space-y-1 overflow-y-auto max-h-[calc(100%-35px)] custom-scrollbar",children:[be.slice(0,3).map(Be=>e.jsxs("div",{className:"text-[10px] truncate px-1.5 py-0.5 rounded bg-[#2A2A2A] text-gray-300 border border-[#333] hover:bg-[#333] transition-colors",children:[e.jsx("span",{className:"font-medium",children:O(Be.time)})," ",Be.customer_name?.split(" ")[0]]},Be._id)),be.length>3&&e.jsxs("div",{className:"text-[10px] text-center text-gray-500 font-medium px-1.5 py-0.5",children:["+",be.length-3," more"]})]})]})]},Me.toString())})},ve))})]})},le=()=>{if(!c)return null;const R=k.find(J=>J._id===c.service),q=M.find(J=>J._id===c.barber);return e.jsx(ns,{isOpen:m,onClose:()=>h(!1),title:"Booking Details",maxWidth:"max-w-md",variant:"dark",children:e.jsxs("div",{className:"space-y-6",children:[p&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 text-red-200 px-4 py-2 rounded-lg flex items-center text-sm",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2 flex-shrink-0"}),p]}),e.jsxs("div",{className:"flex items-center space-x-4 pb-4 border-b border-[#2A2A2A]",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(tt,{className:"w-6 h-6 text-[var(--color-primary)]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:c.customer_name||"Walk-in Customer"}),e.jsx("p",{className:"text-gray-400 text-sm",children:c.customer_phone||"No phone number"}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1 font-mono",children:["#",c.booking_code]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] p-3 rounded-xl border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 mb-1",children:[e.jsx(rt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Date"})]}),e.jsx("p",{className:"text-white font-medium",children:zs(new Date(c.date),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-3 rounded-xl border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 mb-1",children:[e.jsx(Nt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Time"})]}),e.jsx("p",{className:"text-white font-medium",children:O(c.time)})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-3 rounded-xl border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 mb-1",children:[e.jsx(ys,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Service"})]}),e.jsx("p",{className:"text-white font-medium truncate",children:R?.name||"Unknown"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-3 rounded-xl border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 mb-1",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Barber"})]}),e.jsx("p",{className:"text-white font-medium truncate",children:q?.full_name||"Any Staff"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A] flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase block mb-1",children:"Total Price"}),e.jsxs("span",{className:"text-2xl font-black text-[var(--color-primary)]",children:["$",c.price]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-bold border ${ne(c.status)}`,children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})]}),c.notes&&e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]",children:[e.jsx("span",{className:"text-xs text-gray-400 font-bold uppercase block mb-2",children:"Notes"}),e.jsxs("p",{className:"text-gray-300 text-sm italic",children:['"',c.notes,'"']})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-[#2A2A2A] hover:bg-[#333] text-white rounded-lg font-medium transition-colors",children:"Close"})})]})})};return e.jsxs("div",{className:"h-full flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h2",{className:"text-2xl font-black text-white",children:zs(s,i==="month"?"MMMM yyyy":"EEEE, MMM d, yyyy")}),e.jsxs("div",{className:"flex items-center bg-[#2A2A2A] rounded-lg p-1 border border-[#333]",children:[e.jsx("button",{onClick:T,className:"p-1 hover:bg-[#333] text-gray-400 hover:text-white rounded-md transition-colors",children:e.jsx(Xa,{className:"w-5 h-5"})}),e.jsx("button",{onClick:X,className:"px-3 py-1 text-xs font-bold text-gray-300 hover:text-white transition-colors",children:"Today"}),e.jsx("button",{onClick:L,className:"p-1 hover:bg-[#333] text-gray-400 hover:text-white rounded-md transition-colors",children:e.jsx(sr,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex items-center bg-[#2A2A2A] rounded-lg p-1 border border-[#333]",children:[e.jsxs("button",{onClick:()=>o("day"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${i==="day"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#333]"}`,children:[e.jsx(B7,{className:"w-4 h-4"}),e.jsx("span",{children:"Day View"})]}),e.jsxs("button",{onClick:()=>o("month"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${i==="month"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#333]"}`,children:[e.jsx(s0,{className:"w-4 h-4"}),e.jsx("span",{children:"Month View"})]})]})]}),e.jsx("div",{className:"flex-1",children:i==="day"?Q():ee()}),m&&le()]})},oT=({isOpen:t,onClose:s,onSubmit:n,editingBarber:i=null,services:o=[]})=>{const{user:c}=Dt(),[d,m]=C.useState({username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",avatar:"",avatarStorageId:void 0,schedule_type:"weekly",specific_dates:[],schedule:{monday:{available:!0,start:"09:00",end:"22:00"},tuesday:{available:!0,start:"09:00",end:"22:00"},wednesday:{available:!0,start:"09:00",end:"22:00"},thursday:{available:!0,start:"09:00",end:"22:00"},friday:{available:!0,start:"09:00",end:"22:00"},saturday:{available:!0,start:"09:00",end:"22:00"},sunday:{available:!1,start:"09:00",end:"22:00"}}}),[h,p]=C.useState(new Date);fr.useEffect(()=>{console.log("CreateBarberModal formData updated:",d)},[d]),C.useEffect(()=>{if(i){const R=o?.map(J=>J._id)||[],q=(i.services||[]).filter(J=>R.includes(J));m({username:"",email:i.email||"",password:"",newPassword:"",mobile_number:i.phone||"",full_name:i.full_name||"",phone:i.phone||"",is_active:i.is_active??!0,services:q,experience:i.experience||"0 years",avatar:i.avatar||"",avatarStorageId:i.avatarStorageId||void 0,schedule_type:i.schedule_type||"weekly",specific_dates:i.specific_dates||[],schedule:i.schedule||{monday:{available:!0,start:"09:00",end:"17:00"},tuesday:{available:!0,start:"09:00",end:"17:00"},wednesday:{available:!0,start:"09:00",end:"17:00"},thursday:{available:!0,start:"09:00",end:"17:00"},friday:{available:!0,start:"09:00",end:"17:00"},saturday:{available:!0,start:"09:00",end:"17:00"},sunday:{available:!1,start:"09:00",end:"17:00"}}})}else m({username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",avatar:"",avatarStorageId:void 0,schedule_type:"weekly",specific_dates:[],schedule:{monday:{available:!0,start:"09:00",end:"17:00"},tuesday:{available:!0,start:"09:00",end:"17:00"},wednesday:{available:!0,start:"09:00",end:"17:00"},thursday:{available:!0,start:"09:00",end:"17:00"},friday:{available:!0,start:"09:00",end:"17:00"},saturday:{available:!0,start:"09:00",end:"17:00"},sunday:{available:!1,start:"09:00",end:"17:00"}}})},[i,o]);const[u,f]=C.useState(!1),[g,y]=C.useState(""),[b,j]=C.useState(""),[N,w]=C.useState(!1),[B,S]=C.useState(null);De(H.services.barbers.createBarber);const _=De(H.services.barbers.createBarberWithAccount),k=De(H.services.barbers.updateBarber),E=De(H.services.barbers.updateBarberPassword),D=De(H.services.barbers.generateUploadUrl),F=me(H.services.barbers.getImageUrl,{storageId:d.avatarStorageId}),M=(R,q)=>{m(J=>({...J,[R]:q}))},P=(R,q,J)=>{m($=>({...$,schedule:{...$.schedule,[R]:{...$.schedule[R],[q]:J}}}))},T=(R,q="09:00",J="22:00")=>{const $={};Object.keys(d.schedule).forEach(Y=>{$[Y]={available:R,start:q,end:J}}),m(Y=>({...Y,schedule:$}))},L=R=>{m(q=>({...q,schedule_type:R}))},X=R=>{const q=zs(R,"yyyy-MM-dd");d.specific_dates.findIndex($=>$.date===q)>=0?m($=>({...$,specific_dates:$.specific_dates.filter(Y=>Y.date!==q)})):m($=>({...$,specific_dates:[...$.specific_dates,{date:q,available:!0,start:"09:00",end:"22:00"}]}))},Z=(R,q,J)=>{m($=>({...$,specific_dates:$.specific_dates.map(Y=>Y.date===R?{...Y,[q]:J}:Y)}))},ne=()=>p(Nm(h,1)),I=()=>p(cb(h)),O=()=>{const R=[];for(let q=6;q<=22;q++)for(let J=0;J<60;J+=30){const $=`${q.toString().padStart(2,"0")}:${J.toString().padStart(2,"0")}`,Y=q>=12?"PM":"AM",oe=`${q===0?12:q>12?q-12:q}:${J.toString().padStart(2,"0")} ${Y}`;R.push({value:$,label:oe})}return R},G=R=>{const[q,J]=R.split(":").map(Number),$=q>=12?"PM":"AM";return`${q===0?12:q>12?q-12:q}:${J.toString().padStart(2,"0")} ${$}`},te=async R=>{w(!0);try{const q=await D(),J=await fetch(q,{method:"POST",headers:{"Content-Type":R.type},body:R});if(!J.ok)throw new Error("Failed to upload image");const{storageId:$}=await J.json();return $}catch(q){throw console.error("Image upload failed:",q),q}finally{w(!1)}},Q=async R=>{const q=R.target.files[0];if(q){if(!q.type.startsWith("image/")){y("Please select an image file");return}if(q.size>5*1024*1024){y("File size must be less than 5MB");return}try{const J=await te(q);M("avatarStorageId",J),y("")}catch{y("Failed to upload image. Please try again.")}}},ee=async R=>{if(R.preventDefault(),i){if(!d.full_name.trim()||!d.email.trim()){y("Full name and email are required");return}}else if(!d.username.trim()||!d.email.trim()||!d.password.trim()||!d.mobile_number.trim()||!d.full_name.trim()){y("Username, email, password, mobile number, and full name are required");return}f(!0),y(""),j("");try{if(i){if(!c?.id){y("You must be logged in to update a barber");return}const q={full_name:d.full_name.trim(),email:d.email.trim(),phone:d.phone||"",is_active:d.is_active,services:d.services,experience:d.experience||"0 years",avatar:d.avatar||"",avatarStorageId:d.avatarStorageId||void 0,schedule:d.schedule,schedule_type:d.schedule_type,specific_dates:d.specific_dates};await k({id:i._id,...q}),d.newPassword&&d.newPassword.trim()&&await E({barberId:i._id,newPassword:d.newPassword.trim()})}else{if(!c?.branch_id){y("Branch ID is required. Please contact your administrator."),f(!1);return}const q={username:d.username.trim(),email:d.email.trim(),password:d.password.trim(),mobile_number:d.mobile_number.trim(),full_name:d.full_name.trim(),phone:d.mobile_number.trim(),is_active:d.is_active,services:d.services,branch_id:c.branch_id,experience:d.experience||"0 years",avatar:d.avatar||"",avatarStorageId:d.avatarStorageId||void 0,schedule:d.schedule,schedule_type:d.schedule_type,specific_dates:d.specific_dates};await _(q)}j(i?"Barber updated successfully!":"Barber created successfully!"),n&&n(),setTimeout(()=>{m({username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",avatar:"",avatarStorageId:void 0,schedule:{monday:{available:!0,start:"09:00",end:"17:00"},tuesday:{available:!0,start:"09:00",end:"17:00"},wednesday:{available:!0,start:"09:00",end:"17:00"},thursday:{available:!0,start:"09:00",end:"17:00"},friday:{available:!0,start:"09:00",end:"17:00"},saturday:{available:!0,start:"09:00",end:"17:00"},sunday:{available:!1,start:"09:00",end:"17:00"}}}),j(""),s()},1500)}catch(q){const J=sb(q);y(J)}finally{f(!1)}},le=()=>{m({username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",avatar:"",avatarStorageId:void 0,schedule:{monday:{available:!0,start:"09:00",end:"17:00"},tuesday:{available:!0,start:"09:00",end:"17:00"},wednesday:{available:!0,start:"09:00",end:"17:00"},thursday:{available:!0,start:"09:00",end:"17:00"},friday:{available:!0,start:"09:00",end:"17:00"},saturday:{available:!0,start:"09:00",end:"17:00"},sunday:{available:!1,start:"09:00",end:"17:00"}}}),y(""),S(null),s()};return t?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-2 sm:p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:le}),e.jsxs("div",{className:"relative w-full max-w-5xl max-h-[95vh] transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000] my-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:i?"Edit Barber":"Create New Barber"}),e.jsx("button",{onClick:le,className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"max-h-[calc(95vh-120px)] overflow-y-auto",children:e.jsxs("form",{onSubmit:ee,className:"p-4 sm:p-6 lg:p-8 space-y-4 sm:space-y-6",children:[b&&e.jsx("div",{className:"bg-green-500/10 border-l-4 border-green-500 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-400 font-medium",children:b})})]})}),g&&e.jsx("div",{className:"mb-4",children:e.jsx(x0,{error:g,onClose:()=>y("")})}),!o&&e.jsx(Fo,{size:"sm",message:"Loading services...",className:"py-3"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 uppercase tracking-wide flex items-center",children:[e.jsx(tt,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),i?"Personal Info":"Account & Personal Info"]}),!i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.username,onChange:R=>M("username",R.target.value),placeholder:"Enter username for login",required:!0,className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:d.password,onChange:R=>M("password",R.target.value),placeholder:"Enter password for login",required:!0,className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:d.mobile_number,onChange:R=>M("mobile_number",R.target.value),placeholder:"+63 XXX XXX XXXX",required:!0,className:"w-full h-9 pl-9 pr-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.full_name,onChange:R=>M("full_name",R.target.value),placeholder:"Enter barber's full name",required:!0,className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:d.email,onChange:R=>M("email",R.target.value),placeholder:"barber@example.com",required:!0,className:"w-full h-9 pl-9 pr-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:d.phone,onChange:R=>M("phone",R.target.value),placeholder:"+63 XXX XXX XXXX",className:"w-full h-9 pl-9 pr-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Update Password (Optional)"}),e.jsx("input",{type:"password",value:d.newPassword,onChange:R=>M("newPassword",R.target.value),placeholder:"Enter new password (leave empty to keep current)",className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Leave empty to keep the current password unchanged"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Experience"}),e.jsx("input",{type:"text",value:d.experience,onChange:R=>M("experience",R.target.value),placeholder:"e.g., 5 years",className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-[#444444] overflow-hidden bg-[#1A1A1A]",children:F?e.jsx("img",{src:F,alt:"Barber avatar",className:"w-full h-full object-cover"}):d.avatar?e.jsx("img",{src:d.avatar,alt:"Barber avatar",className:"w-full h-full object-cover"}):e.jsx("img",{src:"/img/avatar_default.jpg",alt:"Default avatar",className:"w-full h-full object-cover"})}),N&&e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-full flex items-center justify-center",children:e.jsx(Fo,{size:"xs",variant:"white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"flex items-center justify-center px-3 py-2 border border-[var(--color-primary)] text-[var(--color-primary)] rounded-lg hover:bg-[var(--color-primary)] hover:text-white transition-colors cursor-pointer",children:[e.jsx(da,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-xs font-medium",children:d.avatarStorageId||d.avatar?"Change Photo":"Upload Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"hidden",disabled:N})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Max 5MB. JPG, PNG, or GIF files only."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"is_active",checked:d.is_active===!0,onChange:()=>M("is_active",!0),className:"h-4 w-4 text-[var(--color-primary)] focus:ring-[var(--color-primary)] border-gray-300"}),e.jsx("span",{className:"ml-2 text-gray-300 font-medium",children:"Active"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"is_active",checked:d.is_active===!1,onChange:()=>M("is_active",!1),className:"h-4 w-4 text-[var(--color-primary)] focus:ring-[var(--color-primary)] border-gray-300"}),e.jsx("span",{className:"ml-2 text-gray-300 font-medium",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 uppercase tracking-wide flex items-center",children:[e.jsx(ys,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Services & Skills"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Services Offered"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-[#444444] rounded-lg p-3 bg-[#1A1A1A]",children:o?o&&o.length>0?o.map(R=>e.jsxs("label",{className:"flex items-center py-1 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.services?.includes(R._id)||!1,onChange:q=>{const J=R._id;m($=>({...$,services:q.target.checked?[...$.services||[],J]:($.services||[]).filter(Y=>Y!==J)}))},className:"h-4 w-4 text-[var(--color-primary)] focus:ring-[var(--color-primary)] rounded border-gray-300"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-300",children:[R.name," - ",parseFloat(R.price).toFixed(2)]})]},R._id)):e.jsx("p",{className:"text-sm text-gray-400 p-2",children:"No services available"}):e.jsx("p",{className:"text-sm text-gray-400 p-2",children:"Loading services..."})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm flex items-center",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Work Schedule"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex bg-[#1A1A1A] rounded-lg p-1 border border-[#444444] mr-2",children:[e.jsx("button",{type:"button",onClick:()=>L("weekly"),className:`px-3 py-1 text-xs font-medium rounded-md transition-all ${d.schedule_type==="weekly"?"bg-[var(--color-primary)] text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:"Weekly"}),e.jsx("button",{type:"button",onClick:()=>L("specific_dates"),className:`px-3 py-1 text-xs font-medium rounded-md transition-all ${d.schedule_type==="specific_dates"?"bg-[var(--color-primary)] text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:"Specific Dates"})]}),d.schedule_type==="weekly"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>T(!0,"09:00","22:00"),className:"px-2 py-1 text-xs bg-green-500/20 text-green-400 border border-green-500/30 rounded hover:bg-green-500/30 transition-colors",children:"All On"}),e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-2 py-1 text-xs bg-red-500/20 text-red-400 border border-red-500/30 rounded hover:bg-red-500/30 transition-colors",children:"All Off"})]})]})]}),d.schedule_type==="weekly"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"max-h-64 overflow-y-auto border border-[#444444] rounded-lg p-2 bg-[#1A1A1A] space-y-2",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(R=>{const q=d.schedule[R],J=B===R,$=O();return e.jsx("div",{className:`bg-[#2A2A2A] border rounded-lg overflow-hidden transition-all ${q.available?"border-green-500/30":"border-[#444444]"}`,children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("input",{type:"checkbox",checked:q.available,onChange:Y=>P(R,"available",Y.target.checked),className:"h-4 w-4 text-[var(--color-primary)] focus:ring-[var(--color-primary)] rounded"}),e.jsx("span",{className:"text-sm capitalize font-medium text-white",children:R}),!J&&q.available&&e.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:[G(q.start),"  ",G(q.end)]})]}),q.available&&e.jsx("button",{type:"button",onClick:()=>S(J?null:R),className:"p-1 hover:bg-[#333333] rounded transition-colors",children:J?e.jsx(Zg,{className:"h-4 w-4 text-gray-400"}):e.jsx(ea,{className:"h-4 w-4 text-gray-400"})})]}),J&&q.available&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 pt-2 border-t border-[#444444]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Start"}),e.jsx("select",{value:q.start,onChange:Y=>P(R,"start",Y.target.value),className:"w-full px-2 py-1 bg-[#1A1A1A] border border-[#444444] text-white rounded text-xs focus:ring-1 focus:ring-[var(--color-primary)]",children:$.map(Y=>e.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"End"}),e.jsx("select",{value:q.end,onChange:Y=>P(R,"end",Y.target.value),className:"w-full px-2 py-1 bg-[#1A1A1A] border border-[#444444] text-white rounded text-xs focus:ring-1 focus:ring-[var(--color-primary)]",children:$.map(Y=>e.jsx("option",{value:Y.value,children:Y.label},Y.value))})]})]})]})},R)})}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Set the days and hours when this barber is available for bookings"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#444444] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:zs(h,"MMMM yyyy")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:I,className:"p-1 hover:bg-[#333333] rounded text-gray-400 hover:text-white",children:e.jsx(Xa,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:ne,className:"p-1 hover:bg-[#333333] rounded text-gray-400 hover:text-white",children:e.jsx(sr,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(R=>e.jsx("div",{className:"text-center text-xs text-gray-500 font-medium py-1",children:R},R))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const R=ib(h),q=ab(R),J=Rn(R),$=ob(q);return nb({start:J,end:$}).map(xe=>{const oe=zs(xe,"yyyy-MM-dd"),de=d.specific_dates?d.specific_dates.some(Ke=>Ke.date===oe):!1,ve=lb(xe,R),Me=Z3(xe);return e.jsx("button",{type:"button",onClick:()=>X(xe),className:`
                                      h-8 rounded-md text-xs flex items-center justify-center transition-all
                                      ${ve?"":"text-gray-700"}
                                      ${de?"bg-[var(--color-primary)] text-white font-bold shadow-sm":ve?"text-gray-300 hover:bg-[#333333]":"text-gray-600"}
                                      ${Me&&!de?"border border-[var(--color-primary)] text-[var(--color-primary)]":""}
                                    `,children:zs(xe,"d")},oe)})})()})]}),(console.log("CreateBarberModal Debug:",{formData:d,specific_dates:d.specific_dates,isArray:Array.isArray(d.specific_dates),length:d.specific_dates?.length}),d.specific_dates&&Array.isArray(d.specific_dates)&&d.specific_dates.length>0)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wide",children:"Selected Dates"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1",children:d.specific_dates?.sort((R,q)=>new Date(R.date)-new Date(q.date))?.map(R=>{const q=O();return e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#444444] rounded-lg p-3 flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[e.jsx("div",{className:"text-xs text-red-400 font-bold uppercase",children:zs(new Date(R.date),"MMM")}),e.jsx("div",{className:"text-lg text-white font-bold",children:zs(new Date(R.date),"d")})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] text-gray-500 mb-0.5",children:"Start"}),e.jsx("select",{value:R.start,onChange:J=>Z(R.date,"start",J.target.value),className:"w-full px-2 py-1 bg-[#2A2A2A] border border-[#444444] text-white rounded text-xs focus:ring-1 focus:ring-[var(--color-primary)]",children:q.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] text-gray-500 mb-0.5",children:"End"}),e.jsx("select",{value:R.end,onChange:J=>Z(R.date,"end",J.target.value),className:"w-full px-2 py-1 bg-[#2A2A2A] border border-[#444444] text-white rounded text-xs focus:ring-1 focus:ring-[var(--color-primary)]",children:q.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))})]})]}),e.jsx("button",{type:"button",onClick:()=>X(new Date(R.date)),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-[#2A2A2A] rounded transition-colors",children:e.jsx(js,{className:"h-4 w-4"})})]},R.date)})})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 pt-6 mt-6 border-t border-[#444444]/50",children:[e.jsx("button",{type:"button",onClick:le,className:"flex-1 px-4 py-2.5 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg text-sm font-medium hover:bg-[#555555]/70 transition-all duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||!o,className:"flex-1 px-4 py-2.5 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium hover:bg-[var(--color-primary)]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Saving...":i?"Update Barber":"Create Barber"})]})]})})]})]})}),document.body):null},e9=({isOpen:t,onClose:s,type:n="info",title:i,message:o,onConfirm:c,confirmText:d="Confirm",cancelText:m="Cancel",showCancel:h=!0,accent:p="auto",icon:u})=>{if(!t)return null;const g=(()=>{if(p&&p!=="auto")return p;switch(n){case"success":return"green";case"error":return"red";case"warning":return"yellow";case"confirm":return"brand";default:return"blue"}})(),y=g==="brand"?"text-[var(--color-primary)]":`text-${g}-400`,b=g==="brand"?"border-[var(--color-primary)]/50":`border-${g}-500/50`,j=g==="brand"?"bg-[var(--color-primary)]/20 hover:bg-[var(--color-primary)]/30":`bg-${g}-500/20 hover:bg-${g}-500/30`,N=()=>{if(u)return u;switch(n){case"success":return e.jsx(Je,{className:`w-12 h-12 ${y}`});case"error":return e.jsx(Xe,{className:`w-12 h-12 ${y}`});case"warning":return e.jsx(Xe,{className:`w-12 h-12 ${y}`});case"confirm":return e.jsx($S,{className:`w-12 h-12 ${y}`});default:return e.jsx(Ir,{className:`w-12 h-12 ${y}`})}},w=()=>`${j} ${y} ${b}`,B=n==="confirm"||c;return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-2",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),e.jsxs("div",{className:"bg-gradient-to-br from-[#1E1E1E] to-[#2A2A2A] border border-[#333333]/60 relative w-full max-w-sm transform rounded-3xl shadow-2xl transition-all z-[10000] p-6 sm:p-8",children:[e.jsx("button",{onClick:s,className:"absolute top-4 right-4 sm:top-6 sm:right-6 w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-[#2A2A2A] hover:bg-[var(--color-primary)]/10 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-300 hover:text-[var(--color-primary)]"})}),e.jsx("div",{className:"flex justify-center mb-4",children:N()}),i&&e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white text-center mb-2",children:i}),o&&e.jsx("p",{className:"text-sm sm:text-base text-gray-300 text-center mb-6",children:o}),e.jsxs("div",{className:"flex gap-3",children:[h&&e.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 sm:py-3 rounded-lg bg-[#2A2A2A] hover:bg-[#3A3A3A] text-gray-300 hover:text-white font-semibold transition-all duration-200 text-sm sm:text-base",children:m}),B&&c&&e.jsx("button",{onClick:()=>{c(),s()},className:`flex-1 px-4 py-2 sm:py-3 rounded-lg border font-semibold transition-all duration-200 text-sm sm:text-base ${w()}`,children:d}),!B&&e.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 sm:py-3 rounded-lg bg-[var(--color-primary)]/20 hover:bg-[var(--color-primary)]/30 text-[var(--color-primary)] border border-[var(--color-primary)]/50 font-semibold transition-all duration-200 text-sm sm:text-base",children:"OK"})]})]})]})}),document.body)},lT=({barber:t})=>{const[s,n]=C.useState(!1),[i,o]=C.useState({date:new Date().toISOString().split("T")[0],isWholeDay:!0,startTime:"09:00",endTime:"17:00",reason:""}),[c,d]=C.useState(!1),[m,h]=C.useState({isOpen:!1,type:"info",title:"",message:""}),p=De(H.services.barbers.updateBarber),u=async()=>{if(t?._id){d(!0);try{const b={date:i.date,reason:i.reason,start_time:i.isWholeDay?void 0:i.startTime,end_time:i.isWholeDay?void 0:i.endTime},j=t.blocked_periods||[];await p({id:t._id,blocked_periods:[...j,b]}),n(!1),o({date:new Date().toISOString().split("T")[0],isWholeDay:!0,startTime:"09:00",endTime:"17:00",reason:""}),h({isOpen:!0,type:"success",title:"Time Off Added",message:"Your unavailability has been scheduled."})}catch(b){console.error("Failed to add time off:",b),h({isOpen:!0,type:"error",title:"Error",message:"Failed to add time off. Please try again."})}finally{d(!1)}}},f=async b=>{if(t?._id&&window.confirm("Are you sure you want to remove this time off?")){d(!0);try{const j=[...t.blocked_periods||[]];j.splice(b,1),await p({id:t._id,blocked_periods:j})}catch(j){console.error("Failed to remove time off:",j),h({isOpen:!0,type:"error",title:"Error",message:"Failed to remove time off. Please try again."})}finally{d(!1)}}},y=[...t?.blocked_periods||[]].sort((b,j)=>new Date(b.date)-new Date(j.date)).filter(b=>new Date(b.date)>=new Date(new Date().setHours(0,0,0,0)));return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl border border-[#333333] p-4 mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"Time Off & Unavailability"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Manage your days off and unavailable hours"})]}),!s&&e.jsxs("button",{onClick:()=>n(!0),className:"flex items-center space-x-1 px-3 py-1.5 bg-[#2A2A2A] hover:bg-[#333333] text-[var(--color-primary)] rounded-lg text-xs font-medium transition-colors border border-[#333333]",children:[e.jsx(cs,{className:"w-3 h-3"}),e.jsx("span",{children:"Add Time Off"})]})]}),s&&e.jsxs("div",{className:"bg-[#222222] rounded-lg p-4 mb-4 border border-[#333333]",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:i.date,min:new Date().toISOString().split("T")[0],onChange:b=>o({...i,date:b.target.value}),className:"w-full bg-[#1A1A1A] border border-[#333333] rounded-lg px-3 py-2 text-white text-sm focus:border-[var(--color-primary)] outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Type"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:i.isWholeDay,onChange:()=>o({...i,isWholeDay:!0}),className:"text-[var(--color-primary)] focus:ring-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm text-white",children:"Whole Day"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",checked:!i.isWholeDay,onChange:()=>o({...i,isWholeDay:!1}),className:"text-[var(--color-primary)] focus:ring-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm text-white",children:"Specific Hours"})]})]})]})]}),!i.isWholeDay&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:i.startTime,onChange:b=>o({...i,startTime:b.target.value}),className:"w-full bg-[#1A1A1A] border border-[#333333] rounded-lg px-3 py-2 text-white text-sm focus:border-[var(--color-primary)] outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:i.endTime,onChange:b=>o({...i,endTime:b.target.value}),className:"w-full bg-[#1A1A1A] border border-[#333333] rounded-lg px-3 py-2 text-white text-sm focus:border-[var(--color-primary)] outline-none"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:i.reason,onChange:b=>o({...i,reason:b.target.value}),placeholder:"e.g., Doctor appointment, Personal leave",className:"w-full bg-[#1A1A1A] border border-[#333333] rounded-lg px-3 py-2 text-white text-sm focus:border-[var(--color-primary)] outline-none"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>n(!1),className:"px-3 py-2 text-gray-400 hover:text-white text-xs font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:c,className:"px-4 py-2 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white rounded-lg text-xs font-bold transition-colors disabled:opacity-50",children:c?"Saving...":"Save Time Off"})]})]}),y.length===0?e.jsxs("div",{className:"text-center py-6 bg-[#1A1A1A] rounded-lg border border-[#333333] border-dashed",children:[e.jsx(rt,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"No upcoming time off scheduled"})]}):e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar",children:y.map((b,j)=>{const N=b.start_time?`${zs(new Date(`2000-01-01T${b.start_time}`),"h:mm a")} - ${zs(new Date(`2000-01-01T${b.end_time}`),"h:mm a")}`:"Whole Day";return zs(new Date(b.date),"MMM d, yyyy (EEE)"),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#222222] rounded-lg border border-[#333333] group",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-lg bg-[#333333] flex flex-col items-center justify-center border border-[#444444]",children:[e.jsx("span",{className:"text-[10px] text-gray-400 uppercase",children:zs(new Date(b.date),"MMM")}),e.jsx("span",{className:"text-sm font-bold text-white",children:zs(new Date(b.date),"d")})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:b.reason||"Unavailability"}),!b.start_time&&e.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500/20 text-blue-400 text-[10px] rounded border border-blue-500/30",children:"All Day"})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-400 mt-0.5",children:[e.jsx(Nt,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:N})]})]})]}),e.jsx("button",{onClick:()=>f(j),disabled:c,className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-all opacity-0 group-hover:opacity-100 focus:opacity-100",title:"Remove",children:e.jsx(js,{className:"w-4 h-4"})})]},j)})}),e.jsx(e9,{isOpen:m.isOpen,type:m.type,title:m.title,message:m.message,onClose:()=>h({...m,isOpen:!1})})]})},cT=({isOpen:t,onClose:s,barber:n,services:i=[],onRefresh:o,initialView:c="details"})=>{const[d,m]=C.useState(c),[h,p]=C.useState(!1),[u,f]=C.useState(!1),[g,y]=C.useState(""),[b,j]=C.useState(!0),[N,w]=C.useState({full_name:"",is_active:!0,services:[],schedule_type:"weekly",specific_dates:[],schedule:{monday:{available:!1,start:"09:00",end:"17:00"},tuesday:{available:!1,start:"09:00",end:"17:00"},wednesday:{available:!1,start:"09:00",end:"17:00"},thursday:{available:!1,start:"09:00",end:"17:00"},friday:{available:!1,start:"09:00",end:"17:00"},saturday:{available:!1,start:"09:00",end:"17:00"},sunday:{available:!1,start:"09:00",end:"17:00"}}}),[B,S]=C.useState({isOpen:!1,type:"info",title:"",message:""}),_=De(H.services.barbers.updateBarber),k=async pe=>{if(n?._id){j(pe);try{await _({id:n._id,is_accepting_bookings:pe})}catch(be){console.error("Failed to update availability:",be),j(!pe),S({isOpen:!0,type:"error",title:"Update Failed",message:"Failed to update availability status. Please try again."})}}},[E,D]=C.useState(null),[F,M]=C.useState(new Date),P=De(H.services.barbers.updateBarber),T=me(H.services.bookings.getBookingsByBarber,n?._id?{barberId:n._id}:"skip"),L=C.useCallback(()=>{if(n&&n._id){const pe=i?.map(Be=>Be._id)||[],be=(n.services||[]).filter(Be=>pe.includes(Be));w({full_name:n.full_name||"",is_active:n.is_active!==void 0?n.is_active:!0,services:be||[],schedule_type:n.schedule_type||"weekly",specific_dates:n.specific_dates||[],schedule:n.schedule||{monday:{available:!1,start:"09:00",end:"17:00"},tuesday:{available:!1,start:"09:00",end:"17:00"},wednesday:{available:!1,start:"09:00",end:"17:00"},thursday:{available:!1,start:"09:00",end:"17:00"},friday:{available:!1,start:"09:00",end:"17:00"},saturday:{available:!1,start:"09:00",end:"17:00"},sunday:{available:!1,start:"09:00",end:"17:00"}}})}},[n,i]);C.useEffect(()=>{t&&n&&(m(c),p(!1),y(""),D(null),L())},[t,n,c,L]);const X=C.useCallback(()=>{p(!1),y(""),m("details"),D(null),s()},[s]),Z=C.useCallback(()=>{p(!0),L()},[L]),ne=C.useCallback(()=>{p(!1),y(""),D(null),L()},[L]),I=C.useCallback(async()=>{if(!N.full_name.trim()){y("Full name is required");return}if(!Object.values(N.schedule).some(be=>be.available)){y("At least one working day must be selected");return}for(const[be,Be]of Object.entries(N.schedule))if(Be.available&&Be.start>=Be.end){y(`Invalid time range for ${be}: Start time must be before end time`);return}f(!0),y("");try{const be={full_name:N.full_name.trim(),is_active:N.is_active,services:N.services,schedule:N.schedule,schedule_type:N.schedule_type,specific_dates:N.specific_dates};await P({id:n._id,...be}),p(!1),D(null),o&&o()}catch(be){const Be=sb(be);y(Be)}finally{f(!1)}},[N,n?._id,P,o]),O=C.useCallback((pe,be)=>{w(Be=>({...Be,[pe]:be}))},[]),G=C.useCallback((pe,be,Be)=>{w(Ue=>({...Ue,schedule:{...Ue.schedule,[pe]:{...Ue.schedule[pe],[be]:Be}}}))},[]),te=C.useCallback((pe,be)=>{w(Be=>({...Be,schedule:{...Be.schedule,[be]:{...Be.schedule[pe]}}}))},[]),Q=C.useCallback((pe,be="09:00",Be="22:00")=>{const Ue={};Object.keys(N.schedule).forEach(ue=>{Ue[ue]={available:pe,start:be,end:Be}}),w(ue=>({...ue,schedule:Ue}))},[N.schedule]),ee=C.useCallback(pe=>{w(be=>({...be,schedule_type:pe}))},[]),le=C.useCallback(pe=>{const be=zs(pe,"yyyy-MM-dd");w(Be=>Be.specific_dates.findIndex(ue=>ue.date===be)>=0?{...Be,specific_dates:Be.specific_dates.filter(ue=>ue.date!==be)}:{...Be,specific_dates:[...Be.specific_dates,{date:be,available:!0,start:"09:00",end:"22:00"}]})},[]),R=C.useCallback((pe,be,Be)=>{w(Ue=>({...Ue,specific_dates:Ue.specific_dates.map(ue=>ue.date===pe?{...ue,[be]:Be}:ue)}))},[]),q=C.useCallback(()=>M(pe=>Nm(pe,1)),[]),J=C.useCallback(()=>M(pe=>cb(pe)),[]),$=C.useCallback(pe=>Object.values(pe||{}).filter(be=>be?.available).length,[]),Y=C.useCallback(pe=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(pe||0),[]),xe=C.useCallback(pe=>{const be={pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",booked:"bg-blue-500/20 text-blue-400 border-blue-500/30",confirmed:"bg-green-500/20 text-green-400 border-green-500/30",completed:"bg-purple-500/20 text-purple-400 border-purple-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"};return be[pe]||be.pending},[]),oe=()=>{const pe=[];for(let be=6;be<=22;be++)for(let Be=0;Be<60;Be+=30){const Ue=`${be.toString().padStart(2,"0")}:${Be.toString().padStart(2,"0")}`,ue=be>=12?"PM":"AM",st=`${be===0?12:be>12?be-12:be}:${Be.toString().padStart(2,"0")} ${ue}`;pe.push({value:Ue,label:st})}return pe},de=pe=>{const[be,Be]=pe.split(":").map(Number),Ue=be>=12?"PM":"AM";return`${be===0?12:be>12?be-12:be}:${Be.toString().padStart(2,"0")} ${Ue}`};if(!t||!n)return null;const ve=$(n.schedule),Me=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Ke=oe();return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-2 sm:p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:X}),e.jsxs("div",{className:"relative w-full max-w-6xl max-h-[95vh] overflow-hidden transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000] my-4",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-[#242424] to-[#2F2F2F] border-b border-[#3A3A3A] p-4 sm:p-5 lg:p-6 z-10",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#2A2A2A] border border-[#3A3A3A] flex items-center justify-center",children:e.jsx(tt,{className:"h-6 w-6 text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:n.full_name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[n.experience||"0 years"," Experience"]}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(Vt,{className:"h-3.5 w-3.5 text-[var(--color-primary)] fill-current"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:n.rating||0}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",n.totalBookings||0," bookings)"]})]})]})]}),e.jsx("button",{onClick:X,className:"w-8 h-8 rounded-lg bg-[#2A2A2A] border border-[#3A3A3A] hover:border-[var(--color-primary)]/50 hover:bg-[var(--color-primary)]/10 flex items-center justify-center transition-colors duration-200",title:"Close",children:e.jsx(Ze,{className:"h-4 w-4 text-gray-300 hover:text-[var(--color-primary)]"})})]})}),e.jsx("div",{className:"border-b border-[#3A3A3A] px-4",children:e.jsxs("nav",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>m("details"),className:`py-2 px-2 border-b-2 font-medium text-sm cursor-pointer select-none ${d==="details"?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-500"} transition-colors`,children:"Details"}),e.jsx("button",{type:"button",onClick:()=>m("schedule"),className:`py-2 px-2 border-b-2 font-medium text-sm cursor-pointer select-none ${d==="schedule"?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-500"} transition-colors`,children:"Schedule"}),e.jsx("button",{type:"button",onClick:()=>m("bookings"),className:`py-2 px-2 border-b-2 font-medium text-sm cursor-pointer select-none ${d==="bookings"?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-500"} transition-colors`,children:"Bookings"}),e.jsx("button",{className:`px-4 py-2 rounded-md transition text-sm ${d==="dayoff"?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-500"}`,onClick:()=>m("dayoff"),children:"Day Off"})]})}),e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 max-h-[calc(95vh-180px)] overflow-y-auto",children:[g&&e.jsx("div",{className:"mb-4",children:e.jsx(x0,{error:g,onClose:()=>y("")})}),d==="details"?e.jsx("div",{children:h?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:N.full_name,onChange:pe=>O("full_name",pe.target.value),placeholder:"Enter barber's full name",className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent placeholder:text-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Services"}),e.jsx("div",{className:"max-h-40 overflow-y-auto bg-[#1A1A1A] border border-[#444444] rounded-lg p-2",children:i&&i.length>0?i.map(pe=>e.jsxs("label",{className:"flex items-center py-1",children:[e.jsx("input",{type:"checkbox",checked:N.services.includes(pe._id),onChange:be=>{const Be=pe._id;O("services",be.target.checked?[...N.services,Be]:N.services.filter(Ue=>Ue!==Be))},className:"h-4 w-4 text-[var(--color-primary)] focus:ring-[var(--color-primary)] rounded"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-300",children:[pe.name," - ",parseFloat(pe.price).toFixed(2)]})]},pe._id)):e.jsx("p",{className:"text-sm text-gray-500 p-2",children:"No services available"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"is_active",checked:N.is_active===!0,onChange:()=>O("is_active",!0),className:"h-4 w-4 text-[var(--color-primary)] focus:ring-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-300",children:"Active"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"is_active",checked:N.is_active===!1,onChange:()=>O("is_active",!1),className:"h-4 w-4 text-[var(--color-primary)] focus:ring-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-300",children:"Inactive"})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:n.email||"N/A"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Er,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:n.phone||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Specialties"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.specialties?.map((pe,be)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-[var(--color-primary)]/10 text-[var(--color-primary)] border border-[var(--color-primary)]/30",children:pe},be))||e.jsx("span",{className:"text-sm text-gray-500",children:"No specialties listed"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Performance"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-xl p-4 bg-gradient-to-br from-[#1E1E1E] to-[#141414] border border-[#2F2F2F]",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Monthly Revenue"}),e.jsx("p",{className:"text-xl font-extrabold text-[var(--color-primary)] mt-1",children:Y(n.monthlyRevenue)})]}),e.jsxs("div",{className:"rounded-xl p-4 bg-gradient-to-br from-[#1E1E1E] to-[#141414] border border-[#2F2F2F]",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Total Bookings"}),e.jsx("p",{className:"text-xl font-extrabold text-green-400 mt-1",children:n.totalBookings||0})]}),e.jsxs("div",{className:"rounded-xl p-4 bg-gradient-to-br from-[#1E1E1E] to-[#141414] border border-[#2F2F2F]",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Working Days"}),e.jsxs("p",{className:"text-xl font-extrabold text-purple-400 mt-1",children:[ve,"/week"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Quick Schedule View"}),e.jsx("div",{className:"space-y-2",children:N.schedule_type==="specific_dates"?e.jsxs("div",{className:"p-3 bg-[#1E1E1E] border border-[#2F2F2F] rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"This barber works on specific dates."}),e.jsxs("p",{className:"text-xs text-[var(--color-primary)]",children:[N.specific_dates?.length||0," dates scheduled"]})]}):Me.slice(0,7).map(pe=>{const be=n.schedule?.[pe]||{available:!1};return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize font-medium text-gray-300",children:pe}),be.available?e.jsxs("span",{className:"inline-flex items-center text-sm font-medium text-green-400 bg-green-500/10 border border-green-500/20 px-2 py-0.5 rounded-md",children:[de(be.start)," "," ",de(be.end)]}):e.jsx("span",{className:"inline-flex items-center text-sm font-medium text-red-400 bg-red-500/10 border border-red-500/20 px-2 py-0.5 rounded-md",children:"Off"})]},pe)})})]})]})]})}):d==="schedule"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-5 w-5 text-[var(--color-primary)]"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Work Schedule Management"})]}),h&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex bg-[#1A1A1A] rounded-lg p-1 border border-[#444444] mr-4",children:[e.jsx("button",{type:"button",onClick:()=>ee("weekly"),className:`px-3 py-1 text-xs font-medium rounded-md transition-all ${N.schedule_type==="weekly"?"bg-[var(--color-primary)] text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:"Weekly"}),e.jsx("button",{type:"button",onClick:()=>ee("specific_dates"),className:`px-3 py-1 text-xs font-medium rounded-md transition-all ${N.schedule_type==="specific_dates"?"bg-[var(--color-primary)] text-white shadow-sm":"text-gray-400 hover:text-white"}`,children:"Specific Dates"})]}),N.schedule_type==="weekly"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:()=>Q(!0,"09:00","22:00"),className:"px-3 py-1.5 text-xs bg-green-500/20 text-green-400 border border-green-500/30 rounded-lg hover:bg-green-500/30 transition-colors",children:"Set All Available"}),e.jsx("button",{type:"button",onClick:()=>Q(!1),className:"px-3 py-1.5 text-xs bg-red-500/20 text-red-400 border border-red-500/30 rounded-lg hover:bg-red-500/30 transition-colors",children:"Set All Off"})]})]})]}),e.jsx("div",{className:"space-y-3",children:N.schedule_type==="specific_dates"?h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#444444] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:zs(F,"MMMM yyyy")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:J,className:"p-1 hover:bg-[#333333] rounded text-gray-400 hover:text-white",children:e.jsx(Xa,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:q,className:"p-1 hover:bg-[#333333] rounded text-gray-400 hover:text-white",children:e.jsx(sr,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(pe=>e.jsx("div",{className:"text-center text-xs text-gray-500 font-medium py-1",children:pe},pe))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const pe=ib(F),be=ab(pe),Be=Rn(pe),Ue=ob(be);return nb({start:Be,end:Ue}).map(Ie=>{const st=zs(Ie,"yyyy-MM-dd"),Le=N.specific_dates.some(St=>St.date===st),kt=lb(Ie,pe),Pt=Z3(Ie);return e.jsx("button",{type:"button",onClick:()=>le(Ie),className:`
                                      h-8 rounded-md text-xs flex items-center justify-center transition-all
                                      ${kt?"":"text-gray-700"}
                                      ${Le?"bg-[var(--color-primary)] text-white font-bold shadow-sm":kt?"text-gray-300 hover:bg-[#333333]":"text-gray-600"}
                                      ${Pt&&!Le?"border border-[var(--color-primary)] text-[var(--color-primary)]":""}
                                    `,children:zs(Ie,"d")},st)})})()})]}),N.specific_dates?.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 uppercase tracking-wide",children:"Selected Dates"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 pr-1",children:N.specific_dates.sort((pe,be)=>new Date(pe.date)-new Date(be.date)).map(pe=>{const be=oe();return e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#444444] rounded-lg p-3 flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[e.jsx("div",{className:"text-xs text-red-400 font-bold uppercase",children:zs(new Date(pe.date),"MMM")}),e.jsx("div",{className:"text-lg text-white font-bold",children:zs(new Date(pe.date),"d")})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] text-gray-500 mb-0.5",children:"Start"}),e.jsx("select",{value:pe.start,onChange:Be=>R(pe.date,"start",Be.target.value),className:"w-full px-2 py-1 bg-[#2A2A2A] border border-[#444444] text-white rounded text-xs focus:ring-1 focus:ring-[var(--color-primary)]",children:be.map(Be=>e.jsx("option",{value:Be.value,children:Be.label},Be.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] text-gray-500 mb-0.5",children:"End"}),e.jsx("select",{value:pe.end,onChange:Be=>R(pe.date,"end",Be.target.value),className:"w-full px-2 py-1 bg-[#2A2A2A] border border-[#444444] text-white rounded text-xs focus:ring-1 focus:ring-[var(--color-primary)]",children:be.map(Be=>e.jsx("option",{value:Be.value,children:Be.label},Be.value))})]})]}),e.jsx("button",{type:"button",onClick:()=>le(new Date(pe.date)),className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-[#2A2A2A] rounded transition-colors",children:e.jsx(js,{className:"h-4 w-4"})})]},pe.date)})})]})]}):e.jsxs("div",{className:"bg-[#1E1E1E] border border-[#2F2F2F] rounded-xl p-6 text-center",children:[e.jsx(rt,{className:"h-12 w-12 text-[var(--color-primary)] mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Specific Dates Schedule"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"This barber has a specific date schedule managed via the calendar view."}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[N.specific_dates?.slice(0,5).map((pe,be)=>e.jsx("span",{className:"px-3 py-1 bg-[#2A2A2A] border border-[#3A3A3A] rounded-full text-xs text-gray-300",children:pe.date},be)),(N.specific_dates?.length||0)>5&&e.jsxs("span",{className:"px-3 py-1 bg-[#2A2A2A] border border-[#3A3A3A] rounded-full text-xs text-gray-300",children:["+",(N.specific_dates?.length||0)-5," more"]})]})]}):Me.map(pe=>{const be=h?N.schedule[pe]:n.schedule?.[pe]||{available:!1,start:"09:00",end:"17:00"},Be=E===pe;return e.jsx("div",{className:`bg-[#1E1E1E] border rounded-xl overflow-hidden transition-all ${be.available?"border-green-500/30":"border-[#2F2F2F]"}`,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[h&&e.jsx("input",{type:"checkbox",checked:be.available,onChange:Ue=>G(pe,"available",Ue.target.checked),className:"h-5 w-5 text-[var(--color-primary)] focus:ring-[var(--color-primary)] rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-base capitalize font-semibold text-white",children:pe}),!Be&&be.available&&e.jsxs("span",{className:"ml-3 text-sm text-gray-400",children:[de(be.start)," "," ",de(be.end)]})]})]}),be.available?h?e.jsx("button",{onClick:()=>D(Be?null:pe),className:"p-2 hover:bg-[#2A2A2A] rounded-lg transition-colors",children:Be?e.jsx(Zg,{className:"h-5 w-5 text-gray-400"}):e.jsx(ea,{className:"h-5 w-5 text-gray-400"})}):e.jsx("span",{className:"px-3 py-1 text-sm font-medium text-green-400 bg-green-500/10 border border-green-500/20 rounded-md",children:"Available"}):e.jsx("span",{className:"px-3 py-1 text-sm font-medium text-red-400 bg-red-500/10 border border-red-500/20 rounded-md",children:"Off Day"})]}),Be&&h&&be.available&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 pt-4 border-t border-[#2F2F2F]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time"}),e.jsx("select",{value:be.start,onChange:Ue=>G(pe,"start",Ue.target.value),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:Ke.map(Ue=>e.jsx("option",{value:Ue.value,children:Ue.label},Ue.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Time"}),e.jsx("select",{value:be.end,onChange:Ue=>G(pe,"end",Ue.target.value),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:Ke.map(Ue=>e.jsx("option",{value:Ue.value,children:Ue.label},Ue.value))})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Copy this schedule to:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Me.filter(Ue=>Ue!==pe).map(Ue=>e.jsx("button",{onClick:()=>te(pe,Ue),className:"px-2 py-1 text-xs bg-[#2A2A2A] text-gray-300 border border-[#444444] rounded hover:bg-[#333333] hover:border-[var(--color-primary)]/50 transition-colors capitalize",children:Ue},Ue))})]})]})]})},pe)})}),!h&&e.jsx("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl",children:e.jsxs("p",{className:"text-sm text-blue-300",children:[" ",e.jsx("strong",{children:"Tip:"}),' This schedule determines when customers can book appointments with this barber. Click "Edit" to modify working days and hours.']})})]}):d==="dayoff"?e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Barber Day Off"}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 border border-[#2A2A2A] flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white",children:"Booking Status"}),e.jsx("p",{className:`text-xs ${b?"text-green-400":"text-gray-400"}`,children:b?"You are visible to clients":"You appear as busy"})]}),e.jsx("label",{className:"flex items-center cursor-pointer",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:b,onChange:pe=>k(pe.target.checked)}),e.jsx("div",{className:`block w-12 h-7 rounded-full transition-colors ${b?"bg-green-500":"bg-gray-600"}`}),e.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-5 h-5 rounded-full transition-transform shadow-sm ${b?"transform translate-x-5":""}`})]})})]})}),e.jsx(lT,{barber:n})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"h-5 w-5 text-[var(--color-primary)]"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Booking History"})]}),T&&T.length>0&&e.jsxs("span",{className:"text-sm text-gray-300",children:[T.length," total bookings"]})]}),T===void 0?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Fo,{size:"md",message:"Loading bookings..."})}):T&&T.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:T.map(pe=>e.jsxs("div",{className:"bg-[#171717] border border-[#2C2C2C] rounded-xl p-4 hover:border-[var(--color-primary)]/40 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-white",children:pe.customer_name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${xe(pe.status)}`,children:pe.status.charAt(0).toUpperCase()+pe.status.slice(1)})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:pe.service_name}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(rt,{className:"h-3 w-3"}),e.jsx("span",{children:pe.formattedDate})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Nt,{className:"h-3 w-3"}),e.jsx("span",{children:pe.formattedTime})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-[var(--color-primary)]",children:["",pe.service_price]}),e.jsx("p",{className:"text-xs text-gray-400",children:pe.booking_code})]})]}),pe.customer_phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 mt-2",children:[e.jsx(Er,{className:"h-3 w-3"}),e.jsx("span",{children:pe.customer_phone})]}),pe.notes&&e.jsxs("div",{className:"mt-2 p-2 bg-[#222222] border border-[#333333] rounded-lg text-xs text-gray-400",children:[e.jsx("strong",{children:"Notes:"})," ",pe.notes]})]},pe._id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S3,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No bookings found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No bookings available for this barber yet."})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-[#3A3A3A] flex justify-between items-center bg-[#232323]",children:[e.jsx("div",{className:"flex space-x-3",children:(d==="details"||d==="schedule")&&!h&&e.jsxs("button",{onClick:Z,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[#ff7a22] transition-colors",children:[e.jsx(sa,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit"})]})}),e.jsx("div",{className:"flex space-x-3",children:h?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:ne,className:"px-4 py-2 border border-[#4A4A4A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:I,disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[#ff7a22] disabled:opacity-50 transition-colors",children:[e.jsx(qr,{className:"h-4 w-4"}),e.jsx("span",{children:u?"Saving...":"Save"})]})]}):e.jsx("button",{onClick:X,className:"px-4 py-2 border border-[#4A4A4A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-colors",children:"Close"})})]})]})]})}),document.body)},dT=({barber:t,className:s="w-12 h-12"})=>{const[n,i]=C.useState(!1),c=me(H.services.barbers.getImageUrl,{storageId:t.avatarStorageId})||t.avatarUrl||"/img/avatar_default.jpg";return n||!c?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 rounded-full ${s}`,children:e.jsx(tt,{className:"w-6 h-6 text-gray-500"})}):e.jsx("img",{src:c,alt:`${t.full_name} avatar`,className:`${s} rounded-full object-cover`,onError:()=>i(!0)})},xT=({barbers:t=[],onRefresh:s,user:n})=>{const[i,o]=C.useState(""),[c,d]=C.useState("all"),[m,h]=C.useState("name"),[p,u]=C.useState(null),[f,g]=C.useState("details"),[y,b]=C.useState(!1),[j,N]=C.useState(null),[w,B]=C.useState(null),[S,_]=C.useState(!1),[k,E]=C.useState(""),[D,F]=C.useState(!1),M=me(H.services.services.getAllServices);me(H.services.bookings.getAllBookings),De(H.services.barbers.createBarber);const P=De(H.services.barbers.updateBarber),T=De(H.services.barbers.deleteBarber),L=De(H.services.barbers.generateUploadUrl),X=async Y=>{F(!0);try{const xe=await L(),oe=await fetch(xe,{method:"POST",headers:{"Content-Type":Y.type},body:Y});if(!oe.ok)throw new Error("Failed to upload image");const{storageId:de}=await oe.json();return de}catch(xe){throw console.error("Image upload failed:",xe),xe}finally{F(!1)}},Z=async(Y,xe)=>{const oe=Y.target.files[0];if(oe){if(!oe.type.startsWith("image/")){alert("Please select an image file");return}if(oe.size>5*1024*1024){alert("File size must be less than 5MB");return}try{const de=await X(oe);await P({id:xe,avatarStorageId:de}),s()}catch{alert("Failed to upload image. Please try again.")}}},ne=Y=>Y?{label:"Active",icon:a0,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"}:{label:"Inactive",icon:cj,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"},I=t.filter(Y=>{const xe=Y.full_name?.toLowerCase().includes(i.toLowerCase())||Y.email?.toLowerCase().includes(i.toLowerCase())||Y.specialties?.some(de=>de.toLowerCase().includes(i.toLowerCase()));let oe=!0;return c==="active"?oe=Y.is_active===!0:c==="inactive"&&(oe=Y.is_active===!1),xe&&oe}).sort((Y,xe)=>m==="name"?(Y.full_name||"").localeCompare(xe.full_name||""):m==="rating"?parseFloat(xe.rating||0)-parseFloat(Y.rating||0):m==="bookings"?(xe.totalBookings||0)-(Y.totalBookings||0):(Y._id||"").localeCompare(xe._id||"")),O={total:t.length,active:t.filter(Y=>Y.is_active===!0).length,inactive:t.filter(Y=>Y.is_active===!1).length,avgRating:t.length?t.reduce((Y,xe)=>Y+(xe.rating||0),0)/t.length:0},G=Y=>Object.values(Y||{}).filter(xe=>xe.available).length,te=()=>{N(null),b(!0)},Q=Y=>{N(Y),b(!0)},ee=()=>{b(!1),N(null)},le=()=>{b(!1),N(null),s()},R=async Y=>{_(!0);try{await T({id:Y._id}),B(null),s()}catch(xe){E(xe.message||"Failed to delete barber")}finally{_(!1)}},q=Y=>{u(Y),g("details")},J=Y=>{u(Y),g("bookings")},$=({barber:Y,onClose:xe,onConfirm:oe})=>e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-[99997] p-2 sm:p-4 transition-all duration-300 ease-in-out animate-in fade-in-0",onClick:de=>de.target===de.currentTarget&&xe(),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-4 sm:p-6 shadow-2xl transform transition-all duration-300 ease-out animate-in slide-in-from-bottom-4 fade-in-0 zoom-in-95 mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(js,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Barber"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:Y.full_name}),"? This will permanently remove the barber from the system."]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-reverse space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsx("button",{onClick:xe,className:"w-full sm:w-auto px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:oe,disabled:S,className:"w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:S?"Deleting...":"Delete"})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:O.total})]}),e.jsx(tt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:O.active})]}),e.jsx(a0,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:O.inactive})]}),e.jsx(cj,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:O.avgRating.toFixed(1)})]}),e.jsx(Vt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search barbers...",value:i,onChange:Y=>o(Y.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:c,onChange:Y=>d(Y.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("select",{value:m,onChange:Y=>h(Y.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"rating",children:"Sort by Rating"}),e.jsx("option",{value:"bookings",children:"Sort by Bookings"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(Ro,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:te,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-colors text-sm",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Barber"})]})]})]})}),e.jsx(oT,{isOpen:y,onClose:ee,onSubmit:le,editingBarber:j,services:M}),e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#0A0A0A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Barber"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Schedule"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#444444]/30",children:I.map(Y=>{const xe=ne(Y.is_active),oe=xe.icon,de=Y.schedule_type||"weekly";let ve="",Me="";return de==="specific_dates"?(ve=`${Y.specific_dates?.length||0} Dates`,Me="Scheduled"):(ve=`${G(Y.schedule||{})}/week`,Me="Working days"),e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative flex-shrink-0 h-10 w-10",children:[e.jsx(dT,{barber:Y,className:"h-10 w-10 border-2 border-[var(--color-primary)]/50"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer group",children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(da,{className:"h-4 w-4 text-white"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Ke=>Z(Ke,Y._id),className:"hidden",disabled:D})]})}),D&&e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:Y.full_name}),e.jsx("div",{className:"text-sm text-gray-400",children:Y.experience}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(Vt,{className:"h-3 w-3 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-xs text-gray-400",children:Y.rating||0})]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:Y.email}),e.jsx("div",{className:"text-sm text-gray-400",children:Y.phone||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Y.specialties?.length||0," specialties"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:ve}),e.jsx("div",{className:"text-sm text-gray-400",children:Me})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${xe.bg} ${xe.text}`,children:[e.jsx(oe,{className:`h-3 w-3 mr-1 ${xe.iconColor}`}),xe.label]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>q(Y),className:"text-[var(--color-primary)] hover:text-[var(--color-accent)] p-1 rounded",title:"View Details",children:e.jsx(Dn,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>J(Y),className:"text-blue-400 hover:text-blue-300 p-1 rounded",title:"View Bookings",children:e.jsx(S3,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Q(Y),className:"text-gray-400 hover:text-gray-300 p-1 rounded",title:"Edit",children:e.jsx(sa,{className:"h-4 w-4"})}),(n?.role==="branch_admin"||n?.role==="super_admin")&&e.jsx("button",{onClick:()=>B(Y),className:"text-red-400 hover:text-red-300 p-1 rounded",title:"Delete",children:e.jsx(js,{className:"h-4 w-4"})})]})})]},Y._id)})})]})})}),I.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ys,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No barbers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i||c!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new barber profile."})]}),p&&e.jsx(cT,{isOpen:!!p,onClose:()=>{u(null),g("details")},barber:p,services:M,onRefresh:s,initialView:f}),w&&e.jsx($,{barber:w,onClose:()=>B(null),onConfirm:()=>R(w)})]})},lm=({isOpen:t,onClose:s,title:n,buttonText:i="Create User",loadingText:o="Creating...",onSubmit:c,formData:d,onInputChange:m,error:h,loading:p,branches:u,isEditMode:f=!1,availableRoles:g=[{value:"branch_admin",label:"Branch Admin"},{value:"staff",label:"Staff"},{value:"super_admin",label:"Super Admin"}]})=>{const[y,b]=C.useState(!1),[j,N]=C.useState({}),[w,B]=C.useState(!1),S=[{id:"overview",label:"Overview"},{id:"bookings",label:"Bookings"},{id:"calendar",label:"Calendar"},{id:"services",label:"Services"},{id:"vouchers",label:"Vouchers"},{id:"barbers",label:"Barbers"},{id:"users",label:"User Management"},{id:"customers",label:"Customers"},{id:"events",label:"Events"},{id:"reports",label:"Reports"},{id:"payroll",label:"Payroll"},{id:"products",label:"Products"},{id:"notifications",label:"Notifications"},{id:"email_marketing",label:"Email Marketing"},{id:"pos",label:"POS"}];C.useEffect(()=>{t&&(N({}),B(!1))},[t]);const _=(M,P)=>{const T={...j};switch(M){case"username":P.trim()?P.length<3?T.username="Username must be at least 3 characters":P.length>50?T.username="Username must be less than 50 characters":/^[a-zA-Z0-9_\-\.]+$/.test(P)?P.startsWith(".")||P.endsWith(".")?T.username="Username cannot start or end with a dot":P.includes("..")?T.username="Username cannot contain consecutive dots":delete T.username:T.username="Username can only contain letters, numbers, hyphens, underscores, and dots":T.username="Username is required";break;case"email":P.trim()?P.length>254?T.email="Email must be less than 254 characters":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P)?P.includes("..")?T.email="Email cannot contain consecutive dots":delete T.email:T.email="Please enter a valid email address":T.email="Email is required";break;case"password":!f&&!P.trim()?T.password="Password is required":P.trim()&&P.length<6?T.password="Password must be at least 6 characters":P.trim()&&P.length>128?T.password="Password must be less than 128 characters":P.trim()&&!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(P)?T.password="Password must contain at least one uppercase letter, one lowercase letter, and one number":P.trim()&&/[<>'"]/.test(P)?T.password="Password cannot contain <, >, single quotes, or double quotes":delete T.password;break;case"mobile_number":if(P.trim()){const L=P.replace(/[\s\-\(\)]/g,"");L.length<7?T.mobile_number="Phone number is too short":L.length>20?T.mobile_number="Phone number is too long":/^[\+]?[1-9][\d]{6,19}$/.test(L)?delete T.mobile_number:T.mobile_number="Please enter a valid phone number"}else delete T.mobile_number;break;case"address":P.trim()&&P.length>500?T.address="Address must be less than 500 characters":P.trim()&&/[<>]/.test(P)?T.address="Address cannot contain < or > characters":delete T.address;break;case"branch_id":d.role!=="super_admin"&&!P?T.branch_id="Branch is required for this role":delete T.branch_id;break}N(T)},k=M=>{const P=d.page_access||[];let T;P.includes(M)?T=P.filter(L=>L!==M):T=[...P,M],m({target:{name:"page_access",value:T}})},E=M=>{const{name:P,value:T}=M.target;m(M),_(P,T)},D=async M=>{M.preventDefault(),B(!0);const P=["username","email","password","mobile_number"];if(d.role!=="super_admin"&&P.push("branch_id"),P.forEach(L=>{_(L,d[L])}),Object.keys(j).length>0){B(!1);return}try{await c(M)}catch(L){console.error("Form submission error:",L)}finally{B(!1)}},F=()=>{const M=["username","email"];return f||M.push("password"),d.role!=="super_admin"&&M.push("branch_id"),M.every(P=>{const T=d[P];return T&&T.trim()&&!j[P]})&&Object.keys(j).length===0};return t?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-4xl transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10000] border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:n}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(Ze,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[h&&e.jsxs("div",{className:"mb-4 p-3 bg-red-400/20 border border-red-400/30 rounded-lg flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-400",children:h})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Username *",j.username?e.jsxs("span",{className:"text-red-400 ml-2 text-xs",children:["(",j.username,")"]}):d.username&&!j.username?e.jsx(Je,{className:"inline h-4 w-4 text-green-400 ml-2"}):null]}),e.jsx("input",{type:"text",name:"username",value:d.username,onChange:E,className:`w-full px-3 py-2 bg-[#1A1A1A] border text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${j.username?"border-red-400 focus:ring-red-400":d.username&&!j.username?"border-green-400":"border-[#444444]"}`,placeholder:"Enter username",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Email *",j.email?e.jsxs("span",{className:"text-red-400 ml-2 text-xs",children:["(",j.email,")"]}):d.email&&!j.email?e.jsx(Je,{className:"inline h-4 w-4 text-green-400 ml-2"}):null]}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:E,className:`w-full px-3 py-2 bg-[#1A1A1A] border text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${j.email?"border-red-400 focus:ring-red-400":d.email&&!j.email?"border-green-400":"border-[#444444]"}`,placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Password ",f?"(leave blank to keep current)":"*",j.password?e.jsxs("span",{className:"text-red-400 ml-2 text-xs",children:["(",j.password,")"]}):d.password&&!j.password?e.jsx(Je,{className:"inline h-4 w-4 text-green-400 ml-2"}):null]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",name:"password",value:d.password,onChange:E,className:`w-full px-3 py-2 pr-10 bg-[#1A1A1A] border text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${j.password?"border-red-400 focus:ring-red-400":d.password&&!j.password?"border-green-400":"border-[#444444]"}`,placeholder:f?"Enter new password (optional)":"Enter password",required:!f}),e.jsx("button",{type:"button",onClick:()=>b(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:y?e.jsx(x7,{className:"h-4 w-4"}):e.jsx(Dn,{className:"h-4 w-4"})})]}),!f&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Must contain at least 6 characters with uppercase, lowercase, and number"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role *"}),e.jsx("select",{name:"role",value:d.role,onChange:E,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",required:!0,children:g.map(M=>e.jsx("option",{value:M.value,children:M.label},M.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Mobile Number",j.mobile_number?e.jsxs("span",{className:"text-red-400 ml-2 text-xs",children:["(",j.mobile_number,")"]}):d.mobile_number&&!j.mobile_number?e.jsx(Je,{className:"inline h-4 w-4 text-green-400 ml-2"}):null]}),e.jsx("input",{type:"tel",name:"mobile_number",value:d.mobile_number,onChange:E,className:`w-full px-3 py-2 bg-[#1A1A1A] border text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${j.mobile_number?"border-red-400 focus:ring-red-400":d.mobile_number&&!j.mobile_number?"border-green-400":"border-[#444444]"}`,placeholder:"Enter mobile number (e.g., +1234567890)"})]}),d.role!=="super_admin"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Branch *",j.branch_id?e.jsxs("span",{className:"text-red-400 ml-2 text-xs",children:["(",j.branch_id,")"]}):d.branch_id&&!j.branch_id?e.jsx(Je,{className:"inline h-4 w-4 text-green-400 ml-2"}):null]}),e.jsxs("select",{name:"branch_id",value:d.branch_id,onChange:E,className:`w-full px-3 py-2 bg-[#1A1A1A] border text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${j.branch_id?"border-red-400 focus:ring-red-400":d.branch_id&&!j.branch_id?"border-green-400":"border-[#444444]"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),u?.map(M=>e.jsxs("option",{value:M._id,children:[M.name," (",M.branch_code,")"]},M._id))]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Address",j.address?e.jsxs("span",{className:"text-red-400 ml-2 text-xs",children:["(",j.address,")"]}):d.address&&!j.address?e.jsx(Je,{className:"inline h-4 w-4 text-green-400 ml-2"}):null]}),e.jsx("textarea",{name:"address",value:d.address,onChange:E,rows:"2",className:`w-full px-3 py-2 bg-[#1A1A1A] border text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${j.address?"border-red-400 focus:ring-red-400":d.address&&!j.address?"border-green-400":"border-[#444444]"}`,placeholder:"Enter address"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[d.address.length,"/500 characters"]})]}),(d.role==="staff"||d.role==="branch_admin")&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Page Access Permissions",e.jsx("span",{className:"text-xs text-gray-500 ml-2 block sm:inline",children:"(Select which pages this user can access)"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 p-4 bg-[#1A1A1A] border border-[#444444] rounded-lg",children:S.map(M=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group",children:[e.jsx("div",{className:"relative flex items-center",children:e.jsx("input",{type:"checkbox",checked:(d.page_access||[]).includes(M.id),onChange:()=>k(M.id),className:"peer h-4 w-4 rounded border-gray-500 bg-[#2A2A2A] text-[var(--color-primary)] focus:ring-[var(--color-primary)] focus:ring-offset-[#1A1A1A] transition-all duration-200 ease-in-out cursor-pointer"})}),e.jsx("span",{className:"text-sm text-gray-300 group-hover:text-white transition-colors",children:M.label})]},M.id))}),e.jsxs("div",{className:"mt-2 flex justify-end",children:[e.jsx("button",{type:"button",onClick:()=>{const M=S.map(P=>P.id);m({target:{name:"page_access",value:M}})},className:"text-xs text-[var(--color-primary)] hover:underline mr-3",children:"Select All"}),e.jsx("button",{type:"button",onClick:()=>{m({target:{name:"page_access",value:[]}})},className:"text-xs text-gray-400 hover:text-white hover:underline",children:"Deselect All"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-[#444444]/30",children:[e.jsx("button",{type:"button",onClick:s,disabled:w,className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p||w||!F(),className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p||w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:o})]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"h-4 w-4"}),e.jsx("span",{children:i})]})})]})]})]})]})]})}),document.body):null},uT=fr.memo(({isOpen:t,onClose:s,onConfirm:n,user:i,loading:o,error:c})=>t?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-[#1A1A1A] shadow-2xl transition-all z-[10000] border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(Ze,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[c&&e.jsxs("div",{className:"mb-4 p-3 bg-red-400/20 border border-red-400/30 rounded-lg flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-400",children:c})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(js,{className:"h-8 w-8 text-red-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Are you sure you want to delete ",e.jsx("strong",{children:i?.username}),"?"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"This action cannot be undone. The user will be permanently removed from the system."}),e.jsx("div",{className:"bg-gray-500/10 border border-gray-500/30 rounded-lg p-3 mb-6 text-left",children:e.jsxs("p",{className:"text-sm text-gray-400",children:[e.jsx("strong",{children:"User Details:"}),e.jsx("br",{}),"Username: ",i?.username,e.jsx("br",{}),"Email: ",i?.email,e.jsx("br",{}),"Role: ",i?.role?.replace("_"," ").toUpperCase()]})}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{type:"button",onClick:s,className:"px-6 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:n,disabled:o,className:"flex items-center space-x-2 px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Deleting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(js,{className:"h-4 w-4"}),e.jsx("span",{children:"Delete User"})]})})]})]})]})]})]})}),document.body):null);function mT(){const{user:t}=Dt(),[s,n]=C.useState(""),[i,o]=C.useState("all"),[c,d]=C.useState(!1),[m,h]=C.useState(!1),[p,u]=C.useState(!1),[f,g]=C.useState(null),y={username:"",email:"",password:"",mobile_number:"",address:"",role:"staff",page_access:[],branch_id:t?.branch_id||""},[b,j]=C.useState(y),[N,w]=C.useState(!1),[B,S]=C.useState(""),_=t?.branch_id?me(H.services.auth.getUsersByBranch,{branch_id:t.branch_id})||[]:[],E=(me(H.services.branches.getAllBranches)||[]).find(R=>R._id===t?.branch_id),D=De(H.services.auth.createUser),F=De(H.services.auth.updateUser),M=De(H.services.auth.deleteUser),P=_.filter(R=>R.role==="staff"),T=R=>{switch(R){case"staff":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"};case"barber":return{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}}},L=P.filter(R=>{const q=R.username.toLowerCase().includes(s.toLowerCase())||R.email.toLowerCase().includes(s.toLowerCase()),J=i==="all"||R.role===i;return q&&J}).sort((R,q)=>new Date(q.createdAt)-new Date(R.createdAt)),X={total:P.length,staff:P.filter(R=>R.role==="staff").length},Z=()=>{j(y),S("")},ne=()=>{Z(),d(!0)},I=async R=>{if(R.preventDefault(),!b.username.trim()||!b.email.trim()||!b.password.trim()){S("Username, email, and password are required");return}if(!t?.branch_id){S("Branch information is missing");return}w(!0);try{await D({...b,branch_id:t.branch_id}),d(!1),Z()}catch(q){console.error("Error creating user:",q),S(q.message||"Failed to create user")}finally{w(!1)}},O=R=>{const{name:q,value:J}=R.target;j($=>({...$,[q]:J}))},G=R=>{g(R),j({username:R.username,email:R.email,password:"",mobile_number:R.mobile_number||"",address:R.address||"",role:R.role,page_access:R.page_access||[],branch_id:R.branch_id||""}),S(""),h(!0)},te=R=>{g(R),u(!0)},Q=async R=>{if(R.preventDefault(),!b.username.trim()||!b.email.trim()){S("Username and email are required");return}if(!f?._id){S("User ID is missing");return}w(!0);try{const q={userId:f._id,username:b.username,email:b.email,mobile_number:b.mobile_number,address:b.address,role:b.role,page_access:b.page_access};b.password.trim()&&(q.password=b.password),await F(q),h(!1),Z(),g(null)}catch(q){console.error("Error updating user:",q),S(q.message||"Failed to update user")}finally{w(!1)}},ee=async()=>{if(!f?._id){S("User ID is missing");return}w(!0);try{await M({userId:f._id}),u(!1),g(null)}catch(R){console.error("Error deleting user:",R),S(R.message||"Failed to delete user")}finally{w(!1)}},le=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return E?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Gs,{className:"h-6 w-6 text-[var(--color-primary)]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:E.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Branch Code: ",E.branch_code,"  Managing branch staff"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:X.total})]}),e.jsx(hs,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:X.staff})]}),e.jsx(tt,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:s,onChange:R=>n(R.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:i,onChange:R=>o(R.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"staff",children:"Staff"})]})]})]}),e.jsxs("button",{onClick:ne,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm",children:[e.jsx(zr,{className:"h-4 w-4"}),e.jsx("span",{children:"Add User"})]})]})}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-[#0A0A0A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#444444]/30",children:L.map(R=>{const q=T(R.role);return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(tt,{className:"h-5 w-5 text-[var(--color-primary)]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:R.username}),e.jsx("div",{className:"text-sm text-gray-400",children:R.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.bg} ${q.text}`,children:R.role.replace("_"," ").toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:R.mobile_number||"N/A"}),R.address&&e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:R.address})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:le(R.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>G(R),className:"text-blue-400 hover:text-blue-300 transition-colors",title:"Edit user",children:e.jsx(sa,{className:"h-4 w-4"})}),(t?.role==="branch_admin"||t?.role==="super_admin")&&e.jsx("button",{onClick:()=>te(R),className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete user",children:e.jsx(js,{className:"h-4 w-4"})})]})})]},R._id)})})]})}),L.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:s||i!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding staff or barbers to this branch."})]})]}),e.jsx(lm,{isOpen:c,onClose:()=>{d(!1),Z()},title:"Add User to Branch",onSubmit:I,formData:b,onInputChange:O,loading:N,error:B,branches:[E],availableRoles:[{value:"staff",label:"Staff"}],isEditMode:!1}),e.jsx(lm,{isOpen:m,onClose:()=>{h(!1),Z(),g(null)},title:"Edit User",buttonText:"Update User",loadingText:"Updating...",onSubmit:Q,formData:b,onInputChange:O,loading:N,error:B,branches:[E],availableRoles:[{value:"staff",label:"Staff"}],isEditMode:!0}),e.jsx(uT,{isOpen:p,onClose:()=>{u(!1),g(null),S("")},onConfirm:ee,user:f,loading:N,error:B})]}):e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading branch users..."})]})}const hT=({customers:t=[],onRefresh:s})=>{const[n,i]=C.useState(""),[o,c]=C.useState("all"),[d,m]=C.useState("name"),[h,p]=C.useState(null),[u,f]=C.useState(null),[g,y]=C.useState("email"),[b,j]=C.useState(""),[N,w]=C.useState(!1),B=F=>{switch(F.status||"active"){case"active":return{status:"active",label:"Active",bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"};case"new":return{status:"new",label:"New",bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",iconColor:"text-blue-500"};default:return{status:"inactive",label:"Inactive",bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"}}},S=t.filter(F=>{const M=(F.name||F.username||"").toLowerCase().includes(n.toLowerCase())||(F.email||"").toLowerCase().includes(n.toLowerCase())||(F.phone||F.mobile_number||"").includes(n),P=o==="all"||B(F).status===o;return M&&P}).sort((F,M)=>d==="name"?(F.name||F.username||"").localeCompare(M.name||M.username||""):d==="email"?(F.email||"").localeCompare(M.email||""):d==="joined"?new Date(M.joinedDate||0)-new Date(F.joinedDate||0):d==="bookings"?(M.totalBookings||0)-(F.totalBookings||0):F.id-M.id),_={total:t.length,active:t.filter(F=>(F.status||"active")==="active").length,new:t.filter(F=>(F.status||"active")==="new").length,inactive:t.filter(F=>(F.status||"active")==="inactive").length,totalSpent:t.reduce((F,M)=>F+(M.totalSpent||0),0)},k=F=>{p(F)},E=F=>{f(F),y("email"),j("")},D=async()=>{if(!b.trim()){alert("Please enter a message");return}w(!0);try{if(await new Promise(F=>setTimeout(F,1e3)),g==="email")window.location.href=`mailto:${u.email}?subject=Message from Barbershop&body=${encodeURIComponent(b)}`;else if(g==="sms")window.location.href=`sms:${u.mobile_number||u.phone}?body=${encodeURIComponent(b)}`;else if(g==="whatsapp"){const F=(u.mobile_number||u.phone||"").replace(/[^0-9]/g,"");window.open(`https://wa.me/${F}?text=${encodeURIComponent(b)}`,"_blank")}f(null),j("")}catch(F){console.error("Error sending contact:",F),alert("Failed to send message. Please try again.")}finally{w(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:_.total})]}),e.jsx(tt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:_.active})]}),e.jsx(tt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"New"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:_.new})]}),e.jsx(tt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:_.inactive})]}),e.jsx(tt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:["",_.totalSpent.toFixed(0)]})]}),e.jsx(rt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:n,onChange:F=>i(F.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:o,onChange:F=>c(F.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("select",{value:d,onChange:F=>m(F.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"email",children:"Sort by Email"}),e.jsx("option",{value:"joined",children:"Sort by Joined Date"}),e.jsx("option",{value:"bookings",children:"Sort by Bookings"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:[e.jsx(Ro,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]})})]})}),e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-[#0A0A0A] border-b border-[#444444]/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tt,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("span",{children:"Customer"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("span",{children:"Contact"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("span",{children:"Birthday"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-[#1A1A1A] divide-y divide-[#444444]/30",children:S.map((F,M)=>{const P=B(F);return e.jsxs("tr",{className:`hover:bg-[#333333]/50 transition-colors ${M%2===0?"bg-[#2A2A2A]":"bg-[#333333]/30"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(tt,{className:"h-5 w-5 text-[var(--color-primary)]"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-white truncate max-w-[200px]",title:F.name||F.username,children:(F.name||F.username||"").length>25?(F.name||F.username).substring(0,25)+"...":F.name||F.username}),e.jsxs("div",{className:"text-sm text-gray-400 truncate max-w-[180px]",title:F.username,children:["@",F.username?.length>20?F.username.substring(0,20)+"...":F.username,F.nickname&&e.jsx("span",{className:"ml-2 text-xs bg-[#444444] text-gray-300 px-2 py-0.5 rounded-full",children:F.nickname})]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-sm text-white truncate max-w-48",title:F.email,children:F.email||"No email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Er,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-400",children:F.phone||F.mobile_number||"No phone"})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:F.formattedBirthday||F.birthday||"Not provided"}),e.jsxs("div",{className:"text-xs text-gray-400 capitalize",children:["Role: ",F.role||"client"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:`inline-flex items-center px-2.5 py-1.5 rounded-full text-xs font-medium ${P.bg} ${P.text} ${P.border} border`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${P.iconColor.replace("text-","bg-")}`}),P.label]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs("button",{onClick:()=>k(F),className:"inline-flex items-center px-3 py-1.5 bg-[var(--color-primary)]/20 text-[var(--color-primary)] rounded-lg hover:bg-[var(--color-primary)]/30 transition-colors text-xs font-medium",children:[e.jsx(tt,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>E(F),className:"inline-flex items-center px-3 py-1.5 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-xs font-medium",children:[e.jsx(Ht,{className:"h-3 w-3 mr-1"}),"Contact"]})]})})]},F.id)})})]})})}),S.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No customers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:n||o!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding a new customer."})]}),h&&e.jsx(ns,{isOpen:!!h,onClose:()=>p(null),title:"Customer Details",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 pb-6 border-b border-gray-200",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-full bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(tt,{className:"h-8 w-8 text-[var(--color-primary)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-[#1A1A1A]",children:h.name||h.username}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",h.username]}),h.nickname&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-[var(--color-primary)]/10 text-[var(--color-primary)] mt-1",children:h.nickname})]}),e.jsx("div",{className:"flex-shrink-0",children:(()=>{const F=B(h);return e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium ${F.bg} ${F.text} ${F.border} border`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${F.iconColor.replace("text-","bg-")}`}),F.label]})})()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-[#1A1A1A] flex items-center",children:[e.jsx(Ht,{className:"h-5 w-5 text-[var(--color-primary)] mr-2"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3 bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ht,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:h.email||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Er,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.phone||h.mobile_number||"Not provided"})]})]}),h.address&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(yi,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Address"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.address})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-[#1A1A1A] flex items-center",children:[e.jsx(tt,{className:"h-5 w-5 text-[var(--color-primary)] mr-2"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-3 bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rt,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Birthday"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.formattedBirthday||h.birthday||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(tt,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Role"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:h.role||"Customer"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rt,{className:"h-4 w-4 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Account ID"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 font-mono",children:h._id||h.id})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 text-center",children:[e.jsx(Aa,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h.totalBookings||0}),e.jsx("p",{className:"text-xs text-blue-700",children:"Total Bookings"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 text-center",children:[e.jsx(ds,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),e.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["",(h.totalSpent||0).toFixed(0)]}),e.jsx("p",{className:"text-xs text-green-700",children:"Total Spent"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4 text-center",children:[e.jsx(Vt,{className:"h-6 w-6 text-yellow-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:h.loyaltyPoints||0}),e.jsx("p",{className:"text-xs text-yellow-700",children:"Loyalty Points"})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>{p(null),E(h)},className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm font-medium",children:[e.jsx(Ht,{className:"h-4 w-4 inline mr-2"}),"Contact Customer"]}),e.jsx("button",{onClick:()=>p(null),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium",children:"Close"})]})]})}),u&&e.jsx(ns,{isOpen:!!u,onClose:()=>f(null),title:"Contact Customer",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(tt,{className:"h-6 w-6 text-[var(--color-primary)]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-lg font-semibold text-[#1A1A1A]",children:u.name||u.username}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:u.email})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#1A1A1A] mb-2",children:"Contact Method"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>y("email"),className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all ${g==="email"?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Ht,{className:`h-6 w-6 mb-2 ${g==="email"?"text-[var(--color-primary)]":"text-gray-500"}`}),e.jsx("span",{className:`text-xs font-medium ${g==="email"?"text-[var(--color-primary)]":"text-gray-700"}`,children:"Email"})]}),e.jsxs("button",{onClick:()=>y("sms"),className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all ${g==="sms"?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(cg,{className:`h-6 w-6 mb-2 ${g==="sms"?"text-[var(--color-primary)]":"text-gray-500"}`}),e.jsx("span",{className:`text-xs font-medium ${g==="sms"?"text-[var(--color-primary)]":"text-gray-700"}`,children:"SMS"})]}),e.jsxs("button",{onClick:()=>y("whatsapp"),className:`flex flex-col items-center justify-center p-4 rounded-lg border-2 transition-all ${g==="whatsapp"?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Er,{className:`h-6 w-6 mb-2 ${g==="whatsapp"?"text-[var(--color-primary)]":"text-gray-500"}`}),e.jsx("span",{className:`text-xs font-medium ${g==="whatsapp"?"text-[var(--color-primary)]":"text-gray-700"}`,children:"WhatsApp"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#1A1A1A] mb-2",children:"Message"}),e.jsx("textarea",{value:b,onChange:F=>j(F.target.value),placeholder:"Type your message here...",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent resize-none text-sm"}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:[g==="email"&&"This will open your default email client",g==="sms"&&"This will open your SMS app",g==="whatsapp"&&"This will open WhatsApp Web or App"]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:D,disabled:N||!b.trim(),className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Sending...":"Send Message"}),e.jsx("button",{onClick:()=>f(null),disabled:N,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-sm font-medium disabled:opacity-50",children:"Cancel"})]})]})})]})},pT=({onRefresh:t,user:s})=>{const[n,i]=C.useState("today"),[o,c]=C.useState("descriptive"),[d,m]=C.useState(!1),h=s?.role==="super_admin"?me(H.services.bookings.getAllBookings):s?.branch_id?me(H.services.bookings.getBookingsByBranch,{branch_id:s.branch_id}):[],p=s?.role==="super_admin"?me(H.services.transactions.getAllTransactions):s?.branch_id?me(H.services.transactions.getTransactionsByBranch,{branch_id:s.branch_id}):[],u=s?.role==="super_admin"?me(H.services.barbers.getAllBarbers):s?.branch_id?me(H.services.barbers.getBarbersByBranch,{branch_id:s.branch_id}):[],f=s?.role==="super_admin"?me(H.services.services.getAllServices):s?.branch_id?me(H.services.services.getServicesByBranch,{branch_id:s.branch_id}):[],g=me(H.services.products.getAllProducts),y=w=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(w||0),b=w=>{const B=w>=12?"PM":"AM";return`${w>12?w-12:w===0?12:w}:00 ${B}`},j=C.useMemo(()=>{if(!h||!p||!u||!f||!g)return null;const w=ie=>{const Ae=ie>=12?"PM":"AM";return`${ie>12?ie-12:ie===0?12:ie}:00 ${Ae}`},B=Date.now(),S=new Date().setHours(0,0,0,0),_=B-10080*60*1e3,k=B-720*60*60*1e3,E=B-365*24*60*60*1e3;let D=S;n==="week"&&(D=_),n==="month"&&(D=k),n==="year"&&(D=E);const F=p.filter(ie=>ie.createdAt>=D&&ie.payment_status==="completed"),M=h.filter(ie=>ie.createdAt>=D),P=M.filter(ie=>ie.status!=="cancelled"),T=p.filter(ie=>ie.payment_status==="completed"),L=B-D,X=D-L,Z=D,ne=p.filter(ie=>ie.createdAt>=X&&ie.createdAt<Z&&ie.payment_status==="completed"),O=h.filter(ie=>ie.createdAt>=X&&ie.createdAt<Z).filter(ie=>ie.status!=="cancelled"),G=F.reduce((ie,Ae)=>ie+Ae.total_amount,0),te=ne.reduce((ie,Ae)=>ie+Ae.total_amount,0),Q=te>0?(G-te)/te*100:0,ee=F.reduce((ie,Ae)=>ie+Ae.services.reduce((nt,ct)=>nt+ct.price*ct.quantity,0),0),le=F.reduce((ie,Ae)=>ie+(Ae.products||[]).reduce((nt,ct)=>nt+ct.price*ct.quantity,0),0),R=new Set(F.map(ie=>ie.customer||ie.customer_name)).size,q=new Set(ne.map(ie=>ie.customer||ie.customer_name)).size,J=q>0?(R-q)/q*100:0,$=F.length,Y=$>0?G/$:0,xe=ne.length>0?ne.reduce((ie,Ae)=>ie+Ae.total_amount,0)/ne.length:0,oe=xe>0?(Y-xe)/xe*100:0,de=P.filter(ie=>ie.status==="completed").length,ve=P.length>0?de/P.length*100:0,Me=O.length>0?O.filter(ie=>ie.status==="completed").length/O.length*100:0,Ke=u.map(ie=>{const Ae=F.filter(dt=>dt.barber===ie._id),nt=Ae.reduce((dt,zt)=>dt+zt.total_amount,0),ct=P.filter(dt=>dt.barber===ie._id),pt=ct.filter(dt=>dt.status==="completed").length,re=ct.length>0?pt/ct.length*100:0,qe=ne.filter(dt=>dt.barber===ie._id).reduce((dt,zt)=>dt+zt.total_amount,0),ut=qe>0?(nt-qe)/qe*100:0;return{id:ie._id,name:ie.full_name,revenue:nt,transactions:Ae.length,bookings:ct.length,completionRate:re,avgTransaction:Ae.length>0?nt/Ae.length:0,revenueGrowth:ut}}).sort((ie,Ae)=>Ae.revenue-ie.revenue),pe={};F.forEach(ie=>{ie.services.forEach(Ae=>{pe[Ae.service_id]||(pe[Ae.service_id]={id:Ae.service_id,name:Ae.service_name,count:0,revenue:0}),pe[Ae.service_id].count+=Ae.quantity,pe[Ae.service_id].revenue+=Ae.price*Ae.quantity})});const be=Object.values(pe).sort((ie,Ae)=>Ae.revenue-ie.revenue).slice(0,5),Be=Array(24).fill(0).map((ie,Ae)=>({hour:Ae,transactions:0,revenue:0}));F.forEach(ie=>{const Ae=new Date(ie.createdAt).getHours();Be[Ae].transactions++,Be[Ae].revenue+=ie.total_amount});const Ue=[...Be].sort((ie,Ae)=>Ae.transactions-ie.transactions).slice(0,3),ue=[...Be].sort((ie,Ae)=>Ae.revenue-ie.revenue).slice(0,3),Ie={};F.forEach(ie=>{ie.services.forEach(Ae=>{Ie[Ae.service_name]||(Ie[Ae.service_name]={}),(ie.products||[]).forEach(nt=>{Ie[Ae.service_name][nt.product_name]||(Ie[Ae.service_name][nt.product_name]=0),Ie[Ae.service_name][nt.product_name]++})})});const st={};T.forEach(ie=>{const Ae=ie.customer||ie.customer_name;Ae&&(st[Ae]=(st[Ae]||0)+1)});const Le=Object.values(st).filter(ie=>ie>1).length,kt=Object.keys(st).length,Pt=kt>0?Le/kt*100:0,St=kt>0?Object.values(st).reduce((ie,Ae)=>ie+Ae,0)/kt:0,Jt=Array(7).fill(0).map((ie,Ae)=>({day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][Ae],transactions:0,revenue:0}));F.forEach(ie=>{const Ae=new Date(ie.createdAt).getDay();Jt[Ae].transactions++,Jt[Ae].revenue+=ie.total_amount});const Ne=[...Jt].sort((ie,Ae)=>Ae.transactions-ie.transactions).slice(0,3),Ye=M.filter(ie=>ie.status==="cancelled"),Ge=M.length>0?Ye.length/M.length*100:0,bt=p.filter(ie=>ie.createdAt>=B-10080*60*1e3&&ie.payment_status==="completed").reduce((ie,Ae)=>ie+Ae.total_amount,0)/7,Ee=bt*7,We=bt*30,Qe={};p.filter(ie=>ie.createdAt>=k).forEach(ie=>{(ie.products||[]).forEach(Ae=>{Qe[Ae.product_id]||(Qe[Ae.product_id]={name:Ae.product_name,totalSold:0,avgPerWeek:0}),Qe[Ae.product_id].totalSold+=Ae.quantity})}),Object.keys(Qe).forEach(ie=>{const Ae=(B-k)/6048e5;Qe[ie].avgPerWeek=Qe[ie].totalSold/Ae,Qe[ie].forecastNextWeek=Math.ceil(Qe[ie].avgPerWeek),Qe[ie].forecastNextMonth=Math.ceil(Qe[ie].avgPerWeek*4)});const wt=[];Object.entries(st).forEach(([ie,Ae])=>{const nt=T.filter(ct=>(ct.customer||ct.customer_name)===ie);if(nt.length>0){const ct=Math.max(...nt.map(re=>re.createdAt)),pt=(B-ct)/(1440*60*1e3);pt>30&&Ae>2&&wt.push({id:ie,frequency:Ae,daysSinceLastVisit:Math.floor(pt),churnRisk:pt>60?"High":"Medium"})}});const Bt=wt.length,K=kt>0?Bt/kt*100:0,V=Q>5?"Increasing":Q<-5?"Decreasing":"Stable",se=V==="Increasing"?G*1.1:V==="Decreasing"?G*.9:G,ke=[],Re=be.length>0?be.reduce((ie,Ae)=>ie+Ae.revenue,0)/be.length:0;Object.values(pe).forEach(ie=>{ie.revenue<Re*.5&&ie.revenue>0&&ke.push({type:"Service Promotion",target:ie.name,suggestion:"Offer 20% discount to boost demand",priority:"Medium",expectedImpact:"Increase bookings by 30-40%"})});const ze=Jt.reduce((ie,Ae)=>ie+Ae.transactions,0)/7;Jt.forEach(ie=>{ie.transactions<ze*.7&&ie.transactions>0&&ke.push({type:"Day Promotion",target:`${ie.day}days`,suggestion:`Offer "Happy ${ie.day}" special discount`,priority:"High",expectedImpact:"Fill slow periods"})}),wt.length>0&&ke.push({type:"Win-Back Campaign",target:`${wt.length} inactive customers`,suggestion:'Send personalized "We miss you" offers',priority:"High",expectedImpact:"Recover 20-30% of at-risk customers"});const Ve=g.filter(ie=>ie.stock<=ie.minStock&&ie.status!=="inactive").map(ie=>({product:ie.name,currentStock:ie.stock,minStock:ie.minStock,suggestedOrder:Math.max(ie.minStock*2,Qe[ie._id]?.forecastNextMonth||ie.minStock*2),urgency:ie.stock===0?"Critical":ie.stock<=ie.minStock*.5?"High":"Medium"})).sort((ie,Ae)=>ie.currentStock-Ae.currentStock),_t=[];if(Ue.length>0){const ie=Ue[0],Ae=Be.reduce((nt,ct)=>nt+ct.transactions,0)/24;ie.transactions>Ae*1.5&&_t.push({type:"Peak Hour Staffing",timeframe:`${w(ie.hour)} - ${w((ie.hour+2)%24)}`,suggestion:`Add ${Math.ceil(ie.transactions/5)} more barbers`,reason:`${ie.transactions} transactions during peak`,priority:"High"})}Ne.forEach((ie,Ae)=>{Ae<2&&ie.transactions>0&&_t.push({type:"Busy Day Staffing",timeframe:`${ie.day}s`,suggestion:"Ensure full staff availability",reason:`Peak day with ${ie.transactions} transactions`,priority:"Medium"})}),Ke.forEach(ie=>{ie.transactions>0&&ie.completionRate<70&&_t.push({type:"Staff Training",timeframe:"This week",suggestion:`Provide booking management training for ${ie.name}`,reason:`Low completion rate: ${ie.completionRate.toFixed(0)}%`,priority:"Medium"})});const _e={};F.forEach(ie=>{_e[ie.payment_method]||(_e[ie.payment_method]=0),_e[ie.payment_method]++});const $e={};F.forEach(ie=>{(ie.products||[]).forEach(Ae=>{$e[Ae.product_id]||($e[Ae.product_id]={name:Ae.product_name,count:0,revenue:0}),$e[Ae.product_id].count+=Ae.quantity,$e[Ae.product_id].revenue+=Ae.price*Ae.quantity})});const ot=Object.values($e).sort((ie,Ae)=>Ae.revenue-ie.revenue).slice(0,5);return{revenue:{total:G,change:Q,services:ee,products:le},customers:{unique:R,change:J},transactions:{count:$,average:Y,change:oe},bookings:{total:P.length,totalAll:M.length,completed:de,completionRate:ve,completionChange:ve-Me},barbers:Ke,services:be,peakHours:Ue,peakRevenueHours:ue,serviceProductCorrelation:Ie,retentionRate:Pt,repeatCustomers:Le,totalCustomersAllTime:kt,avgVisitsPerCustomer:St,dayStats:Jt,busiestDays:Ne,cancellationRate:Ge,cancelledBookings:Ye.length,forecast:{next7Days:Ee,next30Days:We,dailyAverage:bt,growthTrend:V,predictedMonthly:se},productDemand:Qe,churnRisk:{count:Bt,rate:K,customers:wt.slice(0,10)},promotionSuggestions:ke.slice(0,5),restockingAlerts:Ve,staffRecommendations:_t,paymentMethods:_e,products:ot}},[h,p,u,f,g,n]),N=()=>{if(!j)return;const w=new Date().toISOString().split("T")[0];let B=`Business Analytics Report - ${n}
`;B+=`Generated: ${new Date().toLocaleString()}
`,B+=`Tab: ${o}

`,o==="descriptive"?(B+=`DESCRIPTIVE ANALYTICS: What Happened?

`,B+=`Revenue Summary
`,B+=`Total Revenue,${y(j.revenue.total)}
`,B+=`Services Revenue,${y(j.revenue.services)}
`,B+=`Products Revenue,${y(j.revenue.products)}
`,B+=`Change vs Previous,${j.revenue.change.toFixed(1)}%

`,B+=`Top Services
`,B+=`Service,Count,Revenue
`,j.services.forEach(E=>{B+=`"${E.name}",${E.count},${y(E.revenue)}
`}),B+=`
Barber Performance
`,B+=`Barber,Revenue,Transactions,Completion Rate
`,j.barbers.forEach(E=>{B+=`"${E.name}",${y(E.revenue)},${E.transactions},${E.completionRate.toFixed(1)}%
`})):o==="diagnostic"?(B+=`DIAGNOSTIC ANALYTICS: Why It Happened?

`,B+=`Peak Hours
`,B+=`Hour,Transactions,Revenue
`,j.peakHours.forEach(E=>{B+=`${b(E.hour)},${E.transactions},${y(E.revenue)}
`}),B+=`
Busiest Days
`,B+=`Day,Transactions,Revenue
`,j.busiestDays.forEach(E=>{B+=`${E.day},${E.transactions},${y(E.revenue)}
`}),B+=`
Customer Retention
`,B+=`Retention Rate,${j.retentionRate.toFixed(1)}%
`,B+=`Repeat Customers,${j.repeatCustomers}
`,B+=`Avg Visits per Customer,${j.avgVisitsPerCustomer.toFixed(1)}
`):o==="predictive"?(B+=`PREDICTIVE ANALYTICS: What Will Happen?

`,B+=`Revenue Forecast
`,B+=`Next 7 Days,${y(j.forecast.next7Days)}
`,B+=`Next 30 Days,${y(j.forecast.next30Days)}
`,B+=`Daily Average,${y(j.forecast.dailyAverage)}
`,B+=`Growth Trend,${j.forecast.growthTrend}

`,B+=`Churn Risk
`,B+=`At-Risk Customers,${j.churnRisk.count}
`,B+=`Churn Rate,${j.churnRisk.rate.toFixed(1)}%
`):o==="prescriptive"&&(B+=`PRESCRIPTIVE ANALYTICS: What Should Be Done?

`,B+=`Promotion Suggestions
`,B+=`Type,Target,Suggestion,Priority
`,j.promotionSuggestions.forEach(E=>{B+=`"${E.type}","${E.target}","${E.suggestion}",${E.priority}
`}),B+=`
Restocking Alerts
`,B+=`Product,Current Stock,Min Stock,Suggested Order,Urgency
`,j.restockingAlerts.forEach(E=>{B+=`"${E.product}",${E.currentStock},${E.minStock},${E.suggestedOrder},${E.urgency}
`}),B+=`
Staff Recommendations
`,B+=`Type,Timeframe,Suggestion,Priority
`,j.staffRecommendations.forEach(E=>{B+=`"${E.type}","${E.timeframe}","${E.suggestion}",${E.priority}
`}));const S=new Blob([B],{type:"text/csv"}),_=URL.createObjectURL(S),k=document.createElement("a");k.href=_,k.download=`analytics-${o}-${n}-${w}.csv`,k.click(),URL.revokeObjectURL(_)};return j?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Business Analytics"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Comprehensive performance insights"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:n,onChange:w=>i(w.target.value),className:"bg-[#1A1A1A] border border-[#2A2A2A] text-white text-sm rounded-lg px-3 py-2 focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsx("button",{onClick:()=>{m(!0),t?.(),setTimeout(()=>m(!1),1e3)},className:"p-2 bg-[#1A1A1A] border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-colors",children:e.jsx(Ps,{className:`h-4 w-4 ${d?"animate-spin":""}`})}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-3 py-2 bg-[var(--color-primary)] text-white text-sm rounded-lg hover:bg-[var(--color-accent)] transition-colors",children:[e.jsx(ka,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})]}),e.jsx("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-1",children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-1",children:[e.jsxs("button",{onClick:()=>c("descriptive"),className:`flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg font-medium transition-all text-sm ${o==="descriptive"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx(ja,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Descriptive"}),e.jsx("span",{className:"sm:hidden",children:"What"})]}),e.jsxs("button",{onClick:()=>c("diagnostic"),className:`flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg font-medium transition-all text-sm ${o==="diagnostic"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx(_S,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Diagnostic"}),e.jsx("span",{className:"sm:hidden",children:"Why"})]}),e.jsxs("button",{onClick:()=>c("predictive"),className:`flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg font-medium transition-all text-sm ${o==="predictive"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx(ES,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Predictive"}),e.jsx("span",{className:"sm:hidden",children:"Will"})]}),e.jsxs("button",{onClick:()=>c("prescriptive"),className:`flex items-center justify-center gap-2 px-3 py-2.5 rounded-lg font-medium transition-all text-sm ${o==="prescriptive"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx(d0,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Prescriptive"}),e.jsx("span",{className:"sm:hidden",children:"Do"})]})]})}),o==="descriptive"&&e.jsx(fT,{analytics:j,formatCurrency:y,formatTime:b}),o==="diagnostic"&&e.jsx(gT,{analytics:j,formatCurrency:y,formatTime:b}),o==="predictive"&&e.jsx(bT,{analytics:j,formatCurrency:y,formatTime:b}),o==="prescriptive"&&e.jsx(vT,{analytics:j,formatCurrency:y,formatTime:b})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-[var(--color-primary)] border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading analytics..."})]})})},fT=({analytics:t,formatCurrency:s,formatTime:n})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx(Su,{icon:as,iconColor:"text-[var(--color-primary)]",value:s(t.revenue.total),label:"Total Revenue",change:t.revenue.change}),e.jsx(Su,{icon:hs,iconColor:"text-gray-400",value:t.customers.unique,label:"Customers",change:t.customers.change}),e.jsx(Su,{icon:ds,iconColor:"text-gray-400",value:t.transactions.count,label:"Transactions",subtext:`Avg: ${s(t.transactions.average)}`,change:t.transactions.change}),e.jsx(Su,{icon:rt,iconColor:"text-gray-400",value:`${t.bookings.completionRate.toFixed(0)}%`,label:"Completion Rate",subtext:`${t.bookings.completed}/${t.bookings.total} bookings`,change:t.bookings.completionChange})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(ys,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Revenue Breakdown"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Services"}),e.jsx("span",{className:"text-white font-semibold",children:s(t.revenue.services)})]}),e.jsx("div",{className:"w-full bg-[#0A0A0A] rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] h-2 rounded-full transition-all duration-500",style:{width:`${t.revenue.services/t.revenue.total*100}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(t.revenue.services/t.revenue.total*100).toFixed(1),"% of total revenue"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Products"}),e.jsx("span",{className:"text-white font-semibold",children:s(t.revenue.products)})]}),e.jsx("div",{className:"w-full bg-[#0A0A0A] rounded-full h-2",children:e.jsx("div",{className:"bg-gray-500 h-2 rounded-full transition-all duration-500",style:{width:`${t.revenue.products/t.revenue.total*100}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(t.revenue.products/t.revenue.total*100).toFixed(1),"% of total revenue"]})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Booking Performance"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Total Bookings"}),e.jsx("span",{className:"text-white font-bold text-xl",children:t.bookings.total})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Completed"}),e.jsx("span",{className:"text-white font-semibold",children:t.bookings.completed})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Completion Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-white font-semibold",children:[t.bookings.completionRate.toFixed(1),"%"]}),t.bookings.completionChange!==0&&e.jsxs("span",{className:`text-xs flex items-center ${t.bookings.completionChange>0?"text-green-400":"text-red-400"}`,children:[t.bookings.completionChange>0?e.jsx(Xg,{className:"h-3 w-3"}):e.jsx(Kg,{className:"h-3 w-3"}),Math.abs(t.bookings.completionChange).toFixed(1),"%"]})]})]})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(c0,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Staff Performance"]}),e.jsx("div",{className:"space-y-2",children:t.barbers.slice(0,5).map((i,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0A0A0A] rounded-lg hover:bg-[#1A1A1A] transition-colors border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${o===0?"bg-[var(--color-primary)]/20 text-[var(--color-primary)]":"bg-[#2A2A2A] text-gray-400"}`,children:e.jsxs("span",{className:"text-sm font-bold",children:["#",o+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:i.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[i.transactions," txn  ",i.completionRate.toFixed(0),"% complete"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-bold",children:s(i.revenue)}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["Avg: ",s(i.avgTransaction)]})]})]},i.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(ys,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Top Services"]}),e.jsx("div",{className:"space-y-3",children:t.services.slice(0,5).map((i,o)=>{const c=t.services[0]?.revenue||1,d=i.revenue/c*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-300 truncate flex-1",children:i.name}),e.jsx("span",{className:"text-white font-semibold ml-2",children:s(i.revenue)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-[#0A0A0A] rounded-full h-1.5",children:e.jsx("div",{className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] h-1.5 rounded-full transition-all",style:{width:`${d}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500 w-8",children:[i.count,"x"]})]})]},i.id)})})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Aa,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Top Products"]}),t.products.length>0?e.jsx("div",{className:"space-y-3",children:t.products.map((i,o)=>{const c=t.products[0]?.revenue||1,d=i.revenue/c*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-300 truncate flex-1",children:i.name}),e.jsx("span",{className:"text-white font-semibold ml-2",children:s(i.revenue)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-[#0A0A0A] rounded-full h-1.5",children:e.jsx("div",{className:"bg-gray-500 h-1.5 rounded-full transition-all",style:{width:`${d}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500 w-8",children:[i.count,"x"]})]})]},o)})}):e.jsx("p",{className:"text-gray-400 text-sm",children:"No product sales this period"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(ds,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Payment Methods Distribution"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(t.paymentMethods).map(([i,o])=>{const c=o/t.transactions.count*100;return e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:o}),e.jsx("p",{className:"text-xs text-gray-400 capitalize mb-1",children:i.replace("_"," ")}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c.toFixed(0),"%"]})]},i)})})]})]}),gT=({analytics:t,formatCurrency:s,formatTime:n})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Nt,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Peak Transaction Hours"]}),e.jsx("div",{className:"space-y-3",children:t.peakHours.map((i,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${o===0?"bg-[var(--color-primary)]/20 text-[var(--color-primary)]":"bg-[#2A2A2A] text-gray-400"}`,children:e.jsxs("span",{className:"text-sm font-bold",children:["#",o+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:n(i.hour)}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[i.transactions," transactions"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-white font-semibold",children:s(i.revenue)})})]},i.hour))}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Schedule more staff during these high-traffic periods"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(rt,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Busiest Days"]}),e.jsx("div",{className:"space-y-3",children:t.busiestDays.map((i,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${o===0?"bg-[var(--color-primary)]/20 text-[var(--color-primary)]":"bg-[#2A2A2A] text-gray-400"}`,children:e.jsxs("span",{className:"text-sm font-bold",children:["#",o+1]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:i.day}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[i.transactions," transactions"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-white font-semibold",children:s(i.revenue)})})]},i.day))}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Optimize inventory and staffing for peak days"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(a0,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Customer Retention Insights"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsxs("p",{className:"text-3xl font-bold text-white mb-1",children:[t.retentionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Retention Rate"})]}),e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:t.repeatCustomers}),e.jsx("p",{className:"text-xs text-gray-400",children:"Repeat Customers"})]}),e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:t.totalCustomersAllTime}),e.jsx("p",{className:"text-xs text-gray-400",children:"Total Customers"})]}),e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:t.avgVisitsPerCustomer.toFixed(1)}),e.jsx("p",{className:"text-xs text-gray-400",children:"Avg Visits/Customer"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-300",children:t.retentionRate>60?e.jsx(e.Fragment,{children:" Strong retention rate indicates customer satisfaction"}):t.retentionRate>40?e.jsx(e.Fragment,{children:" Moderate retention - consider loyalty programs"}):e.jsx(e.Fragment,{children:" Low retention - immediate action needed"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(xs,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Booking Cancellation Rate"]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsxs("p",{className:"text-5xl font-bold text-white mb-2",children:[t.cancellationRate.toFixed(1),"%"]}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:[t.cancelledBookings," out of ",t.bookings.totalAll," bookings"]}),e.jsx("div",{className:"w-full bg-[#0A0A0A] rounded-full h-3 mb-2",children:e.jsx("div",{className:`h-3 rounded-full ${t.cancellationRate>20?"bg-red-500":t.cancellationRate>10?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(t.cancellationRate,100)}%`}})}),e.jsx("p",{className:"text-xs text-gray-500",children:t.cancellationRate>20?" High cancellation rate - investigate causes":t.cancellationRate>10?" Moderate - send reminders":" Low cancellation rate"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Qa,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Daily Performance Pattern"]}),e.jsx("div",{className:"space-y-2",children:t.dayStats.map((i,o)=>{const c=Math.max(...t.dayStats.map(m=>m.transactions)),d=c>0?i.transactions/c*100:0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-300 w-12",children:i.day}),e.jsxs("span",{className:"text-gray-400 text-xs flex-1 text-right mr-2",children:[i.transactions," txn"]})]}),e.jsx("div",{className:"w-full bg-[#0A0A0A] rounded-full h-1.5",children:e.jsx("div",{className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] h-1.5 rounded-full",style:{width:`${d}%`}})})]},o)})})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(z3,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Service-Product Purchase Correlation"]}),Object.keys(t.serviceProductCorrelation).length>0?e.jsx("div",{className:"space-y-3",children:Object.entries(t.serviceProductCorrelation).slice(0,5).map(([i,o])=>{const c=Object.entries(o).sort(([,d],[,m])=>m-d)[0];return c?e.jsx("div",{className:"p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white text-sm font-medium",children:i}),e.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:["Often bought with: ",e.jsx("span",{className:"text-white",children:c[0]})," (",c[1],"x)"]})]}),e.jsx("div",{className:"ml-3",children:e.jsxs("span",{className:"px-2 py-1 bg-[var(--color-primary)]/20 text-[var(--color-primary)] text-xs rounded-full",children:[c[1],"x"]})})]})},i):null})}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:"No service-product correlations found"}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Use these insights to create bundle offers"})]})]}),bT=({analytics:t,formatCurrency:s,formatTime:n})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(wr,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Revenue Forecast"]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:s(t.forecast.dailyAverage)}),e.jsx("p",{className:"text-xs text-gray-400",children:"Daily Average"})]}),e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:s(t.forecast.next7Days)}),e.jsx("p",{className:"text-xs text-gray-400",children:"Next 7 Days"})]}),e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:s(t.forecast.next30Days)}),e.jsx("p",{className:"text-xs text-gray-400",children:"Next 30 Days"})]}),e.jsxs("div",{className:"bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[t.forecast.growthTrend==="Increasing"?e.jsx(wr,{className:"h-5 w-5 text-green-400"}):t.forecast.growthTrend==="Decreasing"?e.jsx(I3,{className:"h-5 w-5 text-red-400"}):e.jsx(TD,{className:"h-5 w-5 text-gray-400"}),e.jsx("p",{className:`text-xl font-bold ${t.forecast.growthTrend==="Increasing"?"text-green-400":t.forecast.growthTrend==="Decreasing"?"text-red-400":"text-gray-400"}`,children:t.forecast.growthTrend})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Growth Trend"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Ea,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Customer Churn Risk"]}),e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-5xl font-bold text-white mb-2",children:t.churnRisk.count}),e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"At-Risk Customers"}),e.jsxs("p",{className:"text-2xl font-bold text-white mb-2",children:[t.churnRisk.rate.toFixed(1),"%"]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Churn Rate"})]}),e.jsx("div",{className:`mt-4 p-3 rounded-lg ${t.churnRisk.rate>20?"bg-red-500/10 border border-red-500/30":t.churnRisk.rate>10?"bg-yellow-500/10 border border-yellow-500/30":"bg-green-500/10 border border-green-500/30"}`,children:e.jsx("p",{className:"text-sm text-gray-300",children:t.churnRisk.rate>20?" High risk - launch win-back campaign":t.churnRisk.rate>10?" Moderate risk - engage inactive customers":" Low churn - maintain current practices"})})]}),e.jsxs("div",{className:"lg:col-span-2 bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(hs,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"High-Risk Customers (Not Seen Recently)"]}),t.churnRisk.customers.length>0?e.jsx("div",{className:"space-y-2",children:t.churnRisk.customers.slice(0,5).map((i,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white text-sm font-medium truncate",children:i.id.length>30?i.id.substring(0,30)+"...":i.id}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[i.frequency," visits  Last seen ",i.daysSinceLastVisit," days ago"]})]}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i.churnRisk==="High"?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:[i.churnRisk," Risk"]})]},o))}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:"No at-risk customers identified"}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Send personalized offers to re-engage these customers"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Aa,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Product Demand Forecast"]}),Object.keys(t.productDemand).length>0?e.jsx("div",{className:"space-y-2",children:Object.values(t.productDemand).slice(0,8).map((i,o)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white text-sm font-medium",children:i.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["Avg: ",i.avgPerWeek.toFixed(1)," per week"]})]}),e.jsxs("div",{className:"text-right ml-3",children:[e.jsxs("p",{className:"text-white text-sm font-semibold",children:[i.forecastNextWeek," units"]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Next week"})]}),e.jsxs("div",{className:"text-right ml-3",children:[e.jsxs("p",{className:"text-white text-sm font-semibold",children:[i.forecastNextMonth," units"]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Next month"})]})]},o))}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:"No product sales data available for forecasting"}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Plan inventory orders based on these predictions"})]}),e.jsx("div",{className:"bg-gradient-to-br from-[var(--color-primary)]/10 to-[var(--color-accent)]/5 border border-[var(--color-primary)]/30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(gS,{className:"h-5 w-5 text-[var(--color-primary)] mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"AI-Powered Predictions"}),e.jsxs("div",{className:"space-y-1.5 text-sm text-gray-300",children:[e.jsxs("p",{children:[" Expected revenue: ",s(t.forecast.next30Days)," in next 30 days"]}),e.jsxs("p",{children:[" Trend: ",t.forecast.growthTrend," pattern detected"]}),e.jsxs("p",{children:[" ",t.churnRisk.count," customers at risk of churning"]}),t.forecast.growthTrend==="Decreasing"&&e.jsx("p",{children:" Suggested action: Increase marketing efforts and launch promotions"}),t.churnRisk.rate>15&&e.jsx("p",{children:" Suggested action: Implement loyalty rewards program"})]})]})]})})]}),vT=({analytics:t,formatCurrency:s,formatTime:n})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Do,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Recommended Promotions"]}),t.promotionSuggestions.length>0?e.jsx("div",{className:"space-y-2",children:t.promotionSuggestions.map((i,o)=>e.jsx("div",{className:"p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg hover:border-[var(--color-primary)]/30 transition-colors",children:e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${i.priority==="High"?"bg-red-500/20 text-red-400":i.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:i.priority}),e.jsx("p",{className:"text-white font-medium text-sm",children:i.type})]}),e.jsxs("p",{className:"text-gray-400 text-xs mb-1",children:["Target: ",e.jsx("span",{className:"text-white",children:i.target})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:i.suggestion}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Expected: ",i.expectedImpact]})]})})},o))}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:"All areas performing well. No immediate promotions needed."})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(Is,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Inventory Restocking Alerts"]}),t.restockingAlerts.length>0?e.jsx("div",{className:"space-y-2",children:t.restockingAlerts.map((i,o)=>e.jsx("div",{className:"p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:e.jsx("div",{className:"flex items-center justify-between gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${i.urgency==="Critical"?"bg-red-500/20 text-red-400":i.urgency==="High"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:i.urgency}),e.jsx("p",{className:"text-white font-medium text-sm",children:i.product})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("span",{className:"text-gray-400",children:["Current: ",e.jsx("span",{className:i.currentStock===0?"text-red-400":"text-white",children:i.currentStock})]}),e.jsxs("span",{className:"text-gray-400",children:["Min: ",e.jsx("span",{className:"text-white",children:i.minStock})]}),e.jsxs("span",{className:"text-gray-400",children:["Suggested Order: ",e.jsxs("span",{className:"text-[var(--color-primary)] font-semibold",children:[i.suggestedOrder," units"]})]})]})]})})},o))}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:" All products are sufficiently stocked"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-4 flex items-center",children:[e.jsx(rt,{className:"h-4 w-4 text-[var(--color-primary)] mr-2"}),"Staff Scheduling Recommendations"]}),t.staffRecommendations.length>0?e.jsx("div",{className:"space-y-2",children:t.staffRecommendations.map((i,o)=>e.jsx("div",{className:"p-3 bg-[#0A0A0A] border border-[#2A2A2A] rounded-lg",children:e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${i.priority==="High"?"bg-red-500/20 text-red-400":i.priority==="Medium"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:i.priority}),e.jsx("p",{className:"text-white font-medium text-sm",children:i.type})]}),e.jsxs("p",{className:"text-gray-400 text-xs mb-1",children:["When: ",e.jsx("span",{className:"text-white",children:i.timeframe})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:i.suggestion}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:i.reason})]})})},o))}):e.jsx("p",{className:"text-gray-400 text-sm text-center py-8",children:" Current staff scheduling is optimal"})]}),e.jsx("div",{className:"bg-gradient-to-br from-[var(--color-primary)]/10 to-[var(--color-accent)]/5 border border-[var(--color-primary)]/30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d0,{className:"h-5 w-5 text-[var(--color-primary)] mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Priority Actions"}),e.jsxs("div",{className:"space-y-1.5 text-sm text-gray-300",children:[t.restockingAlerts.filter(i=>i.urgency==="Critical").length>0&&e.jsxs("p",{children:[" URGENT: Restock ",t.restockingAlerts.filter(i=>i.urgency==="Critical").length," critical items immediately"]}),t.promotionSuggestions.filter(i=>i.priority==="High").length>0&&e.jsxs("p",{children:[" Launch ",t.promotionSuggestions.filter(i=>i.priority==="High").length," high-priority promotions this week"]}),t.staffRecommendations.filter(i=>i.priority==="High").length>0&&e.jsxs("p",{children:[" Optimize staffing for ",t.staffRecommendations.filter(i=>i.priority==="High").length," peak periods"]}),t.churnRisk.count>0&&e.jsxs("p",{children:[" Reach out to ",t.churnRisk.count," at-risk customers with personalized offers"]}),t.restockingAlerts.length===0&&t.promotionSuggestions.length===0&&e.jsx("p",{children:" All systems optimal. Continue monitoring performance metrics."})]})]})]})})]}),Su=({icon:t,iconColor:s,value:n,label:i,subtext:o,change:c})=>e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(t,{className:`h-5 w-5 ${s}`}),c!==void 0&&c!==0&&e.jsxs("div",{className:`flex items-center text-xs ${c>=0?"text-green-400":"text-red-400"}`,children:[c>=0?e.jsx(Xg,{className:"h-3 w-3"}):e.jsx(Kg,{className:"h-3 w-3"}),e.jsxs("span",{children:[Math.abs(c).toFixed(1),"%"]})]})]}),e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:n}),e.jsx("p",{className:"text-xs text-gray-400",children:i}),o&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o})]}),yT=({onRefresh:t,user:s})=>{const[n,i]=C.useState(""),[o,c]=C.useState("all"),[d,m]=C.useState(!1),[h,p]=C.useState(null),[u,f]=C.useState({title:"",description:"",date:"",time:"",location:"",maxAttendees:"",price:"",category:"workshop",status:"upcoming"}),[g,y]=C.useState({}),[b,j]=C.useState(!1),[N,w]=C.useState(""),[B,S]=C.useState(""),[_,k]=C.useState(null),[E,D]=C.useState({}),[F,M]=C.useState(!1),P=s?.role==="super_admin"?me(H.services.events.getAllEvents):s?.branch_id?me(H.services.events.getEventsByBranch,{branch_id:s.branch_id}):[],T=De(H.services.events.createEvent),L=De(H.services.events.updateEvent),X=De(H.services.events.deleteEvent),Z=!P,ne=(oe,de)=>{const ve={...E};switch(oe){case"title":de.trim()?de.trim().length<3?ve.title="Title must be at least 3 characters":de.trim().length>100?ve.title="Title must be less than 100 characters":delete ve.title:ve.title="Event title is required";break;case"description":de.trim()?de.trim().length<10?ve.description="Description must be at least 10 characters":de.trim().length>500?ve.description="Description must be less than 500 characters":delete ve.description:ve.description="Description is required";break;case"date":if(!de)ve.date="Date is required";else{const pe=new Date(de),be=new Date;be.setHours(0,0,0,0),pe<be?ve.date="Event date cannot be in the past":delete ve.date}break;case"time":de?delete ve.time:ve.time="Time is required";break;case"location":de.trim()?de.trim().length<3?ve.location="Location must be at least 3 characters":de.trim().length>200?ve.location="Location must be less than 200 characters":delete ve.location:ve.location="Location is required";break;case"maxAttendees":const Me=parseInt(de);!de||isNaN(Me)?ve.maxAttendees="Valid number of attendees required":Me<1?ve.maxAttendees="Must have at least 1 attendee":Me>1e3?ve.maxAttendees="Maximum 1000 attendees allowed":delete ve.maxAttendees;break;case"price":const Ke=parseFloat(de);de&&(isNaN(Ke)||Ke<0)?ve.price="Price must be a valid positive number":Ke>1e5?ve.price="Price cannot exceed 100,000":delete ve.price;break}return D(ve),Object.keys(ve).length===0},I=()=>{const de=["title","description","date","time","location","maxAttendees"].every(Me=>u[Me]&&u[Me].toString().trim()),ve=Object.keys(E).length===0;M(de&&ve)},O=()=>{Object.keys(u).forEach(de=>{ne(de,u[de])});const oe=Object.keys(E).length>0;return y(E),!oe},G=async oe=>{if(oe.preventDefault(),!!O()){j(!0),w(""),S("");try{const de={title:u.title.trim(),description:u.description.trim(),date:u.date,time:u.time,location:u.location.trim(),maxAttendees:parseInt(u.maxAttendees),price:parseFloat(u.price)||0,category:u.category,status:u.status,branch_id:s.branch_id};if(h){const{branch_id:ve,...Me}=de;await L({id:h._id,...Me}),S("Event updated successfully!")}else await T(de),S("Event created successfully!");setTimeout(()=>S(""),3e3),le(),t?.()}catch(de){console.error("Error saving event:",de);let ve="Failed to save event";de.message?.includes("EVENT_PAST_DATE")?ve="Event date cannot be in the past":de.message?.includes("EVENT_NOT_FOUND")?ve="Event not found":de.message?.includes("network")?ve="Network error. Please check your connection and try again.":de.message?.includes("timeout")?ve="Request timed out. Please try again.":de.message?.includes("unauthorized")?ve="You are not authorized to perform this action":de.message&&(ve=de.message),w(ve)}finally{j(!1)}}},te=oe=>{f({title:oe.title,description:oe.description,date:oe.date,time:oe.time,location:oe.location,maxAttendees:oe.maxAttendees.toString(),price:oe.price.toString(),category:oe.category,status:oe.status}),p(oe),m(!0),w(""),S(""),D({})},Q=async oe=>{k(oe)},ee=async()=>{if(_)try{await X({id:_}),S("Event deleted successfully!"),setTimeout(()=>S(""),3e3),t?.()}catch(oe){console.error("Error deleting event:",oe);let de="Failed to delete event";oe.message?.includes("EVENT_NOT_FOUND")?de="Event not found":oe.message?.includes("network")?de="Network error. Please check your connection and try again.":oe.message?.includes("unauthorized")?de="You are not authorized to delete this event":oe.message&&(de=oe.message),w(de)}finally{k(null)}},le=()=>{m(!1),p(null),f({title:"",description:"",date:"",time:"",location:"",maxAttendees:"",price:"",category:"workshop",status:"upcoming"}),y({}),D({}),w(""),S(""),M(!1)},R=()=>d?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:le}),e.jsxs("div",{className:"relative w-full max-w-2xl transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:h?"Edit Event":"Create New Event"}),e.jsx("button",{onClick:le,className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:G,className:"space-y-6",children:[N&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("p",{className:"text-red-400 font-medium",children:N})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Event Title *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u.title,onChange:oe=>{f(de=>({...de,title:oe.target.value})),ne("title",oe.target.value)},className:`w-full bg-[#1A1A1A] border text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${E.title?"border-red-500":u.title&&!E.title?"border-green-500":"border-[#2A2A2A]"}`,placeholder:"Enter event title"}),u.title&&!E.title&&e.jsx(Je,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-green-400"})]}),E.title&&e.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),E.title]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:[u.title.length,"/100 characters"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:u.description,onChange:oe=>{f(de=>({...de,description:oe.target.value})),ne("description",oe.target.value)},rows:3,className:`w-full bg-[#1A1A1A] border text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent resize-none ${E.description?"border-red-500":u.description&&!E.description?"border-green-500":"border-[#2A2A2A]"}`,placeholder:"Describe the event"}),u.description&&!E.description&&e.jsx(Je,{className:"absolute right-3 top-3 h-4 w-4 text-green-400"})]}),E.description&&e.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),E.description]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:[u.description.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:u.date,onChange:oe=>{f(de=>({...de,date:oe.target.value})),ne("date",oe.target.value)},min:new Date().toISOString().split("T")[0],className:`w-full bg-[#1A1A1A] border text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${E.date?"border-red-500":u.date&&!E.date?"border-green-500":"border-[#2A2A2A]"}`}),u.date&&!E.date&&e.jsx(Je,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-green-400"})]}),E.date&&e.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),E.date]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Time *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"time",value:u.time,onChange:oe=>{f(de=>({...de,time:oe.target.value})),ne("time",oe.target.value)},className:`w-full bg-[#1A1A1A] border text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${E.time?"border-red-500":u.time&&!E.time?"border-green-500":"border-[#2A2A2A]"}`}),u.time&&!E.time&&e.jsx(Je,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-green-400"})]}),E.time&&e.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),E.time]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u.location,onChange:oe=>{f(de=>({...de,location:oe.target.value})),ne("location",oe.target.value)},className:`w-full bg-[#1A1A1A] border text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${E.location?"border-red-500":u.location&&!E.location?"border-green-500":"border-[#2A2A2A]"}`,placeholder:"Event location"}),u.location&&!E.location&&e.jsx(Je,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-green-400"})]}),E.location&&e.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),E.location]}),e.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:[u.location.length,"/200 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Attendees *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:u.maxAttendees,onChange:oe=>{f(de=>({...de,maxAttendees:oe.target.value})),ne("maxAttendees",oe.target.value)},min:"1",max:"1000",className:`w-full bg-[#1A1A1A] border text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${E.maxAttendees?"border-red-500":u.maxAttendees&&!E.maxAttendees?"border-green-500":"border-[#2A2A2A]"}`,placeholder:"Maximum attendees"}),u.maxAttendees&&!E.maxAttendees&&e.jsx(Je,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-green-400"})]}),E.maxAttendees&&e.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),E.maxAttendees]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Price ()"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:u.price,onChange:oe=>{f(de=>({...de,price:oe.target.value})),ne("price",oe.target.value)},min:"0",max:"100000",step:"0.01",className:`w-full bg-[#1A1A1A] border text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent ${E.price?"border-red-500":u.price&&!E.price?"border-green-500":"border-[#2A2A2A]"}`,placeholder:"0.00 (Free event)"}),u.price&&!E.price&&e.jsx(Je,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-green-400"})]}),E.price&&e.jsxs("p",{className:"mt-1 text-sm text-red-400 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),E.price]}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Enter 0 for free events"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:u.category,onChange:oe=>f(de=>({...de,category:oe.target.value})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"workshop",children:"Workshop"}),e.jsx("option",{value:"celebration",children:"Celebration"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"promotion",children:"Promotion"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:u.status,onChange:oe=>f(de=>({...de,status:oe.target.value})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:le,disabled:b,className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!F,className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4 mr-2 animate-spin inline"}),h?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-4 h-4 mr-2 inline"}),h?"Update Event":"Create Event"]})})]})]})})]})]})}),document.body):null,q=()=>_?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>k(null)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Delete Event"}),e.jsx("button",{onClick:()=>k(null),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(js,{className:"w-8 h-8 text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Delete Event"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this event? This action cannot be undone."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>k(null),className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200",children:"Delete Event"})]})]})})]})]})}),document.body):null;C.useEffect(()=>{I()},[u,E]),C.useEffect(()=>{if(B){const oe=setTimeout(()=>S(""),3e3);return()=>clearTimeout(oe)}},[B]);const J=oe=>{switch(oe){case"upcoming":return{label:"Upcoming",bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"};case"ongoing":return{label:"Ongoing",bg:"bg-green-50",text:"text-green-700",border:"border-green-200"};case"completed":return{label:"Completed",bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"};case"cancelled":return{label:"Cancelled",bg:"bg-red-50",text:"text-red-700",border:"border-red-200"};default:return{label:"Unknown",bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"}}},$=oe=>{switch(oe){case"workshop":return"";case"celebration":return"";case"training":return"";case"promotion":return"";default:return""}},Y=P?P.filter(oe=>{const de=oe.title.toLowerCase().includes(n.toLowerCase())||oe.description.toLowerCase().includes(n.toLowerCase()),ve=o==="all"||oe.status===o;return de&&ve}):[],xe={total:P?.length||0,upcoming:P?.filter(oe=>oe.status==="upcoming").length||0,completed:P?.filter(oe=>oe.status==="completed").length||0,totalAttendees:P?.reduce((oe,de)=>oe+de.currentAttendees,0)||0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Events Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Organize and manage barbershop events and workshops"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>t?.(),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-colors text-sm",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"New Event"})]})]})]}),B&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Je,{className:"h-5 w-5 text-green-400 mr-2"}),e.jsx("p",{className:"text-green-800 font-medium",children:B})]})}),N&&e.jsx(x0,{error:N,onClose:()=>w(""),variant:"inline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Events"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:xe.total})]}),e.jsx(rt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:xe.upcoming})]}),e.jsx(Nt,{className:"h-8 w-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:xe.completed})]}),e.jsx(rt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Attendees"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:xe.totalAttendees})]}),e.jsx(hs,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:n,onChange:oe=>i(oe.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:o,onChange:oe=>c(oe.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})})}),Z?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(oe=>e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-[#444444] rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-3 bg-[#444444] rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-[#444444] rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-8 bg-[#444444] rounded w-1/3"})]})},oe))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Y.map(oe=>{const de=J(oe.status),ve=oe.currentAttendees/oe.maxAttendees*100;return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm hover:shadow-md transition-shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:$(oe.category)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-lg",children:oe.title}),e.jsx("p",{className:"text-sm text-gray-400 capitalize",children:oe.category})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${de.bg} ${de.text} ${de.border}`,children:de.label})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:oe.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),new Date(oe.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Nt,{className:"h-4 w-4 mr-2"}),new Date(`1970-01-01T${oe.time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(yi,{className:"h-4 w-4 mr-2"}),oe.location]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),oe.currentAttendees,"/",oe.maxAttendees," attendees"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsx("span",{children:"Attendance"}),e.jsxs("span",{children:[Math.round(ve),"%"]})]}),e.jsx("div",{className:"w-full bg-[#444444] rounded-full h-2",children:e.jsx("div",{className:"bg-[var(--color-primary)] h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(ve,100)}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-lg font-bold text-[var(--color-primary)]",children:oe.price===0?"Free":`${oe.price.toLocaleString()}`}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>te(oe),className:"p-2 text-gray-400 hover:text-[var(--color-primary)] hover:bg-[var(--color-primary)]/20 rounded-lg transition-colors",title:"Edit Event",children:e.jsx(sa,{className:"h-4 w-4"})}),(s?.role==="branch_admin"||s?.role==="super_admin")&&e.jsx("button",{onClick:()=>Q(oe._id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/20 rounded-lg transition-colors",title:"Delete Event",children:e.jsx(js,{className:"h-4 w-4"})})]})]})]},oe._id)})}),Y.length===0&&!Z&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rt,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No events found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n||o!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first event."}),!n&&o==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700",children:[e.jsx(cs,{className:"-ml-1 mr-2 h-4 w-4"}),"New Event"]})})]}),R(),q()]})},jT=({imageUrl:t,imageStorageId:s,productName:n,className:i})=>{const o=me(s?H.services.products.getImageUrl:void 0,s?{storageId:s}:void 0),[c,d]=C.useState(!1),m=t||o;return c||!m?e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400 w-full h-full",children:[e.jsx(Aa,{className:"w-16 h-16 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"No Image"})]}):e.jsx("img",{src:m,alt:n,className:i,onError:()=>d(!0),onLoad:()=>d(!1)})},NT=({onRefresh:t,user:s})=>{const[n,i]=C.useState(""),[o,c]=C.useState("all"),[d,m]=C.useState("all"),[h,p]=C.useState(!1),[u,f]=C.useState(null),[g,y]=C.useState({name:"",description:"",price:"",cost:"",category:"hair-care",brand:"",sku:"",stock:"",minStock:"",imageStorageId:"",status:"active"}),[b,j]=C.useState({}),[N,w]=C.useState(!1),B=me(H.services.products.getAllProducts)||[],S=De(H.services.products.createProduct),_=De(H.services.products.updateProduct),k=De(H.services.products.deleteProduct),E=De(H.services.products.generateUploadUrl);De(H.services.products.deleteImage);const[D,F]=C.useState(null),[M,P]=C.useState(""),[T,L]=C.useState(!1),X=C.useRef(null),Z=!B,ne=$=>{const Y=$.target.files?.[0];if(Y){if(Y.size>5*1024*1024){j(oe=>({...oe,image:"Image size must be less than 5MB"}));return}if(!Y.type.startsWith("image/")){j(oe=>({...oe,image:"Please select a valid image file"}));return}F(Y),j(oe=>({...oe,image:""}));const xe=new FileReader;xe.onload=oe=>{oe.target&&oe.target.result&&typeof oe.target.result=="string"?(console.log("Setting image preview:",oe.target.result.substring(0,50)+"..."),P(oe.target.result)):(console.error("Invalid FileReader result:",oe.target?.result),j(de=>({...de,image:"Failed to process image file"})))},xe.onerror=oe=>{console.error("FileReader error:",oe),j(de=>({...de,image:"Failed to read image file"}))},xe.readAsDataURL(Y)}},I=async()=>{if(!D)return null;try{L(!0);const $=await E(),Y=await fetch($,{method:"POST",headers:{"Content-Type":D.type},body:D});if(!Y.ok)throw new Error("Failed to upload image");const{storageId:xe}=await Y.json();return xe}catch($){return console.error("Error uploading image:",$),j(Y=>({...Y,image:"Failed to upload image"})),null}finally{L(!1)}},O=()=>{F(null),P(""),y($=>({...$,imageStorageId:""})),X.current&&(X.current.value="")},G=()=>{const $={};return g.name.trim()||($.name="Product name is required"),g.description.trim()||($.description="Description is required"),(!g.price||g.price<=0)&&($.price="Valid price is required"),(!g.cost||g.cost<0)&&($.cost="Valid cost is required"),g.brand.trim()||($.brand="Brand is required"),g.sku.trim()||($.sku="SKU is required"),(!g.stock||g.stock<0)&&($.stock="Valid stock quantity is required"),(!g.minStock||g.minStock<0)&&($.minStock="Valid minimum stock is required"),g.price&&g.cost&&parseFloat(g.price)<=parseFloat(g.cost)&&($.price="Price must be higher than cost"),B.find(xe=>xe.sku.toLowerCase()===g.sku.toLowerCase()&&(!u||xe._id!==u._id))&&($.sku="SKU already exists"),j($),Object.keys($).length===0},te=async $=>{if($.preventDefault(),!!G()){w(!0);try{let Y=g.imageStorageId;if(D&&(Y=await I(),!Y))return;const xe={name:g.name,description:g.description,price:parseFloat(g.price),cost:parseFloat(g.cost),category:g.category,brand:g.brand,sku:g.sku,stock:parseInt(g.stock),minStock:parseInt(g.minStock),imageStorageId:Y||void 0,status:g.status};u?await _({id:u._id,...xe}):await S(xe),le(),t?.()}catch(Y){console.error("Error saving product:",Y),j({submit:Y.message||"Failed to save product"})}finally{w(!1)}}},Q=$=>{y({name:$.name,description:$.description,price:$.price.toString(),cost:$.cost.toString(),category:$.category,brand:$.brand,sku:$.sku,stock:$.stock.toString(),minStock:$.minStock.toString(),imageStorageId:$.imageStorageId||"",status:$.status}),$.imageUrl&&P($.imageUrl),f($),p(!0)},ee=async $=>{if(confirm("Are you sure you want to delete this product?"))try{await k({id:$}),t?.()}catch(Y){console.error("Error deleting product:",Y)}},le=()=>{p(!1),f(null),y({name:"",description:"",price:"",cost:"",category:"hair-care",brand:"",sku:"",stock:"",minStock:"",imageStorageId:"",status:"active"}),j({}),F(null),P(""),L(!1),X.current&&(X.current.value="")},R=$=>$.stock===0?{label:"Out of Stock",bg:"bg-red-50",text:"text-red-700",border:"border-red-200"}:$.stock<=$.minStock?{label:"Low Stock",bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200"}:{label:"In Stock",bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},q=B.filter($=>{const Y=$.name.toLowerCase().includes(n.toLowerCase())||$.brand.toLowerCase().includes(n.toLowerCase())||$.sku.toLowerCase().includes(n.toLowerCase()),xe=o==="all"||$.category===o,oe=d==="all"||d==="in-stock"&&$.stock>$.minStock||d==="low-stock"&&$.stock>0&&$.stock<=$.minStock||d==="out-of-stock"&&$.stock===0;return Y&&xe&&oe}),J={total:B.length,inStock:B.filter($=>$.stock>$.minStock).length,lowStock:B.filter($=>$.stock>0&&$.stock<=$.minStock).length,outOfStock:B.filter($=>$.stock===0).length,totalValue:B.reduce(($,Y)=>$+Y.price*Y.stock,0),totalSold:B.reduce(($,Y)=>$+Y.soldThisMonth,0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Products & Inventory"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your barbershop products and track inventory"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>t?.(),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(Ps,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-colors text-sm",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"New Product"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:J.total})]}),e.jsx(Aa,{className:"h-8 w-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"In Stock"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:J.inStock})]}),e.jsx(wr,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:J.lowStock})]}),e.jsx(Xe,{className:"h-8 w-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:J.outOfStock})]}),e.jsx(I3,{className:"h-8 w-8 text-red-400"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Inventory Value"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:["",J.totalValue.toLocaleString()]})]}),e.jsx(as,{className:"h-8 w-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Sold This Month"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:J.totalSold})]}),e.jsx(z3,{className:"h-8 w-8 text-[var(--color-primary)]"})]})})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:n,onChange:$=>i($.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:o,onChange:$=>c($.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"hair-care",children:"Hair Care"}),e.jsx("option",{value:"beard-care",children:"Beard Care"}),e.jsx("option",{value:"shaving",children:"Shaving"}),e.jsx("option",{value:"tools",children:"Tools"}),e.jsx("option",{value:"accessories",children:"Accessories"})]})]}),e.jsxs("select",{value:d,onChange:$=>m($.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Stock Levels"}),e.jsx("option",{value:"in-stock",children:"In Stock"}),e.jsx("option",{value:"low-stock",children:"Low Stock"}),e.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]})})}),Z?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6,7,8].map($=>e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-32 bg-[#444444] rounded mb-4"}),e.jsx("div",{className:"h-4 bg-[#444444] rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-[#444444] rounded w-full mb-2"}),e.jsx("div",{className:"h-6 bg-[#444444] rounded w-1/2"})]})},$))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:q.map($=>{const Y=R($),xe=(($.price-$.cost)/$.price*100).toFixed(1);return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[e.jsxs("div",{className:"h-48 bg-gray-100 flex items-center justify-center relative",children:[$.imageUrl||$.imageStorageId?e.jsx(jT,{imageUrl:$.imageUrl,imageStorageId:$.imageStorageId,productName:$.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[e.jsx(Aa,{className:"w-16 h-16 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"No Image"})]}),e.jsx("span",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium border ${Y.bg} ${Y.text} ${Y.border}`,children:Y.label})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-sm",children:$.name}),e.jsx("p",{className:"text-xs text-gray-400",children:$.brand})]})}),e.jsx("p",{className:"text-gray-400 text-xs mb-3 line-clamp-2",children:$.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"SKU:"}),e.jsx("span",{className:"font-mono text-gray-300",children:$.sku})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Stock:"}),e.jsxs("span",{className:`font-semibold ${$.stock===0?"text-red-400":$.stock<=$.minStock?"text-yellow-400":"text-green-400"}`,children:[$.stock," units"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Sold:"}),e.jsxs("span",{className:"text-gray-300",children:[$.soldThisMonth," this month"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[e.jsx("span",{children:"Stock Level"}),e.jsxs("span",{children:[Math.round($.stock/($.minStock*2)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-[#444444] rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${$.stock===0?"bg-red-500":$.stock<=$.minStock?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min($.stock/($.minStock*2)*100,100)}%`}})})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-[var(--color-primary)]",children:["",$.price.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Cost: ",$.cost.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-400",children:["+",xe,"% margin"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:$.category.replace("-"," ")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Q($),className:"p-2 text-gray-400 hover:text-[var(--color-primary)] hover:bg-[var(--color-primary)]/20 rounded-lg transition-colors",title:"Edit Product",children:e.jsx(sa,{className:"h-4 w-4"})}),(s?.role==="branch_admin"||s?.role==="super_admin")&&e.jsx("button",{onClick:()=>ee($._id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/20 rounded-lg transition-colors",title:"Delete Product",children:e.jsx(js,{className:"h-4 w-4"})})]})]})]})]},$._id)})}),q.length===0&&!Z&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Aa,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n||o!=="all"||d!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first product."}),!n&&o==="all"&&d==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700",children:[e.jsx(cs,{className:"-ml-1 mr-2 h-4 w-4"}),"New Product"]})})]}),e.jsx(ns,{isOpen:h,onClose:le,title:u?"Edit Product":"Add New Product",size:"xl",children:e.jsxs("form",{onSubmit:te,className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-6 border border-orange-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(da,{className:"w-5 h-5 mr-2 text-orange-600"}),"Product Image"]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"relative",children:M?e.jsxs("div",{className:"relative group bg-white rounded-xl overflow-hidden",children:[e.jsx("img",{src:M,alt:"Product preview",className:"w-full h-48 object-cover border-2 border-orange-200 shadow-lg",style:{display:"block",maxWidth:"100%",height:"192px"},onError:$=>{console.error("Image failed to load:",M),console.error("Image error event:",$),P(""),j(Y=>({...Y,image:"Failed to load image. Please try a different image."}))},onLoad:$=>{console.log("Image loaded successfully:",$.target.src.substring(0,50)+"..."),j(Y=>({...Y,image:""}))}}),e.jsx("div",{className:"absolute inset-0 bg-transparent group-hover:bg-black group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:O,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:e.jsx(Ze,{className:"w-4 h-4"})})})]}):e.jsxs("div",{className:"w-full h-48 border-2 border-dashed border-orange-300 rounded-xl flex flex-col items-center justify-center bg-white/50 hover:bg-white/80 transition-colors duration-200",children:[e.jsx(ji,{className:"w-12 h-12 text-orange-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]})})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{ref:X,type:"file",accept:"image/*",onChange:ne,className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>X.current?.click(),disabled:T,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:T?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ji,{className:"w-4 h-4"}),e.jsx("span",{children:"Choose Image"})]})})]}),b.image&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.image]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Product Name *"}),e.jsx("input",{type:"text",value:g.name,onChange:$=>y(Y=>({...Y,name:$.target.value})),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${b.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"Enter product name"}),b.name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Description *"}),e.jsx("textarea",{value:g.description,onChange:$=>y(Y=>({...Y,description:$.target.value})),rows:4,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 resize-none ${b.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"Describe the product features and benefits"}),b.description&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.description]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Category"}),e.jsxs("select",{value:g.category,onChange:$=>y(Y=>({...Y,category:$.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 hover:border-orange-300",children:[e.jsx("option",{value:"hair-care",children:"Hair Care"}),e.jsx("option",{value:"beard-care",children:"Beard Care"}),e.jsx("option",{value:"shaving",children:"Shaving"}),e.jsx("option",{value:"tools",children:"Tools"}),e.jsx("option",{value:"accessories",children:"Accessories"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Brand *"}),e.jsx("input",{type:"text",value:g.brand,onChange:$=>y(Y=>({...Y,brand:$.target.value})),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${b.brand?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"Product brand"}),b.brand&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.brand]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Selling Price () *"}),e.jsx("input",{type:"number",value:g.price,onChange:$=>y(Y=>({...Y,price:$.target.value})),min:"0",step:"0.01",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${b.price?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0.00"}),b.price&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.price]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Cost Price () *"}),e.jsx("input",{type:"number",value:g.cost,onChange:$=>y(Y=>({...Y,cost:$.target.value})),min:"0",step:"0.01",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${b.cost?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0.00"}),b.cost&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.cost]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"SKU *"}),e.jsx("input",{type:"text",value:g.sku,onChange:$=>y(Y=>({...Y,sku:$.target.value.toUpperCase()})),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono transition-all duration-200 ${b.sku?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"PROD-001"}),b.sku&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.sku]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Current Stock *"}),e.jsx("input",{type:"number",value:g.stock,onChange:$=>y(Y=>({...Y,stock:$.target.value})),min:"0",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${b.stock?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0"}),b.stock&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.stock]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Minimum Stock *"}),e.jsx("input",{type:"number",value:g.minStock,onChange:$=>y(Y=>({...Y,minStock:$.target.value})),min:"0",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${b.minStock?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0"}),b.minStock&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),b.minStock]})]})]})]})]}),g.price&&g.cost&&parseFloat(g.price)>parseFloat(g.cost)&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-xl",children:e.jsx(ja,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-green-800",children:["Profit Margin: ",((parseFloat(g.price)-parseFloat(g.cost))/parseFloat(g.price)*100).toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-green-700",children:["Profit per unit: ",(parseFloat(g.price)-parseFloat(g.cost)).toFixed(2)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",(parseFloat(g.price)-parseFloat(g.cost)).toFixed(2)]}),e.jsx("div",{className:"text-sm text-green-600",children:"per unit"})]})]})}),b.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),b.submit]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:le,disabled:N||T,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N||T,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-bold rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 shadow-lg hover:shadow-xl",children:N||T?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:T?"Uploading...":u?"Updating...":"Adding..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-5 h-5"}),e.jsx("span",{children:u?"Update Product":"Add Product"})]})})]})]})})]})},wT=({onRefresh:t})=>{const{user:s}=Dt(),[n,i]=C.useState(""),[o,c]=C.useState("all"),[d,m]=C.useState(!1),[h,p]=C.useState(!1),[u,f]=C.useState(!1),[g,y]=C.useState(""),b=me(H.services.notifications.getUserNotifications,s?._id?{userId:s._id,limit:50}:"skip"),j=me(H.services.notifications.getUnreadCount,s?._id?{userId:s._id}:"skip"),N=De(H.services.notifications.markAsRead),w=De(H.services.notifications.markAllAsRead),B=De(H.services.notifications.deleteNotification),S=De(H.services.notifications.createNotification),_=b===void 0||j===void 0,k={urgent:{container:"bg-red-500/10 border-red-500/30 text-red-300",accent:"text-red-400"},high:{container:"bg-orange-500/10 border-orange-500/30 text-orange-300",accent:"text-orange-400"},medium:{container:"bg-blue-500/10 border-blue-500/30 text-blue-300",accent:"text-blue-400"},low:{container:"bg-slate-500/10 border-slate-500/30 text-slate-300",accent:"text-slate-300"}},E=(O="low")=>k[O]||k.low,D=C.useMemo(()=>b?b.filter(O=>{const G=O.title.toLowerCase().includes(n.toLowerCase())||O.message.toLowerCase().includes(n.toLowerCase()),te=o==="all"||O.type===o,Q=!h||!O.is_read;return G&&te&&Q}):[],[b,n,o,h]),F=C.useMemo(()=>{const O=b?.length||0,G=b?.filter(Q=>!Q.is_read).length||0,te=(b||[]).reduce((Q,ee)=>(Q[ee.type]=(Q[ee.type]||0)+1,Q),{});return{total:O,unread:G,booking:te.booking||0,payment:te.payment||0,system:te.system||0,promotion:te.promotion||0,reminder:te.reminder||0,alert:te.alert||0}},[b]),M=async O=>{if(s?._id)try{await N({notificationId:O,userId:s._id}),t?.()}catch(G){y(G.message||"Failed to mark notification as read")}},P=async()=>{if(s?._id)try{f(!0),await w({userId:s._id}),t?.()}catch(O){y(O.message||"Failed to mark all notifications as read")}finally{f(!1)}},T=async O=>{if(s?._id)try{await B({notificationId:O,userId:s._id}),t?.()}catch(G){y(G.message||"Failed to delete notification")}},L=(O="")=>O==="super_admin"?"admin":O==="customer"?"customer":"staff",X=async({title:O,message:G,type:te,priority:Q})=>{if(!s?._id)return{success:!1,error:"You must be logged in to send notifications."};f(!0);try{return await S({title:O,message:G,type:te,priority:Q,recipient_id:s._id,recipient_type:L(s.role),sender_id:s._id}),t?.(),m(!1),{success:!0}}catch(ee){return console.error("Failed to create notification:",ee),{success:!1,error:ee.message||"Failed to create notification"}}finally{f(!1)}},Z=O=>{switch(O){case"booking":return e.jsx(rt,{className:"w-4 h-4"});case"payment":return e.jsx(as,{className:"w-4 h-4"});case"system":return e.jsx(Lr,{className:"w-4 h-4"});case"promotion":return e.jsx(Qt,{className:"w-4 h-4"});case"reminder":return e.jsx(Nt,{className:"w-4 h-4"});case"alert":return e.jsx(Xe,{className:"w-4 h-4"});default:return e.jsx(Ir,{className:"w-4 h-4"})}},ne=O=>new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});if(!s)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"Please log in to view notifications"})});const I=j||F.unread;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-[#2A2A2A] border border-[#444444]/50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-[var(--color-primary)]/10 border border-[var(--color-primary)]/30",children:e.jsx(Is,{className:"w-5 h-5 text-[var(--color-primary)]"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Notification Center"}),I>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-red-500/20 text-red-300",children:[I," unread"]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Stay updated with real-time alerts"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-[var(--color-primary)] text-white text-sm font-medium hover:bg-[var(--color-primary)]/90 transition-colors",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Compose Alert"})]}),e.jsxs("button",{onClick:P,disabled:u||!I,className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-[#444444] text-gray-300 text-sm font-medium hover:bg-[#333333] transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[u?e.jsx(So,{className:"w-4 h-4 animate-spin"}):e.jsx(aj,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark all read"})]})]})]})}),g&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/40 rounded-2xl px-5 py-4 flex items-start gap-3 text-red-200",children:[e.jsx(Xe,{className:"w-5 h-5 mt-0.5"}),e.jsx("div",{className:"flex-1 text-sm font-medium",children:g}),e.jsx("button",{onClick:()=>y(""),className:"text-red-200/70 hover:text-red-100 transition-colors","aria-label":"Dismiss error",children:e.jsx(Ze,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{label:"TOTAL",value:F.total,description:"NOTIFICATIONS RECEIVED",icon:e.jsx(Is,{className:"w-5 h-5"}),color:"text-gray-400",bg:"bg-gradient-to-br from-[#2A2A2A] to-[#333333]",border:"border-[#444444]/50"},{label:"UNREAD",value:F.unread,description:"REQUIRES ATTENTION",icon:e.jsx(Xe,{className:"w-5 h-5"}),color:"text-[var(--color-primary)]",bg:"bg-gradient-to-br from-red-900/20 to-red-800/10",border:"border-red-500/30"},{label:"BOOKINGS",value:F.booking,description:"SCHEDULING ALERTS",icon:e.jsx(rt,{className:"w-5 h-5"}),color:"text-blue-400",bg:"bg-gradient-to-br from-blue-900/20 to-blue-800/10",border:"border-blue-500/30"},{label:"PAYMENTS",value:F.payment,description:"BILLING UPDATES",icon:e.jsx(as,{className:"w-5 h-5"}),color:"text-green-400",bg:"bg-gradient-to-br from-green-900/20 to-green-800/10",border:"border-green-500/30"}].map(({label:O,value:G,description:te,icon:Q,color:ee,bg:le,border:R})=>e.jsxs("div",{className:`rounded-xl border ${R} ${le} p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-xs text-gray-400 font-semibold tracking-wider",children:O}),e.jsx("div",{className:ee,children:Q})]}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:G}),e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:te})]},O))}),e.jsx("div",{className:"bg-[#2A2A2A] border border-[#444444]/50 rounded-xl p-4",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:n,onChange:O=>i(O.target.value),className:"w-full h-10 pl-10 pr-4 rounded-lg bg-[#1A1A1A] border border-[#444444] text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-[var(--color-primary)] text-sm"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:[{value:"all",label:"All",icon:e.jsx(Is,{className:"w-4 h-4"})},{value:"booking",label:"Bookings",icon:e.jsx(rt,{className:"w-4 h-4"})},{value:"payment",label:"Payments",icon:e.jsx(as,{className:"w-4 h-4"})},{value:"system",label:"System",icon:e.jsx(Lr,{className:"w-4 h-4"})},{value:"promotion",label:"Promos",icon:e.jsx(Qt,{className:"w-4 h-4"})},{value:"reminder",label:"Reminders",icon:e.jsx(Nt,{className:"w-4 h-4"})},{value:"alert",label:"Alerts",icon:e.jsx(Xe,{className:"w-4 h-4"})}].map(O=>{const G=o===O.value;return e.jsxs("button",{onClick:()=>c(O.value),type:"button",className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${G?"bg-[var(--color-primary)] text-white":"bg-[#1A1A1A] text-gray-400 hover:text-gray-200 border border-[#444444]"}`,children:[O.icon,e.jsx("span",{children:O.label})]},O.value)})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-300 font-medium",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:O=>p(O.target.checked),className:"w-4 h-4 rounded border-[#444444] bg-[#1A1A1A] text-[var(--color-primary)] focus:ring-[var(--color-primary)]"}),"Show unread only"]}),e.jsx("button",{onClick:t,className:"px-3 py-1.5 rounded-lg border border-[#444444] text-xs text-gray-300 hover:bg-[#333333] transition-colors",children:"Refresh feed"})]})]})}),e.jsx("div",{className:"bg-[#2A2A2A] border border-[#444444]/50 rounded-xl overflow-hidden",children:_?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 text-gray-400 text-sm",children:[e.jsx(So,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading notifications"})]})}):D.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-[#1A1A1A] border border-[#444444] flex items-center justify-center mb-3",children:e.jsx(lS,{className:"w-6 h-6 text-gray-500"})}),e.jsx("h3",{className:"text-base font-semibold text-white mb-1",children:"No notifications found"}),e.jsx("p",{className:"text-sm text-gray-500",children:h?"All notifications are read":"You're all caught up!"})]}):e.jsx("div",{className:"divide-y divide-[#444444]/30",children:D.map(O=>{const G=E(O.priority),te=!O.is_read;return e.jsxs("div",{className:`px-4 py-4 hover:bg-[#333333]/50 transition-colors ${te?"bg-[#2A2A2A] border-l-2 border-l-[var(--color-primary)]":""}`,children:[te&&e.jsx("div",{className:"absolute top-4 right-4 h-2 w-2 rounded-full bg-[var(--color-primary)]","aria-hidden":"true"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg border ${G.container}`,children:Z(O.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:O.title}),e.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full border uppercase ${G.container}`,children:O.priority})]}),e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:O.message}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Nt,{className:"w-3 h-3"}),ne(O.createdAt)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ir,{className:"w-3 h-3"}),O.type]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Is,{className:"w-3 h-3"}),te?"Unread":"Read"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[!O.is_read&&e.jsx("button",{onClick:()=>M(O._id),className:"p-2 rounded-lg bg-[var(--color-primary)]/20 text-[var(--color-primary)] hover:bg-[var(--color-primary)]/30 transition-colors",title:"Mark read",children:e.jsx(aj,{className:"w-4 h-4"})}),(s?.role==="branch_admin"||s?.role==="super_admin")&&e.jsx("button",{onClick:()=>T(O._id),className:"p-2 rounded-lg border border-red-500/30 text-red-300 hover:bg-red-500/10 transition-colors",title:"Delete",children:e.jsx(js,{className:"w-4 h-4"})})]})]})]},O._id)})})}),e.jsx(AT,{isOpen:d,onClose:()=>m(!1),onSubmit:X,isSubmitting:u})]})},AT=({isOpen:t,onClose:s,onSubmit:n,isSubmitting:i})=>{const[o,c]=C.useState(""),[d,m]=C.useState(""),[h,p]=C.useState("system"),[u,f]=C.useState("medium"),[g,y]=C.useState(""),b=()=>{c(""),m(""),p("system"),f("medium"),y("")},j=()=>{b(),s()},N=async w=>{if(w.preventDefault(),!o.trim()||!d.trim()){y("Title and message are required");return}y("");const B=await n({title:o.trim(),message:d.trim(),type:h,priority:u});if(!B?.success){y(B?.error||"Unable to create notification");return}b()};return e.jsx(ns,{isOpen:t,onClose:j,title:"Compose Notification",variant:"dark",size:"lg",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[g&&e.jsx("div",{className:"rounded-xl border border-red-500/40 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:g}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"notification-title",className:"text-sm font-semibold text-gray-300 uppercase tracking-[0.18em]",children:"Title"}),e.jsx("input",{id:"notification-title",type:"text",value:o,onChange:w=>c(w.target.value),placeholder:"e.g. Payment processed successfully",className:"w-full h-11 rounded-xl bg-[#121212] border border-[#2F2F2F] text-gray-100 placeholder-gray-500 px-4 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/60"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"notification-message",className:"text-sm font-semibold text-gray-300 uppercase tracking-[0.18em]",children:"Message"}),e.jsx("textarea",{id:"notification-message",value:d,onChange:w=>m(w.target.value),placeholder:"Write a short message for the recipient",rows:4,className:"w-full rounded-xl bg-[#121212] border border-[#2F2F2F] text-gray-100 placeholder-gray-500 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/60 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 uppercase tracking-[0.18em]",children:"Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"system",label:"System",icon:e.jsx(Lr,{className:"w-4 h-4"})},{value:"booking",label:"Booking",icon:e.jsx(rt,{className:"w-4 h-4"})},{value:"payment",label:"Payment",icon:e.jsx(as,{className:"w-4 h-4"})},{value:"promotion",label:"Promotion",icon:e.jsx(Qt,{className:"w-4 h-4"})},{value:"reminder",label:"Reminder",icon:e.jsx(Nt,{className:"w-4 h-4"})},{value:"alert",label:"Alert",icon:e.jsx(Xe,{className:"w-4 h-4"})}].map(w=>{const B=h===w.value;return e.jsxs("button",{type:"button",onClick:()=>p(w.value),className:`flex items-center justify-center gap-2 px-3 py-2 rounded-lg border text-xs font-semibold transition-all duration-200 ${B?"border-[var(--color-primary)]/40 bg-[var(--color-primary)]/15 text-[#FF9F5C]":"border-[#2F2F2F] text-gray-400 hover:text-gray-200"}`,children:[w.icon,e.jsx("span",{children:w.label})]},w.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-300 uppercase tracking-[0.18em]",children:"Priority"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}].map(w=>{const B=u===w.value;return e.jsx("button",{type:"button",onClick:()=>f(w.value),className:`px-3 py-2 rounded-lg border text-xs font-semibold transition-all duration-200 ${B?"border-[var(--color-primary)]/40 bg-[var(--color-primary)]/15 text-[#FF9F5C]":"border-[#2F2F2F] text-gray-400 hover:text-gray-200"}`,children:w.label},w.value)})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 rounded-xl border border-white/10 text-sm font-semibold text-gray-300 hover:bg-white/10 transition-all duration-200",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-[var(--color-primary)] text-white text-sm font-semibold shadow-lg shadow-[var(--color-primary)]/30 hover:shadow-[var(--color-primary)]/40 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[i?e.jsx(So,{className:"w-4 h-4 animate-spin"}):e.jsx(Is,{className:"w-4 h-4"}),"Send notification"]})]})]})})},Xj=t=>{const{customerName:s="Valued Customer",subject:n="Special Offer Just for You!",mainContent:i="We have an amazing offer just for you.",buttonText:o="Book Now",buttonUrl:c="#",branchName:d="TPX Barber",branchAddress:m="123 Main St, City",branchPhone:h="+1234567890",footerText:p="Thank you for choosing us!",offerImage:u=null}=t||{};return`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>${n}</title>
      </head>
      <body style="margin: 0; padding: 0; background-color: #0a0a0a; font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Ubuntu,sans-serif;">
        <div style="max-width: 600px; margin: 0 auto; background-color: #1a1a1a; border-radius: 12px; border: 1px solid #333; margin-bottom: 64px;">
          <!-- Header -->
          <div style="background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%); padding: 32px 20px; text-align: center; border-radius: 12px 12px 0 0;">
            <h1 style="color: #ffffff; font-size: 32px; font-weight: bold; margin: 0; line-height: 1.2;">${d}</h1>
            <p style="color: #ffffff; font-size: 16px; margin: 8px 0 0; opacity: 0.9;">Premium Barbershop Experience</p>
          </div>

          <!-- Main Content -->
          <div style="padding: 32px 20px;">
            <h2 style="color: #ffffff; font-size: 24px; font-weight: bold; margin: 0 0 20px; line-height: 1.3;">${n}</h2>

            ${u?`<img src="${u}" alt="Special Offer" style="margin: 0 auto 24px; border-radius: 8px; max-width: 100%; height: auto; display: block;">`:""}

            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 0 0 16px;">Hello ${s},</p>
            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 0 0 16px;">${i}</p>

            <!-- Button -->
            <div style="text-align: center; margin: 32px 0;">
              <a href="${c}" style="background-color: #ff8c42; border-radius: 8px; color: #ffffff; font-size: 16px; font-weight: bold; text-decoration: none; text-align: center; display: inline-block; padding: 16px 32px; margin: 0 8px; border: none; cursor: pointer;">
                ${o}
              </a>
            </div>
          </div>

          <!-- Services Section -->
          <div style="padding: 0 20px 32px; background-color: #2a2a2a; margin: 0 20px; border-radius: 8px;">
            <h3 style="color: #ff8c42; font-size: 20px; font-weight: bold; margin: 0 0 16px; padding-top: 20px;">Our Services</h3>
            <div style="display: flex; text-align: center;">
              <div style="flex: 1; padding: 16px 8px;">
                <p style="color: #ff8c42; font-size: 18px; font-weight: bold; margin: 0 0 8px;"> Hair Cut</p>
                <p style="color: #cccccc; font-size: 14px; margin: 0;">Professional styling</p>
              </div>
              <div style="flex: 1; padding: 16px 8px;">
                <p style="color: #ff8c42; font-size: 18px; font-weight: bold; margin: 0 0 8px;"> Beard Trim</p>
                <p style="color: #cccccc; font-size: 14px; margin: 0;">Perfect grooming</p>
              </div>
              <div style="flex: 1; padding: 16px 8px;">
                <p style="color: #ff8c42; font-size: 18px; font-weight: bold; margin: 0 0 8px;"> Head Massage</p>
                <p style="color: #cccccc; font-size: 14px; margin: 0;">Relaxing treatment</p>
              </div>
            </div>
          </div>

          <hr style="border-color: #444444; margin: 20px 0;">

          <!-- Footer -->
          <div style="padding: 0 20px 32px; text-align: center;">
            <p style="color: #ff8c42; font-size: 16px; font-weight: bold; margin: 0 0 16px;">${p}</p>
            <p style="color: #999999; font-size: 14px; line-height: 1.6; margin: 0 0 16px;">
               ${m}<br>
               ${h}
            </p>
            <p style="color: #666666; font-size: 12px; line-height: 1.5; margin: 0;">
              You received this email because you're a valued customer.
              <br>If you don't want to receive these emails, you can <a href="#" style="color: #ff8c42; text-decoration: underline;">unsubscribe</a>.
            </p>
          </div>
        </div>
      </body>
    </html>
  `},CT=t=>{const{customerName:s="Valued Customer",discountPercentage:n="20",promoCode:i="SAVE20",validUntil:o=new Date(Date.now()+10080*60*1e3).toLocaleDateString(),branchName:c="TPX Barber",bookingUrl:d="#"}=t||{};return`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> SPECIAL OFFER</title>
      </head>
      <body style="margin: 0; padding: 0; background-color: #0a0a0a; font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Ubuntu,sans-serif;">
        <div style="max-width: 600px; margin: 0 auto; background-color: #1a1a1a; border-radius: 12px; border: 1px solid #333; margin-bottom: 64px;">
          <!-- Header -->
          <div style="background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%); padding: 32px 20px; text-align: center; border-radius: 12px 12px 0 0;">
            <h1 style="color: #ffffff; font-size: 32px; font-weight: bold; margin: 0; line-height: 1.2;">${c}</h1>
          </div>

          <!-- Promo Section -->
          <div style="padding: 40px 20px; text-align: center; background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%);">
            <h2 style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0 0 16px; text-transform: uppercase; letter-spacing: 2px;"> SPECIAL OFFER</h2>
            <h1 style="color: #ffffff; font-size: 48px; font-weight: bold; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">${n}% OFF</h1>
            <p style="color: #ffffff; font-size: 18px; margin: 8px 0 32px; opacity: 0.9;">Your next appointment</p>

            <!-- Promo Code Box -->
            <div style="background-color: rgba(255,255,255,0.1); padding: 16px; border-radius: 8px; margin: 24px auto; max-width: 200px; border: 2px dashed #ffffff;">
              <p style="color: #ffffff; font-size: 14px; margin: 0 0 8px; opacity: 0.8;">Use code:</p>
              <p style="color: #ffffff; font-size: 24px; font-weight: bold; margin: 0; letter-spacing: 2px;">${i}</p>
            </div>

            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 24px 0 16px;">Hello ${s},</p>
            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 0 0 32px;">
              Take advantage of this exclusive offer and save ${n}% on your next visit!
            </p>

            <!-- Button -->
            <div style="margin: 32px 0;">
              <a href="${d}" style="background-color: #ffffff; border-radius: 8px; color: #ff8c42; font-size: 16px; font-weight: bold; text-decoration: none; text-align: center; display: inline-block; padding: 16px 32px; border: none; cursor: pointer;">
                Book Now & Save
              </a>
            </div>

            <p style="color: #ffffff; font-size: 14px; margin: 24px 0 0; opacity: 0.8;">Valid until ${o}</p>
          </div>

          <hr style="border-color: #444444; margin: 20px 0;">

          <!-- Footer -->
          <div style="padding: 0 20px 32px; text-align: center;">
            <p style="color: #666666; font-size: 12px; line-height: 1.5; margin: 0;">
              <a href="#" style="color: #ff8c42; text-decoration: underline;">Unsubscribe</a> from promotional emails.
            </p>
          </div>
        </div>
      </body>
    </html>
  `},mg=async({templateType:t,subject:s,templateData:n,fallbackHtml:i})=>{switch(t){case"marketing":return Xj({...n,subject:s});case"promotional":return CT({...n});case"custom":return i||"<p>No content provided</p>";default:return i||Xj({...n,subject:s})}},ET=t=>{let s={},n=t.template_type||"custom",i=t.body_html||"";try{if(t.body_html&&t.body_html.startsWith("{")){const o=JSON.parse(t.body_html);o.template_type&&(n=o.template_type,s=o.templateData||{})}}catch{i=t.body_html}return{templateType:n,templateData:s,fallbackHtml:i}},t9=C.memo(({selectedTemplate:t,campaignForm:s})=>{const[n,i]=C.useState(!1),[o,c]=C.useState(""),d=C.useMemo(()=>JSON.stringify(s.templateData||{}),[s.templateData]);return C.useEffect(()=>{let m=!0;return(async()=>{if(!t?.id||t.id==="custom"){c("");return}i(!0);try{const p=await mg({templateType:t.id,subject:s.subject||"Email Subject",templateData:s.templateData,fallbackHtml:s.body_html||""});m&&c(p)}catch(p){console.error("Template rendering error:",p),m&&c("")}finally{m&&i(!1)}})(),()=>{m=!1}},[t,s.subject,d,s.body_html]),!t||!t.component?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ht,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Template Selected"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Choose a template to see the preview"})]})}):n?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)] mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading template preview..."})]}):o?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 p-4 rounded-[30px] shadow-inner border border-gray-200/60",children:e.jsxs("div",{className:"bg-white rounded-[22px] shadow-2xl overflow-hidden border border-gray-200 w-[360px]",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-red-400"}),e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-yellow-400"}),e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-400"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-600 truncate",children:s.subject||"Email Subject"})]}),e.jsx("iframe",{title:"Email preview",srcDoc:o,className:"w-full",style:{height:600,border:"none",backgroundColor:"#f4f4f4"},sandbox:"allow-same-origin"})]})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ht,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Preview not available"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Template will render correctly when sent"})]})});t9.displayName="TemplatePreview";const s9=C.memo(({template:t,isSelected:s,onSelect:n})=>e.jsxs("button",{type:"button",onClick:()=>n(t),className:`p-4 rounded-xl border-2 transition-all duration-200 text-left group ${s?"border-[var(--color-primary)] bg-[var(--color-primary)]/10 shadow-lg shadow-[var(--color-primary)]/20":"border-[#2A2A2A] bg-[#1A1A1A] hover:border-[#2A2A2A] hover:bg-[#222222]"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[(()=>{const i=t.icon;return e.jsx(i,{className:"w-5 h-5 text-[var(--color-primary)]"})})(),e.jsx("span",{className:"text-sm font-semibold text-white",children:t.name}),s&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-[var(--color-primary)] rounded-full"})]}),e.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:t.description})]},t.id));s9.displayName="TemplateCard";const Du="noreply@tpxbarber.com",r9=C.memo(({onRefresh:t})=>{const{user:s}=Dt(),[n,i]=C.useState("campaigns"),[o,c]=C.useState(!1),[d,m]=C.useState(!1),[h,p]=C.useState(!1),[u,f]=C.useState(!1),[g,y]=C.useState(!1),[b,j]=C.useState(!1),[N,w]=C.useState(null),[B,S]=C.useState(null),[_,k]=C.useState({current:0,total:0,sent:0,failed:0}),[E,D]=C.useState(!1),[F,M]=C.useState(""),[P,T]=C.useState("all_customers"),[L,X]=C.useState([]),[Z,ne]=C.useState("create"),[I,O]=C.useState({name:"",subject:"",body_html:"",audience:"all_customers",template_type:"custom",from_email:"",scheduled_at:"",tags:[],templateData:{}}),[G,te]=C.useState(""),[Q,ee]=C.useState("all"),[le,R]=C.useState("all"),[q,J]=C.useState("all"),[$,Y]=C.useState(""),[xe,oe]=C.useState(void 0),de=me(H.services.emailMarketing.getCampaignsByBranch,s?.branch_id?{branch_id:s.branch_id}:"skip"),ve=me(H.services.auth.getUsersByRoleAndBranch,s?.branch_id?{role:"customer",branch_id:s.branch_id}:"skip"),Me=De(H.services.emailMarketing.createCampaign),Ke=De(H.services.emailMarketing.updateCampaign),pe=De(H.services.emailMarketing.deleteCampaign),be=De(H.services.emailMarketing.logCampaignSend),Be=C.useMemo(()=>{if(!ve)return{all_customers:0,new_customers:0,returning_customers:0,vip_customers:0};const K=new Date,V=new Date(K.getTime()-720*60*60*1e3);return{all_customers:ve.length,new_customers:ve.filter(se=>new Date(se.createdAt)>V).length,returning_customers:ve.filter(se=>se.createdAt<V.getTime()).length,vip_customers:ve.filter(se=>!1).length}},[ve]),Ue=C.useMemo(()=>de?de.filter(K=>{const V=K.name.toLowerCase().includes(G.toLowerCase())||K.subject.toLowerCase().includes(G.toLowerCase()),se=Q==="all"||K.audience===Q,ke=le==="all"||K.status===le,Re=q==="all"||K.template_type===q;return V&&se&&ke&&Re}):[],[de,G,Q,le,q]),ue=C.useMemo(()=>de?de.reduce((K,V)=>({total:K.total+1,sent:K.sent+(V.status==="sent"?1:0),scheduled:K.scheduled+(V.status==="scheduled"?1:0),draft:K.draft+(V.status==="draft"?1:0)}),{total:0,sent:0,scheduled:0,draft:0}):{total:0,sent:0,scheduled:0,draft:0},[de]),Ie=()=>{O({name:"",subject:"",body_html:"",audience:"all_customers",template_type:"custom",from_email:"",scheduled_at:"",tags:[],templateData:{}}),oe(null),X([])},st=async()=>{if(!s?.branch_id||!s?._id||!I.name||!I.subject)return;const K=I.scheduled_at?new Date(I.scheduled_at).getTime():void 0,se=["all_customers","new_customers","returning_customers","vip_customers"].includes(I.audience)?I.audience:"all_customers",ke=xe&&xe.id!=="custom",Re=ke?xe.id:I.template_type||"custom",ze=ke?JSON.stringify({template_type:xe.id,templateData:I.templateData||{}}):I.body_html||"";try{await Me({branch_id:s.branch_id,name:I.name,subject:I.subject,body_html:ze,audience:se,template_type:Re,from_email:Du,created_by:s._id,scheduled_at:K,tags:I.tags}),Ie(),c(!1),t?.()}catch(Ve){console.error("Failed to create campaign:",Ve)}},Le=async(K,V)=>{if(!(!K||!V||V.length===0)){D(!1),S(K),k({current:0,total:V.length,sent:0,failed:0});try{await Ke({id:K._id,status:"sending",total_recipients:V.length});const se=await Jt(K);console.log(" Campaign email payload:",{campaign_id:K._id,subject:K.subject,recipients_count:V.length});const{sendCampaignEmails:ke}=await nm(async()=>{const{sendCampaignEmails:Ve}=await Promise.resolve().then(()=>UA);return{sendCampaignEmails:Ve}},void 0),Re=await ke({campaignData:{name:K.name,subject:K.subject,html_content:se,text_content:se.replace(/<[^>]*>/g,"")},recipients:V.map(Ve=>({email:Ve.email,username:Ve.username||Ve.email,_id:Ve._id})),onProgress:Ve=>{k({current:Ve.current,total:Ve.total,sent:Ve.sent,failed:Ve.failed})}});for(const Ve of V){const _t=Re.errors.find(_e=>_e.email===Ve.email)===void 0;await be({campaign_id:K._id,recipient_email:Ve.email,recipient_id:Ve._id,status:_t?"sent":"failed",error:_t?void 0:Re.errors.find(_e=>_e.email===Ve.email)?.error})}k({current:V.length,total:V.length,sent:Re.sent,failed:Re.failed}),await Ke({id:K._id,status:Re.failed>0&&Re.sent===0?"failed":"sent",sent_at:Date.now(),sent_count:Re.sent,failed_count:Re.failed});const ze=new Set((Re.errors||[]).map(Ve=>Ve.email));for(const Ve of V){const _t=ze.has(Ve.email)?"failed":"sent";await be({campaign_id:K._id,recipient_email:Ve.email,recipient_id:Ve._id,status:_t})}if(Re.failed>0){const Ve=Re.errors?.map(_t=>`${_t.email}: ${_t.error}`).join(`
`)||"Some emails failed to send.";alert(`Campaign sent with ${Re.failed} failures.
${Ve}`)}else alert(`Campaign sent to ${Re.sent} recipients!`)}catch(se){console.error("Failed to send campaign:",se),await Ke({id:K._id,status:"failed"})}finally{S(null),k({current:0,total:0,sent:0,failed:0}),X([]),M(""),ne("create")}}},kt=async(K,V=!1)=>{if(!ve||ve.length===0||!K)return;if(!V){const ke=K.audience||"all_customers";ne("send"),T(ke),M("");const Re=St(ve,ke,"");X(Re),S(K),D(!0);return}const se=L.length?[...L]:St(ve,K.audience||"all_customers","");await Le(K,se)},Pt=()=>{D(!1),Z==="send"&&(ne("create"),S(null))},St=C.useCallback((K,V,se)=>{if(!K)return[];const ke=new Date,Re=new Date(ke.getTime()-720*60*60*1e3);let ze=K;if(V==="new_customers"?ze=K.filter(Ve=>new Date(Ve.createdAt)>Re):V==="returning_customers"||V==="regular_customers"?ze=K.filter(Ve=>Ve.createdAt<Re.getTime()):V==="vip_customers"&&(ze=[]),se){const Ve=se.toLowerCase();ze=ze.filter(_t=>(_t.username||"").toLowerCase().includes(Ve)||(_t.email||"").toLowerCase().includes(Ve))}return ze},[]),Jt=C.useCallback(async K=>{if(!K)return"";const{templateType:V,templateData:se,fallbackHtml:ke}=ET(K);try{const Re=await mg({templateType:V,subject:K.subject,templateData:se,fallbackHtml:ke});if(Re)return Re}catch(Re){console.error("Failed to render campaign template:",Re)}return ke||`<div style="font-family:Arial,sans-serif;padding:20px"><h1>${K.name||"Campaign"}</h1><p>${K.subject||""}</p></div>`},[]),Ne=C.useCallback(async()=>{const K=xe?.id||I.template_type||"custom",V=K==="custom"&&I.body_html||"";try{const se=await mg({templateType:K,subject:I.subject||"Email Subject",templateData:I.templateData,fallbackHtml:V});if(se)return se}catch(se){console.error("Failed to render form template:",se)}return V||`<div style="font-family:Arial,sans-serif;padding:20px"><h1>${I.name||"Campaign"}</h1><p>${I.subject||""}</p></div>`},[xe,I.template_type,I.body_html,I.subject,I.name,I.templateData]),Ye=async()=>{if($)try{const K=N||{_id:void 0,name:I.name||"Test Campaign",subject:I.subject||"Test Email",from_email:I.from_email,template_type:xe?.id||I.template_type,body_html:I.body_html},V=N?await Jt(N):await Ne(),se=K._id?{id:K._id,name:K.name||"Test Campaign",subject:K.subject||"Test Email",from:K.from_email||Du}:{name:K.name||"Test Campaign",subject:K.subject||"Test Email",from:K.from_email||Du};console.log(" Test email payload:",{to:$,subject:se.subject,hasHtml:!!V});const{sendEmailViaEmailJS:ke}=await nm(async()=>{const{sendEmailViaEmailJS:ze}=await Promise.resolve().then(()=>UA);return{sendEmailViaEmailJS:ze}},void 0),Re=await ke({to:$,to_name:"Test User",subject:se.subject,html_content:V,text_content:V.replace(/<[^>]*>/g,"")});Re.success?alert("Test email sent successfully!"):alert("Failed to send test email: "+Re.error)}catch(K){console.error("Test email failed:",K),alert("Failed to send test email")}},Ge=C.useCallback(async K=>{if(!(!K||!window.confirm(`Delete campaign "${K.name}"? This cannot be undone.`)))try{await pe({id:K._id}),N?._id===K._id&&w(null),t?.()}catch(se){console.error("Failed to delete campaign:",se),alert("Failed to delete campaign. Please try again.")}},[pe,t,N]),yt=[{id:"marketing",name:"Marketing",description:"General announcements & offers",icon:Ht},{id:"promotional",name:"Promotional",description:"Discount-focused campaigns",icon:Ja},{id:"newsletter",name:"Newsletter",description:"Share updates & content",icon:Ao}],bt=K=>{switch(K){case"marketing":return{mainContent:"We have an amazing offer just for you.",buttonText:"Book Now",buttonUrl:"#",branchName:"TPX Barber",branchAddress:"123 Main St, City",branchPhone:"+1234567890",footerText:"Thank you for choosing us!"};case"promotional":return{discountPercentage:"25",promoCode:"SUMMER25",validUntil:new Date(Date.now()+10080*60*1e3).toISOString().slice(0,10),bookingUrl:"#"};case"newsletter":return{mainContent:"Welcome to our latest updates and news!",buttonText:"Read More",buttonUrl:"#",footerText:"Thanks for reading!"};default:return{}}},Ee=C.useCallback(K=>{if(xe&&xe.id===K?.id){m(!1);return}K&&K.component?(oe(K),O(V=>({...V,template_type:K.id,body_html:"",templateData:bt(K.id)}))):(oe(null),O(V=>({...V,template_type:"custom",body_html:V.body_html||"",templateData:{}}))),m(!1)},[xe]),We=K=>{const V={draft:"bg-gray-500/20 text-gray-300 border border-gray-500/30",scheduled:"bg-blue-500/20 text-blue-300 border border-blue-500/30",sending:"bg-amber-500/20 text-amber-300 border border-amber-500/30",sent:"bg-green-500/20 text-green-300 border border-green-500/30",failed:"bg-red-500/20 text-red-300 border border-red-500/30"};return V[K]||V.draft},Qe=K=>({all_customers:hs,new_customers:zr,returning_customers:a0,vip_customers:Ja})[K]||hs,ht=K=>({all_customers:"All Customers",new_customers:"New Customers",returning_customers:"Regular Customers",vip_customers:"VIP Customers"})[K]||"All Customers",wt=C.useCallback(K=>Be&&Be[K]||0,[Be]),Bt=Z==="send"&&!!B;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-xl",children:e.jsx(Ht,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Email Marketing"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage and send email campaigns to your customers"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>i("analytics"),className:"px-4 py-2 bg-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#333333] transition-colors flex items-center space-x-2",children:[e.jsx(ja,{className:"w-4 h-4"}),e.jsx("span",{children:"Analytics"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-colors flex items-center space-x-2",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:"New Campaign"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Campaigns"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ue.total})]}),e.jsx("div",{className:"p-2 bg-[var(--color-primary)]/20 rounded-lg",children:e.jsx(Ht,{className:"w-6 h-6 text-[var(--color-primary)]"})})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Sent"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:ue.sent})]}),e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(Je,{className:"w-6 h-6 text-green-400"})})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:ue.scheduled})]}),e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Nt,{className:"w-6 h-6 text-blue-400"})})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Audience Size"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:Be.all_customers})]}),e.jsx("div",{className:"p-2 bg-[var(--color-primary)]/20 rounded-lg",children:e.jsx(hs,{className:"w-6 h-6 text-[var(--color-primary)]"})})]})})]}),n==="analytics"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-xl",children:e.jsx(ja,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Campaign Analytics"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Detailed performance metrics and insights"})]})]}),e.jsxs("button",{onClick:()=>i("campaigns"),className:"px-4 py-2 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[var(--color-primary)]/10 hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] transition-colors flex items-center space-x-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Campaigns"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Sent"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:de?.reduce((K,V)=>K+(V.sent_count||0),0)||0})]}),e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(Qx,{className:"w-5 h-5 text-green-400"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wr,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-green-400",children:"+12% from last month"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Open Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[de?.length>0&&Math.round(de.reduce((K,V)=>K+(V.open_count||0),0)/de.reduce((K,V)=>K+(V.sent_count||0),0)*100)||0,"%"]})]}),e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Dn,{className:"w-5 h-5 text-blue-400"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wr,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-blue-400",children:"Industry avg: 22%"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Click Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:[de?.length>0&&Math.round(de.reduce((K,V)=>K+(V.click_count||0),0)/de.reduce((K,V)=>K+(V.sent_count||0),0)*100)||0,"%"]})]}),e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(Qa,{className:"w-5 h-5 text-purple-400"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wr,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-purple-400",children:"Industry avg: 3.2%"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Avg Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:"2,450"})]}),e.jsx("div",{className:"p-2 bg-[var(--color-primary)]/20 rounded-lg",children:e.jsx(wr,{className:"w-5 h-5 text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wr,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-green-400",children:"+320 from last month"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-[#1A1A1A] p-6 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Campaign Performance"}),e.jsx(ja,{className:"w-5 h-5 text-[var(--color-primary)]"})]}),e.jsx("div",{className:"space-y-4",children:de?.slice(0,5).map((K,V)=>{const se=K.sent_count||0,ke=K.total_recipients||0,Re=ke>0?Math.round((K.open_count||0)/se*100):0,ze=ke>0?Math.round((K.click_count||0)/se*100):0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:K.name}),e.jsxs("span",{className:"text-gray-400 text-xs",children:[se," sent"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Opens"}),e.jsxs("span",{className:"text-blue-400",children:[Re,"%"]})]}),e.jsx("div",{className:"w-full bg-[#1A1A1A] rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(Re*3,100)}%`}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Clicks"}),e.jsxs("span",{className:"text-purple-400",children:[ze,"%"]})]}),e.jsx("div",{className:"w-full bg-[#1A1A1A] rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${Math.min(ze*10,100)}%`}})})]})]},K._id)})})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-6 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Audience Engagement"}),e.jsx(hs,{className:"w-5 h-5 text-[var(--color-primary)]"})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(Be).map(([K,V])=>{const se=Qe(K),ke={all:"All Customers",new:"New Customers",returning:"Returning",vip:"VIP Customers"},ze={all:{opens:24,clicks:3.2},new:{opens:28,clicks:4.1},returning:{opens:22,clicks:3.8},vip:{opens:32,clicks:5.2}}[K];return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-[var(--color-primary)]/20 rounded-lg",children:e.jsx(se,{className:"w-4 h-4 text-[var(--color-primary)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:ke[K]}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[V," contacts"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-blue-400 text-sm font-semibold",children:[ze.opens,"% open"]}),e.jsxs("p",{className:"text-purple-400 text-xs",children:[ze.clicks,"% click"]})]})]},K)})})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-6 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Campaigns"}),e.jsx(Nt,{className:"w-5 h-5 text-[var(--color-primary)]"})]}),e.jsx("div",{className:"space-y-4",children:de?.slice(0,5).map((K,V)=>{const se={sent:"text-green-400",scheduled:"text-blue-400",sending:"text-amber-400",failed:"text-red-400",draft:"text-gray-400"}[K.status]||"text-gray-400";return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:K.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:K.subject})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm font-medium ${se}`,children:K.status}),e.jsx("p",{className:"text-gray-400 text-xs",children:K.sent_at?new Date(K.sent_at).toLocaleDateString():K.scheduled_at?new Date(K.scheduled_at).toLocaleDateString():"Not sent"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white text-sm",children:[K.sent_count||0," sent"]}),e.jsxs("p",{className:"text-blue-400 text-xs",children:[K.open_count||0," opens"]})]})]})]},K._id)})})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Audience Segments"}),e.jsx(d0,{className:"w-5 h-5 text-[var(--color-primary)]"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(Be).map(([K,V])=>{const se=Qe(K),ke={all:"All Customers",new:"New Customers",returning:"Returning",vip:"VIP Customers"};return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-2 bg-[#1A1A1A] rounded-lg inline-block mb-2",children:e.jsx(se,{className:"w-4 h-4 text-[var(--color-primary)]"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:V}),e.jsx("p",{className:"text-xs text-gray-400",children:ke[K]})]},K)})})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Filters:"})]}),e.jsxs("select",{value:Q,onChange:K=>ee(K.target.value),className:"px-3 py-2 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",children:[e.jsx("option",{value:"all",children:"All Audiences"}),e.jsx("option",{value:"all_customers",children:"All Customers"}),e.jsx("option",{value:"new_customers",children:"New Customers"}),e.jsx("option",{value:"returning_customers",children:"Returning Customers"}),e.jsx("option",{value:"vip_customers",children:"VIP Customers"})]}),e.jsxs("select",{value:le,onChange:K=>R(K.target.value),className:"px-3 py-2 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"sending",children:"Sending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:q,onChange:K=>J(K.target.value),className:"px-3 py-2 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",children:[e.jsx("option",{value:"all",children:"All Templates"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"promotional",children:"Promotional"}),e.jsx("option",{value:"newsletter",children:"Newsletter"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{value:G,onChange:K=>te(K.target.value),placeholder:"Search campaigns...",className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#2A2A2A] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ue.map(K=>{const V=Qe(K.audience),se=B?._id===K._id;return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl border border-[#2A2A2A]/50 p-5 hover:border-[var(--color-primary)]/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg",children:e.jsx(Ht,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:K.name}),e.jsx("p",{className:"text-xs text-gray-400",children:K.subject})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${We(K.status)}`,children:K.status})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(V,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-xs text-gray-400 capitalize",children:K.audience.replace("_"," ")}),K.template_type&&e.jsxs(e.Fragment,{children:[e.jsx(Ao,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 capitalize",children:K.template_type})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Recipients"}),e.jsx("span",{className:"text-white font-semibold",children:K.total_recipients||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Sent"}),e.jsx("span",{className:"text-green-400 font-semibold",children:K.sent_count||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed"}),e.jsx("span",{className:"text-red-400 font-semibold",children:K.failed_count||0})]}),K.open_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Opens"}),e.jsx("span",{className:"text-blue-400 font-semibold",children:K.open_count})]}),K.click_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Clicks"}),e.jsx("span",{className:"text-purple-400 font-semibold",children:K.click_count})]})]}),se&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-300 mb-2",children:[e.jsx("span",{children:"Sending progress"}),e.jsxs("span",{children:[_.current,"/",_.total]})]}),e.jsx("div",{className:"w-full bg-[#1A1A1A] rounded-full h-2",children:e.jsx("div",{className:"bg-[var(--color-primary)] h-2 rounded-full transition-all duration-300",style:{width:`${_.total>0?_.current/_.total*100:0}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ge(K),className:"px-3 py-2 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#FF4D4F]/10 hover:border-[#FF4D4F] hover:text-[#FF4D4F] transition-colors",title:"Delete campaign",children:e.jsx(js,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{w(K),f(!0)},className:"px-3 py-2 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[var(--color-primary)]/10 hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] transition-colors",children:e.jsx(Dn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{w(K),j(!0)},className:"px-3 py-2 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[var(--color-primary)]/10 hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] transition-colors",children:e.jsx(oj,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[K.status==="draft"&&e.jsxs("button",{onClick:()=>kt(K),disabled:se,className:"px-3 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors flex items-center space-x-2 disabled:opacity-50",children:[se?e.jsx(So,{className:"w-4 h-4 animate-spin"}):e.jsx(Qx,{className:"w-4 h-4"}),e.jsx("span",{children:"Send"})]}),K.status==="scheduled"&&e.jsx("button",{onClick:()=>Ke({id:K._id,status:"draft"}),className:"px-3 py-2 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[var(--color-primary)]/10 hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] transition-colors",children:e.jsx(J7,{className:"w-4 h-4"})})]})]})]},K._id)})}),o&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>c(!1)}),e.jsxs("div",{className:"relative w-full max-w-7xl max-h-[95vh] overflow-hidden transform rounded-3xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50 bg-[#0A0A0A]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--color-primary)] to-[#FF6B1A] flex items-center justify-center",children:e.jsx(Ht,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create Email Campaign"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Design and send professional email campaigns"})]})]}),e.jsx("button",{onClick:()=>c(!1),className:"w-10 h-10 rounded-xl bg-[#333333] hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-all duration-200 group",children:e.jsx(Ze,{className:"w-5 h-5 text-gray-400 group-hover:text-[var(--color-primary)] transition-colors"})})]}),e.jsx("div",{className:"h-[calc(95vh-120px)] overflow-y-auto",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:K=>{K.preventDefault(),st()},className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Lr,{className:"w-4 h-4 text-[var(--color-primary)]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Campaign Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Campaign Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Summer Promo Blast",value:I.name,onChange:K=>O(V=>({...V,name:K.target.value})),required:!0,className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Subject Line ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Get 20% off this week!",value:I.subject,onChange:K=>O(V=>({...V,subject:K.target.value})),required:!0,className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Recipients"}),e.jsx("button",{type:"button",onClick:()=>{const K=I.audience||"all_customers";if(ne("create"),T(K),M(""),!L.length){const V=St(ve||[],K,"");X(V)}S(null),D(!0)},className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-xl text-sm text-left hover:border-[var(--color-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:ht(I.audience)}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",L.length||wt(I.audience||"all_customers"),")"]})]}),e.jsx("span",{className:"text-[var(--color-primary)] font-medium",children:"Change"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"From Email (Handled by EmailJS)"}),e.jsx("input",{type:"email",placeholder:"noreply@tpxbarber.com",value:I.from_email||Du,onChange:K=>O(V=>({...V,from_email:K.target.value})),className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"From email is configured in your EmailJS template settings."})]})]})]})]}),e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Ao,{className:"w-4 h-4 text-[var(--color-primary)]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Email Template"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:yt.map(K=>e.jsx(s9,{template:K,isSelected:xe&&xe.name===K.name,onSelect:Ee},K.id))})]}),e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(ID,{className:"w-4 h-4 text-[var(--color-primary)]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Template Content"})]}),!xe&&e.jsx("div",{className:"text-sm text-gray-400",children:"Select a template above to customize its content."}),xe?.id==="marketing"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Main Content"}),e.jsx("textarea",{rows:4,value:I.templateData?.mainContent||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,mainContent:K.target.value}})),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",placeholder:"We have an amazing offer just for you."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button Text"}),e.jsx("input",{type:"text",value:I.templateData?.buttonText||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,buttonText:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button URL"}),e.jsx("input",{type:"url",value:I.templateData?.buttonUrl||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,buttonUrl:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",placeholder:"#"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Footer Text"}),e.jsx("input",{type:"text",value:I.templateData?.footerText||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,footerText:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]})]}),xe?.id==="promotional"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Discount %"}),e.jsx("input",{type:"number",value:I.templateData?.discountPercentage||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,discountPercentage:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",min:"1",max:"90"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Promo Code"}),e.jsx("input",{type:"text",value:I.templateData?.promoCode||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,promoCode:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Valid Until"}),e.jsx("input",{type:"date",value:I.templateData?.validUntil||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,validUntil:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Booking URL"}),e.jsx("input",{type:"url",value:I.templateData?.bookingUrl||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,bookingUrl:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",placeholder:"#"})]})]}),xe?.id==="newsletter"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Intro"}),e.jsx("textarea",{rows:4,value:I.templateData?.mainContent||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,mainContent:K.target.value}})),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]",placeholder:"Welcome to our latest updates and news!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button Text"}),e.jsx("input",{type:"text",value:I.templateData?.buttonText||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,buttonText:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button URL"}),e.jsx("input",{type:"url",value:I.templateData?.buttonUrl||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,buttonUrl:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Footer Text"}),e.jsx("input",{type:"text",value:I.templateData?.footerText||"",onChange:K=>O(V=>({...V,templateData:{...V.templateData,footerText:K.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]"})]})]})]}),e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Nt,{className:"w-4 h-4 text-[var(--color-primary)]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Schedule Campaign"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>O(K=>({...K,scheduled_at:null})),className:`px-6 py-3 rounded-xl text-sm font-medium transition-all ${I.scheduled_at?"bg-[#333333] text-gray-300 hover:bg-[#444444]":"bg-[var(--color-primary)] text-white shadow-lg shadow-[var(--color-primary)]/20"}`,children:[e.jsx(eD,{className:"w-4 h-4 mr-2 inline"}),"Send Now"]}),e.jsxs("button",{type:"button",onClick:()=>O(K=>({...K,scheduled_at:Date.now()+36e5})),className:`px-6 py-3 rounded-xl text-sm font-medium transition-all ${I.scheduled_at?"bg-[var(--color-primary)] text-white shadow-lg shadow-[var(--color-primary)]/20":"bg-[#333333] text-gray-300 hover:bg-[#444444]"}`,children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 inline"}),"Schedule"]})]}),I.scheduled_at&&e.jsx("div",{className:"mt-4",children:e.jsx("input",{type:"datetime-local",value:new Date(I.scheduled_at).toISOString().slice(0,16),onChange:K=>O(V=>({...V,scheduled_at:new Date(K.target.value).getTime()})),className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200"})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-[#2A2A2A]/50",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-6 py-3 bg-[#333333] hover:bg-[#444444] text-gray-300 rounded-xl text-sm font-medium transition-all duration-200",children:"Cancel"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!0),className:"px-6 py-3 border border-[#2A2A2A] hover:border-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 text-gray-200 rounded-xl text-sm font-medium transition-all duration-200",children:"Preview Email"}),e.jsxs("button",{type:"button",className:"px-6 py-3 bg-[#444444] hover:bg-[#555555] text-gray-300 rounded-xl text-sm font-medium transition-all duration-200 flex items-center",children:[e.jsx(qr,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),e.jsxs("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-[var(--color-primary)] to-[#FF6B1A] hover:from-[#FF6B1A] hover:to-[var(--color-primary)] text-white rounded-xl text-sm font-semibold transition-all duration-200 shadow-lg shadow-[var(--color-primary)]/20 flex items-center",children:[e.jsx(Qx,{className:"w-4 h-4 mr-2"}),"Create Campaign"]})]})]})]})})})]})]})}),document.body),g&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>y(!1)}),e.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Email Preview"}),e.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"min-h-[400px] bg-white rounded-xl overflow-hidden border border-gray-200",children:e.jsx(t9,{selectedTemplate:xe,campaignForm:I})})})]})]})}),document.body),d&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl transform rounded-3xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50 bg-[#0A0A0A]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--color-primary)] to-[#FF6B1A] flex items-center justify-center",children:e.jsx(Ao,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Choose Email Template"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Select a professional template or create custom HTML"})]})]}),e.jsx("button",{onClick:()=>m(!1),className:"w-10 h-10 rounded-xl bg-[#333333] hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-all duration-200 group",children:e.jsx(Ze,{className:"w-5 h-5 text-gray-400 group-hover:text-[var(--color-primary)] transition-colors"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:yt.map(K=>{const V=K.icon,se=xe&&xe.name===K.name;return e.jsxs("button",{onClick:()=>Ee(K),className:`p-6 bg-[#222222] border-2 rounded-2xl transition-all duration-200 text-left group ${se?"border-[var(--color-primary)] bg-[var(--color-primary)]/5":"border-[#2A2A2A] hover:border-[var(--color-primary)] hover:bg-[var(--color-primary)]/5"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-colors ${se?"bg-[var(--color-primary)]/30":"bg-[var(--color-primary)]/20 group-hover:bg-[var(--color-primary)]/30"}`,children:e.jsx(V,{className:"w-6 h-6 text-[var(--color-primary)]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:K.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Pre-designed template"})]}),se&&e.jsx("div",{className:"w-6 h-6 bg-[var(--color-primary)] rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:K.description}),e.jsxs("div",{className:"mt-4 flex items-center text-[var(--color-primary)] text-sm font-medium",children:[e.jsx("span",{children:se?"Selected":"Select Template"}),e.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},K.id)})})})]})]})}),document.body),E&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[10050] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:Pt}),e.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl z-[10051]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Select Recipients"}),e.jsx("button",{onClick:Pt,className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-2",children:[{id:"all_customers",label:"All"},{id:"new_customers",label:"New"},{id:"returning_customers",label:"Regular"}].map(K=>e.jsx("button",{onClick:()=>{T(K.id),Z==="create"&&O(se=>({...se,audience:K.id}));const V=St(ve,K.id,F);X(V)},className:`px-3 py-1.5 text-xs rounded-lg border ${P===K.id?"border-[var(--color-primary)] text-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-[#2A2A2A] text-gray-300 hover:bg-[#444444]/50"}`,children:K.label},K.id))}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>{const K=St(ve,P,F);X(K)},className:"text-xs px-3 py-1.5 border border-[var(--color-primary)] text-[var(--color-primary)] rounded-lg hover:bg-[var(--color-primary)]/10",children:"Select All"}),e.jsx("button",{onClick:()=>X([]),className:"text-xs px-3 py-1.5 border border-[#6B6B6B] text-[#6B6B6B] rounded-lg hover:bg-[#6B6B6B]/10",children:"Clear"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:F,onChange:K=>{M(K.target.value)},placeholder:"Search customers...",className:"w-full h-10 px-4 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] pr-10"}),e.jsx(Ns,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),L.length>0&&e.jsx("div",{className:"border border-[#2A2A2A] rounded-xl p-2",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(K=>e.jsxs("div",{className:"flex items-center space-x-1 bg-[var(--color-primary)]/10 border border-[var(--color-primary)]/20 rounded-lg px-2 py-1 text-xs",children:[e.jsx("span",{className:"text-white",children:K.username||K.email}),e.jsx("button",{onClick:()=>X(V=>V.filter(se=>(se._id||se.id)!==(K._id||K.id))),className:"text-[var(--color-primary)] hover:text-[var(--color-accent)]",children:e.jsx(Ze,{className:"w-3 h-3"})})]},K._id||K.id))})}),e.jsx("div",{className:"border border-[#2A2A2A] rounded-xl max-h-72 overflow-y-auto p-2",children:St(ve,P,F).map(K=>{const V=K._id||K.id,se=L.find(ke=>(ke._id||ke.id)===V);return e.jsxs("button",{onClick:()=>{X(ke=>se?ke.filter(Re=>(Re._id||Re.id)!==V):[...ke,K])},className:`w-full flex items-center text-left space-x-3 p-2 rounded-lg ${se?"bg-[var(--color-primary)]/10 border border-[var(--color-primary)]/20":"hover:bg-[#222222]"} `,children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${se?"bg-[var(--color-primary)] border-[var(--color-primary)]":"border-[#2A2A2A]"}`,children:se&&e.jsx(Je,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-white",children:K.username||K.email}),e.jsx("div",{className:"text-xs text-gray-400",children:K.email})]})]},V)})}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-[#2A2A2A]/50",children:[e.jsx("button",{onClick:Pt,className:"flex-1 px-3 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg text-sm hover:bg-[#555555]/70",children:"Cancel"}),e.jsx("button",{onClick:async()=>{Bt?await kt(B,!0):Pt()},disabled:!L.length,className:"flex-1 px-3 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm hover:bg-[var(--color-primary)]/90 disabled:opacity-50",children:Bt?`Send to ${L.length}`:"Done"})]})]})]})]})}),document.body),u&&N&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>f(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl max-h-[85vh] overflow-hidden transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Campaign Preview"}),e.jsx("button",{onClick:()=>f(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"p-4 max-h-[calc(85vh-120px)] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center",children:[e.jsx(Ht,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Campaign Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-white",children:N.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Subject:"}),e.jsx("span",{className:"text-white",children:N.subject})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Audience:"}),e.jsx("span",{className:"text-white capitalize",children:N.audience.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${We(N.status)}`,children:N.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-gray-300",children:N.createdAt?new Date(N.createdAt).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center",children:[e.jsx(ja,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Performance"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Recipients:"}),e.jsx("span",{className:"text-white",children:N.total_recipients||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Sent:"}),e.jsx("span",{className:"text-green-400",children:N.sent_count||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Opens:"}),e.jsx("span",{className:"text-blue-400",children:N.open_count||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Clicks:"}),e.jsx("span",{className:"text-purple-400",children:N.click_count||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Failed:"}),e.jsx("span",{className:"text-red-400",children:N.failed_count||0})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center",children:[e.jsx(Dn,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Email Preview"]}),e.jsx("div",{className:"bg-white border border-[#2A2A2A] rounded-lg p-4 max-h-96 overflow-auto",children:(()=>{try{const K=yt.find(V=>V.id===N.template_type);if(K){let V={};N.body_html&&N.body_html.trim().startsWith("{")&&(V=JSON.parse(N.body_html)?.templateData||{});const se=K.component;return e.jsx("div",{className:"transform scale-75 origin-top-left w-[133%]",children:e.jsx(se,{...V,subject:N.subject})})}}catch{}return e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:N.body_html||'<p class="text-gray-400">No content</p>'}})})()})]})]})})]})]})}),document.body),b&&N&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>j(!1)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Send Test Email"}),e.jsx("button",{onClick:()=>j(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Test Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",placeholder:"test@example.com",value:$,onChange:K=>Y(K.target.value),className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all duration-200",required:!0})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("h4",{className:"text-white font-semibold mb-2 flex items-center",children:[e.jsx(oj,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Campaign: ",N.name]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Subject: ",N.subject]}),e.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:["Audience: ",N.audience.replace("_"," ")]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-[#2A2A2A]/50",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"flex-1 px-3 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg text-sm hover:bg-[#555555]/70 transition-all duration-200",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Ye,disabled:!$,className:"flex-1 px-3 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm hover:bg-[var(--color-primary)]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Test"})]})]})})]})]})}),document.body)]})});r9.displayName="EmailMarketing";const kT=({onRefresh:t,user:s})=>{const[n,i]=C.useState("overview"),[o,c]=C.useState(null),[d,m]=C.useState(!1),[h,p]=C.useState(!1),[u,f]=C.useState(null),[g,y]=C.useState(new Set),[b,j]=C.useState(!1),[N,w]=C.useState(!1),[B,S]=C.useState(!1),[_,k]=C.useState(!1),[E,D]=C.useState(!1),[F,M]=C.useState(!1),[P,T]=C.useState(!1),[L,X]=C.useState(null),[Z,ne]=C.useState(!1),[I,O]=C.useState(!1),[G,te]=C.useState("all"),[Q,ee]=C.useState(""),[le,R]=C.useState(null),[q,J]=C.useState(!1),[$,Y]=C.useState(null),[xe,oe]=C.useState({payment_method:"bank_transfer",payment_reference:"",notes:""}),[de,ve]=C.useState(!1),[Me,Ke]=C.useState({startDate:"",endDate:""}),[pe,be]=C.useState({}),[Be,Ue]=C.useState({}),[ue,Ie]=C.useState({}),[st,Le]=C.useState(!1),[kt,Pt]=C.useState(!1),[St,Jt]=C.useState(!1);if(!s)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading user data..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please ensure you are logged in"})]})});if(!s.branch_id)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Xe,{className:"h-8 w-8 text-red-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Branch Required"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Payroll management requires a branch assignment. Your user account is not assigned to a branch."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please contact an administrator to assign your account to a branch."})]})});const[Ne,Ye]=C.useState({default_commission_rate:10,payout_frequency:"weekly",payout_day:5,tax_rate:0}),Ge=me(H.services.payroll.getPayrollSettingsByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),yt=me(H.services.payroll.getPayrollPeriodsByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),bt=me(H.services.payroll.getPayrollSummaryByBranch,s&&s.branch_id?{branch_id:s.branch_id,limit:10}:"skip"),Ee=me(H.services.barbers.getBarbersByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),We=me(H.services.services.getActiveServicesByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),Qe=me(H.services.payroll.getServiceCommissionRatesByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),ht=me(H.services.payroll.getProductCommissionRatesByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),wt=me(H.services.products.getAllProducts,{}),Bt=me(H.services.payroll.getBarberDailyRatesByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),K=me(H.services.payroll.getBarberCommissionRatesByBranch,s&&s.branch_id?{branch_id:s.branch_id}:"skip"),V=me(H.services.payroll.getPayrollRecordsByPeriod,o&&o._id?{payroll_period_id:o._id}:"skip"),se=me(H.services.payroll.getBookingsByBarberAndPeriod,F&&L&&o?{barber_id:L.barber_id,period_start:o.period_start,period_end:o.period_end}:"skip"),ke=L&&o?L.products_detail||[]:[],Re=De(H.services.payroll.createOrUpdatePayrollSettings),ze=De(H.services.payroll.createPayrollPeriod),Ve=De(H.services.payroll.calculatePayrollForPeriod),_t=De(H.services.payroll.markPayrollRecordAsPaid);De(H.services.payroll.setBarberCommissionRate);const _e=De(H.services.payroll.setServiceCommissionRate),$e=De(H.services.payroll.setProductCommissionRate),ot=De(H.services.payroll.setBarberDailyRate),ie=Xr(H.services.payroll.getBookingsForPrint),Ae=Xr(H.services.payroll.getBookingsSummaryForPrint),nt=Xr(H.services.payroll.getServiceCommissionSummary),ct=Xr(H.services.payroll.getProductCommissionSummary),pt=De(H.services.payroll.deletePayrollPeriod);C.useEffect(()=>{Ge&&Ye({default_commission_rate:Ge.default_commission_rate,payout_frequency:Ge.payout_frequency,payout_day:Ge.payout_day,tax_rate:Ge.tax_rate||0})},[Ge]),C.useEffect(()=>{const W=Array.isArray(yt)?yt:[];W.length>0&&!o&&c(W[0])},[yt,o]),C.useEffect(()=>{if(!o?._id)return;const we=(Array.isArray(yt)?yt:[]).find(He=>He._id===o._id);we&&(we.updatedAt!==o.updatedAt||we.status!==o.status||we.total_commissions!==o.total_commissions||we.total_earnings!==o.total_earnings||we.total_deductions!==o.total_deductions)&&c(we)},[yt,o]);const re=C.useMemo(()=>{const W=Array.isArray(bt)?bt:[],He=(Array.isArray(Ee)?Ee:[]).filter(gs=>gs?.is_active).length,Pe=W[0],jt=W[1],lt=Pe?.total_commissions||0,ft=jt?.total_commissions||0,Et=ft>0?(lt-ft)/ft*100:0,ps=W.reduce((gs,et)=>gs+(et.pending_records||0),0),fs=W.reduce((gs,et)=>gs+(et.paid_records||0),0);return{totalBarbers:He,currentPayout:lt,payoutChange:Math.abs(Et),payoutTrend:Et>=0?"up":"down",pendingPayments:ps,totalPaid:fs,averageCommission:He>0?lt/He:0}},[bt,Ee]),Oe=()=>{const W=Ge?.payout_frequency||"weekly",we=new Date;let He,Pe;if(W==="weekly"){const jt=we.getDay(),lt=jt===0?6:jt-1;He=new Date(we),He.setDate(we.getDate()-lt),Pe=new Date(He),Pe.setDate(He.getDate()+6)}else W==="bi_weekly"?(He=new Date(we),He.setDate(we.getDate()-13),Pe=new Date(we)):(He=new Date(we.getFullYear(),we.getMonth(),1),Pe=new Date(we.getFullYear(),we.getMonth()+1,0));return{startDate:He.toISOString().split("T")[0],endDate:Pe.toISOString().split("T")[0]}},qe=()=>{if(!Ge){f("Please configure payroll settings first before generating periods"),m(!0);return}const W=Oe();Ke(W),j(!0)},ut=async()=>{if(s?.branch_id)try{p(!0),f(null),await Re({branch_id:s.branch_id,default_commission_rate:Ne.default_commission_rate,payout_frequency:Ne.payout_frequency,payout_day:Ne.payout_day,tax_rate:Ne.tax_rate,created_by:s._id}),m(!1)}catch(W){f("Failed to save payroll settings"),console.error("Payroll settings error:",W)}finally{p(!1)}},dt=async()=>{if(!(!s?.branch_id||!Me.startDate||!Me.endDate))try{p(!0),f(null);const W=new Date(Me.startDate+"T00:00:00").getTime(),we=new Date(Me.endDate+"T23:59:59").getTime();if(W>=we){f("End date must be after start date");return}await ze({branch_id:s.branch_id,period_start:W,period_end:we,period_type:Ge?.payout_frequency||"weekly",created_by:s._id}),j(!1),Ke({startDate:"",endDate:""})}catch(W){f("Failed to create payroll period"),console.error("Create period error:",W)}finally{p(!1)}},zt=async W=>{if(W?._id){if(W.status==="calculated"){Y(W),J(!0);return}await Zt(W)}},Zt=async W=>{try{p(!0),f(null),await Ve({payroll_period_id:W._id,calculated_by:s._id})}catch(we){f("Failed to calculate payroll"),console.error("Calculate payroll error:",we)}finally{p(!1)}},Wt=async()=>{$&&await Zt($),J(!1),Y(null)},Ls=async(W,we,He,Pe)=>{try{p(!0),await _t({payroll_record_id:W,payment_method:we,payment_reference:He,notes:Pe,paid_by:s._id})}catch(jt){f("Failed to mark payment as complete"),console.error("Mark paid error:",jt)}finally{p(!1)}},Ks=()=>{p(!0),f(null),t?.(),setTimeout(()=>p(!1),1e3)},xa=()=>{try{let W="",we="";if(n==="overview")we=`payroll-overview-${new Date().toISOString().split("T")[0]}.csv`,W=`Payroll Overview Summary

`,W+=`Metric,Value
`,W+=`Active Barbers,${re.totalBarbers}
`,W+=`Current Period Payout,"${xt(re.currentPayout)}"
`,W+=`Payout Change,${re.payoutChange.toFixed(1)}%
`,W+=`Pending Payments,${re.pendingPayments}
`,W+=`Average Commission,"${xt(re.averageCommission)}"

`,W+=`Recent Payroll Periods
`,W+=`Period Start,Period End,Type,Status,Total Payout,Barber Count
`,(Array.isArray(bt)?bt:[]).forEach(ft=>{W+=`"${Gt(ft.period_start)}","${Gt(ft.period_end)}",`,W+=`${Un(ft.period_type)},`,W+=`${ft.status==="paid"?"Paid":ft.status==="calculated"?"Calculated":"Draft"},`,W+=`"${xt(ft.total_commissions||0)}",`,W+=`${ft.barber_count||0}
`});else if(n==="periods"&&o){we=`payroll-period-${Gt(o.period_start)}-${Gt(o.period_end)}.csv`,W=`Payroll Period: ${Gt(o.period_start)} - ${Gt(o.period_end)}
`,W+=`Status: ${o.status}
`,W+=`Total Earnings: "${xt(o.total_earnings||0)}"
`,W+=`Total Commissions: "${xt(o.total_commissions||0)}"
`,W+=`Total Deductions: "${xt(o.total_deductions||0)}"

`,W+=`Barber Payroll Records
`,W+=`Barber Name,Services Count,Service Revenue,Gross Commission,Daily Pay,Tax Deduction,Other Deductions,Net Pay,Payment Status
`;const lt=Array.isArray(V)?V:[],ft=Array.isArray(Ee)?Ee:[];lt.forEach(Et=>{const fs=ft.find(gs=>gs._id===Et.barber_id)?.full_name||"Unknown";W+=`"${fs}",`,W+=`${Et.total_services||0},`,W+=`"${xt(Et.total_service_revenue||0)}",`,W+=`"${xt(Et.gross_commission||0)}",`,W+=`"${xt(Et.daily_pay||0)}",`,W+=`"${xt(Et.tax_deduction||0)}",`,W+=`"${xt(Et.other_deductions||0)}",`,W+=`"${xt(Et.net_pay||0)}",`,W+=`${Et.payment_status==="paid"?"Paid":"Pending"}
`})}else if(n==="settings"){we=`payroll-settings-${new Date().toISOString().split("T")[0]}.csv`,W=`Payroll Settings

`,W+=`Setting,Value
`,W+=`Default Commission Rate,${Ne.default_commission_rate}%
`,W+=`Payout Frequency,${Un(Ne.payout_frequency)}
`,W+=`Payout Day,${Ne.payout_day}
`,W+=`Tax Rate,${Ne.tax_rate}%

`,W+=`Service Commission Rates
`,W+=`Service Name,Commission Rate
`;const lt=Array.isArray(Qe)?Qe:[],ft=Array.isArray(We)?We:[];lt.forEach(fs=>{const gs=ft.find(et=>et._id===fs.service_id);W+=`"${gs?.name||"Unknown"}",${fs.commission_rate}%
`}),W+=`
Barber Daily Rates
`,W+=`Barber Name,Daily Rate
`;const Et=Array.isArray(Bt)?Bt:[],ps=Array.isArray(Ee)?Ee:[];Et.forEach(fs=>{const gs=ps.find(et=>et._id===fs.barber_id);W+=`"${gs?.full_name||"Unknown"}","${xt(fs.daily_rate)}"
`})}else{f("Please select a view to export");return}const He=new Blob([W],{type:"text/csv;charset=utf-8;"}),Pe=document.createElement("a"),jt=URL.createObjectURL(He);Pe.setAttribute("href",jt),Pe.setAttribute("download",we),Pe.style.visibility="hidden",document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),f(null)}catch(W){f("Failed to export payroll data. Please try again."),console.error("Export error:",W)}},us=C.useMemo(()=>{const W=new Map;return(Array.isArray(Qe)?Qe:[]).forEach(we=>{W.set(we.service_id,we)}),W},[Qe]),_a=C.useMemo(()=>{const W=new Map;return(Array.isArray(Bt)?Bt:[]).forEach(we=>{const He=W.get(we.barber_id);(!He||(we.updatedAt||0)>(He.updatedAt||0))&&W.set(we.barber_id,we)}),W},[Bt]),ua=C.useMemo(()=>{const W=new Map;return(Array.isArray(ht)?ht:[]).forEach(we=>{W.set(we.product_id,we)}),W},[ht]),xt=W=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(W),Gt=W=>new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),_i=`
    body{font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#111; color:#e5e5e5; padding:24px;}
    .card{background:#1a1a1a; border:1px solid #333; border-radius:12px; padding:20px; margin-bottom:16px;}
    .header{display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:12px}
    .title{font-weight:800; font-size:18px}
    .grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    .row{display:flex; justify-content:space-between; margin:6px 0}
    .muted{color:#9ca3af}
    .accent{color:#ff8c42; font-weight:700}
    hr{border:0; border-top:1px solid #2b2b2b; margin:12px 0}
    .service-summary{margin-top:20px;}
    .service-table{border:1px solid #2b2b2b; border-radius:4px; padding:12px; background:#1a1a1a;}
    .service-header{font-weight:600; color:#9ca3af; margin-bottom:4px; display:flex; justify-content:space-between;}
    .service-header span{flex:3; text-align:left;}
    .service-header span:nth-child(2){flex:1; text-align:center;}
    .service-header span:nth-child(3){flex:1; text-align:right;}
    @media print { body{padding:0;background:#fff;color:#111} .card{border-color:#ddd;background:#fff} .accent{color:#111} .service-table{border-color:#ddd;background:#fff} }
  `,en=W=>{const we=Cs=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(Cs||0),He=o?`${Gt(o.period_start)}  ${Gt(o.period_end)}`:"",Pe={};(Array.isArray(W.bookings_detail)?W.bookings_detail:[]).forEach(Cs=>{const es=Cs.date||new Date(Cs.updatedAt).toISOString().split("T")[0];Pe[es]||(Pe[es]=[]),Pe[es].push(Cs)});const lt={};(Array.isArray(W.products_detail)?W.products_detail:[]).forEach(Cs=>{const es=new Date(Cs.date).toISOString().split("T")[0];lt[es]||(lt[es]=[]),lt[es].push(Cs)});const Et=new Set([...Object.keys(Pe),...Object.keys(lt)]),ps=Array.from(Et).sort((Cs,es)=>new Date(Cs)-new Date(es));let fs=0,gs=0,et=0;const it=ps.map(Cs=>{const es=Pe[Cs]||[],_r=lt[Cs]||[],Hn=new Date(Cs).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",weekday:"short"});es.length;const ma=es.reduce((qs,qt)=>qs+(qt.price||0),0);let aa=0;if(es.some(qs=>qs.commission!==void 0))aa=es.reduce((qs,qt)=>qs+(qt.commission||0),0);else{const qs=W.gross_commission-(W.product_commission||0),qt=W.total_service_revenue||0;if(qt>0&&ma>0){const $s=ma/qt;aa=qs*$s}else ma>0&&(aa=ma*(W.commission_rate/100))}_r.reduce((qs,qt)=>qs+qt.quantity,0),_r.reduce((qs,qt)=>qs+qt.total_amount,0);const Es=_r.reduce((qs,qt)=>qs+qt.commission_amount,0),Xs=W.daily_rate||0,Br=Math.max(aa,Xs)+Es;fs+=aa,gs+=Es,et+=Br;let Pi="";es.length>0&&(Pi=`<hr/><div style="font-weight: 600; margin: 12px 0 8px; color: white;">Service Booking Details</div>${es.map(qt=>{const $s=(qt.time||"--:--").slice(0,5),Ba=qt.commission!==void 0?`<span class="muted" style="font-size: 0.9em">(${qt.commission_rate}%: ${we(qt.commission)})</span>`:"";return`<div class="row"><span><span class="muted">${$s}</span>  ${qt.service_name} <span class="muted"> ${qt.customer_name}  ${qt.booking_code}</span></span><span>${we(qt.price)} ${Ba}</span></div>`}).join("")}`);let Jn="";_r.length>0&&(Jn=`<hr/><div style="font-weight: 600; margin: 12px 0 8px; color: white;">Product Transaction Details</div>${_r.map(qt=>{const $s=qt.commission_type==="fixed_amount"?`${we(qt.commission_rate)}/unit`:`${qt.commission_rate}%`;return`<div class="row"><span>${qt.product_name} <span class="muted"> Qty: ${qt.quantity}  ${$s}  ${qt.customer_name}</span></span><span>${we(qt.total_amount)} <span class="muted">(+${we(qt.commission_amount)})</span></span></div>`}).join("")}`);const Ti=aa<Xs?`<div class="row"><span class="muted" style="font-size:11px; font-style:italic;">Daily Rate Applied: ${we(Xs)}</span><span class="muted" style="font-size:11px;">(Commission < Rate)</span></div>`:Xs>0?`<div class="row"><span class="muted" style="font-size:11px; font-style:italic;">Daily Rate: ${we(Xs)}</span><span></span></div>`:"";return`
        <div class="card">
          <div class="header">
            <div>
              <div class="title">${W.barber_name}</div>
              <div class="muted">${Hn}</div>
            </div>
            <div class="accent">${we(Br)}</div>
          </div>
          <hr/>
          <div>
            <div class="row"><span class="muted">Service Commission</span><span>${we(aa)}</span></div>
            ${Ti}
            <div class="row"><span class="muted">Product Commission</span><span>${we(Es)}</span></div>
            <div class="row"><span class="muted">Final Daily Salary</span><span>${we(Br)}</span></div>
            <hr/>
            <div class="row" style="font-weight:800"><span>Total</span><span class="accent">${we(Br)}</span></div>
          </div>
          ${Pi}
          ${Jn}
        </div>
      `}).join(`
`),It=et-(W.tax_deduction||0)-(W.other_deductions||0),Vn=`
      <div class="card" style="background:#222; border:2px solid #ff8c42;">
        <div class="header">
          <div>
            <div class="title">${W.barber_name} - PERIOD SUMMARY</div>
            <div class="muted">Payroll Period: ${He}</div>
          </div>
          <div class="accent" style="font-size:24px">${we(It)}</div>
        </div>
        <hr/>
        <div>
          <div class="row"><span class="muted">Total Service Commission</span><span>${we(fs)}</span></div>
          <div class="row"><span class="muted">Total Product Commission</span><span>${we(gs)}</span></div>
          <div class="row"><span class="muted">Total Final Daily Salary</span><span>${we(et)}</span></div>
          ${(W.tax_deduction||0)>0?`<div class="row"><span class="muted">Tax Deduction</span><span>-${we(W.tax_deduction)}</span></div>`:""}
          ${(W.other_deductions||0)>0?`<div class="row"><span class="muted">Other Deductions</span><span>-${we(W.other_deductions)}</span></div>`:""}
          <hr/>
          <div class="row" style="font-weight:800; font-size:18px"><span>GRAND TOTAL</span><span class="accent">${we(It)}</span></div>
        </div>
      </div>
    `;return it+`
`+Vn},qn=(W,we)=>`<!doctype html>
    <html>
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>${W}</title>
        <style>${_i}</style>
      </head>
      <body>${we}</body>
    </html>`,$n=W=>{const we=document.createElement("iframe");we.style.position="fixed",we.style.right="0",we.style.bottom="0",we.style.width="0",we.style.height="0",we.style.border="0",document.body.appendChild(we);const He=we.contentWindow?.document;He&&(He.open(),He.write(W),He.close(),we.onload=()=>{setTimeout(()=>{we.contentWindow?.focus(),we.contentWindow?.print(),setTimeout(()=>document.body.removeChild(we),100)},150)})},Bi=async W=>{let we=W;if(!W.bookings_detail||W.bookings_detail.length===0){if(o)try{const[Pe,jt,lt,ft]=await Promise.all([ie({barber_id:W.barber_id,period_start:o.period_start,period_end:o.period_end}),Ae({barber_id:W.barber_id,period_start:o.period_start,period_end:o.period_end}),nt({barber_id:W.barber_id,period_start:o.period_start,period_end:o.period_end}),ct({barber_id:W.barber_id,period_start:o.period_start,period_end:o.period_end})]);we={...W,bookings_detail:Pe,bookings_summary:jt,service_summary:lt,product_summary:ft}}catch{}}else if(o)try{const[Pe,jt]=await Promise.all([nt({barber_id:W.barber_id,period_start:o.period_start,period_end:o.period_end}),ct({barber_id:W.barber_id,period_start:o.period_start,period_end:o.period_end})]);we={...W,service_summary:Pe,product_summary:jt}}catch{we=W}const He=qn(`Payroll  ${W.barber_name}`,en(we));$n(He)},Si=async()=>{const W=Array.isArray(V)?V:[],He=(await Promise.all(W.map(async lt=>{if(!o)return lt;try{const[ft,Et,ps,fs]=await Promise.all([lt.bookings_detail&&lt.bookings_detail.length>0?Promise.resolve(lt.bookings_detail):ie({barber_id:lt.barber_id,period_start:o.period_start,period_end:o.period_end}),Ae({barber_id:lt.barber_id,period_start:o.period_start,period_end:o.period_end}),nt({barber_id:lt.barber_id,period_start:o.period_start,period_end:o.period_end}),ct({barber_id:lt.barber_id,period_start:o.period_start,period_end:o.period_end})]);return{...lt,bookings_detail:ft,bookings_summary:Et,service_summary:ps,product_summary:fs}}catch{return lt}}))).map(lt=>en(lt)).join(`
<div style='page-break-after: always;'></div>
`),Pe=o?`Payroll  ${Gt(o.period_start)} to ${Gt(o.period_end)}`:"Payroll  All",jt=qn(Pe,He);$n(jt)},ra=W=>{const we=it=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(it||0),He=o?`${Gt(o.period_start)}  ${Gt(o.period_end)}`:"",Pe={};(Array.isArray(W.bookings_detail)?W.bookings_detail:[]).forEach(it=>{const It=it.date||new Date(it.updatedAt).toISOString().split("T")[0];Pe[It]||(Pe[It]=[]),Pe[It].push(it)});const lt={};(Array.isArray(W.products_detail)?W.products_detail:[]).forEach(it=>{const It=new Date(it.date).toISOString().split("T")[0];lt[It]||(lt[It]=[]),lt[It].push(it)});const Et=new Set([...Object.keys(Pe),...Object.keys(lt)]);let ps=0,fs=0,gs=0;Et.forEach(it=>{const It=Pe[it]||[],Vn=lt[it]||[],Cs=It.reduce((Es,Xs)=>Es+(Xs.price||0),0);let es=0;if(It.some(Es=>Es.commission!==void 0))es=It.reduce((Es,Xs)=>Es+(Xs.commission||0),0);else{const Es=W.gross_commission-(W.product_commission||0),Xs=W.total_service_revenue||0;if(Xs>0&&Cs>0){const rn=Cs/Xs;es=Es*rn}else Cs>0&&(es=Cs*(W.commission_rate/100))}const Hn=Vn.reduce((Es,Xs)=>Es+Xs.commission_amount,0),ma=W.daily_rate||0,sn=Math.max(es,ma)+Hn;ps+=es,fs+=Hn,gs+=sn});const et=gs-(W.tax_deduction||0)-(W.other_deductions||0);return`
      <div class="card" style="background:#fff; border:2px solid #ff8c42; color: #000; max-width: 600px; margin: 0 auto;">
        <div class="header">
          <div>
            <div class="title" style="font-size: 16px; font-weight: 800; color: #000;">${W.barber_name} - PERIOD SUMMARY</div>
            <div style="color: #555; font-size: 12px;">Payroll Period: ${He}</div>
          </div>
          <div style="font-size: 20px; font-weight: 800; color: #000;">${we(et)}</div>
        </div>
        <hr style="border-top: 2px solid #000; margin: 10px 0;"/>
        <div style="font-size: 14px;">
          <div class="row"><span style="color: #333;">Total Service Commission</span><span style="font-weight: 600;">${we(ps)}</span></div>
          <div class="row"><span style="color: #333;">Total Product Commission</span><span style="font-weight: 600;">${we(fs)}</span></div>
          <div class="row"><span style="color: #333;">Total Final Daily Salary</span><span style="font-weight: 600;">${we(gs)}</span></div>
          ${(W.tax_deduction||0)>0?`<div class="row"><span style="color: #333;">Tax Deduction</span><span style="color: #d32f2f;">-${we(W.tax_deduction)}</span></div>`:""}
          ${(W.other_deductions||0)>0?`<div class="row"><span style="color: #333;">Other Deductions</span><span style="color: #d32f2f;">-${we(W.other_deductions)}</span></div>`:""}
          <hr style="border-top: 2px solid #000; margin: 10px 0;"/>
          <div class="row" style="font-weight:800; font-size:16px; margin-top: 4px;"><span>GRAND TOTAL</span><span>${we(et)}</span></div>
        </div>
      </div>
    `},Lo=async()=>{const W=Array.isArray(V)?V:[];let we=[];if(G==="all"?we=W:we=W.filter(Et=>Et.barber_id===G),we.length===0){O(!1);return}const Pe=(await Promise.all(we.map(async Et=>{if(!o)return Et;try{if(Et.bookings_detail&&Et.bookings_detail.length>0)return Et;const ps=await ie({barber_id:Et.barber_id,period_start:o.period_start,period_end:o.period_end}),fs=Et.products_detail||[];return{...Et,bookings_detail:ps,products_detail:fs}}catch{return Et}}))).map(Et=>ra(Et)).join(`
<div style='page-break-after: always; height: 40px;'></div>
`),jt=`Payslips  ${o?Gt(o.period_start):""}`,lt=`
      ${_i}
      body { background: #fff; color: #000; }
      .card { background: #fff !important; color: #000 !important; border-color: #ff8c42 !important; box-shadow: none !important; }
      .muted { color: #555 !important; }
      .accent { color: #000 !important; }
      hr { border-color: #000 !important; }
    `,ft=`<!doctype html>
    <html>
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>${jt}</title>
        <style>${lt}</style>
      </head>
      <body>
        <div style="padding: 40px;">
          ${Pe}
        </div>
      </body>
    </html>`;$n(ft),O(!1)},Un=W=>{switch(W){case"weekly":return"Weekly";case"bi_weekly":return"Bi-Weekly";case"monthly":return"Monthly";default:return W}},tn=W=>{const we=new Set(g);we.has(W)?we.delete(W):we.add(W),y(we)},qo=()=>I?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>O(!1)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Print Payslip"}),e.jsx("button",{onClick:()=>O(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Target"}),e.jsxs("select",{value:G,onChange:W=>te(W.target.value),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Barbers"}),(Array.isArray(V)?V:[]).map(W=>e.jsx("option",{value:W.barber_id,children:W.barber_name},W.barber_id))]})]})}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:Lo,className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200",children:"Print"})]})]})]})]})}),document.body):null,$o=()=>b?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>j(!1)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Create Payroll Period"}),e.jsx("button",{onClick:()=>j(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Period Start Date"}),e.jsx("input",{type:"date",value:Me.startDate,onChange:W=>Ke(we=>({...we,startDate:W.target.value})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Period End Date"}),e.jsx("input",{type:"date",value:Me.endDate,onChange:W=>Ke(we=>({...we,endDate:W.target.value})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Period Summary"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("p",{children:["Frequency:"," ",Ge?.payout_frequency||"weekly"]}),e.jsxs("p",{children:["Duration:"," ",Me.startDate&&Me.endDate?Math.ceil((new Date(Me.endDate)-new Date(Me.startDate))/(1e3*60*60*24))+1:0," ","days"]}),e.jsxs("p",{children:["Commission Rate:"," ",Ge?.default_commission_rate||10,"%"]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>j(!1),className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#555555]/70 transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:dt,disabled:h||!Me.startDate||!Me.endDate,className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Creating...":"Create Period"})]})]})]})]})}),document.body):null,Sm=()=>d?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Payroll Settings"}),e.jsx("button",{onClick:()=>m(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Commission Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:Ne.default_commission_rate,onChange:W=>Ye(we=>({...we,default_commission_rate:parseFloat(W.target.value)||0})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payout Frequency"}),e.jsxs("select",{value:Ne.payout_frequency,onChange:W=>Ye(we=>({...we,payout_frequency:W.target.value})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi_weekly",children:"Bi-Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:Ne.payout_frequency==="weekly"?"Payout Day (0=Sunday, 6=Saturday)":"Payout Day of Month"}),e.jsx("input",{type:"number",min:Ne.payout_frequency==="weekly"?"0":"1",max:Ne.payout_frequency==="weekly"?"6":"31",value:Ne.payout_day,onChange:W=>Ye(we=>({...we,payout_day:parseInt(W.target.value)||0})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tax Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:Ne.tax_rate,onChange:W=>Ye(we=>({...we,tax_rate:parseFloat(W.target.value)||0})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:ut,disabled:h,className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":"Save Settings"})]})]})]})]})}),document.body):null,p0=()=>{if(!F||!L)return null;const W=Array.isArray(se)?se:[],we=Array.isArray(Qe)?Qe:[],He=Ge||{default_commission_rate:10},Pe=new Map;we.forEach(et=>{et.is_active&&Pe.set(et.service_id,et.commission_rate)});const lt=K?.find(et=>et.barber_id===L.barber_id)?.commission_rate||He.default_commission_rate||10,ft=W.map(et=>{const it=Pe.get(et.service_id)||lt,It=et.price*it/100;return{...et,commission_rate:it,commission_amount:It}}),Et=ft.reduce((et,it)=>{const It=it.date||new Date(it.updatedAt).toISOString().split("T")[0];return et[It]||(et[It]=[]),et[It].push(it),et},{}),ps=Object.keys(Et).sort((et,it)=>new Date(it)-new Date(et)),fs=ft.reduce((et,it)=>et+(it.price||0),0),gs=ft.reduce((et,it)=>et+it.commission_amount,0);return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>M(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Bookings  ",L.barber_name]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[Gt(o.period_start)," "," ",Gt(o.period_end)]})]}),e.jsx("button",{onClick:()=>M(!1),className:"w-8 h-8 rounded-lg bg-[#3A3A3A]/60 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-300 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"px-6 py-4 bg-[#171717] border-b border-[#2A2A2A]/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:ft.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Bookings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[var(--color-primary)]",children:xt(fs)}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:xt(gs)}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Commission"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[se===void 0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading bookings"})]}),se!==void 0&&ps.length===0&&e.jsx("div",{className:"bg-[#121212] border border-[#2A2A2A]/50 rounded-lg p-6 text-center text-gray-400",children:"No completed, paid bookings found for this period."}),ps.map(et=>e.jsxs("div",{className:"rounded-xl bg-[#121212] border border-[#2A2A2A]/50 overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-3 bg-[#171717] border-b border-[#2A2A2A] flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-white font-medium",children:new Date(et).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[Et[et].length," booking",Et[et].length>1?"s":""]})]}),e.jsx("div",{className:"divide-y divide-[#222]",children:Et[et].map(it=>{const It=it.time&&it.time.length>=4?it.time.slice(0,5):"--:--";return e.jsx("div",{className:"px-5 py-4 hover:bg-[#161616] transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"inline-flex items-center justify-center rounded-md bg-[#232323] border border-[#2A2A2A]/50 px-3 py-1.5",children:e.jsx("span",{className:"font-mono text-sm font-semibold text-[var(--color-primary)] leading-none",children:It})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-semibold",children:it.service_name}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[it.customer_name,"  ",it.booking_code]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(go,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-gray-400",children:"Rate:"}),e.jsxs("span",{className:"text-blue-400 font-medium",children:[it.commission_rate,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"w-3 h-3 text-green-400"}),e.jsx("span",{className:"text-gray-400",children:"Commission:"}),e.jsx("span",{className:"text-green-400 font-medium",children:xt(it.commission_amount)})]})]})]})]}),e.jsxs("div",{className:"text-right pl-3 shrink-0",children:[e.jsx("div",{className:"text-[var(--color-primary)] font-semibold text-lg",children:xt(it.price)}),e.jsx("div",{className:"text-xs text-gray-400",children:"Service Price"})]})]})},it.id)})})]},et))]})]})]})}),document.body)},gr=()=>{if(!P||!L)return null;const W=ke,we=Array.isArray(ht)?ht:[],He=Ge||{default_commission_rate:10},Pe=new Map;we.forEach(et=>{et.is_active&&Pe.set(et.product_id,et.commission_rate)});const lt=K?.find(et=>et.barber_id===L.barber_id)?.commission_rate||He.default_commission_rate||10,ft=W.reduce((et,it)=>{const It=it.date?new Date(it.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];return et[It]||(et[It]=[]),et[It].push(it),et},{}),Et=Object.keys(ft).sort((et,it)=>new Date(it)-new Date(et)),ps=W.reduce((et,it)=>et+(it.quantity||0),0),fs=W.reduce((et,it)=>et+(it.total_amount||0),0),gs=W.reduce((et,it)=>et+(it.commission_amount||0),0);return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Products  ",L.barber_name]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[Gt(o.period_start)," "," ",Gt(o.period_end)]})]}),e.jsx("button",{onClick:()=>T(!1),className:"w-8 h-8 rounded-lg bg-[#3A3A3A]/60 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-300 hover:text-[var(--color-primary)]"})})]}),e.jsx("div",{className:"px-6 py-4 bg-[#171717] border-b border-[#2A2A2A]/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:ps}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Products Sold"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:xt(fs)}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:xt(gs)}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Commission"})]})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[W.length===0&&e.jsx("div",{className:"bg-[#121212] border border-[#2A2A2A]/50 rounded-lg p-6 text-center text-gray-400",children:"No product sales found for this period."}),Et.map(et=>e.jsxs("div",{className:"rounded-xl bg-[#121212] border border-[#2A2A2A]/50 overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-3 bg-[#171717] border-b border-[#2A2A2A] flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4 text-cyan-400"}),e.jsx("span",{className:"text-white font-medium",children:new Date(et).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[ft[et].length," product",ft[et].length>1?"s":""]})]}),e.jsx("div",{className:"divide-y divide-[#222]",children:ft[et].map((it,It)=>e.jsx("div",{className:"px-5 py-4 hover:bg-[#161616] transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex items-start gap-4 flex-1",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-semibold",children:it.product_name}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[it.customer_name||"Walk-in","  Qty: ",it.quantity]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(go,{className:"w-3 h-3 text-blue-400"}),e.jsx("span",{className:"text-gray-400",children:it.commission_type==="fixed_amount"?"Fixed:":"Rate:"}),e.jsx("span",{className:"text-blue-400 font-medium",children:it.commission_type==="fixed_amount"?`${xt(it.commission_rate||0)}/unit`:`${it.commission_rate||lt}%`})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(as,{className:"w-3 h-3 text-green-400"}),e.jsx("span",{className:"text-gray-400",children:"Commission:"}),e.jsx("span",{className:"text-green-400 font-medium",children:xt(it.commission_amount||0)})]})]})]})}),e.jsxs("div",{className:"text-right pl-3 shrink-0",children:[e.jsx("div",{className:"text-cyan-400 font-semibold text-lg",children:xt(it.total_amount||0)}),e.jsx("div",{className:"text-xs text-gray-400",children:"Product Revenue"})]})]})},`${it.transaction_id||It}-${It}`))})]},et))]})]})]})}),document.body)},f0=()=>{if(!B)return null;const W=Array.isArray(We)?We:[],we=async()=>{if(!s?.branch_id)return;const He=Object.entries(pe).map(([Pe,jt])=>({serviceId:Pe,rate:parseFloat(String(jt))})).filter(Pe=>!isNaN(Pe.rate)).filter(Pe=>{const jt=us.get(Pe.serviceId);return!jt||Number(jt.commission_rate)!==Number(Pe.rate)});if(He.length!==0){Le(!0);try{for(const Pe of He)await _e({branch_id:s.branch_id,service_id:Pe.serviceId,commission_rate:Pe.rate,created_by:s._id});be({})}catch(Pe){console.error(Pe),f("Failed to save some service commission rates")}finally{Le(!1)}}};return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>S(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Service Commission Rates"}),e.jsx("button",{onClick:()=>S(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 border-b border-[#2A2A2A]/50",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"Service"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Current Rate"}),e.jsx("th",{className:"text-right py-2 px-2",children:"New Rate (%)"})]})}),e.jsx("tbody",{children:W.map(He=>{const Pe=us.get(He._id),jt=pe[He._id]??Pe?.commission_rate??"";return e.jsxs("tr",{className:"border-b border-[#2A2A2A]/20",children:[e.jsx("td",{className:"py-2 px-2 text-white",children:He.name}),e.jsx("td",{className:"py-2 px-2 text-right text-gray-300",children:Pe?`${Pe.commission_rate}%`:""}),e.jsx("td",{className:"py-2 px-2 text-right",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:jt,onChange:lt=>be(ft=>({...ft,[He._id]:lt.target.value})),className:"w-28 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent text-right"})})]},He._id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] text-sm",children:"Close"}),e.jsx("button",{onClick:we,disabled:st||Object.keys(pe).length===0,className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 disabled:opacity-50 text-sm",children:st?"Saving":"Save All Changes"})]})]})]})]})}),document.body)},Dm=()=>{if(!_)return null;const W=Array.isArray(wt)?wt:[],we=async()=>{if(!s?.branch_id)return;const He=Object.entries(Be).map(([Pe,jt])=>{const lt=ua.get(Pe),ft=jt.type||lt?.commission_type||"percentage";return{productId:Pe,type:ft,rate:ft==="percentage"?parseFloat(String(jt.value)):void 0,amount:ft==="fixed_amount"?parseFloat(String(jt.value)):void 0}}).filter(Pe=>!(Pe.type==="percentage"&&(isNaN(Pe.rate)||Pe.rate===void 0)||Pe.type==="fixed_amount"&&(isNaN(Pe.amount)||Pe.amount===void 0))).filter(Pe=>{const jt=ua.get(Pe.productId);return!jt||jt.commission_type!==Pe.type||Pe.type==="percentage"&&Number(jt.commission_rate)!==Number(Pe.rate)||Pe.type==="fixed_amount"&&Number(jt.fixed_amount)!==Number(Pe.amount)});if(He.length!==0){Pt(!0);try{for(const Pe of He)await $e({branch_id:s.branch_id,product_id:Pe.productId,commission_type:Pe.type,commission_rate:Pe.rate,fixed_amount:Pe.amount,created_by:s._id});Ue({})}catch(Pe){console.error(Pe),f("Failed to save some product commission rates")}finally{Pt(!1)}}};return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>k(!1)}),e.jsxs("div",{className:"relative w-full max-w-3xl rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Product Commission Rates"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Set fixed amount or percentage commission for each product"})]}),e.jsx("button",{onClick:()=>k(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 border-b border-[#2A2A2A]/50",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"Product"}),e.jsx("th",{className:"text-center py-2 px-2",children:"Current"}),e.jsx("th",{className:"text-center py-2 px-2",children:"Type"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Value"})]})}),e.jsx("tbody",{children:W.map(He=>{const Pe=ua.get(He._id),jt=Be[He._id],lt=jt?.type||Pe?.commission_type||"percentage",ft=jt?.value??(Pe?Pe.commission_type==="fixed_amount"?Pe.fixed_amount:Pe.commission_rate:"");return e.jsxs("tr",{className:"border-b border-[#2A2A2A]/20",children:[e.jsx("td",{className:"py-2 px-2 text-white",children:He.name}),e.jsx("td",{className:"py-2 px-2 text-center text-gray-300",children:Pe?Pe.commission_type==="fixed_amount"?`${Pe.fixed_amount}`:`${Pe.commission_rate}%`:""}),e.jsx("td",{className:"py-2 px-2 text-center",children:e.jsxs("select",{value:lt,onChange:Et=>Ue(ps=>({...ps,[He._id]:{type:Et.target.value,value:ft}})),className:"w-32 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"percentage",children:"Percentage"}),e.jsx("option",{value:"fixed_amount",children:"Fixed Amount"})]})}),e.jsx("td",{className:"py-2 px-2 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[lt==="percentage"&&e.jsx("span",{className:"text-gray-400",children:"%"}),lt==="fixed_amount"&&e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("input",{type:"number",min:"0",max:lt==="percentage"?"100":void 0,step:lt==="percentage"?"0.1":"1",value:ft,onChange:Et=>Ue(ps=>({...ps,[He._id]:{type:lt,value:Et.target.value}})),placeholder:lt==="percentage"?"0-100":"Amount",className:"w-24 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent text-right"})]})})]},He._id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] text-sm",children:"Close"}),e.jsx("button",{onClick:we,disabled:kt||Object.keys(Be).length===0,className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 disabled:opacity-50 text-sm",children:kt?"Saving":"Save All Changes"})]})]})]})]})}),document.body)},Di=()=>{if(!E)return null;const W=Array.isArray(Ee)?Ee:[],we=async()=>{if(!s?.branch_id)return;const He=Object.entries(ue).map(([Pe,jt])=>({barberId:Pe,rate:parseFloat(String(jt))})).filter(Pe=>!isNaN(Pe.rate)).filter(Pe=>{const jt=_a.get(Pe.barberId);return!jt||Number(jt.daily_rate)!==Number(Pe.rate)});if(He.length!==0){Jt(!0);try{for(const Pe of He)await ot({barber_id:Pe.barberId,branch_id:s.branch_id,daily_rate:Pe.rate,created_by:s._id});Ie({})}catch(Pe){console.error(Pe),f("Failed to save some barber daily rates")}finally{Jt(!1)}}};return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>D(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Barber Daily Rates"}),e.jsx("button",{onClick:()=>D(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 border-b border-[#2A2A2A]/50",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"Barber"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Current Daily Rate"}),e.jsx("th",{className:"text-right py-2 px-2",children:"New Daily Rate"})]})}),e.jsx("tbody",{children:W.map(He=>{const Pe=_a.get(He._id),jt=ue[He._id]??Pe?.daily_rate??"";return e.jsxs("tr",{className:"border-b border-[#2A2A2A]/20",children:[e.jsx("td",{className:"py-2 px-2 text-white",children:He.full_name}),e.jsx("td",{className:"py-2 px-2 text-right text-gray-300",children:Pe?xt(Pe.daily_rate):""}),e.jsx("td",{className:"py-2 px-2 text-right",children:e.jsx("input",{type:"number",min:"0",step:"1",value:jt,onChange:lt=>Ie(ft=>({...ft,[He._id]:lt.target.value})),className:"w-28 bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent text-right"})})]},He._id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] text-sm",children:"Close"}),e.jsx("button",{onClick:we,disabled:St||Object.keys(ue).length===0,className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 disabled:opacity-50 text-sm",children:St?"Saving":"Save All Changes"})]})]})]})]})}),document.body)},g0=()=>{if(!N||!L)return null;const W=async we=>{we.preventDefault();try{ve(!0),await Ls(L._id,xe.payment_method,xe.payment_reference,xe.notes),w(!1),X(null),oe({payment_method:"bank_transfer",payment_reference:"",notes:""})}catch(He){console.error("Payment submission error:",He)}finally{ve(!1)}};return Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>{w(!1),X(null)}}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-[#1A1A1A] border border-[#2A2A2A]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#2A2A2A]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Mark as Paid"}),e.jsx("button",{onClick:()=>{w(!1),X(null)},className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[var(--color-primary)]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(Ze,{className:"w-4 h-4 text-gray-400 hover:text-[var(--color-primary)]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Barber:"}),e.jsx("span",{className:"text-sm font-medium text-white",children:L?.barber_name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Net Pay:"}),e.jsxs("span",{className:"text-lg font-bold text-[var(--color-primary)]",children:["",L?.net_pay?.toLocaleString()||"0"]})]})]})}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Method"}),e.jsxs("select",{value:xe.payment_method,onChange:we=>oe(He=>({...He,payment_method:we.target.value})),className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",required:!0,children:[e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"digital_wallet",children:"Digital Wallet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Reference"}),e.jsx("input",{type:"text",value:xe.payment_reference,onChange:we=>oe(He=>({...He,payment_reference:we.target.value})),placeholder:"Transaction ID, check number, etc.",className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:xe.notes,onChange:we=>oe(He=>({...He,notes:we.target.value})),placeholder:"Additional notes about the payment...",rows:3,className:"w-full bg-[#1A1A1A] border border-[#2A2A2A] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{w(!1),X(null)},className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200",disabled:de,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:de,className:"flex-1 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:de?"Processing...":"Mark as Paid"})]})]})]})]})]})}),document.body)},Fi=()=>Ge===void 0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payroll settings..."})]}):Ge===null||!Ge?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Lr,{className:"h-8 w-8 text-[var(--color-primary)]"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Payroll Setup Required"}),e.jsx("p",{className:"text-gray-300 mb-6 max-w-md mx-auto",children:"Configure your payroll settings to start managing barber commissions and processing payments."}),e.jsx("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 font-medium",children:"Configure Payroll Settings"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Setup Guide"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-[var(--color-primary)] text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsx("span",{className:"text-gray-300",children:"Set default commission rate (recommended: 10%)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-[var(--color-primary)] text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsx("span",{className:"text-gray-300",children:"Choose payout frequency (weekly, bi-weekly, or monthly)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-[var(--color-primary)] text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsx("span",{className:"text-gray-300",children:"Configure tax rate if applicable"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),e.jsx("span",{className:"text-gray-400",children:"Generate your first payroll period"})]})]})]})]}):bt===void 0||Ee===void 0||Ge===void 0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payroll data..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(hs,{className:"h-6 w-6 text-[var(--color-primary)]"}),e.jsx(wr,{className:"h-4 w-4 text-green-400"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active Barbers"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:re.totalBarbers}),e.jsx("p",{className:"text-xs text-green-400",children:"Ready for payroll"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(as,{className:"h-6 w-6 text-green-400"}),e.jsx(wr,{className:`h-4 w-4 ${re.payoutTrend==="up"?"text-green-400":"text-red-400"}`})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Current Period Payout"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:xt(re.currentPayout)}),e.jsxs("p",{className:`text-xs ${re.payoutTrend==="up"?"text-green-400":"text-red-400"}`,children:[re.payoutTrend==="up"?"+":"-",re.payoutChange.toFixed(1),"% from last period"]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Nt,{className:"h-6 w-6 text-yellow-400"}),e.jsx(Xe,{className:"h-4 w-4 text-yellow-400"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Pending Payments"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:re.pendingPayments}),e.jsx("p",{className:"text-xs text-yellow-400",children:"Require processing"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(Eo,{className:"h-6 w-6 text-blue-400"}),e.jsx(hr,{className:"h-4 w-4 text-green-400"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Average Commission"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:xt(re.averageCommission)}),e.jsx("p",{className:"text-xs text-gray-400",children:"Per barber"})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Payroll Periods"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Latest payroll periods and their status"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:qe,disabled:h,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"Create New Period"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#2A2A2A]/50",children:[e.jsx("th",{className:"text-left py-4 px-4 font-medium text-gray-300",children:"Period"}),e.jsx("th",{className:"text-left py-4 px-4 font-medium text-gray-300",children:"Type"}),e.jsx("th",{className:"text-left py-4 px-4 font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"text-right py-4 px-4 font-medium text-gray-300",children:"Total Payout"}),e.jsx("th",{className:"text-center py-4 px-4 font-medium text-gray-300",children:"Barbers"}),e.jsx("th",{className:"text-center py-4 px-4 font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:(Array.isArray(bt)?bt:[]).map(W=>e.jsxs("tr",{className:"border-b border-[#2A2A2A]/20 hover:bg-[#1A1A1A]/30 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[Gt(W.period_start)," -"," ",Gt(W.period_end)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Created ",Gt(W.createdAt)]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-sm text-gray-300",children:Un(W.period_type)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W.status==="paid"?"bg-green-500/20 text-green-400":W.status==="calculated"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:W.status==="paid"?"Paid":W.status==="calculated"?"Calculated":"Draft"})}),e.jsx("td",{className:"py-4 px-4 text-right",children:e.jsx("span",{className:"text-[var(--color-primary)] font-bold",children:xt(W.total_commissions)})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-green-400",children:W.paid_records||0}),e.jsx("span",{className:"text-gray-400",children:" / "}),e.jsx("span",{className:"text-yellow-400",children:W.pending_records||0}),e.jsx("span",{className:"text-gray-400",children:" / "}),e.jsx("span",{className:"text-white",children:W.total_barbers||0})]})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{c(W),i("period")},className:"px-3 py-1 bg-[var(--color-primary)] text-white rounded text-xs hover:bg-[var(--color-primary)]/90 transition-colors",children:"View Details"}),W.status!=="paid"&&(s?.role==="branch_admin"||s?.role==="super_admin")&&e.jsx("button",{onClick:()=>{R(W),ee(""),ne(!0)},className:"px-3 py-1 bg-red-600/90 text-white rounded text-xs hover:bg-red-600 transition-colors",children:"Delete"})]})})]},W._id))})]})})]})]}),Fm=()=>o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Payroll Period: ",Gt(o.period_start)," -"," ",Gt(o.period_end)]}),e.jsxs("p",{className:"text-sm text-gray-300",children:[Un(o.period_type)," payroll "," ",o.status==="paid"?"Completed":o.status==="calculated"?"Ready for Payment":"Draft"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[o.status!=="paid"&&e.jsxs("button",{onClick:()=>zt(o),disabled:h,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Eo,{className:"h-4 w-4"}),e.jsx("span",{children:o.status==="calculated"?"Recalculate Payroll":"Calculate Payroll"})]}),Array.isArray(V)&&V.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444]/60 border border-[#2A2A2A] text-gray-200 rounded-lg hover:bg-[#2A2A2A] transition-colors text-sm",children:[e.jsx(Ao,{className:"h-4 w-4"}),e.jsx("span",{children:"Print Payslip"})]}),e.jsxs("button",{onClick:Si,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444]/60 border border-[#2A2A2A] text-gray-200 rounded-lg hover:bg-[#2A2A2A] transition-colors text-sm",children:[e.jsx(tb,{className:"h-4 w-4"}),e.jsx("span",{children:"Print All"})]})]}),e.jsx("button",{onClick:()=>i("overview"),className:"px-4 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",children:"Back to Overview"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(as,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Total Earnings"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:xt(o.total_earnings)}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-[#2A2A2A]/30 flex items-center justify-between gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400",children:"Service"}),e.jsx("span",{className:"text-[var(--color-primary)] font-medium",children:xt(o.total_service_revenue||0)})]}),e.jsx("span",{className:"text-gray-500",children:"+"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-400",children:"Product"}),e.jsx("span",{className:"text-cyan-400 font-medium",children:xt(o.total_product_revenue||0)})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(go,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Commissions"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:xt(o.total_commissions)})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Eo,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Deductions"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:xt(o.total_deductions)})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(hs,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Barbers"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:(Array.isArray(V)?V:[]).length})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Barber Payroll Records"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Individual commission calculations and payment status"})]})}),e.jsx("div",{className:"space-y-4",children:(Array.isArray(V)?V:[]).map(W=>e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]/50 overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:W.barber_name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[W.total_services," services"]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-[var(--color-primary)]",children:xt(W.net_pay)}),e.jsx("p",{className:"text-sm text-gray-400",children:"Net Pay"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W.status==="paid"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:W.status==="paid"?"Paid":"Pending"}),e.jsx("button",{onClick:()=>{X(W),M(!0)},className:"px-3 py-1 bg-[#444444]/60 border border-[#2A2A2A] text-gray-200 rounded text-xs hover:bg-[#2A2A2A] transition-colors",children:"View Bookings"}),e.jsx("button",{onClick:()=>{X(W),T(!0)},className:"px-3 py-1 bg-[#444444]/60 border border-[#2A2A2A] text-gray-200 rounded text-xs hover:bg-[#2A2A2A] transition-colors",children:"View Products"}),e.jsx("button",{onClick:()=>tn(W._id),className:"p-1 text-gray-400 hover:text-white transition-colors",children:g.has(W._id)?e.jsx(Zg,{className:"h-4 w-4"}):e.jsx(ea,{className:"h-4 w-4"})}),W.status==="calculated"&&e.jsx("button",{onClick:()=>{X(W),oe({payment_method:"bank_transfer",payment_reference:"",notes:""}),w(!0)},className:"px-3 py-1 bg-[var(--color-primary)] text-white rounded text-xs hover:bg-[var(--color-primary)]/90 transition-colors",children:"Mark Paid"}),e.jsx("button",{onClick:()=>Bi(W),className:"px-3 py-1 bg-[#444444]/60 border border-[#2A2A2A] text-gray-200 rounded text-xs hover:bg-[#2A2A2A] transition-colors",children:"Print"})]})]})]}),g.has(W._id)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-[#2A2A2A]/50",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[e.jsx(as,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Service Earnings"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Services:"}),e.jsx("span",{className:"text-white font-medium",children:W.total_services})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Service Revenue:"}),e.jsx("span",{className:"text-white",children:xt(W.total_service_revenue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Service Commission:"}),e.jsx("span",{className:"text-[var(--color-primary)] font-medium",children:xt(W.service_commission||W.total_service_revenue*(W.commission_rate||0)/100)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Avg per Service:"}),e.jsx("span",{className:"text-gray-300",children:W.total_services>0?xt(W.total_service_revenue/W.total_services):"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[e.jsx(as,{className:"w-4 h-4 mr-2 text-cyan-400"}),"Product Earnings"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Products:"}),e.jsx("span",{className:"text-white font-medium",children:W.total_products||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Product Revenue:"}),e.jsx("span",{className:"text-white",children:xt(W.total_product_revenue||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Product Commission:"}),e.jsx("span",{className:"text-cyan-400 font-medium",children:xt(W.product_commission||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Avg per Product:"}),e.jsx("span",{className:"text-gray-300",children:W.total_products>0?xt(W.total_product_revenue/W.total_products):"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 text-blue-400"}),"Daily Rate & Calculation"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Daily Rate:"}),e.jsx("span",{className:"text-white",children:xt(W.daily_rate||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Days Worked:"}),e.jsx("span",{className:"text-white",children:W.days_worked||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Sales:"}),e.jsx("span",{className:"text-white",children:xt(W.total_service_revenue)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[e.jsx(wr,{className:"w-4 h-4 mr-2 text-green-400"}),"Final Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Gross Commission (ref):"}),e.jsx("span",{className:"text-white",children:xt(W.gross_commission)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Final Daily Salary:"}),e.jsx("span",{className:"text-white font-medium",children:xt(W.daily_pay||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Tax Rate:"}),e.jsx("span",{className:"text-gray-300",children:W.tax_deduction>0?`${(W.tax_deduction/(W.daily_pay||1)*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Tax Deduction:"}),e.jsxs("span",{className:"text-red-400",children:["-",xt(W.tax_deduction)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Other Deductions:"}),e.jsxs("span",{className:"text-red-400",children:["-",xt(W.other_deductions)]})]}),e.jsxs("div",{className:"flex justify-between font-medium pt-2 border-t border-[#2A2A2A]/50",children:[e.jsx("span",{className:"text-white",children:"Net Pay:"}),e.jsx("span",{className:"text-[var(--color-primary)] text-lg",children:xt(W.net_pay)})]})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-[#2A2A2A]/50",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("h6",{className:"text-xs font-medium text-gray-400 mb-3 uppercase tracking-wide",children:"Performance Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Services per Day:"}),e.jsx("span",{className:"text-white",children:W.days_worked>0?(W.total_services/W.days_worked).toFixed(1):"0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Revenue per Day:"}),e.jsx("span",{className:"text-white",children:W.days_worked>0?xt(W.total_service_revenue/W.days_worked):"0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Commission per Day:"}),e.jsx("span",{className:"text-white",children:W.days_worked>0?xt(W.gross_commission/W.days_worked):"0"})]})]})]})})}),W.status==="paid"&&W.paid_at&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-[#2A2A2A]/50",children:[e.jsx("h6",{className:"text-xs font-medium text-gray-400 mb-3 uppercase tracking-wide",children:"Payment Information"}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400",children:"Paid on:"}),e.jsx("span",{className:"text-white",children:Gt(W.paid_at)})]}),W.payment_method&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400",children:"Method:"}),e.jsx("span",{className:"text-white capitalize",children:W.payment_method.replace("_"," ")})]}),W.payment_reference&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400",children:"Reference:"}),e.jsx("span",{className:"text-white font-mono text-xs",children:W.payment_reference})]})]}),W.notes&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("span",{className:"text-gray-400 text-sm",children:["Notes:"," "]}),e.jsx("span",{className:"text-gray-300 text-sm",children:W.notes})]})]})]})]})},W._id))})]})]}):null,br=()=>Z&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-[#1F1F1F] border border-[#2A2A2A]/50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Delete Payroll Period"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"This will permanently delete the selected payroll period and all its payroll records and adjustments. This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["Type"," ",e.jsx("span",{className:"text-red-400 font-semibold",children:"confirm delete record"})," ","to proceed."]}),e.jsx("input",{type:"text",value:Q,onChange:W=>ee(W.target.value),placeholder:"confirm delete record",className:"w-full h-11 px-4 bg-[#121212] border border-[#2A2A2A]/50 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500/40"}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-5",children:[e.jsx("button",{onClick:()=>ne(!1),className:"px-4 py-2 text-sm bg-[#333] text-gray-200 rounded-lg hover:bg-[#2A2A2A]",children:"Cancel"}),e.jsx("button",{disabled:Q.trim().toLowerCase()!=="confirm delete record",onClick:async()=>{if(le)try{p(!0),await pt({payroll_period_id:le._id}),ne(!1),R(null)}catch(W){console.error("Delete period error:",W),f("Failed to delete payroll period")}finally{p(!1)}},className:`px-4 py-2 text-sm rounded-lg ${Q.trim().toLowerCase()==="confirm delete record"?"bg-red-600 text-white hover:bg-red-700":"bg-red-900/40 text-red-300/60 cursor-not-allowed"}`,children:"Delete Period"})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Payroll Management"}),e.jsx("p",{className:"text-gray-300 mt-1",children:"Manage barber commissions and payroll processing"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-1.5 px-3 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",title:"Settings",children:[e.jsx(Lr,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xl:inline",children:"Settings"})]}),e.jsx("div",{className:"h-6 w-px bg-[#2A2A2A]"}),e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 px-3 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",title:"Service Commission Rates",children:[e.jsx(go,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xl:inline",children:"Service"})]}),e.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-1.5 px-3 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",title:"Product Commission Rates",children:[e.jsx(go,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xl:inline",children:"Product"})]}),e.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 px-3 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",title:"Daily Rates",children:[e.jsx(as,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xl:inline",children:"Daily"})]}),e.jsx("div",{className:"h-6 w-px bg-[#2A2A2A]"}),e.jsxs("button",{onClick:Ks,disabled:h,className:"flex items-center gap-1.5 px-3 py-2 bg-[#444444]/50 border border-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh Data",children:[e.jsx(Ps,{className:`h-4 w-4 ${h?"animate-spin":""}`}),e.jsx("span",{className:"hidden xl:inline",children:h?"Loading...":"Refresh"})]}),e.jsxs("button",{onClick:xa,className:"flex items-center gap-1.5 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-primary)]/90 transition-all duration-200 text-sm font-medium shadow-lg shadow-[var(--color-primary)]/20",title:"Export to CSV",children:[e.jsx(ka,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),u&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"text-red-400",children:u}),e.jsx("button",{onClick:()=>f(null),className:"ml-auto text-red-400 hover:text-red-300",children:e.jsx(Ze,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-lg border border-[#2A2A2A]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>i("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="overview"?"bg-[var(--color-primary)] text-white":"text-gray-300 hover:text-white hover:bg-[#1A1A1A]"}`,children:"Overview"}),o&&e.jsx("button",{onClick:()=>i("period"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="period"?"bg-[var(--color-primary)] text-white":"text-gray-300 hover:text-white hover:bg-[#1A1A1A]"}`,children:"Period Details"})]})}),n==="overview"?Fi():Fm(),$o(),Sm(),g0(),f0(),Dm(),Di(),p0(),gr(),qo(),br(),e.jsx(e9,{isOpen:q,type:"confirm",accent:"brand",title:"Recalculate Payroll?",message:"Recalculating will replace existing payroll records for this period. Continue?",confirmText:"Recalculate",cancelText:"Cancel",onConfirm:Wt,onClose:()=>{J(!1),Y(null)}})]})},_T=()=>{const t=new Date().getFullYear(),{branding:s}=Ts();return e.jsx("footer",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A] border-t border-[#333333]/50 py-8 px-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",t," ",s?.display_name,". All rights reserved."]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Professional barbershop management solution"})]}),e.jsx("div",{className:"flex items-center justify-center space-x-3",children:e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-[#2A2A2A] border border-[#444444]/50 rounded-lg hover:border-[var(--color-primary)]/30 transition-colors",children:[e.jsx(WS,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsxs("span",{className:"text-gray-300 text-sm font-medium flex items-center gap-1",children:[s?.display_name," X AVEXA Systems",e.jsx("span",{className:"heart-beat text-blue-400",children:""})]}),e.jsx("span",{className:"text-white font-bold text-sm hidden",style:{display:"none"},children:"BroadHeader"})]})}),e.jsx("div",{className:"text-center lg:text-right",children:e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-4",children:[e.jsxs("span",{className:"text-gray-500 text-xs",children:["v",zo]}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Multi-Branch System"})]})})]})})})},Nf="last_seen_notifications",a9=()=>{const{user:t}=Dt(),s=wi(),n=C.useRef(new Set),i=C.useRef(!1),o=me(H.services.notifications.getUserNotifications,t?._id?{userId:t._id,limit:20}:"skip");return C.useEffect(()=>{if(!o||!t)return;const c=o.filter(m=>!m.is_read);if(!i.current){i.current=!0;try{const m=localStorage.getItem(`${Nf}_${t._id}`);m&&JSON.parse(m).forEach(p=>n.current.add(p))}catch(m){console.error("[Notifications] Error loading seen notifications:",m)}c.forEach(m=>{n.current.add(m._id)});try{const m=Array.from(n.current);localStorage.setItem(`${Nf}_${t._id}`,JSON.stringify(m))}catch(m){console.error("[Notifications] Error saving seen notifications:",m)}return}const d=c.filter(m=>!n.current.has(m._id));if(d.length!==0){d.forEach(m=>{switch(n.current.add(m._id),m.type){case"booking":const h=t?.role==="customer";s.booking(m.title,m.message,{duration:6e3,action:h?{label:m.action_label||"View",onClick:()=>{window.dispatchEvent(new CustomEvent("switchToBookings"))}}:void 0});break;case"payment":s.payment(m.title,m.message,{duration:6e3});break;case"reminder":s.reminder(m.title,m.message,{duration:7e3});break;case"promotion":s.promotion(m.title,m.message,{duration:6e3});break;case"alert":m.priority==="urgent"||m.priority==="high"?s.error(m.title,m.message,{duration:8e3}):s.warning(m.title,m.message,{duration:6e3});break;case"system":s.info(m.title,m.message,{duration:5e3});break;default:s.info(m.title,m.message,{duration:5e3})}});try{const m=Array.from(n.current).slice(-100);localStorage.setItem(`${Nf}_${t._id}`,JSON.stringify(m))}catch(m){console.error("[Notifications] Error saving seen notifications:",m)}}},[o,t,s]),{notifications:o,unreadCount:o?.filter(c=>!c.is_read).length||0}},BT=()=>{const t=wi();return{showBookingCreated:(p,u,f)=>{t.booking("Booking Confirmed!",`Your ${u?.name||"service"} appointment at ${f?.name||"our branch"} has been confirmed.`,{duration:7e3,action:{label:"View Booking",onClick:()=>{p?.booking_code&&(window.location.href=`/booking/${p.booking_code}`)},showArrow:!0}})},showBookingUpdated:(p,u="updated")=>{const f={rescheduled:"Your appointment has been rescheduled.",cancelled:"Your booking has been cancelled.",confirmed:"Your booking has been confirmed.",completed:"Your appointment has been completed. Thank you!",updated:"Your booking has been updated."},g={rescheduled:"Booking Rescheduled",cancelled:"Booking Cancelled",confirmed:"Booking Confirmed",completed:"Appointment Completed",updated:"Booking Updated"};t.booking(g[u]||"Booking Updated",f[u]||"Your booking has been updated.",{duration:6e3,action:p?.booking_code?{label:"View Details",onClick:()=>{window.location.href=`/booking/${p.booking_code}`},showArrow:!0}:void 0})},showPaymentSuccess:(p,u)=>{t.payment("Payment Successful",`Payment of ${p?.amount||"0"} received for booking ${u?.booking_code||""}.`,{duration:7e3,action:{label:"View Receipt",onClick:()=>{u?.booking_code&&(window.location.href=`/booking/${u.booking_code}/receipt`)},showArrow:!0}})},showPaymentFailed:(p,u)=>{t.error("Payment Failed",`Payment for booking ${u?.booking_code||""} could not be processed. Please try again.`,{duration:8e3,action:{label:"Retry Payment",onClick:()=>{u?.booking_code&&(window.location.href=`/booking/${u.booking_code}/payment`)},showArrow:!0}})},showVoucherReceived:(p,u)=>{t.promotion("Voucher Received!",`You've received a voucher for ${u?.name||"services"}. Value: ${p?.value||"0"}`,{duration:8e3,action:{label:"View Vouchers",onClick:()=>{window.location.href="/customer/vouchers"},showArrow:!0}})},showReminder:(p,u)=>{t.reminder("Appointment Reminder",`Reminder: Your ${u?.name||"appointment"} is scheduled for ${p?.date} at ${p?.time}.`,{duration:1e4,action:{label:"View Details",onClick:()=>{p?.booking_code&&(window.location.href=`/booking/${p.booking_code}`)},showArrow:!0}})},showWelcomeBack:p=>{t.info("Welcome Back!",`Good to see you again, ${p?.username||"valued customer"}!`,{duration:5e3})},showSystemAlert:(p,u,f="medium")=>{f==="urgent"||f==="high"?t.error(p,u,{duration:1e4}):f==="medium"?t.warning(p,u,{duration:7e3}):t.info(p,u,{duration:5e3})}}},n9=()=>{const t=BT();fr.useEffect(()=>{const s=n=>{const{type:i,data:o}=n.detail;switch(i){case"booking_created":t.showBookingCreated(o.booking,o.service,o.branch);break;case"booking_updated":t.showBookingUpdated(o.booking,o.updateType);break;case"payment_success":t.showPaymentSuccess(o.payment,o.booking);break;case"payment_failed":t.showPaymentFailed(o.payment,o.booking);break;case"voucher_received":t.showVoucherReceived(o.voucher,o.service);break;case"reminder":t.showReminder(o.booking,o.service);break;case"system_alert":t.showSystemAlert(o.title,o.message,o.priority);break;case"welcome_back":t.showWelcomeBack(o.user);break;default:console.warn("Unknown notification type:",i)}};return window.addEventListener("bookingNotification",s),()=>{window.removeEventListener("bookingNotification",s)}},[t])};function ST(){const{user:t,logout:s}=Dt(),n=Ws(),[i,o]=C.useState(()=>localStorage.getItem("staff_dashboard_active_tab")||"overview"),[c,d]=C.useState(null),[m,h]=C.useState(!1);a9(),n9(),C.useEffect(()=>{localStorage.setItem("staff_dashboard_active_tab",i)},[i]);const p=t?.role==="super_admin"?me(H.services.bookings.getAllBookings):t?.branch_id?me(H.services.bookings.getBookingsByBranch,{branch_id:t.branch_id}):void 0,u=t?.role==="super_admin"?me(H.services.services.getAllServices):t?.branch_id?me(H.services.services.getServicesByBranch,{branch_id:t.branch_id}):void 0,f=t?.role==="super_admin"?me(H.services.barbers.getAllBarbers):t?.branch_id?me(H.services.barbers.getBarbersByBranch,{branch_id:t.branch_id}):void 0,g=t?.role==="super_admin"?me(H.services.vouchers.getAllVouchers):t?.branch_id?me(H.services.vouchers.getVouchersByBranch,{branch_id:t.branch_id}):void 0,y=t?.role==="super_admin"?me(H.services.events.getAllEvents):t?.branch_id?me(H.services.events.getEventsByBranch,{branch_id:t.branch_id}):void 0,b=t?.role==="super_admin"?me(H.services.auth.getAllUsers):t?.branch_id?me(H.services.auth.getUsersByBranch,{branch_id:t.branch_id}):void 0,j=p?p.filter(F=>F.status!=="completed"&&F.status!=="cancelled").length:0,w=!p||!u||!g||!f||!b?null:{totalBookings:p.filter(F=>F.status!=="cancelled").length,totalServices:u.length,totalVouchers:g.length,totalBarbers:f.length,totalCustomers:b.length,todayBookings:p.filter(F=>{const M=new Date().toDateString();return new Date(F.date).toDateString()===M}).length,activeVouchers:g.filter(F=>F.is_active).length,activeServices:u.filter(F=>F.is_active).length,activeBarbers:f.filter(F=>F.is_active).length},B=()=>w?e.jsxs("div",{className:"space-y-6",children:[e.jsx(qF,{stats:[{label:"Total Bookings",value:w.totalBookings,icon:"calendar"},{label:"Today's Bookings",value:w.todayBookings,icon:"clock"},{label:"Active Services",value:w.activeServices,icon:"scissors"},{label:"Active Barbers",value:w.activeBarbers,icon:"user"},{label:"Total Customers",value:w.totalCustomers,icon:"users"},{label:"Active Vouchers",value:w.activeVouchers,icon:"gift"}]}),e.jsx($F,{})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading dashboard data..."})]}),S=()=>{console.log("Refresh triggered - data will update automatically")},_=()=>{if(t?.role!=="super_admin"&&i!=="overview"&&t?.page_access&&t.page_access.length>0&&!t.page_access.includes(i))return B();switch(i){case"overview":return B();case"bookings":return e.jsx(WF,{onRefresh:S,user:t});case"calendar":return e.jsx(iT,{user:t});case"services":return e.jsx(QF,{services:u||[],onRefresh:S,user:t});case"vouchers":return e.jsx(GF,{vouchers:g||[],onRefresh:S,onCreateVoucher:()=>d("voucher")});case"barbers":return e.jsx(xT,{barbers:f||[],onRefresh:S,user:t});case"users":return e.jsx(mT,{onRefresh:S});case"customers":const F=(b||[]).filter(M=>M.role==="customer");return e.jsx(hT,{customers:F,onRefresh:S});case"events":return e.jsx(yT,{events:y||[],onRefresh:S,user:t});case"reports":return e.jsx(pT,{onRefresh:S,user:t});case"products":return e.jsx(NT,{onRefresh:S,user:t});case"notifications":return e.jsx(wT,{onRefresh:S});case"payroll":return e.jsx(kT,{onRefresh:S,user:t});case"email_marketing":return e.jsx(r9,{onRefresh:S});default:return B()}},k=async()=>{try{await s(),n("/auth/login")}catch(F){console.error("Logout error:",F),n("/auth/login")}},E=[{id:"overview",label:"Overview",icon:"dashboard"},{id:"reports",label:"Reports",icon:"chart"},{id:"bookings",label:"Bookings",icon:"calendar"},{id:"calendar",label:"Calendar",icon:"calendar"},{id:"services",label:"Services",icon:"scissors"},{id:"vouchers",label:"Vouchers",icon:"gift"},{id:"barbers",label:"Barbers",icon:"user"},{id:"users",label:"Users",icon:"users"},{id:"customers",label:"Customers",icon:"users"},{id:"events",label:"Events",icon:"calendar"},{id:"payroll",label:"Payroll",icon:"dollar-sign"},{id:"products",label:"Products",icon:"package"},{id:"notifications",label:"Notifications",icon:"bell"},{id:"email_marketing",label:"Email Marketing",icon:"mail"},{id:"pos",label:"POS",icon:"credit-card"}],D=t?.role==="super_admin"?E:t?.page_access?E.filter(F=>t.page_access.includes(F.id)||F.id==="overview"):E;return C.useEffect(()=>{!D.map(M=>M.id).includes(i)&&i!=="overview"&&o("overview")},[D,i]),console.log("StaffDashboard - User:",t),e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A] flex flex-col",children:[e.jsx(pF,{onLogout:k,user:t,onOpenNotifications:()=>h(!0)}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8 lg:py-12",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8 lg:space-y-12",children:[e.jsx(UF,{tabs:D,activeTab:i,onTabChange:F=>{F==="pos"?n("/staff/pos"):o(F)},incompleteBookingsCount:j}),e.jsx("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-xl sm:rounded-2xl lg:rounded-3xl shadow-2xl border border-[#2A2A2A]/50 p-3 sm:p-4 md:p-6 lg:p-8 xl:p-10 backdrop-blur-sm overflow-hidden",children:_()})]})})}),e.jsx(_T,{}),e.jsx(hF,{userId:t._id,isOpen:m,onClose:()=>h(!1),userRole:t?.role})]})}const Zj=({isOpen:t,onClose:s,onConfirm:n,transactionData:i,paymentMethod:o,setPaymentMethod:c})=>{const[d,m]=C.useState(""),[h,p]=C.useState(0),[u,f]=C.useState(!1);C.useEffect(()=>{if(o==="cash"&&d){const b=parseFloat(d)||0,j=Math.max(0,b-i.total_amount);p(j)}else p(0)},[d,o,i.total_amount]);const g=async()=>{if(o==="cash"&&(parseFloat(d)||0)<i.total_amount){alert("Cash received is less than the total amount");return}f(!0);try{await n({...i,payment_method:o,cash_received:o==="cash"?parseFloat(d):void 0,change_amount:o==="cash"?h:void 0})}catch(b){console.error("Payment failed:",b)}finally{f(!1)}},y=()=>{m(""),p(0),f(!1)};return C.useEffect(()=>{t||y()},[t]),e.jsx(ns,{isOpen:t,onClose:s,title:"Confirm Payment",variant:"dark",size:"md",compact:!0,children:e.jsxs("div",{className:"space-y-2.5 lg:space-y-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#0A0A0A] rounded-lg lg:rounded-xl p-3 lg:p-4 border border-[#2A2A2A]",children:e.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg p-2.5 lg:p-3 text-center",children:[e.jsx("p",{className:"text-[10px] lg:text-xs font-semibold text-white/80 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl lg:text-3xl font-black text-white",children:["",i.total_amount.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1.5 lg:space-y-2 text-[10px] lg:text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center px-2 py-1.5 bg-[#2A2A2A] rounded",children:[e.jsx("span",{className:"text-gray-400",children:"Subtotal"}),e.jsxs("span",{className:"text-gray-200 font-semibold",children:["",i.subtotal.toFixed(2)]})]}),i.discount_amount>0&&e.jsxs("div",{className:"flex justify-between items-center px-2 py-1.5 bg-green-500/10 rounded border border-green-500/20",children:[e.jsx("span",{className:"text-green-400 font-medium",children:"Discount"}),e.jsxs("span",{className:"text-green-300 font-bold",children:["-",i.discount_amount.toFixed(2)]})]}),i.tax_amount>0&&e.jsxs("div",{className:"flex justify-between items-center px-2 py-1.5 bg-[#2A2A2A] rounded",children:[e.jsx("span",{className:"text-gray-400",children:"Tax"}),e.jsxs("span",{className:"text-gray-200 font-semibold",children:["",i.tax_amount.toFixed(2)]})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-300 mb-2 uppercase tracking-wider",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"cash",label:"Cash",icon:as},{value:"card",label:"Card",icon:ds},{value:"digital_wallet",label:"Wallet",icon:ds},{value:"bank_transfer",label:"Transfer",icon:ds}].map(b=>{const j=b.icon;return e.jsxs("button",{onClick:()=>c(b.value),className:`p-2 rounded-lg border-2 transition-all duration-200 flex flex-col items-center justify-center space-y-1 text-xs font-semibold ${o===b.value?"border-[var(--color-primary)] bg-[var(--color-primary)]/20 text-[var(--color-primary)]":"border-[#555555] bg-[#1A1A1A] text-gray-400 hover:border-[var(--color-primary)]/50"}`,children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:b.label})]},b.value)})})]}),o==="cash"&&e.jsxs("div",{className:"space-y-2 bg-[#1A1A1A] rounded-lg p-3 border border-[#2A2A2A]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-300 mb-1.5",children:"Cash Received"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[var(--color-primary)] font-bold",children:""}),e.jsx("input",{type:"number",value:d,onChange:b=>m(b.target.value),placeholder:"0.00",className:"w-full pl-7 pr-3 py-2.5 bg-[#2A2A2A] border border-[#555555] rounded-lg text-white font-bold text-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent placeholder-gray-500",step:"0.01",min:"0"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[100,200,500,1e3].map(b=>e.jsx("button",{onClick:()=>m(b.toString()),className:"py-1.5 px-2 bg-[#2A2A2A] hover:bg-[var(--color-primary)] text-gray-300 hover:text-white rounded text-xs font-semibold transition-all duration-200",children:b},b))}),d&&e.jsx("div",{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 rounded-lg p-2.5 border border-green-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(Eo,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs font-bold text-green-300",children:"Change"})]}),e.jsxs("span",{className:"text-lg font-black text-green-300",children:["",h.toFixed(2)]})]})})]}),(i.services.length>0||i.products&&i.products.length>0)&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-[10px] lg:text-xs font-bold text-gray-300 px-1",children:"Items"}),e.jsxs("div",{className:"max-h-20 lg:max-h-24 overflow-y-auto space-y-1 pr-1",children:[i.services.map((b,j)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-[#2A2A2A] rounded text-[10px] lg:text-xs",children:[e.jsxs("div",{className:"min-w-0 flex-1 mr-2",children:[e.jsx("span",{className:"text-gray-200 font-semibold truncate",children:b.service_name}),e.jsxs("span",{className:"text-gray-500 ml-1.5",children:["",b.quantity]})]}),e.jsxs("span",{className:"text-[var(--color-primary)] font-bold flex-shrink-0",children:["",(b.price*b.quantity).toFixed(2)]})]},`service-${j}`)),i.products&&i.products.map((b,j)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5 px-2 bg-[#2A2A2A] rounded text-[10px] lg:text-xs",children:[e.jsxs("div",{className:"min-w-0 flex-1 mr-2",children:[e.jsx("span",{className:"text-gray-200 font-semibold truncate",children:b.product_name}),e.jsxs("span",{className:"text-gray-500 ml-1.5",children:["",b.quantity]})]}),e.jsxs("span",{className:"text-[var(--color-primary)] font-bold flex-shrink-0",children:["",(b.price*b.quantity).toFixed(2)]})]},`product-${j}`))]})]}),e.jsxs("div",{className:"flex space-x-2 lg:space-x-2.5 pt-1.5 lg:pt-2",children:[e.jsx("button",{onClick:s,disabled:u,className:"flex-1 py-2 lg:py-2.5 border border-[#555555] text-gray-300 font-semibold rounded-lg text-xs lg:text-sm hover:bg-[#1A1A1A] hover:border-gray-400 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:u||o==="cash"&&(!d||parseFloat(d)<i.total_amount),className:"flex-1 py-2 lg:py-2.5 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white font-bold rounded-lg hover:from-[var(--color-accent)] hover:to-[var(--color-accent)] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1.5 text-xs lg:text-sm",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 lg:h-3.5 lg:w-3.5 border-2 border-white border-t-transparent"}),e.jsx("span",{className:"hidden lg:inline",children:"Processing..."}),e.jsx("span",{className:"lg:hidden",children:"Processing"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-3.5 h-3.5 lg:w-4 lg:h-4"}),e.jsx("span",{children:"Confirm"})]})})]})]})})},e4=({isOpen:t,onClose:s,onCustomerSelected:n,onScanQR:i,onAddNewCustomer:o})=>{const[c,d]=C.useState(""),[m,h]=C.useState("registered"),[p,u]=C.useState({name:"Walk-in",phone:"",email:""}),y=(me(H.services.auth.getAllUsers)?.filter(w=>w.role==="customer")||[]).filter(w=>w.username.toLowerCase().includes(c.toLowerCase())||w.email.toLowerCase().includes(c.toLowerCase())||w.mobile_number&&w.mobile_number.includes(c)),b=w=>{n({type:"registered",customer:w,customer_name:w.username,customer_phone:w.mobile_number}),s()},j=()=>{if(!p.name.trim()){alert("Please enter customer name");return}n({type:"walkin",customer:null,customer_name:p.name.trim(),customer_phone:p.phone.trim()||void 0,customer_email:p.email.trim()||void 0}),s()},N=()=>{d(""),h("registered"),u({name:"Walk-in",phone:"",email:""})};return C.useEffect(()=>{t||N()},[t]),e.jsx(ns,{isOpen:t,onClose:s,title:"Select Customer",size:"lg",variant:"dark",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-1 bg-[#1A1A1A] rounded-xl p-1 border border-[#444444]/50",children:[e.jsxs("button",{onClick:()=>h("registered"),className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 ${m==="registered"?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg":"text-gray-400 hover:text-[var(--color-primary)]"}`,children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:"Registered Customer"})]}),e.jsxs("button",{onClick:()=>h("walkin"),className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 ${m==="walkin"?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg":"text-gray-400 hover:text-[var(--color-primary)]"}`,children:[e.jsx(zr,{className:"w-4 h-4"}),e.jsx("span",{children:"Walk-in Customer"})]})]}),m==="registered"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:c,onChange:w=>d(w.target.value),className:"w-full pl-10 pr-4 py-3 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"})]}),e.jsxs("button",{onClick:i,className:"px-4 py-3 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors border border-blue-500/30 flex items-center space-x-2",title:"Scan Customer QR",children:[e.jsx(rr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Scan"})]}),e.jsxs("button",{onClick:o,className:"px-4 py-3 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors border border-green-500/30 flex items-center space-x-2",title:"Add New Customer",children:[e.jsx(zr,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add New"})]})]}),e.jsx("div",{className:"max-h-48 lg:max-h-64 overflow-y-auto space-y-2 custom-scrollbar",children:y.length===0?e.jsxs("div",{className:"text-center py-6 lg:py-8 text-gray-400",children:[e.jsx(tt,{className:"w-6 h-6 lg:w-8 lg:h-8 mx-auto mb-2 opacity-50 text-gray-500"}),e.jsx("p",{className:"text-gray-400 text-sm lg:text-base",children:c?"No customers found":"No customers available"})]}):y.map(w=>e.jsx("button",{onClick:()=>b(w),className:"w-full p-3 lg:p-4 bg-[#1A1A1A] border border-[#555555]/30 rounded-lg hover:border-[var(--color-primary)]/50 hover:bg-[var(--color-primary)]/5 transition-all duration-200 text-left",children:e.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[e.jsx("div",{className:"w-9 h-9 lg:w-10 lg:h-10 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(tt,{className:"w-4 h-4 lg:w-5 lg:h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-white text-sm lg:text-base truncate",children:w.username}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:space-x-4 text-xs lg:text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1 truncate",children:[e.jsx(Ht,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:w.email})]}),w.mobile_number&&e.jsxs("div",{className:"flex items-center space-x-1 truncate",children:[e.jsx(Er,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:w.mobile_number})]})]})]})]})},w._id))})]}),m==="walkin"&&e.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-lg p-3 lg:p-4 border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(zr,{className:"w-4 h-4 lg:w-5 lg:h-5 text-blue-400"}),e.jsx("h3",{className:"font-semibold text-white text-sm lg:text-base",children:"Walk-in Customer"})]}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:"Enter basic information for a walk-in customer who doesn't have an account."})]}),e.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs lg:text-sm font-semibold text-gray-300 mb-1.5 lg:mb-2",children:"Customer Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:w=>u(B=>({...B,name:w.target.value})),placeholder:"Walk-in",className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg text-sm lg:text-base focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs lg:text-sm font-semibold text-gray-300 mb-1.5 lg:mb-2",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",value:p.phone,onChange:w=>u(B=>({...B,phone:w.target.value})),placeholder:"Phone Number",className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg text-sm lg:text-base focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs lg:text-sm font-semibold text-gray-300 mb-1.5 lg:mb-2",children:"Email Address (Optional)"}),e.jsx("input",{type:"email",value:p.email,onChange:w=>u(B=>({...B,email:w.target.value})),placeholder:"Email Address (for account creation)",className:"w-full px-3 lg:px-4 py-2.5 lg:py-3 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg text-sm lg:text-base focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"})]}),p.email&&p.email.trim()!==""&&p.email.includes("@")&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-2.5 lg:p-3",children:e.jsxs("p",{className:"text-xs text-green-400 font-medium flex items-center",children:[e.jsx(Ht,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{children:"Customer account will be created automatically"})]})})]}),e.jsxs("button",{onClick:j,disabled:!p.name.trim(),className:"w-full py-2.5 lg:py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white font-bold rounded-xl text-sm lg:text-base hover:from-[var(--color-accent)] hover:to-[var(--color-accent)] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(zr,{className:"w-4 h-4 lg:w-5 lg:h-5"}),e.jsx("span",{children:"Select Walk-in Customer"})]})]}),e.jsx("div",{className:"pt-3 lg:pt-4 border-t border-[#444444]/30",children:e.jsx("button",{onClick:s,className:"w-full py-2.5 lg:py-3 border border-[#555555] text-gray-300 font-semibold rounded-xl text-sm lg:text-base hover:bg-[#2A2A2A] hover:text-white transition-colors",children:"Cancel"})})]})})},t4=({isOpen:t,onClose:s,transactionData:n,branchInfo:i,staffInfo:o})=>{if(!n)return null;const c=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),d=g=>new Date(g).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),m=g=>`${(Number(g)||0).toFixed(2)}`,h=()=>{const g=n.receipt_number||n.transaction_id||"N/A",y=n.timestamp||Date.now(),b=c(y),j=d(y),N=P=>P==null?"":String(P).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),w=Array.isArray(n.services)?n.services.map(P=>{const T=Number(P?.quantity||1),L=Number(P?.price||0),X=T*L;return`
            <tr>
              <td class="bold" style="font-size: 14px;">${N(P?.service_name||P?.name||"Service")}</td>
              <td class="right bold" style="font-size: 14px;">${m(X)}</td>
            </tr>
            <tr>
              <td style="font-size: 12px; padding-left: 4mm;">${T}x ${m(L)}</td>
              <td></td>
            </tr>
          `}).join(""):"",B=Array.isArray(n.products)?n.products.map(P=>{const T=Number(P?.quantity||1),L=Number(P?.price||0),X=T*L;return`
            <tr>
              <td class="bold" style="font-size: 14px;">${N(P?.product_name||P?.name||"Product")}</td>
              <td class="right bold" style="font-size: 14px;">${m(X)}</td>
            </tr>
            <tr>
              <td style="font-size: 12px; padding-left: 4mm;">${T}x ${m(L)}</td>
              <td></td>
            </tr>
          `}).join(""):"",S=Number(n.subtotal||0),_=Number(n.discount_amount||0),k=Number(n.tax_amount||0),E=Number(n.total_amount||0),D=Number(n.cash_received||0),F=Number(n.change_amount||0),M=N((n.payment_method||"cash").replace(/_/g," ").toUpperCase());return`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Receipt ${N(g)}</title>
  <style>
    @page {
      size: 58mm auto;
      margin: 0;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 58mm;
      min-width: 58mm;
      max-width: 58mm;
      font-family: 'Courier New', Courier, monospace;
      font-size: 14px;
      line-height: 1.35;
      padding: 2mm 4mm;
      color: #000;
      background: #fff;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
    @media print {
      html, body { 
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 2mm 4mm !important;
      }
    }
    .center { text-align: center; width: 100%; display: block; }
    .bold { font-weight: bold; }
    .right { text-align: right; }
    .small { font-size: 12px; }
    .line { border-bottom: 1px dashed #000; margin: 2mm 0; width: 100%; display: block; }
    .line2 { border-bottom: 2px solid #000; margin: 2mm 0; width: 100%; display: block; }
    table { width: 100%; border-collapse: collapse; margin: 1mm 0; }
    td { padding: 2px 0; vertical-align: top; }
    td:first-child { padding-right: 5mm; }
    td:last-child { text-align: right; }
  </style>
</head>
<body>
  <div class="center bold" style="font-size: 20px; margin-bottom: 1.5mm; letter-spacing: 1.5px;">TIPUNOX</div>
  <div class="center bold" style="font-size: 17px; margin-bottom: 1mm;">ANGELES BARBERSHOP</div>
  ${i?.name?`<div class="center" style="font-size: 12px; margin-bottom: 0.5mm;">${N(i.name)}</div>`:""}
  ${i?.address?`<div class="center" style="font-size: 12px; margin-bottom: 0.5mm;">${N(i.address)}</div>`:""}
  ${i?.phone?`<div class="center" style="font-size: 12px; margin-bottom: 1mm;">Tel: ${N(i.phone)}</div>`:""}
  <div class="line"></div>
  
  <div class="center bold" style="font-size: 15px; margin: 1.5mm 0;">OFFICIAL RECEIPT</div>
  <div class="line"></div>
  
  <table style="font-size: 13px;">
    <tr><td>Receipt No:</td><td class="right">${N(g)}</td></tr>
    <tr><td>Date:</td><td class="right">${N(b)}</td></tr>
    <tr><td>Time:</td><td class="right">${N(j)}</td></tr>
    <tr><td>Cashier:</td><td class="right">${N(o?.username||o?.full_name||"Staff")}</td></tr>
    ${n.barber_name?`<tr><td>Barber:</td><td class="right">${N(n.barber_name)}</td></tr>`:""}
    ${n.customer_name?`<tr><td>Customer:</td><td class="right">${N(n.customer_name)}</td></tr>`:""}
  </table>
  <div class="line2"></div>
  
  <table style="font-size: 14px;">
    ${w}
    ${B}
  </table>
  
  <div class="line"></div>
  <table style="font-size: 14px;">
    <tr><td class="bold">Subtotal:</td><td class="right bold">${m(S)}</td></tr>
    ${_>0?`<tr><td class="bold">Discount:</td><td class="right bold">-${m(_)}</td></tr>`:""}
    ${k>0?`<tr><td class="bold">Tax:</td><td class="right bold">${m(k)}</td></tr>`:""}
  </table>
  <div class="line2"></div>
  
  <table style="font-size: 18px; margin: 1.5mm 0;">
    <tr><td class="bold">TOTAL:</td><td class="right bold">${m(E)}</td></tr>
  </table>
  <div class="line2"></div>
  
  <table style="font-size: 13px;">
    <tr><td class="bold">Payment:</td><td class="right">${M}</td></tr>
    ${n.payment_method==="cash"&&D>0?`<tr><td>Cash:</td><td class="right">${m(D)}</td></tr>`:""}
    ${n.payment_method==="cash"&&F>0?`<tr><td>Change:</td><td class="right">${m(F)}</td></tr>`:""}
  </table>
  
  <div class="line"></div>
  <div class="center bold" style="margin-top: 2mm; font-size: 15px;">Thank you!</div>
  <div class="center" style="font-size: 13px;">Please come again!</div>
  <div class="center" style="margin-top: 2mm; font-size: 11px;">Receipt #${N(g)}</div>
</body>
</html>`},p=()=>{const g=h(),y=window.open("","_blank");y?(y.document.write(g),y.document.close(),y.focus(),setTimeout(()=>{y.print()},250)):alert("Please allow popups to print receipts")},u=()=>{const g=f(),y=new Blob([g],{type:"text/plain"}),b=URL.createObjectURL(y),j=document.createElement("a");j.href=b,j.download=`receipt-${n.transaction_id}.txt`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(b)},f=()=>{const y=k=>{const E=Math.max(0,Math.floor((32-k.length)/2));return" ".repeat(E)+k},b=(k,E)=>{const D=32-k.length-E.length;return k+" ".repeat(Math.max(1,D))+E},j="=".repeat(32),N="-".repeat(32),w=[];w.push(y("TIPUNOX")),w.push(y("ANGELES BARBERSHOP")),i?.name&&w.push(y(i.name)),i?.address&&w.push(y(i.address.substring(0,32))),i?.phone&&w.push(y(`Tel: ${i.phone}`)),w.push(j),w.push(y("OFFICIAL RECEIPT")),w.push("");const B=n.receipt_number||n.transaction_id||"N/A",S=n.timestamp||Date.now();w.push(b("Receipt No:",B.substring(0,15))),w.push(b("Date:",c(S).substring(0,15))),w.push(b("Cashier:",(o?.username||"Staff").substring(0,15))),n.barber_name&&w.push(b("Barber:",n.barber_name.substring(0,15))),n.customer_name&&w.push(b("Customer:",n.customer_name.substring(0,15))),w.push(j),w.push(b("Item","Amount")),w.push(N),n.services?.length&&n.services.forEach(k=>{const E=(k.service_name||k.name||"Service").substring(0,20);w.push(E);const D=k.quantity||1,F=k.price||0;w.push(b(`  ${D}x ${m(F)}`,m(D*F)))}),n.products?.length&&n.products.forEach(k=>{const E=(k.product_name||k.name||"Product").substring(0,20);w.push(E);const D=k.quantity||1,F=k.price||0;w.push(b(`  ${D}x ${m(F)}`,m(D*F)))}),w.push(N),w.push(b("Subtotal:",m(n.subtotal||0))),n.discount_amount>0&&w.push(b("Discount:",`-${m(n.discount_amount)}`)),n.tax_amount>0&&w.push(b("Tax:",m(n.tax_amount))),w.push(j),w.push(b("TOTAL:",m(n.total_amount||0))),w.push(j);const _=(n.payment_method||"cash").replace(/_/g," ").toUpperCase();return w.push(""),w.push(b("Payment:",_)),n.payment_method==="cash"&&(n.cash_received&&w.push(b("Cash Received:",m(n.cash_received))),n.change_amount&&w.push(b("Change:",m(n.change_amount)))),w.push(""),w.push(j),w.push(""),w.push(y("Thank you for your")),w.push(y("business!")),w.push(y("Please come again!")),w.push(""),w.join(`
`)};return e.jsx(ns,{isOpen:t,onClose:s,title:"Receipt",size:"md",variant:"dark",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 text-center",children:[e.jsx(Je,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Payment Successful!"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Transaction completed successfully"})]}),e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg p-4 border border-[#444444] max-h-64 overflow-y-auto",children:e.jsx("div",{className:"font-mono text-xs text-gray-300 whitespace-pre-wrap",children:f()})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:p,className:"py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white font-bold rounded-xl hover:from-[var(--color-accent)] hover:to-[var(--color-accent)] transition-all flex items-center justify-center space-x-2",children:[e.jsx(tb,{className:"w-5 h-5"}),e.jsx("span",{children:"Print Receipt"})]}),e.jsxs("button",{onClick:u,className:"py-3 border-2 border-[#555555] text-gray-300 font-semibold rounded-xl hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 transition-all flex items-center justify-center space-x-2",children:[e.jsx(ka,{className:"w-5 h-5"}),e.jsx("span",{children:"Download"})]})]}),e.jsx("button",{onClick:s,className:"w-full py-3 border border-[#555555] text-gray-300 font-semibold rounded-xl hover:bg-[#2A2A2A] hover:text-white transition-colors",children:"Close"})]})})};var ci={},Ll={},ql={},s4;function db(){return s4||(s4=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.ApplicationInSerializer=void 0,ql.ApplicationInSerializer={_fromJsonObject(t){return{metadata:t.metadata,name:t.name,rateLimit:t.rateLimit,uid:t.uid}},_toJsonObject(t){return{metadata:t.metadata,name:t.name,rateLimit:t.rateLimit,uid:t.uid}}}),ql}var $l={},r4;function i9(){return r4||(r4=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.ApplicationOutSerializer=void 0,$l.ApplicationOutSerializer={_fromJsonObject(t){return{createdAt:new Date(t.createdAt),id:t.id,metadata:t.metadata,name:t.name,rateLimit:t.rateLimit,uid:t.uid,updatedAt:new Date(t.updatedAt)}},_toJsonObject(t){return{createdAt:t.createdAt,id:t.id,metadata:t.metadata,name:t.name,rateLimit:t.rateLimit,uid:t.uid,updatedAt:t.updatedAt}}}),$l}var Ul={},a4;function DT(){return a4||(a4=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.ApplicationPatchSerializer=void 0,Ul.ApplicationPatchSerializer={_fromJsonObject(t){return{metadata:t.metadata,name:t.name,rateLimit:t.rateLimit,uid:t.uid}},_toJsonObject(t){return{metadata:t.metadata,name:t.name,rateLimit:t.rateLimit,uid:t.uid}}}),Ul}var Vl={},n4;function FT(){if(n4)return Vl;n4=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.ListResponseApplicationOutSerializer=void 0;const t=i9();return Vl.ListResponseApplicationOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.ApplicationOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.ApplicationOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},Vl}var Hl={},Jl={},i4;function o9(){if(i4)return Jl;i4=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.ApiException=void 0;class t extends Error{constructor(n,i,o){super(`HTTP-Code: ${n}
Headers: ${JSON.stringify(o)}`),this.code=n,this.body=i,this.headers={},o.forEach((c,d)=>{this.headers[d]=c})}}return Jl.ApiException=t,Jl}var wf={},Gl={},o4;function PT(){return o4||(o4=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.default=void 0,Gl.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),Gl}var Yl={},l4;function TT(){return l4||(l4=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.default=void 0,Yl.default="00000000-0000-0000-0000-000000000000"),Yl}var Ql={},Wl={},Kl={},c4;function OT(){return c4||(c4=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.default=void 0,Kl.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),Kl}var d4;function Am(){if(d4)return Wl;d4=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.default=void 0;var t=s(OT());function s(i){return i&&i.__esModule?i:{default:i}}function n(i){return typeof i=="string"&&t.default.test(i)}return Wl.default=n,Wl}var x4;function Cm(){if(x4)return Ql;x4=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.default=void 0;var t=s(Am());function s(i){return i&&i.__esModule?i:{default:i}}function n(i){if(!(0,t.default)(i))throw TypeError("Invalid UUID");var o,c=new Uint8Array(16);return c[0]=(o=parseInt(i.slice(0,8),16))>>>24,c[1]=o>>>16&255,c[2]=o>>>8&255,c[3]=o&255,c[4]=(o=parseInt(i.slice(9,13),16))>>>8,c[5]=o&255,c[6]=(o=parseInt(i.slice(14,18),16))>>>8,c[7]=o&255,c[8]=(o=parseInt(i.slice(19,23),16))>>>8,c[9]=o&255,c[10]=(o=parseInt(i.slice(24,36),16))/1099511627776&255,c[11]=o/4294967296&255,c[12]=o>>>24&255,c[13]=o>>>16&255,c[14]=o>>>8&255,c[15]=o&255,c}return Ql.default=n,Ql}var po={},u4;function In(){if(u4)return po;u4=1,Object.defineProperty(po,"__esModule",{value:!0}),po.default=void 0,po.unsafeStringify=o;var t=s(Am());function s(d){return d&&d.__esModule?d:{default:d}}for(var n=[],i=0;i<256;++i)n.push((i+256).toString(16).slice(1));function o(d,m=0){return(n[d[m+0]]+n[d[m+1]]+n[d[m+2]]+n[d[m+3]]+"-"+n[d[m+4]]+n[d[m+5]]+"-"+n[d[m+6]]+n[d[m+7]]+"-"+n[d[m+8]]+n[d[m+9]]+"-"+n[d[m+10]]+n[d[m+11]]+n[d[m+12]]+n[d[m+13]]+n[d[m+14]]+n[d[m+15]]).toLowerCase()}function c(d,m=0){var h=o(d,m);if(!(0,t.default)(h))throw TypeError("Stringified UUID is invalid");return h}return po.default=c,po}var Xl={},Fu={},m4;function xb(){if(m4)return Fu;m4=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.default=n;var t,s=new Uint8Array(16);function n(){if(!t&&(t=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(s)}return Fu}var h4;function l9(){if(h4)return Xl;h4=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.default=void 0;var t=n(xb()),s=In();function n(h){return h&&h.__esModule?h:{default:h}}var i,o,c=0,d=0;function m(h,p,u){var f=p&&u||0,g=p||new Array(16);h=h||{};var y=h.node,b=h.clockseq;if(h._v6||(y||(y=i),b==null&&(b=o)),y==null||b==null){var j=h.random||(h.rng||t.default)();y==null&&(y=[j[0],j[1],j[2],j[3],j[4],j[5]],!i&&!h._v6&&(y[0]|=1,i=y)),b==null&&(b=(j[6]<<8|j[7])&16383,o===void 0&&!h._v6&&(o=b))}var N=h.msecs!==void 0?h.msecs:Date.now(),w=h.nsecs!==void 0?h.nsecs:d+1,B=N-c+(w-d)/1e4;if(B<0&&h.clockseq===void 0&&(b=b+1&16383),(B<0||N>c)&&h.nsecs===void 0&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=N,d=w,o=b,N+=122192928e5;var S=((N&268435455)*1e4+w)%4294967296;g[f++]=S>>>24&255,g[f++]=S>>>16&255,g[f++]=S>>>8&255,g[f++]=S&255;var _=N/4294967296*1e4&268435455;g[f++]=_>>>8&255,g[f++]=_&255,g[f++]=_>>>24&15|16,g[f++]=_>>>16&255,g[f++]=b>>>8|128,g[f++]=b&255;for(var k=0;k<6;++k)g[f+k]=y[k];return p||(0,s.unsafeStringify)(g)}return Xl.default=m,Xl}var Pu={},p4;function c9(){if(p4)return Pu;p4=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.default=i;var t=n(Cm()),s=In();function n(c){return c&&c.__esModule?c:{default:c}}function i(c){var d=typeof c=="string"?(0,t.default)(c):c,m=o(d);return typeof c=="string"?(0,s.unsafeStringify)(m):m}function o(c,d=!1){return Uint8Array.of((c[6]&15)<<4|c[7]>>4&15,(c[7]&15)<<4|(c[4]&240)>>4,(c[4]&15)<<4|(c[5]&240)>>4,(c[5]&15)<<4|(c[0]&240)>>4,(c[0]&15)<<4|(c[1]&240)>>4,(c[1]&15)<<4|(c[2]&240)>>4,96|c[2]&15,c[3],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])}return Pu}var Zl={},_n={},f4;function d9(){if(f4)return _n;f4=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.URL=_n.DNS=void 0,_n.default=d;var t=In(),s=n(Cm());function n(m){return m&&m.__esModule?m:{default:m}}function i(m){m=unescape(encodeURIComponent(m));for(var h=[],p=0;p<m.length;++p)h.push(m.charCodeAt(p));return h}var o=_n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",c=_n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function d(m,h,p){function u(f,g,y,b){var j;if(typeof f=="string"&&(f=i(f)),typeof g=="string"&&(g=(0,s.default)(g)),((j=g)===null||j===void 0?void 0:j.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var N=new Uint8Array(16+f.length);if(N.set(g),N.set(f,g.length),N=p(N),N[6]=N[6]&15|h,N[8]=N[8]&63|128,y){b=b||0;for(var w=0;w<16;++w)y[b+w]=N[w];return y}return(0,t.unsafeStringify)(N)}try{u.name=m}catch{}return u.DNS=o,u.URL=c,u}return _n}var ec={},g4;function MT(){if(g4)return ec;g4=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.default=void 0;function t(g){if(typeof g=="string"){var y=unescape(encodeURIComponent(g));g=new Uint8Array(y.length);for(var b=0;b<y.length;++b)g[b]=y.charCodeAt(b)}return s(i(o(g),g.length*8))}function s(g){for(var y=[],b=g.length*32,j="0123456789abcdef",N=0;N<b;N+=8){var w=g[N>>5]>>>N%32&255,B=parseInt(j.charAt(w>>>4&15)+j.charAt(w&15),16);y.push(B)}return y}function n(g){return(g+64>>>9<<4)+14+1}function i(g,y){g[y>>5]|=128<<y%32,g[n(y)-1]=y;for(var b=1732584193,j=-271733879,N=-1732584194,w=271733878,B=0;B<g.length;B+=16){var S=b,_=j,k=N,E=w;b=h(b,j,N,w,g[B],7,-680876936),w=h(w,b,j,N,g[B+1],12,-389564586),N=h(N,w,b,j,g[B+2],17,606105819),j=h(j,N,w,b,g[B+3],22,-1044525330),b=h(b,j,N,w,g[B+4],7,-176418897),w=h(w,b,j,N,g[B+5],12,1200080426),N=h(N,w,b,j,g[B+6],17,-1473231341),j=h(j,N,w,b,g[B+7],22,-45705983),b=h(b,j,N,w,g[B+8],7,1770035416),w=h(w,b,j,N,g[B+9],12,-1958414417),N=h(N,w,b,j,g[B+10],17,-42063),j=h(j,N,w,b,g[B+11],22,-1990404162),b=h(b,j,N,w,g[B+12],7,1804603682),w=h(w,b,j,N,g[B+13],12,-40341101),N=h(N,w,b,j,g[B+14],17,-1502002290),j=h(j,N,w,b,g[B+15],22,1236535329),b=p(b,j,N,w,g[B+1],5,-165796510),w=p(w,b,j,N,g[B+6],9,-1069501632),N=p(N,w,b,j,g[B+11],14,643717713),j=p(j,N,w,b,g[B],20,-373897302),b=p(b,j,N,w,g[B+5],5,-701558691),w=p(w,b,j,N,g[B+10],9,38016083),N=p(N,w,b,j,g[B+15],14,-660478335),j=p(j,N,w,b,g[B+4],20,-405537848),b=p(b,j,N,w,g[B+9],5,568446438),w=p(w,b,j,N,g[B+14],9,-1019803690),N=p(N,w,b,j,g[B+3],14,-187363961),j=p(j,N,w,b,g[B+8],20,1163531501),b=p(b,j,N,w,g[B+13],5,-1444681467),w=p(w,b,j,N,g[B+2],9,-51403784),N=p(N,w,b,j,g[B+7],14,1735328473),j=p(j,N,w,b,g[B+12],20,-1926607734),b=u(b,j,N,w,g[B+5],4,-378558),w=u(w,b,j,N,g[B+8],11,-2022574463),N=u(N,w,b,j,g[B+11],16,1839030562),j=u(j,N,w,b,g[B+14],23,-35309556),b=u(b,j,N,w,g[B+1],4,-1530992060),w=u(w,b,j,N,g[B+4],11,1272893353),N=u(N,w,b,j,g[B+7],16,-155497632),j=u(j,N,w,b,g[B+10],23,-1094730640),b=u(b,j,N,w,g[B+13],4,681279174),w=u(w,b,j,N,g[B],11,-358537222),N=u(N,w,b,j,g[B+3],16,-722521979),j=u(j,N,w,b,g[B+6],23,76029189),b=u(b,j,N,w,g[B+9],4,-640364487),w=u(w,b,j,N,g[B+12],11,-421815835),N=u(N,w,b,j,g[B+15],16,530742520),j=u(j,N,w,b,g[B+2],23,-995338651),b=f(b,j,N,w,g[B],6,-198630844),w=f(w,b,j,N,g[B+7],10,1126891415),N=f(N,w,b,j,g[B+14],15,-1416354905),j=f(j,N,w,b,g[B+5],21,-57434055),b=f(b,j,N,w,g[B+12],6,1700485571),w=f(w,b,j,N,g[B+3],10,-1894986606),N=f(N,w,b,j,g[B+10],15,-1051523),j=f(j,N,w,b,g[B+1],21,-2054922799),b=f(b,j,N,w,g[B+8],6,1873313359),w=f(w,b,j,N,g[B+15],10,-30611744),N=f(N,w,b,j,g[B+6],15,-1560198380),j=f(j,N,w,b,g[B+13],21,1309151649),b=f(b,j,N,w,g[B+4],6,-145523070),w=f(w,b,j,N,g[B+11],10,-1120210379),N=f(N,w,b,j,g[B+2],15,718787259),j=f(j,N,w,b,g[B+9],21,-343485551),b=c(b,S),j=c(j,_),N=c(N,k),w=c(w,E)}return[b,j,N,w]}function o(g){if(g.length===0)return[];for(var y=g.length*8,b=new Uint32Array(n(y)),j=0;j<y;j+=8)b[j>>5]|=(g[j/8]&255)<<j%32;return b}function c(g,y){var b=(g&65535)+(y&65535),j=(g>>16)+(y>>16)+(b>>16);return j<<16|b&65535}function d(g,y){return g<<y|g>>>32-y}function m(g,y,b,j,N,w){return c(d(c(c(y,g),c(j,w)),N),b)}function h(g,y,b,j,N,w,B){return m(y&b|~y&j,g,y,N,w,B)}function p(g,y,b,j,N,w,B){return m(y&j|b&~j,g,y,N,w,B)}function u(g,y,b,j,N,w,B){return m(y^b^j,g,y,N,w,B)}function f(g,y,b,j,N,w,B){return m(b^(y|~j),g,y,N,w,B)}return ec.default=t,ec}var b4;function RT(){if(b4)return Zl;b4=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.default=void 0;var t=n(d9()),s=n(MT());function n(o){return o&&o.__esModule?o:{default:o}}var i=(0,t.default)("v3",48,s.default);return Zl.default=i,Zl}var tc={},sc={},v4;function zT(){if(v4)return sc;v4=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.default=void 0;var t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return sc.default={randomUUID:t},sc}var y4;function IT(){if(y4)return tc;y4=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.default=void 0;var t=i(zT()),s=i(xb()),n=In();function i(c){return c&&c.__esModule?c:{default:c}}function o(c,d,m){if(t.default.randomUUID&&!d&&!c)return t.default.randomUUID();c=c||{};var h=c.random||(c.rng||s.default)();if(h[6]=h[6]&15|64,h[8]=h[8]&63|128,d){m=m||0;for(var p=0;p<16;++p)d[m+p]=h[p];return d}return(0,n.unsafeStringify)(h)}return tc.default=o,tc}var rc={},ac={},j4;function LT(){if(j4)return ac;j4=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.default=void 0;function t(i,o,c,d){switch(i){case 0:return o&c^~o&d;case 1:return o^c^d;case 2:return o&c^o&d^c&d;case 3:return o^c^d}}function s(i,o){return i<<o|i>>>32-o}function n(i){var o=[1518500249,1859775393,2400959708,3395469782],c=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){var d=unescape(encodeURIComponent(i));i=[];for(var m=0;m<d.length;++m)i.push(d.charCodeAt(m))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);for(var h=i.length/4+2,p=Math.ceil(h/16),u=new Array(p),f=0;f<p;++f){for(var g=new Uint32Array(16),y=0;y<16;++y)g[y]=i[f*64+y*4]<<24|i[f*64+y*4+1]<<16|i[f*64+y*4+2]<<8|i[f*64+y*4+3];u[f]=g}u[p-1][14]=(i.length-1)*8/Math.pow(2,32),u[p-1][14]=Math.floor(u[p-1][14]),u[p-1][15]=(i.length-1)*8&4294967295;for(var b=0;b<p;++b){for(var j=new Uint32Array(80),N=0;N<16;++N)j[N]=u[b][N];for(var w=16;w<80;++w)j[w]=s(j[w-3]^j[w-8]^j[w-14]^j[w-16],1);for(var B=c[0],S=c[1],_=c[2],k=c[3],E=c[4],D=0;D<80;++D){var F=Math.floor(D/20),M=s(B,5)+t(F,S,_,k)+E+o[F]+j[D]>>>0;E=k,k=_,_=s(S,30)>>>0,S=B,B=M}c[0]=c[0]+B>>>0,c[1]=c[1]+S>>>0,c[2]=c[2]+_>>>0,c[3]=c[3]+k>>>0,c[4]=c[4]+E>>>0}return[c[0]>>24&255,c[0]>>16&255,c[0]>>8&255,c[0]&255,c[1]>>24&255,c[1]>>16&255,c[1]>>8&255,c[1]&255,c[2]>>24&255,c[2]>>16&255,c[2]>>8&255,c[2]&255,c[3]>>24&255,c[3]>>16&255,c[3]>>8&255,c[3]&255,c[4]>>24&255,c[4]>>16&255,c[4]>>8&255,c[4]&255]}return ac.default=n,ac}var N4;function qT(){if(N4)return rc;N4=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.default=void 0;var t=n(d9()),s=n(LT());function n(o){return o&&o.__esModule?o:{default:o}}var i=(0,t.default)("v5",80,s.default);return rc.default=i,rc}var Tu={},w4;function $T(){if(w4)return Tu;w4=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.default=p;var t=In(),s=i(l9()),n=i(c9());function i(u){return u&&u.__esModule?u:{default:u}}function o(u,f){var g=Object.keys(u);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(u);f&&(y=y.filter(function(b){return Object.getOwnPropertyDescriptor(u,b).enumerable})),g.push.apply(g,y)}return g}function c(u){for(var f=1;f<arguments.length;f++){var g=arguments[f]!=null?arguments[f]:{};f%2?o(Object(g),!0).forEach(function(y){d(u,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(g)):o(Object(g)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(g,y))})}return u}function d(u,f,g){return(f=m(f))in u?Object.defineProperty(u,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):u[f]=g,u}function m(u){var f=h(u,"string");return typeof f=="symbol"?f:f+""}function h(u,f){if(typeof u!="object"||!u)return u;var g=u[Symbol.toPrimitive];if(g!==void 0){var y=g.call(u,f);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(u)}function p(u={},f,g=0){var y=(0,s.default)(c(c({},u),{},{_v6:!0}),new Uint8Array(16));if(y=(0,n.default)(y),f){for(var b=0;b<16;b++)f[g+b]=y[b];return f}return(0,t.unsafeStringify)(y)}return Tu}var Ou={},A4;function UT(){if(A4)return Ou;A4=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.default=i;var t=n(Cm()),s=In();function n(c){return c&&c.__esModule?c:{default:c}}function i(c){var d=typeof c=="string"?(0,t.default)(c):c,m=o(d);return typeof c=="string"?(0,s.unsafeStringify)(m):m}function o(c){return Uint8Array.of((c[3]&15)<<4|c[4]>>4&15,(c[4]&15)<<4|(c[5]&240)>>4,(c[5]&15)<<4|c[6]&15,c[7],(c[1]&15)<<4|(c[2]&240)>>4,(c[2]&15)<<4|(c[3]&240)>>4,16|(c[0]&240)>>4,(c[0]&15)<<4|(c[1]&240)>>4,c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])}return Ou}var nc={},C4;function VT(){if(C4)return nc;C4=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.default=void 0;var t=n(xb()),s=In();function n(m){return m&&m.__esModule?m:{default:m}}var i=null,o=null,c=0;function d(m,h,p){m=m||{};var u=h&&p||0,f=h||new Uint8Array(16),g=m.random||(m.rng||t.default)(),y=m.msecs!==void 0?m.msecs:Date.now(),b=m.seq!==void 0?m.seq:null,j=o,N=i;return y>c&&m.msecs===void 0&&(c=y,b!==null&&(j=null,N=null)),b!==null&&(b>2147483647&&(b=2147483647),j=b>>>19&4095,N=b&524287),(j===null||N===null)&&(j=g[6]&127,j=j<<8|g[7],N=g[8]&63,N=N<<8|g[9],N=N<<5|g[10]>>>3),y+1e4>c&&b===null?++N>524287&&(N=0,++j>4095&&(j=0,c++)):c=y,o=j,i=N,f[u++]=c/1099511627776&255,f[u++]=c/4294967296&255,f[u++]=c/16777216&255,f[u++]=c/65536&255,f[u++]=c/256&255,f[u++]=c&255,f[u++]=j>>>4&15|112,f[u++]=j&255,f[u++]=N>>>13&63|128,f[u++]=N>>>5&255,f[u++]=N<<3&255|g[10]&7,f[u++]=g[11],f[u++]=g[12],f[u++]=g[13],f[u++]=g[14],f[u++]=g[15],h||(0,s.unsafeStringify)(f)}return nc.default=d,nc}var ic={},E4;function HT(){if(E4)return ic;E4=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.default=void 0;var t=s(Am());function s(i){return i&&i.__esModule?i:{default:i}}function n(i){if(!(0,t.default)(i))throw TypeError("Invalid UUID");return parseInt(i.slice(14,15),16)}return ic.default=n,ic}var k4;function JT(){return k4||(k4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return b.default}});var s=j(PT()),n=j(TT()),i=j(Cm()),o=j(In()),c=j(l9()),d=j(c9()),m=j(RT()),h=j(IT()),p=j(qT()),u=j($T()),f=j(UT()),g=j(VT()),y=j(Am()),b=j(HT());function j(N){return N&&N.__esModule?N:{default:N}}}(wf)),wf}var _4;function ur(){return _4||(_4=1,function(t){var s=Hl&&Hl.__awaiter||function(h,p,u,f){function g(y){return y instanceof u?y:new u(function(b){b(y)})}return new(u||(u=Promise))(function(y,b){function j(B){try{w(f.next(B))}catch(S){b(S)}}function N(B){try{w(f.throw(B))}catch(S){b(S)}}function w(B){B.done?y(B.value):g(B.value).then(j,N)}w((f=f.apply(h,p||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SvixRequest=t.HttpMethod=t.LIB_VERSION=void 0;const n=o9(),i=JT();t.LIB_VERSION="1.76.1";const o=`svix-libs/${t.LIB_VERSION}/javascript`;(function(h){h.GET="GET",h.HEAD="HEAD",h.POST="POST",h.PUT="PUT",h.DELETE="DELETE",h.CONNECT="CONNECT",h.OPTIONS="OPTIONS",h.TRACE="TRACE",h.PATCH="PATCH"})(t.HttpMethod||(t.HttpMethod={}));class c{constructor(p,u){this.method=p,this.path=u,this.queryParams={},this.headerParams={}}setPathParam(p,u){const f=this.path.replace(`{${p}}`,encodeURIComponent(u));if(this.path===f)throw new Error(`path parameter ${p} not found`);this.path=f}setQueryParam(p,u){if(u!=null)if(typeof u=="string")this.queryParams[p]=u;else if(typeof u=="boolean"||typeof u=="number")this.queryParams[p]=u.toString();else if(u instanceof Date)this.queryParams[p]=u.toISOString();else if(u instanceof Array)u.length>0&&(this.queryParams[p]=u.join(","));else throw new Error(`query parameter ${p} has unsupported type`)}setHeaderParam(p,u){u!==void 0&&(this.headerParams[p]=u)}setBody(p){this.body=JSON.stringify(p)}send(p,u){return s(this,void 0,void 0,function*(){const f=yield this.sendInner(p);if(f.status==204)return null;const g=yield f.text();return u(JSON.parse(g))})}sendNoResponseBody(p){return s(this,void 0,void 0,function*(){yield this.sendInner(p)})}sendInner(p){var u,f;return s(this,void 0,void 0,function*(){const g=new URL(p.baseUrl+this.path);for(const[N,w]of Object.entries(this.queryParams))g.searchParams.set(N,w);this.headerParams["idempotency-key"]===void 0&&this.method.toUpperCase()==="POST"&&(this.headerParams["idempotency-key"]="auto_"+(0,i.v4)());const y=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);this.body!=null&&(this.headerParams["content-type"]="application/json");const b="credentials"in Request.prototype,j=yield m(g,{method:this.method.toString(),body:this.body,headers:Object.assign({accept:"application/json, */*;q=0.8",authorization:`Bearer ${p.token}`,"user-agent":o,"svix-req-id":y.toString()},this.headerParams),credentials:b?"same-origin":void 0,signal:p.timeout!==void 0?AbortSignal.timeout(p.timeout):void 0},p.retryScheduleInMs,(u=p.retryScheduleInMs)===null||u===void 0?void 0:u[0],((f=p.retryScheduleInMs)===null||f===void 0?void 0:f.length)||p.numRetries);return d(j)})}}t.SvixRequest=c;function d(h){return s(this,void 0,void 0,function*(){if(h.status<300)return h;const p=yield h.text();throw h.status===422?new n.ApiException(h.status,JSON.parse(p),h.headers):h.status>=400&&h.status<=499?new n.ApiException(h.status,JSON.parse(p),h.headers):new n.ApiException(h.status,p,h.headers)})}function m(h,p,u,f=50,g=2,y=1){return s(this,void 0,void 0,function*(){const b=j=>new Promise(N=>setTimeout(N,j));try{const j=yield fetch(h,p);if(g<=0||j.status<500)return j}catch(j){if(g<=0)throw j}return yield b(f),p.headers["svix-retry-count"]=y.toString(),f=u?.[y]||f*2,yield m(h,p,u,f,--g,++y)})}}(Hl)),Hl}var B4;function GT(){if(B4)return Ll;B4=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.Application=void 0;const t=db(),s=i9(),n=DT(),i=FT(),o=ur();class c{constructor(m){this.requestCtx=m}list(m){const h=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app");return h.setQueryParam("limit",m?.limit),h.setQueryParam("iterator",m?.iterator),h.setQueryParam("order",m?.order),h.send(this.requestCtx,i.ListResponseApplicationOutSerializer._fromJsonObject)}create(m,h){const p=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/app");return p.setHeaderParam("idempotency-key",h?.idempotencyKey),p.setBody(t.ApplicationInSerializer._toJsonObject(m)),p.send(this.requestCtx,s.ApplicationOutSerializer._fromJsonObject)}getOrCreate(m,h){const p=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/app");return p.setQueryParam("get_if_exists",!0),p.setHeaderParam("idempotency-key",h?.idempotencyKey),p.setBody(t.ApplicationInSerializer._toJsonObject(m)),p.send(this.requestCtx,s.ApplicationOutSerializer._fromJsonObject)}get(m){const h=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}");return h.setPathParam("app_id",m),h.send(this.requestCtx,s.ApplicationOutSerializer._fromJsonObject)}update(m,h){const p=new o.SvixRequest(o.HttpMethod.PUT,"/api/v1/app/{app_id}");return p.setPathParam("app_id",m),p.setBody(t.ApplicationInSerializer._toJsonObject(h)),p.send(this.requestCtx,s.ApplicationOutSerializer._fromJsonObject)}delete(m){const h=new o.SvixRequest(o.HttpMethod.DELETE,"/api/v1/app/{app_id}");return h.setPathParam("app_id",m),h.sendNoResponseBody(this.requestCtx)}patch(m,h){const p=new o.SvixRequest(o.HttpMethod.PATCH,"/api/v1/app/{app_id}");return p.setPathParam("app_id",m),p.setBody(n.ApplicationPatchSerializer._toJsonObject(h)),p.send(this.requestCtx,s.ApplicationOutSerializer._fromJsonObject)}}return Ll.Application=c,Ll}var oc={},lc={},Af={},S4;function x9(){return S4||(S4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AppPortalCapabilitySerializer=t.AppPortalCapability=void 0,function(s){s.ViewBase="ViewBase",s.ViewEndpointSecret="ViewEndpointSecret",s.ManageEndpointSecret="ManageEndpointSecret",s.ManageTransformations="ManageTransformations",s.CreateAttempts="CreateAttempts",s.ManageEndpoint="ManageEndpoint"}(t.AppPortalCapability||(t.AppPortalCapability={})),t.AppPortalCapabilitySerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Af)),Af}var D4;function YT(){if(D4)return lc;D4=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.AppPortalAccessInSerializer=void 0;const t=x9(),s=db();return lc.AppPortalAccessInSerializer={_fromJsonObject(n){var i;return{application:n.application?s.ApplicationInSerializer._fromJsonObject(n.application):void 0,capabilities:(i=n.capabilities)===null||i===void 0?void 0:i.map(o=>t.AppPortalCapabilitySerializer._fromJsonObject(o)),expiry:n.expiry,featureFlags:n.featureFlags,readOnly:n.readOnly,sessionId:n.sessionId}},_toJsonObject(n){var i;return{application:n.application?s.ApplicationInSerializer._toJsonObject(n.application):void 0,capabilities:(i=n.capabilities)===null||i===void 0?void 0:i.map(o=>t.AppPortalCapabilitySerializer._toJsonObject(o)),expiry:n.expiry,featureFlags:n.featureFlags,readOnly:n.readOnly,sessionId:n.sessionId}}},lc}var cc={},F4;function QT(){return F4||(F4=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.AppPortalAccessOutSerializer=void 0,cc.AppPortalAccessOutSerializer={_fromJsonObject(t){return{token:t.token,url:t.url}},_toJsonObject(t){return{token:t.token,url:t.url}}}),cc}var dc={},P4;function WT(){return P4||(P4=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.ApplicationTokenExpireInSerializer=void 0,dc.ApplicationTokenExpireInSerializer={_fromJsonObject(t){return{expiry:t.expiry,sessionIds:t.sessionIds}},_toJsonObject(t){return{expiry:t.expiry,sessionIds:t.sessionIds}}}),dc}var xc={},T4;function u9(){return T4||(T4=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.DashboardAccessOutSerializer=void 0,xc.DashboardAccessOutSerializer={_fromJsonObject(t){return{token:t.token,url:t.url}},_toJsonObject(t){return{token:t.token,url:t.url}}}),xc}var O4;function KT(){if(O4)return oc;O4=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.Authentication=void 0;const t=YT(),s=QT(),n=WT(),i=u9(),o=ur();class c{constructor(m){this.requestCtx=m}appPortalAccess(m,h,p){const u=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/auth/app-portal-access/{app_id}");return u.setPathParam("app_id",m),u.setHeaderParam("idempotency-key",p?.idempotencyKey),u.setBody(t.AppPortalAccessInSerializer._toJsonObject(h)),u.send(this.requestCtx,s.AppPortalAccessOutSerializer._fromJsonObject)}expireAll(m,h,p){const u=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/auth/app/{app_id}/expire-all");return u.setPathParam("app_id",m),u.setHeaderParam("idempotency-key",p?.idempotencyKey),u.setBody(n.ApplicationTokenExpireInSerializer._toJsonObject(h)),u.sendNoResponseBody(this.requestCtx)}dashboardAccess(m,h){const p=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/auth/dashboard-access/{app_id}");return p.setPathParam("app_id",m),p.setHeaderParam("idempotency-key",h?.idempotencyKey),p.send(this.requestCtx,i.DashboardAccessOutSerializer._fromJsonObject)}logout(m){const h=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/auth/logout");return h.setHeaderParam("idempotency-key",m?.idempotencyKey),h.sendNoResponseBody(this.requestCtx)}}return oc.Authentication=c,oc}var uc={},mc={},Cf={},M4;function Ei(){return M4||(M4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundTaskStatusSerializer=t.BackgroundTaskStatus=void 0,function(s){s.Running="running",s.Finished="finished",s.Failed="failed"}(t.BackgroundTaskStatus||(t.BackgroundTaskStatus={})),t.BackgroundTaskStatusSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Cf)),Cf}var Ef={},R4;function ki(){return R4||(R4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundTaskTypeSerializer=t.BackgroundTaskType=void 0,function(s){s.EndpointReplay="endpoint.replay",s.EndpointRecover="endpoint.recover",s.ApplicationStats="application.stats",s.MessageBroadcast="message.broadcast",s.SdkGenerate="sdk.generate",s.EventTypeAggregate="event-type.aggregate",s.ApplicationPurgeContent="application.purge_content"}(t.BackgroundTaskType||(t.BackgroundTaskType={})),t.BackgroundTaskTypeSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Ef)),Ef}var z4;function m9(){if(z4)return mc;z4=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.BackgroundTaskOutSerializer=void 0;const t=Ei(),s=ki();return mc.BackgroundTaskOutSerializer={_fromJsonObject(n){return{data:n.data,id:n.id,status:t.BackgroundTaskStatusSerializer._fromJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._fromJsonObject(n.task)}},_toJsonObject(n){return{data:n.data,id:n.id,status:t.BackgroundTaskStatusSerializer._toJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._toJsonObject(n.task)}}},mc}var hc={},I4;function XT(){if(I4)return hc;I4=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.ListResponseBackgroundTaskOutSerializer=void 0;const t=m9();return hc.ListResponseBackgroundTaskOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.BackgroundTaskOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.BackgroundTaskOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},hc}var L4;function ZT(){if(L4)return uc;L4=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.BackgroundTask=void 0;const t=m9(),s=XT(),n=ur();class i{constructor(c){this.requestCtx=c}list(c){const d=new n.SvixRequest(n.HttpMethod.GET,"/api/v1/background-task");return d.setQueryParam("status",c?.status),d.setQueryParam("task",c?.task),d.setQueryParam("limit",c?.limit),d.setQueryParam("iterator",c?.iterator),d.setQueryParam("order",c?.order),d.send(this.requestCtx,s.ListResponseBackgroundTaskOutSerializer._fromJsonObject)}listByEndpoint(c){return this.list(c)}get(c){const d=new n.SvixRequest(n.HttpMethod.GET,"/api/v1/background-task/{task_id}");return d.setPathParam("task_id",c),d.send(this.requestCtx,t.BackgroundTaskOutSerializer._fromJsonObject)}}return uc.BackgroundTask=i,uc}var pc={},fc={},q4;function eO(){return q4||(q4=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.EndpointHeadersInSerializer=void 0,fc.EndpointHeadersInSerializer={_fromJsonObject(t){return{headers:t.headers}},_toJsonObject(t){return{headers:t.headers}}}),fc}var gc={},$4;function tO(){return $4||($4=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.EndpointHeadersOutSerializer=void 0,gc.EndpointHeadersOutSerializer={_fromJsonObject(t){return{headers:t.headers,sensitive:t.sensitive}},_toJsonObject(t){return{headers:t.headers,sensitive:t.sensitive}}}),gc}var bc={},U4;function sO(){return U4||(U4=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.EndpointHeadersPatchInSerializer=void 0,bc.EndpointHeadersPatchInSerializer={_fromJsonObject(t){return{deleteHeaders:t.deleteHeaders,headers:t.headers}},_toJsonObject(t){return{deleteHeaders:t.deleteHeaders,headers:t.headers}}}),bc}var vc={},V4;function rO(){return V4||(V4=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.EndpointInSerializer=void 0,vc.EndpointInSerializer={_fromJsonObject(t){return{channels:t.channels,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,headers:t.headers,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url,version:t.version}},_toJsonObject(t){return{channels:t.channels,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,headers:t.headers,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url,version:t.version}}}),vc}var yc={},H4;function h9(){return H4||(H4=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.EndpointOutSerializer=void 0,yc.EndpointOutSerializer={_fromJsonObject(t){return{channels:t.channels,createdAt:new Date(t.createdAt),description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,id:t.id,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,updatedAt:new Date(t.updatedAt),url:t.url,version:t.version}},_toJsonObject(t){return{channels:t.channels,createdAt:t.createdAt,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,id:t.id,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,updatedAt:t.updatedAt,url:t.url,version:t.version}}}),yc}var jc={},J4;function aO(){return J4||(J4=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.EndpointPatchSerializer=void 0,jc.EndpointPatchSerializer={_fromJsonObject(t){return{channels:t.channels,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url,version:t.version}},_toJsonObject(t){return{channels:t.channels,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url,version:t.version}}}),jc}var Nc={},G4;function nO(){return G4||(G4=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.EndpointSecretOutSerializer=void 0,Nc.EndpointSecretOutSerializer={_fromJsonObject(t){return{key:t.key}},_toJsonObject(t){return{key:t.key}}}),Nc}var wc={},Y4;function iO(){return Y4||(Y4=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.EndpointSecretRotateInSerializer=void 0,wc.EndpointSecretRotateInSerializer={_fromJsonObject(t){return{key:t.key}},_toJsonObject(t){return{key:t.key}}}),wc}var Ac={},Q4;function oO(){return Q4||(Q4=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.EndpointStatsSerializer=void 0,Ac.EndpointStatsSerializer={_fromJsonObject(t){return{fail:t.fail,pending:t.pending,sending:t.sending,success:t.success}},_toJsonObject(t){return{fail:t.fail,pending:t.pending,sending:t.sending,success:t.success}}}),Ac}var Cc={},W4;function lO(){return W4||(W4=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.EndpointTransformationInSerializer=void 0,Cc.EndpointTransformationInSerializer={_fromJsonObject(t){return{code:t.code,enabled:t.enabled}},_toJsonObject(t){return{code:t.code,enabled:t.enabled}}}),Cc}var Ec={},K4;function cO(){return K4||(K4=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.EndpointTransformationOutSerializer=void 0,Ec.EndpointTransformationOutSerializer={_fromJsonObject(t){return{code:t.code,enabled:t.enabled}},_toJsonObject(t){return{code:t.code,enabled:t.enabled}}}),Ec}var kc={},X4;function dO(){return X4||(X4=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.EndpointTransformationPatchSerializer=void 0,kc.EndpointTransformationPatchSerializer={_fromJsonObject(t){return{code:t.code,enabled:t.enabled}},_toJsonObject(t){return{code:t.code,enabled:t.enabled}}}),kc}var _c={},Z4;function xO(){return Z4||(Z4=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.EndpointUpdateSerializer=void 0,_c.EndpointUpdateSerializer={_fromJsonObject(t){return{channels:t.channels,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,url:t.url,version:t.version}},_toJsonObject(t){return{channels:t.channels,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,url:t.url,version:t.version}}}),_c}var Bc={},eN;function uO(){return eN||(eN=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.EventExampleInSerializer=void 0,Bc.EventExampleInSerializer={_fromJsonObject(t){return{eventType:t.eventType,exampleIndex:t.exampleIndex}},_toJsonObject(t){return{eventType:t.eventType,exampleIndex:t.exampleIndex}}}),Bc}var Sc={},tN;function mO(){if(tN)return Sc;tN=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.ListResponseEndpointOutSerializer=void 0;const t=h9();return Sc.ListResponseEndpointOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.EndpointOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.EndpointOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},Sc}var Dc={},sN;function Em(){return sN||(sN=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.MessageOutSerializer=void 0,Dc.MessageOutSerializer={_fromJsonObject(t){return{channels:t.channels,eventId:t.eventId,eventType:t.eventType,id:t.id,payload:t.payload,tags:t.tags,timestamp:new Date(t.timestamp)}},_toJsonObject(t){return{channels:t.channels,eventId:t.eventId,eventType:t.eventType,id:t.id,payload:t.payload,tags:t.tags,timestamp:t.timestamp}}}),Dc}var Fc={},rN;function hO(){return rN||(rN=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.RecoverInSerializer=void 0,Fc.RecoverInSerializer={_fromJsonObject(t){return{since:new Date(t.since),until:t.until?new Date(t.until):null}},_toJsonObject(t){return{since:t.since,until:t.until}}}),Fc}var Pc={},aN;function pO(){if(aN)return Pc;aN=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.RecoverOutSerializer=void 0;const t=Ei(),s=ki();return Pc.RecoverOutSerializer={_fromJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._fromJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._fromJsonObject(n.task)}},_toJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._toJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._toJsonObject(n.task)}}},Pc}var Tc={},nN;function fO(){return nN||(nN=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ReplayInSerializer=void 0,Tc.ReplayInSerializer={_fromJsonObject(t){return{since:new Date(t.since),until:t.until?new Date(t.until):null}},_toJsonObject(t){return{since:t.since,until:t.until}}}),Tc}var Oc={},iN;function gO(){if(iN)return Oc;iN=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.ReplayOutSerializer=void 0;const t=Ei(),s=ki();return Oc.ReplayOutSerializer={_fromJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._fromJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._fromJsonObject(n.task)}},_toJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._toJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._toJsonObject(n.task)}}},Oc}var oN;function bO(){if(oN)return pc;oN=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.Endpoint=void 0;const t=eO(),s=tO(),n=sO(),i=rO(),o=h9(),c=aO(),d=nO(),m=iO(),h=oO(),p=lO(),u=cO(),f=dO(),g=xO(),y=uO(),b=mO(),j=Em(),N=hO(),w=pO(),B=fO(),S=gO(),_=ur();class k{constructor(D){this.requestCtx=D}list(D,F){const M=new _.SvixRequest(_.HttpMethod.GET,"/api/v1/app/{app_id}/endpoint");return M.setPathParam("app_id",D),M.setQueryParam("limit",F?.limit),M.setQueryParam("iterator",F?.iterator),M.setQueryParam("order",F?.order),M.send(this.requestCtx,b.ListResponseEndpointOutSerializer._fromJsonObject)}create(D,F,M){const P=new _.SvixRequest(_.HttpMethod.POST,"/api/v1/app/{app_id}/endpoint");return P.setPathParam("app_id",D),P.setHeaderParam("idempotency-key",M?.idempotencyKey),P.setBody(i.EndpointInSerializer._toJsonObject(F)),P.send(this.requestCtx,o.EndpointOutSerializer._fromJsonObject)}get(D,F){const M=new _.SvixRequest(_.HttpMethod.GET,"/api/v1/app/{app_id}/endpoint/{endpoint_id}");return M.setPathParam("app_id",D),M.setPathParam("endpoint_id",F),M.send(this.requestCtx,o.EndpointOutSerializer._fromJsonObject)}update(D,F,M){const P=new _.SvixRequest(_.HttpMethod.PUT,"/api/v1/app/{app_id}/endpoint/{endpoint_id}");return P.setPathParam("app_id",D),P.setPathParam("endpoint_id",F),P.setBody(g.EndpointUpdateSerializer._toJsonObject(M)),P.send(this.requestCtx,o.EndpointOutSerializer._fromJsonObject)}delete(D,F){const M=new _.SvixRequest(_.HttpMethod.DELETE,"/api/v1/app/{app_id}/endpoint/{endpoint_id}");return M.setPathParam("app_id",D),M.setPathParam("endpoint_id",F),M.sendNoResponseBody(this.requestCtx)}patch(D,F,M){const P=new _.SvixRequest(_.HttpMethod.PATCH,"/api/v1/app/{app_id}/endpoint/{endpoint_id}");return P.setPathParam("app_id",D),P.setPathParam("endpoint_id",F),P.setBody(c.EndpointPatchSerializer._toJsonObject(M)),P.send(this.requestCtx,o.EndpointOutSerializer._fromJsonObject)}getHeaders(D,F){const M=new _.SvixRequest(_.HttpMethod.GET,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/headers");return M.setPathParam("app_id",D),M.setPathParam("endpoint_id",F),M.send(this.requestCtx,s.EndpointHeadersOutSerializer._fromJsonObject)}updateHeaders(D,F,M){const P=new _.SvixRequest(_.HttpMethod.PUT,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/headers");return P.setPathParam("app_id",D),P.setPathParam("endpoint_id",F),P.setBody(t.EndpointHeadersInSerializer._toJsonObject(M)),P.sendNoResponseBody(this.requestCtx)}headersUpdate(D,F,M){return this.updateHeaders(D,F,M)}patchHeaders(D,F,M){const P=new _.SvixRequest(_.HttpMethod.PATCH,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/headers");return P.setPathParam("app_id",D),P.setPathParam("endpoint_id",F),P.setBody(n.EndpointHeadersPatchInSerializer._toJsonObject(M)),P.sendNoResponseBody(this.requestCtx)}headersPatch(D,F,M){return this.patchHeaders(D,F,M)}recover(D,F,M,P){const T=new _.SvixRequest(_.HttpMethod.POST,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/recover");return T.setPathParam("app_id",D),T.setPathParam("endpoint_id",F),T.setHeaderParam("idempotency-key",P?.idempotencyKey),T.setBody(N.RecoverInSerializer._toJsonObject(M)),T.send(this.requestCtx,w.RecoverOutSerializer._fromJsonObject)}replayMissing(D,F,M,P){const T=new _.SvixRequest(_.HttpMethod.POST,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/replay-missing");return T.setPathParam("app_id",D),T.setPathParam("endpoint_id",F),T.setHeaderParam("idempotency-key",P?.idempotencyKey),T.setBody(B.ReplayInSerializer._toJsonObject(M)),T.send(this.requestCtx,S.ReplayOutSerializer._fromJsonObject)}getSecret(D,F){const M=new _.SvixRequest(_.HttpMethod.GET,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/secret");return M.setPathParam("app_id",D),M.setPathParam("endpoint_id",F),M.send(this.requestCtx,d.EndpointSecretOutSerializer._fromJsonObject)}rotateSecret(D,F,M,P){const T=new _.SvixRequest(_.HttpMethod.POST,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/secret/rotate");return T.setPathParam("app_id",D),T.setPathParam("endpoint_id",F),T.setHeaderParam("idempotency-key",P?.idempotencyKey),T.setBody(m.EndpointSecretRotateInSerializer._toJsonObject(M)),T.sendNoResponseBody(this.requestCtx)}sendExample(D,F,M,P){const T=new _.SvixRequest(_.HttpMethod.POST,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/send-example");return T.setPathParam("app_id",D),T.setPathParam("endpoint_id",F),T.setHeaderParam("idempotency-key",P?.idempotencyKey),T.setBody(y.EventExampleInSerializer._toJsonObject(M)),T.send(this.requestCtx,j.MessageOutSerializer._fromJsonObject)}getStats(D,F,M){const P=new _.SvixRequest(_.HttpMethod.GET,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/stats");return P.setPathParam("app_id",D),P.setPathParam("endpoint_id",F),P.setQueryParam("since",M?.since),P.setQueryParam("until",M?.until),P.send(this.requestCtx,h.EndpointStatsSerializer._fromJsonObject)}transformationGet(D,F){const M=new _.SvixRequest(_.HttpMethod.GET,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/transformation");return M.setPathParam("app_id",D),M.setPathParam("endpoint_id",F),M.send(this.requestCtx,u.EndpointTransformationOutSerializer._fromJsonObject)}patchTransformation(D,F,M){const P=new _.SvixRequest(_.HttpMethod.PATCH,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/transformation");return P.setPathParam("app_id",D),P.setPathParam("endpoint_id",F),P.setBody(f.EndpointTransformationPatchSerializer._toJsonObject(M)),P.sendNoResponseBody(this.requestCtx)}transformationPartialUpdate(D,F,M){const P=new _.SvixRequest(_.HttpMethod.PATCH,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/transformation");return P.setPathParam("app_id",D),P.setPathParam("endpoint_id",F),P.setBody(p.EndpointTransformationInSerializer._toJsonObject(M)),P.sendNoResponseBody(this.requestCtx)}}return pc.Endpoint=k,pc}var Mc={},Rc={},zc={},kf={},lN;function ub(){return lN||(lN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorKindSerializer=t.ConnectorKind=void 0,function(s){s.Custom="Custom",s.CloseCrm="CloseCRM",s.CustomerIo="CustomerIO",s.Discord="Discord",s.Hubspot="Hubspot",s.Inngest="Inngest",s.Loops="Loops",s.Resend="Resend",s.Salesforce="Salesforce",s.Segment="Segment",s.Sendgrid="Sendgrid",s.Slack="Slack",s.Teams="Teams",s.TriggerDev="TriggerDev",s.Windmill="Windmill",s.Zapier="Zapier"}(t.ConnectorKind||(t.ConnectorKind={})),t.ConnectorKindSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(kf)),kf}var cN;function vO(){if(cN)return zc;cN=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.ConnectorInSerializer=void 0;const t=ub();return zc.ConnectorInSerializer={_fromJsonObject(s){return{description:s.description,featureFlag:s.featureFlag,featureFlags:s.featureFlags,filterTypes:s.filterTypes,instructions:s.instructions,instructionsLink:s.instructionsLink,kind:s.kind?t.ConnectorKindSerializer._fromJsonObject(s.kind):void 0,logo:s.logo,name:s.name,transformation:s.transformation}},_toJsonObject(s){return{description:s.description,featureFlag:s.featureFlag,featureFlags:s.featureFlags,filterTypes:s.filterTypes,instructions:s.instructions,instructionsLink:s.instructionsLink,kind:s.kind?t.ConnectorKindSerializer._toJsonObject(s.kind):void 0,logo:s.logo,name:s.name,transformation:s.transformation}}},zc}var Ic={},dN;function p9(){return dN||(dN=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.EventTypeInSerializer=void 0,Ic.EventTypeInSerializer={_fromJsonObject(t){return{archived:t.archived,deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,name:t.name,schemas:t.schemas}},_toJsonObject(t){return{archived:t.archived,deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,name:t.name,schemas:t.schemas}}}),Ic}var xN;function yO(){if(xN)return Rc;xN=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.EnvironmentInSerializer=void 0;const t=vO(),s=p9();return Rc.EnvironmentInSerializer={_fromJsonObject(n){var i,o;return{connectors:(i=n.connectors)===null||i===void 0?void 0:i.map(c=>t.ConnectorInSerializer._fromJsonObject(c)),eventTypes:(o=n.eventTypes)===null||o===void 0?void 0:o.map(c=>s.EventTypeInSerializer._fromJsonObject(c)),settings:n.settings}},_toJsonObject(n){var i,o;return{connectors:(i=n.connectors)===null||i===void 0?void 0:i.map(c=>t.ConnectorInSerializer._toJsonObject(c)),eventTypes:(o=n.eventTypes)===null||o===void 0?void 0:o.map(c=>s.EventTypeInSerializer._toJsonObject(c)),settings:n.settings}}},Rc}var Lc={},qc={},uN;function jO(){if(uN)return qc;uN=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.ConnectorOutSerializer=void 0;const t=ub();return qc.ConnectorOutSerializer={_fromJsonObject(s){return{createdAt:new Date(s.createdAt),description:s.description,featureFlag:s.featureFlag,featureFlags:s.featureFlags,filterTypes:s.filterTypes,id:s.id,instructions:s.instructions,instructionsLink:s.instructionsLink,kind:t.ConnectorKindSerializer._fromJsonObject(s.kind),logo:s.logo,name:s.name,orgId:s.orgId,transformation:s.transformation,updatedAt:new Date(s.updatedAt)}},_toJsonObject(s){return{createdAt:s.createdAt,description:s.description,featureFlag:s.featureFlag,featureFlags:s.featureFlags,filterTypes:s.filterTypes,id:s.id,instructions:s.instructions,instructionsLink:s.instructionsLink,kind:t.ConnectorKindSerializer._toJsonObject(s.kind),logo:s.logo,name:s.name,orgId:s.orgId,transformation:s.transformation,updatedAt:s.updatedAt}}},qc}var $c={},mN;function mb(){return mN||(mN=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.EventTypeOutSerializer=void 0,$c.EventTypeOutSerializer={_fromJsonObject(t){return{archived:t.archived,createdAt:new Date(t.createdAt),deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,name:t.name,schemas:t.schemas,updatedAt:new Date(t.updatedAt)}},_toJsonObject(t){return{archived:t.archived,createdAt:t.createdAt,deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,name:t.name,schemas:t.schemas,updatedAt:t.updatedAt}}}),$c}var hN;function NO(){if(hN)return Lc;hN=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.EnvironmentOutSerializer=void 0;const t=jO(),s=mb();return Lc.EnvironmentOutSerializer={_fromJsonObject(n){return{createdAt:new Date(n.createdAt),eventTypes:n.eventTypes.map(i=>s.EventTypeOutSerializer._fromJsonObject(i)),settings:n.settings,transformationTemplates:n.transformationTemplates.map(i=>t.ConnectorOutSerializer._fromJsonObject(i)),version:n.version}},_toJsonObject(n){return{createdAt:n.createdAt,eventTypes:n.eventTypes.map(i=>s.EventTypeOutSerializer._toJsonObject(i)),settings:n.settings,transformationTemplates:n.transformationTemplates.map(i=>t.ConnectorOutSerializer._toJsonObject(i)),version:n.version}}},Lc}var pN;function wO(){if(pN)return Mc;pN=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.Environment=void 0;const t=yO(),s=NO(),n=ur();class i{constructor(c){this.requestCtx=c}export(c){const d=new n.SvixRequest(n.HttpMethod.POST,"/api/v1/environment/export");return d.setHeaderParam("idempotency-key",c?.idempotencyKey),d.send(this.requestCtx,s.EnvironmentOutSerializer._fromJsonObject)}import(c,d){const m=new n.SvixRequest(n.HttpMethod.POST,"/api/v1/environment/import");return m.setHeaderParam("idempotency-key",d?.idempotencyKey),m.setBody(t.EnvironmentInSerializer._toJsonObject(c)),m.sendNoResponseBody(this.requestCtx)}}return Mc.Environment=i,Mc}var Uc={},Vc={},fN;function AO(){return fN||(fN=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.EventTypeImportOpenApiInSerializer=void 0,Vc.EventTypeImportOpenApiInSerializer={_fromJsonObject(t){return{dryRun:t.dryRun,replaceAll:t.replaceAll,spec:t.spec,specRaw:t.specRaw}},_toJsonObject(t){return{dryRun:t.dryRun,replaceAll:t.replaceAll,spec:t.spec,specRaw:t.specRaw}}}),Vc}var Hc={},Jc={},Gc={},gN;function CO(){return gN||(gN=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.EventTypeFromOpenApiSerializer=void 0,Gc.EventTypeFromOpenApiSerializer={_fromJsonObject(t){return{deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,name:t.name,schemas:t.schemas}},_toJsonObject(t){return{deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,name:t.name,schemas:t.schemas}}}),Gc}var bN;function EO(){if(bN)return Jc;bN=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.EventTypeImportOpenApiOutDataSerializer=void 0;const t=CO();return Jc.EventTypeImportOpenApiOutDataSerializer={_fromJsonObject(s){var n;return{modified:s.modified,toModify:(n=s.to_modify)===null||n===void 0?void 0:n.map(i=>t.EventTypeFromOpenApiSerializer._fromJsonObject(i))}},_toJsonObject(s){var n;return{modified:s.modified,to_modify:(n=s.toModify)===null||n===void 0?void 0:n.map(i=>t.EventTypeFromOpenApiSerializer._toJsonObject(i))}}},Jc}var vN;function kO(){if(vN)return Hc;vN=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.EventTypeImportOpenApiOutSerializer=void 0;const t=EO();return Hc.EventTypeImportOpenApiOutSerializer={_fromJsonObject(s){return{data:t.EventTypeImportOpenApiOutDataSerializer._fromJsonObject(s.data)}},_toJsonObject(s){return{data:t.EventTypeImportOpenApiOutDataSerializer._toJsonObject(s.data)}}},Hc}var Yc={},yN;function _O(){return yN||(yN=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.EventTypePatchSerializer=void 0,Yc.EventTypePatchSerializer={_fromJsonObject(t){return{archived:t.archived,deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,schemas:t.schemas}},_toJsonObject(t){return{archived:t.archived,deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,schemas:t.schemas}}}),Yc}var Qc={},jN;function BO(){return jN||(jN=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.EventTypeUpdateSerializer=void 0,Qc.EventTypeUpdateSerializer={_fromJsonObject(t){return{archived:t.archived,deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,schemas:t.schemas}},_toJsonObject(t){return{archived:t.archived,deprecated:t.deprecated,description:t.description,featureFlag:t.featureFlag,featureFlags:t.featureFlags,groupName:t.groupName,schemas:t.schemas}}}),Qc}var Wc={},NN;function SO(){if(NN)return Wc;NN=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.ListResponseEventTypeOutSerializer=void 0;const t=mb();return Wc.ListResponseEventTypeOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.EventTypeOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.EventTypeOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},Wc}var wN;function DO(){if(wN)return Uc;wN=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.EventType=void 0;const t=AO(),s=kO(),n=p9(),i=mb(),o=_O(),c=BO(),d=SO(),m=ur();class h{constructor(u){this.requestCtx=u}list(u){const f=new m.SvixRequest(m.HttpMethod.GET,"/api/v1/event-type");return f.setQueryParam("limit",u?.limit),f.setQueryParam("iterator",u?.iterator),f.setQueryParam("order",u?.order),f.setQueryParam("include_archived",u?.includeArchived),f.setQueryParam("with_content",u?.withContent),f.send(this.requestCtx,d.ListResponseEventTypeOutSerializer._fromJsonObject)}create(u,f){const g=new m.SvixRequest(m.HttpMethod.POST,"/api/v1/event-type");return g.setHeaderParam("idempotency-key",f?.idempotencyKey),g.setBody(n.EventTypeInSerializer._toJsonObject(u)),g.send(this.requestCtx,i.EventTypeOutSerializer._fromJsonObject)}importOpenapi(u,f){const g=new m.SvixRequest(m.HttpMethod.POST,"/api/v1/event-type/import/openapi");return g.setHeaderParam("idempotency-key",f?.idempotencyKey),g.setBody(t.EventTypeImportOpenApiInSerializer._toJsonObject(u)),g.send(this.requestCtx,s.EventTypeImportOpenApiOutSerializer._fromJsonObject)}get(u){const f=new m.SvixRequest(m.HttpMethod.GET,"/api/v1/event-type/{event_type_name}");return f.setPathParam("event_type_name",u),f.send(this.requestCtx,i.EventTypeOutSerializer._fromJsonObject)}update(u,f){const g=new m.SvixRequest(m.HttpMethod.PUT,"/api/v1/event-type/{event_type_name}");return g.setPathParam("event_type_name",u),g.setBody(c.EventTypeUpdateSerializer._toJsonObject(f)),g.send(this.requestCtx,i.EventTypeOutSerializer._fromJsonObject)}delete(u,f){const g=new m.SvixRequest(m.HttpMethod.DELETE,"/api/v1/event-type/{event_type_name}");return g.setPathParam("event_type_name",u),g.setQueryParam("expunge",f?.expunge),g.sendNoResponseBody(this.requestCtx)}patch(u,f){const g=new m.SvixRequest(m.HttpMethod.PATCH,"/api/v1/event-type/{event_type_name}");return g.setPathParam("event_type_name",u),g.setBody(o.EventTypePatchSerializer._toJsonObject(f)),g.send(this.requestCtx,i.EventTypeOutSerializer._fromJsonObject)}}return Uc.EventType=h,Uc}var Kc={},AN;function FO(){if(AN)return Kc;AN=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.Health=void 0;const t=ur();class s{constructor(i){this.requestCtx=i}get(){return new t.SvixRequest(t.HttpMethod.GET,"/api/v1/health").sendNoResponseBody(this.requestCtx)}}return Kc.Health=s,Kc}var Xc={},Zc={},CN;function PO(){return CN||(CN=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.IngestSourceConsumerPortalAccessInSerializer=void 0,Zc.IngestSourceConsumerPortalAccessInSerializer={_fromJsonObject(t){return{expiry:t.expiry,readOnly:t.readOnly}},_toJsonObject(t){return{expiry:t.expiry,readOnly:t.readOnly}}}),Zc}var ed={},td={},EN;function TO(){return EN||(EN=1,Object.defineProperty(td,"__esModule",{value:!0}),td.IngestEndpointHeadersInSerializer=void 0,td.IngestEndpointHeadersInSerializer={_fromJsonObject(t){return{headers:t.headers}},_toJsonObject(t){return{headers:t.headers}}}),td}var sd={},kN;function OO(){return kN||(kN=1,Object.defineProperty(sd,"__esModule",{value:!0}),sd.IngestEndpointHeadersOutSerializer=void 0,sd.IngestEndpointHeadersOutSerializer={_fromJsonObject(t){return{headers:t.headers,sensitive:t.sensitive}},_toJsonObject(t){return{headers:t.headers,sensitive:t.sensitive}}}),sd}var rd={},_N;function MO(){return _N||(_N=1,Object.defineProperty(rd,"__esModule",{value:!0}),rd.IngestEndpointInSerializer=void 0,rd.IngestEndpointInSerializer={_fromJsonObject(t){return{description:t.description,disabled:t.disabled,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url}},_toJsonObject(t){return{description:t.description,disabled:t.disabled,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url}}}),rd}var ad={},BN;function f9(){return BN||(BN=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.IngestEndpointOutSerializer=void 0,ad.IngestEndpointOutSerializer={_fromJsonObject(t){return{createdAt:new Date(t.createdAt),description:t.description,disabled:t.disabled,id:t.id,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,updatedAt:new Date(t.updatedAt),url:t.url}},_toJsonObject(t){return{createdAt:t.createdAt,description:t.description,disabled:t.disabled,id:t.id,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,updatedAt:t.updatedAt,url:t.url}}}),ad}var nd={},SN;function RO(){return SN||(SN=1,Object.defineProperty(nd,"__esModule",{value:!0}),nd.IngestEndpointSecretInSerializer=void 0,nd.IngestEndpointSecretInSerializer={_fromJsonObject(t){return{key:t.key}},_toJsonObject(t){return{key:t.key}}}),nd}var id={},DN;function zO(){return DN||(DN=1,Object.defineProperty(id,"__esModule",{value:!0}),id.IngestEndpointSecretOutSerializer=void 0,id.IngestEndpointSecretOutSerializer={_fromJsonObject(t){return{key:t.key}},_toJsonObject(t){return{key:t.key}}}),id}var od={},FN;function IO(){return FN||(FN=1,Object.defineProperty(od,"__esModule",{value:!0}),od.IngestEndpointTransformationOutSerializer=void 0,od.IngestEndpointTransformationOutSerializer={_fromJsonObject(t){return{code:t.code,enabled:t.enabled}},_toJsonObject(t){return{code:t.code,enabled:t.enabled}}}),od}var ld={},PN;function LO(){return PN||(PN=1,Object.defineProperty(ld,"__esModule",{value:!0}),ld.IngestEndpointTransformationPatchSerializer=void 0,ld.IngestEndpointTransformationPatchSerializer={_fromJsonObject(t){return{code:t.code,enabled:t.enabled}},_toJsonObject(t){return{code:t.code,enabled:t.enabled}}}),ld}var cd={},TN;function qO(){return TN||(TN=1,Object.defineProperty(cd,"__esModule",{value:!0}),cd.IngestEndpointUpdateSerializer=void 0,cd.IngestEndpointUpdateSerializer={_fromJsonObject(t){return{description:t.description,disabled:t.disabled,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,url:t.url}},_toJsonObject(t){return{description:t.description,disabled:t.disabled,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,url:t.url}}}),cd}var dd={},ON;function $O(){if(ON)return dd;ON=1,Object.defineProperty(dd,"__esModule",{value:!0}),dd.ListResponseIngestEndpointOutSerializer=void 0;const t=f9();return dd.ListResponseIngestEndpointOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.IngestEndpointOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.IngestEndpointOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},dd}var MN;function UO(){if(MN)return ed;MN=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.IngestEndpoint=void 0;const t=TO(),s=OO(),n=MO(),i=f9(),o=RO(),c=zO(),d=IO(),m=LO(),h=qO(),p=$O(),u=ur();class f{constructor(y){this.requestCtx=y}list(y,b){const j=new u.SvixRequest(u.HttpMethod.GET,"/ingest/api/v1/source/{source_id}/endpoint");return j.setPathParam("source_id",y),j.setQueryParam("limit",b?.limit),j.setQueryParam("iterator",b?.iterator),j.setQueryParam("order",b?.order),j.send(this.requestCtx,p.ListResponseIngestEndpointOutSerializer._fromJsonObject)}create(y,b,j){const N=new u.SvixRequest(u.HttpMethod.POST,"/ingest/api/v1/source/{source_id}/endpoint");return N.setPathParam("source_id",y),N.setHeaderParam("idempotency-key",j?.idempotencyKey),N.setBody(n.IngestEndpointInSerializer._toJsonObject(b)),N.send(this.requestCtx,i.IngestEndpointOutSerializer._fromJsonObject)}get(y,b){const j=new u.SvixRequest(u.HttpMethod.GET,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}");return j.setPathParam("source_id",y),j.setPathParam("endpoint_id",b),j.send(this.requestCtx,i.IngestEndpointOutSerializer._fromJsonObject)}update(y,b,j){const N=new u.SvixRequest(u.HttpMethod.PUT,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}");return N.setPathParam("source_id",y),N.setPathParam("endpoint_id",b),N.setBody(h.IngestEndpointUpdateSerializer._toJsonObject(j)),N.send(this.requestCtx,i.IngestEndpointOutSerializer._fromJsonObject)}delete(y,b){const j=new u.SvixRequest(u.HttpMethod.DELETE,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}");return j.setPathParam("source_id",y),j.setPathParam("endpoint_id",b),j.sendNoResponseBody(this.requestCtx)}getHeaders(y,b){const j=new u.SvixRequest(u.HttpMethod.GET,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}/headers");return j.setPathParam("source_id",y),j.setPathParam("endpoint_id",b),j.send(this.requestCtx,s.IngestEndpointHeadersOutSerializer._fromJsonObject)}updateHeaders(y,b,j){const N=new u.SvixRequest(u.HttpMethod.PUT,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}/headers");return N.setPathParam("source_id",y),N.setPathParam("endpoint_id",b),N.setBody(t.IngestEndpointHeadersInSerializer._toJsonObject(j)),N.sendNoResponseBody(this.requestCtx)}getSecret(y,b){const j=new u.SvixRequest(u.HttpMethod.GET,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}/secret");return j.setPathParam("source_id",y),j.setPathParam("endpoint_id",b),j.send(this.requestCtx,c.IngestEndpointSecretOutSerializer._fromJsonObject)}rotateSecret(y,b,j,N){const w=new u.SvixRequest(u.HttpMethod.POST,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}/secret/rotate");return w.setPathParam("source_id",y),w.setPathParam("endpoint_id",b),w.setHeaderParam("idempotency-key",N?.idempotencyKey),w.setBody(o.IngestEndpointSecretInSerializer._toJsonObject(j)),w.sendNoResponseBody(this.requestCtx)}getTransformation(y,b){const j=new u.SvixRequest(u.HttpMethod.GET,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}/transformation");return j.setPathParam("source_id",y),j.setPathParam("endpoint_id",b),j.send(this.requestCtx,d.IngestEndpointTransformationOutSerializer._fromJsonObject)}setTransformation(y,b,j){const N=new u.SvixRequest(u.HttpMethod.PATCH,"/ingest/api/v1/source/{source_id}/endpoint/{endpoint_id}/transformation");return N.setPathParam("source_id",y),N.setPathParam("endpoint_id",b),N.setBody(m.IngestEndpointTransformationPatchSerializer._toJsonObject(j)),N.sendNoResponseBody(this.requestCtx)}}return ed.IngestEndpoint=f,ed}var xd={},ud={},md={},RN;function VO(){return RN||(RN=1,Object.defineProperty(md,"__esModule",{value:!0}),md.AdobeSignConfigSerializer=void 0,md.AdobeSignConfigSerializer={_fromJsonObject(t){return{clientId:t.clientId}},_toJsonObject(t){return{clientId:t.clientId}}}),md}var hd={},zN;function HO(){return zN||(zN=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.AirwallexConfigSerializer=void 0,hd.AirwallexConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),hd}var pd={},IN;function JO(){return IN||(IN=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.CheckbookConfigSerializer=void 0,pd.CheckbookConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),pd}var fd={},LN;function g9(){return LN||(LN=1,Object.defineProperty(fd,"__esModule",{value:!0}),fd.CronConfigSerializer=void 0,fd.CronConfigSerializer={_fromJsonObject(t){return{contentType:t.contentType,payload:t.payload,schedule:t.schedule}},_toJsonObject(t){return{contentType:t.contentType,payload:t.payload,schedule:t.schedule}}}),fd}var gd={},qN;function GO(){return qN||(qN=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.DocusignConfigSerializer=void 0,gd.DocusignConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),gd}var bd={},$N;function YO(){return $N||($N=1,Object.defineProperty(bd,"__esModule",{value:!0}),bd.EasypostConfigSerializer=void 0,bd.EasypostConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),bd}var vd={},UN;function QO(){return UN||(UN=1,Object.defineProperty(vd,"__esModule",{value:!0}),vd.GithubConfigSerializer=void 0,vd.GithubConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),vd}var yd={},VN;function WO(){return VN||(VN=1,Object.defineProperty(yd,"__esModule",{value:!0}),yd.HubspotConfigSerializer=void 0,yd.HubspotConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),yd}var jd={},HN;function KO(){return HN||(HN=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.OrumIoConfigSerializer=void 0,jd.OrumIoConfigSerializer={_fromJsonObject(t){return{publicKey:t.publicKey}},_toJsonObject(t){return{publicKey:t.publicKey}}}),jd}var Nd={},JN;function XO(){return JN||(JN=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.PandaDocConfigSerializer=void 0,Nd.PandaDocConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Nd}var wd={},GN;function ZO(){return GN||(GN=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.PortIoConfigSerializer=void 0,wd.PortIoConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),wd}var Ad={},YN;function eM(){return YN||(YN=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.RutterConfigSerializer=void 0,Ad.RutterConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Ad}var Cd={},QN;function tM(){return QN||(QN=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.SegmentConfigSerializer=void 0,Cd.SegmentConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Cd}var Ed={},WN;function sM(){return WN||(WN=1,Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.ShopifyConfigSerializer=void 0,Ed.ShopifyConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Ed}var kd={},KN;function rM(){return KN||(KN=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.SlackConfigSerializer=void 0,kd.SlackConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),kd}var _d={},XN;function aM(){return XN||(XN=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.StripeConfigSerializer=void 0,_d.StripeConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),_d}var Bd={},ZN;function nM(){return ZN||(ZN=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.SvixConfigSerializer=void 0,Bd.SvixConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Bd}var Sd={},ew;function iM(){return ew||(ew=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.TelnyxConfigSerializer=void 0,Sd.TelnyxConfigSerializer={_fromJsonObject(t){return{publicKey:t.publicKey}},_toJsonObject(t){return{publicKey:t.publicKey}}}),Sd}var Dd={},tw;function oM(){return tw||(tw=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.VapiConfigSerializer=void 0,Dd.VapiConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Dd}var Fd={},sw;function lM(){return sw||(sw=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.VeriffConfigSerializer=void 0,Fd.VeriffConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Fd}var Pd={},rw;function cM(){return rw||(rw=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.ZoomConfigSerializer=void 0,Pd.ZoomConfigSerializer={_fromJsonObject(t){return{secret:t.secret}},_toJsonObject(t){return{secret:t.secret}}}),Pd}var aw;function dM(){if(aw)return ud;aw=1,Object.defineProperty(ud,"__esModule",{value:!0}),ud.IngestSourceInSerializer=void 0;const t=VO(),s=HO(),n=JO(),i=g9(),o=GO(),c=YO(),d=QO(),m=WO(),h=KO(),p=XO(),u=ZO(),f=eM(),g=tM(),y=sM(),b=rM(),j=aM(),N=nM(),w=iM(),B=oM(),S=lM(),_=cM();return ud.IngestSourceInSerializer={_fromJsonObject(k){const E=k.type;function D(F){switch(F){case"generic-webhook":return{};case"cron":return i.CronConfigSerializer._fromJsonObject(k.config);case"adobe-sign":return t.AdobeSignConfigSerializer._fromJsonObject(k.config);case"beehiiv":return N.SvixConfigSerializer._fromJsonObject(k.config);case"brex":return N.SvixConfigSerializer._fromJsonObject(k.config);case"checkbook":return n.CheckbookConfigSerializer._fromJsonObject(k.config);case"clerk":return N.SvixConfigSerializer._fromJsonObject(k.config);case"docusign":return o.DocusignConfigSerializer._fromJsonObject(k.config);case"easypost":return c.EasypostConfigSerializer._fromJsonObject(k.config);case"github":return d.GithubConfigSerializer._fromJsonObject(k.config);case"guesty":return N.SvixConfigSerializer._fromJsonObject(k.config);case"hubspot":return m.HubspotConfigSerializer._fromJsonObject(k.config);case"incident-io":return N.SvixConfigSerializer._fromJsonObject(k.config);case"lithic":return N.SvixConfigSerializer._fromJsonObject(k.config);case"nash":return N.SvixConfigSerializer._fromJsonObject(k.config);case"orum-io":return h.OrumIoConfigSerializer._fromJsonObject(k.config);case"panda-doc":return p.PandaDocConfigSerializer._fromJsonObject(k.config);case"port-io":return u.PortIoConfigSerializer._fromJsonObject(k.config);case"pleo":return N.SvixConfigSerializer._fromJsonObject(k.config);case"replicate":return N.SvixConfigSerializer._fromJsonObject(k.config);case"resend":return N.SvixConfigSerializer._fromJsonObject(k.config);case"rutter":return f.RutterConfigSerializer._fromJsonObject(k.config);case"safebase":return N.SvixConfigSerializer._fromJsonObject(k.config);case"sardine":return N.SvixConfigSerializer._fromJsonObject(k.config);case"segment":return g.SegmentConfigSerializer._fromJsonObject(k.config);case"shopify":return y.ShopifyConfigSerializer._fromJsonObject(k.config);case"slack":return b.SlackConfigSerializer._fromJsonObject(k.config);case"stripe":return j.StripeConfigSerializer._fromJsonObject(k.config);case"stych":return N.SvixConfigSerializer._fromJsonObject(k.config);case"svix":return N.SvixConfigSerializer._fromJsonObject(k.config);case"zoom":return _.ZoomConfigSerializer._fromJsonObject(k.config);case"telnyx":return w.TelnyxConfigSerializer._fromJsonObject(k.config);case"vapi":return B.VapiConfigSerializer._fromJsonObject(k.config);case"open-ai":return N.SvixConfigSerializer._fromJsonObject(k.config);case"render":return N.SvixConfigSerializer._fromJsonObject(k.config);case"veriff":return S.VeriffConfigSerializer._fromJsonObject(k.config);case"airwallex":return s.AirwallexConfigSerializer._fromJsonObject(k.config);default:throw new Error(`Unexpected type: ${F}`)}}return{type:E,config:D(E),metadata:k.metadata,name:k.name,uid:k.uid}},_toJsonObject(k){let E;switch(k.type){case"generic-webhook":E={};break;case"cron":E=i.CronConfigSerializer._toJsonObject(k.config);break;case"adobe-sign":E=t.AdobeSignConfigSerializer._toJsonObject(k.config);break;case"beehiiv":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"brex":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"checkbook":E=n.CheckbookConfigSerializer._toJsonObject(k.config);break;case"clerk":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"docusign":E=o.DocusignConfigSerializer._toJsonObject(k.config);break;case"easypost":E=c.EasypostConfigSerializer._toJsonObject(k.config);break;case"github":E=d.GithubConfigSerializer._toJsonObject(k.config);break;case"guesty":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"hubspot":E=m.HubspotConfigSerializer._toJsonObject(k.config);break;case"incident-io":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"lithic":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"nash":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"orum-io":E=h.OrumIoConfigSerializer._toJsonObject(k.config);break;case"panda-doc":E=p.PandaDocConfigSerializer._toJsonObject(k.config);break;case"port-io":E=u.PortIoConfigSerializer._toJsonObject(k.config);break;case"pleo":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"replicate":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"resend":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"rutter":E=f.RutterConfigSerializer._toJsonObject(k.config);break;case"safebase":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"sardine":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"segment":E=g.SegmentConfigSerializer._toJsonObject(k.config);break;case"shopify":E=y.ShopifyConfigSerializer._toJsonObject(k.config);break;case"slack":E=b.SlackConfigSerializer._toJsonObject(k.config);break;case"stripe":E=j.StripeConfigSerializer._toJsonObject(k.config);break;case"stych":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"svix":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"zoom":E=_.ZoomConfigSerializer._toJsonObject(k.config);break;case"telnyx":E=w.TelnyxConfigSerializer._toJsonObject(k.config);break;case"vapi":E=B.VapiConfigSerializer._toJsonObject(k.config);break;case"open-ai":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"render":E=N.SvixConfigSerializer._toJsonObject(k.config);break;case"veriff":E=S.VeriffConfigSerializer._toJsonObject(k.config);break;case"airwallex":E=s.AirwallexConfigSerializer._toJsonObject(k.config);break}return{type:k.type,config:E,metadata:k.metadata,name:k.name,uid:k.uid}}},ud}var Td={},Od={},nw;function xM(){return nw||(nw=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.AdobeSignConfigOutSerializer=void 0,Od.AdobeSignConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Od}var Md={},iw;function uM(){return iw||(iw=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.AirwallexConfigOutSerializer=void 0,Md.AirwallexConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Md}var Rd={},ow;function mM(){return ow||(ow=1,Object.defineProperty(Rd,"__esModule",{value:!0}),Rd.CheckbookConfigOutSerializer=void 0,Rd.CheckbookConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Rd}var zd={},lw;function hM(){return lw||(lw=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.DocusignConfigOutSerializer=void 0,zd.DocusignConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),zd}var Id={},cw;function pM(){return cw||(cw=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.EasypostConfigOutSerializer=void 0,Id.EasypostConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Id}var Ld={},dw;function fM(){return dw||(dw=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.GithubConfigOutSerializer=void 0,Ld.GithubConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Ld}var qd={},xw;function gM(){return xw||(xw=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.HubspotConfigOutSerializer=void 0,qd.HubspotConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),qd}var $d={},uw;function bM(){return uw||(uw=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.OrumIoConfigOutSerializer=void 0,$d.OrumIoConfigOutSerializer={_fromJsonObject(t){return{publicKey:t.publicKey}},_toJsonObject(t){return{publicKey:t.publicKey}}}),$d}var Ud={},mw;function vM(){return mw||(mw=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.PandaDocConfigOutSerializer=void 0,Ud.PandaDocConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Ud}var Vd={},hw;function yM(){return hw||(hw=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.PortIoConfigOutSerializer=void 0,Vd.PortIoConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Vd}var Hd={},pw;function jM(){return pw||(pw=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.RutterConfigOutSerializer=void 0,Hd.RutterConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Hd}var Jd={},fw;function NM(){return fw||(fw=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.SegmentConfigOutSerializer=void 0,Jd.SegmentConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Jd}var Gd={},gw;function wM(){return gw||(gw=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.ShopifyConfigOutSerializer=void 0,Gd.ShopifyConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Gd}var Yd={},bw;function AM(){return bw||(bw=1,Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.SlackConfigOutSerializer=void 0,Yd.SlackConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Yd}var Qd={},vw;function CM(){return vw||(vw=1,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.StripeConfigOutSerializer=void 0,Qd.StripeConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Qd}var Wd={},yw;function EM(){return yw||(yw=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.SvixConfigOutSerializer=void 0,Wd.SvixConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Wd}var Kd={},jw;function kM(){return jw||(jw=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.TelnyxConfigOutSerializer=void 0,Kd.TelnyxConfigOutSerializer={_fromJsonObject(t){return{publicKey:t.publicKey}},_toJsonObject(t){return{publicKey:t.publicKey}}}),Kd}var Xd={},Nw;function _M(){return Nw||(Nw=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.VapiConfigOutSerializer=void 0,Xd.VapiConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Xd}var Zd={},ww;function BM(){return ww||(ww=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.VeriffConfigOutSerializer=void 0,Zd.VeriffConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),Zd}var ex={},Aw;function SM(){return Aw||(Aw=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.ZoomConfigOutSerializer=void 0,ex.ZoomConfigOutSerializer={_fromJsonObject(t){return{}},_toJsonObject(t){return{}}}),ex}var Cw;function b9(){if(Cw)return Td;Cw=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.IngestSourceOutSerializer=void 0;const t=xM(),s=uM(),n=mM(),i=g9(),o=hM(),c=pM(),d=fM(),m=gM(),h=bM(),p=vM(),u=yM(),f=jM(),g=NM(),y=wM(),b=AM(),j=CM(),N=EM(),w=kM(),B=_M(),S=BM(),_=SM();return Td.IngestSourceOutSerializer={_fromJsonObject(k){const E=k.type;function D(F){switch(F){case"generic-webhook":return{};case"cron":return i.CronConfigSerializer._fromJsonObject(k.config);case"adobe-sign":return t.AdobeSignConfigOutSerializer._fromJsonObject(k.config);case"beehiiv":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"brex":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"checkbook":return n.CheckbookConfigOutSerializer._fromJsonObject(k.config);case"clerk":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"docusign":return o.DocusignConfigOutSerializer._fromJsonObject(k.config);case"easypost":return c.EasypostConfigOutSerializer._fromJsonObject(k.config);case"github":return d.GithubConfigOutSerializer._fromJsonObject(k.config);case"guesty":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"hubspot":return m.HubspotConfigOutSerializer._fromJsonObject(k.config);case"incident-io":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"lithic":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"nash":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"orum-io":return h.OrumIoConfigOutSerializer._fromJsonObject(k.config);case"panda-doc":return p.PandaDocConfigOutSerializer._fromJsonObject(k.config);case"port-io":return u.PortIoConfigOutSerializer._fromJsonObject(k.config);case"pleo":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"replicate":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"resend":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"rutter":return f.RutterConfigOutSerializer._fromJsonObject(k.config);case"safebase":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"sardine":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"segment":return g.SegmentConfigOutSerializer._fromJsonObject(k.config);case"shopify":return y.ShopifyConfigOutSerializer._fromJsonObject(k.config);case"slack":return b.SlackConfigOutSerializer._fromJsonObject(k.config);case"stripe":return j.StripeConfigOutSerializer._fromJsonObject(k.config);case"stych":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"svix":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"zoom":return _.ZoomConfigOutSerializer._fromJsonObject(k.config);case"telnyx":return w.TelnyxConfigOutSerializer._fromJsonObject(k.config);case"vapi":return B.VapiConfigOutSerializer._fromJsonObject(k.config);case"open-ai":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"render":return N.SvixConfigOutSerializer._fromJsonObject(k.config);case"veriff":return S.VeriffConfigOutSerializer._fromJsonObject(k.config);case"airwallex":return s.AirwallexConfigOutSerializer._fromJsonObject(k.config);default:throw new Error(`Unexpected type: ${F}`)}}return{type:E,config:D(E),createdAt:new Date(k.createdAt),id:k.id,ingestUrl:k.ingestUrl,metadata:k.metadata,name:k.name,uid:k.uid,updatedAt:new Date(k.updatedAt)}},_toJsonObject(k){let E;switch(k.type){case"generic-webhook":E={};break;case"cron":E=i.CronConfigSerializer._toJsonObject(k.config);break;case"adobe-sign":E=t.AdobeSignConfigOutSerializer._toJsonObject(k.config);break;case"beehiiv":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"brex":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"checkbook":E=n.CheckbookConfigOutSerializer._toJsonObject(k.config);break;case"clerk":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"docusign":E=o.DocusignConfigOutSerializer._toJsonObject(k.config);break;case"easypost":E=c.EasypostConfigOutSerializer._toJsonObject(k.config);break;case"github":E=d.GithubConfigOutSerializer._toJsonObject(k.config);break;case"guesty":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"hubspot":E=m.HubspotConfigOutSerializer._toJsonObject(k.config);break;case"incident-io":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"lithic":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"nash":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"orum-io":E=h.OrumIoConfigOutSerializer._toJsonObject(k.config);break;case"panda-doc":E=p.PandaDocConfigOutSerializer._toJsonObject(k.config);break;case"port-io":E=u.PortIoConfigOutSerializer._toJsonObject(k.config);break;case"pleo":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"replicate":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"resend":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"rutter":E=f.RutterConfigOutSerializer._toJsonObject(k.config);break;case"safebase":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"sardine":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"segment":E=g.SegmentConfigOutSerializer._toJsonObject(k.config);break;case"shopify":E=y.ShopifyConfigOutSerializer._toJsonObject(k.config);break;case"slack":E=b.SlackConfigOutSerializer._toJsonObject(k.config);break;case"stripe":E=j.StripeConfigOutSerializer._toJsonObject(k.config);break;case"stych":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"svix":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"zoom":E=_.ZoomConfigOutSerializer._toJsonObject(k.config);break;case"telnyx":E=w.TelnyxConfigOutSerializer._toJsonObject(k.config);break;case"vapi":E=B.VapiConfigOutSerializer._toJsonObject(k.config);break;case"open-ai":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"render":E=N.SvixConfigOutSerializer._toJsonObject(k.config);break;case"veriff":E=S.VeriffConfigOutSerializer._toJsonObject(k.config);break;case"airwallex":E=s.AirwallexConfigOutSerializer._toJsonObject(k.config);break}return{type:k.type,config:E,createdAt:k.createdAt,id:k.id,ingestUrl:k.ingestUrl,metadata:k.metadata,name:k.name,uid:k.uid,updatedAt:k.updatedAt}}},Td}var tx={},Ew;function DM(){if(Ew)return tx;Ew=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.ListResponseIngestSourceOutSerializer=void 0;const t=b9();return tx.ListResponseIngestSourceOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.IngestSourceOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.IngestSourceOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},tx}var sx={},kw;function FM(){return kw||(kw=1,Object.defineProperty(sx,"__esModule",{value:!0}),sx.RotateTokenOutSerializer=void 0,sx.RotateTokenOutSerializer={_fromJsonObject(t){return{ingestUrl:t.ingestUrl}},_toJsonObject(t){return{ingestUrl:t.ingestUrl}}}),sx}var _w;function PM(){if(_w)return xd;_w=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.IngestSource=void 0;const t=dM(),s=b9(),n=DM(),i=FM(),o=ur();class c{constructor(m){this.requestCtx=m}list(m){const h=new o.SvixRequest(o.HttpMethod.GET,"/ingest/api/v1/source");return h.setQueryParam("limit",m?.limit),h.setQueryParam("iterator",m?.iterator),h.setQueryParam("order",m?.order),h.send(this.requestCtx,n.ListResponseIngestSourceOutSerializer._fromJsonObject)}create(m,h){const p=new o.SvixRequest(o.HttpMethod.POST,"/ingest/api/v1/source");return p.setHeaderParam("idempotency-key",h?.idempotencyKey),p.setBody(t.IngestSourceInSerializer._toJsonObject(m)),p.send(this.requestCtx,s.IngestSourceOutSerializer._fromJsonObject)}get(m){const h=new o.SvixRequest(o.HttpMethod.GET,"/ingest/api/v1/source/{source_id}");return h.setPathParam("source_id",m),h.send(this.requestCtx,s.IngestSourceOutSerializer._fromJsonObject)}update(m,h){const p=new o.SvixRequest(o.HttpMethod.PUT,"/ingest/api/v1/source/{source_id}");return p.setPathParam("source_id",m),p.setBody(t.IngestSourceInSerializer._toJsonObject(h)),p.send(this.requestCtx,s.IngestSourceOutSerializer._fromJsonObject)}delete(m){const h=new o.SvixRequest(o.HttpMethod.DELETE,"/ingest/api/v1/source/{source_id}");return h.setPathParam("source_id",m),h.sendNoResponseBody(this.requestCtx)}rotateToken(m,h){const p=new o.SvixRequest(o.HttpMethod.POST,"/ingest/api/v1/source/{source_id}/token/rotate");return p.setPathParam("source_id",m),p.setHeaderParam("idempotency-key",h?.idempotencyKey),p.send(this.requestCtx,i.RotateTokenOutSerializer._fromJsonObject)}}return xd.IngestSource=c,xd}var Bw;function TM(){if(Bw)return Xc;Bw=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.Ingest=void 0;const t=u9(),s=PO(),n=UO(),i=PM(),o=ur();class c{constructor(m){this.requestCtx=m}get endpoint(){return new n.IngestEndpoint(this.requestCtx)}get source(){return new i.IngestSource(this.requestCtx)}dashboard(m,h,p){const u=new o.SvixRequest(o.HttpMethod.POST,"/ingest/api/v1/source/{source_id}/dashboard");return u.setPathParam("source_id",m),u.setHeaderParam("idempotency-key",p?.idempotencyKey),u.setBody(s.IngestSourceConsumerPortalAccessInSerializer._toJsonObject(h)),u.send(this.requestCtx,t.DashboardAccessOutSerializer._fromJsonObject)}}return Xc.Ingest=c,Xc}var rx={},ax={},Sw;function OM(){return Sw||(Sw=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.IntegrationInSerializer=void 0,ax.IntegrationInSerializer={_fromJsonObject(t){return{featureFlags:t.featureFlags,name:t.name}},_toJsonObject(t){return{featureFlags:t.featureFlags,name:t.name}}}),ax}var nx={},Dw;function MM(){return Dw||(Dw=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.IntegrationKeyOutSerializer=void 0,nx.IntegrationKeyOutSerializer={_fromJsonObject(t){return{key:t.key}},_toJsonObject(t){return{key:t.key}}}),nx}var ix={},Fw;function v9(){return Fw||(Fw=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.IntegrationOutSerializer=void 0,ix.IntegrationOutSerializer={_fromJsonObject(t){return{createdAt:new Date(t.createdAt),featureFlags:t.featureFlags,id:t.id,name:t.name,updatedAt:new Date(t.updatedAt)}},_toJsonObject(t){return{createdAt:t.createdAt,featureFlags:t.featureFlags,id:t.id,name:t.name,updatedAt:t.updatedAt}}}),ix}var ox={},Pw;function RM(){return Pw||(Pw=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.IntegrationUpdateSerializer=void 0,ox.IntegrationUpdateSerializer={_fromJsonObject(t){return{featureFlags:t.featureFlags,name:t.name}},_toJsonObject(t){return{featureFlags:t.featureFlags,name:t.name}}}),ox}var lx={},Tw;function zM(){if(Tw)return lx;Tw=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.ListResponseIntegrationOutSerializer=void 0;const t=v9();return lx.ListResponseIntegrationOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.IntegrationOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.IntegrationOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},lx}var Ow;function IM(){if(Ow)return rx;Ow=1,Object.defineProperty(rx,"__esModule",{value:!0}),rx.Integration=void 0;const t=OM(),s=MM(),n=v9(),i=RM(),o=zM(),c=ur();class d{constructor(h){this.requestCtx=h}list(h,p){const u=new c.SvixRequest(c.HttpMethod.GET,"/api/v1/app/{app_id}/integration");return u.setPathParam("app_id",h),u.setQueryParam("limit",p?.limit),u.setQueryParam("iterator",p?.iterator),u.setQueryParam("order",p?.order),u.send(this.requestCtx,o.ListResponseIntegrationOutSerializer._fromJsonObject)}create(h,p,u){const f=new c.SvixRequest(c.HttpMethod.POST,"/api/v1/app/{app_id}/integration");return f.setPathParam("app_id",h),f.setHeaderParam("idempotency-key",u?.idempotencyKey),f.setBody(t.IntegrationInSerializer._toJsonObject(p)),f.send(this.requestCtx,n.IntegrationOutSerializer._fromJsonObject)}get(h,p){const u=new c.SvixRequest(c.HttpMethod.GET,"/api/v1/app/{app_id}/integration/{integ_id}");return u.setPathParam("app_id",h),u.setPathParam("integ_id",p),u.send(this.requestCtx,n.IntegrationOutSerializer._fromJsonObject)}update(h,p,u){const f=new c.SvixRequest(c.HttpMethod.PUT,"/api/v1/app/{app_id}/integration/{integ_id}");return f.setPathParam("app_id",h),f.setPathParam("integ_id",p),f.setBody(i.IntegrationUpdateSerializer._toJsonObject(u)),f.send(this.requestCtx,n.IntegrationOutSerializer._fromJsonObject)}delete(h,p){const u=new c.SvixRequest(c.HttpMethod.DELETE,"/api/v1/app/{app_id}/integration/{integ_id}");return u.setPathParam("app_id",h),u.setPathParam("integ_id",p),u.sendNoResponseBody(this.requestCtx)}getKey(h,p){const u=new c.SvixRequest(c.HttpMethod.GET,"/api/v1/app/{app_id}/integration/{integ_id}/key");return u.setPathParam("app_id",h),u.setPathParam("integ_id",p),u.send(this.requestCtx,s.IntegrationKeyOutSerializer._fromJsonObject)}rotateKey(h,p,u){const f=new c.SvixRequest(c.HttpMethod.POST,"/api/v1/app/{app_id}/integration/{integ_id}/key/rotate");return f.setPathParam("app_id",h),f.setPathParam("integ_id",p),f.setHeaderParam("idempotency-key",u?.idempotencyKey),f.send(this.requestCtx,s.IntegrationKeyOutSerializer._fromJsonObject)}}return rx.Integration=d,rx}var di={},cx={},Mw;function LM(){if(Mw)return cx;Mw=1,Object.defineProperty(cx,"__esModule",{value:!0}),cx.ExpungeAllContentsOutSerializer=void 0;const t=Ei(),s=ki();return cx.ExpungeAllContentsOutSerializer={_fromJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._fromJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._fromJsonObject(n.task)}},_toJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._toJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._toJsonObject(n.task)}}},cx}var dx={},Rw;function qM(){if(Rw)return dx;Rw=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.ListResponseMessageOutSerializer=void 0;const t=Em();return dx.ListResponseMessageOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.MessageOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.MessageOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},dx}var xx={},ux={},zw;function $M(){return zw||(zw=1,Object.defineProperty(ux,"__esModule",{value:!0}),ux.PollingEndpointConsumerSeekInSerializer=void 0,ux.PollingEndpointConsumerSeekInSerializer={_fromJsonObject(t){return{after:new Date(t.after)}},_toJsonObject(t){return{after:t.after}}}),ux}var mx={},Iw;function UM(){return Iw||(Iw=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.PollingEndpointConsumerSeekOutSerializer=void 0,mx.PollingEndpointConsumerSeekOutSerializer={_fromJsonObject(t){return{iterator:t.iterator}},_toJsonObject(t){return{iterator:t.iterator}}}),mx}var hx={},px={},Lw;function VM(){return Lw||(Lw=1,Object.defineProperty(px,"__esModule",{value:!0}),px.PollingEndpointMessageOutSerializer=void 0,px.PollingEndpointMessageOutSerializer={_fromJsonObject(t){return{channels:t.channels,eventId:t.eventId,eventType:t.eventType,headers:t.headers,id:t.id,payload:t.payload,tags:t.tags,timestamp:new Date(t.timestamp)}},_toJsonObject(t){return{channels:t.channels,eventId:t.eventId,eventType:t.eventType,headers:t.headers,id:t.id,payload:t.payload,tags:t.tags,timestamp:t.timestamp}}}),px}var qw;function HM(){if(qw)return hx;qw=1,Object.defineProperty(hx,"__esModule",{value:!0}),hx.PollingEndpointOutSerializer=void 0;const t=VM();return hx.PollingEndpointOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.PollingEndpointMessageOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator}},_toJsonObject(s){return{data:s.data.map(n=>t.PollingEndpointMessageOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator}}},hx}var $w;function JM(){if($w)return xx;$w=1,Object.defineProperty(xx,"__esModule",{value:!0}),xx.MessagePoller=void 0;const t=$M(),s=UM(),n=HM(),i=ur();class o{constructor(d){this.requestCtx=d}poll(d,m,h){const p=new i.SvixRequest(i.HttpMethod.GET,"/api/v1/app/{app_id}/poller/{sink_id}");return p.setPathParam("app_id",d),p.setPathParam("sink_id",m),p.setQueryParam("limit",h?.limit),p.setQueryParam("iterator",h?.iterator),p.setQueryParam("event_type",h?.eventType),p.setQueryParam("channel",h?.channel),p.setQueryParam("after",h?.after),p.send(this.requestCtx,n.PollingEndpointOutSerializer._fromJsonObject)}consumerPoll(d,m,h,p){const u=new i.SvixRequest(i.HttpMethod.GET,"/api/v1/app/{app_id}/poller/{sink_id}/consumer/{consumer_id}");return u.setPathParam("app_id",d),u.setPathParam("sink_id",m),u.setPathParam("consumer_id",h),u.setQueryParam("limit",p?.limit),u.setQueryParam("iterator",p?.iterator),u.send(this.requestCtx,n.PollingEndpointOutSerializer._fromJsonObject)}consumerSeek(d,m,h,p,u){const f=new i.SvixRequest(i.HttpMethod.POST,"/api/v1/app/{app_id}/poller/{sink_id}/consumer/{consumer_id}/seek");return f.setPathParam("app_id",d),f.setPathParam("sink_id",m),f.setPathParam("consumer_id",h),f.setHeaderParam("idempotency-key",u?.idempotencyKey),f.setBody(t.PollingEndpointConsumerSeekInSerializer._toJsonObject(p)),f.send(this.requestCtx,s.PollingEndpointConsumerSeekOutSerializer._fromJsonObject)}}return xx.MessagePoller=o,xx}var fx={},Uw;function GM(){if(Uw)return fx;Uw=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.MessageInSerializer=void 0;const t=db();return fx.MessageInSerializer={_fromJsonObject(s){return{application:s.application?t.ApplicationInSerializer._fromJsonObject(s.application):void 0,channels:s.channels,eventId:s.eventId,eventType:s.eventType,payload:s.payload,payloadRetentionHours:s.payloadRetentionHours,payloadRetentionPeriod:s.payloadRetentionPeriod,tags:s.tags,transformationsParams:s.transformationsParams}},_toJsonObject(s){return{application:s.application?t.ApplicationInSerializer._toJsonObject(s.application):void 0,channels:s.channels,eventId:s.eventId,eventType:s.eventType,payload:s.payload,payloadRetentionHours:s.payloadRetentionHours,payloadRetentionPeriod:s.payloadRetentionPeriod,tags:s.tags,transformationsParams:s.transformationsParams}}},fx}var Vw;function Hw(){if(Vw)return di;Vw=1,Object.defineProperty(di,"__esModule",{value:!0}),di.messageInRaw=di.Message=void 0;const t=LM(),s=qM(),n=Em(),i=JM(),o=ur(),c=GM();class d{constructor(p){this.requestCtx=p}get poller(){return new i.MessagePoller(this.requestCtx)}list(p,u){const f=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}/msg");return f.setPathParam("app_id",p),f.setQueryParam("limit",u?.limit),f.setQueryParam("iterator",u?.iterator),f.setQueryParam("channel",u?.channel),f.setQueryParam("before",u?.before),f.setQueryParam("after",u?.after),f.setQueryParam("with_content",u?.withContent),f.setQueryParam("tag",u?.tag),f.setQueryParam("event_types",u?.eventTypes),f.send(this.requestCtx,s.ListResponseMessageOutSerializer._fromJsonObject)}create(p,u,f){const g=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/app/{app_id}/msg");return g.setPathParam("app_id",p),g.setQueryParam("with_content",f?.withContent),g.setHeaderParam("idempotency-key",f?.idempotencyKey),g.setBody(c.MessageInSerializer._toJsonObject(u)),g.send(this.requestCtx,n.MessageOutSerializer._fromJsonObject)}expungeAllContents(p,u){const f=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/app/{app_id}/msg/expunge-all-contents");return f.setPathParam("app_id",p),f.setHeaderParam("idempotency-key",u?.idempotencyKey),f.send(this.requestCtx,t.ExpungeAllContentsOutSerializer._fromJsonObject)}get(p,u,f){const g=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}/msg/{msg_id}");return g.setPathParam("app_id",p),g.setPathParam("msg_id",u),g.setQueryParam("with_content",f?.withContent),g.send(this.requestCtx,n.MessageOutSerializer._fromJsonObject)}expungeContent(p,u){const f=new o.SvixRequest(o.HttpMethod.DELETE,"/api/v1/app/{app_id}/msg/{msg_id}/content");return f.setPathParam("app_id",p),f.setPathParam("msg_id",u),f.sendNoResponseBody(this.requestCtx)}}di.Message=d;function m(h,p,u){return{eventType:h,payload:{},transformationsParams:{rawPayload:p,headers:u?{"content-type":u}:void 0}}}return di.messageInRaw=m,di}var gx={},bx={},vx={},_f={},Jw;function km(){return Jw||(Jw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageStatusSerializer=t.MessageStatus=void 0,function(s){s[s.Success=0]="Success",s[s.Pending=1]="Pending",s[s.Fail=2]="Fail",s[s.Sending=3]="Sending"}(t.MessageStatus||(t.MessageStatus={})),t.MessageStatusSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(_f)),_f}var Bf={},Gw;function _m(){return Gw||(Gw=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageStatusTextSerializer=t.MessageStatusText=void 0,function(s){s.Success="success",s.Pending="pending",s.Fail="fail",s.Sending="sending"}(t.MessageStatusText||(t.MessageStatusText={})),t.MessageStatusTextSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Bf)),Bf}var Yw;function YM(){if(Yw)return vx;Yw=1,Object.defineProperty(vx,"__esModule",{value:!0}),vx.EndpointMessageOutSerializer=void 0;const t=km(),s=_m();return vx.EndpointMessageOutSerializer={_fromJsonObject(n){return{channels:n.channels,eventId:n.eventId,eventType:n.eventType,id:n.id,nextAttempt:n.nextAttempt?new Date(n.nextAttempt):null,payload:n.payload,status:t.MessageStatusSerializer._fromJsonObject(n.status),statusText:s.MessageStatusTextSerializer._fromJsonObject(n.statusText),tags:n.tags,timestamp:new Date(n.timestamp)}},_toJsonObject(n){return{channels:n.channels,eventId:n.eventId,eventType:n.eventType,id:n.id,nextAttempt:n.nextAttempt,payload:n.payload,status:t.MessageStatusSerializer._toJsonObject(n.status),statusText:s.MessageStatusTextSerializer._toJsonObject(n.statusText),tags:n.tags,timestamp:n.timestamp}}},vx}var Qw;function QM(){if(Qw)return bx;Qw=1,Object.defineProperty(bx,"__esModule",{value:!0}),bx.ListResponseEndpointMessageOutSerializer=void 0;const t=YM();return bx.ListResponseEndpointMessageOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.EndpointMessageOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.EndpointMessageOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},bx}var yx={},jx={},Sf={},Ww;function y9(){return Ww||(Ww=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageAttemptTriggerTypeSerializer=t.MessageAttemptTriggerType=void 0,function(s){s[s.Scheduled=0]="Scheduled",s[s.Manual=1]="Manual"}(t.MessageAttemptTriggerType||(t.MessageAttemptTriggerType={})),t.MessageAttemptTriggerTypeSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Sf)),Sf}var Kw;function j9(){if(Kw)return jx;Kw=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.MessageAttemptOutSerializer=void 0;const t=y9(),s=Em(),n=km(),i=_m();return jx.MessageAttemptOutSerializer={_fromJsonObject(o){return{endpointId:o.endpointId,id:o.id,msg:o.msg?s.MessageOutSerializer._fromJsonObject(o.msg):void 0,msgId:o.msgId,response:o.response,responseDurationMs:o.responseDurationMs,responseStatusCode:o.responseStatusCode,status:n.MessageStatusSerializer._fromJsonObject(o.status),statusText:i.MessageStatusTextSerializer._fromJsonObject(o.statusText),timestamp:new Date(o.timestamp),triggerType:t.MessageAttemptTriggerTypeSerializer._fromJsonObject(o.triggerType),url:o.url}},_toJsonObject(o){return{endpointId:o.endpointId,id:o.id,msg:o.msg?s.MessageOutSerializer._toJsonObject(o.msg):void 0,msgId:o.msgId,response:o.response,responseDurationMs:o.responseDurationMs,responseStatusCode:o.responseStatusCode,status:n.MessageStatusSerializer._toJsonObject(o.status),statusText:i.MessageStatusTextSerializer._toJsonObject(o.statusText),timestamp:o.timestamp,triggerType:t.MessageAttemptTriggerTypeSerializer._toJsonObject(o.triggerType),url:o.url}}},jx}var Xw;function WM(){if(Xw)return yx;Xw=1,Object.defineProperty(yx,"__esModule",{value:!0}),yx.ListResponseMessageAttemptOutSerializer=void 0;const t=j9();return yx.ListResponseMessageAttemptOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.MessageAttemptOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.MessageAttemptOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},yx}var Nx={},wx={},Zw;function KM(){if(Zw)return wx;Zw=1,Object.defineProperty(wx,"__esModule",{value:!0}),wx.MessageEndpointOutSerializer=void 0;const t=km(),s=_m();return wx.MessageEndpointOutSerializer={_fromJsonObject(n){return{channels:n.channels,createdAt:new Date(n.createdAt),description:n.description,disabled:n.disabled,filterTypes:n.filterTypes,id:n.id,nextAttempt:n.nextAttempt?new Date(n.nextAttempt):null,rateLimit:n.rateLimit,status:t.MessageStatusSerializer._fromJsonObject(n.status),statusText:s.MessageStatusTextSerializer._fromJsonObject(n.statusText),uid:n.uid,updatedAt:new Date(n.updatedAt),url:n.url,version:n.version}},_toJsonObject(n){return{channels:n.channels,createdAt:n.createdAt,description:n.description,disabled:n.disabled,filterTypes:n.filterTypes,id:n.id,nextAttempt:n.nextAttempt,rateLimit:n.rateLimit,status:t.MessageStatusSerializer._toJsonObject(n.status),statusText:s.MessageStatusTextSerializer._toJsonObject(n.statusText),uid:n.uid,updatedAt:n.updatedAt,url:n.url,version:n.version}}},wx}var eA;function XM(){if(eA)return Nx;eA=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.ListResponseMessageEndpointOutSerializer=void 0;const t=KM();return Nx.ListResponseMessageEndpointOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.MessageEndpointOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.MessageEndpointOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},Nx}var tA;function ZM(){if(tA)return gx;tA=1,Object.defineProperty(gx,"__esModule",{value:!0}),gx.MessageAttempt=void 0;const t=QM(),s=WM(),n=XM(),i=j9(),o=ur();class c{constructor(m){this.requestCtx=m}listByEndpoint(m,h,p){const u=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}/attempt/endpoint/{endpoint_id}");return u.setPathParam("app_id",m),u.setPathParam("endpoint_id",h),u.setQueryParam("limit",p?.limit),u.setQueryParam("iterator",p?.iterator),u.setQueryParam("status",p?.status),u.setQueryParam("status_code_class",p?.statusCodeClass),u.setQueryParam("channel",p?.channel),u.setQueryParam("tag",p?.tag),u.setQueryParam("before",p?.before),u.setQueryParam("after",p?.after),u.setQueryParam("with_content",p?.withContent),u.setQueryParam("with_msg",p?.withMsg),u.setQueryParam("event_types",p?.eventTypes),u.send(this.requestCtx,s.ListResponseMessageAttemptOutSerializer._fromJsonObject)}listByMsg(m,h,p){const u=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}/attempt/msg/{msg_id}");return u.setPathParam("app_id",m),u.setPathParam("msg_id",h),u.setQueryParam("limit",p?.limit),u.setQueryParam("iterator",p?.iterator),u.setQueryParam("status",p?.status),u.setQueryParam("status_code_class",p?.statusCodeClass),u.setQueryParam("channel",p?.channel),u.setQueryParam("tag",p?.tag),u.setQueryParam("endpoint_id",p?.endpointId),u.setQueryParam("before",p?.before),u.setQueryParam("after",p?.after),u.setQueryParam("with_content",p?.withContent),u.setQueryParam("event_types",p?.eventTypes),u.send(this.requestCtx,s.ListResponseMessageAttemptOutSerializer._fromJsonObject)}listAttemptedMessages(m,h,p){const u=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}/endpoint/{endpoint_id}/msg");return u.setPathParam("app_id",m),u.setPathParam("endpoint_id",h),u.setQueryParam("limit",p?.limit),u.setQueryParam("iterator",p?.iterator),u.setQueryParam("channel",p?.channel),u.setQueryParam("tag",p?.tag),u.setQueryParam("status",p?.status),u.setQueryParam("before",p?.before),u.setQueryParam("after",p?.after),u.setQueryParam("with_content",p?.withContent),u.setQueryParam("event_types",p?.eventTypes),u.send(this.requestCtx,t.ListResponseEndpointMessageOutSerializer._fromJsonObject)}get(m,h,p){const u=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}/msg/{msg_id}/attempt/{attempt_id}");return u.setPathParam("app_id",m),u.setPathParam("msg_id",h),u.setPathParam("attempt_id",p),u.send(this.requestCtx,i.MessageAttemptOutSerializer._fromJsonObject)}expungeContent(m,h,p){const u=new o.SvixRequest(o.HttpMethod.DELETE,"/api/v1/app/{app_id}/msg/{msg_id}/attempt/{attempt_id}/content");return u.setPathParam("app_id",m),u.setPathParam("msg_id",h),u.setPathParam("attempt_id",p),u.sendNoResponseBody(this.requestCtx)}listAttemptedDestinations(m,h,p){const u=new o.SvixRequest(o.HttpMethod.GET,"/api/v1/app/{app_id}/msg/{msg_id}/endpoint");return u.setPathParam("app_id",m),u.setPathParam("msg_id",h),u.setQueryParam("limit",p?.limit),u.setQueryParam("iterator",p?.iterator),u.send(this.requestCtx,n.ListResponseMessageEndpointOutSerializer._fromJsonObject)}resend(m,h,p,u){const f=new o.SvixRequest(o.HttpMethod.POST,"/api/v1/app/{app_id}/msg/{msg_id}/endpoint/{endpoint_id}/resend");return f.setPathParam("app_id",m),f.setPathParam("msg_id",h),f.setPathParam("endpoint_id",p),f.setHeaderParam("idempotency-key",u?.idempotencyKey),f.sendNoResponseBody(this.requestCtx)}}return gx.MessageAttempt=c,gx}var Ax={},Cx={},Ex={},kx={},sA;function N9(){return sA||(sA=1,Object.defineProperty(kx,"__esModule",{value:!0}),kx.OperationalWebhookEndpointOutSerializer=void 0,kx.OperationalWebhookEndpointOutSerializer={_fromJsonObject(t){return{createdAt:new Date(t.createdAt),description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,id:t.id,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,updatedAt:new Date(t.updatedAt),url:t.url}},_toJsonObject(t){return{createdAt:t.createdAt,description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,id:t.id,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,updatedAt:t.updatedAt,url:t.url}}}),kx}var rA;function eR(){if(rA)return Ex;rA=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.ListResponseOperationalWebhookEndpointOutSerializer=void 0;const t=N9();return Ex.ListResponseOperationalWebhookEndpointOutSerializer={_fromJsonObject(s){return{data:s.data.map(n=>t.OperationalWebhookEndpointOutSerializer._fromJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}},_toJsonObject(s){return{data:s.data.map(n=>t.OperationalWebhookEndpointOutSerializer._toJsonObject(n)),done:s.done,iterator:s.iterator,prevIterator:s.prevIterator}}},Ex}var _x={},aA;function tR(){return aA||(aA=1,Object.defineProperty(_x,"__esModule",{value:!0}),_x.OperationalWebhookEndpointHeadersInSerializer=void 0,_x.OperationalWebhookEndpointHeadersInSerializer={_fromJsonObject(t){return{headers:t.headers}},_toJsonObject(t){return{headers:t.headers}}}),_x}var Bx={},nA;function sR(){return nA||(nA=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.OperationalWebhookEndpointHeadersOutSerializer=void 0,Bx.OperationalWebhookEndpointHeadersOutSerializer={_fromJsonObject(t){return{headers:t.headers,sensitive:t.sensitive}},_toJsonObject(t){return{headers:t.headers,sensitive:t.sensitive}}}),Bx}var Sx={},iA;function rR(){return iA||(iA=1,Object.defineProperty(Sx,"__esModule",{value:!0}),Sx.OperationalWebhookEndpointInSerializer=void 0,Sx.OperationalWebhookEndpointInSerializer={_fromJsonObject(t){return{description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url}},_toJsonObject(t){return{description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,secret:t.secret,uid:t.uid,url:t.url}}}),Sx}var Dx={},oA;function aR(){return oA||(oA=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.OperationalWebhookEndpointSecretInSerializer=void 0,Dx.OperationalWebhookEndpointSecretInSerializer={_fromJsonObject(t){return{key:t.key}},_toJsonObject(t){return{key:t.key}}}),Dx}var Fx={},lA;function nR(){return lA||(lA=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.OperationalWebhookEndpointSecretOutSerializer=void 0,Fx.OperationalWebhookEndpointSecretOutSerializer={_fromJsonObject(t){return{key:t.key}},_toJsonObject(t){return{key:t.key}}}),Fx}var Px={},cA;function iR(){return cA||(cA=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.OperationalWebhookEndpointUpdateSerializer=void 0,Px.OperationalWebhookEndpointUpdateSerializer={_fromJsonObject(t){return{description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,url:t.url}},_toJsonObject(t){return{description:t.description,disabled:t.disabled,filterTypes:t.filterTypes,metadata:t.metadata,rateLimit:t.rateLimit,uid:t.uid,url:t.url}}}),Px}var dA;function w9(){if(dA)return Cx;dA=1,Object.defineProperty(Cx,"__esModule",{value:!0}),Cx.OperationalWebhookEndpoint=void 0;const t=eR(),s=tR(),n=sR(),i=rR(),o=N9(),c=aR(),d=nR(),m=iR(),h=ur();class p{constructor(f){this.requestCtx=f}list(f){const g=new h.SvixRequest(h.HttpMethod.GET,"/api/v1/operational-webhook/endpoint");return g.setQueryParam("limit",f?.limit),g.setQueryParam("iterator",f?.iterator),g.setQueryParam("order",f?.order),g.send(this.requestCtx,t.ListResponseOperationalWebhookEndpointOutSerializer._fromJsonObject)}create(f,g){const y=new h.SvixRequest(h.HttpMethod.POST,"/api/v1/operational-webhook/endpoint");return y.setHeaderParam("idempotency-key",g?.idempotencyKey),y.setBody(i.OperationalWebhookEndpointInSerializer._toJsonObject(f)),y.send(this.requestCtx,o.OperationalWebhookEndpointOutSerializer._fromJsonObject)}get(f){const g=new h.SvixRequest(h.HttpMethod.GET,"/api/v1/operational-webhook/endpoint/{endpoint_id}");return g.setPathParam("endpoint_id",f),g.send(this.requestCtx,o.OperationalWebhookEndpointOutSerializer._fromJsonObject)}update(f,g){const y=new h.SvixRequest(h.HttpMethod.PUT,"/api/v1/operational-webhook/endpoint/{endpoint_id}");return y.setPathParam("endpoint_id",f),y.setBody(m.OperationalWebhookEndpointUpdateSerializer._toJsonObject(g)),y.send(this.requestCtx,o.OperationalWebhookEndpointOutSerializer._fromJsonObject)}delete(f){const g=new h.SvixRequest(h.HttpMethod.DELETE,"/api/v1/operational-webhook/endpoint/{endpoint_id}");return g.setPathParam("endpoint_id",f),g.sendNoResponseBody(this.requestCtx)}getHeaders(f){const g=new h.SvixRequest(h.HttpMethod.GET,"/api/v1/operational-webhook/endpoint/{endpoint_id}/headers");return g.setPathParam("endpoint_id",f),g.send(this.requestCtx,n.OperationalWebhookEndpointHeadersOutSerializer._fromJsonObject)}updateHeaders(f,g){const y=new h.SvixRequest(h.HttpMethod.PUT,"/api/v1/operational-webhook/endpoint/{endpoint_id}/headers");return y.setPathParam("endpoint_id",f),y.setBody(s.OperationalWebhookEndpointHeadersInSerializer._toJsonObject(g)),y.sendNoResponseBody(this.requestCtx)}getSecret(f){const g=new h.SvixRequest(h.HttpMethod.GET,"/api/v1/operational-webhook/endpoint/{endpoint_id}/secret");return g.setPathParam("endpoint_id",f),g.send(this.requestCtx,d.OperationalWebhookEndpointSecretOutSerializer._fromJsonObject)}rotateSecret(f,g,y){const b=new h.SvixRequest(h.HttpMethod.POST,"/api/v1/operational-webhook/endpoint/{endpoint_id}/secret/rotate");return b.setPathParam("endpoint_id",f),b.setHeaderParam("idempotency-key",y?.idempotencyKey),b.setBody(c.OperationalWebhookEndpointSecretInSerializer._toJsonObject(g)),b.sendNoResponseBody(this.requestCtx)}}return Cx.OperationalWebhookEndpoint=p,Cx}var xA;function oR(){if(xA)return Ax;xA=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.OperationalWebhook=void 0;const t=w9();class s{constructor(i){this.requestCtx=i}get endpoint(){return new t.OperationalWebhookEndpoint(this.requestCtx)}}return Ax.OperationalWebhook=s,Ax}var Tx={},Ox={},uA;function lR(){if(uA)return Ox;uA=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.AggregateEventTypesOutSerializer=void 0;const t=Ei(),s=ki();return Ox.AggregateEventTypesOutSerializer={_fromJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._fromJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._fromJsonObject(n.task)}},_toJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._toJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._toJsonObject(n.task)}}},Ox}var Mx={},mA;function cR(){return mA||(mA=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.AppUsageStatsInSerializer=void 0,Mx.AppUsageStatsInSerializer={_fromJsonObject(t){return{appIds:t.appIds,since:new Date(t.since),until:new Date(t.until)}},_toJsonObject(t){return{appIds:t.appIds,since:t.since,until:t.until}}}),Mx}var Rx={},hA;function dR(){if(hA)return Rx;hA=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.AppUsageStatsOutSerializer=void 0;const t=Ei(),s=ki();return Rx.AppUsageStatsOutSerializer={_fromJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._fromJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._fromJsonObject(n.task),unresolvedAppIds:n.unresolvedAppIds}},_toJsonObject(n){return{id:n.id,status:t.BackgroundTaskStatusSerializer._toJsonObject(n.status),task:s.BackgroundTaskTypeSerializer._toJsonObject(n.task),unresolvedAppIds:n.unresolvedAppIds}}},Rx}var pA;function xR(){if(pA)return Tx;pA=1,Object.defineProperty(Tx,"__esModule",{value:!0}),Tx.Statistics=void 0;const t=lR(),s=cR(),n=dR(),i=ur();class o{constructor(d){this.requestCtx=d}aggregateAppStats(d,m){const h=new i.SvixRequest(i.HttpMethod.POST,"/api/v1/stats/usage/app");return h.setHeaderParam("idempotency-key",m?.idempotencyKey),h.setBody(s.AppUsageStatsInSerializer._toJsonObject(d)),h.send(this.requestCtx,n.AppUsageStatsOutSerializer._fromJsonObject)}aggregateEventTypes(){return new i.SvixRequest(i.HttpMethod.PUT,"/api/v1/stats/usage/event-types").send(this.requestCtx,t.AggregateEventTypesOutSerializer._fromJsonObject)}}return Tx.Statistics=o,Tx}var Va={},fA;function uR(){if(fA)return Va;fA=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.HTTPValidationError=Va.ValidationError=Va.HttpErrorOut=void 0;class t{static getAttributeTypeMap(){return t.attributeTypeMap}}Va.HttpErrorOut=t,t.discriminator=void 0,t.mapping=void 0,t.attributeTypeMap=[{name:"code",baseName:"code",type:"string",format:""},{name:"detail",baseName:"detail",type:"string",format:""}];class s{static getAttributeTypeMap(){return s.attributeTypeMap}}Va.ValidationError=s,s.discriminator=void 0,s.mapping=void 0,s.attributeTypeMap=[{name:"loc",baseName:"loc",type:"Array<string>",format:""},{name:"msg",baseName:"msg",type:"string",format:""},{name:"type",baseName:"type",type:"string",format:""}];class n{static getAttributeTypeMap(){return n.attributeTypeMap}}return Va.HTTPValidationError=n,n.discriminator=void 0,n.mapping=void 0,n.attributeTypeMap=[{name:"detail",baseName:"detail",type:"Array<ValidationError>",format:""}],Va}var xi={},zx={},gA;function mR(){if(gA)return zx;gA=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.timingSafeEqual=void 0;function t(n,i=""){if(!n)throw new Error(i)}function s(n,i){if(n.byteLength!==i.byteLength)return!1;n instanceof DataView||(n=new DataView(ArrayBuffer.isView(n)?n.buffer:n)),i instanceof DataView||(i=new DataView(ArrayBuffer.isView(i)?i.buffer:i)),t(n instanceof DataView),t(i instanceof DataView);const o=n.byteLength;let c=0,d=-1;for(;++d<o;)c|=n.getUint8(d)^i.getUint8(d);return c===0}return zx.timingSafeEqual=s,zx}var Nr={},bA;function hR(){if(bA)return Nr;bA=1;var t=Nr&&Nr.__extends||function(){var u=function(f,g){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var j in b)b.hasOwnProperty(j)&&(y[j]=b[j])},u(f,g)};return function(f,g){u(f,g);function y(){this.constructor=f}f.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}();Object.defineProperty(Nr,"__esModule",{value:!0});var s=256,n=function(){function u(f){f===void 0&&(f="="),this._paddingCharacter=f}return u.prototype.encodedLength=function(f){return this._paddingCharacter?(f+2)/3*4|0:(f*8+5)/6|0},u.prototype.encode=function(f){for(var g="",y=0;y<f.length-2;y+=3){var b=f[y]<<16|f[y+1]<<8|f[y+2];g+=this._encodeByte(b>>>18&63),g+=this._encodeByte(b>>>12&63),g+=this._encodeByte(b>>>6&63),g+=this._encodeByte(b>>>0&63)}var j=f.length-y;if(j>0){var b=f[y]<<16|(j===2?f[y+1]<<8:0);g+=this._encodeByte(b>>>18&63),g+=this._encodeByte(b>>>12&63),j===2?g+=this._encodeByte(b>>>6&63):g+=this._paddingCharacter||"",g+=this._paddingCharacter||""}return g},u.prototype.maxDecodedLength=function(f){return this._paddingCharacter?f/4*3|0:(f*6+7)/8|0},u.prototype.decodedLength=function(f){return this.maxDecodedLength(f.length-this._getPaddingLength(f))},u.prototype.decode=function(f){if(f.length===0)return new Uint8Array(0);for(var g=this._getPaddingLength(f),y=f.length-g,b=new Uint8Array(this.maxDecodedLength(y)),j=0,N=0,w=0,B=0,S=0,_=0,k=0;N<y-4;N+=4)B=this._decodeChar(f.charCodeAt(N+0)),S=this._decodeChar(f.charCodeAt(N+1)),_=this._decodeChar(f.charCodeAt(N+2)),k=this._decodeChar(f.charCodeAt(N+3)),b[j++]=B<<2|S>>>4,b[j++]=S<<4|_>>>2,b[j++]=_<<6|k,w|=B&s,w|=S&s,w|=_&s,w|=k&s;if(N<y-1&&(B=this._decodeChar(f.charCodeAt(N)),S=this._decodeChar(f.charCodeAt(N+1)),b[j++]=B<<2|S>>>4,w|=B&s,w|=S&s),N<y-2&&(_=this._decodeChar(f.charCodeAt(N+2)),b[j++]=S<<4|_>>>2,w|=_&s),N<y-3&&(k=this._decodeChar(f.charCodeAt(N+3)),b[j++]=_<<6|k,w|=k&s),w!==0)throw new Error("Base64Coder: incorrect characters for decoding");return b},u.prototype._encodeByte=function(f){var g=f;return g+=65,g+=25-f>>>8&6,g+=51-f>>>8&-75,g+=61-f>>>8&-15,g+=62-f>>>8&3,String.fromCharCode(g)},u.prototype._decodeChar=function(f){var g=s;return g+=(42-f&f-44)>>>8&-s+f-43+62,g+=(46-f&f-48)>>>8&-s+f-47+63,g+=(47-f&f-58)>>>8&-s+f-48+52,g+=(64-f&f-91)>>>8&-s+f-65+0,g+=(96-f&f-123)>>>8&-s+f-97+26,g},u.prototype._getPaddingLength=function(f){var g=0;if(this._paddingCharacter){for(var y=f.length-1;y>=0&&f[y]===this._paddingCharacter;y--)g++;if(f.length<4||g>2)throw new Error("Base64Coder: incorrect padding")}return g},u}();Nr.Coder=n;var i=new n;function o(u){return i.encode(u)}Nr.encode=o;function c(u){return i.decode(u)}Nr.decode=c;var d=function(u){t(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.prototype._encodeByte=function(g){var y=g;return y+=65,y+=25-g>>>8&6,y+=51-g>>>8&-75,y+=61-g>>>8&-13,y+=62-g>>>8&49,String.fromCharCode(y)},f.prototype._decodeChar=function(g){var y=s;return y+=(44-g&g-46)>>>8&-s+g-45+62,y+=(94-g&g-96)>>>8&-s+g-95+63,y+=(47-g&g-58)>>>8&-s+g-48+52,y+=(64-g&g-91)>>>8&-s+g-65+0,y+=(96-g&g-123)>>>8&-s+g-97+26,y},f}(n);Nr.URLSafeCoder=d;var m=new d;function h(u){return m.encode(u)}Nr.encodeURLSafe=h;function p(u){return m.decode(u)}return Nr.decodeURLSafe=p,Nr.encodedLength=function(u){return i.encodedLength(u)},Nr.maxDecodedLength=function(u){return i.maxDecodedLength(u)},Nr.decodedLength=function(u){return i.decodedLength(u)},Nr}var Qu={exports:{}},pR=Qu.exports,vA;function fR(){return vA||(vA=1,function(t){(function(s,n){var i={};n(i);var o=i.default;for(var c in i)o[c]=i[c];t.exports=o})(pR,function(s){s.__esModule=!0,s.digestLength=32,s.blockSize=64;var n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(g,y,b,j,N){for(var w,B,S,_,k,E,D,F,M,P,T,L,X;N>=64;){for(w=y[0],B=y[1],S=y[2],_=y[3],k=y[4],E=y[5],D=y[6],F=y[7],P=0;P<16;P++)T=j+P*4,g[P]=(b[T]&255)<<24|(b[T+1]&255)<<16|(b[T+2]&255)<<8|b[T+3]&255;for(P=16;P<64;P++)M=g[P-2],L=(M>>>17|M<<15)^(M>>>19|M<<13)^M>>>10,M=g[P-15],X=(M>>>7|M<<25)^(M>>>18|M<<14)^M>>>3,g[P]=(L+g[P-7]|0)+(X+g[P-16]|0);for(P=0;P<64;P++)L=(((k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7))+(k&E^~k&D)|0)+(F+(n[P]+g[P]|0)|0)|0,X=((w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10))+(w&B^w&S^B&S)|0,F=D,D=E,E=k,k=_+L|0,_=S,S=B,B=w,w=L+X|0;y[0]+=w,y[1]+=B,y[2]+=S,y[3]+=_,y[4]+=k,y[5]+=E,y[6]+=D,y[7]+=F,j+=64,N-=64}return j}var o=function(){function g(){this.digestLength=s.digestLength,this.blockSize=s.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return g.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},g.prototype.clean=function(){for(var y=0;y<this.buffer.length;y++)this.buffer[y]=0;for(var y=0;y<this.temp.length;y++)this.temp[y]=0;this.reset()},g.prototype.update=function(y,b){if(b===void 0&&(b=y.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var j=0;if(this.bytesHashed+=b,this.bufferLength>0){for(;this.bufferLength<64&&b>0;)this.buffer[this.bufferLength++]=y[j++],b--;this.bufferLength===64&&(i(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(b>=64&&(j=i(this.temp,this.state,y,j,b),b%=64);b>0;)this.buffer[this.bufferLength++]=y[j++],b--;return this},g.prototype.finish=function(y){if(!this.finished){var b=this.bytesHashed,j=this.bufferLength,N=b/536870912|0,w=b<<3,B=b%64<56?64:128;this.buffer[j]=128;for(var S=j+1;S<B-8;S++)this.buffer[S]=0;this.buffer[B-8]=N>>>24&255,this.buffer[B-7]=N>>>16&255,this.buffer[B-6]=N>>>8&255,this.buffer[B-5]=N>>>0&255,this.buffer[B-4]=w>>>24&255,this.buffer[B-3]=w>>>16&255,this.buffer[B-2]=w>>>8&255,this.buffer[B-1]=w>>>0&255,i(this.temp,this.state,this.buffer,0,B),this.finished=!0}for(var S=0;S<8;S++)y[S*4+0]=this.state[S]>>>24&255,y[S*4+1]=this.state[S]>>>16&255,y[S*4+2]=this.state[S]>>>8&255,y[S*4+3]=this.state[S]>>>0&255;return this},g.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},g.prototype._saveState=function(y){for(var b=0;b<this.state.length;b++)y[b]=this.state[b]},g.prototype._restoreState=function(y,b){for(var j=0;j<this.state.length;j++)this.state[j]=y[j];this.bytesHashed=b,this.finished=!1,this.bufferLength=0},g}();s.Hash=o;var c=function(){function g(y){this.inner=new o,this.outer=new o,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var b=new Uint8Array(this.blockSize);if(y.length>this.blockSize)new o().update(y).finish(b).clean();else for(var j=0;j<y.length;j++)b[j]=y[j];for(var j=0;j<b.length;j++)b[j]^=54;this.inner.update(b);for(var j=0;j<b.length;j++)b[j]^=106;this.outer.update(b),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var j=0;j<b.length;j++)b[j]=0}return g.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},g.prototype.clean=function(){for(var y=0;y<this.istate.length;y++)this.ostate[y]=this.istate[y]=0;this.inner.clean(),this.outer.clean()},g.prototype.update=function(y){return this.inner.update(y),this},g.prototype.finish=function(y){return this.outer.finished?this.outer.finish(y):(this.inner.finish(y),this.outer.update(y,this.digestLength).finish(y)),this},g.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},g}();s.HMAC=c;function d(g){var y=new o().update(g),b=y.digest();return y.clean(),b}s.hash=d,s.default=d;function m(g,y){var b=new c(g).update(y),j=b.digest();return b.clean(),j}s.hmac=m;function h(g,y,b,j){var N=j[0];if(N===0)throw new Error("hkdf: cannot expand more");y.reset(),N>1&&y.update(g),b&&y.update(b),y.update(j),y.finish(g),j[0]++}var p=new Uint8Array(s.digestLength);function u(g,y,b,j){y===void 0&&(y=p),j===void 0&&(j=32);for(var N=new Uint8Array([1]),w=m(y,g),B=new c(w),S=new Uint8Array(B.digestLength),_=S.length,k=new Uint8Array(j),E=0;E<j;E++)_===S.length&&(h(S,B,b,N),_=0),k[E]=S[_++];return B.clean(),S.fill(0),N.fill(0),k}s.hkdf=u;function f(g,y,b,j){for(var N=new c(g),w=N.digestLength,B=new Uint8Array(4),S=new Uint8Array(w),_=new Uint8Array(w),k=new Uint8Array(j),E=0;E*w<j;E++){var D=E+1;B[0]=D>>>24&255,B[1]=D>>>16&255,B[2]=D>>>8&255,B[3]=D>>>0&255,N.reset(),N.update(y),N.update(B),N.finish(_);for(var F=0;F<w;F++)S[F]=_[F];for(var F=2;F<=b;F++){N.reset(),N.update(_).finish(_);for(var M=0;M<w;M++)S[M]^=_[M]}for(var F=0;F<w&&E*w+F<j;F++)k[E*w+F]=S[F]}for(var E=0;E<w;E++)S[E]=_[E]=0;for(var E=0;E<4;E++)B[E]=0;return N.clean(),k}s.pbkdf2=f})}(Qu)),Qu.exports}var yA;function gR(){if(yA)return xi;yA=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Webhook=xi.WebhookVerificationError=void 0;const t=mR(),s=hR(),n=fR(),i=300;class o extends Error{constructor(h){super(h),Object.setPrototypeOf(this,o.prototype),this.name="ExtendableError",this.stack=new Error(h).stack}}class c extends o{constructor(h){super(h),Object.setPrototypeOf(this,c.prototype),this.name="WebhookVerificationError"}}xi.WebhookVerificationError=c;class d{constructor(h,p){if(!h)throw new Error("Secret can't be empty.");if(p?.format==="raw")h instanceof Uint8Array?this.key=h:this.key=Uint8Array.from(h,u=>u.charCodeAt(0));else{if(typeof h!="string")throw new Error("Expected secret to be of type string");h.startsWith(d.prefix)&&(h=h.substring(d.prefix.length)),this.key=s.decode(h)}}verify(h,p){const u={};for(const S of Object.keys(p))u[S.toLowerCase()]=p[S];let f=u["svix-id"],g=u["svix-signature"],y=u["svix-timestamp"];if((!g||!f||!y)&&(f=u["webhook-id"],g=u["webhook-signature"],y=u["webhook-timestamp"],!g||!f||!y))throw new c("Missing required headers");const b=this.verifyTimestamp(y),N=this.sign(f,b,h).split(",")[1],w=g.split(" "),B=new globalThis.TextEncoder;for(const S of w){const[_,k]=S.split(",");if(_==="v1"&&(0,t.timingSafeEqual)(B.encode(k),B.encode(N)))return JSON.parse(h.toString())}throw new c("No matching signature found")}sign(h,p,u){if(typeof u!="string")if(u.constructor.name==="Buffer")u=u.toString();else throw new Error("Expected payload to be of type string or Buffer. Please refer to https://docs.svix.com/receiving/verifying-payloads/how for more information.");const f=new TextEncoder,g=Math.floor(p.getTime()/1e3),y=f.encode(`${h}.${g}.${u}`);return`v1,${s.encode(n.hmac(this.key,y))}`}verifyTimestamp(h){const p=Math.floor(Date.now()/1e3),u=parseInt(h,10);if(isNaN(u))throw new c("Invalid Signature Headers");if(p-u>i)throw new c("Message timestamp too old");if(u>p+i)throw new c("Message timestamp too new");return new Date(u*1e3)}}return xi.Webhook=d,d.prefix="whsec_",xi}var Df={},Ff={},jA;function bR(){return jA||(jA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointDisabledTriggerSerializer=t.EndpointDisabledTrigger=void 0,function(s){s.Manual="manual",s.Automatic="automatic"}(t.EndpointDisabledTrigger||(t.EndpointDisabledTrigger={})),t.EndpointDisabledTriggerSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Ff)),Ff}var Pf={},NA;function vR(){return NA||(NA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OrderingSerializer=t.Ordering=void 0,function(s){s.Ascending="ascending",s.Descending="descending"}(t.Ordering||(t.Ordering={})),t.OrderingSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Pf)),Pf}var Tf={},wA;function yR(){return wA||(wA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCodeClassSerializer=t.StatusCodeClass=void 0,function(s){s[s.CodeNone=0]="CodeNone",s[s.Code1xx=100]="Code1xx",s[s.Code2xx=200]="Code2xx",s[s.Code3xx=300]="Code3xx",s[s.Code4xx=400]="Code4xx",s[s.Code5xx=500]="Code5xx"}(t.StatusCodeClass||(t.StatusCodeClass={})),t.StatusCodeClassSerializer={_fromJsonObject(s){return s},_toJsonObject(s){return s}}}(Tf)),Tf}var AA;function jR(){return AA||(AA=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCodeClass=t.Ordering=t.MessageStatusText=t.MessageStatus=t.MessageAttemptTriggerType=t.EndpointDisabledTrigger=t.ConnectorKind=t.BackgroundTaskType=t.BackgroundTaskStatus=t.AppPortalCapability=void 0;var s=x9();Object.defineProperty(t,"AppPortalCapability",{enumerable:!0,get:function(){return s.AppPortalCapability}});var n=Ei();Object.defineProperty(t,"BackgroundTaskStatus",{enumerable:!0,get:function(){return n.BackgroundTaskStatus}});var i=ki();Object.defineProperty(t,"BackgroundTaskType",{enumerable:!0,get:function(){return i.BackgroundTaskType}});var o=ub();Object.defineProperty(t,"ConnectorKind",{enumerable:!0,get:function(){return o.ConnectorKind}});var c=bR();Object.defineProperty(t,"EndpointDisabledTrigger",{enumerable:!0,get:function(){return c.EndpointDisabledTrigger}});var d=y9();Object.defineProperty(t,"MessageAttemptTriggerType",{enumerable:!0,get:function(){return d.MessageAttemptTriggerType}});var m=km();Object.defineProperty(t,"MessageStatus",{enumerable:!0,get:function(){return m.MessageStatus}});var h=_m();Object.defineProperty(t,"MessageStatusText",{enumerable:!0,get:function(){return h.MessageStatusText}});var p=vR();Object.defineProperty(t,"Ordering",{enumerable:!0,get:function(){return p.Ordering}});var u=yR();Object.defineProperty(t,"StatusCodeClass",{enumerable:!0,get:function(){return u.StatusCodeClass}})}(Df)),Df}var CA;function NR(){return CA||(CA=1,function(t){var s=ci&&ci.__createBinding||(Object.create?function(E,D,F,M){M===void 0&&(M=F);var P=Object.getOwnPropertyDescriptor(D,F);(!P||("get"in P?!D.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return D[F]}}),Object.defineProperty(E,M,P)}:function(E,D,F,M){M===void 0&&(M=F),E[M]=D[F]}),n=ci&&ci.__exportStar||function(E,D){for(var F in E)F!=="default"&&!Object.prototype.hasOwnProperty.call(D,F)&&s(D,E,F)};Object.defineProperty(t,"__esModule",{value:!0}),t.Svix=t.messageInRaw=t.ValidationError=t.HttpErrorOut=t.HTTPValidationError=t.ApiException=void 0;const i=GT(),o=KT(),c=ZT(),d=bO(),m=wO(),h=DO(),p=FO(),u=TM(),f=IM(),g=Hw(),y=ZM(),b=oR(),j=xR(),N=w9();var w=o9();Object.defineProperty(t,"ApiException",{enumerable:!0,get:function(){return w.ApiException}});var B=uR();Object.defineProperty(t,"HTTPValidationError",{enumerable:!0,get:function(){return B.HTTPValidationError}}),Object.defineProperty(t,"HttpErrorOut",{enumerable:!0,get:function(){return B.HttpErrorOut}}),Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return B.ValidationError}}),n(gR(),t),n(jR(),t);var S=Hw();Object.defineProperty(t,"messageInRaw",{enumerable:!0,get:function(){return S.messageInRaw}});const _=[{region:"us",url:"https://api.us.svix.com"},{region:"eu",url:"https://api.eu.svix.com"},{region:"in",url:"https://api.in.svix.com"},{region:"ca",url:"https://api.ca.svix.com"},{region:"au",url:"https://api.au.svix.com"}];class k{constructor(D,F={}){var M,P,T;const L=(M=_.find(Z=>Z.region===D.split(".")[1]))===null||M===void 0?void 0:M.url,X=(T=(P=F.serverUrl)!==null&&P!==void 0?P:L)!==null&&T!==void 0?T:"https://api.svix.com";if(F.retryScheduleInMs){this.requestCtx={baseUrl:X,token:D,timeout:F.requestTimeout,retryScheduleInMs:F.retryScheduleInMs};return}if(F.numRetries){this.requestCtx={baseUrl:X,token:D,timeout:F.requestTimeout,numRetries:F.numRetries};return}this.requestCtx={baseUrl:X,token:D,timeout:F.requestTimeout}}get application(){return new i.Application(this.requestCtx)}get authentication(){return new o.Authentication(this.requestCtx)}get backgroundTask(){return new c.BackgroundTask(this.requestCtx)}get endpoint(){return new d.Endpoint(this.requestCtx)}get environment(){return new m.Environment(this.requestCtx)}get eventType(){return new h.EventType(this.requestCtx)}get health(){return new p.Health(this.requestCtx)}get ingest(){return new u.Ingest(this.requestCtx)}get integration(){return new f.Integration(this.requestCtx)}get message(){return new g.Message(this.requestCtx)}get messageAttempt(){return new y.MessageAttempt(this.requestCtx)}get operationalWebhook(){return new b.OperationalWebhook(this.requestCtx)}get statistics(){return new j.Statistics(this.requestCtx)}get operationalWebhookEndpoint(){return new N.OperationalWebhookEndpoint(this.requestCtx)}}t.Svix=k}(ci)),ci}var wR=NR(),Po={},AR=Object.defineProperty,CR=Object.defineProperties,ER=Object.getOwnPropertyDescriptors,cm=Object.getOwnPropertySymbols,A9=Object.prototype.hasOwnProperty,C9=Object.prototype.propertyIsEnumerable,EA=(t,s,n)=>s in t?AR(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,hi=(t,s)=>{for(var n in s||(s={}))A9.call(s,n)&&EA(t,n,s[n]);if(cm)for(var n of cm(s))C9.call(s,n)&&EA(t,n,s[n]);return t},bo=(t,s)=>CR(t,ER(s)),kR=(t,s)=>{var n={};for(var i in t)A9.call(t,i)&&s.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&cm)for(var i of cm(t))s.indexOf(i)<0&&C9.call(t,i)&&(n[i]=t[i]);return n},Ot=(t,s,n)=>new Promise((i,o)=>{var c=h=>{try{m(n.next(h))}catch(p){o(p)}},d=h=>{try{m(n.throw(h))}catch(p){o(p)}},m=h=>h.done?i(h.value):Promise.resolve(h.value).then(c,d);m((n=n.apply(t,s)).next())}),_R="6.2.0";function Io(t){const s=new URLSearchParams;return t.limit!==void 0&&s.set("limit",t.limit.toString()),"after"in t&&t.after!==void 0&&s.set("after",t.after),"before"in t&&t.before!==void 0&&s.set("before",t.before),s.toString()}var BR=class{constructor(t){this.resend=t}create(t){return Ot(this,arguments,function*(s,n={}){return yield this.resend.post("/api-keys",s,n)})}list(){return Ot(this,arguments,function*(t={}){const s=Io(t),n=s?`/api-keys?${s}`:"/api-keys";return yield this.resend.get(n)})}remove(t){return Ot(this,null,function*(){return yield this.resend.delete(`/api-keys/${t}`)})}},SR=class{constructor(t){this.resend=t}create(t){return Ot(this,arguments,function*(s,n={}){return yield this.resend.post("/audiences",s,n)})}list(){return Ot(this,arguments,function*(t={}){const s=Io(t),n=s?`/audiences?${s}`:"/audiences";return yield this.resend.get(n)})}get(t){return Ot(this,null,function*(){return yield this.resend.get(`/audiences/${t}`)})}remove(t){return Ot(this,null,function*(){return yield this.resend.delete(`/audiences/${t}`)})}};function DR(t){return t?.map(s=>({content:s.content,filename:s.filename,path:s.path,content_type:s.contentType,content_id:s.contentId}))}function E9(t){return{attachments:DR(t.attachments),bcc:t.bcc,cc:t.cc,from:t.from,headers:t.headers,html:t.html,reply_to:t.replyTo,scheduled_at:t.scheduledAt,subject:t.subject,tags:t.tags,text:t.text,to:t.to}}function dm(t){return new Promise((s,n)=>{nm(async()=>{const{render:i}=await import("./render_resend_false-BFxXn05r.js");return{render:i}},[]).then(({render:i})=>{s(i(t))}).catch(()=>{n(Error("Failed to render React component. Make sure to install `@react-email/render` or `@react-email/components`."))})})}var FR=class{constructor(t){this.resend=t}send(t,s){return Ot(this,null,function*(){return this.create(t,s)})}create(t,s){return Ot(this,null,function*(){var n;const i=[];for(const c of t)c.react&&(c.html=yield dm(c.react),c.react=void 0),i.push(E9(c));return yield this.resend.post("/emails/batch",i,bo(hi({},s),{headers:hi({"x-batch-validation":(n=s?.batchValidation)!=null?n:"strict"},s?.headers)}))})}},PR=class{constructor(t){this.resend=t}create(t){return Ot(this,arguments,function*(s,n={}){return s.react&&(s.html=yield dm(s.react)),yield this.resend.post("/broadcasts",{name:s.name,audience_id:s.audienceId,preview_text:s.previewText,from:s.from,html:s.html,reply_to:s.replyTo,subject:s.subject,text:s.text},n)})}send(t,s){return Ot(this,null,function*(){return yield this.resend.post(`/broadcasts/${t}/send`,{scheduled_at:s?.scheduledAt})})}list(){return Ot(this,arguments,function*(t={}){const s=Io(t),n=s?`/broadcasts?${s}`:"/broadcasts";return yield this.resend.get(n)})}get(t){return Ot(this,null,function*(){return yield this.resend.get(`/broadcasts/${t}`)})}remove(t){return Ot(this,null,function*(){return yield this.resend.delete(`/broadcasts/${t}`)})}update(t,s){return Ot(this,null,function*(){return s.react&&(s.html=yield dm(s.react)),yield this.resend.patch(`/broadcasts/${t}`,{name:s.name,audience_id:s.audienceId,from:s.from,html:s.html,text:s.text,subject:s.subject,reply_to:s.replyTo,preview_text:s.previewText})})}},TR=class{constructor(t){this.resend=t}create(t){return Ot(this,arguments,function*(s,n={}){return yield this.resend.post(`/audiences/${s.audienceId}/contacts`,{unsubscribed:s.unsubscribed,email:s.email,first_name:s.firstName,last_name:s.lastName},n)})}list(t){return Ot(this,null,function*(){const s=t,{audienceId:n}=s,i=kR(s,["audienceId"]),o=Io(i),c=o?`/audiences/${n}/contacts?${o}`:`/audiences/${n}/contacts`;return yield this.resend.get(c)})}get(t){return Ot(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.get(`/audiences/${t.audienceId}/contacts/${t?.email?t?.email:t?.id}`)})}update(t){return Ot(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.patch(`/audiences/${t.audienceId}/contacts/${t?.email?t?.email:t?.id}`,{unsubscribed:t.unsubscribed,first_name:t.firstName,last_name:t.lastName})})}remove(t){return Ot(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.delete(`/audiences/${t.audienceId}/contacts/${t?.email?t?.email:t?.id}`)})}};function OR(t){return{name:t.name,region:t.region,custom_return_path:t.customReturnPath}}var MR=class{constructor(t){this.resend=t}create(t){return Ot(this,arguments,function*(s,n={}){return yield this.resend.post("/domains",OR(s),n)})}list(){return Ot(this,arguments,function*(t={}){const s=Io(t),n=s?`/domains?${s}`:"/domains";return yield this.resend.get(n)})}get(t){return Ot(this,null,function*(){return yield this.resend.get(`/domains/${t}`)})}update(t){return Ot(this,null,function*(){return yield this.resend.patch(`/domains/${t.id}`,{click_tracking:t.clickTracking,open_tracking:t.openTracking,tls:t.tls})})}remove(t){return Ot(this,null,function*(){return yield this.resend.delete(`/domains/${t}`)})}verify(t){return Ot(this,null,function*(){return yield this.resend.post(`/domains/${t}/verify`)})}},RR=class{constructor(t){this.resend=t}send(t){return Ot(this,arguments,function*(s,n={}){return this.create(s,n)})}create(t){return Ot(this,arguments,function*(s,n={}){return s.react&&(s.html=yield dm(s.react)),yield this.resend.post("/emails",E9(s),n)})}get(t){return Ot(this,null,function*(){return yield this.resend.get(`/emails/${t}`)})}list(){return Ot(this,arguments,function*(t={}){const s=Io(t),n=s?`/emails?${s}`:"/emails";return yield this.resend.get(n)})}update(t){return Ot(this,null,function*(){return yield this.resend.patch(`/emails/${t.id}`,{scheduled_at:t.scheduledAt})})}cancel(t){return Ot(this,null,function*(){return yield this.resend.post(`/emails/${t}/cancel`)})}},zR=class{verify(t){return new wR.Webhook(t.webhookSecret).verify(t.payload,{"svix-id":t.headers.id,"svix-timestamp":t.headers.timestamp,"svix-signature":t.headers.signature})}},kA="https://api.resend.com",_A=`resend-node:${_R}`,IR=typeof process<"u"&&Po&&Po.RESEND_BASE_URL||kA,LR=typeof process<"u"&&Po&&Po.RESEND_USER_AGENT||_A,qR=class{constructor(t){if(this.key=t,this.apiKeys=new BR(this),this.audiences=new SR(this),this.batch=new FR(this),this.broadcasts=new PR(this),this.contacts=new TR(this),this.domains=new MR(this),this.emails=new RR(this),this.webhooks=new zR,!t&&(typeof process<"u"&&Po&&(this.key=Po.RESEND_API_KEY),!this.key))throw new Error('Missing API key. Pass it to the constructor `new Resend("re_123")`');this.headers=new Headers({Authorization:`Bearer ${this.key}`,"User-Agent":LR,"Content-Type":"application/json"})}fetchRequest(t){return Ot(this,arguments,function*(s,n={}){try{const i=yield fetch(`${IR}${s}`,n);if(!i.ok)try{const c=yield i.text();return{data:null,error:JSON.parse(c)}}catch(c){if(c instanceof SyntaxError)return{data:null,error:{name:"application_error",message:"Internal server error. We are unable to process your request right now, please try again later."}};const d={message:i.statusText,name:"application_error"};return c instanceof Error?{data:null,error:bo(hi({},d),{message:c.message})}:{data:null,error:d}}return{data:yield i.json(),error:null}}catch{return{data:null,error:{name:"application_error",message:"Unable to fetch data. The request could not be resolved."}}}})}post(t,s){return Ot(this,arguments,function*(n,i,o={}){const c=new Headers(this.headers);if(o.headers)for(const[m,h]of new Headers(o.headers).entries())c.set(m,h);o.idempotencyKey&&c.set("Idempotency-Key",o.idempotencyKey);const d=bo(hi({method:"POST",body:JSON.stringify(i)},o),{headers:c});return this.fetchRequest(n,d)})}get(t){return Ot(this,arguments,function*(s,n={}){const i=new Headers(this.headers);if(n.headers)for(const[c,d]of new Headers(n.headers).entries())i.set(c,d);const o=bo(hi({method:"GET"},n),{headers:i});return this.fetchRequest(s,o)})}put(t,s){return Ot(this,arguments,function*(n,i,o={}){const c=new Headers(this.headers);if(o.headers)for(const[m,h]of new Headers(o.headers).entries())c.set(m,h);const d=bo(hi({method:"PUT",body:JSON.stringify(i)},o),{headers:c});return this.fetchRequest(n,d)})}patch(t,s){return Ot(this,arguments,function*(n,i,o={}){const c=new Headers(this.headers);if(o.headers)for(const[m,h]of new Headers(o.headers).entries())c.set(m,h);const d=bo(hi({method:"PATCH",body:JSON.stringify(i)},o),{headers:c});return this.fetchRequest(n,d)})}delete(t,s){return Ot(this,null,function*(){const n={method:"DELETE",body:JSON.stringify(s),headers:this.headers};return this.fetchRequest(t,n)})}};const k9="re_4KUymJKr_NyphYeUTEyBin3M94Tvt5pti",Of=new qR(k9);class $R{constructor(){this.fromEmail="no-reply@fcv.broadheader.com",this.fromName="Barbershop"}async sendPasswordResetEmail(s,n){const i=`https://your-domain.com/auth/reset-password?token=${n}`,o={from:`${this.fromName} <${this.fromEmail}>`,to:s,subject:"Reset your Barbershop password",html:`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Password Reset - Barbershop</title>
          <style>
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              background-color: #0A0A0A;
              color: #ffffff;
              margin: 0;
              padding: 0;
              line-height: 1.6;
            }
            .container {
              max-width: 600px;
              margin: 0 auto;
              padding: 40px 20px;
            }
            .header {
              text-align: center;
              margin-bottom: 40px;
            }
            .logo {
              width: 200px;
              height: 120px;
              margin: 0 auto 20px;
            }
            .content {
              background: linear-gradient(135deg, #1A1A1A 0%, #2A2A2A 100%);
              border-radius: 16px;
              padding: 40px;
              border: 1px solid #333;
              box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            }
            .title {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 20px;
              color: var(--color-primary);
              text-align: center;
            }
            .text {
              color: #ccc;
              margin-bottom: 30px;
              text-align: center;
            }
            .reset-button {
              display: inline-block;
              background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
              color: white;
              text-decoration: none;
              padding: 16px 32px;
              border-radius: 8px;
              font-weight: bold;
              text-align: center;
              margin: 20px 0;
              transition: transform 0.2s, box-shadow 0.2s;
            }
            .reset-button:hover {
              transform: translateY(-2px);
              box-shadow: 0 5px 15px rgba(255, 140, 66, 0.4);
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              color: #666;
              font-size: 14px;
            }
            .security-info {
              background: rgba(255, 140, 66, 0.1);
              border: 1px solid rgba(255, 140, 66, 0.3);
              border-radius: 8px;
              padding: 20px;
              margin-top: 20px;
            }
            .security-info h3 {
              color: var(--color-primary);
              margin-top: 0;
              margin-bottom: 10px;
            }
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <img src="https://your-domain.com/img/tipuno_x_logo_white.avif" alt="Barbershop" class="logo" />
            </div>
            
            <div class="content">
              <h1 class="title">Reset Your Password</h1>
              <p class="text">
                Hi there! We received a request to reset your password for your Barbershop account.
                Click the button below to set a new password.
              </p>
              
              <div style="text-align: center;">
                <a href="${i}" class="reset-button">Reset Password</a>
              </div>
              
              <div class="security-info">
                <h3> Security Information</h3>
                <p style="margin: 0; font-size: 14px; color: #bbb;">
                  This link will expire in 15 minutes for your security. If you didn't request a password reset, 
                  you can safely ignore this email.
                </p>
              </div>
              
              <p class="text" style="margin-top: 30px; font-size: 14px;">
                If the button above doesn't work, copy and paste this link into your browser:<br>
                <span style="word-break: break-all; color: var(--color-primary);">${i}</span>
              </p>
            </div>
            
            <div class="footer">
              <p> 2024 Barbershop. All rights reserved.</p>
              <p>This is an automated message. Please do not reply to this email.</p>
            </div>
          </div>
        </body>
        </html>
      `};try{const c=await Of.emails.send(o);if(c.error)throw console.error("Email service error:",c.error),new Error(`Email service error: ${c.error.message||"Unknown error"}`);return console.log("Password reset email sent successfully:",c),c}catch(c){throw console.error("Failed to send password reset email:",c),c}}async sendVoucherEmail(s){const n={from:`${this.fromName} <${this.fromEmail}>`,to:s.email,subject:`Your Voucher ${s.voucherCode} from Barbershop`,html:`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Voucher - Barbershop</title>
          <style>
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              background-color: #0A0A0A;
              color: #ffffff;
              margin: 0;
              padding: 0;
              line-height: 1.6;
            }
            .container {
              max-width: 600px;
              margin: 0 auto;
              padding: 40px 20px;
            }
            .header {
              text-align: center;
              margin-bottom: 40px;
            }
            .content {
              background: linear-gradient(135deg, #1A1A1A 0%, #2A2A2A 100%);
              border-radius: 16px;
              padding: 40px;
              border: 1px solid #333;
              box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            }
            .title {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 20px;
              color: var(--color-primary);
              text-align: center;
            }
            .voucher-code {
              font-size: 32px;
              font-weight: bold;
              text-align: center;
              color: var(--color-primary);
              margin: 20px 0;
              font-family: monospace;
            }
            .voucher-details {
              background: rgba(255, 140, 66, 0.1);
              border: 1px solid rgba(255, 140, 66, 0.3);
              border-radius: 8px;
              padding: 20px;
              margin: 20px 0;
            }
            .qr-code {
              text-align: center;
              margin: 20px 0;
            }
            .qr-code img {
              max-width: 200px;
              border-radius: 8px;
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              color: #666;
              font-size: 14px;
            }
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <h1 style="color: var(--color-primary); font-size: 32px; margin-bottom: 10px;">Barbershop</h1>
            </div>
            
            <div class="content">
              <h1 class="title"> You've Received a Voucher!</h1>
              <p style="text-align: center; color: #ccc; margin-bottom: 30px;">
                Hi ${s.name}, you've received a special voucher from Barbershop!
              </p>
              
              <div class="voucher-code">${s.voucherCode}</div>
              
              <div class="voucher-details">
                <h3 style="color: var(--color-primary); margin-top: 0; margin-bottom: 15px;">Voucher Details</h3>
                <p style="margin: 5px 0;"><strong>Value:</strong> ${s.voucherValue}</p>
                ${s.pointsRequired>0?`<p style="margin: 5px 0;"><strong>Points Required:</strong> ${s.pointsRequired}</p>`:""}
                <p style="margin: 5px 0;"><strong>Expires:</strong> ${s.expiresAt}</p>
              </div>
              
              ${s.qrCodeImage?`
              <div class="qr-code">
                <p style="color: #ccc; margin-bottom: 10px;">Scan this QR code at the barbershop</p>
                <img src="${s.qrCodeImage}" alt="Voucher QR Code" />
              </div>
              `:""}
              
              <p style="text-align: center; color: #ccc; margin-top: 30px; font-size: 14px;">
                Show this email or QR code at any Barbershop location to redeem your voucher.
              </p>
            </div>
            
            <div class="footer">
              <p> 2024 Barbershop. All rights reserved.</p>
              <p>This is an automated message. Please do not reply to this email.</p>
            </div>
          </div>
        </body>
        </html>
      `};try{const i=await Of.emails.send(n);if(i.error)throw console.error("Email service error:",i.error),new Error(`Email service error: ${i.error.message||"Unknown error"}`);return console.log("Voucher email sent successfully:",i),{success:!0,messageId:i.data?.id,response:i}}catch(i){throw console.error("Failed to send voucher email:",i),i}}async sendWelcomeEmail(s){const n={from:`${this.fromName} <${this.fromEmail}>`,to:s.email,subject:"Welcome to Barbershop!",html:`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Welcome - Barbershop</title>
          <style>
            body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              background-color: #0A0A0A;
              color: #ffffff;
              margin: 0;
              padding: 0;
              line-height: 1.6;
            }
            .container {
              max-width: 600px;
              margin: 0 auto;
              padding: 40px 20px;
            }
            .header {
              text-align: center;
              margin-bottom: 40px;
            }
            .content {
              background: linear-gradient(135deg, #1A1A1A 0%, #2A2A2A 100%);
              border-radius: 16px;
              padding: 40px;
              border: 1px solid #333;
              box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            }
            .title {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 20px;
              color: var(--color-primary);
              text-align: center;
            }
            .credentials {
              background: rgba(255, 140, 66, 0.1);
              border: 1px solid rgba(255, 140, 66, 0.3);
              border-radius: 8px;
              padding: 20px;
              margin: 20px 0;
            }
            .credentials p {
              margin: 5px 0;
              font-family: monospace;
            }
            .login-button {
              display: inline-block;
              background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
              color: white;
              text-decoration: none;
              padding: 12px 24px;
              border-radius: 8px;
              font-weight: bold;
              text-align: center;
              margin: 20px 0;
              transition: transform 0.2s, box-shadow 0.2s;
            }
            .login-button:hover {
              transform: translateY(-2px);
              box-shadow: 0 5px 15px rgba(255, 140, 66, 0.4);
            }
            .footer {
              text-align: center;
              margin-top: 30px;
              color: #666;
              font-size: 14px;
            }
          </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <h1 style="color: var(--color-primary); font-size: 32px; margin-bottom: 10px;">Barbershop</h1>
            </div>
            
            <div class="content">
              <h1 class="title"> Welcome to Barbershop!</h1>
              <p style="text-align: center; color: #ccc; margin-bottom: 30px;">
                Hi ${s.username}, thank you for visiting Barbershop! 
                We've created an account for you to make future bookings even easier.
              </p>
              
              <div class="credentials">
                <h3 style="color: var(--color-primary); margin-top: 0; margin-bottom: 15px;">Your Login Details</h3>
                <p style="margin: 5px 0;"><strong>Email:</strong> ${s.email}</p>
                <p style="margin: 5px 0;"><strong>Password:</strong> ${s.password}</p>
              </div>
              
              <div style="text-align: center;">
                <a href="${s.loginUrl}" class="login-button">Sign In to Your Account</a>
              </div>
              
              <p style="text-align: center; color: #ccc; margin-top: 30px; font-size: 14px;">
                Save these details or use the button above to access your account. You can 
                change your password after signing in.
              </p>
            </div>
            
            <div class="footer">
              <p> 2024 Barbershop. All rights reserved.</p>
              <p>This is an automated message. Please do not reply to this email.</p>
            </div>
          </div>
        </body>
        </html>
      `};try{const i=await Of.emails.send(n);if(i.error)throw console.error("Email service error:",i.error),new Error(`Email service error: ${i.error.message||"Unknown error"}`);return console.log("Welcome email sent successfully:",i),{success:!0,messageId:i.data?.id}}catch(i){throw console.error("Failed to send welcome email:",i),i}}}const UR=()=>k9!=="your_resend_api_key_here",xm=new $R;xm.sendVoucherEmail.bind(xm);const VR=xm.sendWelcomeEmail.bind(xm),Mu=({barber:t,className:s="w-12 h-12"})=>{const[n,i]=C.useState(!1),c=me(H.services.barbers.getImageUrl,{storageId:t.avatarStorageId})||t.avatarUrl||"/img/avatar_default.jpg";return n||!c?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 rounded-full ${s}`,children:e.jsx(tt,{className:"w-6 h-6 text-gray-500"})}):e.jsx("img",{src:c,alt:`${t.full_name} avatar`,className:`${s} rounded-full object-cover`,onError:()=>i(!0)})},HR=()=>{const{user:t}=Dt(),[s,n]=C.useState(null),[i,o]=C.useState({customer:null,customer_name:null,customer_phone:"",customer_email:"",customer_address:"",services:[],products:[],subtotal:0,discount_amount:0,voucher_applied:null,tax_amount:0,total_amount:0}),[c,d]=C.useState(null),[m,h]=C.useState(""),[p,u]=C.useState("services"),[f,g]=C.useState(null),[y,b]=C.useState(null),[j,N]=C.useState("cash"),[w,B]=C.useState("card"),[S,_]=C.useState(1),[k,E]=C.useState(null),[D,F]=C.useState(null),[M,P]=C.useState(null),[T,L]=C.useState({show:!1,title:"",message:"",type:"warning"}),[X,Z]=C.useState(!1),[ne,I]=C.useState("catalog"),[O,G]=C.useState(window.innerWidth<1024),te=9,Q=15;C.useEffect(()=>{const V=()=>{G(window.innerWidth<1024)};return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]);const ee=t?.role==="super_admin"?me(H.services.services.getAllServices):t?.branch_id?me(H.services.services.getServicesByBranch,{branch_id:t.branch_id}):[],le=me(H.services.products.getAllProducts),R=t?.role==="super_admin"?me(H.services.barbers.getAllBarbers):t?.branch_id?me(H.services.barbers.getBarbersByBranch,{branch_id:t.branch_id}):[],q=t?.role==="super_admin"?me(H.services.auth.getAllUsers):t?.branch_id?me(H.services.auth.getUsersByBranch,{branch_id:t.branch_id}):[],$=(me(H.services.branches.getAllBranches)||[]).find(V=>V._id===t?.branch_id),Y=De(H.services.transactions.createTransaction),xe=De(H.services.bookings.updatePaymentStatus),oe=De(H.services.bookings.updateBooking),de=De(H.services.auth.createUser),ve=me(H.services.vouchers.getVoucherByCode,i.voucher_applied&&typeof i.voucher_applied=="string"&&/[A-Z]/.test(i.voucher_applied)&&!/[a-z]/.test(i.voucher_applied)?{code:i.voucher_applied}:"skip"),Me=ee?.filter(V=>V.is_active)||[],Ke=le?.filter(V=>V.status==="active")||[],pe=R?.filter(V=>V.is_active)||[];C.useEffect(()=>{const V=sessionStorage.getItem("posBooking");if(V&&ee!==void 0)try{const se=JSON.parse(V);E(se);let ke=null;if(q&&q.length>0&&(ke=q.find(ze=>ze._id===se.customer)),!ke&&se.customer_name&&(ke={_id:se.customer,username:se.customer_name,mobile_number:se.customer_phone||"",email:se.customer_email||"",address:se.customer_address||""},console.log("Using customer data from booking:",ke)),!ke){console.error("Customer not found for booking and no customer data in booking");return}const Re=ee?.find(ze=>ze._id===se.service);if(!Re){console.error("Service not found for booking:",se.service);return}if(o(ze=>({...ze,customer:ke,customer_name:ke.username,customer_phone:ke.mobile_number||"",customer_email:ke.email||"",customer_address:ke.address||"",services:[{service_id:Re._id,service_name:Re.name,price:se.final_price||Re.price,quantity:1}],subtotal:se.final_price||Re.price,discount_amount:se.discount_amount||0,voucher_applied:se.voucher_id||null,total_amount:se.final_price||Re.price})),se.barber&&R){const ze=R.find(Ve=>Ve._id===se.barber);ze&&n(ze)}}catch(se){console.error("Error parsing booking data:",se)}},[ee,q,R]),q?.filter(V=>V.role==="customer");const be=()=>{d("cancelBooking")},Be=()=>{E(null),sessionStorage.removeItem("posBooking"),o(V=>({...V,customer:V.customer,customer_name:V.customer_name,customer_phone:V.customer_phone,customer_email:V.customer_email,customer_address:V.customer_address,barber:V.barber||null,services:[],products:[],subtotal:0,discount_amount:0,voucher_applied:null,tax_amount:0,total_amount:0})),console.log("Booking attachment canceled - converted to regular POS transaction"),d(null)},Ue=V=>{if(!V)return"Other Services";const se=V.toLowerCase();return se.includes("haircut")||se.includes("hair")?"Haircut":se.includes("package")?"Package":"Other Services"},ue=Me.reduce((V,se)=>{const ke=Ue(se.category);return V[ke]||(V[ke]=[]),V[ke].push(se),V},{}),Ie=V=>V.filter(se=>se.name.toLowerCase().includes(m.toLowerCase())||se.category&&se.category.toLowerCase().includes(m.toLowerCase())||se.description&&se.description.toLowerCase().includes(m.toLowerCase())),st=Ie(f?ue[f]||[]:Me),Le=Ke.filter(V=>V.name.toLowerCase().includes(m.toLowerCase())||V.category&&V.category.toLowerCase().includes(m.toLowerCase())||V.description&&V.description.toLowerCase().includes(m.toLowerCase())),kt=w==="card"?te:Q,Pt=p==="services"?st:Le,St=Math.ceil(Pt.length/kt),Jt=(S-1)*kt,Ne=Jt+kt,Ye=Pt.slice(Jt,Ne);C.useEffect(()=>{_(1)},[m,p,w,f]);const Ge=V=>{_(V)};C.useEffect(()=>{const V=i.services.reduce((Ve,_t)=>Ve+_t.price*_t.quantity,0),se=i.products.reduce((Ve,_t)=>Ve+_t.price*_t.quantity,0),ke=V+se,Re=0,ze=ke-i.discount_amount;o(Ve=>({...Ve,subtotal:ke,tax_amount:Re,total_amount:ze}))},[i.services,i.products,i.discount_amount]);const yt=V=>{o(se=>{const ke=se.services.findIndex(Re=>Re.service_id===V._id);if(ke>=0){const Re=[...se.services];return Re[ke].quantity+=1,{...se,services:Re}}else return{...se,services:[...se.services,{service_id:V._id,service_name:V.name,price:V.price,quantity:1}]}})},bt=V=>{o(se=>{const ke=se.products.findIndex(Re=>Re.product_id===V._id);if(ke>=0){const Re=[...se.products];return Re[ke].quantity+=1,{...se,products:Re}}else return{...se,products:[...se.products,{product_id:V._id,product_name:V.name,price:V.price,quantity:1}]}})},Ee=(V,se,ke)=>{o(Re=>{const ze=[...Re[V]];return ze[se].quantity=Math.max(0,ze[se].quantity+ke),ze[se].quantity===0&&ze.splice(se,1),{...Re,[V]:ze}})},We=()=>{o({customer:null,customer_name:null,customer_phone:"",customer_email:"",customer_address:"",services:[],products:[],subtotal:0,discount_amount:0,voucher_applied:null,tax_amount:0,total_amount:0})},Qe=()=>{if(!t||!t._id){L({show:!0,title:"Authentication Required",message:"User not authenticated. Please log in again.",type:"error"});return}if(!s){L({show:!0,title:"Barber Required",message:"Please select a barber before processing payment.",type:"warning"});return}if(!(s?.branch_id||t?.branch_id)){L({show:!0,title:"Branch Required",message:"No branch selected or associated. Please select a barber from a branch or set your branch.",type:"warning"});return}if(i.services.length===0&&i.products.length===0){L({show:!0,title:"Items Required",message:"Please add at least one service or product before processing payment.",type:"warning"});return}if(!i.customer&&(!i.customer_name||i.customer_name.trim()==="")){L({show:!0,title:"Customer Name Required",message:"Please enter customer name for walk-in customer.",type:"warning"});return}d("paymentConfirmation")},ht=()=>{const V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let se="";for(let ke=0;ke<12;ke++)se+=V.charAt(Math.floor(Math.random()*V.length));return se},wt=async V=>{try{const se=s?.branch_id||t?.branch_id;if(!se){L({show:!0,title:"Branch Required",message:"Cannot process payment: Missing branch. Please select a barber from a branch or set your branch.",type:"error"});return}let ke=i.customer?._id;const Re=i.customer_email&&i.customer_email.trim()!==""&&i.customer_email.includes("@");if(!i.customer&&i.customer_name&&Re)try{const Oe=ht();if(ke=(await de({username:i.customer_name.trim(),email:i.customer_email.trim(),password:Oe,mobile_number:i.customer_phone?.trim()||void 0,role:"customer",branch_id:t.branch_id}))._id,UR())try{const ut=await VR({email:i.customer_email.trim(),username:i.customer_name.trim(),password:Oe,loginUrl:`${window.location.origin}/auth/login`});ut.success?console.log("Welcome email sent successfully to:",i.customer_email.trim()):console.warn("Failed to send welcome email:",ut.error)}catch(ut){console.error("Error sending welcome email:",ut)}d("customerCreated"),F({email:i.customer_email.trim(),password:Oe})}catch(Oe){console.error("Failed to create user account:",Oe)}console.log("Current transaction voucher_applied:",i.voucher_applied),console.log("Current transaction voucher_applied type:",typeof i.voucher_applied);let ze=i.voucher_applied;if(typeof ze=="string"&&!ze.includes(":")&&ve?._id&&(console.log("Converting voucher code to ID via query:",ze),ze=ve._id),!se)throw new Error("Branch ID is required for transaction");if(!s?._id)throw new Error("Barber ID is required for transaction");if(!t?._id)throw new Error("Staff ID (processed_by) is required for transaction");if(!i.services||i.services.length===0)throw new Error("At least one service is required for transaction");const Ve={customer:ke||void 0,customer_name:i.customer_name?.trim()||void 0,customer_phone:i.customer_phone?.trim()||void 0,customer_email:i.customer_email?.trim()||void 0,branch_id:se,barber:s._id,services:i.services,products:i.products.length>0?i.products:void 0,subtotal:i.subtotal,discount_amount:i.discount_amount,voucher_applied:typeof ze=="string"&&!ze.includes(":")?void 0:ze||void 0,tax_amount:i.tax_amount,total_amount:i.total_amount,payment_method:V.payment_method,payment_status:"completed",processed_by:t._id,cash_received:V.cash_received,change_amount:V.change_amount};console.log("Final voucher_applied value:",ze),console.log("Final voucher_applied type:",typeof ze),console.log("Transaction data voucher_applied:",Ve.voucher_applied);const _t=sessionStorage.getItem("posBooking"),_e=_t&&i.services.length>0;console.log("[POS] Transaction preparation:",{hasBookingInSession:!!_t,servicesCount:i.services.length,isBookingPayment:_e,skip_booking_creation:_e||!1}),console.log("[POS] Creating transaction with data:",{...Ve,skip_booking_creation:_e||!1});const $e=await Y({...Ve,skip_booking_creation:_e||!1});if(console.log("[POS] Transaction created successfully:",$e),_e)try{const Oe=JSON.parse(_t);await oe({id:Oe._id,notes:$e.receipt_number,status:"completed"}),await xe({id:Oe._id,payment_status:"paid"}),console.log("Booking status updated to completed and payment status updated to paid"),sessionStorage.removeItem("posBooking"),E(null)}catch(Oe){console.error("Error updating booking status:",Oe)}const ot=i.services.length>0,ie=i.products.length>0;let Ae="Transaction completed successfully!";if(_e)Ae=`Booking payment completed! Booking #${JSON.parse(_t).booking_code} has been marked as completed and paid.`;else if(ot||ie){const Oe=i.services.length,qe=i.products.length,ut=[];Oe>0&&ut.push(`${Oe} service${Oe>1?"s":""}`),qe>0&&ut.push(`${qe} product${qe>1?"s":""}`),Ae=`POS transaction completed! ${ut.join(" and ")} processed successfully.`}const nt=Date.now(),ct=`TXN-${nt}`,pt=`RCP-${nt}`,re={transaction_id:ct,receipt_number:pt,timestamp:nt,customer_name:i.customer_name,barber_name:s.full_name,services:i.services,products:i.products,subtotal:i.subtotal,discount_amount:i.discount_amount,tax_amount:i.tax_amount,total_amount:i.total_amount,payment_method:V.payment_method,cash_received:V.cash_received,change_amount:V.change_amount};P(re),d("receipt"),We(),n(null)}catch(se){console.error("Transaction failed:",se),console.error("Error details:",{message:se.message,data:se.data,stack:se.stack});let ke="Transaction failed. Please try again.";se.message&&(se.message.includes("TRANSACTION_INVALID_CUSTOMER_NAME")?ke="Please enter a valid customer name for walk-in customers.":se.message.includes("validation")?ke="Invalid transaction data. Please check all fields and try again.":se.message.includes("permission")?ke="Permission denied. Please check your access rights.":ke=`Transaction failed: ${se.message}`),alert(ke),d(null)}},Bt=V=>{o(se=>({...se,customer:V.customer,customer_name:V.customer_name,customer_phone:V.customer_phone,customer_email:V.customer_email||"",customer_address:V.customer_address||""}))},K=V=>{console.log("Voucher scanned:",V);const se=V._id||V.id;if(!se){L({show:!0,title:"Invalid Voucher",message:"Invalid voucher: No ID found",type:"error"});return}o(ke=>({...ke,voucher_applied:se,discount_amount:V.value||0})),d(null),L({show:!0,title:"Voucher Applied",message:`Voucher applied successfully! Discount: ${V.value||0}`,type:"success"})};if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F5F5F5] to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-primary)] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading POS system..."})]})});if(O){const V=i.services.length+i.products.length;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] pb-32",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-[#050505] border-b border-[#1A1A1A]/30",style:{paddingTop:"env(safe-area-inset-top)"},children:e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(Js,{to:"/staff",className:"w-9 h-9 bg-[#0A0A0A] rounded-lg flex items-center justify-center border border-[#1A1A1A]/50",children:e.jsx(vs,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(ds,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-sm font-bold text-white truncate",children:"POS System"}),e.jsx("p",{className:"text-[10px] text-[var(--color-primary)]",children:"Point of Sale"})]})]}),e.jsxs("button",{onClick:()=>Z(!X),className:"relative w-9 h-9 bg-[var(--color-primary)]/20 rounded-lg flex items-center justify-center border border-[var(--color-primary)]/30",children:[e.jsx(ya,{className:"w-4 h-4 text-[var(--color-primary)]"}),V>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[var(--color-primary)] text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:V})]})]})})}),e.jsxs("div",{className:"relative z-10 px-3 py-3 space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl border border-[#444444]/50 overflow-hidden",children:[e.jsxs("button",{onClick:()=>I(ne==="barber"?null:"barber"),className:"w-full px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ys,{className:"w-5 h-5 text-[var(--color-primary)]"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:s?s.full_name:"Select Barber"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:s?"Tap to change":"Required"})]})]}),s?e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[var(--color-primary)]/30",children:e.jsx(Mu,{barber:s,className:"w-10 h-10"})}):e.jsx(sr,{className:"w-5 h-5 text-gray-400"})]}),ne==="barber"&&e.jsx("div",{className:"px-4 pb-4 grid grid-cols-3 gap-2",children:pe.map(se=>e.jsxs("button",{onClick:()=>{n(se),I(null)},className:`p-3 rounded-lg border transition-all ${s?._id===se._id?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-[#555555] hover:border-[var(--color-primary)]/50"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mx-auto mb-2 border-2 border-[var(--color-primary)]/30",children:e.jsx(Mu,{barber:se,className:"w-12 h-12"})}),e.jsx("p",{className:"text-[10px] font-semibold text-white text-center truncate",children:se.full_name})]},se._id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl border border-[#444444]/50 overflow-hidden",children:[e.jsxs("button",{onClick:()=>I(ne==="customer"?null:"customer"),className:"w-full px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tt,{className:"w-5 h-5 text-[var(--color-primary)]"}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:i.customer?.username||i.customer_name||"Select Customer"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:i.customer?"Registered":i.customer_name?"Walk-in":"Required"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{onClick:se=>{se.stopPropagation(),d("scanner")},className:"p-2 bg-blue-500/20 rounded-lg border border-blue-500/30 cursor-pointer hover:bg-blue-500/30 transition-colors",role:"button",tabIndex:0,onKeyPress:se=>{(se.key==="Enter"||se.key===" ")&&(se.stopPropagation(),d("scanner"))},children:e.jsx(rr,{className:"w-4 h-4 text-blue-400"})}),e.jsx(sr,{className:"w-5 h-5 text-gray-400"})]})]}),ne==="customer"&&e.jsxs("div",{className:"px-4 pb-4 space-y-2",children:[e.jsxs("button",{onClick:()=>{d("customerSelection"),I(null)},className:"w-full p-3 border-2 border-dashed border-[#555555] rounded-lg hover:border-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 flex items-center justify-center space-x-2 text-gray-400",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Select Existing"})]}),e.jsxs("button",{onClick:()=>{o(se=>({...se,customer:null,customer_name:"",customer_phone:"",customer_email:""})),I(null)},className:"w-full p-3 border-2 border-dashed border-blue-500/30 rounded-lg hover:border-blue-500 hover:bg-blue-500/10 flex items-center justify-center space-x-2 text-blue-400",children:[e.jsx(zr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Walk-in Customer"})]})]})]}),i.customer_name!==void 0&&i.customer_name!==null&&!i.customer&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl border border-[#444444]/50 p-4 space-y-3",children:[e.jsxs("h4",{className:"text-sm font-bold text-white flex items-center",children:[e.jsx(zr,{className:"w-4 h-4 mr-2 text-blue-400"}),"Walk-in Customer Details"]}),e.jsx("input",{type:"text",placeholder:"Enter customer full name",value:i.customer_name||"",onChange:se=>o(ke=>({...ke,customer_name:se.target.value})),className:"w-full px-3 py-2.5 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg text-sm",required:!0,autoFocus:!0}),e.jsx("input",{type:"tel",placeholder:"Phone Number",value:i.customer_phone,onChange:se=>o(ke=>({...ke,customer_phone:se.target.value})),className:"w-full px-3 py-2.5 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg text-sm"}),e.jsx("input",{type:"email",placeholder:"Email (for account creation)",value:i.customer_email,onChange:se=>o(ke=>({...ke,customer_email:se.target.value})),className:"w-full px-3 py-2.5 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg text-sm"})]}),k&&e.jsx("div",{className:"bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 border border-[var(--color-primary)]/30 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ya,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-white",children:["Booking #",k.booking_code]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Processing payment"})]})]}),e.jsx("button",{onClick:be,className:"p-1.5 bg-red-500/20 rounded-lg",children:e.jsx(Ze,{className:"w-3.5 h-3.5 text-red-400"})})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:`Search ${p}...`,value:m,onChange:se=>h(se.target.value),className:"w-full pl-10 pr-4 py-3 bg-[#2A2A2A] border border-[#444444]/50 text-white placeholder-gray-400 rounded-xl text-sm"})]}),e.jsxs("div",{className:"flex space-x-2 bg-[#1A1A1A] rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>{u("services"),g(null),b(null)},className:`flex-1 px-4 py-2.5 rounded-lg font-semibold text-sm transition-all ${p==="services"?"bg-[var(--color-primary)] text-white":"text-gray-400"}`,children:[e.jsx(ys,{className:"w-4 h-4 inline mr-2"}),"Services"]}),e.jsxs("button",{onClick:()=>{u("products"),g(null),b(null)},className:`flex-1 px-4 py-2.5 rounded-lg font-semibold text-sm transition-all ${p==="products"?"bg-[var(--color-primary)] text-white":"text-gray-400"}`,children:[e.jsx(Aa,{className:"w-4 h-4 inline mr-2"}),"Products"]})]}),p==="services"&&e.jsx("div",{className:"space-y-2",children:["Haircut","Package","Other Services"].map(se=>{const ke=ue[se]||[],Re=Ie(ke);if(Re.length===0)return null;const ze=y===se;return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]",children:[e.jsxs("button",{onClick:()=>b(ze?null:se),className:"w-full text-left px-4 py-3 flex justify-between items-center text-white font-semibold hover:bg-[#222222] transition-colors rounded-lg",children:[e.jsx("span",{className:"text-sm",children:se}),e.jsx("span",{className:"text-lg text-gray-400",children:ze?"":"+"})]}),ze&&e.jsx("div",{className:"space-y-2 px-4 pb-4 pt-2",children:Re.map(Ve=>e.jsx("button",{onClick:()=>yt(Ve),className:"w-full p-4 bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl border border-[#444444]/50 text-left hover:border-[var(--color-primary)] transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-white text-sm mb-1",children:Ve.name}),Ve.description&&e.jsx("p",{className:"text-xs text-gray-400 line-clamp-1 mb-2",children:Ve.description}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-base font-bold text-[var(--color-primary)]",children:["",Ve.price]}),Ve.duration_minutes&&e.jsxs("span",{className:"text-xs text-gray-500",children:[Ve.duration_minutes," min"]})]})]}),e.jsx("div",{className:"ml-3 w-10 h-10 bg-[var(--color-primary)]/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"w-5 h-5 text-[var(--color-primary)]"})})]})},Ve._id))})]},se)})}),p==="products"&&e.jsx("div",{className:"space-y-2",children:Le.map(se=>e.jsx("button",{onClick:()=>bt(se),className:"w-full p-4 bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl border border-[#444444]/50 text-left hover:border-[var(--color-primary)] transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-white text-sm mb-1",children:se.name}),se.description&&e.jsx("p",{className:"text-xs text-gray-400 line-clamp-1 mb-2",children:se.description}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-base font-bold text-[var(--color-primary)]",children:["",se.price]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Stock: ",se.stock]})]})]}),e.jsx("div",{className:"ml-3 w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(cs,{className:"w-5 h-5 text-blue-400"})})]})},se._id))})]}),X&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",onClick:()=>Z(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-t-3xl max-h-[80vh] overflow-y-auto",onClick:se=>se.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-[#2A2A2A] border-b border-[#444444]/50 px-4 py-3 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Order Summary"}),e.jsx("button",{onClick:()=>Z(!1),className:"p-2 hover:bg-white/10 rounded-lg",children:e.jsx(Ze,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[i.services.map((se,ke)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-white text-sm",children:se.service_name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["",se.price," each"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[e.jsx("button",{onClick:()=>Ee("services",ke,-1),className:"w-7 h-7 bg-[#444444] rounded-full flex items-center justify-center",children:e.jsx(Eu,{className:"w-3.5 h-3.5 text-gray-300"})}),e.jsx("span",{className:"w-6 text-center font-semibold text-white text-sm",children:se.quantity}),e.jsx("button",{onClick:()=>Ee("services",ke,1),className:"w-7 h-7 bg-[var(--color-primary)] rounded-full flex items-center justify-center",children:e.jsx(cs,{className:"w-3.5 h-3.5 text-white"})})]})]},`service-${ke}`)),i.products.map((se,ke)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-white text-sm",children:se.product_name}),e.jsxs("p",{className:"text-xs text-gray-400",children:["",se.price," each"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[e.jsx("button",{onClick:()=>Ee("products",ke,-1),className:"w-7 h-7 bg-[#444444] rounded-full flex items-center justify-center",children:e.jsx(Eu,{className:"w-3.5 h-3.5 text-gray-300"})}),e.jsx("span",{className:"w-6 text-center font-semibold text-white text-sm",children:se.quantity}),e.jsx("button",{onClick:()=>Ee("products",ke,1),className:"w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(cs,{className:"w-3.5 h-3.5 text-white"})})]})]},`product-${ke}`)),V===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Eo,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm text-gray-400",children:"No items added yet"})]})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-[#050505] border-t border-[#1A1A1A]/30 px-3 py-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["",i.total_amount.toFixed(2)]}),i.discount_amount>0&&e.jsxs("p",{className:"text-xs text-green-400",children:["-",i.discount_amount.toFixed(2)," discount"]})]}),e.jsxs("button",{onClick:()=>{Z(!X)},className:"px-4 py-2 bg-white/5 rounded-lg border border-white/10 text-white text-sm",children:[V," ",V===1?"item":"items"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>We(),disabled:V===0,className:"py-3 border border-red-500/30 text-red-400 font-semibold rounded-xl hover:bg-red-500/10 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(js,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear"})]}),e.jsxs("button",{onClick:Qe,disabled:!s||V===0,className:"py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white font-bold rounded-xl hover:from-[var(--color-accent)] hover:to-[var(--color-accent)] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg",children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Pay Now"})]})]})]}),c==="scanner"&&e.jsx(fj,{isOpen:!0,onClose:()=>d(null),onVoucherScanned:K,onBookingScanned:se=>{se.customer&&o(ke=>({...ke,customer:se.customer})),d(null)}}),c==="customerSelection"&&e.jsx(e4,{isOpen:!0,onClose:()=>d(null),onCustomerSelected:Bt,onScanQR:()=>d("scanner"),onAddNewCustomer:()=>d("addCustomer")}),c==="addCustomer"&&e.jsx(gj,{isOpen:!0,onClose:()=>d("customerSelection"),onCustomerAdded:se=>{o(ke=>({...ke,customer:se})),d(null)}}),c==="paymentConfirmation"&&e.jsx(Zj,{isOpen:!0,onClose:()=>d(null),onConfirm:wt,transactionData:{subtotal:i.subtotal,discount_amount:i.discount_amount,tax_amount:i.tax_amount,total_amount:i.total_amount,services:i.services,products:i.products},paymentMethod:j,setPaymentMethod:N}),c==="receipt"&&M&&e.jsx(t4,{isOpen:!0,onClose:()=>{d(null),P(null)},transactionData:M,branchInfo:$,staffInfo:t}),c==="cancelBooking"&&e.jsx(ns,{isOpen:!0,onClose:()=>d(null),title:"Cancel Booking",size:"sm",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500/20 to-red-600/20 rounded-full flex items-center justify-center mx-auto mb-3 border-2 border-red-500/30",children:e.jsx(Ze,{className:"w-6 h-6 text-red-400"})}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:["Cancel Booking #",k?.booking_code,"?"]}),e.jsx("p",{className:"text-red-700 text-sm mb-4 px-2",children:"This will detach the booking and convert to a regular POS transaction."}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>d(null),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-all duration-200 text-sm",children:"Keep"}),e.jsx("button",{onClick:Be,className:"flex-1 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-medium rounded-lg transition-all duration-200 text-sm",children:"Cancel"})]})]})}),c==="customerCreated"&&D&&e.jsx(ns,{isOpen:!0,onClose:()=>{d(null),F(null)},title:"Customer Account Created",size:"md",children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-green-500/30",children:e.jsx(Je,{className:"w-8 h-8 text-green-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Customer Account Created!"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Please provide the following credentials to the customer:"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email:"}),e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-md px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900",children:D.email}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(D.email),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Copy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password:"}),e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-md px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900",children:D.password}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(D.password),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Copy"})]})]})]})}),e.jsx("button",{onClick:()=>{d(null),F(null)},className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium rounded-lg transition-all duration-200",children:"Continue with Transaction"})]})})]})}return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.3)"}})]}),e.jsxs("div",{className:"relative z-10 bg-[#050505] border-b border-[#1A1A1A]/30 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-[0.02]",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.2)"}})}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-2.5 lg:py-3 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx(Js,{to:"/staff",className:"w-8 h-8 sm:w-10 sm:h-10 bg-[#0A0A0A] rounded-lg sm:rounded-xl flex items-center justify-center hover:bg-[var(--color-primary)]/10 transition-all duration-200 border border-[#1A1A1A]/50 flex-shrink-0 ring-1 ring-[var(--color-primary)]/20 group",title:"Back to Dashboard",children:e.jsx(vs,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 group-hover:text-[var(--color-primary)] transition-colors duration-200"})}),e.jsx("div",{className:"w-8 h-8 sm:w-11 sm:h-11 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg ring-1 ring-[var(--color-primary)]/20 p-1.5 border border-[#1A1A1A]/50 flex-shrink-0",children:e.jsx(ds,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[e.jsxs("h1",{className:"text-xs sm:text-lg font-bold text-white tracking-tight truncate",children:[e.jsx("span",{className:"hidden sm:inline",children:"POS System"}),e.jsx("span",{className:"sm:hidden",children:"POS"})]}),e.jsx("div",{className:"bg-[var(--color-primary)]/15 backdrop-blur-sm rounded-md px-1.5 py-0.5 border border-[var(--color-primary)]/25 flex-shrink-0",children:e.jsxs("span",{className:"text-[10px] font-semibold text-[var(--color-primary)]",children:["v",zo]})})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-1.5 mt-0.5",children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-[var(--color-primary)]",children:"Point of Sale"}),$&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-600 text-xs hidden sm:inline",children:""}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-1",children:[e.jsx("span",{className:"text-[10px] font-medium text-gray-400",children:$.name}),e.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",$.branch_code,")"]})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[e.jsxs("div",{className:"hidden lg:block text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-white",children:["Welcome back, ",t?.username||"Staff"]}),e.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-1.5",children:[e.jsxs(Js,{to:"/staff",className:"bg-blue-500/15 backdrop-blur-sm rounded-lg flex items-center space-x-1 px-2 sm:px-3 py-1.5 hover:bg-blue-500/25 transition-all duration-200 border border-blue-500/25 group",title:"Back to Dashboard",children:[e.jsx(vs,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-blue-400 group-hover:text-blue-300 transition-colors duration-200"}),e.jsx("span",{className:"hidden sm:inline text-blue-400 group-hover:text-blue-300 font-semibold text-xs transition-colors duration-200",children:"Back"})]}),e.jsx("button",{onClick:()=>d(null),className:"w-7 h-7 sm:w-9 sm:h-9 bg-white/5 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-white/10 transition-all duration-200 border border-white/10 group",title:"Help",children:e.jsx("span",{className:"text-gray-400 group-hover:text-white text-sm font-bold transition-colors duration-200",children:"?"})})]})]})]})})]}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Select Barber"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:pe.map(V=>e.jsx("button",{onClick:()=>n(V),className:`p-3 rounded-xl border-2 transition-all duration-200 ${s?._id===V._id?"border-[var(--color-primary)] bg-[var(--color-primary)]/10 text-[var(--color-primary)]":"border-[#555555] hover:border-[var(--color-primary)]/50 text-gray-300 hover:text-[var(--color-primary)]"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden mx-auto mb-2 border-2 border-[var(--color-primary)]/30",children:e.jsx(Mu,{barber:V,className:"w-10 h-10"})}),e.jsx("p",{className:"text-sm font-semibold",children:V.full_name})]})},V._id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex space-x-1 bg-[#1A1A1A] rounded-xl p-1 mb-4 sm:mb-0",children:[e.jsxs("button",{onClick:()=>{u("services"),g(null),b(null)},className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-200 ${p==="services"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-[var(--color-primary)]"}`,children:[e.jsx(ys,{className:"w-4 h-4 inline mr-2"}),"Services"]}),e.jsxs("button",{onClick:()=>{u("products"),g(null),b(null)},className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-200 ${p==="products"?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-[var(--color-primary)]"}`,children:[e.jsx(Aa,{className:"w-4 h-4 inline mr-2"}),"Products"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-400 font-medium",children:"View:"}),e.jsxs("div",{className:"flex space-x-1 bg-[#1A1A1A] rounded-lg p-1",children:[e.jsx("button",{onClick:()=>B("card"),className:`p-2 rounded-md transition-all duration-200 ${w==="card"?"bg-[var(--color-primary)] text-white":"text-gray-400 hover:text-[var(--color-primary)]"}`,title:"Card View",children:e.jsx(vm,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>B("table"),className:`p-2 rounded-md transition-all duration-200 ${w==="table"?"bg-[var(--color-primary)] text-white":"text-gray-400 hover:text-[var(--color-primary)]"}`,title:"Table View",children:e.jsx(eb,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:`Search ${p}...`,value:m,onChange:V=>h(V.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",Jt+1,"-",Math.min(Ne,Pt.length)," of ",Pt.length," ",p]})]})]}),p==="services"&&e.jsx("div",{className:"mb-6 space-y-3",children:["Haircut","Package","Other Services"].map(V=>{const se=ue[V]||[],ke=Ie(se);if(ke.length===0)return null;const Re=y===V;return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]",children:[e.jsxs("button",{onClick:()=>b(Re?null:V),className:"w-full text-left px-4 py-3 flex justify-between items-center text-white font-semibold hover:bg-[#222222] transition-colors rounded-lg",children:[e.jsx("span",{className:"text-sm",children:V}),e.jsx("span",{className:"text-lg text-gray-400",children:Re?"":"+"})]}),Re&&e.jsx("div",{className:"p-4",children:w==="card"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ke.map(ze=>e.jsxs("button",{onClick:()=>yt(ze),className:"p-4 bg-[#1A1A1A] border border-[#555555] rounded-xl hover:border-[var(--color-primary)] hover:bg-[var(--color-primary)]/5 transition-all duration-200 text-left group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-white group-hover:text-[var(--color-primary)]",children:ze.name}),e.jsx(cs,{className:"w-4 h-4 text-gray-400 group-hover:text-[var(--color-primary)]"})]}),ze.description&&e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:ze.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-[var(--color-primary)]",children:["",ze.price]}),ze.duration_minutes&&e.jsxs("span",{className:"text-xs text-gray-500",children:[ze.duration_minutes," min"]})]})]},ze._id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-[#1A1A1A] rounded-xl border border-[#555555]",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Action"})]})}),e.jsx("tbody",{children:ke.map(ze=>e.jsxs("tr",{className:"hover:bg-[#333333] transition-colors border-b border-[#444444] last:border-b-0",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-white",children:ze.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400 max-w-xs truncate",children:ze.description||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-[var(--color-primary)]",children:["",ze.price]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-500",children:[ze.duration_minutes||"-"," min"]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("button",{onClick:()=>yt(ze),className:"px-3 py-1 bg-[var(--color-primary)] text-white text-sm rounded-lg hover:brightness-90 transition-colors flex items-center justify-center space-x-1 mx-auto",children:[e.jsx(cs,{className:"w-3 h-3"}),e.jsx("span",{children:"Add"})]})})]},ze._id))})]})})})]},V)})}),p==="products"&&(w==="card"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Ye.map(V=>e.jsxs("button",{onClick:()=>bt(V),className:"p-4 bg-[#1A1A1A] border border-[#555555] rounded-xl hover:border-[var(--color-primary)] hover:bg-[var(--color-primary)]/5 transition-all duration-200 text-left group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-white group-hover:text-[var(--color-primary)]",children:V.name}),e.jsx(cs,{className:"w-4 h-4 text-gray-400 group-hover:text-[var(--color-primary)]"})]}),V.description&&e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:V.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-[var(--color-primary)]",children:["",V.price]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Stock: ",V.stock]})]})]},V._id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-[#1A1A1A] rounded-xl border border-[#555555]",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Price"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Action"})]})}),e.jsx("tbody",{children:Ye.map(V=>e.jsxs("tr",{className:"hover:bg-[#333333] transition-colors border-b border-[#444444] last:border-b-0",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-white",children:V.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400 max-w-xs truncate",children:V.description||"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-[var(--color-primary)]",children:["",V.price]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:V.stock}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("button",{onClick:()=>bt(V),className:"px-3 py-1 bg-[var(--color-primary)] text-white text-sm rounded-lg hover:brightness-90 transition-colors flex items-center justify-center space-x-1 mx-auto",children:[e.jsx(cs,{className:"w-3 h-3"}),e.jsx("span",{children:"Add"})]})})]},V._id))})]})})),St>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Page ",S," of ",St]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ge(S-1),disabled:S===1,className:"p-2 bg-[#1A1A1A] border border-[#555555] text-gray-400 rounded-lg hover:bg-[#333333] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Xa,{className:"w-4 h-4"})}),Array.from({length:Math.min(5,St)},(V,se)=>{let ke;return St<=5||S<=3?ke=se+1:S>=St-2?ke=St-4+se:ke=S-2+se,e.jsx("button",{onClick:()=>Ge(ke),className:`px-3 py-2 text-sm rounded-lg transition-colors ${S===ke?"bg-[var(--color-primary)] text-white":"bg-[#1A1A1A] border border-[#555555] text-gray-400 hover:bg-[#333333] hover:text-white"}`,children:ke},ke)}),e.jsx("button",{onClick:()=>Ge(S+1),disabled:S===St,className:"p-2 bg-[#1A1A1A] border border-[#555555] text-gray-400 rounded-lg hover:bg-[#333333] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(sr,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Customer"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>d("scanner"),className:"p-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors border border-blue-500/30",title:"Scan QR",children:e.jsx(rr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>d("customerSelection"),className:"p-2 bg-[var(--color-primary)]/20 text-[var(--color-primary)] rounded-lg hover:bg-[var(--color-primary)]/30 transition-colors border border-[var(--color-primary)]/30",title:"Select Customer",children:e.jsx(tt,{className:"w-4 h-4"})})]})]}),i.customer?e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-lg border border-green-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/30 rounded-lg flex items-center justify-center border border-green-500/40",children:e.jsx(tt,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:i.customer.username}),e.jsx("p",{className:"text-sm text-gray-400",children:i.customer.email}),i.customer.mobile_number&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer.mobile_number})]})]}),e.jsx("button",{onClick:()=>o(V=>({...V,customer:null,customer_name:"",customer_phone:"",customer_email:""})),className:"text-red-400 hover:text-red-300 transition-colors",title:"Remove Customer",children:e.jsx(js,{className:"w-4 h-4"})})]})}):i.customer_name!==void 0&&i.customer_name!==null?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-lg border border-blue-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/30 rounded-lg flex items-center justify-center border border-blue-500/40",children:e.jsx(zr,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:i.customer_name&&i.customer_name.trim()||"Walk-in Customer"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Walk-in Customer"}),i.customer_phone&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer_phone}),i.customer_email&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer_email})]})]}),e.jsx("button",{onClick:()=>o(V=>({...V,customer:null,customer_name:null,customer_phone:"",customer_email:""})),className:"text-red-400 hover:text-red-300 transition-colors",title:"Remove Customer",children:e.jsx(js,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Enter customer full name",value:i.customer_name||"",onChange:V=>o(se=>({...se,customer_name:V.target.value})),className:"px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",required:!0,autoFocus:!0}),e.jsx("input",{type:"tel",placeholder:"Phone Number",value:i.customer_phone,onChange:V=>o(se=>({...se,customer_phone:V.target.value})),className:"px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"}),e.jsx("input",{type:"email",placeholder:"Email Address (for account creation)",value:i.customer_email,onChange:V=>o(se=>({...se,customer_email:V.target.value})),className:"px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]"})]}),i.customer_email&&i.customer_email.trim()!==""&&i.customer_email.includes("@")&&e.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:e.jsxs("p",{className:"text-xs text-green-400 font-medium flex items-center",children:[e.jsx(Je,{className:"w-3 h-3 mr-1"}),"Customer account will be created automatically"]})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>d("customerSelection"),className:"w-full p-4 border-2 border-dashed border-[#555555] rounded-lg hover:border-[var(--color-primary)] hover:bg-[var(--color-primary)]/10 transition-all duration-200 flex items-center justify-center space-x-2 text-gray-400 hover:text-[var(--color-primary)]",children:[e.jsx(tt,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Select Existing Customer"})]}),e.jsx("div",{className:"text-center text-gray-500 text-sm",children:"or"}),e.jsxs("button",{onClick:()=>o(V=>({...V,customer:null,customer_name:"",customer_phone:"",customer_email:""})),className:"w-full p-4 border-2 border-dashed border-blue-500/30 rounded-lg hover:border-blue-500 hover:bg-blue-500/10 transition-all duration-200 flex items-center justify-center space-x-2 text-blue-400 hover:text-blue-300",children:[e.jsx(zr,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Add Walk-in Customer"})]})]})]}),k&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center",children:[e.jsx(ya,{className:"w-5 h-5 mr-2 text-[var(--color-primary)]"}),"Booking Information"]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl shadow-lg border border-[#444444]/50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 rounded-lg flex items-center justify-center border-2 border-[var(--color-primary)]/30",children:e.jsx(ya,{className:"w-5 h-5 text-[var(--color-primary)]"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-white text-base",children:["#",k.booking_code]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Processing payment"}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-medium text-green-400",children:"Active"})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsxs("div",{className:"inline-flex items-center px-2 py-1 bg-[var(--color-primary)]/20 border border-[var(--color-primary)]/30 rounded-md",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[var(--color-primary)] rounded-full animate-pulse mr-1.5"}),e.jsx("span",{className:"text-xs font-medium text-[var(--color-primary)]",children:"Processing"})]}),e.jsxs("button",{onClick:be,className:"inline-flex items-center px-2 py-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 hover:border-red-500/50 rounded-lg transition-all duration-200 font-medium text-xs",title:"Cancel booking attachment",children:[e.jsx(Ze,{className:"w-3 h-3 mr-1"}),"Cancel"]})]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Order Summary"}),(i.services.length>0||i.products.length>0)&&e.jsx("button",{onClick:We,className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors border border-red-500/30",title:"Clear All",children:e.jsx(js,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto custom-scrollbar",children:[i.services.map((V,se)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1A1A1A] rounded-lg border border-[#555555]/30",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-white",children:V.service_name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["",V.price," each"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ee("services",se,-1),className:"w-6 h-6 bg-[#444444] border border-[#555555] rounded-full flex items-center justify-center hover:bg-[#555555] transition-colors",children:e.jsx(Eu,{className:"w-3 h-3 text-gray-300"})}),e.jsx("span",{className:"w-8 text-center font-semibold text-white",children:V.quantity}),e.jsx("button",{onClick:()=>Ee("services",se,1),className:"w-6 h-6 bg-[var(--color-primary)] rounded-full flex items-center justify-center hover:bg-[var(--color-accent)] text-white transition-colors",children:e.jsx(cs,{className:"w-3 h-3"})})]})]},`service-${se}`)),i.products.map((V,se)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-white",children:V.product_name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["",V.price," each"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ee("products",se,-1),className:"w-6 h-6 bg-[#444444] border border-[#555555] rounded-full flex items-center justify-center hover:bg-[#555555] transition-colors",children:e.jsx(Eu,{className:"w-3 h-3 text-gray-300"})}),e.jsx("span",{className:"w-8 text-center font-semibold text-white",children:V.quantity}),e.jsx("button",{onClick:()=>Ee("products",se,1),className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center hover:bg-blue-600 text-white transition-colors",children:e.jsx(cs,{className:"w-3 h-3"})})]})]},`product-${se}`)),i.services.length===0&&i.products.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Eo,{className:"w-8 h-8 mx-auto mb-2 opacity-50 text-gray-400"}),e.jsx("p",{className:"text-gray-400",children:"No items added yet"})]})]})]}),s&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center",children:[e.jsx(ys,{className:"w-5 h-5 mr-2 text-[var(--color-primary)]"}),"Selected Barber"]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl shadow-lg border border-[#444444]/50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[var(--color-primary)]/30",children:e.jsx(Mu,{barber:s,className:"w-10 h-10"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-base",children:s.full_name}),e.jsx("p",{className:"text-xs text-gray-400",children:"Selected barber"})]})]}),e.jsxs("button",{onClick:()=>n(null),className:"inline-flex items-center px-2 py-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 hover:border-red-500/50 rounded-lg transition-all duration-200 font-medium text-xs",title:"Remove barber",children:[e.jsx(Ze,{className:"w-3 h-3 mr-1"}),"Remove"]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Payment"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-gray-400",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{className:"text-white",children:["",i.subtotal.toFixed(2)]})]}),i.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-400",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",i.discount_amount.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-[#555555] pt-2",children:e.jsxs("div",{className:"flex justify-between text-xl font-bold text-white",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["",i.total_amount.toFixed(2)]})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Payment Method"}),e.jsxs("select",{value:j,onChange:V=>N(V.target.value),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]",children:[e.jsx("option",{value:"cash",className:"bg-[#1A1A1A] text-white",children:"Cash"}),e.jsx("option",{value:"card",className:"bg-[#1A1A1A] text-white",children:"Card"}),e.jsx("option",{value:"digital_wallet",className:"bg-[#1A1A1A] text-white",children:"Digital Wallet"}),e.jsx("option",{value:"bank_transfer",className:"bg-[#1A1A1A] text-white",children:"Bank Transfer"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:Qe,disabled:!s||i.services.length===0&&i.products.length===0,className:"w-full py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white font-bold rounded-xl hover:from-[var(--color-accent)] hover:to-[var(--color-accent)] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg",children:[e.jsx(ds,{className:"w-5 h-5"}),e.jsx("span",{children:"Process Payment"})]}),e.jsxs("button",{onClick:()=>L({show:!0,title:"Coming Soon",message:"Receipt printing functionality is coming soon!",type:"warning"}),className:"w-full py-2 border border-[#555555] text-gray-300 font-semibold rounded-xl hover:bg-[var(--color-primary)]/10 hover:border-[var(--color-primary)] hover:text-[var(--color-primary)] transition-colors flex items-center justify-center space-x-2",children:[e.jsx(ya,{className:"w-4 h-4"}),e.jsx("span",{children:"Print Receipt"})]})]})]})]})]})}),c==="scanner"&&e.jsx(fj,{isOpen:!0,onClose:()=>d(null),onVoucherScanned:K,onBookingScanned:V=>{V.customer&&o(se=>({...se,customer:V.customer})),d(null)}}),c==="customerSelection"&&e.jsx(e4,{isOpen:!0,onClose:()=>d(null),onCustomerSelected:Bt,onScanQR:()=>d("scanner"),onAddNewCustomer:()=>d("addCustomer")}),c==="addCustomer"&&e.jsx(gj,{isOpen:!0,onClose:()=>d("customerSelection"),onCustomerAdded:V=>{o(se=>({...se,customer:V})),d(null)}}),c==="paymentConfirmation"&&e.jsx(Zj,{isOpen:!0,onClose:()=>d(null),onConfirm:wt,transactionData:{subtotal:i.subtotal,discount_amount:i.discount_amount,tax_amount:i.tax_amount,total_amount:i.total_amount,services:i.services,products:i.products},paymentMethod:j,setPaymentMethod:N}),c==="receipt"&&M&&e.jsx(t4,{isOpen:!0,onClose:()=>{d(null),P(null)},transactionData:M,branchInfo:$,staffInfo:t}),c==="paymentSuccess"&&e.jsx(ns,{isOpen:!0,onClose:()=>{},title:"Payment Successful",size:"sm",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Je,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i.services.length>0?`Transaction completed! ${i.services.length} service${i.services.length>1?"s":""} recorded as completed booking${i.services.length>1?"s":""}.`:"Transaction completed successfully!"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",i.total_amount.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:i.services.length>0?"Receipt generated and bookings updated automatically":"Receipt will be generated automatically"})]})}),c==="cancelBooking"&&e.jsx(ns,{isOpen:!0,onClose:()=>d(null),title:"Cancel Booking",size:"sm",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500/20 to-red-600/20 rounded-full flex items-center justify-center mx-auto mb-3 border-2 border-red-500/30",children:e.jsx(Ze,{className:"w-6 h-6 text-red-400"})}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:["Cancel Booking #",k?.booking_code,"?"]}),e.jsx("p",{className:"text-red-700 text-sm mb-4 px-2",children:"This will detach the booking and convert to a regular POS transaction."}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>d(null),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-all duration-200 text-sm",children:"Keep"}),e.jsx("button",{onClick:Be,className:"flex-1 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-medium rounded-lg transition-all duration-200 text-sm",children:"Cancel"})]})]})}),T.show&&e.jsx(ns,{isOpen:!0,onClose:()=>L({show:!1,title:"",message:"",type:"warning"}),title:T.title,size:"sm",children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border-2 ${T.type==="error"?"bg-red-500/20 border-red-500/30":T.type==="success"?"bg-green-500/20 border-green-500/30":"bg-yellow-500/20 border-yellow-500/30"}`,children:e.jsx(Xe,{className:`w-8 h-8 ${T.type==="error"?"text-red-500":T.type==="success"?"text-green-500":"text-yellow-500"}`})}),e.jsx("p",{className:"text-gray-700 mb-6 text-base",children:T.message}),e.jsx("button",{onClick:()=>L({show:!1,title:"",message:"",type:"warning"}),className:`w-full px-6 py-3 text-white font-medium rounded-lg transition-all duration-200 ${T.type==="error"?"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700":T.type==="success"?"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700":"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700"}`,children:"OK"})]})}),c==="customerCreated"&&D&&e.jsx(ns,{isOpen:!0,onClose:()=>{d(null),F(null)},title:"Customer Account Created",size:"md",children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-green-500/30",children:e.jsx(Je,{className:"w-8 h-8 text-green-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Customer Account Created Successfully!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please provide the following login credentials to the customer:"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address:"}),e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-md px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900",children:D.email}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(D.email),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Copy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temporary Password:"}),e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-md px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900",children:D.password}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(D.password),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Copy"})]})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Important:"})," The customer should change their password after first login for security."]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:" Welcome Email:"})," A welcome email with login instructions has been sent to the customer's email address."]})}),e.jsx("button",{onClick:()=>{d(null),F(null)},className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium rounded-lg transition-all duration-200",children:"Continue with Transaction"})]})})]})},JR=({onLogout:t})=>{const{user:s}=Dt(),{branding:n}=Ts(),[i,o]=C.useState(!1),c=me(H.services.branches.getAllBranches)||[];me(H.services.auth.getAllUsers);const d=c.filter(m=>m.is_active).length;return e.jsxs("div",{className:"relative bg-[#050505] border-b border-[#1A1A1A]/30 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-[0.02]",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.2)"}})}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-2.5 lg:py-3 gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0 flex-1",children:[e.jsx("img",{src:n?.logo_light_url,alt:n?.display_name||"Logo",className:"w-9 h-9 sm:w-11 sm:h-11 object-contain flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[e.jsxs("h1",{className:"text-xs sm:text-lg font-bold text-[var(--color-primary)] tracking-tight truncate",children:[e.jsx("span",{className:"hidden sm:inline",children:n?.display_name||""}),e.jsx("span",{className:"sm:hidden",children:n?.display_name||""})]}),e.jsx("div",{className:"bg-[var(--color-primary)]/15 backdrop-blur-sm rounded-md px-1.5 py-0.5 border border-[var(--color-primary)]/25 flex-shrink-0",children:e.jsx("span",{className:"text-[10px] font-semibold text-[var(--color-primary)]",children:"v8.1.2"})})]}),e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-1.5 mt-0.5",children:[e.jsx("p",{className:"text-[10px] sm:text-xs font-medium text-[var(--color-primary)]",children:"Admin Dashboard"}),e.jsx("span",{className:"text-gray-600 text-xs hidden sm:inline",children:""}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-1",children:[e.jsx(Ja,{className:"w-2.5 h-2.5 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-[10px] font-medium text-gray-400",children:"Super Administrator"})]})]})]})]}),e.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[e.jsx("div",{className:"bg-[var(--color-primary)]/10 backdrop-blur-sm rounded-lg px-3 py-1.5 border border-[var(--color-primary)]/20",children:e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx(Gs,{className:"w-3 h-3 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:d}),e.jsx("span",{className:"text-xs text-gray-400",children:"Branches"})]})}),e.jsx("div",{className:"bg-green-500/10 backdrop-blur-sm rounded-lg px-3 py-1.5 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:"Online"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"hidden lg:block text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-white",children:["Welcome back, ",s?.username||"Admin"]}),e.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsx("div",{className:"flex items-center space-x-1 sm:space-x-1.5",children:e.jsx("button",{onClick:()=>o(!0),className:"w-7 h-7 sm:w-9 sm:h-9 bg-red-500/15 backdrop-blur-sm rounded-lg flex items-center justify-center hover:bg-red-500/25 transition-all duration-200 border border-red-500/25 group",title:"Logout",children:e.jsx(Mn,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-red-400 group-hover:text-red-300 transition-colors duration-200"})})})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 z-[10000] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>o(!1)}),e.jsx("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10001] border border-[#444444]/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(Mn,{className:"h-5 w-5 text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Confirm Logout"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to logout? You will need to sign in again to access the admin dashboard."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{o(!1),t()},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Logout"})]})]})})]})})]})},GR=({stats:t})=>{const s=n=>({building:Gs,users:hs,calendar:rt,dollar:as,user:tt,scissors:ys,trending:wr,activity:Qa})[n]||Qa;return t?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:t.map((n,i)=>{const o=s(n.icon);return e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02]",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-1 truncate",children:n.label}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:n.value}),n.subtext&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:n.subtext})]}),e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center flex-shrink-0",children:e.jsx(o,{className:"h-5 w-5 text-[var(--color-primary)]"})})]})},i)})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[...Array(6)].map((n,i)=>e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#2A2A2A]/50 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-600 rounded w-16"}),e.jsx("div",{className:"h-6 bg-gray-600 rounded w-12"})]}),e.jsx("div",{className:"w-10 h-10 bg-gray-600 rounded-lg flex-shrink-0"})]})},i))})},YR=({activities:t=[]})=>{const s=[{id:1,type:"branch_created",title:"New Branch Created",description:"Downtown Branch was created by admin",timestamp:new Date(Date.now()-18e5),icon:Gs,color:"text-blue-400"},{id:2,type:"user_registered",title:"New User Registered",description:"Branch admin account created for John Doe",timestamp:new Date(Date.now()-72e5),icon:tt,color:"text-green-400"},{id:3,type:"system_alert",title:"System Maintenance",description:"Scheduled maintenance completed successfully",timestamp:new Date(Date.now()-216e5),icon:Xe,color:"text-orange-400"}],n=t.length>0?t:s,i=o=>{const d=new Date-o,m=Math.floor(d/(1e3*60)),h=Math.floor(d/(1e3*60*60)),p=Math.floor(d/(1e3*60*60*24));return p>0?`${p}d ago`:h>0?`${h}h ago`:m>0?`${m}m ago`:"Just now"};return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg flex items-center justify-center",children:e.jsx(Qa,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Latest system events"})]})]})}),e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Qa,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-400 mb-2",children:"No Recent Activity"}),e.jsx("p",{className:"text-sm text-gray-500",children:"System events will appear here"})]}):n.slice(0,5).map(o=>{const c=o.icon;return e.jsxs("div",{className:"group flex items-start space-x-4 p-4 bg-[#1A1A1A]/50 rounded-xl border border-[#444444]/30 hover:border-[var(--color-primary)]/30 transition-all duration-200 hover:bg-[#1A1A1A]/80",children:[e.jsx("div",{className:"w-10 h-10 bg-[#333333] rounded-lg flex items-center justify-center group-hover:bg-[#444444] transition-colors flex-shrink-0",children:e.jsx(c,{className:`w-5 h-5 ${o.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-white font-medium text-sm group-hover:text-[var(--color-primary)] transition-colors",children:o.title}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-xs",children:[e.jsx(Nt,{className:"w-3 h-3"}),e.jsx("span",{children:i(o.timestamp)})]})]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1 leading-relaxed",children:o.description})]})]},o.id)})})]})},QR=({tabs:t,activeTab:s,onTabChange:n})=>{const[i,o]=C.useState(!1),c=C.useRef(null);C.useEffect(()=>{const h=p=>{c.current&&!c.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const d=h=>({overview:am,branches:Gs,users:hs,reports:ja,settings:Lr,branding:r0,emails:Ht})[h]||am,m=h=>{n(h),o(!1)};return e.jsxs("div",{className:"bg-gradient-to-r from-[#1E1E1E] to-[#2A2A2A] backdrop-blur-sm border border-[#333333]/50 rounded-2xl shadow-xl shadow-black/20 overflow-visible relative z-50",children:[e.jsx("nav",{className:"hidden lg:flex items-center justify-center p-2",children:e.jsxs("div",{className:"flex items-center space-x-1 bg-[#333333]/30 rounded-xl p-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-3",children:[e.jsx(Ja,{className:"w-5 h-5 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-[var(--color-primary)] font-semibold text-sm",children:"ADMIN"})]}),e.jsx("div",{className:"w-px h-8 bg-[#444444]"}),t.map(h=>{const p=d(h.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>m(h.id),className:`relative flex items-center space-x-3 px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-300 group min-w-0 ${s===h.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg shadow-[var(--color-primary)]/25 transform scale-105":"text-gray-300 hover:text-white hover:bg-[#444444]/50 hover:shadow-sm"}`,children:[s===h.id&&e.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),e.jsx("div",{className:`flex items-center justify-center w-5 h-5 transition-all duration-200 ${s===h.id?"text-white":"text-gray-400 group-hover:text-[var(--color-primary)]"}`,children:e.jsx(p,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold whitespace-nowrap",children:h.label})]})},h.id)})]})}),e.jsx("nav",{className:"lg:hidden",children:e.jsxs("div",{className:"flex flex-wrap gap-1 p-2 justify-center",children:[e.jsx("div",{className:"w-full flex justify-center mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 border border-[var(--color-primary)]/30 rounded-full px-4 py-2",children:[e.jsx(Ja,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-[var(--color-primary)] font-semibold text-xs",children:"ADMIN PANEL"})]})}),t.map(h=>{const p=d(h.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>m(h.id),className:`flex flex-col items-center justify-center px-3 py-3 rounded-lg font-medium text-xs transition-all duration-200 whitespace-nowrap relative flex-shrink-0 ${s===h.id?"bg-gradient-to-b from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#333333]/50"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-6 h-6 mb-1 transition-all duration-200 ${s===h.id?"text-white":"text-gray-500"}`,children:e.jsx(p,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold text-[10px]",children:h.label}),s===h.id&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]})},h.id)})]})}),e.jsx("nav",{className:"hidden md:flex lg:hidden items-center justify-center p-2",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-[#333333]/30 rounded-xl p-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2",children:[e.jsx(Ja,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-[var(--color-primary)] font-semibold text-xs",children:"ADMIN"})]}),e.jsx("div",{className:"w-px h-6 bg-[#444444]"}),t.map(h=>{const p=d(h.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>m(h.id),className:`flex items-center space-x-2 px-3 py-2.5 rounded-lg font-semibold text-sm transition-all duration-300 whitespace-nowrap relative ${s===h.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#444444]/50"}`,children:[e.jsx(p,{className:"w-4 h-4"}),e.jsx("span",{children:h.label})]})},h.id)})]})})]})},BA=({isOpen:t,onClose:s,title:n,onSubmit:i,formData:o,onInputChange:c,error:d,loading:m,isEdit:h=!1})=>t?Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10000] border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:n}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(Ze,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[d&&e.jsxs("div",{className:"mb-4 p-3 bg-red-400/20 border border-red-400/30 rounded-lg flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-400",children:d})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Branch Name *"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:c,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",placeholder:"Enter branch name",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Address *"}),e.jsx("textarea",{name:"address",value:o.address,onChange:c,rows:"3",className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",placeholder:"Enter branch address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:c,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",placeholder:"Enter phone number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:c,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{className:"border-t border-[#444444]/30 pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Booking Hours"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time"}),e.jsx("select",{name:"booking_start_hour",value:o.booking_start_hour??10,onChange:c,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:Array.from({length:24},(p,u)=>e.jsx("option",{value:u,children:u===0?"12:00 AM":u<12?`${u}:00 AM`:u===12?"12:00 PM":`${u-12}:00 PM`},u))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Time"}),e.jsx("select",{name:"booking_end_hour",value:o.booking_end_hour??20,onChange:c,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:Array.from({length:24},(p,u)=>e.jsx("option",{value:u,children:u===0?"12:00 AM":u<12?`${u}:00 AM`:u===12?"12:00 PM":`${u-12}:00 PM`},u))})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-400",children:"Set the available booking time range for this branch (default: 10:00 AM - 8:00 PM)"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(qr,{className:"h-4 w-4"}),e.jsx("span",{children:m?"Saving...":h?"Update Branch":"Create Branch"})]})]})]})]})]})]})}),document.body):null;function WR(){const[t,s]=C.useState(""),[n,i]=C.useState("all"),[o,c]=C.useState("name"),[d,m]=C.useState(!1),[h,p]=C.useState(null),[u,f]=C.useState(!1),[g,y]=C.useState({name:"",address:"",phone:"",email:"",booking_start_hour:10,booking_end_hour:20}),[b,j]=C.useState(!1),[N,w]=C.useState(""),B=me(H.services.branches.getAllBranches)||[],S=De(H.services.branches.createBranch),_=De(H.services.branches.updateBranch),k=De(H.services.branches.toggleBranchStatus),E=O=>O?{label:"Active",icon:Je,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"}:{label:"Inactive",icon:xs,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"},D=B.filter(O=>{const G=O.name.toLowerCase().includes(t.toLowerCase())||O.branch_code.toLowerCase().includes(t.toLowerCase())||O.address.toLowerCase().includes(t.toLowerCase()),te=n==="all"||n==="active"&&O.is_active||n==="inactive"&&!O.is_active;return G&&te}).sort((O,G)=>o==="name"?O.name.localeCompare(G.name):o==="code"?O.branch_code.localeCompare(G.branch_code):o==="status"?G.is_active-O.is_active:new Date(G.createdAt)-new Date(O.createdAt)),F={total:B.length,active:B.filter(O=>O.is_active).length,inactive:B.filter(O=>!O.is_active).length,recent:B.filter(O=>{const G=new Date(O.createdAt),te=new Date;return te.setDate(te.getDate()-7),G>=te}).length},M=()=>{y({name:"",address:"",phone:"",email:"",booking_start_hour:10,booking_end_hour:20}),w("")},P=()=>{M(),m(!0)},T=O=>{p(O),y({name:O.name,address:O.address,phone:O.phone,email:O.email,booking_start_hour:O.booking_start_hour??10,booking_end_hour:O.booking_end_hour??20}),f(!0)},L=async O=>{if(O.preventDefault(),!g.name.trim()||!g.address.trim()||!g.phone.trim()||!g.email.trim()){w("All fields are required");return}j(!0),w("");try{await S(g),m(!1),M()}catch(G){console.error("Error creating branch:",G);const te=Yu(G);w(te.details||te.message||"Failed to create branch")}finally{j(!1)}},X=async O=>{if(O.preventDefault(),!g.name.trim()||!g.address.trim()||!g.phone.trim()||!g.email.trim()){w("All fields are required");return}j(!0),w("");try{await _({id:h._id,...g}),f(!1),p(null),M()}catch(G){console.error("Error updating branch:",G);const te=Yu(G);w(te.details||te.message||"Failed to update branch")}finally{j(!1)}},Z=async O=>{j(!0),w("");try{await k({id:O})}catch(G){console.error("Error toggling branch status:",G);const te=Yu(G);w(te.details||te.message||"Failed to update branch status")}finally{j(!1)}},ne=O=>{const{name:G,value:te}=O.target,ee=["booking_start_hour","booking_end_hour"].includes(G)?Number(te):te;y(le=>({...le,[G]:ee}))},I=O=>new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return B?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Branches"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:F.total})]}),e.jsx(Gs,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:F.active})]}),e.jsx(Je,{className:"h-8 w-8 text-green-400 opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:F.inactive})]}),e.jsx(xs,{className:"h-8 w-8 text-red-400 opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Recent"}),e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:F.recent})]}),e.jsx(rt,{className:"h-8 w-8 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search branches...",value:t,onChange:O=>s(O.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:n,onChange:O=>i(O.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("select",{value:o,onChange:O=>c(O.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"code",children:"Sort by Code"}),e.jsx("option",{value:"status",children:"Sort by Status"}),e.jsx("option",{value:"date",children:"Sort by Date"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:[e.jsx(Ro,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:P,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm",children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx("span",{children:"New Branch"})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact Info"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:D.map(O=>{const G=E(O.is_active),te=G.icon;return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(Gs,{className:"h-5 w-5 text-[var(--color-primary)]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:O.name}),e.jsxs("div",{className:"text-sm font-mono text-gray-400",children:["#",O.branch_code]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-white",children:[e.jsx(yi,{className:"h-3 w-3 text-gray-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:O.address})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Er,{className:"h-3 w-3 text-gray-500 mr-2 flex-shrink-0"}),e.jsx("span",{children:O.phone})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Ht,{className:"h-3 w-3 text-gray-500 mr-2 flex-shrink-0"}),e.jsx("span",{children:O.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G.bg} ${G.text}`,children:[e.jsx(te,{className:`-ml-0.5 mr-1.5 h-3 w-3 ${G.iconColor}`}),G.label]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:I(O.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>Z(O._id),className:`inline-flex items-center px-2.5 py-1.5 border text-xs font-medium rounded transition-colors ${O.is_active?"border-red-500/30 text-red-400 bg-red-400/20 hover:bg-red-400/30":"border-green-500/30 text-green-400 bg-green-400/20 hover:bg-green-400/30"}`,disabled:b,children:O.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>T(O),className:"text-blue-400 hover:text-blue-300",disabled:b,children:e.jsx(sa,{className:"h-4 w-4"})})]})})]},O._id)})})]})}),D.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gs,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No branches found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:t||n!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new branch."}),!t&&n==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:P,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110",children:[e.jsx(cs,{className:"-ml-1 mr-2 h-4 w-4"}),"New Branch"]})})]})]}),e.jsx(BA,{isOpen:d,onClose:()=>{m(!1),M()},title:"Create New Branch",onSubmit:L,formData:g,onInputChange:ne,error:N,loading:b}),e.jsx(BA,{isOpen:u,onClose:()=>{f(!1),p(null),M()},title:"Edit Branch",onSubmit:X,formData:g,onInputChange:ne,error:N,loading:b,isEdit:!0})]}):e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading branches..."})]})}function KR(){const[t,s]=C.useState(""),[n,i]=C.useState("all"),[o,c]=C.useState("all"),[d,m]=C.useState(!1),[h,p]=C.useState(null),[u,f]=C.useState(!1),[g,y]=C.useState({username:"",email:"",password:"",mobile_number:"",address:"",role:"branch_admin",branch_id:"",page_access:[]}),[b,j]=C.useState(!1),[N,w]=C.useState(""),[B,S]=C.useState(""),[_,k]=C.useState(!1),[E,D]=C.useState(null),F=me(H.services.auth.getAllUsers)||[],M=me(H.services.branches.getActiveBranches)||[],P=De(H.services.auth.createUser),T=De(H.services.auth.updateUser),L=J=>{switch(J){case"super_admin":return{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"};case"branch_admin":return{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"};case"staff":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"};case"barber":return{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"};case"customer":return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}}},X=F.filter(J=>J.role!=="customer"&&J.role!=="barber"),Z=X.filter(J=>{const $=J.username.toLowerCase().includes(t.toLowerCase())||J.email.toLowerCase().includes(t.toLowerCase()),Y=n==="all"||J.role===n,xe=o==="all"||J.branch_id===o;return $&&Y&&xe}).sort((J,$)=>new Date($.createdAt)-new Date(J.createdAt)),ne={total:X.length,superAdmins:X.filter(J=>J.role==="super_admin").length,branchAdmins:X.filter(J=>J.role==="branch_admin").length,staff:X.filter(J=>J.role==="staff").length},I=()=>{y({username:"",email:"",password:"",mobile_number:"",address:"",role:"branch_admin",branch_id:"",page_access:[]}),w(""),S("")},O=()=>{I(),p(null),m(!0)},G=J=>{p(J),y({username:J.username,email:J.email,password:"",mobile_number:J.mobile_number||"",address:J.address||"",role:J.role,branch_id:J.branch_id||"",page_access:J.page_access||[]}),f(!0)},te=async J=>{if(J.preventDefault(),!g.username.trim()||!g.email.trim()||!g.password.trim()){w("Username, email, and password are required");return}if(g.role!=="super_admin"&&!g.branch_id){w("Branch is required for all users except super admin");return}j(!0);try{await P({...g,branch_id:g.role==="super_admin"?void 0:g.branch_id}),m(!1),I()}catch($){console.error("Error creating user:",$);const Y=$?.message||"Failed to create user";w(Y)}finally{j(!1)}},Q=async J=>{if(J.preventDefault(),!h)return;if(w(""),!g.username.trim()||!g.email.trim()){w("Username and email are required");return}if(g.role!=="super_admin"&&!g.branch_id){w("Branch is required for all users except super admin");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)){w("Please enter a valid email address");return}if(g.username.length<3){w("Username must be at least 3 characters long");return}if(g.password.trim()){if(g.password.length<6){w("Password must be at least 6 characters long");return}if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(g.password)){w("Password must contain at least one uppercase letter, one lowercase letter, and one number");return}}const Y={userId:h._id,username:g.username.trim(),email:g.email.trim().toLowerCase(),mobile_number:g.mobile_number?.trim()||"",address:g.address?.trim()||"",role:g.role,branch_id:g.role==="super_admin"?void 0:g.branch_id,page_access:g.page_access};g.password.trim()&&(Y.password=g.password),D(Y),k(!0)},ee=async()=>{if(E){j(!0),k(!1);try{await T(E)&&(f(!1),p(null),I(),S("User updated successfully!"),setTimeout(()=>{S("")},3e3))}catch(J){console.error("Error updating user:",J);const $=J?.message||"Failed to update user. Please try again.";w($)}finally{j(!1),D(null)}}},le=J=>{const{name:$,value:Y}=J.target;y(xe=>({...xe,[$]:Y}))},R=J=>{const $=M.find(Y=>Y._id===J);return $?$.name:"N/A"},q=J=>new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return F?e.jsxs("div",{className:"space-y-6",children:[B&&e.jsxs("div",{className:"bg-green-400/20 border border-green-400/30 rounded-lg p-4 flex items-center space-x-2",children:[e.jsx(Je,{className:"h-5 w-5 text-green-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-green-400",children:B})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:ne.total})]}),e.jsx(hs,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Super Admin"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:ne.superAdmins})]}),e.jsx(Ni,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Branch Admin"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:ne.branchAdmins})]}),e.jsx(Gs,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Staff"}),e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:ne.staff})]}),e.jsx(tt,{className:"h-6 w-6 text-[var(--color-primary)] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:t,onChange:J=>s(J.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Za,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:n,onChange:J=>i(J.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"branch_admin",children:"Branch Admin"}),e.jsx("option",{value:"staff",children:"Staff"})]})]}),e.jsxs("select",{value:o,onChange:J=>c(J.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Branches"}),M.map(J=>e.jsx("option",{value:J._id,children:J.name},J._id))]})]}),e.jsxs("button",{onClick:O,className:"flex items-center space-x-2 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm",children:[e.jsx(zr,{className:"h-4 w-4"}),e.jsx("span",{children:"New User"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Role & Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:Z.map(J=>{const $=L(J.role);return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-[var(--color-primary)]/20 flex items-center justify-center",children:e.jsx(tt,{className:"h-5 w-5 text-[var(--color-primary)]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:J.username}),e.jsx("div",{className:"text-sm text-gray-400",children:J.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.bg} ${$.text}`,children:J.role.replace("_"," ").toUpperCase()}),J.branch_id&&e.jsx("div",{className:"text-xs text-gray-400",children:R(J.branch_id)})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:J.mobile_number||"N/A"}),J.address&&e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:J.address})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:q(J.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:e.jsx("button",{onClick:()=>G(J),className:"text-blue-400 hover:text-blue-300",title:"Edit user",children:e.jsx(sa,{className:"h-4 w-4"})})})})]},J._id)})})]})}),Z.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:t||n!=="all"||o!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new user."})]})]}),e.jsx(lm,{isOpen:d,onClose:()=>{m(!1),p(null),I()},title:"Create New User",buttonText:"Create User",loadingText:"Creating...",onSubmit:te,formData:g,onInputChange:le,error:N,loading:b,branches:M,isEditMode:!1}),e.jsx(lm,{isOpen:u,onClose:()=>{f(!1),p(null),I()},title:"Edit User",buttonText:"Update User",loadingText:"Updating...",onSubmit:Q,formData:g,onInputChange:le,error:N,loading:b,branches:M,isEditMode:!0}),_&&Ut.createPortal(e.jsx("div",{className:"fixed inset-0 z-[10001] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>k(!1)}),e.jsx("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10002] border border-[#444444]/50",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"h-5 w-5 text-yellow-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Confirm User Update"})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to update this user? This action will modify the user's information and cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ee,className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors",children:"Confirm Update"})]})]})})]})}),document.body)]}):e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading users..."})]})}const XR=({onRefresh:t})=>{const[s,n]=C.useState("month"),[i,o]=C.useState("all"),[c,d]=C.useState("overview"),m=me(H.services.branches.getAllBranches)||[],h=me(H.services.bookings.getAllBookings)||[],p=me(H.services.transactions.getAllTransactions)||[],u=me(H.services.auth.getAllUsers)||[],f=me(H.services.barbers.getAllBarbers)||[],g=me(H.services.services.getAllServices)||[],y=()=>{const P=new Date;let T=new Date;switch(s){case"week":T.setDate(P.getDate()-7);break;case"month":T.setMonth(P.getMonth()-1);break;case"quarter":T.setMonth(P.getMonth()-3);break;case"year":T.setFullYear(P.getFullYear()-1);break;default:T.setMonth(P.getMonth()-1)}return{startDate:T,endDate:P}},{startDate:b,endDate:j}=y(),N=P=>P.filter(T=>{const L=new Date(T.createdAt||T.date||T.started_at),X=i==="all"||T.branch_id===i,Z=L>=b&&L<=j;return X&&Z}),w=N(h),B=N(p),S=C.useMemo(()=>{const P=w.filter(Q=>Q.status==="completed").length,T=B.filter(Q=>Q.payment_status==="completed"),L=T.reduce((Q,ee)=>Q+ee.total_amount,0),X=w.filter(Q=>Q.status==="completed"&&Q.payment_status==="paid").reduce((Q,ee)=>Q+(ee.price||0),0),Z=T.length>0?L/T.length:0,ne=w.filter(Q=>Q.status==="pending"||Q.status==="booked").length,I=w.filter(Q=>Q.status==="cancelled").length,O=i==="all"?m.filter(Q=>Q.is_active):m.filter(Q=>Q._id===i&&Q.is_active),G=u.filter(Q=>Q.is_active&&Q.role==="staff"&&(i==="all"||Q.branch_id===i)).length,te=f.filter(Q=>Q.is_active&&(i==="all"||Q.branch_id===i)).length;return{totalRevenue:L,totalBookingRevenue:X,completedBookings:P,completedTransactions:T.length,averageTransactionValue:Z,pendingBookings:ne,cancelledBookings:I,activeBranches:O.length,activeStaff:G,activeBarbers:te}},[w,B,i,m,u,f]),_=C.useMemo(()=>{const P={};return B.forEach(T=>{T.barber&&(P[T.barber]||(P[T.barber]={revenue:0,transactions:0}),P[T.barber].revenue+=T.total_amount,P[T.barber].transactions+=1)}),w.forEach(T=>{T.barber&&T.status==="completed"&&(P[T.barber]||(P[T.barber]={revenue:0,transactions:0}),P[T.barber].revenue+=T.price||0,P[T.barber].transactions+=1)}),Object.entries(P).map(([T,L])=>({barberId:T,barber:f.find(X=>X._id===T),...L})).sort((T,L)=>L.revenue-T.revenue).slice(0,5)},[B,w,f]),k=C.useMemo(()=>{const P={};return w.forEach(T=>{T.service&&T.status==="completed"&&(P[T.service]||(P[T.service]={count:0,revenue:0}),P[T.service].count+=1,P[T.service].revenue+=T.price||0)}),Object.entries(P).map(([T,L])=>({serviceId:T,service:g.find(X=>X._id===T),...L})).sort((T,L)=>L.revenue-T.revenue).slice(0,5)},[w,g]),E=C.useMemo(()=>{const P={};return m.forEach(T=>{P[T._id]={branch:T,bookings:0,revenue:0,transactions:0,activeStaff:0,activeBarbers:0}}),w.forEach(T=>{P[T.branch_id]&&(P[T.branch_id].bookings+=1,T.status==="completed"&&(P[T.branch_id].revenue+=T.price||0))}),B.forEach(T=>{P[T.branch_id]&&(P[T.branch_id].transactions+=1,P[T.branch_id].revenue+=T.total_amount)}),u.forEach(T=>{T.is_active&&(T.role==="staff"||T.role==="branch_admin")&&T.branch_id&&P[T.branch_id]&&(P[T.branch_id].activeStaff+=1)}),f.forEach(T=>{T.is_active&&P[T.branch_id]&&(P[T.branch_id].activeBarbers+=1)}),Object.values(P).sort((T,L)=>L.revenue-T.revenue)},[m,w,B,u,f]),D=()=>{const P={period:s,branch:i==="all"?"All Branches":m.find(ne=>ne._id===i)?.name,generatedAt:new Date().toISOString(),stats:S,topBarbers:_.map(ne=>({barber:ne.barber?.full_name,revenue:ne.revenue,transactions:ne.transactions})),topServices:k.map(ne=>({service:ne.service?.name,count:ne.count,revenue:ne.revenue})),branchPerformance:E.map(ne=>({branch:ne.branch?.name,bookings:ne.bookings,transactions:ne.transactions,revenue:ne.revenue,staff:ne.activeStaff,barbers:ne.activeBarbers}))},T=JSON.stringify(P,null,2),L=new Blob([T],{type:"application/json"}),X=URL.createObjectURL(L),Z=document.createElement("a");Z.href=X,Z.download=`barbershop-reports-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},F=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ru,{title:"Total Revenue",value:`${S.totalRevenue.toLocaleString()}`,icon:as,color:"from-green-500 to-green-600",change:"+12%",positive:!0}),e.jsx(Ru,{title:"Total Bookings",value:S.completedBookings,icon:Je,color:"from-blue-500 to-blue-600",change:`${S.pendingBookings} pending`,positive:!0}),e.jsx(Ru,{title:"Transactions",value:S.completedTransactions,icon:Qa,color:"from-purple-500 to-purple-600",change:`${S.averageTransactionValue.toLocaleString(void 0,{maximumFractionDigits:0})} avg`,positive:!0}),e.jsx(Ru,{title:"Active Barbers",value:S.activeBarbers,icon:hs,color:"from-orange-500 to-orange-600",change:`${S.activeStaff} staff`,positive:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Do,{className:"w-5 h-5 text-yellow-400"}),e.jsx("span",{children:"Top Performing Barbers"})]}),e.jsx("div",{className:"space-y-3",children:_.length>0?_.map((P,T)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:P.barber?.full_name||"Unknown"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[P.transactions," transactions"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-bold",children:["",P.revenue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-green-400",children:["#",T+1]})]})]},T)):e.jsx("p",{className:"text-gray-400 text-center py-4",children:"No data available"})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(wr,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{children:"Top Services"})]}),e.jsx("div",{className:"space-y-3",children:k.length>0?k.map((P,T)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:P.service?.name||"Unknown"}),e.jsxs("p",{className:"text-sm text-gray-400",children:[P.count," bookings"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-bold",children:["",P.revenue.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-blue-400",children:["#",T+1]})]})]},T)):e.jsx("p",{className:"text-gray-400 text-center py-4",children:"No data available"})})]})]})]}),M=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center space-x-2",children:[e.jsx(Gs,{className:"w-6 h-6 text-[var(--color-primary)]"}),e.jsx("span",{children:"Branch Performance Analysis"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:E.length>0?E.map(P=>e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50 hover:border-[var(--color-primary)]/50 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:P.branch.name}),e.jsx("span",{className:"px-3 py-1 bg-[var(--color-primary)]/20 rounded-full text-sm text-[var(--color-primary)]",children:P.branch.branch_code})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-green-400",children:["",P.revenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Bookings"}),e.jsx("p",{className:"text-xl font-bold text-blue-400",children:P.bookings})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Transactions"}),e.jsx("p",{className:"text-xl font-bold text-purple-400",children:P.transactions})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Staff"}),e.jsx("p",{className:"text-xl font-bold text-yellow-400",children:P.activeStaff})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Barbers"}),e.jsx("p",{className:"text-xl font-bold text-pink-400",children:P.activeBarbers})]})]})]},P.branch._id)):e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(Xe,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No branch data available"})]})})]});return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg flex items-center justify-center",children:e.jsx(ja,{className:"w-4 h-4 text-white"})}),e.jsx("span",{children:"System Reports"})]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive analytics across all branches"})]}),e.jsxs("div",{className:"flex items-center space-x-3 flex-wrap gap-3",children:[e.jsxs("select",{value:i,onChange:P=>o(P.target.value),className:"bg-[#333333] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Branches"}),m.map(P=>e.jsx("option",{value:P._id,children:P.name},P._id))]}),e.jsxs("select",{value:s,onChange:P=>n(P.target.value),className:"bg-[#333333] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs("button",{onClick:D,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-all duration-200 whitespace-nowrap",children:[e.jsx(ka,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"flex space-x-4 border-b border-[#333333]",children:[{id:"overview",label:"Overview",icon:ja},{id:"branches",label:"Branches",icon:Gs}].map(P=>{const T=P.icon;return e.jsxs("button",{onClick:()=>d(P.id),className:`flex items-center space-x-2 px-4 py-3 border-b-2 transition-all ${c===P.id?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:P.label})]},P.id)})}),c==="overview"&&F(),c==="branches"&&M()]})},Ru=({title:t,value:s,icon:n,color:i,change:o,positive:c})=>e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50 hover:border-[var(--color-primary)]/50 transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${i} rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200`,children:e.jsx(n,{className:"w-6 h-6 text-white"})}),o&&e.jsxs("div",{className:`flex items-center space-x-1 ${c?"text-green-400":"text-red-400"}`,children:[c?e.jsx(Xg,{className:"w-4 h-4"}):e.jsx(Kg,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-semibold",children:o})]})]}),e.jsx("h3",{className:"text-gray-400 text-sm mb-2",children:t}),e.jsx("div",{className:"text-2xl font-bold text-white",children:s})]}),ZR=({onRefresh:t})=>{const{user:s,logout:n}=Dt(),i=De(H.services.auth.updateUserProfile),[o,c]=C.useState("profile"),[d,m]=C.useState(!1),[h,p]=C.useState({type:"",text:""}),[u,f]=C.useState({username:s?.username||"",email:s?.email||"",nickname:s?.nickname||"",mobile_number:s?.mobile_number||"",address:s?.address||"",bio:s?.bio||""}),[g,y]=C.useState({timezone:"Asia/Manila",currency:"PHP",emailNotifications:!0,smsNotifications:!1,autoBackup:!0,maintenanceMode:!1,debugMode:!1,maxLoginAttempts:5,sessionTimeout:30,bookingReminderHours:24,cancelBookingHours:2}),[b,j]=C.useState(!1),[N,w]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[B,S]=C.useState({}),_=(T,L)=>{f(X=>({...X,[T]:L})),p({type:"",text:""})},k=(T,L)=>{y(X=>({...X,[T]:L})),p({type:"",text:""})},E=async()=>{m(!0),p({type:"",text:""});try{await i({email:u.email,nickname:u.nickname,mobile_number:u.mobile_number,address:u.address,bio:u.bio}),p({type:"success",text:" Profile updated successfully!"})}catch(T){console.error("Profile update error:",T),p({type:"error",text:T.message||"Failed to update profile"})}finally{m(!1)}},D=async()=>{const T={};if(N.currentPassword||(T.currentPassword="Current password is required"),N.newPassword?N.newPassword.length<6&&(T.newPassword="Password must be at least 6 characters"):T.newPassword="New password is required",N.newPassword!==N.confirmPassword&&(T.confirmPassword="Passwords do not match"),S(T),!(Object.keys(T).length>0)){m(!0);try{p({type:"success",text:" Password changed successfully!"}),w({currentPassword:"",newPassword:"",confirmPassword:""}),j(!1)}catch(L){console.error("Password change error:",L),p({type:"error",text:"Failed to change password"})}finally{m(!1)}}},F=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(tt,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Admin Profile"})]}),h.text&&e.jsxs("div",{className:`mb-6 p-4 rounded-xl flex items-start space-x-3 border ${h.type==="success"?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:[h.type==="success"?e.jsx(Je,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}):e.jsx(Xe,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:`text-sm ${h.type==="success"?"text-green-300":"text-red-300"}`,children:h.text})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),e.jsx("input",{type:"text",value:u.username,disabled:!0,className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444]/50 rounded-lg text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Username cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:u.nickname,onChange:T=>_("nickname",T.target.value),placeholder:"Your full name",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:u.email,onChange:T=>_("email",T.target.value),placeholder:"your.email@example.com",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),e.jsx("input",{type:"tel",value:u.mobile_number,onChange:T=>_("mobile_number",T.target.value),placeholder:"+63 9XX XXXX XXX",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Address"}),e.jsx("input",{type:"text",value:u.address,onChange:T=>_("address",T.target.value),placeholder:"Your address",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),e.jsx("textarea",{value:u.bio,onChange:T=>_("bio",T.target.value),placeholder:"Tell us about yourself...",rows:"4",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent transition-all resize-none"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-[#444444]/30",children:[e.jsxs("button",{onClick:E,disabled:d,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qr,{className:"w-4 h-4"}),e.jsx("span",{children:d?"Saving...":"Save Profile"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"flex items-center space-x-2 px-6 py-3 bg-[#333333] text-white rounded-lg hover:bg-[#444444] transition-all border border-[#444444]",children:[e.jsx(P3,{className:"w-4 h-4"}),e.jsx("span",{children:"Change Password"})]})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Ni,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Admin Role"}),e.jsx("p",{className:"text-lg font-semibold text-white capitalize",children:s?.role})]})]})})]}),M=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(uD,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"System Configuration"})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Timezone"}),e.jsxs("select",{value:g.timezone,onChange:T=>k("timezone",T.target.value),className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"Asia/Manila",children:"Asia/Manila (GMT+8)"}),e.jsx("option",{value:"UTC",children:"UTC (GMT+0)"}),e.jsx("option",{value:"America/New_York",children:"America/New_York (GMT-5)"}),e.jsx("option",{value:"Europe/London",children:"Europe/London (GMT+0)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsx("select",{value:g.currency,disabled:!0,className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444]/50 rounded-lg text-gray-500 cursor-not-allowed",children:e.jsx("option",{value:"PHP",children:"PHP (Philippine Peso)"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Currency is fixed to PHP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Login Attempts"}),e.jsx("input",{type:"number",value:g.maxLoginAttempts,onChange:T=>k("maxLoginAttempts",parseInt(T.target.value)),min:"3",max:"10",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout (minutes)"}),e.jsx("input",{type:"number",value:g.sessionTimeout,onChange:T=>k("sessionTimeout",parseInt(T.target.value)),min:"5",max:"240",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Booking Reminder Hours"}),e.jsx("input",{type:"number",value:g.bookingReminderHours,onChange:T=>k("bookingReminderHours",parseInt(T.target.value)),min:"1",max:"168",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cancel Booking Before Hours"}),e.jsx("input",{type:"number",value:g.cancelBookingHours,onChange:T=>k("cancelBookingHours",parseInt(T.target.value)),min:"0.5",max:"24",step:"0.5",className:"w-full px-4 py-3 bg-[#333333] border border-[#444444] rounded-lg text-white focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"})]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Is,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Notifications"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"emailNotifications",label:"Email Notifications",description:"Enable system email notifications"},{key:"smsNotifications",label:"SMS Notifications",description:"Enable SMS notifications (requires provider)"}].map(T=>e.jsxs("div",{className:"bg-[#1A1A1A]/50 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:T.label}),e.jsx("p",{className:"text-sm text-gray-400",children:T.description})]}),e.jsx("button",{onClick:()=>k(T.key,!g[T.key]),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${g[T.key]?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)]":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${g[T.key]?"translate-x-6":"translate-x-1"}`})})]},T.key))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:e.jsx(s7,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Data & Security"})]}),e.jsx("div",{className:"space-y-4",children:[{key:"autoBackup",label:"Automatic Backups",description:"Enable daily automatic backups"},{key:"maintenanceMode",label:"Maintenance Mode",description:"Enable maintenance mode (blocks user access)"},{key:"debugMode",label:"Debug Mode",description:"Enable debug logging (performance impact)"}].map(T=>e.jsxs("div",{className:"bg-[#1A1A1A]/50 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:T.label}),e.jsx("p",{className:"text-sm text-gray-400",children:T.description})]}),e.jsx("button",{onClick:()=>k(T.key,!g[T.key]),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${g[T.key]?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)]":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${g[T.key]?"translate-x-6":"translate-x-1"}`})})]},T.key))})]})]}),P=()=>e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-gray-500 to-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(og,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"System Information"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{label:"Version",value:zo},{label:"Environment",value:"Production"},{label:"Database",value:"Convex"},{label:"Last Backup",value:"Hourly"},{label:"Uptime",value:"99.9%"},{label:"API Version",value:"v8.1.2"}].map(T=>e.jsxs("div",{className:"text-center p-4 bg-[#1A1A1A]/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:T.value}),e.jsx("div",{className:"text-gray-400 text-sm",children:T.label})]},T.label))})]});return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg flex items-center justify-center",children:e.jsx(Lr,{className:"w-4 h-4 text-white"})}),e.jsx("span",{children:"Settings"})]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your profile and system preferences"})]})}),e.jsx("div",{className:"flex space-x-4 border-b border-[#333333]",children:[{id:"profile",label:"Profile",icon:tt},{id:"system",label:"System",icon:Lr},{id:"info",label:"Information",icon:og}].map(T=>{const L=T.icon;return e.jsxs("button",{onClick:()=>c(T.id),className:`flex items-center space-x-2 px-4 py-3 border-b-2 transition-all ${o===T.id?"border-[var(--color-primary)] text-[var(--color-primary)]":"border-transparent text-gray-400 hover:text-white"}`,children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:T.label})]},T.id)})}),o==="profile"&&F(),o==="system"&&M(),o==="info"&&P(),b&&e.jsx("div",{className:"fixed inset-0 z-[10000] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>j(!1)}),e.jsx("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10001] border border-[#444444]/50",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:N.currentPassword,onChange:T=>{w({...N,currentPassword:T.target.value}),S({...B,currentPassword:""})},placeholder:"Enter current password",className:`w-full px-4 py-2 bg-[#333333] border rounded-lg text-white focus:ring-2 focus:border-transparent ${B.currentPassword?"border-red-500/50 focus:ring-red-500/50":"border-[#444444] focus:ring-[var(--color-primary)]/50"}`}),B.currentPassword&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:B.currentPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:N.newPassword,onChange:T=>{w({...N,newPassword:T.target.value}),S({...B,newPassword:""})},placeholder:"Enter new password",className:`w-full px-4 py-2 bg-[#333333] border rounded-lg text-white focus:ring-2 focus:border-transparent ${B.newPassword?"border-red-500/50 focus:ring-red-500/50":"border-[#444444] focus:ring-[var(--color-primary)]/50"}`}),B.newPassword&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:B.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",value:N.confirmPassword,onChange:T=>{w({...N,confirmPassword:T.target.value}),S({...B,confirmPassword:""})},placeholder:"Confirm new password",className:`w-full px-4 py-2 bg-[#333333] border rounded-lg text-white focus:ring-2 focus:border-transparent ${B.confirmPassword?"border-red-500/50 focus:ring-red-500/50":"border-[#444444] focus:ring-[var(--color-primary)]/50"}`}),B.confirmPassword&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:B.confirmPassword})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,disabled:d,className:"px-4 py-2 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Changing...":"Change Password"})]})]})})]})})]})},ez=({open:t,title:s,message:n,type:i="warning",onConfirm:o,onCancel:c,confirmText:d="Confirm",cancelText:m="Cancel"})=>{if(!t)return null;const h={warning:e.jsx(Ea,{className:"h-6 w-6 text-yellow-500"}),danger:e.jsx(Ea,{className:"h-6 w-6 text-red-500"}),success:e.jsx(zS,{className:"h-6 w-6 text-green-500"}),info:e.jsx(Ir,{className:"h-6 w-6 text-blue-500"})},p={warning:"bg-yellow-600 hover:bg-yellow-700",danger:"bg-red-600 hover:bg-red-700",success:"bg-green-600 hover:bg-green-700",info:"bg-blue-600 hover:bg-blue-700"};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-white/10 bg-[#1A1A1A] p-6 shadow-2xl",children:[e.jsx("button",{onClick:c,className:"absolute right-4 top-4 rounded-lg p-1 text-gray-400 transition hover:bg-white/5 hover:text-white",children:e.jsx(Ze,{className:"h-5 w-5"})}),e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[h[i],e.jsx("h3",{className:"text-xl font-bold text-white",children:s})]}),e.jsx("p",{className:"mb-6 text-sm text-gray-300",children:n}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:c,className:"flex-1 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm font-semibold text-white transition hover:bg-white/10",children:m}),e.jsx("button",{onClick:o,className:`flex-1 rounded-xl px-4 py-3 text-sm font-semibold text-white transition ${p[i]}`,children:d})]})]})})},Ix=({label:t,value:s,onChange:n,disabled:i,placeholder:o="Click to upload image"})=>{const[c,d]=C.useState(!1),[m,h]=C.useState(s||""),[p,u]=C.useState(""),f=C.useRef(null),{sessionToken:g}=Dt(),y=De(H.services.branding.generateUploadUrl),b=De(H.services.branding.getImageUrl),j=B=>{if(!["image/jpeg","image/jpg","image/png","image/webp","image/svg+xml","image/gif"].includes(B.type))return"Invalid file type. Please upload JPG, PNG, WebP, SVG, or GIF.";const _=5*1024*1024;return B.size>_?"File too large. Maximum size is 5MB.":null},N=async B=>{const S=B.target.files?.[0];if(!S)return;u("");const _=j(S);if(_){u(_);return}d(!0);try{const k=await y({sessionToken:g}),E=await fetch(k,{method:"POST",headers:{"Content-Type":S.type},body:S}),{storageId:D}=await E.json(),F=await b({sessionToken:g,storageId:D});h(F),n(F),f.current&&(f.current.value="")}catch(k){console.error("Upload error:",k),u(k.message||"Failed to upload image. Please try again.")}finally{d(!1)}},w=()=>{h(""),n(""),u(""),f.current&&(f.current.value="")};return e.jsx("div",{className:"space-y-2",children:e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:t}),e.jsx("div",{className:"mt-2",children:m?e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-white/10 bg-white/5 p-4",children:[e.jsx("img",{src:m,alt:"Preview",className:"h-20 w-20 rounded-lg border border-white/10 object-contain bg-white/5",onError:()=>u("Failed to load image preview")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:m}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Image uploaded successfully"})]}),!i&&e.jsx("button",{type:"button",onClick:w,className:"rounded-lg p-2 text-gray-400 transition hover:bg-white/5 hover:text-red-400",title:"Remove image",children:e.jsx(Ze,{className:"h-5 w-5"})})]})}):e.jsxs("div",{children:[e.jsx("input",{ref:f,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/svg+xml,image/gif",onChange:N,disabled:i||c,className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>f.current?.click(),disabled:i||c,className:"w-full flex flex-col items-center justify-center gap-3 rounded-xl border-2 border-dashed border-white/20 bg-white/5 px-6 py-8 transition hover:border-white/30 hover:bg-white/10 disabled:cursor-not-allowed disabled:opacity-50",children:c?e.jsxs(e.Fragment,{children:[e.jsx(So,{className:"h-8 w-8 animate-spin text-[var(--color-primary)]"}),e.jsx("p",{className:"text-sm font-medium text-white",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-full bg-[var(--color-primary)]/10 p-4",children:e.jsx(On,{className:"h-6 w-6 text-[var(--color-primary)]"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm font-semibold text-white",children:[e.jsx("span",{className:"text-[var(--color-primary)]",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"JPG, PNG, WebP, SVG or GIF (max 5MB)"})]})]})})]})}),!m&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Or enter URL manually:"}),e.jsx("input",{type:"text",value:s||"",onChange:B=>{n(B.target.value),h(B.target.value)},disabled:i||c,placeholder:o,className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/60 disabled:opacity-60"})]}),p&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-lg bg-red-500/10 border border-red-500/30 px-3 py-2",children:[e.jsx(Xe,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-xs text-red-300",children:p})]})]})})},fo={display_name:"",primary_color:"var(--color-primary)",accent_color:"var(--color-accent)",bg_color:"var(--color-bg)",text_color:"#FFFFFF",muted_color:"#333333",logo_light_url:"",logo_dark_url:"",favicon_url:"",banner_url:"",hero_image_url:"/landing/2.webp",feature_toggles:{kiosk:!0,wallet:!0,vouchers:!0,referrals:!1}},SA=[{key:"kiosk",label:"Kiosk Mode"},{key:"wallet",label:"Wallet"},{key:"vouchers",label:"Vouchers"},{key:"referrals",label:"Referrals"}],tz=[{name:"Default Orange",primary:"#FF8C42",accent:"#FF7A2B"},{name:"Blue Ocean",primary:"#3B82F6",accent:"#0EA5E9"},{name:"Purple Dream",primary:"#A855F7",accent:"#8B5CF6"},{name:"Green Forest",primary:"#10B981",accent:"#059669"},{name:"Red Passion",primary:"#EF4444",accent:"#DC2626"},{name:"Pink Bliss",primary:"#EC4899",accent:"#DB2777"}],DA=t=>!t||typeof t!="string"?"Color is required":/^#[0-9A-F]{3}([0-9A-F]{3})?$/i.test(t)||/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/i.test(t)||/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/i.test(t)||/^var\(--[\w-]+\)$/.test(t)?null:"Invalid color format (use #RRGGBB, rgb(...), or var(--name))",zu=t=>{if(!t||t.startsWith("/"))return null;try{const s=new URL(t);return s.protocol==="http:"||s.protocol==="https:"?null:"URL must use http:// or https://"}catch{return"Invalid URL format"}},Lx=({label:t,value:s})=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-400",children:t}),e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s||""})]}),Mf=({label:t,color:s})=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl border border-white/5 shadow-inner",style:{backgroundColor:s}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase text-gray-400",children:t}),e.jsx("p",{className:"text-sm font-semibold text-white",children:s||""})]})]}),sz=({label:t,enabled:s,onToggle:n,disabled:i})=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:t}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Controls ",t.toLowerCase()," visibility"]})]}),e.jsx("button",{type:"button",onClick:n,disabled:i,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors disabled:opacity-50 ${s?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)]":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform ${s?"translate-x-6":"translate-x-1"}`})})]}),qx=({label:t,value:s,onChange:n,disabled:i,error:o})=>e.jsxs("label",{className:"block space-y-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:t}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:s&&s.startsWith("#")?s:"#FF8C42",disabled:i,onChange:c=>n(c.target.value),className:"h-12 w-16 rounded-lg border border-white/10 bg-transparent"}),e.jsx("input",{type:"text",value:s||"",disabled:i,onChange:c=>n(c.target.value),placeholder:"var(--color-primary)",className:`flex-1 rounded-xl border px-4 py-3 text-sm text-white focus:outline-none focus:ring-2 disabled:opacity-60 ${o?"border-red-500/50 bg-red-500/10 focus:ring-red-500/60":"border-white/10 bg-white/5 focus:ring-[var(--color-primary)]/60"}`})]}),o&&e.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-400",children:[e.jsx(Xe,{className:"h-3 w-3"}),o]})]}),rz=({label:t,value:s,onChange:n,placeholder:i,disabled:o,error:c})=>e.jsxs("label",{className:"block space-y-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:t}),e.jsx("input",{type:"text",value:s||"",disabled:o,onChange:d=>n(d.target.value),placeholder:i,className:`w-full rounded-xl border px-4 py-3 text-sm text-white focus:outline-none focus:ring-2 disabled:opacity-60 ${c?"border-red-500/50 bg-red-500/10 focus:ring-red-500/60":"border-white/10 bg-white/5 focus:ring-[var(--color-primary)]/60"}`}),c&&e.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-400",children:[e.jsx(Xe,{className:"h-3 w-3"}),c]})]}),az=new Set(["display_name","primary_color","accent_color","bg_color","text_color","muted_color","logo_light_url","logo_dark_url","favicon_url","banner_url","hero_image_url","feature_toggles"]),nz=["kiosk","wallet","vouchers","referrals"],iz=t=>{const s={};return az.forEach(n=>{const i=t[n];if(!(i==null||i==="")){if(n==="feature_toggles"){const o={};nz.forEach(c=>{const d=i?.[c];typeof d=="boolean"&&(o[c]=d)}),Object.keys(o).length&&(s.feature_toggles=o);return}if(typeof i=="string"){const o=i.trim();o&&(s[n]=o);return}s[n]=i}}),s},oz=t=>t?new Date(t).toLocaleString():"Not yet updated";function lz(){const{user:t,sessionToken:s}=Dt(),{branding:n,loading:i,error:o,refresh:c}=Ts(),d=t?.role==="super_admin",m=De(H.services.branding.upsertGlobalBranding),h=De(H.services.branding.rollbackGlobalBranding),p=me(d&&s?H.services.branding.exportBranding:null,d&&s?{sessionToken:s}:"skip"),u=me(d&&s?H.services.branding.getBrandingHistory:null,d&&s?{sessionToken:s,limit:10}:"skip"),f=De(H.services.branding.importBranding),[g,y]=C.useState(()=>({...fo,...n||{}})),[b,j]=C.useState(!1),[N,w]=C.useState(!1),[B,S]=C.useState(null),[_,k]=C.useState({}),[E,D]=C.useState(null),[F,M]=C.useState(!1),[P,T]=C.useState(!1),L=C.useRef(null),X=C.useRef(null);C.useEffect(()=>{b||y({...fo,...n||{}})},[n,b]);const Z=q=>{!d||!b||y(J=>({...J,feature_toggles:{...J.feature_toggles||{},[q]:!J.feature_toggles?.[q]}}))},ne=()=>{const q={},J=DA(g.primary_color);J&&(q.primary_color=J);const $=DA(g.accent_color);$&&(q.accent_color=$);const Y=zu(g.logo_light_url);Y&&(q.logo_light_url=Y);const xe=zu(g.logo_dark_url);xe&&(q.logo_dark_url=xe);const oe=zu(g.favicon_url);oe&&(q.favicon_url=oe);const de=zu(g.banner_url);return de&&(q.banner_url=de),k(q),Object.keys(q).length===0},I=async()=>{if(!(!d||!b||!s)){if(!ne()){S({type:"error",message:"Please fix validation errors before saving."});return}D({type:"warning",title:"Save Branding Changes?",message:"This will update branding across the entire application for all users. A version history entry will be created.",confirmText:"Save Changes",onConfirm:async()=>{w(!0),S(null),D(null);try{await m({sessionToken:s,payload:iz(g)}),S({type:"success",message:`Branding updated successfully! Version ${(n?.version||0)+1} saved.`}),j(!1),c()}catch(q){S({type:"error",message:q.message||"Failed to update branding."})}finally{w(!1)}},onCancel:()=>D(null)})}},O=()=>{!d||!b||D({type:"warning",title:"Reset to Defaults?",message:"This will discard all your current changes and restore default branding values. This action cannot be undone.",confirmText:"Reset to Defaults",onConfirm:()=>{y(fo),k({}),S({type:"info",message:"Reverted to default values. Click Save to apply."}),D(null)},onCancel:()=>D(null)})},G=q=>{!d||!b||(y(J=>({...J,primary_color:q.primary,accent_color:q.accent})),k({}),S({type:"info",message:`Applied "${q.name}" color preset. Click Save to apply.`}))},te=()=>{if(p)try{const q=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),J=URL.createObjectURL(q),$=document.createElement("a");$.href=J,$.download=`branding-${Date.now()}.json`,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(J),S({type:"success",message:"Branding configuration exported successfully."})}catch{S({type:"error",message:"Failed to export configuration."})}},Q=async q=>{if(!q||!d||!s)return;T(!0);const J=new FileReader;J.onload=async $=>{try{const Y=JSON.parse($.target.result);D({type:"danger",title:"Import Branding Configuration?",message:"This will replace your current branding with the imported configuration. A backup will be created in version history. This action cannot be easily undone.",confirmText:"Import Configuration",onConfirm:async()=>{D(null);try{await f({sessionToken:s,config:Y}),S({type:"success",message:"Branding imported successfully!"}),c(),j(!1)}catch(xe){S({type:"error",message:xe.message||"Import failed."})}finally{T(!1),X.current&&(X.current.value="")}},onCancel:()=>{D(null),T(!1),X.current&&(X.current.value="")}})}catch{S({type:"error",message:"Invalid JSON file."}),T(!1),X.current&&(X.current.value="")}},J.onerror=()=>{S({type:"error",message:"Failed to read file."}),T(!1),X.current&&(X.current.value="")},J.readAsText(q)},ee=async q=>{!d||!s||D({type:"warning",title:`Rollback to Version ${q}?`,message:"This will restore the branding configuration from this version. A new version history entry will be created. Current unsaved changes will be lost.",confirmText:"Rollback",onConfirm:async()=>{D(null);try{await h({sessionToken:s,version:q}),S({type:"success",message:`Successfully rolled back to version ${q}.`}),c(),j(!1),M(!1)}catch(J){S({type:"error",message:J.message||"Rollback failed."})}},onCancel:()=>D(null)})},le=C.useMemo(()=>({...fo,...n||{}}),[n]),R=C.useMemo(()=>({"--color-primary":g.primary_color,"--color-accent":g.accent_color,"--color-bg":g.bg_color,"--color-text":g.text_color}),[g]);return i?e.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ps,{className:"mx-auto h-8 w-8 animate-spin text-[var(--color-primary)]"}),e.jsx("p",{className:"mt-4 text-sm text-gray-400",children:"Loading branding configuration..."})]})}):o?e.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"mx-auto h-12 w-12 text-red-500"}),e.jsx("p",{className:"mt-4 text-lg font-semibold text-white",children:"Failed to Load Branding"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:o}),e.jsx("button",{onClick:()=>c(),className:"mt-6 rounded-xl bg-[var(--color-primary)] px-6 py-3 text-sm font-semibold text-white",children:"Retry"})]})}):e.jsxs("section",{className:"space-y-10",children:[E&&e.jsx(ez,{open:!!E,title:E.title,message:E.message,type:E.type,confirmText:E.confirmText,cancelText:E.cancelText||"Cancel",onConfirm:E.onConfirm,onCancel:E.onCancel}),F&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"relative w-full max-w-3xl rounded-3xl border border-white/10 bg-[#1A1A1A] p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lg,{className:"h-6 w-6 text-[var(--color-primary)]"}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Version History"})]}),e.jsx("button",{onClick:()=>M(!1),className:"rounded-lg p-2 text-gray-400 transition hover:bg-white/5 hover:text-white",children:e.jsx(Ze,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3",children:!u||u.length===0?e.jsx("p",{className:"text-center text-sm text-gray-400 py-8",children:"No version history available yet."}):u.map(q=>e.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 transition hover:bg-white/10",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"rounded-lg bg-[var(--color-primary)]/20 px-3 py-1 text-xs font-bold text-[var(--color-primary)]",children:["v",q.version]}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(q.createdAt).toLocaleString()})]}),e.jsxs("p",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-semibold text-white",children:q.changed_by_user?.nickname||"Unknown"})," ","updated branding configuration"]}),q.change_notes&&e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:q.change_notes})]}),e.jsx("button",{onClick:()=>ee(q.version),className:"ml-4 rounded-lg bg-white/5 px-4 py-2 text-xs font-semibold text-white transition hover:bg-white/10",children:"Rollback"})]})},q._id))})]})}),e.jsxs("header",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--color-primary)] uppercase tracking-wide",children:"Branding Control"}),e.jsxs("h2",{className:"mt-2 flex items-center gap-3 text-3xl font-extrabold text-white",children:[e.jsx("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg",children:e.jsx(r0,{className:"h-6 w-6"})}),"Global Branding Management"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Configure the single source of truth for colors, media assets, and feature toggles across every experience."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>L.current?.scrollIntoView({behavior:"smooth",block:"start"}),className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 px-5 py-3 text-sm font-semibold text-white transition hover:border-white/30",children:[e.jsx(Dn,{className:"h-4 w-4"}),"Preview"]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>M(!0),className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 px-5 py-3 text-sm font-semibold text-white transition hover:border-white/30",children:[e.jsx(lg,{className:"h-4 w-4"}),"History"]}),e.jsxs("button",{type:"button",onClick:te,disabled:!p,className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 px-5 py-3 text-sm font-semibold text-white transition hover:border-white/30 disabled:cursor-not-allowed disabled:opacity-40",children:[e.jsx(ka,{className:"h-4 w-4"}),"Export"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 px-5 py-3 text-sm font-semibold text-white transition hover:border-white/30 cursor-pointer",children:[e.jsx(ji,{className:"h-4 w-4"}),"Import",e.jsx("input",{ref:X,type:"file",accept:".json",onChange:q=>q.target.files?.[0]&&Q(q.target.files[0]),className:"hidden",disabled:P})]}),e.jsxs("button",{type:"button",onClick:O,disabled:!b,className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 px-5 py-3 text-sm font-semibold text-white transition hover:border-white/30 disabled:cursor-not-allowed disabled:opacity-40",children:[e.jsx(L3,{className:"h-4 w-4"}),"Reset Defaults"]}),e.jsxs("button",{type:"button",onClick:()=>{S(null),y({...fo,...n||{}}),k({}),j(!0)},className:`inline-flex items-center gap-2 rounded-2xl px-6 py-3 text-sm font-semibold text-white shadow-lg ${b?"bg-white/10 text-white":"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)]"}`,children:[e.jsx(Ca,{className:"h-4 w-4"}),b?"Editing":"Edit Branding"]})]})]})]}),B&&e.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm font-semibold ${B.type==="success"?"border-green-500/40 bg-green-500/10 text-green-200":B.type==="error"?"border-red-500/40 bg-red-500/10 text-red-200":"border-white/10 bg-white/5 text-gray-200"}`,children:B.message}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/40 p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Display"}),e.jsx(R3,{className:"h-5 w-5 text-[var(--color-primary)]"})]}),e.jsx("p",{className:"mt-2 text-2xl font-bold text-white",children:le.display_name||"Not set"}),e.jsxs("div",{className:"mt-4 grid gap-3",children:[e.jsx(Lx,{label:"Updated",value:oz(le.updatedAt||le.updated_at)}),e.jsx(Lx,{label:"Identifier",value:le._id||"Singleton"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/40 p-6 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Color Tokens"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx(Mf,{label:"Primary",color:le.primary_color}),e.jsx(Mf,{label:"Accent",color:le.accent_color}),e.jsx(Mf,{label:"Background",color:le.bg_color})]})]}),e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/40 p-6 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Feature Toggles"}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm font-semibold text-white",children:SA.map(({key:q,label:J})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(SD,{className:`h-4 w-4 ${le.feature_toggles?.[q]?"text-[var(--color-primary)]":"text-gray-500"}`}),e.jsx("span",{children:J})]},q))})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/40 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-white/5 text-white",children:e.jsx(On,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Media Assets"}),e.jsx("p",{className:"text-lg font-bold text-white",children:"Logos & Favicon"})]})]}),e.jsxs("div",{className:"mt-6 space-y-4 text-sm text-gray-300",children:[e.jsx(Lx,{label:"Logo (Light)",value:le.logo_light_url}),e.jsx(Lx,{label:"Logo (Dark)",value:le.logo_dark_url}),e.jsx(Lx,{label:"Favicon",value:le.favicon_url})]})]}),e.jsxs("div",{ref:L,className:"rounded-3xl border border-white/10 bg-gradient-to-br from-[var(--color-bg)] to-black/60 p-6",style:R,children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Live Preview"}),e.jsxs("div",{className:"mt-4 flex items-center gap-4 rounded-2xl bg-black/20 p-4",children:[e.jsx("img",{src:g.logo_light_url,alt:"Logo preview",className:"h-12 w-12 rounded-xl object-contain"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-[var(--color-text)]",children:g.display_name||"Brand Preview"}),e.jsx("p",{className:"text-sm text-[var(--color-muted)]",children:"System-wide tokens"})]})]}),e.jsx("div",{className:"mt-6 h-12 rounded-2xl bg-[var(--color-primary)] shadow-inner"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/60 p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400",children:"Editor"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Branding Details"})]}),e.jsx("div",{className:"text-xs font-semibold uppercase tracking-widest text-gray-500",children:d?b?"Editing Mode":"Super Admin Access":"Read Only"})]}),e.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx(rz,{label:"Display Name",value:g.display_name,disabled:!d||!b,onChange:q=>y(J=>({...J,display_name:q})),placeholder:"Brand name",error:_.display_name}),d&&b&&e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(r0,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"Color Presets"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:tz.map(q=>e.jsxs("button",{type:"button",onClick:()=>G(q),className:"flex items-center gap-2 rounded-lg border border-white/10 p-2 text-left transition hover:bg-white/5",children:[e.jsx("div",{className:"h-6 w-6 rounded",style:{background:`linear-gradient(to right, ${q.primary}, ${q.accent})`}}),e.jsx("span",{className:"text-xs font-medium text-white",children:q.name})]},q.name))})]}),e.jsx(qx,{label:"Primary Color",value:g.primary_color,disabled:!d||!b,onChange:q=>y(J=>({...J,primary_color:q})),error:_.primary_color}),e.jsx(qx,{label:"Accent Color",value:g.accent_color,disabled:!d||!b,onChange:q=>y(J=>({...J,accent_color:q})),error:_.accent_color}),e.jsx(qx,{label:"Background Color",value:g.bg_color,disabled:!d||!b,onChange:q=>y(J=>({...J,bg_color:q})),error:_.bg_color}),e.jsx(qx,{label:"Text Color",value:g.text_color,disabled:!d||!b,onChange:q=>y(J=>({...J,text_color:q})),error:_.text_color}),e.jsx(qx,{label:"Muted Color",value:g.muted_color,disabled:!d||!b,onChange:q=>y(J=>({...J,muted_color:q})),error:_.muted_color})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(Ix,{label:"Logo (Light Mode)",value:g.logo_light_url,disabled:!d||!b,onChange:q=>y(J=>({...J,logo_light_url:q})),placeholder:"https://domain/logo-light.png or upload"}),e.jsx(Ix,{label:"Logo (Dark Mode)",value:g.logo_dark_url,disabled:!d||!b,onChange:q=>y(J=>({...J,logo_dark_url:q})),placeholder:"https://domain/logo-dark.png or upload"}),e.jsx(Ix,{label:"Favicon",value:g.favicon_url,disabled:!d||!b,onChange:q=>y(J=>({...J,favicon_url:q})),placeholder:"https://domain/favicon.ico or upload"}),e.jsx(Ix,{label:"Banner Image",value:g.banner_url,disabled:!d||!b,onChange:q=>y(J=>({...J,banner_url:q})),placeholder:"https://domain/banner.png or upload"}),e.jsx(Ix,{label:"Hero Background Image",value:g.hero_image_url,disabled:!d||!b,onChange:q=>y(J=>({...J,hero_image_url:q})),placeholder:"https://domain/hero.jpg or upload"}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(GS,{className:"h-4 w-4 text-[var(--color-primary)]"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:"Live Modules"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Toggle experiences for all clients."}),e.jsx("div",{className:"mt-4 space-y-3",children:SA.map(({key:q,label:J})=>e.jsx(sz,{label:J,enabled:!!g.feature_toggles?.[q],onToggle:()=>Z(q),disabled:!d||!b},q))})]})]})]}),d&&b&&e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{j(!1),y({...fo,...n||{}})},className:"inline-flex items-center gap-2 rounded-2xl border border-white/10 px-5 py-3 text-sm font-semibold text-white",children:"Cancel"}),e.jsx("button",{type:"button",onClick:I,disabled:N,className:"inline-flex items-center gap-2 rounded-2xl bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] px-6 py-3 text-sm font-semibold text-white shadow-lg disabled:opacity-60",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-4 w-4"}),"Save Changes"]})})]})]})]})}const FA={password_reset:{label:"Password Reset",icon:Ao,description:"Sent when a user requests to reset their password",variables:["{{brand_name}}","{{reset_url}}"]},voucher:{label:"Voucher Email",icon:Qt,description:"Sent when a voucher is assigned or redeemed",variables:["{{brand_name}}","{{recipient_name}}","{{voucher_code}}","{{voucher_value}}","{{points_required}}","{{expires_at}}"]},booking_confirmation:{label:"Booking Confirmation",icon:rt,description:"Sent when a booking is confirmed",variables:["{{brand_name}}","{{customer_name}}","{{service_name}}","{{date}}","{{time}}","{{barber_name}}"]},booking_reminder:{label:"Booking Reminder",icon:Is,description:"Sent as a reminder before the appointment",variables:["{{brand_name}}","{{customer_name}}","{{service_name}}","{{date}}","{{time}}"]},welcome:{label:"Welcome Email",icon:zr,description:"Sent when a new user registers",variables:["{{brand_name}}","{{user_name}}"]}},Rf=({label:t,value:s,onChange:n,disabled:i,placeholder:o,error:c})=>e.jsxs("label",{className:"block space-y-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:t}),e.jsx("input",{type:"text",value:s||"",disabled:i,onChange:d=>n(d.target.value),placeholder:o,className:`w-full rounded-xl border px-4 py-3 text-sm text-white focus:outline-none focus:ring-2 disabled:opacity-60 ${c?"border-red-500/50 bg-red-500/10 focus:ring-red-500/60":"border-white/10 bg-white/5 focus:ring-[var(--color-primary)]/60"}`}),c&&e.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-400",children:[e.jsx(Xe,{className:"h-3 w-3"}),c]})]}),PA=({label:t,value:s,onChange:n,disabled:i,placeholder:o,rows:c=4,error:d})=>e.jsxs("label",{className:"block space-y-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-300",children:t}),e.jsx("textarea",{value:s||"",disabled:i,onChange:m=>n(m.target.value),placeholder:o,rows:c,className:`w-full rounded-xl border px-4 py-3 text-sm text-white focus:outline-none focus:ring-2 disabled:opacity-60 resize-none ${d?"border-red-500/50 bg-red-500/10 focus:ring-red-500/60":"border-white/10 bg-white/5 focus:ring-[var(--color-primary)]/60"}`}),d&&e.jsxs("p",{className:"flex items-center gap-1 text-xs text-red-400",children:[e.jsx(Xe,{className:"h-3 w-3"}),d]})]});function cz(){const{sessionToken:t}=Dt(),{branding:s}=Ts(),n=me(t?H.services.emailTemplates.getAllTemplates:null,t?{sessionToken:t}:"skip"),i=De(H.services.emailTemplates.upsertTemplate),o=De(H.services.emailTemplates.resetToDefault),[c,d]=C.useState("password_reset"),[m,h]=C.useState({subject:"",heading:"",body_text:"",cta_text:"",footer_text:""}),[p,u]=C.useState(!1),[f,g]=C.useState(!1),[y,b]=C.useState(null),[j,N]=C.useState(!1);C.useEffect(()=>{if(n){const E=n.find(D=>D.template_type===c);E&&h({subject:E.subject||"",heading:E.heading||"",body_text:E.body_text||"",cta_text:E.cta_text||"",footer_text:E.footer_text||""})}},[n,c]);const w=FA[c],B=w?.icon||Ht,S=async()=>{if(t){g(!0),b(null);try{await i({sessionToken:t,template_type:c,subject:m.subject,heading:m.heading,body_text:m.body_text,cta_text:m.cta_text,footer_text:m.footer_text,is_active:!0}),b({type:"success",message:"Email template saved successfully!"}),u(!1)}catch(E){b({type:"error",message:E.message||"Failed to save template"})}finally{g(!1)}}},_=async()=>{if(t){g(!0),b(null);try{await o({sessionToken:t,template_type:c}),b({type:"success",message:"Template reset to default!"}),u(!1)}catch(E){b({type:"error",message:E.message||"Failed to reset template"})}finally{g(!1)}}},k=C.useMemo(()=>{const E=s?.primary_color||"#000000",D=s?.accent_color||"#000000",F=s?.bg_color||"#0A0A0A",M=s?.display_name||"";m.subject.replace(/\{\{brand_name\}\}/g,M);const P=m.heading.replace(/\{\{brand_name\}\}/g,M),T=m.body_text.replace(/\{\{brand_name\}\}/g,M).replace(/\{\{recipient_name\}\}/g,"John Doe").replace(/\{\{customer_name\}\}/g,"John Doe").replace(/\{\{user_name\}\}/g,"John Doe").replace(/\{\{voucher_code\}\}/g,"VOUCHER123").replace(/\{\{voucher_value\}\}/g,"100").replace(/\{\{points_required\}\}/g,"500").replace(/\{\{expires_at\}\}/g,"2024-12-31").replace(/\{\{service_name\}\}/g,"Haircut").replace(/\{\{date\}\}/g,"2024-12-15").replace(/\{\{time\}\}/g,"2:00 PM").replace(/\{\{barber_name\}\}/g,"Mike").replace(/\n/g,"<br>"),L=m.cta_text||"Click Here",X=(m.footer_text||"").replace(/\n/g,"<br>");return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: ${F};
            color: #ffffff;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
          }
          .container {
            max-width: 500px;
            margin: 0 auto;
            background: linear-gradient(135deg, #1A1A1A 0%, #2A2A2A 100%);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid #333;
          }
          .header {
            background: linear-gradient(135deg, ${E} 0%, ${D} 100%);
            padding: 24px;
            text-align: center;
          }
          .header h1 {
            font-size: 24px;
            margin: 0;
            color: white;
          }
          .body {
            padding: 32px 24px;
          }
          .title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 16px;
            color: ${E};
            text-align: center;
          }
          .text {
            color: #ccc;
            margin-bottom: 24px;
            text-align: center;
          }
          .cta-button {
            display: block;
            width: fit-content;
            margin: 0 auto 24px;
            background: linear-gradient(135deg, ${E} 0%, ${D} 100%);
            color: white;
            text-decoration: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
          }
          .footer-text {
            background: ${E}1a;
            border-left: 4px solid ${E};
            border-radius: 8px;
            padding: 16px;
            font-size: 13px;
            color: #bbb;
          }
          .footer {
            background: #1A1A1A;
            border-top: 1px solid #333;
            padding: 16px 24px;
            text-align: center;
            font-size: 12px;
            color: #666;
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>${M}</h1>
          </div>
          <div class="body">
            <h2 class="title">${P}</h2>
            <p class="text">${T}</p>
            ${`<a href="#" class="cta-button">${L}</a>`}
            ${X?`<div class="footer-text"><strong style="display:block;margin-bottom:8px;color:#fff;">How to Use</strong>${X}</div>`:""}
          </div>
          <div class="footer">
            <p> 2024 ${M}. All rights reserved.</p>
          </div>
        </div>
      </body>
      </html>
    `},[m,s]);return n?e.jsxs("section",{className:"space-y-8",children:[e.jsxs("header",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--color-primary)] uppercase tracking-wide",children:"Email Customization"}),e.jsxs("h2",{className:"mt-2 flex items-center gap-3 text-3xl font-extrabold text-white",children:[e.jsx("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-lg",children:e.jsx(Ht,{className:"h-6 w-6"})}),"Email Notification Settings"]}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Customize the content of system emails. Colors are automatically applied from your branding settings."})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsxs("button",{type:"button",onClick:()=>N(!j),className:`inline-flex items-center gap-2 rounded-2xl border px-5 py-3 text-sm font-semibold transition ${j?"border-[var(--color-primary)]/50 bg-[var(--color-primary)]/10 text-[var(--color-primary)]":"border-white/10 text-white hover:border-white/30"}`,children:[e.jsx(Dn,{className:"h-4 w-4"}),j?"Hide Preview":"Show Preview"]})})]}),y&&e.jsxs("div",{className:`flex items-center gap-3 rounded-2xl border px-4 py-3 text-sm font-semibold ${y.type==="success"?"border-green-500/40 bg-green-500/10 text-green-200":"border-red-500/40 bg-red-500/10 text-red-200"}`,children:[y.type==="success"?e.jsx(Je,{className:"h-5 w-5"}):e.jsx(Xe,{className:"h-5 w-5"}),y.message]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/40 p-6 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400 mb-4",children:"Email Templates"}),e.jsx("div",{className:"space-y-2",children:Object.entries(FA).map(([E,D])=>{const F=D.icon,M=c===E;return e.jsxs("button",{onClick:()=>{d(E),u(!1),b(null)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition ${M?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white":"bg-white/5 text-gray-300 hover:bg-white/10"}`,children:[e.jsx(F,{className:"h-5 w-5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:D.label}),e.jsx("p",{className:`text-xs truncate ${M?"text-white/70":"text-gray-500"}`,children:D.description})]})]},E)})})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/40 p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex h-10 w-10 items-center justify-center rounded-2xl bg-[var(--color-primary)]/20 text-[var(--color-primary)]",children:e.jsx(B,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:w?.label}),e.jsx("p",{className:"text-sm text-gray-400",children:w?.description})]})]}),e.jsx("div",{className:"flex gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{u(!1);const E=n?.find(D=>D.template_type===c);E&&h({subject:E.subject||"",heading:E.heading||"",body_text:E.body_text||"",cta_text:E.cta_text||"",footer_text:E.footer_text||""})},className:"inline-flex items-center gap-2 rounded-xl border border-white/10 px-4 py-2 text-sm font-semibold text-white hover:bg-white/5",children:"Cancel"}),e.jsxs("button",{onClick:_,disabled:f,className:"inline-flex items-center gap-2 rounded-xl border border-white/10 px-4 py-2 text-sm font-semibold text-white hover:bg-white/5 disabled:opacity-50",children:[e.jsx(L3,{className:"h-4 w-4"}),"Reset"]}),e.jsxs("button",{onClick:S,disabled:f,className:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] px-4 py-2 text-sm font-semibold text-white disabled:opacity-50",children:[f?e.jsx(Ps,{className:"h-4 w-4 animate-spin"}):e.jsx(qr,{className:"h-4 w-4"}),"Save"]})]}):e.jsx("button",{onClick:()=>u(!0),className:"inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] px-4 py-2 text-sm font-semibold text-white",children:"Edit Template"})})]}),e.jsxs("div",{className:"mb-6 rounded-xl border border-white/10 bg-white/5 p-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2",children:"Available Variables"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w?.variables.map(E=>e.jsx("code",{className:"px-2 py-1 bg-[var(--color-primary)]/10 text-[var(--color-primary)] text-xs rounded font-mono",children:E},E))})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(Rf,{label:"Email Subject",value:m.subject,onChange:E=>h(D=>({...D,subject:E})),disabled:!p,placeholder:"Enter email subject line"}),e.jsx(Rf,{label:"Email Heading",value:m.heading,onChange:E=>h(D=>({...D,heading:E})),disabled:!p,placeholder:"Main heading displayed in email"}),e.jsx(PA,{label:"Body Text (use variables like {{voucher_value}}, {{recipient_name}})",value:m.body_text,onChange:E=>h(D=>({...D,body_text:E})),disabled:!p,placeholder:"Main content of the email. Use Enter for new lines.",rows:8}),e.jsx(Rf,{label:"Call-to-Action Button Text",value:m.cta_text,onChange:E=>h(D=>({...D,cta_text:E})),disabled:!p,placeholder:"e.g., Reset Password, View Booking, Redeem Now"}),e.jsx(PA,{label:"Footer Text / How to Use Instructions",value:m.footer_text,onChange:E=>h(D=>({...D,footer_text:E})),disabled:!p,placeholder:"Additional instructions or disclaimer. Use Enter for new lines.",rows:4})]})]}),j&&e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-[var(--color-bg)]/40 p-6 shadow-xl",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-400 mb-4",children:"Email Preview"}),e.jsx("div",{className:"rounded-xl overflow-hidden border border-white/10",children:e.jsx("iframe",{srcDoc:k,title:"Email Preview",className:"w-full h-[600px] bg-[#0A0A0A]"})}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 text-center",children:"Colors are pulled from your global branding settings"})]})]})]})]}):e.jsx("div",{className:"flex min-h-[400px] items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ps,{className:"mx-auto h-8 w-8 animate-spin text-[var(--color-primary)]"}),e.jsx("p",{className:"mt-4 text-sm text-gray-400",children:"Loading email templates..."})]})})}const dz=()=>{const[t,s]=C.useState(""),[n,i]=C.useState("pending_approval"),[o,c]=C.useState(""),[d,m]=C.useState(null),[h,p]=C.useState(null),[u,f]=C.useState(null),{user:g}=Dt(),y=me(H.services.branches.getAllBranches)||[],b=me(H.services.vouchers.getVouchersByBranch,t?{branch_id:t}:"skip"),j=De(H.services.vouchers.approveVoucher),N=De(H.services.vouchers.rejectVoucher);fr.useEffect(()=>{y.length>0&&!t&&s(y[0]._id)},[y,t]);const w=E=>{p(E)},B=async()=>{if(!(!h||!g)){f(h._id);try{await j({id:h._id,approved_by:g._id}),p(null)}catch(E){console.error("Failed to approve voucher:",E)}finally{f(null)}}},S=async()=>{if(!(!d||!g)){f(d.id);try{await N({id:d.id,rejected_by:g._id,reason:d.reason}),m(null)}catch(E){console.error("Failed to reject voucher:",E)}finally{f(null)}}},_=(b||[]).filter(E=>{const D=E.code.toLowerCase().includes(o.toLowerCase()),F=n==="all"?!0:E.status===n;return D&&F}).sort((E,D)=>new Date(D.createdAt)-new Date(E.createdAt)),k=E=>{switch(E){case"active":return{label:"Active",icon:Je,color:"text-green-400",bg:"bg-green-500/20",border:"border-green-500/30"};case"pending_approval":return{label:"Pending Approval",icon:Nt,color:"text-yellow-400",bg:"bg-yellow-500/20",border:"border-yellow-500/30"};case"rejected":return{label:"Rejected",icon:xs,color:"text-red-400",bg:"bg-red-500/20",border:"border-red-500/30"};default:return{label:E,icon:Xe,color:"text-gray-400",bg:"bg-gray-500/20",border:"border-gray-500/30"}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Voucher Approvals"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage and approve vouchers created by staff"})]}),e.jsxs("div",{className:"relative min-w-[200px]",children:[e.jsxs("select",{value:t,onChange:E=>s(E.target.value),className:"w-full bg-[#1A1A1A] border border-[#333333] text-white rounded-lg px-4 py-2 appearance-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Branch"}),y.map(E=>e.jsx("option",{value:E._id,children:E.name},E._id))]}),e.jsx(ea,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 pointer-events-none"})]})]}),e.jsx("div",{className:"bg-[#1A1A1A] p-4 rounded-xl border border-[#333333]",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between",children:[e.jsx("div",{className:"flex space-x-2 bg-[#111111] p-1 rounded-lg w-fit",children:[{id:"pending_approval",label:"Pending"},{id:"active",label:"Active"},{id:"rejected",label:"Rejected"},{id:"all",label:"All"}].map(E=>e.jsx("button",{onClick:()=>i(E.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${n===E.id?"bg-[var(--color-primary)] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#222222]"}`,children:E.label},E.id))}),e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search code...",value:o,onChange:E=>c(E.target.value),className:"pl-10 pr-4 py-2 bg-[#111111] border border-[#333333] text-white rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent w-full md:w-64"})]})]})}),e.jsx("div",{className:"bg-[#1A1A1A] rounded-xl border border-[#333333] overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#333333]",children:[e.jsx("thead",{className:"bg-[#111111]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Voucher Info"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Created By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#333333]",children:_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500",children:"No vouchers found matching your criteria."})}):_.map(E=>{const D=k(E.status),F=D.icon;return e.jsxs("tr",{className:"hover:bg-[#222222] transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-white font-mono font-bold",children:E.code}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Expires: ",E.formattedExpiresAt]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-white font-bold",children:E.formattedValue}),e.jsxs("div",{className:"text-xs text-gray-500",children:[E.points_required," points"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-300",children:E.created_by_username}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(E.createdAt).toLocaleDateString()})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-1 rounded-full w-fit border ${D.bg} ${D.border}`,children:[e.jsx(F,{className:`w-4 h-4 ${D.color}`}),e.jsx("span",{className:`text-xs font-medium ${D.color}`,children:D.label})]}),E.status==="rejected"&&E.rejection_reason&&e.jsxs("div",{className:"mt-1 text-xs text-red-400 max-w-[200px] truncate",title:E.rejection_reason,children:["Reason: ",E.rejection_reason]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:E.status==="pending_approval"&&e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{m({id:E._id,reason:""})},disabled:u===E._id,className:"p-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Reject",children:e.jsx(xs,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>w(E),disabled:u===E._id,className:"p-2 text-green-400 hover:bg-green-500/10 rounded-lg transition-colors",title:"Approve",children:e.jsx(Je,{className:"w-5 h-5"})})]})})]},E._id)})})]})})}),d&&e.jsx(ns,{isOpen:!0,onClose:()=>m(null),title:"Reject Voucher",size:"sm",variant:"dark",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:[e.jsx(pD,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-red-200",children:[e.jsx("p",{className:"font-medium",children:"Warning"}),e.jsx("p",{className:"opacity-90",children:"Rejecting this voucher will permanently mark it as rejected. This action cannot be undone."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:["Rejection Reason ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{value:d.reason,onChange:E=>m({...d,reason:E.target.value}),placeholder:"Please explain why this voucher is being rejected...",className:"w-full bg-[#111111] border border-[#333333] text-white rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-transparent h-32 resize-none placeholder-gray-600"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm font-medium",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:!d.reason.trim()||u===d.id,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium flex items-center gap-2",children:u===d.id?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4"}),"Reject Voucher"]})})]})]})}),h&&e.jsx(ns,{isOpen:!0,onClose:()=>p(null),title:"Approve Voucher",size:"sm",variant:"dark",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mb-4 border border-green-500/20",children:e.jsx(R3,{className:"w-8 h-8 text-green-400"})}),e.jsxs("h3",{className:"text-lg font-bold text-white mb-2",children:["Approve Voucher ",h.code,"?"]}),e.jsx("p",{className:"text-gray-400 text-sm max-w-xs",children:"This will activate the voucher and make it available for use immediately."})]}),e.jsxs("div",{className:"bg-[#111111] p-4 rounded-lg border border-[#333333] space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Value:"}),e.jsx("span",{className:"text-white font-bold",children:h.formattedValue})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Points Required:"}),e.jsx("span",{className:"text-white",children:h.points_required})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Created By:"}),e.jsx("span",{className:"text-white",children:h.created_by_username})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 text-gray-400 hover:text-white transition-colors text-sm font-medium",children:"Cancel"}),e.jsx("button",{onClick:B,disabled:u===h._id,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium flex items-center gap-2",children:u===h._id?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-4 h-4"}),"Confirm Approval"]})})]})]})})]})};function xz(){const{user:t,logout:s}=Dt(),n=Ws(),[i,o]=C.useState(()=>localStorage.getItem("admin_dashboard_active_tab")||"overview");C.useEffect(()=>{localStorage.setItem("admin_dashboard_active_tab",i)},[i]);const c=me(H.services.branches.getAllBranches)||[],d=me(H.services.auth.getAllUsers)||[],m=me(H.services.bookings.getAllBookings)||[],h=me(H.services.services.getAllServices)||[],p=me(H.services.barbers.getAllBarbers)||[],u=me(H.services.transactions.getAllTransactions)||[],g=(()=>{if(!c||!d||!m||!u)return null;const S=c.filter(D=>D.is_active).length,_=u.filter(D=>D.payment_status==="completed").reduce((D,F)=>D+F.total_amount,0),k=m.filter(D=>{const F=new Date().toDateString();return new Date(D.date).toDateString()===F}).length,E=u.filter(D=>{const F=new Date(D.createdAt),M=new Date().toISOString().slice(0,7);return F.toISOString().slice(0,7)===M&&D.payment_status==="completed"}).reduce((D,F)=>D+F.total_amount,0);return{totalBranches:c.length,activeBranches:S,totalUsers:d.length,totalBookings:m.filter(D=>D.status!=="cancelled").length,todayBookings:k,totalRevenue:_,thisMonthRevenue:E,totalBarbers:p.length,totalServices:h.length}})(),y=()=>{window.location.reload()},b=async()=>{try{await s(),n("/auth/login")}catch(S){console.error("Logout error:",S),n("/auth/login")}},j=()=>g?e.jsxs("div",{className:"space-y-8",children:[e.jsx(GR,{stats:[{label:"Total Branches",value:g.totalBranches,icon:"building",subtext:`${g.activeBranches} active`},{label:"Total Users",value:g.totalUsers,icon:"users"},{label:"Total Bookings",value:g.totalBookings,icon:"calendar",subtext:`${g.todayBookings} today`},{label:"Total Revenue",value:`${g.totalRevenue.toLocaleString()}`,icon:"dollar",subtext:`${g.thisMonthRevenue.toLocaleString()} this month`},{label:"Total Barbers",value:g.totalBarbers,icon:"user"},{label:"Total Services",value:g.totalServices,icon:"scissors"}]}),e.jsx(YR,{activities:[]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Loading dashboard data..."})]}),N=()=>{switch(i){case"overview":return j();case"branches":return e.jsx(WR,{onRefresh:y});case"users":return e.jsx(KR,{onRefresh:y});case"reports":return e.jsx(XR,{onRefresh:y});case"settings":return e.jsx(ZR,{onRefresh:y});case"branding":return t?.role==="super_admin"?e.jsx(lz,{}):e.jsx("div",{className:"text-center text-gray-400",children:"You do not have access to branding management."});case"emails":return t?.role==="super_admin"?e.jsx(cz,{}):e.jsx("div",{className:"text-center text-gray-400",children:"You do not have access to email notification settings."});case"vouchers":return e.jsx(dz,{});default:return j()}},w=[{id:"overview",label:"Overview",icon:"dashboard"},{id:"branches",label:"Branches",icon:"building"},{id:"users",label:"Users",icon:"users"},{id:"reports",label:"Reports",icon:"chart"},{id:"settings",label:"Settings",icon:"settings"}],B=t?.role==="super_admin"?[...w.slice(0,4),{id:"vouchers",label:"Vouchers",icon:"ticket"},{id:"branding",label:"Branding",icon:"palette"},{id:"emails",label:"Emails",icon:"mail"},...w.slice(4)]:[...w.slice(0,4),{id:"vouchers",label:"Vouchers",icon:"ticket"},...w.slice(4)];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0F0F0F] via-[#1A1A1A] to-[#2A2A2A]",children:[e.jsx(JR,{onLogout:b}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"space-y-12",children:[e.jsx(QR,{tabs:B,activeTab:i,onTabChange:o}),e.jsx("div",{className:"bg-gradient-to-br from-[#1E1E1E] to-[#2A2A2A] rounded-3xl shadow-2xl border border-[#333333]/50 p-10 backdrop-blur-sm",children:N()})]})})]})}const Wa=t=>{if(!t)return"";try{if(/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])(:[0-5][0-9])?$/.test(t)){const[i,o]=t.split(":").map(Number),c=i>=12?"PM":"AM";return`${i%12||12}:${o.toString().padStart(2,"0")} ${c}`}const n=new Date(`2000-01-01T${t}`);return isNaN(n.getTime())?t:n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(s){return console.error("Error formatting time:",s),t}},Iu=(t,s)=>{if(!t)return t;let n=0,i=0,o=0;return t.length===4?(n=parseInt(t[1]+t[1],16),i=parseInt(t[2]+t[2],16),o=parseInt(t[3]+t[3],16)):t.length===7&&(n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16)),`rgba(${n}, ${i}, ${o}, ${s})`},TA=({barber:t,className:s="w-12 h-12"})=>{const[n,i]=C.useState(!1),c=me(H.services.barbers.getImageUrl,t.avatarStorageId?{storageId:t.avatarStorageId}:"skip")||t.avatarUrl||"/img/avatar_default.jpg";return n||!c?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 rounded-full ${s}`,children:e.jsx(tt,{className:"w-6 h-6 text-gray-500"})}):e.jsx("img",{src:c,alt:`${t.full_name||t.name} avatar`,className:`${s} rounded-full object-cover`,onError:()=>i(!0)})},uz=({onBack:t})=>{const{branding:s}=Ts(),{user:n,isAuthenticated:i}=Dt(),[o,c]=C.useState(null),[d,m]=C.useState(null),[h,p]=C.useState(()=>new Date().toISOString().split("T")[0]),[u,f]=C.useState(null),[g,y]=C.useState(null),[b,j]=C.useState(1),[N,w]=C.useState(!1),[B,S]=C.useState(!1),[_,k]=C.useState(null),[E,D]=C.useState(null),[F,M]=C.useState(!0),[P,T]=C.useState(!1),[L,X]=C.useState(null),[Z,ne]=C.useState(null),[I,O]=C.useState(!1),[G,te]=C.useState(""),[Q,ee]=C.useState(""),le=C.useRef(null),[R,q]=C.useState(null),J=me(H.services.branches.getActiveBranches),$=me(H.services.services.getServicesByBranch,o?{branch_id:o._id}:"skip"),Y=me(H.services.barbers.getBarbersByBranch,o?{branch_id:o._id}:"skip"),xe=me(H.services.vouchers.getVouchersByUser,n?._id?{userId:n._id}:"skip"),oe=De(H.services.bookings.createBooking),de=Xr(H.services.payments.createPaymentRequest),ve=De(H.services.bookings.updatePaymentStatus),Me=me(H.services.bookings.getBookingById,E?._id?{id:E._id}:"skip"),Ke=me(H.services.bookings.getBookingsByBarberAndDate,g&&h?{barberId:g._id,date:h}:"skip"),pe=De(H.services.vouchers.redeemVoucher);C.useEffect(()=>{const Ee=sessionStorage.getItem("preSelectedService");if(Ee&&$&&o)try{const We=JSON.parse(Ee),Qe=$.find(ht=>ht._id===We._id||ht.name.toLowerCase().includes("haircut")||ht.name.toLowerCase().includes("cut"));Qe&&(m(Qe),j(3)),sessionStorage.removeItem("preSelectedService")}catch(We){console.error("Error parsing pre-selected service:",We),sessionStorage.removeItem("preSelectedService")}},[$,o]),C.useEffect(()=>{b===6&&M(!0)},[b]),C.useEffect(()=>{if(b===6&&E?._id&&Me?.booking_code){console.log("Step 4 reached with booking ID:",E._id,"actual booking code:",Me.booking_code);const Ee=(Qe=0)=>{if(le.current){console.log("Canvas found, generating QR code with actual booking data");const ht=Me,wt=ht.booking_code;console.log("Generating QR with data:",wt),console.log("QR Scanner expects format with bookingId and bookingCode fields:",{bookingId:ht._id,bookingCode:ht.booking_code}),Cr.toCanvas(le.current,wt,{width:192,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},Bt=>{Bt?console.error("QR Code generation error:",Bt):console.log("QR Code generated successfully with booking code:",ht.booking_code),M(!1)})}else Qe<5?(console.log(`Canvas ref not available, retrying... (${Qe+1}/5)`),setTimeout(()=>Ee(Qe+1),200)):(console.error("Canvas ref still not available after 5 retries"),M(!1))},We=setTimeout(()=>Ee(),100);return()=>clearTimeout(We)}},[b,E?._id,Me?.booking_code,d,g,Z]);const be=()=>xe?xe.filter(Ee=>{const We=Ee.expires_at>Date.now(),Qe=!Ee.redeemed;return We&&Qe}):[],Be=fr.useMemo(()=>{if(!h||!g||!o)return[];const Ee=[],We=new Date,Qe=new Date(h),ht=Qe.toDateString()===We.toDateString(),wt=We.getHours();We.getMinutes();let Bt,K,V,se;if(g.schedule_type==="specific_dates"&&g.specific_dates){const Re=Qe.toISOString().split("T")[0],ze=g.specific_dates.find(Ve=>Ve.date===Re);if(!ze||!ze.available)return[];[Bt,K]=ze.start.split(":").map(Number),[V,se]=ze.end.split(":").map(Number)}else{const Re=Qe.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),ze=g.schedule?.[Re];if(!ze||!ze.available)return[];[Bt,K]=ze.start.split(":").map(Number),[V,se]=ze.end.split(":").map(Number)}const ke=Ke?Ke.filter(Re=>Re.status!=="cancelled").map(Re=>Re.time.substring(0,5)):[];for(let Re=Bt;Re<V;Re++){const Ve=`${Re.toString().padStart(2,"0")}:${"0".padStart(2,"0")}`,_t=Re===12?"12:00 PM":Re>12?`${Re-12}:00 PM`:`${Re}:00 AM`;let _e=!0,$e=null;if(ke.includes(Ve)&&(_e=!1,$e="booked"),ht&&Re<wt&&(_e=!1,$e="past"),g.blocked_periods&&g.blocked_periods.length>0){const ot=Qe.toISOString().split("T")[0],ie=g.blocked_periods.find(Ae=>Ae.date===ot);if(ie)if(!ie.start_time&&!ie.end_time)_e=!1,$e="blocked";else{const Ae=Ve,nt=Oe=>{if(!Oe)return 0;const[qe,ut]=Oe.split(":").map(Number);return qe*60+ut},ct=nt(Ae),pt=nt(ie.start_time),re=nt(ie.end_time);ct>=pt&&ct<re&&(_e=!1,$e="blocked")}}Ee.push({time:Ve,displayTime:_t,available:_e,reason:$e})}return Ee},[h,g,o,Ke]),Ue=()=>{if(!Y)return[];let Ee=Y.filter(We=>We.is_active);return d&&(Ee=Ee.filter(We=>We.services&&Array.isArray(We.services)&&We.services.some(Qe=>Qe===d._id))),Ee},ue=async(Ee="pay_later",We=null)=>{if(!d||!h||!u){alert("Please fill in all booking details");return}try{S(!0);const Qe=u.includes(":")?`${u}:00`:u,ht={customer:n._id,service:d._id,barber:g?._id||void 0,branch_id:o._id,date:h,time:Qe,status:"booked",notes:Z?`Used voucher: ${Z.code}`:void 0,voucher_id:Z?._id||void 0,discount_amount:Z?.value||void 0,customer_email:n.email,customer_name:n.full_name||n.nickname||n.username};console.log("Creating booking with data:",ht);const wt=await oe(ht),Bt={_id:wt,booking_code:null,service:d,barber:g,date:h,time:Qe,status:"booked",voucher_code:Z?.code};if(D(Bt),Ee==="pay_now"&&We){if(!await Ie(wt,We))return;try{await ve({id:wt,payment_status:"paid"}),console.log("Booking payment status updated to paid")}catch(V){console.error("Error updating booking payment status:",V)}}else j(6);if(Z?.code)try{console.log("Redeeming voucher:",Z.code,"User:",n._id);const K=await pe({code:Z.code,user_id:n._id});console.log(" Voucher redeemed successfully:",{code:Z.code,voucherId:Z._id,status:"redeemed",result:K}),setTimeout(()=>{console.log(` Voucher ${Z.code} has been applied and marked as redeemed!`)},1500)}catch(K){console.error(" Error during voucher redemption:",{code:Z.code,error:K?.message||K,userId:n._id}),alert("Booking confirmed! Note: Voucher status update encountered an issue. Please refresh to see the updated status.")}}catch(Qe){console.error("Error creating booking:",Qe),alert(Qe.message||"Failed to create booking. Please try again.")}finally{S(!1)}},Ie=async(Ee,We)=>{try{const Qe=d?.price||0,ht=Z?.value||0,wt=Math.max(0,Qe-ht);if(wt===0)return j(6),!0;console.log("Processing payment:",{amount:wt,paymentMethod:We,bookingId:Ee});const Bt=await de({amount:wt,paymentMethod:We,bookingId:Ee,customerEmail:n.email,customerName:n.full_name||n.name});return console.log("Payment created successfully:",Bt),Bt.redirect_url?(window.location.href=Bt.redirect_url,!0):(j(6),!0)}catch(Qe){return console.error("Payment processing error:",Qe),alert(`Payment failed: ${Qe.message}. Please try again or choose pay later.`),!1}},st=Ee=>{c(Ee),m(null),y(null),f(null),j(2)},Le=Ee=>{m(Ee),j(4)},kt=Ee=>{console.log("Selected Barber ID:",Ee._id),sessionStorage.setItem("barberId",Ee._id),y(Ee),j(3)},Pt=async(Ee="pay_later",We=null)=>{await ue(Ee,We)},St=()=>e.jsx("div",{className:"flex justify-center mb-4 px-4 py-2",children:e.jsx("div",{className:"flex items-center space-x-3",children:[1,2,3,4,5].map(Ee=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${b>=Ee?"text-white shadow-md":"text-gray-500"}`,style:{backgroundColor:b>=Ee?s?.primary_color||"#F68B24":s?.muted_color||"#E0E0E0"},children:b>Ee?"":Ee}),Ee<5&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded transition-all duration-300",style:{backgroundColor:b>Ee?s?.primary_color||"#F68B24":s?.muted_color||"#E0E0E0"}})]},Ee))})}),Jt=()=>{if(!J)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"})});if(J.length===0)return e.jsx("div",{className:"text-center py-12 px-4",children:e.jsx("p",{className:"text-sm text-gray-400",children:"No branches available"})});const Ee=J.filter(We=>{const Qe=G.toLowerCase();return We.name.toLowerCase().includes(Qe)||We.address.toLowerCase().includes(Qe)||We.branch_code.toLowerCase().includes(Qe)||We.phone.includes(Qe)});return e.jsxs("div",{className:"px-4 pb-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Select Location"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Choose your preferred branch to continue"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by name, address, or code...",value:G,onChange:We=>te(We.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-[#1A1A1A] border border-[#2A2A2A] text-white placeholder-gray-500 rounded-lg focus:outline-none focus:border-[var(--color-primary)] transition-colors text-sm"}),G&&e.jsx("button",{onClick:()=>te(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:e.jsx(Ze,{className:"w-4 h-4"})})]})}),Ee.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-sm text-gray-400",children:['No branches found matching "',G,'"']})}):e.jsx("div",{className:"space-y-3",children:Ee.map(We=>e.jsx("button",{onClick:()=>st(We),className:"w-full bg-[#1A1A1A] hover:bg-[#222222] border border-[#2A2A2A] hover:border-[var(--color-primary)] rounded-lg p-4 text-left transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx(yi,{className:"w-5 h-5 text-[var(--color-primary)] flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-semibold text-white mb-1 group-hover:text-[var(--color-primary)] transition-colors",children:We.name}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-400",children:[e.jsx("p",{className:"truncate",children:We.address}),e.jsx("div",{className:"flex items-center gap-3"})]})]})]}),e.jsx("div",{className:"ml-4 text-gray-500 group-hover:text-[var(--color-primary)] transition-colors flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},We._id))})]})},Ne=()=>{if(N||!$)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"})});if(_)return e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("p",{className:"text-sm text-red-400 mb-4",children:_}),e.jsx("button",{onClick:loadBookingData,className:"px-6 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm font-medium",children:"Try Again"})]});const Ee=ht=>{if(!ht)return"Other Services";const wt=ht.toLowerCase();return wt.includes("haircut")||wt.includes("hair")?"Haircut":wt.includes("package")?"Package":"Other Services"},Qe=(g?$.filter(ht=>g.services&&g.services.includes(ht._id)):$).reduce((ht,wt)=>{const Bt=Ee(wt.category);return ht[Bt]||(ht[Bt]=[]),ht[Bt].push(wt),ht},{});return e.jsxs("div",{className:"px-4 pb-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Choose Service"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Select the service you'd like to book ",g?`with ${g.full_name||g.name}`:`at ${o?.name}`]})]}),e.jsxs("div",{className:"mb-4 relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search services...",value:Q,onChange:ht=>ee(ht.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-[#1A1A1A] border border-[#2A2A2A] text-white placeholder-gray-500 rounded-lg focus:outline-none focus:border-[var(--color-primary)] transition-colors text-sm"}),Q&&e.jsx("button",{onClick:()=>ee(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:e.jsx(Ze,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-3",children:["Haircut","Package","Other Services"].map(ht=>{const Bt=(Qe[ht]||[]).filter(V=>{const se=Q.toLowerCase();return V.name.toLowerCase().includes(se)||V.description&&V.description.toLowerCase().includes(se)||V.price.toString().includes(se)});if(Bt.length===0)return null;const K=R===ht;return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]",children:[e.jsxs("button",{onClick:()=>q(K?null:ht),className:"w-full text-left px-4 py-3 flex justify-between items-center text-white font-semibold",children:[e.jsx("span",{children:ht}),e.jsx("span",{children:K?"":"+"})]}),K&&e.jsx("div",{className:"space-y-2 px-4 pb-4",children:Bt.map(V=>{const se=Y?Y.filter(ke=>ke.is_active&&ke.services&&Array.isArray(ke.services)&&ke.services.some(Re=>Re===V._id)).length:0;return e.jsxs("button",{onClick:()=>Le(V),className:"w-full bg-[#1A1A1A] hover:bg-[#222222] border border-[#2A2A2A] hover:border-[var(--color-primary)] rounded-lg p-4 text-left transition-all duration-200 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-white",children:V.name}),V.description&&e.jsx("p",{className:"text-xs text-gray-400 line-clamp-2",children:V.description}),e.jsx("span",{className:"text-[var(--color-primary)] font-bold mt-1 block",children:V.hide_price?"Price may vary":`${parseFloat(V.price||0).toLocaleString()}`}),se===0&&e.jsx("p",{className:"text-[10px] text-amber-500 mt-1",children:"Limited availability"})]}),e.jsx("div",{className:"self-center text-gray-500",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},V._id)})})]},ht)})})]})},Ye=()=>e.jsxs("div",{className:"px-4 pb-6 max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Select Date & Time"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Choose a schedule for your appointment"})]}),e.jsx("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xl",children:d?.image}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-white",children:d?.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-[var(--color-primary)] font-semibold",children:d?.hide_price?"Price may vary":`${d?.price.toLocaleString()}`}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("span",{className:"text-gray-400",children:d?.duration})]})]})]})}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Select Date"}),e.jsx("input",{type:"date",value:h,onChange:Ee=>{p(Ee.target.value),f(null)},min:new Date().toISOString().split("T")[0],max:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg bg-[#121212] border border-[#2A2A2A] text-gray-200 text-sm focus:outline-none focus:border-[var(--color-primary)] transition-colors"})]}),h&&e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Select Time"}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(h).toLocaleDateString("en-PH",{weekday:"short",month:"short",day:"numeric"})})]}),I?e.jsxs("div",{className:"flex justify-center items-center py-6 space-x-2",children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-[var(--color-primary)] border-t-transparent rounded-full"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Loading times..."})]}):Be.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(rt,{className:"w-6 h-6 text-[var(--color-primary)] mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-[var(--color-primary)] font-medium",children:"No available times"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please select a different date"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:Be.map(Ee=>e.jsx("button",{onClick:()=>Ee.available&&f(Ee.time),disabled:!Ee.available,className:`p-2 text-sm rounded-lg border transition-all duration-200 ${Ee.available?u===Ee.time?"bg-[var(--color-primary)] text-white border-[var(--color-primary)]":"bg-[#1F1F1F] text-gray-200 border-[#2A2A2A] hover:border-[var(--color-primary)]/50":"bg-[#111111] text-gray-500 border-[#1F1F1F] cursor-not-allowed"}`,children:Ee.displayTime},Ee.time))}),e.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-[#1F1F1F] border border-[#2A2A2A] rounded"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-[var(--color-primary)] rounded"}),e.jsx("span",{children:"Selected"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-[#111111] rounded"}),e.jsx("span",{children:"Booked"})]})]})]})]}),h&&u&&e.jsx("button",{onClick:()=>j(5),className:"w-full py-3 bg-[var(--color-primary)] text-white font-bold rounded-lg hover:bg-[var(--color-accent)] transition-all duration-200",children:"Continue to Confirmation"})]}),Ge=()=>e.jsxs("div",{className:"pb-6 px-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Choose Your Barber"}),e.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"Select your preferred professional"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:Ue().map(Ee=>{const We=Ee.is_accepting_bookings!==!1;return e.jsxs("button",{onClick:()=>We&&kt(Ee),disabled:!We,className:`group rounded-xl p-3 transition-all duration-300 border hover:shadow-lg flex flex-col items-center text-center relative overflow-hidden ${g?._id===Ee._id?"bg-[var(--color-primary)]/10 border-[var(--color-primary)]":We?"bg-[#1A1A1A] border-[#2A2A2A] hover:border-[var(--color-primary)]/50":"bg-[#1A1A1A] border-[#2A2A2A] opacity-60 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("div",{className:`w-14 h-14 sm:w-16 sm:h-16 rounded-full overflow-hidden ring-2 ring-[#2A2A2A] ${We?"group-hover:ring-[var(--color-primary)]/50":"grayscale"} transition-all duration-300`,children:e.jsx(TA,{barber:Ee,className:"w-full h-full"})}),g?._id===Ee._id&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center border-2 border-[#1A1A1A] shadow-lg",children:e.jsx(Je,{className:"w-3 h-3 text-white"})}),!We&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-full",children:e.jsx("div",{className:"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm",children:"Busy"})})]}),e.jsx("h3",{className:"text-sm font-bold text-white mb-0.5 line-clamp-1 w-full group-hover:text-[var(--color-primary)] transition-colors duration-200",children:Ee.full_name||Ee.name}),e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(Vt,{className:"w-3 h-3 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-xs font-medium text-gray-300",children:"5.0"})]}),e.jsx("p",{className:`text-[10px] line-clamp-1 ${We?"text-gray-500":"text-red-400 font-medium"}`,children:We?Ee.experience||"Professional":"Currently Unavailable"})]},Ee._id)})}),(!Y||Ue().length===0)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"w-12 h-12 text-gray-500 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-gray-400",children:"No barbers available at this branch"})]})]}),yt=()=>e.jsxs("div",{className:"space-y-3 px-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h2",{className:"text-xl font-bold mb-1",style:{color:"#36454F"},children:"Confirm Your Booking"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Please review your appointment details"})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border shadow-lg",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center border-b pb-3",style:{borderColor:"#E0E0E0"},children:[e.jsx("div",{className:"text-2xl mb-2",children:d?.image}),e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"#36454F"},children:d?.name}),e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("span",{className:"font-bold text-base",style:{color:s?.primary_color||"#F68B24"},children:d?.hide_price?"Price may vary":`${d?.price.toLocaleString()}`}),e.jsx("span",{className:"font-medium text-sm",style:{color:"#8B8B8B"},children:d?.duration})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gs,{className:"w-4 h-4",style:{color:s?.primary_color||"#F68B24"}}),e.jsx("span",{className:"font-semibold text-sm",style:{color:"#36454F"},children:"Branch"})]}),e.jsx("span",{className:"font-bold text-sm",style:{color:"#36454F"},children:o?.name})]}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"w-4 h-4",style:{color:s?.primary_color||"#F68B24"}}),e.jsx("span",{className:"font-semibold text-sm",style:{color:"#36454F"},children:"Date & Time"})]}),e.jsxs("span",{className:"font-bold text-sm",style:{color:"#36454F"},children:["Today, ",Wa(u)]})]}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tt,{className:"w-4 h-4",style:{color:s?.primary_color||"#F68B24"}}),e.jsx("span",{className:"font-semibold text-sm",style:{color:"#36454F"},children:"Your Barber"})]}),e.jsx("span",{className:"font-bold text-sm",style:{color:"#36454F"},children:g?.full_name||g?.name||"Any Barber"})]})]}),e.jsxs("div",{className:"border-t pt-3",style:{borderColor:"#E0E0E0"},children:[e.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center",style:{color:"#36454F"},children:[e.jsx(Qt,{className:"w-4 h-4 mr-2",style:{color:s?.primary_color||"#F68B24"}}),"Apply Voucher (Optional)"]}),be().length>0?e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:be().map(Ee=>e.jsx("button",{onClick:()=>ne(Z?._id===Ee._id?null:Ee),className:"w-full p-2 rounded-lg border-2 transition-all duration-200 text-left",style:{borderColor:Z?._id===Ee._id?s?.primary_color||"#F68B24":"#E0E0E0",backgroundColor:Z?._id===Ee._id?Iu(s?.primary_color||"#F68B24",.1):"white"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qt,{className:"w-4 h-4",style:{color:s?.primary_color||"#F68B24"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold",style:{color:"#36454F"},children:Ee.code}),e.jsxs("p",{className:"text-xs",style:{color:s?.primary_color||"#F68B24"},children:["",parseFloat(Ee.value||0).toFixed(2)]})]})]}),Z?._id===Ee._id&&e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center",style:{backgroundColor:s?.primary_color||"#F68B24"},children:e.jsx("span",{className:"text-white text-xs",children:""})})]})},Ee._id))}),Z&&e.jsxs("div",{className:"text-xs text-center p-2 rounded flex items-center justify-center gap-2",style:{backgroundColor:"#F0F8FF",color:"#36454F"},children:[e.jsx(bm,{className:"w-4 h-4"}),e.jsxs("span",{children:["You'll save ",parseFloat(Z.value||0).toFixed(2)," with this voucher"]})]})]}):e.jsx("div",{className:"text-center py-3",children:e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"No vouchers available"})})]}),e.jsxs("div",{className:"border-t pt-3",style:{borderColor:"#E0E0E0"},children:[e.jsx("h4",{className:"text-sm font-bold mb-3",style:{color:"#36454F"},children:"Complete Your Booking"}),P?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-3 border border-[#2A2A2A]",children:[e.jsx("h5",{className:"text-sm font-bold mb-2 text-white",children:"Select Payment Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>X("gcash"),className:`w-full p-3 rounded-lg border-2 transition-all duration-200 flex items-center space-x-3 ${L==="gcash"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"G"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sm",style:{color:"#36454F"},children:"GCash"}),e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"Digital wallet payment"})]})]},"gcash"),e.jsxs("button",{onClick:()=>X("maya"),className:`w-full p-3 rounded-lg border-2 transition-all duration-200 flex items-center space-x-3 ${L==="maya"?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"M"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sm",style:{color:"#36454F"},children:"Maya"}),e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"Digital wallet payment"})]})]},"maya"),e.jsxs("button",{onClick:()=>X("card"),className:`w-full p-3 rounded-lg border-2 transition-all duration-200 flex items-center space-x-3 ${L==="card"?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded flex items-center justify-center",children:e.jsx(ds,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sm",style:{color:"#36454F"},children:"Credit/Debit Card"}),e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"Visa, Mastercard, etc."})]})]},"card")]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{T(!1),X(null)},className:"flex-1 py-2 px-3 border border-[#2A2A2A] text-gray-400 hover:bg-[#1A1A1A] hover:text-white font-bold rounded-lg transition-all duration-200 text-sm",children:"Back"}),e.jsx("button",{onClick:()=>Pt("pay_now",L),disabled:!L||B,className:`flex-1 py-2 px-3 text-white font-bold rounded-lg transition-all duration-200 shadow-lg text-sm ${!L||B?"opacity-75 cursor-not-allowed":""}`,style:{backgroundColor:!L||B?"#CCCCCC":"#22C55E"},onMouseEnter:Ee=>!L||B||(Ee.target.style.backgroundColor="#16A34A"),onMouseLeave:Ee=>!L||B||(Ee.target.style.backgroundColor="#22C55E"),children:B?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]}):"Confirm & Pay"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>T(!0),disabled:B,className:`py-3 px-4 bg-green-500 hover:bg-green-600 text-white font-bold rounded-lg transition-all duration-200 text-sm flex items-center justify-center gap-2 ${B?"opacity-75 cursor-not-allowed":""}`,children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Pay Now"})]}),e.jsx("button",{onClick:()=>Pt("pay_later"),disabled:B,className:`py-3 px-4 border-2 hover:bg-[var(--color-primary)] hover:text-white font-bold rounded-lg transition-all duration-200 text-sm flex items-center justify-center gap-2 ${B?"opacity-75 cursor-not-allowed":""}`,style:{borderColor:s?.primary_color||"#F68B24",color:s?.primary_color||"#F68B24"},children:B?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full"}),e.jsx("span",{children:"Booking..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{children:"Pay Later"})]})})]}),!P&&e.jsx("p",{className:"text-xs text-center mb-3",style:{color:"#8B8B8B"},children:"Choose your preferred payment option to complete booking"})]}),!P&&e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:()=>j(3),className:"w-full py-2 px-3 border border-[#2A2A2A] text-gray-400 hover:bg-[#1A1A1A] hover:text-white font-bold rounded-lg transition-all duration-200 text-sm",children:" Go Back to Edit Details"})})]})})]}),bt=()=>e.jsxs("div",{className:"space-y-6 px-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl",style:{backgroundColor:s?.primary_color||"#F68B24"},children:e.jsx(Je,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-black mb-2 text-white",children:"Booking Confirmed!"}),e.jsx("p",{className:"font-medium text-gray-300",children:"Your appointment has been successfully booked"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-8 border-2 border-[#2A2A2A] shadow-lg text-center",children:[e.jsx("h3",{className:"text-lg font-black mb-4 text-white",children:"Your Booking QR Code"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-[#0A0A0A] rounded-2xl border-2 border-[#2A2A2A] shadow-sm",children:e.jsxs("div",{className:"relative w-48 h-48",children:[(F||!Me?.booking_code)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-orange-500 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-gray-700",children:Me?.booking_code?"Generating QR Code...":"Loading booking details..."})]})}),e.jsx("canvas",{ref:le,className:"rounded-xl w-full h-full",style:{display:F||!Me?.booking_code?"none":"block"}})]})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("div",{className:"text-lg font-black text-white",children:["Booking Code:"," ",Me?.booking_code?Me.booking_code:e.jsxs("span",{className:"inline-flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400",children:"Generating..."}),e.jsx("div",{className:"animate-pulse w-2 h-2 bg-orange-500 rounded-full"})]})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Show this QR code when you arrive"})]})]}),e.jsx("div",{className:"rounded-2xl p-6 border",style:{backgroundColor:Iu(s?.primary_color||"#F68B24",.05),borderColor:Iu(s?.primary_color||"#F68B24",.2)},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Branch:"}),e.jsx("span",{className:"font-bold text-white",children:o?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Service:"}),e.jsx("span",{className:"font-bold text-white",children:d?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Date & Time:"}),e.jsxs("span",{className:"font-bold text-white",children:[E?.date?new Date(E.date).toLocaleDateString():"Today",", ",Wa(E?.time||u)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Barber:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[g&&e.jsx(TA,{barber:g,className:"w-8 h-8"}),e.jsx("span",{className:"font-bold text-white",children:g?.full_name||g?.name||"Any Barber"})]})]}),Z&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Subtotal:"}),e.jsxs("span",{className:"font-bold line-through text-gray-400",children:["",d?.price.toLocaleString()]})]}),Z&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Voucher Discount:"}),e.jsxs("span",{className:"font-bold text-green-400",children:["-",parseFloat(Z.value||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3",style:{borderColor:Iu(s?.primary_color||"#F68B24",.3)},children:[e.jsx("span",{className:"font-bold text-white",children:"Total:"}),e.jsxs("span",{className:"font-black text-lg",style:{color:s?.primary_color||"#F68B24"},children:["",E?.total_amount?parseFloat(E.total_amount).toLocaleString():Math.max(0,(d?.price||0)-(Z?.value||0)).toLocaleString()]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:t,className:"w-full py-4 text-white font-bold rounded-2xl transition-all duration-200 shadow-lg",style:{backgroundColor:s?.primary_color||"#F68B24"},onMouseEnter:Ee=>Ee.target.style.backgroundColor=s?.accent_color||"#E67E22",onMouseLeave:Ee=>Ee.target.style.backgroundColor=s?.primary_color||"#F68B24",children:"Back to Home"}),e.jsx("button",{onClick:()=>{t&&t("bookings")},className:"w-full py-3 border-2 font-bold rounded-2xl transition-all duration-200",style:{borderColor:s?.primary_color||"#F68B24",color:s?.primary_color||"#F68B24"},onMouseEnter:Ee=>{Ee.target.style.backgroundColor=s?.primary_color||"#F68B24",Ee.target.style.color="white"},onMouseLeave:Ee=>{Ee.target.style.backgroundColor="transparent",Ee.target.style.color=s?.primary_color||"#F68B24"},children:"View My Bookings"})]})]});return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-[#0A0A0A]/95 backdrop-blur-xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"Book Service"}),e.jsxs("p",{className:"text-xs text-[var(--color-primary)]",children:["Step ",b," of 4"]})]})]})})}),e.jsx("div",{className:"relative z-10",children:St()}),e.jsxs("div",{className:"relative z-10 pb-8",children:[b===1&&Jt(),b===2&&Ge(),b===3&&Ne(),b===4&&Ye(),b===5&&yt(),b===6&&bt()]})]})};var Wu={exports:{}},mz=Wu.exports,OA;function hz(){return OA||(OA=1,function(t,s){(function(i,o){t.exports=o()})(typeof self<"u"?self:mz,function(){return function(n){var i={};function o(c){if(i[c])return i[c].exports;var d=i[c]={i:c,l:!1,exports:{}};return n[c].call(d.exports,d,d.exports,o),d.l=!0,d.exports}return o.m=n,o.c=i,o.d=function(c,d,m){o.o(c,d)||Object.defineProperty(c,d,{configurable:!1,enumerable:!0,get:m})},o.n=function(c){var d=c&&c.__esModule?function(){return c.default}:function(){return c};return o.d(d,"a",d),d},o.o=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)},o.p="",o(o.s=3)}([function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=function(){function d(m,h){this.width=h,this.height=m.length/h,this.data=m}return d.createEmpty=function(m,h){return new d(new Uint8ClampedArray(m*h),m)},d.prototype.get=function(m,h){return m<0||m>=this.width||h<0||h>=this.height?!1:!!this.data[h*this.width+m]},d.prototype.set=function(m,h,p){this.data[h*this.width+m]=p?1:0},d.prototype.setRegion=function(m,h,p,u,f){for(var g=h;g<h+u;g++)for(var y=m;y<m+p;y++)this.set(y,g,!!f)},d}();i.BitMatrix=c},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(2);function d(h,p){return h^p}i.addOrSubtractGF=d;var m=function(){function h(p,u,f){this.primitive=p,this.size=u,this.generatorBase=f,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var g=1,y=0;y<this.size;y++)this.expTable[y]=g,g=g*2,g>=this.size&&(g=(g^this.primitive)&this.size-1);for(var y=0;y<this.size-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new c.default(this,Uint8ClampedArray.from([0])),this.one=new c.default(this,Uint8ClampedArray.from([1]))}return h.prototype.multiply=function(p,u){return p===0||u===0?0:this.expTable[(this.logTable[p]+this.logTable[u])%(this.size-1)]},h.prototype.inverse=function(p){if(p===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[p]-1]},h.prototype.buildMonomial=function(p,u){if(p<0)throw new Error("Invalid monomial degree less than 0");if(u===0)return this.zero;var f=new Uint8ClampedArray(p+1);return f[0]=u,new c.default(this,f)},h.prototype.log=function(p){if(p===0)throw new Error("Can't take log(0)");return this.logTable[p]},h.prototype.exp=function(p){return this.expTable[p]},h}();i.default=m},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(1),d=function(){function m(h,p){if(p.length===0)throw new Error("No coefficients.");this.field=h;var u=p.length;if(u>1&&p[0]===0){for(var f=1;f<u&&p[f]===0;)f++;if(f===u)this.coefficients=h.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(u-f);for(var g=0;g<this.coefficients.length;g++)this.coefficients[g]=p[f+g]}}else this.coefficients=p}return m.prototype.degree=function(){return this.coefficients.length-1},m.prototype.isZero=function(){return this.coefficients[0]===0},m.prototype.getCoefficient=function(h){return this.coefficients[this.coefficients.length-1-h]},m.prototype.addOrSubtract=function(h){var p;if(this.isZero())return h;if(h.isZero())return this;var u=this.coefficients,f=h.coefficients;u.length>f.length&&(p=[f,u],u=p[0],f=p[1]);for(var g=new Uint8ClampedArray(f.length),y=f.length-u.length,b=0;b<y;b++)g[b]=f[b];for(var b=y;b<f.length;b++)g[b]=c.addOrSubtractGF(u[b-y],f[b]);return new m(this.field,g)},m.prototype.multiply=function(h){if(h===0)return this.field.zero;if(h===1)return this;for(var p=this.coefficients.length,u=new Uint8ClampedArray(p),f=0;f<p;f++)u[f]=this.field.multiply(this.coefficients[f],h);return new m(this.field,u)},m.prototype.multiplyPoly=function(h){if(this.isZero()||h.isZero())return this.field.zero;for(var p=this.coefficients,u=p.length,f=h.coefficients,g=f.length,y=new Uint8ClampedArray(u+g-1),b=0;b<u;b++)for(var j=p[b],N=0;N<g;N++)y[b+N]=c.addOrSubtractGF(y[b+N],this.field.multiply(j,f[N]));return new m(this.field,y)},m.prototype.multiplyByMonomial=function(h,p){if(h<0)throw new Error("Invalid degree less than 0");if(p===0)return this.field.zero;for(var u=this.coefficients.length,f=new Uint8ClampedArray(u+h),g=0;g<u;g++)f[g]=this.field.multiply(this.coefficients[g],p);return new m(this.field,f)},m.prototype.evaluateAt=function(h){var p=0;if(h===0)return this.getCoefficient(0);var u=this.coefficients.length;if(h===1)return this.coefficients.forEach(function(g){p=c.addOrSubtractGF(p,g)}),p;p=this.coefficients[0];for(var f=1;f<u;f++)p=c.addOrSubtractGF(this.field.multiply(h,p),this.coefficients[f]);return p},m}();i.default=d},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(4),d=o(5),m=o(11),h=o(12);function p(g){var y=h.locate(g);if(!y)return null;for(var b=0,j=y;b<j.length;b++){var N=j[b],w=m.extract(g,N),B=d.decode(w.matrix);if(B)return{binaryData:B.bytes,data:B.text,chunks:B.chunks,version:B.version,location:{topRightCorner:w.mappingFunction(N.dimension,0),topLeftCorner:w.mappingFunction(0,0),bottomRightCorner:w.mappingFunction(N.dimension,N.dimension),bottomLeftCorner:w.mappingFunction(0,N.dimension),topRightFinderPattern:N.topRight,topLeftFinderPattern:N.topLeft,bottomLeftFinderPattern:N.bottomLeft,bottomRightAlignmentPattern:N.alignmentPattern}}}return null}var u={inversionAttempts:"attemptBoth"};function f(g,y,b,j){j===void 0&&(j={});var N=u;Object.keys(N||{}).forEach(function(D){N[D]=j[D]||N[D]});var w=N.inversionAttempts==="attemptBoth"||N.inversionAttempts==="invertFirst",B=N.inversionAttempts==="onlyInvert"||N.inversionAttempts==="invertFirst",S=c.binarize(g,y,b,w),_=S.binarized,k=S.inverted,E=p(B?k:_);return!E&&(N.inversionAttempts==="attemptBoth"||N.inversionAttempts==="invertFirst")&&(E=p(B?_:k)),E}f.default=f,i.default=f},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(0),d=8,m=24;function h(f,g,y){return f<g?g:f>y?y:f}var p=function(){function f(g,y){this.width=g,this.data=new Uint8ClampedArray(g*y)}return f.prototype.get=function(g,y){return this.data[y*this.width+g]},f.prototype.set=function(g,y,b){this.data[y*this.width+g]=b},f}();function u(f,g,y,b){if(f.length!==g*y*4)throw new Error("Malformed data passed to binarizer.");for(var j=new p(g,y),N=0;N<g;N++)for(var w=0;w<y;w++){var B=f[(w*g+N)*4+0],S=f[(w*g+N)*4+1],_=f[(w*g+N)*4+2];j.set(N,w,.2126*B+.7152*S+.0722*_)}for(var k=Math.ceil(g/d),E=Math.ceil(y/d),D=new p(k,E),F=0;F<E;F++)for(var M=0;M<k;M++){for(var P=0,T=1/0,L=0,w=0;w<d;w++)for(var N=0;N<d;N++){var X=j.get(M*d+N,F*d+w);P+=X,T=Math.min(T,X),L=Math.max(L,X)}var Z=P/Math.pow(d,2);if(L-T<=m&&(Z=T/2,F>0&&M>0)){var ne=(D.get(M,F-1)+2*D.get(M-1,F)+D.get(M-1,F-1))/4;T<ne&&(Z=ne)}D.set(M,F,Z)}var I=c.BitMatrix.createEmpty(g,y),O=null;b&&(O=c.BitMatrix.createEmpty(g,y));for(var F=0;F<E;F++)for(var M=0;M<k;M++){for(var G=h(M,2,k-3),te=h(F,2,E-3),P=0,Q=-2;Q<=2;Q++)for(var ee=-2;ee<=2;ee++)P+=D.get(G+Q,te+ee);for(var le=P/25,Q=0;Q<d;Q++)for(var ee=0;ee<d;ee++){var N=M*d+Q,w=F*d+ee,R=j.get(N,w);I.set(N,w,R<=le),b&&O.set(N,w,!(R<=le))}}return b?{binarized:I,inverted:O}:{binarized:I}}i.binarize=u},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(0),d=o(6),m=o(9),h=o(10);function p(_,k){for(var E=_^k,D=0;E;)D++,E&=E-1;return D}function u(_,k){return k<<1|_}var f=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],g=[function(_){return(_.y+_.x)%2===0},function(_){return _.y%2===0},function(_){return _.x%3===0},function(_){return(_.y+_.x)%3===0},function(_){return(Math.floor(_.y/2)+Math.floor(_.x/3))%2===0},function(_){return _.x*_.y%2+_.x*_.y%3===0},function(_){return(_.y*_.x%2+_.y*_.x%3)%2===0},function(_){return((_.y+_.x)%2+_.y*_.x%3)%2===0}];function y(_){var k=17+4*_.versionNumber,E=c.BitMatrix.createEmpty(k,k);E.setRegion(0,0,9,9,!0),E.setRegion(k-8,0,8,9,!0),E.setRegion(0,k-8,9,8,!0);for(var D=0,F=_.alignmentPatternCenters;D<F.length;D++)for(var M=F[D],P=0,T=_.alignmentPatternCenters;P<T.length;P++){var L=T[P];M===6&&L===6||M===6&&L===k-7||M===k-7&&L===6||E.setRegion(M-2,L-2,5,5,!0)}return E.setRegion(6,9,1,k-17,!0),E.setRegion(9,6,k-17,1,!0),_.versionNumber>6&&(E.setRegion(k-11,0,3,6,!0),E.setRegion(0,k-11,6,3,!0)),E}function b(_,k,E){for(var D=g[E.dataMask],F=_.height,M=y(k),P=[],T=0,L=0,X=!0,Z=F-1;Z>0;Z-=2){Z===6&&Z--;for(var ne=0;ne<F;ne++)for(var I=X?F-1-ne:ne,O=0;O<2;O++){var G=Z-O;if(!M.get(G,I)){L++;var te=_.get(G,I);D({y:I,x:G})&&(te=!te),T=u(te,T),L===8&&(P.push(T),L=0,T=0)}}X=!X}return P}function j(_){var k=_.height,E=Math.floor((k-17)/4);if(E<=6)return h.VERSIONS[E-1];for(var D=0,F=5;F>=0;F--)for(var M=k-9;M>=k-11;M--)D=u(_.get(M,F),D);for(var P=0,M=5;M>=0;M--)for(var F=k-9;F>=k-11;F--)P=u(_.get(M,F),P);for(var T=1/0,L,X=0,Z=h.VERSIONS;X<Z.length;X++){var ne=Z[X];if(ne.infoBits===D||ne.infoBits===P)return ne;var I=p(D,ne.infoBits);I<T&&(L=ne,T=I),I=p(P,ne.infoBits),I<T&&(L=ne,T=I)}if(T<=3)return L}function N(_){for(var k=0,E=0;E<=8;E++)E!==6&&(k=u(_.get(E,8),k));for(var D=7;D>=0;D--)D!==6&&(k=u(_.get(8,D),k));for(var F=_.height,M=0,D=F-1;D>=F-7;D--)M=u(_.get(8,D),M);for(var E=F-8;E<F;E++)M=u(_.get(E,8),M);for(var P=1/0,T=null,L=0,X=f;L<X.length;L++){var Z=X[L],ne=Z.bits,I=Z.formatInfo;if(ne===k||ne===M)return I;var O=p(k,ne);O<P&&(T=I,P=O),k!==M&&(O=p(M,ne),O<P&&(T=I,P=O))}return P<=3?T:null}function w(_,k,E){var D=k.errorCorrectionLevels[E],F=[],M=0;if(D.ecBlocks.forEach(function(te){for(var Q=0;Q<te.numBlocks;Q++)F.push({numDataCodewords:te.dataCodewordsPerBlock,codewords:[]}),M+=te.dataCodewordsPerBlock+D.ecCodewordsPerBlock}),_.length<M)return null;_=_.slice(0,M);for(var P=D.ecBlocks[0].dataCodewordsPerBlock,T=0;T<P;T++)for(var L=0,X=F;L<X.length;L++){var Z=X[L];Z.codewords.push(_.shift())}if(D.ecBlocks.length>1)for(var ne=D.ecBlocks[0].numBlocks,I=D.ecBlocks[1].numBlocks,T=0;T<I;T++)F[ne+T].codewords.push(_.shift());for(;_.length>0;)for(var O=0,G=F;O<G.length;O++){var Z=G[O];Z.codewords.push(_.shift())}return F}function B(_){var k=j(_);if(!k)return null;var E=N(_);if(!E)return null;var D=b(_,k,E),F=w(D,k,E.errorCorrectionLevel);if(!F)return null;for(var M=F.reduce(function(O,G){return O+G.numDataCodewords},0),P=new Uint8ClampedArray(M),T=0,L=0,X=F;L<X.length;L++){var Z=X[L],ne=m.decode(Z.codewords,Z.codewords.length-Z.numDataCodewords);if(!ne)return null;for(var I=0;I<Z.numDataCodewords;I++)P[T++]=ne[I]}try{return d.decode(P,k.versionNumber)}catch{return null}}function S(_){if(_==null)return null;var k=B(_);if(k)return k;for(var E=0;E<_.width;E++)for(var D=E+1;D<_.height;D++)_.get(E,D)!==_.get(D,E)&&(_.set(E,D,!_.get(E,D)),_.set(D,E,!_.get(D,E)));return B(_)}i.decode=S},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(7),d=o(8),m;(function(j){j.Numeric="numeric",j.Alphanumeric="alphanumeric",j.Byte="byte",j.Kanji="kanji",j.ECI="eci"})(m=i.Mode||(i.Mode={}));var h;(function(j){j[j.Terminator=0]="Terminator",j[j.Numeric=1]="Numeric",j[j.Alphanumeric=2]="Alphanumeric",j[j.Byte=4]="Byte",j[j.Kanji=8]="Kanji",j[j.ECI=7]="ECI"})(h||(h={}));function p(j,N){for(var w=[],B="",S=[10,12,14][N],_=j.readBits(S);_>=3;){var k=j.readBits(10);if(k>=1e3)throw new Error("Invalid numeric value above 999");var E=Math.floor(k/100),D=Math.floor(k/10)%10,F=k%10;w.push(48+E,48+D,48+F),B+=E.toString()+D.toString()+F.toString(),_-=3}if(_===2){var k=j.readBits(7);if(k>=100)throw new Error("Invalid numeric value above 99");var E=Math.floor(k/10),D=k%10;w.push(48+E,48+D),B+=E.toString()+D.toString()}else if(_===1){var k=j.readBits(4);if(k>=10)throw new Error("Invalid numeric value above 9");w.push(48+k),B+=k.toString()}return{bytes:w,text:B}}var u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function f(j,N){for(var w=[],B="",S=[9,11,13][N],_=j.readBits(S);_>=2;){var k=j.readBits(11),E=Math.floor(k/45),D=k%45;w.push(u[E].charCodeAt(0),u[D].charCodeAt(0)),B+=u[E]+u[D],_-=2}if(_===1){var E=j.readBits(6);w.push(u[E].charCodeAt(0)),B+=u[E]}return{bytes:w,text:B}}function g(j,N){for(var w=[],B="",S=[8,16,16][N],_=j.readBits(S),k=0;k<_;k++){var E=j.readBits(8);w.push(E)}try{B+=decodeURIComponent(w.map(function(D){return"%"+("0"+D.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:w,text:B}}function y(j,N){for(var w=[],B="",S=[8,10,12][N],_=j.readBits(S),k=0;k<_;k++){var E=j.readBits(13),D=Math.floor(E/192)<<8|E%192;D<7936?D+=33088:D+=49472,w.push(D>>8,D&255),B+=String.fromCharCode(d.shiftJISTable[D])}return{bytes:w,text:B}}function b(j,N){for(var w,B,S,_,k=new c.BitStream(j),E=N<=9?0:N<=26?1:2,D={text:"",bytes:[],chunks:[],version:N};k.available()>=4;){var F=k.readBits(4);if(F===h.Terminator)return D;if(F===h.ECI)k.readBits(1)===0?D.chunks.push({type:m.ECI,assignmentNumber:k.readBits(7)}):k.readBits(1)===0?D.chunks.push({type:m.ECI,assignmentNumber:k.readBits(14)}):k.readBits(1)===0?D.chunks.push({type:m.ECI,assignmentNumber:k.readBits(21)}):D.chunks.push({type:m.ECI,assignmentNumber:-1});else if(F===h.Numeric){var M=p(k,E);D.text+=M.text,(w=D.bytes).push.apply(w,M.bytes),D.chunks.push({type:m.Numeric,text:M.text})}else if(F===h.Alphanumeric){var P=f(k,E);D.text+=P.text,(B=D.bytes).push.apply(B,P.bytes),D.chunks.push({type:m.Alphanumeric,text:P.text})}else if(F===h.Byte){var T=g(k,E);D.text+=T.text,(S=D.bytes).push.apply(S,T.bytes),D.chunks.push({type:m.Byte,bytes:T.bytes,text:T.text})}else if(F===h.Kanji){var L=y(k,E);D.text+=L.text,(_=D.bytes).push.apply(_,L.bytes),D.chunks.push({type:m.Kanji,bytes:L.bytes,text:L.text})}}if(k.available()===0||k.readBits(k.available())===0)return D}i.decode=b},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=function(){function d(m){this.byteOffset=0,this.bitOffset=0,this.bytes=m}return d.prototype.readBits=function(m){if(m<1||m>32||m>this.available())throw new Error("Cannot read "+m.toString()+" bits");var h=0;if(this.bitOffset>0){var p=8-this.bitOffset,u=m<p?m:p,f=p-u,g=255>>8-u<<f;h=(this.bytes[this.byteOffset]&g)>>f,m-=u,this.bitOffset+=u,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(m>0){for(;m>=8;)h=h<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,m-=8;if(m>0){var f=8-m,g=255>>f<<f;h=h<<m|(this.bytes[this.byteOffset]&g)>>f,this.bitOffset+=m}}return h},d.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},d}();i.BitStream=c},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(1),d=o(2);function m(f,g,y,b){var j;g.degree()<y.degree()&&(j=[y,g],g=j[0],y=j[1]);for(var N=g,w=y,B=f.zero,S=f.one;w.degree()>=b/2;){var _=N,k=B;if(N=w,B=S,N.isZero())return null;w=_;for(var E=f.zero,D=N.getCoefficient(N.degree()),F=f.inverse(D);w.degree()>=N.degree()&&!w.isZero();){var M=w.degree()-N.degree(),P=f.multiply(w.getCoefficient(w.degree()),F);E=E.addOrSubtract(f.buildMonomial(M,P)),w=w.addOrSubtract(N.multiplyByMonomial(M,P))}if(S=E.multiplyPoly(B).addOrSubtract(k),w.degree()>=N.degree())return null}var T=S.getCoefficient(0);if(T===0)return null;var L=f.inverse(T);return[S.multiply(L),w.multiply(L)]}function h(f,g){var y=g.degree();if(y===1)return[g.getCoefficient(1)];for(var b=new Array(y),j=0,N=1;N<f.size&&j<y;N++)g.evaluateAt(N)===0&&(b[j]=f.inverse(N),j++);return j!==y?null:b}function p(f,g,y){for(var b=y.length,j=new Array(b),N=0;N<b;N++){for(var w=f.inverse(y[N]),B=1,S=0;S<b;S++)N!==S&&(B=f.multiply(B,c.addOrSubtractGF(1,f.multiply(y[S],w))));j[N]=f.multiply(g.evaluateAt(w),f.inverse(B)),f.generatorBase!==0&&(j[N]=f.multiply(j[N],w))}return j}function u(f,g){var y=new Uint8ClampedArray(f.length);y.set(f);for(var b=new c.default(285,256,0),j=new d.default(b,y),N=new Uint8ClampedArray(g),w=!1,B=0;B<g;B++){var S=j.evaluateAt(b.exp(B+b.generatorBase));N[N.length-1-B]=S,S!==0&&(w=!0)}if(!w)return y;var _=new d.default(b,N),k=m(b,b.buildMonomial(g,1),_,g);if(k===null)return null;var E=h(b,k[0]);if(E==null)return null;for(var D=p(b,k[1],E),F=0;F<E.length;F++){var M=y.length-1-b.log(E[F]);if(M<0)return null;y[M]=c.addOrSubtractGF(y[M],D[F])}return y}i.decode=u},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=o(0);function d(u,f,g,y){var b=u.x-f.x+g.x-y.x,j=u.y-f.y+g.y-y.y;if(b===0&&j===0)return{a11:f.x-u.x,a12:f.y-u.y,a13:0,a21:g.x-f.x,a22:g.y-f.y,a23:0,a31:u.x,a32:u.y,a33:1};var N=f.x-g.x,w=y.x-g.x,B=f.y-g.y,S=y.y-g.y,_=N*S-w*B,k=(b*S-w*j)/_,E=(N*j-b*B)/_;return{a11:f.x-u.x+k*f.x,a12:f.y-u.y+k*f.y,a13:k,a21:y.x-u.x+E*y.x,a22:y.y-u.y+E*y.y,a23:E,a31:u.x,a32:u.y,a33:1}}function m(u,f,g,y){var b=d(u,f,g,y);return{a11:b.a22*b.a33-b.a23*b.a32,a12:b.a13*b.a32-b.a12*b.a33,a13:b.a12*b.a23-b.a13*b.a22,a21:b.a23*b.a31-b.a21*b.a33,a22:b.a11*b.a33-b.a13*b.a31,a23:b.a13*b.a21-b.a11*b.a23,a31:b.a21*b.a32-b.a22*b.a31,a32:b.a12*b.a31-b.a11*b.a32,a33:b.a11*b.a22-b.a12*b.a21}}function h(u,f){return{a11:u.a11*f.a11+u.a21*f.a12+u.a31*f.a13,a12:u.a12*f.a11+u.a22*f.a12+u.a32*f.a13,a13:u.a13*f.a11+u.a23*f.a12+u.a33*f.a13,a21:u.a11*f.a21+u.a21*f.a22+u.a31*f.a23,a22:u.a12*f.a21+u.a22*f.a22+u.a32*f.a23,a23:u.a13*f.a21+u.a23*f.a22+u.a33*f.a23,a31:u.a11*f.a31+u.a21*f.a32+u.a31*f.a33,a32:u.a12*f.a31+u.a22*f.a32+u.a32*f.a33,a33:u.a13*f.a31+u.a23*f.a32+u.a33*f.a33}}function p(u,f){for(var g=m({x:3.5,y:3.5},{x:f.dimension-3.5,y:3.5},{x:f.dimension-6.5,y:f.dimension-6.5},{x:3.5,y:f.dimension-3.5}),y=d(f.topLeft,f.topRight,f.alignmentPattern,f.bottomLeft),b=h(y,g),j=c.BitMatrix.createEmpty(f.dimension,f.dimension),N=function(E,D){var F=b.a13*E+b.a23*D+b.a33;return{x:(b.a11*E+b.a21*D+b.a31)/F,y:(b.a12*E+b.a22*D+b.a32)/F}},w=0;w<f.dimension;w++)for(var B=0;B<f.dimension;B++){var S=B+.5,_=w+.5,k=N(S,_);j.set(B,w,u.get(Math.floor(k.x),Math.floor(k.y)))}return{matrix:j,mappingFunction:N}}i.extract=p},function(n,i,o){Object.defineProperty(i,"__esModule",{value:!0});var c=4,d=.5,m=1.5,h=function(S,_){return Math.sqrt(Math.pow(_.x-S.x,2)+Math.pow(_.y-S.y,2))};function p(S){return S.reduce(function(_,k){return _+k})}function u(S,_,k){var E,D,F,M,P=h(S,_),T=h(_,k),L=h(S,k),X,Z,ne;return T>=P&&T>=L?(E=[_,S,k],X=E[0],Z=E[1],ne=E[2]):L>=T&&L>=P?(D=[S,_,k],X=D[0],Z=D[1],ne=D[2]):(F=[S,k,_],X=F[0],Z=F[1],ne=F[2]),(ne.x-Z.x)*(X.y-Z.y)-(ne.y-Z.y)*(X.x-Z.x)<0&&(M=[ne,X],X=M[0],ne=M[1]),{bottomLeft:X,topLeft:Z,topRight:ne}}function f(S,_,k,E){var D=(p(y(S,k,E,5))/7+p(y(S,_,E,5))/7+p(y(k,S,E,5))/7+p(y(_,S,E,5))/7)/4;if(D<1)throw new Error("Invalid module size");var F=Math.round(h(S,_)/D),M=Math.round(h(S,k)/D),P=Math.floor((F+M)/2)+7;switch(P%4){case 0:P++;break;case 2:P--;break}return{dimension:P,moduleSize:D}}function g(S,_,k,E){var D=[{x:Math.floor(S.x),y:Math.floor(S.y)}],F=Math.abs(_.y-S.y)>Math.abs(_.x-S.x),M,P,T,L;F?(M=Math.floor(S.y),P=Math.floor(S.x),T=Math.floor(_.y),L=Math.floor(_.x)):(M=Math.floor(S.x),P=Math.floor(S.y),T=Math.floor(_.x),L=Math.floor(_.y));for(var X=Math.abs(T-M),Z=Math.abs(L-P),ne=Math.floor(-X/2),I=M<T?1:-1,O=P<L?1:-1,G=!0,te=M,Q=P;te!==T+I;te+=I){var ee=F?Q:te,le=F?te:Q;if(k.get(ee,le)!==G&&(G=!G,D.push({x:ee,y:le}),D.length===E+1))break;if(ne+=Z,ne>0){if(Q===L)break;Q+=O,ne-=X}}for(var R=[],q=0;q<E;q++)D[q]&&D[q+1]?R.push(h(D[q],D[q+1])):R.push(0);return R}function y(S,_,k,E){var D,F=_.y-S.y,M=_.x-S.x,P=g(S,_,k,Math.ceil(E/2)),T=g(S,{x:S.x-M,y:S.y-F},k,Math.ceil(E/2)),L=P.shift()+T.shift()-1;return(D=T.concat(L)).concat.apply(D,P)}function b(S,_){var k=p(S)/p(_),E=0;return _.forEach(function(D,F){E+=Math.pow(S[F]-D*k,2)}),{averageSize:k,error:E}}function j(S,_,k){try{var E=y(S,{x:-1,y:S.y},k,_.length),D=y(S,{x:S.x,y:-1},k,_.length),F={x:Math.max(0,S.x-S.y)-1,y:Math.max(0,S.y-S.x)-1},M=y(S,F,k,_.length),P={x:Math.min(k.width,S.x+S.y)+1,y:Math.min(k.height,S.y+S.x)+1},T=y(S,P,k,_.length),L=b(E,_),X=b(D,_),Z=b(M,_),ne=b(T,_),I=Math.sqrt(L.error*L.error+X.error*X.error+Z.error*Z.error+ne.error*ne.error),O=(L.averageSize+X.averageSize+Z.averageSize+ne.averageSize)/4,G=(Math.pow(L.averageSize-O,2)+Math.pow(X.averageSize-O,2)+Math.pow(Z.averageSize-O,2)+Math.pow(ne.averageSize-O,2))/O;return I+G}catch{return 1/0}}function N(S,_){for(var k=Math.round(_.x);S.get(k,Math.round(_.y));)k--;for(var E=Math.round(_.x);S.get(E,Math.round(_.y));)E++;for(var D=(k+E)/2,F=Math.round(_.y);S.get(Math.round(D),F);)F--;for(var M=Math.round(_.y);S.get(Math.round(D),M);)M++;var P=(F+M)/2;return{x:D,y:P}}function w(S){for(var _=[],k=[],E=[],D=[],F=function(ee){for(var le=0,R=!1,q=[0,0,0,0,0],J=function(Y){var xe=S.get(Y,ee);if(xe===R)le++;else{q=[q[1],q[2],q[3],q[4],le],le=1,R=xe;var oe=p(q)/7,de=Math.abs(q[0]-oe)<oe&&Math.abs(q[1]-oe)<oe&&Math.abs(q[2]-3*oe)<3*oe&&Math.abs(q[3]-oe)<oe&&Math.abs(q[4]-oe)<oe&&!xe,ve=p(q.slice(-3))/3,Me=Math.abs(q[2]-ve)<ve&&Math.abs(q[3]-ve)<ve&&Math.abs(q[4]-ve)<ve&&xe;if(de){var Ke=Y-q[3]-q[4],pe=Ke-q[2],be={startX:pe,endX:Ke,y:ee},Be=k.filter(function(Ie){return pe>=Ie.bottom.startX&&pe<=Ie.bottom.endX||Ke>=Ie.bottom.startX&&pe<=Ie.bottom.endX||pe<=Ie.bottom.startX&&Ke>=Ie.bottom.endX&&q[2]/(Ie.bottom.endX-Ie.bottom.startX)<m&&q[2]/(Ie.bottom.endX-Ie.bottom.startX)>d});Be.length>0?Be[0].bottom=be:k.push({top:be,bottom:be})}if(Me){var Ue=Y-q[4],ue=Ue-q[3],be={startX:ue,y:ee,endX:Ue},Be=D.filter(function(Le){return ue>=Le.bottom.startX&&ue<=Le.bottom.endX||Ue>=Le.bottom.startX&&ue<=Le.bottom.endX||ue<=Le.bottom.startX&&Ue>=Le.bottom.endX&&q[2]/(Le.bottom.endX-Le.bottom.startX)<m&&q[2]/(Le.bottom.endX-Le.bottom.startX)>d});Be.length>0?Be[0].bottom=be:D.push({top:be,bottom:be})}}},$=-1;$<=S.width;$++)J($);_.push.apply(_,k.filter(function(Y){return Y.bottom.y!==ee&&Y.bottom.y-Y.top.y>=2})),k=k.filter(function(Y){return Y.bottom.y===ee}),E.push.apply(E,D.filter(function(Y){return Y.bottom.y!==ee})),D=D.filter(function(Y){return Y.bottom.y===ee})},M=0;M<=S.height;M++)F(M);_.push.apply(_,k.filter(function(ee){return ee.bottom.y-ee.top.y>=2})),E.push.apply(E,D);var P=_.filter(function(ee){return ee.bottom.y-ee.top.y>=2}).map(function(ee){var le=(ee.top.startX+ee.top.endX+ee.bottom.startX+ee.bottom.endX)/4,R=(ee.top.y+ee.bottom.y+1)/2;if(S.get(Math.round(le),Math.round(R))){var q=[ee.top.endX-ee.top.startX,ee.bottom.endX-ee.bottom.startX,ee.bottom.y-ee.top.y+1],J=p(q)/q.length,$=j({x:Math.round(le),y:Math.round(R)},[1,1,3,1,1],S);return{score:$,x:le,y:R,size:J}}}).filter(function(ee){return!!ee}).sort(function(ee,le){return ee.score-le.score}).map(function(ee,le,R){if(le>c)return null;var q=R.filter(function($,Y){return le!==Y}).map(function($){return{x:$.x,y:$.y,score:$.score+Math.pow($.size-ee.size,2)/ee.size,size:$.size}}).sort(function($,Y){return $.score-Y.score});if(q.length<2)return null;var J=ee.score+q[0].score+q[1].score;return{points:[ee].concat(q.slice(0,2)),score:J}}).filter(function(ee){return!!ee}).sort(function(ee,le){return ee.score-le.score});if(P.length===0)return null;var T=u(P[0].points[0],P[0].points[1],P[0].points[2]),L=T.topRight,X=T.topLeft,Z=T.bottomLeft,ne=B(S,E,L,X,Z),I=[];ne&&I.push({alignmentPattern:{x:ne.alignmentPattern.x,y:ne.alignmentPattern.y},bottomLeft:{x:Z.x,y:Z.y},dimension:ne.dimension,topLeft:{x:X.x,y:X.y},topRight:{x:L.x,y:L.y}});var O=N(S,L),G=N(S,X),te=N(S,Z),Q=B(S,E,O,G,te);return Q&&I.push({alignmentPattern:{x:Q.alignmentPattern.x,y:Q.alignmentPattern.y},bottomLeft:{x:te.x,y:te.y},topLeft:{x:G.x,y:G.y},topRight:{x:O.x,y:O.y},dimension:Q.dimension}),I.length===0?null:I}i.locate=w;function B(S,_,k,E,D){var F,M,P;try{F=f(E,k,D,S),M=F.dimension,P=F.moduleSize}catch{return null}var T={x:k.x-E.x+D.x,y:k.y-E.y+D.y},L=(h(E,D)+h(E,k))/2/P,X=1-3/L,Z={x:E.x+X*(T.x-E.x),y:E.y+X*(T.y-E.y)},ne=_.map(function(O){var G=(O.top.startX+O.top.endX+O.bottom.startX+O.bottom.endX)/4,te=(O.top.y+O.bottom.y+1)/2;if(S.get(Math.floor(G),Math.floor(te))){var Q=[O.top.endX-O.top.startX,O.bottom.endX-O.bottom.startX,O.bottom.y-O.top.y+1];p(Q)/Q.length;var ee=j({x:Math.floor(G),y:Math.floor(te)},[1,1,1],S),le=ee+h({x:G,y:te},Z);return{x:G,y:te,score:le}}}).filter(function(O){return!!O}).sort(function(O,G){return O.score-G.score}),I=L>=15&&ne.length?ne[0]:Z;return{alignmentPattern:I,dimension:M}}}]).default})}(Wu)),Wu.exports}var pz=hz();const fz=GA(pz),gz=({onBack:t})=>{const{user:s,isAuthenticated:n}=Dt(),[i,o]=C.useState(null),[c,d]=C.useState(!1),[m,h]=C.useState(!1),[p,u]=C.useState(!1),[f,g]=C.useState(""),[y,b]=C.useState("code"),[j,N]=C.useState(!1),[w,B]=C.useState(null),[S,_]=C.useState(null),[k,E]=C.useState(null),[D,F]=C.useState(!1),[M,P]=C.useState(null),T=C.useRef(null),L=C.useRef(null),X=C.useRef(null),Z=s?.id?me(H.services.vouchers.getVouchersByUser,{userId:s.id}):void 0,ne=s?.id?me(H.services.vouchers.debugUserVouchers,{userId:s.id}):void 0,I=Z===void 0&&s?.id,O=null,G=De(H.services.vouchers.claimVoucher),te=ue=>{switch(ue){case"available":return e.jsx(Je,{className:"w-5 h-5 text-green-400"});case"redeemed":return e.jsx(Qt,{className:"w-5 h-5 text-blue-400"});case"expired":return e.jsx(xs,{className:"w-5 h-5 text-red-400"});default:return e.jsx(Nt,{className:"w-5 h-5 text-gray-400"})}},Q=ue=>{switch(ue){case"available":return"bg-green-500/20 text-green-400 border-green-500/30";case"redeemed":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"expired":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},ee=ue=>{switch(ue){case"cash":return e.jsx(bm,{className:"w-4 h-4 text-[var(--color-primary)]"});case"percentage":return e.jsx(go,{className:"w-4 h-4 text-[var(--color-primary)]"});case"discount":return e.jsx(lj,{className:"w-4 h-4 text-[var(--color-primary)]"});default:return e.jsx(Qt,{className:"w-4 h-4 text-[var(--color-primary)]"})}},le=ue=>`${parseFloat(ue.value).toFixed(2)}`,R=ue=>ue.isExpired?"expired":ue.status==="assigned"?"available":ue.status==="redeemed"?"redeemed":ue.status||"unknown",q=ue=>{const Ie=new Date,st=new Date(ue),Le=Math.ceil((st-Ie)/(1e3*60*60*24));return Le<=7&&Le>0},J=ue=>{if(!ue)return"No expiry";const Ie=new Date(ue),Le=Math.ceil((Ie-new Date)/(1e3*60*60*24));return Le<0?"Expired":Le===0?"Expires today":Le===1?"Expires tomorrow":Le<=7?`Expires in ${Le} days`:Ie.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},$=Z?Z.filter(ue=>ue.status==="assigned"&&!ue.isExpired):[],Y=Z?Z.filter(ue=>ue.status==="redeemed"):[],xe=Z?Z.filter(ue=>ue.isExpired):[];console.log("=== VoucherManagement Debug ==="),console.log("User ID:",s?.id,typeof s?.id),console.log("Raw vouchers from API:",Z),console.log("Vouchers count:",Z?.length||0),console.log("Categorized vouchers:",{available:$.length,redeemed:Y.length,expired:xe.length}),console.log("Debug data from API:",ne),Z&&Z.length>0&&console.log("First voucher structure:",Z[0]);const oe=async(ue,Ie=null)=>{try{h(!0);const Le=(await G({code:ue,user_id:s.id})).voucher.value||Ie||"Unknown";P({type:"success",title:"Voucher Claimed Successfully",message:`Code: ${ue}
Value: ${parseFloat(Le).toLocaleString()}
You can now use this voucher at the barbershop.`}),d(!1),o(null),u(!1),g("")}catch(st){let Le=st.message;Le.includes("expired")?Le="This voucher has expired":Le.includes("already")||Le.includes("assigned")?Le="This voucher has already been claimed":Le.includes("Invalid")||Le.includes("not found")?Le="Invalid voucher code. Please check and try again.":Le.includes("maximum")||Le.includes("limit")?Le="This voucher has reached its usage limit":Le=Le||"Failed to claim voucher. Please try again.",P({type:"error",title:"Claim Failed",message:Le})}finally{h(!1)}},de=async()=>{if(!f.trim()){P({type:"warning",title:"Missing Code",message:"Please enter a voucher code"});return}try{F(!0),E(null),_(null),await oe(f.trim())}catch(ue){console.error("Error validating voucher:",ue),E("Failed to validate voucher. Please try again."),_(null)}finally{F(!1)}},ve=async()=>{if(S)try{await oe(S.code,S.value),g(""),_(null),E(null),u(!1)}catch{}},Me=async ue=>{const Ie=ue.target.files[0];if(Ie){try{const st=new Image,Le=document.createElement("canvas"),kt=Le.getContext("2d");st.onload=async()=>{Le.width=st.width,Le.height=st.height,kt.drawImage(st,0,0);try{const St=kt.getImageData(0,0,Le.width,Le.height),Jt=await Be(St);Jt?(await oe(Jt),u(!1)):P({type:"warning",title:"QR Code Not Found",message:"No QR code found in the image. Please try again."})}catch(St){console.error("Error decoding QR code:",St),P({type:"error",title:"QR Code Error",message:"Failed to decode QR code from image."})}};const Pt=new FileReader;Pt.onload=St=>{st.src=St.target.result},Pt.readAsDataURL(Ie)}catch(st){console.error("Error processing uploaded file:",st),P({type:"error",title:"Upload Error",message:"Failed to process uploaded file."})}T.current&&(T.current.value="")}},Ke=async()=>{try{B(null),N(!0);let ue;try{ue=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280,min:640},height:{ideal:720,min:480}}})}catch(Ie){console.log("Back camera not available, trying front camera:",Ie),ue=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280,min:640},height:{ideal:720,min:480}}})}L.current&&ue&&(L.current.srcObject=ue,L.current.onloadedmetadata=()=>{console.log("Video metadata loaded, dimensions:",L.current.videoWidth,"x",L.current.videoHeight),L.current.play().then(()=>{console.log("Video started successfully"),setTimeout(()=>{pe()},500)}).catch(Ie=>{console.error("Error playing video:",Ie),B("Failed to start camera preview."),N(!1)})},L.current.oncanplay=()=>{console.log("Video can start playing")},L.current.onplaying=()=>{console.log("Video is playing")},L.current.onerror=Ie=>{console.error("Video error:",Ie),B("Camera error occurred."),N(!1)})}catch(ue){console.error("Error starting camera:",ue);let Ie="Failed to access camera.";ue.name==="NotAllowedError"?Ie="Camera permission denied. Please allow camera access and try again.":ue.name==="NotFoundError"?Ie="No camera found on this device.":ue.name==="NotReadableError"&&(Ie="Camera is already in use by another application."),B(Ie),N(!1)}},pe=()=>{const ue=setInterval(async()=>{if(L.current&&X.current&&j&&L.current.readyState===4){const Ie=X.current,st=L.current,Le=Ie.getContext("2d");if(st.videoWidth>0&&st.videoHeight>0){Ie.width=st.videoWidth,Ie.height=st.videoHeight,Le.drawImage(st,0,0,Ie.width,Ie.height);try{const kt=Le.getImageData(0,0,Ie.width,Ie.height),Pt=await Be(kt);Pt&&(clearInterval(ue),be(),await oe(Pt),u(!1))}catch{}}}else j||clearInterval(ue)},500);setTimeout(()=>{clearInterval(ue),j&&(be(),B("Scanning timeout. Please try again."))},3e4)},be=()=>{N(!1),L.current&&L.current.srcObject&&(L.current.srcObject.getTracks().forEach(Ie=>Ie.stop()),L.current.srcObject=null)},Be=async ue=>{try{const Ie=fz(ue.data,ue.width,ue.height);if(Ie){let st=null;try{const Le=JSON.parse(Ie.data);st=Le.code||Le.voucherCode||Le.voucher_code}catch{st=Ie.data}return st}return null}catch(Ie){return console.error("Error decoding QR:",Ie),null}},Ue=({notification:ue,onClose:Ie})=>{if(!ue)return null;const Le=(kt=>{switch(kt){case"success":return{bg:"#F0FDF4",border:"#22C55E",Icon:Je,iconBg:"#22C55E"};case"error":return{bg:"#FEF2F2",border:"#EF4444",Icon:xs,iconBg:"#EF4444"};case"warning":return{bg:"#FFFBEB",border:"#F59E0B",Icon:Ea,iconBg:"#F59E0B"};default:return{bg:"#F4F0E6",border:"#F68B24",Icon:Ir,iconBg:"#F68B24"}}})(ue.type);return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border-2",style:{backgroundColor:Le.bg,borderColor:Le.border},role:"dialog","aria-modal":"true","aria-labelledby":"notification-title",tabIndex:"-1",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:Le.iconBg},children:e.jsx(Le.Icon,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{id:"notification-title",className:"text-lg font-black mb-2",style:{color:"#36454F"},children:ue.title}),e.jsx("p",{className:"text-sm whitespace-pre-line",style:{color:"#8B8B8B"},children:ue.message})]}),e.jsx("button",{onClick:Ie,className:"w-full py-3 bg-[#F68B24] hover:brightness-90 text-white font-bold rounded-xl transition-all duration-200",children:"OK"})]})})})};return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-b from-[#0A0A0A] to-[#0A0A0A]/95 backdrop-blur-2xl border-b border-[#1A1A1A] shadow-lg",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-4 py-2.5 bg-gradient-to-br from-[#1A1A1A] to-[#141414] text-white font-bold rounded-2xl hover:bg-[#1A1A1A] border border-[#2A2A2A] active:scale-95 transition-all duration-200 shadow-lg",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-black text-white",children:"Vouchers"}),e.jsxs("p",{className:"text-xs font-bold text-[var(--color-primary)]",children:[$.length+Y.length," total"]})]})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-[32px] p-6 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] shadow-2xl mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent pointer-events-none"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-3xl bg-white/20 backdrop-blur-xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:e.jsx(Qt,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-black mb-2 text-white",children:"Your Vouchers"}),e.jsx("p",{className:"text-sm font-semibold text-white/90",children:"Tap vouchers to view details"})]})]}),I&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"rounded-full w-16 h-16 bg-[var(--color-primary)]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(Qt,{className:"w-8 h-8 text-[var(--color-primary)]"})}),e.jsx("p",{className:"text-sm text-gray-400",children:"Loading vouchers..."})]}),O,!I&&!O&&$.length>0&&e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between px-2",children:e.jsxs("h2",{className:"text-lg font-black flex items-center text-white",children:[e.jsx(Je,{className:"w-5 h-5 text-green-400 mr-2"}),"Available (",$.length,")"]})}),e.jsx("div",{className:"space-y-3",children:$.map(ue=>e.jsxs("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#141414] rounded-3xl p-5 border border-[#2A2A2A] hover:border-[var(--color-primary)]/50 active:scale-98 transition-all duration-200 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"text-lg flex-shrink-0",children:ee(ue.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-black truncate text-white",children:ue.code}),e.jsx("p",{className:"text-xs truncate text-gray-400",children:ue.description||"Discount voucher"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[te(R(ue)),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold border ${Q(R(ue))}`,children:R(ue).toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Value"}),e.jsx("p",{className:"text-xs font-bold text-green-600 truncate",children:le(ue)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Je,{className:"w-2 h-2 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Claimed"}),e.jsx("p",{className:"text-xs font-bold truncate",style:{color:"#36454F"},children:ue.assigned_at?new Date(ue.assigned_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${ue.isExpired||q(ue.expires_at)?"bg-red-500":"bg-blue-500"}`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Expires"}),e.jsx("p",{className:`text-xs font-bold truncate ${ue.isExpired||q(ue.expires_at)?"text-red-600":"text-blue-600"}`,children:J(ue.expires_at)})]})]})]}),e.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),o(ue),d(!0)},className:"w-full py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-black rounded-2xl active:scale-95 transition-all duration-200 flex items-center justify-center space-x-2 shadow-lg",children:[e.jsx(rr,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"View QR Code"})]})]},ue._id))})]}),!I&&!O&&Y.length>0&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("h2",{className:"text-base font-black flex items-center px-2",style:{color:"#36454F"},children:[e.jsx(Qt,{className:"w-3.5 h-3.5 text-blue-500 mr-2"}),"Redeemed Vouchers (",Y.length,")"]}),e.jsx("div",{className:"space-y-2",children:Y.map(ue=>e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm opacity-75 touch-manipulation",style:{border:"1px solid #E0E0E0"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"text-lg opacity-50 flex-shrink-0",children:ee(ue.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-black truncate text-white",children:ue.code}),e.jsx("p",{className:"text-xs truncate text-gray-400",children:ue.description||"Discount voucher"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[te(R(ue)),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold border ${Q(R(ue))}`,children:"REDEEMED"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Value"}),e.jsx("p",{className:"text-xs font-bold text-blue-600 truncate",children:le(ue)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Je,{className:"w-2 h-2 text-blue-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Redeemed"}),e.jsx("p",{className:"text-xs font-bold truncate",style:{color:"#36454F"},children:ue.assigned_at?new Date(ue.assigned_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${ue.isExpired||q(ue.expires_at)?"bg-red-500":"bg-blue-500"}`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Expired"}),e.jsx("p",{className:`text-xs font-bold truncate ${ue.isExpired||q(ue.expires_at)?"text-red-600":"text-blue-600"}`,children:J(ue.expires_at)})]})]})]}),e.jsx("div",{className:"text-center py-1.5 text-gray-500 text-xs",children:"This voucher has been redeemed"})]},ue._id))})]}),!I&&!O&&xe.length>0&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("h2",{className:"text-base font-black flex items-center px-2",style:{color:"#36454F"},children:[e.jsx(xs,{className:"w-3.5 h-3.5 text-red-500 mr-2"}),"Expired Vouchers (",xe.length,")"]}),e.jsx("div",{className:"space-y-2",children:xe.map(ue=>e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm opacity-50 touch-manipulation",style:{border:"1px solid #E0E0E0"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"text-lg opacity-50 flex-shrink-0",children:ee(ue.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-black truncate text-white",children:ue.code}),e.jsx("p",{className:"text-xs truncate text-gray-400",children:ue.description||"Discount voucher"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[te(R(ue)),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold border ${Q(R(ue))}`,children:R(ue).toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px] text-gray-500",children:"Value"}),e.jsx("p",{className:"text-xs font-bold text-red-600 truncate",children:le(ue)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(xs,{className:"w-2 h-2 text-red-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Expired"}),e.jsx("p",{className:"text-xs font-bold truncate",style:{color:"#36454F"},children:ue.expires_at?new Date(ue.expires_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Status"}),e.jsx("p",{className:"text-xs font-bold text-gray-600 truncate",children:"Expired"})]})]})]}),e.jsx("div",{className:"text-center py-1.5 text-red-500 text-xs",children:"This voucher has expired"})]},ue._id))})]}),!I&&!O&&$.length===0&&Y.length===0&&xe.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",style:{backgroundColor:"#F68B24",opacity:.1},children:e.jsx(lj,{className:"w-6 h-6",style:{color:"#F68B24"}})}),e.jsx("h3",{className:"text-base font-black mb-2",style:{color:"#36454F"},children:"No Vouchers Yet"}),e.jsx("p",{className:"text-xs max-w-md mx-auto mb-3",style:{color:"#8B8B8B"},children:"Your vouchers will appear here."})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full shadow-2xl",style:{backgroundColor:"#F4F0E6"},children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(Qt,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black mb-2",style:{color:"#36454F"},children:"Claim Voucher"}),e.jsx("p",{className:"font-medium",style:{color:"#8B8B8B"},children:"Enter your voucher code to claim"})]}),e.jsx("div",{className:"rounded-xl p-1",style:{backgroundColor:"#E0E0E0"},children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("button",{onClick:()=>b("code"),className:"py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 flex items-center justify-center space-x-1",style:{backgroundColor:y==="code"?"#F68B24":"transparent",color:y==="code"?"white":"#8B8B8B"},children:[e.jsx(E7,{className:"w-4 h-4"}),e.jsx("span",{children:"Code"})]}),e.jsxs("button",{onClick:()=>b("scan"),className:"py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 flex items-center justify-center space-x-1",style:{backgroundColor:y==="scan"?"#F68B24":"transparent",color:y==="scan"?"white":"#8B8B8B"},children:[e.jsx(da,{className:"w-4 h-4"}),e.jsx("span",{children:"Scan"})]}),e.jsxs("button",{onClick:()=>b("upload"),className:"py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 flex items-center justify-center space-x-1",style:{backgroundColor:y==="upload"?"#F68B24":"transparent",color:y==="upload"?"white":"#8B8B8B"},children:[e.jsx(ji,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload"})]})]})}),y==="code"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:f,onChange:ue=>{g(ue.target.value.toUpperCase()),_(null),E(null)},placeholder:"Enter voucher code",className:"w-full p-4 border-2 rounded-xl text-center font-mono text-lg tracking-widest focus:outline-none",style:{borderColor:"#E0E0E0",backgroundColor:"white",color:"#36454F"},onFocus:ue=>ue.target.style.borderColor="#F68B24",onBlur:ue=>ue.target.style.borderColor="#E0E0E0",maxLength:12})}),!S&&e.jsx("button",{onClick:de,disabled:D||!f.trim(),className:"w-full py-4 text-white font-bold rounded-2xl hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#36454F"},onMouseEnter:ue=>!ue.target.disabled&&(ue.target.style.backgroundColor="#2D3748"),onMouseLeave:ue=>!ue.target.disabled&&(ue.target.style.backgroundColor="#36454F"),children:D?"Validating...":"Validate Voucher"}),k&&e.jsx("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#FEF2F2",borderColor:"#F87171"},children:e.jsx("p",{className:"text-sm text-center",style:{color:"#DC2626"},children:k})}),S&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#F4F0E6",borderColor:"#F68B24"},children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(Qt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-black",style:{color:"#36454F"},children:S.code}),e.jsx("p",{className:"text-2xl font-black",style:{color:"#F68B24"},children:voucherService.formatVoucherValue(S.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"#8B8B8B"},children:"Points Required"}),e.jsx("p",{className:"font-bold",style:{color:"#36454F"},children:S.points_required})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#8B8B8B"},children:"Expires"}),e.jsx("p",{className:"font-bold",style:{color:"#36454F"},children:voucherService.formatVoucherExpiry(S.expires_at)})]})]}),e.jsx("div",{className:"text-xs",style:{color:"#8B8B8B"},children:e.jsxs("p",{children:["Uses: ",S.used_count,"/",S.max_uses]})})]})}),e.jsx("button",{onClick:ve,disabled:m,className:"w-full py-4 text-white font-bold rounded-2xl hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#F68B24"},onMouseEnter:ue=>!ue.target.disabled&&(ue.target.style.backgroundColor="#E67E22"),onMouseLeave:ue=>!ue.target.disabled&&(ue.target.style.backgroundColor="#F68B24"),children:m?"Claiming...":"Claim This Voucher"}),e.jsx("button",{onClick:()=>{_(null),E(null),g("")},className:"w-full py-2 text-gray-600 font-medium rounded-xl hover:bg-gray-100 transition-all duration-200",children:"Enter Different Code"})]})]}),y==="scan"&&e.jsx("div",{className:"space-y-4",children:j?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative bg-gray-900 rounded-xl overflow-hidden border-2",style:{borderColor:"#F68B24"},children:[e.jsx("video",{ref:L,className:"w-full h-64 object-cover bg-transparent",autoPlay:!0,playsInline:!0,muted:!0,style:{transform:"scaleX(-1)",backgroundColor:"transparent"}}),e.jsx("canvas",{ref:X,className:"hidden"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 border-2 border-white border-dashed rounded-lg"}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48",children:[e.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-l-4 border-t-4 border-green-400"}),e.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-r-4 border-t-4 border-green-400"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-l-4 border-b-4 border-green-400"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-r-4 border-b-4 border-green-400"})]})]}),e.jsx("button",{onClick:be,className:"absolute top-4 right-4 w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors",children:e.jsx(Ze,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#F4F0E6",borderColor:"#F68B24"},children:e.jsx("p",{className:"text-sm text-center",style:{color:"#36454F"},children:" Position the QR code within the frame above"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-xl p-6",style:{backgroundColor:"#F4F0E6",borderColor:"#F68B24"},children:[e.jsx(da,{className:"w-12 h-12 mx-auto mb-3",style:{color:"#F68B24"}}),e.jsx("p",{className:"text-sm mb-3",style:{color:"#36454F"},children:"Position the QR code within the camera frame to scan"}),e.jsx("button",{onClick:Ke,className:"w-full py-3 text-white font-semibold rounded-lg transition-colors",style:{backgroundColor:"#F68B24"},onMouseEnter:ue=>ue.target.style.backgroundColor="#E67E22",onMouseLeave:ue=>ue.target.style.backgroundColor="#F68B24",children:"Start Camera"})]}),w&&e.jsxs("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#FEF2F2",borderColor:"#F87171"},children:[e.jsx("p",{className:"text-sm",style:{color:"#DC2626"},children:w}),e.jsx("button",{onClick:()=>B(null),className:"mt-2 px-3 py-1 rounded text-xs transition-colors",style:{backgroundColor:"#FEE2E2",color:"#DC2626"},onMouseEnter:ue=>ue.target.style.backgroundColor="#FECACA",onMouseLeave:ue=>ue.target.style.backgroundColor="#FEE2E2",children:"Dismiss"})]})]})}),y==="upload"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{onClick:()=>T.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-xl p-8 hover:border-orange-400 hover:bg-orange-50 transition-all duration-200 cursor-pointer text-center",children:[e.jsx(ji,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2 font-medium",children:"Upload QR Code Image"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Supports JPG, PNG, WebP formats"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-blue-700 text-xs",children:[" ",e.jsx("strong",{children:"Tip:"})," Make sure the QR code is clear and well-lit for best results"]})}),e.jsx("input",{ref:T,type:"file",accept:"image/*,.jpg,.jpeg,.png,.webp",onChange:Me,className:"hidden"})]}),e.jsx("button",{onClick:()=>{j&&be(),u(!1),g(""),b("code"),B(null),_(null),E(null)},className:"w-full py-4 text-white font-bold rounded-2xl transition-all duration-200",style:{backgroundColor:"#36454F"},onMouseEnter:ue=>ue.target.style.backgroundColor="#2D3748",onMouseLeave:ue=>ue.target.style.backgroundColor="#36454F",children:"Close"})]})})}),c&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-orange to-primary-orange-light rounded-full flex items-center justify-center mx-auto",children:e.jsx(rr,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-primary-black mb-2",children:"Voucher QR Code"}),e.jsx("p",{className:"text-gray-dark font-medium",children:"Show this QR code to staff"})]}),e.jsx("div",{className:"bg-gray-light p-6 rounded-2xl",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(bz,{voucher:i})})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-xl font-black text-primary-black mb-1",children:i.code}),e.jsx("p",{className:"text-2xl font-black text-green-600 mb-1",children:le(i)}),e.jsx("p",{className:"text-sm text-gray-dark font-medium",children:i.description})]})}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{onClick:()=>d(!1),className:"w-full py-4 bg-gradient-to-r from-gray-500 to-gray-600 text-white font-bold rounded-2xl hover:shadow-xl transition-all duration-200",children:"Close"})})]})})}),e.jsx(Ue,{notification:M,onClose:()=>P(null)})]})},bz=({voucher:t})=>{const{user:s}=Dt(),n=C.useRef(null),i=()=>{const c=localStorage.getItem("username");return c||s?.username||"N/A"},o=JSON.stringify({voucherId:t._id,code:t.code,username:i(),value:t.value,expiresAt:t.expires_at,barbershop:" Barbershop"});return C.useEffect(()=>{n.current&&Cr.toCanvas(n.current,o,{width:192,margin:2,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"H"},c=>{c&&console.error("QR Code generation error:",c)})},[o]),e.jsx("canvas",{ref:n,className:"rounded-xl"})},vz=({onBack:t})=>{const[s]=C.useState(1250),[n]=C.useState(3480),[i]=C.useState("Gold"),[o]=C.useState("Platinum"),[c]=C.useState(250),d=[{id:1,date:"2024-01-15",description:"Premium Haircut",points:175,type:"earned"},{id:2,date:"2024-01-10",description:"Redeemed Birthday Voucher",points:-500,type:"redeemed"},{id:3,date:"2024-01-08",description:"Beard Trim & Style",points:125,type:"earned"},{id:4,date:"2024-01-05",description:"Bonus Points - Referral",points:200,type:"bonus"},{id:5,date:"2024-01-03",description:"Classic Cut",points:100,type:"earned"}],m=[{id:1,name:"Free Basic Haircut",pointsCost:500,category:"Services",available:!0,icon:"",description:"Get a complimentary basic haircut"},{id:2,name:"500 Service Voucher",pointsCost:750,category:"Vouchers",available:!0,icon:"",description:"500 off any service"},{id:3,name:"Premium Package Discount",pointsCost:1e3,category:"Services",available:!0,icon:"",description:"50% off complete grooming package"},{id:4,name:"VIP Priority Booking",pointsCost:300,category:"Perks",available:!0,icon:"",description:"Skip the queue with priority booking"},{id:5,name:"1,000 Cash Voucher",pointsCost:1500,category:"Vouchers",available:!1,icon:"",description:"1,000 cash voucher - Not enough points"},{id:6,name:"Platinum Membership",pointsCost:2e3,category:"Membership",available:!1,icon:"",description:"Upgrade to platinum tier - Not enough points"}],h=[{name:"Bronze",min:0,max:499,color:"from-amber-600 to-amber-700",icon:""},{name:"Silver",min:500,max:999,color:"from-gray-400 to-gray-500",icon:""},{name:"Gold",min:1e3,max:1499,color:"from-yellow-400 to-yellow-500",icon:""},{name:"Platinum",min:1500,max:2499,color:"from-purple-400 to-purple-500",icon:""},{name:"Diamond",min:2500,max:1/0,color:"from-blue-400 to-blue-500",icon:""}],p=()=>h.find(j=>s>=j.min&&s<=j.max),u=()=>{const j=h.findIndex(N=>N.name===i);return j<h.length-1?h[j+1]:null},f=()=>{const j=p(),N=u();if(!N)return 100;const w=s-j.min,B=N.min-j.min;return w/B*100},g=j=>{j.available&&s>=j.pointsCost&&window.confirm(`Redeem ${j.name} for ${j.pointsCost} points?`)&&alert("Reward redeemed successfully! Check your vouchers.")},y=p(),b=u();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-accent-cream to-white py-8",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 mb-8",children:[e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-4 py-3 text-gray-dark hover:text-primary-orange font-semibold rounded-2xl hover:bg-white/50 transition-all duration-200",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-primary-black",children:"Loyalty Rewards"}),e.jsxs("p",{className:"text-xs text-gray-dark",children:[i," Member"]})]})]}),e.jsxs("div",{className:"text-center mb-8 px-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-orange to-primary-orange-light rounded-full flex items-center justify-center mx-auto mb-4 shadow-2xl",children:e.jsx(Vt,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-black text-primary-black mb-2",children:"Loyalty Rewards"}),e.jsx("p",{className:"text-lg text-gray-dark font-medium",children:"Earn points, unlock rewards"})]}),e.jsxs("div",{className:"space-y-8 px-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-orange to-primary-orange-dark rounded-3xl p-8 shadow-2xl text-white",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"text-6xl",children:y?.icon}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black mb-2",children:[i," Member"]}),e.jsx("div",{className:"text-5xl font-black mb-2",children:s.toLocaleString()}),e.jsx("p",{className:"text-lg font-medium opacity-90",children:"Available Points"})]}),b&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsxs("span",{children:[c," points to ",o]}),e.jsxs("span",{children:[Math.round(f()),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:e.jsx("div",{className:"bg-white rounded-full h-3 transition-all duration-500",style:{width:`${f()}%`}})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-xl border-2 border-gray-medium",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ym,{className:"w-12 h-12 text-accent-coral mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-black text-primary-black mb-1",children:n.toLocaleString()}),e.jsx("div",{className:"text-sm font-semibold text-gray-dark",children:"Lifetime Points"})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-xl border-2 border-gray-medium",children:e.jsxs("div",{className:"text-center",children:[e.jsx(wr,{className:"w-12 h-12 text-primary-orange-light mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-black text-primary-black mb-1",children:"12"}),e.jsx("div",{className:"text-sm font-semibold text-gray-dark",children:"Services Used"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-black text-primary-black flex items-center",children:[e.jsx(Qt,{className:"w-6 h-6 text-primary-orange mr-2"}),"Available Rewards"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(j=>e.jsx("div",{className:`bg-white rounded-3xl p-6 shadow-xl border-2 transition-all duration-300 ${j.available&&s>=j.pointsCost?"border-green-200 hover:shadow-2xl hover:-translate-y-1 cursor-pointer":j.available?"border-yellow-200 opacity-75":"border-gray-200 opacity-50"}`,onClick:()=>g(j),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"text-4xl",children:j.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${j.available&&s>=j.pointsCost?"bg-green-100 text-green-700":j.available?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:j.category})}),e.jsx("h3",{className:"text-lg font-black text-primary-black mb-2",children:j.name}),e.jsx("p",{className:"text-sm text-gray-dark font-medium mb-3",children:j.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Vt,{className:"w-5 h-5 text-primary-orange"}),e.jsx("span",{className:"text-lg font-black text-primary-orange",children:j.pointsCost.toLocaleString()})]}),j.available&&s>=j.pointsCost&&e.jsx("span",{className:"text-xs font-bold text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"AVAILABLE"}),j.available&&s<j.pointsCost&&e.jsxs("span",{className:"text-xs font-bold text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full",children:[j.pointsCost-s," MORE"]})]})]})]})},j.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-black text-primary-black flex items-center",children:[e.jsx(Ja,{className:"w-6 h-6 text-primary-orange mr-2"}),"Membership Tiers"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((j,N)=>{const w=j.name===i,B=s>=j.min;return e.jsx("div",{className:`bg-gradient-to-br ${j.color} rounded-3xl p-6 shadow-xl text-white transition-all duration-300 ${w?"ring-4 ring-white shadow-2xl scale-105":""} ${B?"":"opacity-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:j.icon}),e.jsx("h3",{className:"text-xl font-black mb-2",children:j.name}),e.jsxs("p",{className:"text-sm font-medium opacity-90 mb-2",children:[j.min===0?"0":j.min.toLocaleString(),j.max===1/0?"+":` - ${j.max.toLocaleString()}`," points"]}),w&&e.jsx("div",{className:"bg-white/20 rounded-full px-3 py-1 text-xs font-bold",children:"CURRENT TIER"})]})},j.name)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-black text-primary-black flex items-center",children:[e.jsx(Do,{className:"w-6 h-6 text-primary-orange mr-2"}),"Recent Activity"]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border-2 border-gray-medium divide-y divide-gray-medium",children:d.map(j=>e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${j.type==="earned"?"bg-green-100":j.type==="bonus"?"bg-blue-100":"bg-red-100"}`,children:[j.type==="earned"&&e.jsx(Vt,{className:"w-6 h-6 text-green-600"}),j.type==="bonus"&&e.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),j.type==="redeemed"&&e.jsx(Do,{className:"w-6 h-6 text-red-600"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-primary-black",children:j.description}),e.jsx("p",{className:"text-sm text-gray-dark font-medium",children:new Date(j.date).toLocaleDateString()})]})]}),e.jsxs("div",{className:`text-lg font-black ${j.points>0?"text-green-600":"text-red-600"}`,children:[j.points>0?"+":"",j.points]})]},j.id))})]}),e.jsx("div",{className:"bg-gradient-to-br from-primary-orange to-primary-orange-dark rounded-3xl p-8 text-white",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Vt,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black mb-2",children:"Earn More Points"}),e.jsx("p",{className:"text-lg font-medium opacity-90 mb-4",children:"Every 1 spent = 1 point earned"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Book Services"}),e.jsx("div",{className:"opacity-80",children:"Earn 1 point per peso"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Refer Friends"}),e.jsx("div",{className:"opacity-80",children:"Get 200 bonus points"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Birthday Month"}),e.jsx("div",{className:"opacity-80",children:"Double points all month"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Complete Package"}),e.jsx("div",{className:"opacity-80",children:"50% bonus points"})]})]})]})]})})]})]})},yz=({onBack:t})=>{const{user:s,isAuthenticated:n}=Dt(),[i,o]=C.useState("all"),[c,d]=C.useState(null),[m,h]=C.useState(null),[p,u]=C.useState(!1),[f,g]=C.useState(null),[y,b]=C.useState(!1),[j,N]=C.useState(1),w=8,B=s?._id?me(H.services.bookings.getBookingsByCustomer,{customerId:s._id}):void 0,S=me(H.services.services.getAllServices),_=me(H.services.barbers.getAllBarbers),k=me(H.services.ratings.getAllRatings),E=s?._id&&(B===void 0||S===void 0||_===void 0),D=null,F=De(H.services.bookings.updateBooking),M=De(H.services.ratings.submitRating),P=async R=>{try{u(!0),await F({id:R,status:"cancelled"}),h(null);const q=document.createElement("div");q.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",q.textContent="Booking cancelled successfully",document.body.appendChild(q),setTimeout(()=>document.body.removeChild(q),3e3)}catch(q){console.error("Error cancelling booking:",q),alert(q.message||"Failed to cancel booking. Please try again.")}finally{u(!1)}},T=({booking:R,onSubmit:q,onClose:J,loading:$})=>{const[Y,xe]=C.useState(0),[oe,de]=C.useState(""),[ve,Me]=C.useState(0),Ke=()=>{if(Y===0){alert("Please select a rating");return}q(R,Y,oe)},pe=()=>{const be=[];for(let Be=1;Be<=5;Be++)be.push(e.jsx("button",{type:"button",onClick:()=>xe(Be),onMouseEnter:()=>Me(Be),onMouseLeave:()=>Me(0),className:"p-1 transition-all duration-200 hover:scale-110",children:e.jsx(Vt,{className:`w-8 h-8 transition-colors duration-200 ${Be<=(ve||Y)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},Be));return be};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto",style:{backgroundColor:"#F59E0B"},children:e.jsx(Vt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"#36454F"},children:"Rate Your Service"}),e.jsxs("p",{className:"text-sm",style:{color:"#8B8B8B"},children:["How was your experience with ",R.barber?.name||"your barber","?"]})]}),e.jsx("div",{className:"rounded-xl p-3 text-left",style:{backgroundColor:"#F4F0E6",border:"1px solid #E0E0E0"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Service:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:R.service?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Date:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:new Date(R.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Barber:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:R.barber?.name||"Any Barber"})]})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-3",style:{color:"#36454F"},children:"Rate your experience:"}),e.jsx("div",{className:"flex justify-center space-x-1 mb-2",children:pe()}),Y>0&&e.jsxs("p",{className:"text-xs",style:{color:"#8B8B8B"},children:[Y===1&&"Poor",Y===2&&"Fair",Y===3&&"Good",Y===4&&"Very Good",Y===5&&"Excellent"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#36454F"},children:"Additional Feedback (Optional)"}),e.jsx("textarea",{value:oe,onChange:be=>de(be.target.value),placeholder:"Share your thoughts about the service...",className:"w-full p-3 border rounded-lg resize-none text-sm",style:{borderColor:"#E0E0E0",backgroundColor:"#FAFAFA",color:"#36454F"},rows:3,maxLength:500}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"#8B8B8B"},children:[oe.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:J,disabled:$,className:"flex-1 py-3 border-2 font-bold rounded-xl transition-all duration-200",style:{borderColor:"#E0E0E0",color:"#8B8B8B"},onMouseEnter:be=>!$&&(be.target.style.backgroundColor="#F5F5F5"),onMouseLeave:be=>!$&&(be.target.style.backgroundColor="transparent"),children:"Cancel"}),e.jsx("button",{onClick:Ke,disabled:$||Y===0,className:`flex-1 py-3 text-white font-bold rounded-xl transition-all duration-200 ${$||Y===0?"opacity-75 cursor-not-allowed":""}`,style:{backgroundColor:$||Y===0?"#CCCCCC":"#F59E0B"},onMouseEnter:be=>!$&&Y>0&&(be.target.style.backgroundColor="#D97706"),onMouseLeave:be=>!$&&Y>0&&(be.target.style.backgroundColor="#F59E0B"),children:$?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Submitting..."})]}):"Submit Rating"})]})]})})})},L=async(R,q,J)=>{try{b(!0),await M({bookingId:R._id,customerId:s.id,barberId:R.barber._id||R.barber,serviceId:R.service._id||R.service,rating:q,feedback:J||void 0}),g(null);const $=document.createElement("div");$.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",$.textContent="Rating submitted successfully",document.body.appendChild($),setTimeout(()=>document.body.removeChild($),3e3)}catch($){console.error("Error submitting rating:",$),alert($.message||"Failed to submit rating. Please try again.")}finally{b(!1)}},X=R=>{switch(R){case"confirmed":return"bg-green-500/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},Z=B?B.filter(R=>i==="all"?!0:R.status===i):[];C.useEffect(()=>{N(1)},[i]);const ne=Math.ceil(Z.length/w),I=(j-1)*w,O=I+w,G=Z.slice(I,O),te=()=>{N(R=>Math.max(R-1,1))},Q=()=>{N(R=>Math.min(R+1,ne))},ee=R=>!k||!s?.id?!1:k.some(q=>q.booking_id===R&&q.customer_id===s.id),le=[{id:"all",label:"All Bookings",count:B?B.length:0},{id:"confirmed",label:"Confirmed",count:B?B.filter(R=>R.status==="confirmed").length:0},{id:"pending",label:"Pending",count:B?B.filter(R=>R.status==="pending").length:0},{id:"cancelled",label:"Cancelled",count:B?B.filter(R=>R.status==="cancelled").length:0}];return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-[#0A0A0A]/95 backdrop-blur-xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"My Bookings"}),e.jsxs("p",{className:"text-xs text-[var(--color-primary)]",children:[B?.length||0," total"]})]})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-3 border border-[#2A2A2A]",children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:le.map(R=>e.jsxs("button",{onClick:()=>o(R.id),className:`py-3 px-2 rounded-xl text-xs font-semibold transition-all duration-200 ${i===R.id?"bg-[var(--color-primary)] text-white":"text-gray-400 hover:text-gray-300 hover:bg-[#2A2A2A]"}`,children:[e.jsx("div",{children:R.label}),e.jsxs("div",{className:"text-xs mt-1 opacity-80",children:["(",R.count,")"]})]},R.id))})})}),E&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"rounded-full w-16 h-16 bg-[var(--color-primary)]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(rt,{className:"w-8 h-8 text-[var(--color-primary)]"})}),e.jsx("p",{className:"text-sm text-gray-400",children:"Loading bookings..."})]}),D,!E&&!D&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:Z.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rt,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),e.jsx("h3",{className:"text-xl font-bold mb-3 text-white",children:"No Bookings Found"}),e.jsx("p",{className:"mb-6 text-gray-400",children:i==="all"?"You haven't made any bookings yet":`No ${i} bookings found`}),e.jsx("button",{onClick:t,className:"px-6 py-3 text-white font-bold rounded-xl bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 transition-all duration-200 shadow-lg",children:"Book Your First Service"})]}):G.map(R=>{const q=S?.find($=>$._id===R.service)||{},J=_?.find($=>$._id===R.barber)||{};return console.log(`Booking ${R._id}:`,{voucher_code:R.voucher_code,total_amount:R.total_amount,voucherCode:R.voucherCode,voucher:R.voucher}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A] hover:border-[var(--color-primary)]/30 transition-all duration-200 p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-white truncate",children:q.name||"Service"}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${X(R.status)}`,children:R.status.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[e.jsxs("span",{children:["#",R.booking_code]}),R.branch_name&&e.jsxs("span",{className:"text-[var(--color-primary)] font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),R.branch_name]})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-3.5 h-3.5 text-[var(--color-primary)]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Date"}),e.jsx("p",{className:"font-medium text-white",children:new Date(R.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-3.5 h-3.5 text-[var(--color-primary)]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Time"}),e.jsx("p",{className:"font-medium text-white",children:R.time})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"w-3.5 h-3.5 text-[var(--color-primary)]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Barber"}),e.jsx("p",{className:"font-medium text-white",children:J.name||"Any Barber"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Price"}),e.jsxs("p",{className:"font-semibold text-[var(--color-primary)]",children:["",q.price?parseFloat(q.price).toLocaleString():"--"]})]}),(()=>{const $=R.voucher_code||R.voucherCode||R.voucher?.code;return $&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Voucher"}),e.jsx("p",{className:"text-xs font-medium text-green-400",children:$})]})})()]}),e.jsxs("div",{className:"flex gap-2",children:[R.status==="booked"&&e.jsxs("button",{onClick:()=>d({...R,service:q,barber:J}),className:"flex-1 py-2 px-3 bg-[var(--color-primary)] text-white text-xs font-medium rounded-lg hover:bg-[var(--color-accent)] transition-colors flex items-center justify-center gap-1",children:[e.jsx(rr,{className:"w-3 h-3"}),e.jsx("span",{children:"Show QR"})]}),R.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h({...R,service:q,barber:J}),className:"flex-1 py-2 px-3 bg-red-500 text-white text-xs font-medium rounded-lg hover:bg-red-600 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>d({...R,service:q,barber:J}),className:"flex-1 py-2 px-3 bg-[var(--color-primary)] text-white text-xs font-medium rounded-lg hover:bg-[var(--color-accent)] transition-colors flex items-center justify-center gap-1",children:[e.jsx(rr,{className:"w-3 h-3"}),e.jsx("span",{children:"QR Code"})]})]}),R.status==="completed"&&!ee(R._id)&&e.jsxs("button",{onClick:()=>g({...R,service:q,barber:J}),className:"flex-1 py-2 px-3 bg-yellow-500 text-white text-xs font-medium rounded-lg hover:bg-yellow-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),e.jsx("span",{children:"Rate"})]})]})]})]},R._id)})}),Z.length>0&&ne>1&&e.jsx("div",{className:"mt-6 bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:te,disabled:j===1,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${j===1?"text-gray-500 cursor-not-allowed":"text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx(Xa,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-400",children:["Page ",e.jsx("span",{className:"text-[var(--color-primary)] font-semibold",children:j})," of ",e.jsx("span",{className:"text-white font-semibold",children:ne})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",I+1,"-",Math.min(O,Z.length)," of ",Z.length,")"]})]}),e.jsxs("button",{onClick:Q,disabled:j===ne,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 ${j===ne?"text-gray-500 cursor-not-allowed":"text-white hover:bg-[#2A2A2A]"}`,children:[e.jsx("span",{className:"text-sm",children:"Next"}),e.jsx(sr,{className:"w-4 h-4"})]})]})})]})]}),f&&e.jsx(T,{booking:f,onSubmit:L,onClose:()=>g(null),loading:y}),c&&e.jsx(jz,{booking:c,onClose:()=>d(null)}),m&&e.jsx(Nz,{booking:m,onConfirm:P,onClose:()=>h(null),loading:p})]})},jz=({booking:t,onClose:s})=>{const n=C.useRef(null),i=t.booking_code;return C.useEffect(()=>{const o=setTimeout(()=>{n.current?Cr.toCanvas(n.current,i,{width:160,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},c=>{c&&console.error("QR Code generation error:",c)}):console.error("Canvas ref not available in MyBookings QR modal")},100);return()=>clearTimeout(o)},[i]),e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(rr,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"#36454F"},children:"Booking QR Code"}),e.jsx("p",{className:"text-sm",style:{color:"#36454F"},children:"Show this to staff when you arrive"})]}),e.jsx("div",{className:"p-4 rounded-xl",style:{backgroundColor:"#F4F0E6"},children:e.jsx("div",{className:"flex justify-center",children:e.jsx("canvas",{ref:n,className:"rounded-lg"})})}),e.jsx("div",{className:"rounded-xl p-3 text-left",style:{backgroundColor:"#F4F0E6",border:"1px solid #E0E0E0"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Service:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.service?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Date:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Time:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Barber:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.barber?.name||"Any Barber"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Code:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.booking_code})]}),(()=>{const o=t.voucher_code||t.voucherCode||t.voucher?.code,c=t.total_amount||t.totalAmount;return e.jsxs(e.Fragment,{children:[o&&e.jsxs("div",{className:"flex justify-between border-t pt-2",style:{borderColor:"#E0E0E0"},children:[e.jsx("span",{style:{color:"#22C55E"},children:"Voucher:"}),e.jsx("span",{className:"font-bold",style:{color:"#22C55E"},children:o})]}),c&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#3B82F6"},children:"Total Paid:"}),e.jsxs("span",{className:"font-bold",style:{color:"#3B82F6"},children:["",parseFloat(c).toLocaleString()]})]})]})})()]})}),e.jsx("button",{onClick:s,className:"w-full py-3 text-white font-bold rounded-xl transition-all duration-200",style:{backgroundColor:"#F68B24"},onMouseEnter:o=>o.target.style.backgroundColor="#E67E22",onMouseLeave:o=>o.target.style.backgroundColor="#F68B24",children:"Close"})]})})})},Nz=({booking:t,onConfirm:s,onClose:n,loading:i})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-red-100",children:e.jsx(xs,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#36454F"},children:"Cancel Booking?"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"#8B8B8B"},children:"Are you sure you want to cancel this booking? This action cannot be undone."})]}),e.jsx("div",{className:"rounded-xl p-4 text-left",style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Service:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.service?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Date:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.date?new Date(t.date).toLocaleDateString():"Today"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Time:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Barber:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.barber?.name||"Any Barber"})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",style:{borderColor:"#FECACA"},children:[e.jsx("span",{style:{color:"#36454F"},children:"Code:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:t.booking_code})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:n,disabled:i,className:"flex-1 py-3 border-2 font-bold rounded-xl transition-all duration-200",style:{borderColor:"#E0E0E0",color:"#8B8B8B"},onMouseEnter:o=>!i&&(o.target.style.backgroundColor="#F5F5F5"),onMouseLeave:o=>!i&&(o.target.style.backgroundColor="transparent"),children:"Keep Booking"}),e.jsx("button",{onClick:s,disabled:i,className:`flex-1 py-3 text-white font-bold rounded-xl transition-all duration-200 ${i?"opacity-75 cursor-not-allowed":""}`,style:{backgroundColor:i?"#CCCCCC":"#EF4444"},onMouseEnter:o=>!i&&(o.target.style.backgroundColor="#DC2626"),onMouseLeave:o=>!i&&(o.target.style.backgroundColor="#EF4444"),children:i?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Cancelling..."})]}):"Yes, Cancel"})]})]})})}),wz=({onComplete:t})=>{const[s,n]=C.useState(0),[i,o]=C.useState(!0),{branding:c}=Ts(),d=[{id:"welcome",title:"Welcome to"+c?.display_name,subtitle:"Premium Barbershop Experience",content:e.jsxs("div",{className:"text-center space-y-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:c?.logo_light_url,alt:"Logo",className:"w-40 h-40 object-contain drop-shadow-2xl"})}),e.jsx("div",{className:"space-y-4 max-w-lg mx-auto",children:e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:"Book appointments with expert barbers, earn rewards, and enjoy premium service."})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-xl mx-auto pt-2",children:[e.jsxs("div",{className:"bg-[var(--color-primary)]/10 p-4 rounded-xl border border-[var(--color-primary)]/30 hover:bg-[var(--color-primary)]/15 transition-all",children:[e.jsx(ys,{className:"w-8 h-8 text-[var(--color-primary)] mx-auto mb-2"}),e.jsx("p",{className:"text-white font-semibold text-sm",children:"Expert"})]}),e.jsxs("div",{className:"bg-[var(--color-primary)]/10 p-4 rounded-xl border border-[var(--color-primary)]/30 hover:bg-[var(--color-primary)]/15 transition-all",children:[e.jsx(rt,{className:"w-8 h-8 text-[var(--color-primary)] mx-auto mb-2"}),e.jsx("p",{className:"text-white font-semibold text-sm",children:"Booking"})]}),e.jsxs("div",{className:"bg-[var(--color-primary)]/10 p-4 rounded-xl border border-[var(--color-primary)]/30 hover:bg-[var(--color-primary)]/15 transition-all",children:[e.jsx(Vt,{className:"w-8 h-8 text-[var(--color-primary)] mx-auto mb-2"}),e.jsx("p",{className:"text-white font-semibold text-sm",children:"Rewards"})]})]})]})},{id:"booking",title:"Easy Booking",subtitle:"Schedule at your convenience",content:e.jsxs("div",{className:"text-center space-y-8 max-w-lg mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("img",{src:c?.logo_light_url,alt:"Logo",className:"w-40 h-40 object-contain drop-shadow-2xl"})}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:"Browse available time slots, choose your favorite barber, and confirm your appointment in seconds."}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4 border border-[#2A2A2A]",children:[e.jsx("p",{className:"text-sm text-[var(--color-primary)] font-semibold",children:" Tip"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Get reminders before your appointment"})]})]})},{id:"rewards",title:"Earn Rewards",subtitle:"Unlock exclusive benefits",content:e.jsxs("div",{className:"text-center space-y-8 max-w-lg mx-auto",children:[e.jsx("div",{className:"bg-[var(--color-primary)]/10 rounded-3xl p-12 border border-[var(--color-primary)]/30 flex items-center justify-center h-48",children:e.jsx(Vt,{className:"w-24 h-24 text-[var(--color-primary)]"})}),e.jsx("p",{className:"text-gray-300 text-base leading-relaxed",children:"Earn points with every visit and redeem them for discounts, free services, and exclusive offers."}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4 border border-[#2A2A2A]",children:[e.jsx("p",{className:"text-sm text-[var(--color-primary)] font-semibold",children:" Bonus"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Limited-time vouchers just for you"})]})]})},{id:"ready",title:"You're All Set!",subtitle:"Ready to get started",content:e.jsxs("div",{className:"text-center space-y-8 max-w-lg mx-auto",children:[e.jsx("div",{className:"bg-[var(--color-primary)]/10 rounded-3xl p-12 border border-[var(--color-primary)]/30 flex items-center justify-center h-48",children:e.jsx(Je,{className:"w-24 h-24 text-[var(--color-primary)]"})}),e.jsx("p",{className:"text-gray-300 text-base leading-relaxed",children:"Everything is ready. Start booking your appointments and experience premium barbershop service."}),e.jsx("div",{className:"bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 rounded-lg p-4 border border-[var(--color-primary)]/30",children:e.jsx("p",{className:"text-xs text-gray-300",children:"Your profile is ready and you're all set to book!"})})]})}],m=()=>{s<d.length-1?n(s+1):p()},h=()=>{s>0&&n(s-1)},p=()=>{sessionStorage.setItem("onboarding_completed","true"),o(!1),setTimeout(()=>{t()},300)},u=()=>{p()};if(!i)return null;const f=d[s],g=s===d.length-1,y=s===0;return e.jsxs("div",{className:"fixed inset-0 bg-[#0A0A0A] z-50 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--color-primary)]/5 rounded-full blur-3xl opacity-50"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-[var(--color-primary)]/5 rounded-full blur-3xl opacity-50"})]}),e.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 md:px-8 md:py-6",children:[e.jsx("div",{children:e.jsx("img",{src:c?.logo_light_url,alt:"Logo",className:"w-12 h-12 object-contain"})}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-200 transition-colors text-sm font-medium",children:"Skip"})]}),e.jsx("div",{className:"px-6 md:px-8",children:e.jsx("div",{className:"max-w-sm mx-auto",children:e.jsx("div",{className:"flex space-x-2",children:d.map((b,j)=>e.jsx("div",{className:`h-1 rounded-full flex-1 transition-all duration-500 ${j<=s?"bg-[var(--color-primary)]":"bg-[#2A2A2A]"}`},j))})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-6 md:px-8 py-8",children:e.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:f.title}),e.jsx("p",{className:"text-sm md:text-base text-gray-400",children:f.subtitle})]}),e.jsx("div",{className:"transition-all duration-500 ease-in-out",children:f.content})]})}),e.jsx("div",{className:"px-6 md:px-8 pb-6",children:e.jsxs("div",{className:"max-w-sm mx-auto flex justify-between items-center gap-4",children:[e.jsx("button",{onClick:h,disabled:y,className:`flex items-center justify-center w-10 h-10 rounded-lg transition-all ${y?"text-gray-600 cursor-not-allowed":"text-gray-300 hover:text-white hover:bg-[#1A1A1A]"}`,children:e.jsx(Xa,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:m,className:"flex-1 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 transition-all duration-200",children:[e.jsx("span",{children:g?"Get Started":"Continue"}),e.jsx(Ux,{className:"w-4 h-4"})]})]})})]})]})},Az="sk-5WGXF2zQz5cZS6C3NTPcuBo0ia3EBPDWxzgs6Z1qhHwweY6o",Cz="AIzaSyB_7NiOu4CCbZIFW3V_FAPG3t5Bb4i5jQQ",Ez="732e1b0a9174d4473",MA=100;class kz{constructor(){this.recommendationCount=this.getTodayRecommendationCount()}getTodayRecommendationCount(){const s=new Date().toDateString(),n=localStorage.getItem(`ai_barber_recommendations_${s}`);return n?parseInt(n):0}incrementRecommendationCount(){const s=new Date().toDateString(),n=this.recommendationCount+1;return this.recommendationCount=n,localStorage.setItem(`ai_barber_recommendations_${s}`,n.toString()),n}getRemainingRecommendations(){return Math.max(0,MA-this.recommendationCount)}canGenerateRecommendations(){return this.recommendationCount<MA}resetDailyCounter(){const s=new Date().toDateString();this.recommendationCount=0,localStorage.removeItem(`ai_barber_recommendations_${s}`),console.log("Daily recommendation counter reset")}async fetchHaircutImages(s){try{const n=`${s} men haircut hairstyle`,i=await fetch(`https://www.googleapis.com/customsearch/v1?key=${Cz}&cx=${Ez}&q=${encodeURIComponent(n)}&searchType=image&num=3&safe=active&imgType=photo&imgSize=medium`);if(!i.ok)throw new Error(`Google Images API error: ${i.status}`);return(await i.json()).items?.map(c=>({url:c.link,thumbnail:c.image.thumbnailLink,title:c.title,source:c.displayLink}))||[]}catch(n){return console.error("Failed to fetch haircut images:",n),[]}}async generatePersonalizedRecommendations(s,n=null){if(!this.canGenerateRecommendations())throw new Error("Daily AI recommendation limit reached. Please try again tomorrow.");if(!s||!s.hairType)throw new Error("Please complete all preference selections for personalized recommendations.");console.log(" User Preferences:",{faceShape:s.faceShape||"To be determined by AI",hairType:s.hairType,lifestyle:s.lifestyle,maintenance:s.maintenance,hasUploadedImage:!!n});const i=`You are  AI Barber Assistant, an expert hair styling consultant with years of experience in men's grooming and barbering. Your specialty is providing personalized haircut recommendations based on comprehensive head and hair analysis.

CUSTOMER PROFILE:
- Face Shape: ${s.faceShape||"To be determined from image analysis"}
- Hair Type: ${s.hairType}  
- Lifestyle: ${s.lifestyle}
- Maintenance Preference: ${s.maintenance}
${n?"- Has uploaded photo for detailed analysis":"- No photo provided"}

${n?"PHOTO ANALYSIS REQUIRED:":"ANALYSIS BASED ON:"}
${n?`CRITICAL: Provide HONEST and ACCURATE analysis. Do not exaggerate or provide overly positive descriptions. Be objective and truthful.

Analyze the uploaded photo and provide detailed, factual insights about:
1. HEAD SHAPE ANALYSIS (Be precise and honest):
   - Actual head proportions (measure length vs width ratio accurately)
   - True forehead size (small/medium/large) and shape (narrow/wide/rounded/angular)
   - Jawline definition (weak/moderate/strong) and actual width
   - Cheekbone prominence (flat/moderate/high) and positioning
   - Chin shape (pointed/rounded/square/weak/strong) and projection
   - Ear positioning (close/protruding) and relative size
   - DETERMINE ACTUAL FACE SHAPE: oval/round/square/rectangular/heart/diamond based on measurements

2. HAIR DETAILS ANALYSIS (Current state only):
   - Exact current hair length and existing style
   - Actual hair density (thin/medium/thick) and thickness of individual strands
   - True hair texture (pin-straight/wavy/curly/coarse/fine)
   - Hairline shape (straight/widow's peak/receding/irregular) and any recession
   - Crown area characteristics (flat/cowlick/thinning)
   - Natural growth patterns and directions
   - Hair color and current condition (healthy/damaged/dry)

3. FACIAL FEATURES (Objective assessment):
   - Eye shape (almond/round/hooded/deep-set) and spacing
   - Nose size (small/medium/large) and shape (straight/curved/wide/narrow)
   - Lip thickness (thin/medium/full) and shape
   - Overall facial symmetry (note any asymmetries)
   - Skin condition and complexion

BE HONEST about what you observe. Do not flatter or exaggerate positive features.`:"User-provided preferences and standard face shape analysis"}

HAIRCUT OPTIONS TO CHOOSE FROM:
1. Classic Fade - Timeless, professional, versatile
2. Textured Crop - Modern, low maintenance, trendy  
3. Side Part - Sophisticated, classic, business-friendly
4. Buzz Cut - Ultra low maintenance, clean, sporty
5. Pompadour - Bold, stylish, high maintenance
6. Undercut - Edgy, modern, medium maintenance
7. Caesar Cut - Classic Roman style, easy to style
8. Quiff - Voluminous, trendy, requires styling

INSTRUCTIONS:
1. ${n?"FIRST: Analyze the photo with complete honesty and accuracy. Determine the ACTUAL face shape based on measurements, not assumptions.":"Analyze based on provided preferences"}
2. Recommend 3 haircuts from the list above based on your HONEST analysis
3. For each recommendation, provide:
   - Haircut name
   - Realistic suitability score (70-95% - be honest, not all cuts are perfect)
   - 2-sentence description explaining why it matches their ACTUAL features
   - 3 key benefits
   - Maintenance level (Low/Medium/High)
4. Order by best match first
5. Return response in this exact JSON structure:
{
  "analysis": {
    "headShape": "HONEST assessment: Actual face shape (oval/round/square/rectangular/heart/diamond) with specific measurements and proportions. Example: 'Square face shape with strong jawline, wide forehead, and minimal tapering from temples to jaw. Length-to-width ratio approximately 1.2:1.'",
    "hairDetails": "FACTUAL description: Current hair length, density, texture, hairline, and condition without embellishment. Example: 'Medium-length hair, moderate density, slightly wavy texture, straight hairline with no recession, healthy condition.'",
    "facialFeatures": "OBJECTIVE assessment: Key facial features that influence haircut choice, noting any asymmetries or unique characteristics. Example: 'Prominent cheekbones, medium-sized nose, well-defined jawline, symmetrical features overall.'",
    "recommendations_reasoning": "LOGICAL explanation: Why these specific cuts were chosen based on actual face shape and features, not generic praise."
  },
  "recommendations": [
    {
      "id": 1,
      "name": "Haircut Name",
      "description": "HONEST explanation of why this cut works with their ACTUAL features, including any potential challenges.",
      "suitability": 85,
      "maintenance": "Medium",
      "benefits": ["Specific Benefit 1", "Realistic Benefit 2", "Practical Benefit 3"]
    }
  ]
}

CRITICAL: Be truthful about face shape determination. Use actual measurements and proportions, not flattering assumptions.`;try{this.incrementRecommendationCount();const o=await fetch("https://api.moonshot.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Az}`},body:JSON.stringify({model:"kimi-k2-0711-preview",messages:[{role:"system",content:i},{role:"user",content:`Generate personalized haircut recommendations for a customer with ${s.faceShape?s.faceShape+" face shape, ":""}${s.hairType} hair type, ${s.lifestyle} lifestyle, and ${s.maintenance} maintenance preference.${!s.faceShape&&n?" Please analyze the uploaded photo to determine the face shape and provide detailed head analysis.":""}`}],temperature:.7,max_tokens:800})});if(!o.ok)throw new Error(`Kimi API error: ${o.status}`);const d=(await o.json()).choices[0]?.message?.content||"";console.log(" Kimi AI Raw Response:",d);try{const m=JSON.parse(d);m.analysis&&(console.log(" AI Head Shape Analysis:",m.analysis.headShape),console.log(" AI Hair Details Analysis:",m.analysis.hairDetails),console.log(" AI Facial Features Analysis:",m.analysis.facialFeatures),console.log(" AI Recommendations Reasoning:",m.analysis.recommendations_reasoning));const h=m.recommendations||m;if(Array.isArray(h)&&h.length>0)return console.log(" AI Recommendations Generated:",h.length,"suggestions"),h.forEach((u,f)=>{console.log(` Recommendation ${f+1}:`,{name:u.name,suitability:u.suitability+"%",maintenance:u.maintenance,benefits:u.benefits})}),await Promise.all(h.map(async(u,f)=>{const g=await this.fetchHaircutImages(u.name||"Classic Cut");return{id:u.id||f+1,name:u.name||"Classic Cut",description:u.description||"A great cut that suits your style.",suitability:u.suitability||90,maintenance:u.maintenance||"Medium",benefits:u.benefits||["Professional look","Easy to style","Versatile"],images:g.slice(0,3),primaryImage:g[0]?.url||null}}));console.warn(" AI returned invalid recommendations format, using fallback")}catch(m){console.warn(" JSON parsing failed:",m.message),console.log(" Raw content that failed to parse:",d.substring(0,200)+"...")}return console.log(" Using fallback recommendations for:",s),await this.getFallbackRecommendations(s)}catch(o){return console.error(" AI recommendation generation failed:",o.message),console.log(" Falling back to default recommendations"),await this.getFallbackRecommendations(s)}}async getFallbackRecommendations(s){const n={oval:{straight:[{name:"Classic Fade",suitability:95,description:"Perfect for your balanced oval face and straight hair texture."},{name:"Side Part",suitability:92,description:"A timeless choice that complements your face shape beautifully."},{name:"Textured Crop",suitability:88,description:"Modern and stylish, great for your hair type."}]},round:{wavy:[{name:"Textured Crop",suitability:94,description:"Adds height and definition to complement your round face."},{name:"Pompadour",suitability:91,description:"Creates vertical lines that elongate your face shape."},{name:"Undercut",suitability:87,description:"Modern cut with height that balances your features."}]},square:{curly:[{name:"Classic Fade",suitability:93,description:"Softens your strong jawline while maintaining masculine appeal."},{name:"Caesar Cut",suitability:89,description:"Classic style that works well with your natural texture."},{name:"Textured Crop",suitability:86,description:"Adds texture while balancing your angular features."}]}},i=s.faceShape||"oval";console.log(" Fallback recommendations using face shape:",i);const o=n[i]?.[s.hairType]||n.oval?.[s.hairType]||n.oval.straight;return await Promise.all(o.map(async(d,m)=>{const h=await this.fetchHaircutImages(d.name);return{id:m+1,name:d.name,description:d.description,suitability:d.suitability,maintenance:s.maintenance==="low"?"Low":s.maintenance==="high"?"High":"Medium",benefits:this.getDefaultBenefits(d.name),images:h.slice(0,3),primaryImage:h[0]?.url||null}}))}getDefaultBenefits(s){return{"Classic Fade":["Professional look","Easy to style","Versatile"],"Textured Crop":["Low maintenance","Trendy","Natural texture"],"Side Part":["Professional","Classic","Easy to maintain"],"Buzz Cut":["Ultra low maintenance","Clean look","Athletic"],Pompadour:["Stylish","Voluminous","Statement look"],Undercut:["Modern","Edgy","Customizable"],"Caesar Cut":["Classic style","Easy care","Timeless"],Quiff:["Trendy","Voluminous","Stylish"]}[s]||["Great style","Suits you well","Professional"]}}const _z=new kz;class Bz{constructor(){this.isLoaded=!1,this.faceDetection=null}async initialize(){if(!this.isLoaded)try{typeof window<"u"&&!window.FaceDetection&&(await this.loadScript("https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4/face_detection.js"),await this.loadScript("https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3/camera_utils.js")),window.FaceDetection&&(this.faceDetection=new window.FaceDetection({locateFile:s=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4/${s}`}),this.faceDetection.setOptions({model:"short",minDetectionConfidence:.5}),this.isLoaded=!0,console.log(" Face Detection Service initialized"))}catch(s){console.error(" Failed to initialize Face Detection:",s),this.isLoaded=!1}}loadScript(s){return new Promise((n,i)=>{const o=document.createElement("script");o.src=s,o.onload=n,o.onerror=i,document.head.appendChild(o)})}async validateFaceInImage(s){console.log(" Starting face detection validation...");try{const n=await this.fileToImageElement(s);return this.isLoaded&&this.faceDetection?await this.detectFaceWithMediaPipe(n):await this.basicImageValidation(n)}catch(n){throw console.error(" Face detection error:",n),new Error("Failed to analyze image. Please try uploading a different photo.")}}fileToImageElement(s){return new Promise((n,i)=>{const o=new Image,c=URL.createObjectURL(s);o.onload=()=>{URL.revokeObjectURL(c),n(o)},o.onerror=()=>{URL.revokeObjectURL(c),i(new Error("Invalid image file"))},o.src=c})}async detectFaceWithMediaPipe(s){return new Promise((n,i)=>{this.faceDetection.onResults(o=>{if(console.log(" MediaPipe detection results:",o),o.detections&&o.detections.length>0){const c=o.detections[0].score;console.log(" Face detected with confidence:",c),n({hasFace:!0,confidence:c,faceCount:o.detections.length,method:"MediaPipe"})}else console.log(" No face detected by MediaPipe"),n({hasFace:!1,confidence:0,faceCount:0,method:"MediaPipe"})}),this.faceDetection.send({image:s}),setTimeout(()=>{i(new Error("Face detection timeout"))},1e4)})}async basicImageValidation(s){console.log(" Using basic image validation (fallback)");const n=s.naturalWidth,i=s.naturalHeight,o=n/i;console.log(" Image dimensions:",{width:n,height:i,aspectRatio:o});const c=n>=200&&i>=200,d=o>=.5&&o<=2,m=o>=.7&&o<=1.4,h=c&&(d||m);return console.log(" Basic validation results:",{isReasonableSize:c,isPortraitish:d,isSquareish:m,likelyHasFace:h}),{hasFace:h,confidence:h?.7:.3,faceCount:h?1:0,method:"Basic Validation",details:{dimensions:{width:n,height:i},aspectRatio:o,checks:{isReasonableSize:c,isPortraitish:d,isSquareish:m}}}}getValidationErrorMessage(s){return s.hasFace?null:{title:"No Face Detected",message:"Please upload a clear photo of your face for accurate analysis.",suggestions:["Ensure your face is clearly visible","Use good lighting","Face the camera directly","Remove sunglasses or hats","Try a different photo"]}}}const zf=new Bz,Sz=({searchQuery:t="",onImageSelect:s=null})=>{const[n,i]=C.useState(t),[o,c]=C.useState([]),[d,m]=C.useState(!1),[h,p]=C.useState(null),u="732e1b0a9174d4473",f="AIzaSyB_7NiOu4CCbZIFW3V_FAPG3t5Bb4i5jQQ";C.useEffect(()=>{t&&(i(t),g(t))},[t]);const g=async(b=n)=>{if(b.trim()){m(!0),p(null);try{const j=`https://www.googleapis.com/customsearch/v1?key=${f}&cx=${u}&q=${encodeURIComponent(b+" men haircut hairstyle")}&searchType=image&num=4&safe=active&imgType=photo&imgSize=medium`,N=await fetch(j);if(!N.ok)throw new Error(`Search failed: ${N.status}`);const w=await N.json();if(w.items&&w.items.length>0){const B=w.items.map((S,_)=>({id:_,url:S.link,thumbnail:S.image.thumbnailLink,title:S.title,source:S.displayLink,snippet:S.snippet}));c(B)}else c([]),p("No images found for this search term")}catch(j){console.error("Image search failed:",j),p("Failed to search for images. Please check your API configuration."),c([])}finally{m(!1)}}},y=b=>{s&&s(b)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(On,{className:"w-5 h-5 text-[var(--color-primary)]"}),e.jsx("h3",{className:"text-white font-medium",children:"Haircut Image Search"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ns,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:n,onChange:b=>i(b.target.value),onKeyPress:b=>b.key==="Enter"&&g(),placeholder:"Search for haircut styles...",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-600/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)]/50 transition-colors"}),e.jsx("button",{onClick:()=>g(),disabled:d||!n.trim(),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${d||!n.trim()?"bg-gray-700/50 text-gray-500 cursor-not-allowed":"bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white cursor-pointer"}`,children:d?"Searching...":"Search"})})]}),d&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-[var(--color-primary)] border-t-transparent"}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Searching for haircut images..."})]})}),h&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:[e.jsx("p",{className:"text-red-400 text-sm",children:h}),!f]}),o.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Found ",o.length,' haircut images for "',n,'"']}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.map(b=>e.jsxs("div",{className:"group relative bg-gray-800/30 rounded-xl overflow-hidden border border-gray-600/30 hover:border-[var(--color-primary)]/50 transition-all duration-200 cursor-pointer",onClick:()=>y(b),children:[e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("img",{src:b.thumbnail,alt:b.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:j=>{j.target.parentElement.innerHTML=`
                        <div class="w-full h-full flex items-center justify-center bg-gray-700/50">
                          <div class="text-gray-400 text-xs text-center p-2">
                            <div class="w-8 h-8 mx-auto mb-2 opacity-50">
                              <svg fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
                              </svg>
                            </div>
                            Image unavailable
                          </div>
                        </div>
                      `}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-200"}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("div",{className:"bg-black/50 rounded-full p-1",children:e.jsx(c7,{className:"w-3 h-3 text-white"})})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-white text-xs font-medium truncate mb-1",children:b.title}),e.jsx("p",{className:"text-gray-400 text-xs truncate",children:b.source})]})]},b.id))})]}),!d&&!h&&o.length===0&&n&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 opacity-50",children:e.jsx(On,{className:"w-full h-full text-gray-400"})}),e.jsxs("p",{className:"text-gray-400 text-sm",children:['No haircut images found for "',n,'"']}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:'Try different search terms like "fade", "undercut", or "pompadour"'})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-700/30",children:e.jsx("p",{className:"text-gray-500 text-xs",children:"Powered by Google Custom Search API"})})]})},Dz=({onNavigateToBooking:t})=>{const[s,n]=C.useState(0),[i,o]=C.useState(null),[c,d]=C.useState({faceShape:"",hairType:"",lifestyle:"",maintenance:""}),[m,h]=C.useState([]),[p,u]=C.useState(null),[f,g]=C.useState(!1),[y,b]=C.useState(null),[j,N]=C.useState(!1),[w,B]=C.useState(null),S=me(H.services.services.getActiveServices);me(H.services.barbers.getActiveBarbers),C.useEffect(()=>{zf.initialize().catch(Q=>{console.warn("Face detection service initialization failed:",Q)})},[]);const _=[{id:1,title:"Upload Your Photo",subtitle:"Let us analyze your face shape"},{id:2,title:"Tell Us About You",subtitle:"Help us understand your preferences"},{id:3,title:"Your Recommendations",subtitle:"Personalized haircut suggestions"},{id:4,title:"Browse Haircut Styles",subtitle:"Explore visual examples"},{id:5,title:"Book Your Appointment",subtitle:"Schedule with your preferred barber"}],k=[{id:"straight",name:"Straight",description:"Naturally straight hair"},{id:"wavy",name:"Wavy",description:"Slight waves and texture"},{id:"curly",name:"Curly",description:"Defined curls"},{id:"coily",name:"Coily",description:"Tight coils and kinks"}],E=[{id:"professional",name:"Professional",description:"Office/business environment"},{id:"casual",name:"Casual",description:"Relaxed, everyday style"},{id:"active",name:"Active",description:"Sports and fitness focused"},{id:"creative",name:"Creative",description:"Artistic and expressive"}],D=[{id:"low",name:"Low Maintenance",description:"2-3 months between cuts"},{id:"medium",name:"Medium Maintenance",description:"4-6 weeks between cuts"},{id:"high",name:"High Maintenance",description:"2-3 weeks between cuts"}],F=async()=>{g(!0),b(null);try{const ee=(await _z.generatePersonalizedRecommendations(c,i)).map((le,R)=>({...le,image:`/img/haircut-${le.name.toLowerCase().replace(/\s+/g,"-")}.jpg`,serviceId:S?.[R%S?.length]?._id||null}));h(ee)}catch(Q){console.error("AI recommendation failed:",Q),b(Q.message);const ee=[{id:1,name:"Classic Fade",description:"A versatile cut that works well with most face shapes and lifestyles.",suitability:90,maintenance:"Medium",serviceId:S?.[0]?._id,benefits:["Professional look","Easy to style","Versatile"]},{id:2,name:"Textured Crop",description:"Modern and low-maintenance, perfect for busy lifestyles.",suitability:85,maintenance:"Low",serviceId:S?.[1]?._id,benefits:["Low maintenance","Trendy","Natural texture"]}];h(ee)}finally{g(!1)}},M=async Q=>{const ee=Q.target.files[0];if(ee){B(null),N(!0);try{console.log(" Validating uploaded image for face detection...");const le=await zf.validateFaceInImage(ee);if(console.log(" Face validation result:",le),!le.hasFace){const q=zf.getValidationErrorMessage(le);B(q),N(!1),Q.target.value="";return}const R=new FileReader;R.onload=q=>{o(q.target.result),N(!1),console.log(" Image uploaded successfully with face detected")},R.readAsDataURL(ee)}catch(le){console.error(" Image validation error:",le),B({title:"Validation Error",message:le.message||"Failed to validate image. Please try again.",suggestions:["Try uploading a different photo","Ensure the image file is not corrupted"]}),N(!1),Q.target.value=""}}},P=async()=>{console.log("handleNext called, currentStep:",s,"canProceed:",te()),console.log("userPreferences:",c),s<5&&(s===2&&await F(),n(s+1))},T=()=>{s>0&&n(s-1)},L=()=>e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx(Gu,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white mb-1",children:"AI  Assistant"}),e.jsx("p",{className:"text-gray-400 text-sm px-4",children:"Your personal AI-powered style consultant"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 px-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/40 to-gray-700/40 rounded-lg p-3 border border-gray-600/30",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ca,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("h3",{className:"text-white font-medium text-sm",children:"AI Analysis"})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Advanced head shape and hair analysis for perfect recommendations."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/40 to-gray-700/40 rounded-lg p-3 border border-gray-600/30",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(On,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("h3",{className:"text-white font-medium text-sm",children:"Style Gallery"})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Browse curated haircut images and find inspiration."})]})]}),e.jsx("div",{className:"px-4 pt-2",children:e.jsxs("button",{onClick:()=>n(1),className:"w-full bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg shadow-[var(--color-primary)]/20 flex items-center justify-center space-x-3",children:[e.jsx(Ca,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Get Started"}),e.jsx(sr,{className:"w-4 h-4"})]})}),e.jsx("div",{className:"bg-gray-800/30 rounded-lg p-3 border border-gray-600/30 mx-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[var(--color-primary)] font-bold text-sm",children:"AI"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Powered"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[var(--color-primary)] font-bold text-sm",children:"5"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Steps"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[var(--color-primary)] font-bold text-sm",children:""}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Styles"})]})]})})]}),X=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-28 h-28 bg-gradient-to-br from-gray-800/50 to-gray-700/50 rounded-2xl flex items-center justify-center border border-gray-600/30 mb-3 shadow-lg",children:i?e.jsx("img",{src:i,alt:"Uploaded",className:"w-full h-full object-cover rounded-2xl"}):e.jsx(da,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed px-2",children:"Upload a clear photo to analyze your face shape and get personalized recommendations."}),j&&e.jsx("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Cu,{className:"w-4 h-4 animate-spin text-blue-400"}),e.jsx("span",{className:"text-blue-400 text-sm font-medium",children:"Analyzing image for face detection..."})]})}),w&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4 mt-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ea,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-red-400 font-medium text-sm mb-1",children:w.title}),e.jsx("p",{className:"text-red-300 text-xs mb-2",children:w.message}),w.suggestions&&e.jsx("ul",{className:"text-red-300 text-xs space-y-1",children:w.suggestions.map((Q,ee)=>e.jsxs("li",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-red-400 rounded-full flex-shrink-0"}),e.jsx("span",{children:Q})]},ee))})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:M,className:"hidden",id:"image-upload",disabled:j}),e.jsx("div",{className:`px-6 py-3 rounded-xl font-medium flex items-center justify-center space-x-2 transition-all duration-200 shadow-lg ${j?"bg-gray-600 cursor-not-allowed text-gray-300":"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 text-white cursor-pointer"}`,children:j?e.jsxs(e.Fragment,{children:[e.jsx(Cu,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Validating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ji,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload Photo"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/60 to-[#444444]/60 p-4 rounded-xl border border-gray-600/30",children:[e.jsx("h4",{className:"text-white font-medium text-sm mb-3",children:"Photo Tips:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[var(--color-primary)] rounded-full"}),e.jsx("span",{children:"Good lighting"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[var(--color-primary)] rounded-full"}),e.jsx("span",{children:"Face camera directly"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[var(--color-primary)] rounded-full"}),e.jsx("span",{children:"Remove accessories"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[var(--color-primary)] rounded-full"}),e.jsx("span",{children:"Clear view of face"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-2",children:[e.jsxs("button",{onClick:T,disabled:s===0,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${s===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsx("button",{onClick:P,disabled:!te()||s===5||s===2&&f,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[140px] ${te()&&s<5&&!(s===2&&f)?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 text-white shadow-lg shadow-[var(--color-primary)]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:s===2&&f?e.jsxs(e.Fragment,{children:[e.jsx(Cu,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s===5?"Complete":s===2?"Generate Recommendations":"Continue"}),s<5&&e.jsx(sr,{className:"w-4 h-4"})]})})]})]})]}),Z=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-white font-medium text-base mb-1",children:"Tell us about your style"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Help us create the perfect recommendation for you"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Hair type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.map(Q=>e.jsxs("button",{onClick:()=>d(ee=>({...ee,hairType:Q.id})),className:`p-3 rounded-xl border transition-all duration-200 text-left ${c.hairType===Q.id?"bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 border-[var(--color-primary)]/60 text-white shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 text-gray-300 hover:border-gray-500/50"}`,children:[e.jsx("div",{className:"font-medium text-sm",children:Q.name}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Q.description})]},Q.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Lifestyle"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(Q=>e.jsxs("button",{onClick:()=>d(ee=>({...ee,lifestyle:Q.id})),className:`p-3 rounded-xl border transition-all duration-200 text-left ${c.lifestyle===Q.id?"bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 border-[var(--color-primary)]/60 text-white shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 text-gray-300 hover:border-gray-500/50"}`,children:[e.jsx("div",{className:"font-medium text-sm",children:Q.name}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Q.description})]},Q.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Maintenance preference"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:D.map(Q=>e.jsxs("button",{onClick:()=>d(ee=>({...ee,maintenance:Q.id})),className:`p-3 rounded-xl border transition-all duration-200 text-center ${c.maintenance===Q.id?"bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 border-[var(--color-primary)]/60 text-white shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 text-gray-300 hover:border-gray-500/50"}`,children:[e.jsx("div",{className:"font-medium text-sm",children:Q.name.replace(" Maintenance","")}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Q.description.split(" ")[0]})]},Q.id))})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:T,disabled:s===0,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${s===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsx("button",{onClick:P,disabled:!te()||s===5||s===2&&f,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[140px] ${te()&&s<5&&!(s===2&&f)?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 text-white shadow-lg shadow-[var(--color-primary)]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:s===2&&f?e.jsxs(e.Fragment,{children:[e.jsx(Cu,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s===5?"Complete":s===2?"Generate Recommendations":"Continue"}),s<5&&e.jsx(sr,{className:"w-4 h-4"})]})})]})]}),ne=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx(Gu,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("h3",{className:"text-white font-medium text-base",children:"AI Recommendations"}),e.jsx(Ca,{className:"w-4 h-4 text-[var(--color-primary)]"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Personalized suggestions based on your preferences"}),y&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 bg-yellow-400/10 px-3 py-2 rounded-lg border border-yellow-400/20",children:"AI service unavailable - showing fallback recommendations"})]}),f?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-[var(--color-primary)] border-t-transparent"}),e.jsx("span",{className:"text-gray-300 text-sm",children:"AI analyzing your preferences..."})]})}):e.jsx("div",{className:"space-y-3",children:m.map(Q=>e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-200 cursor-pointer ${p?.id===Q.id?"bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-accent)]/20 border-[var(--color-primary)]/60 shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 hover:border-gray-500/50"}`,onClick:()=>u(Q),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"text-white font-medium text-sm",children:Q.name}),!y&&e.jsx("div",{className:"bg-[var(--color-primary)]/20 px-1.5 py-0.5 rounded-full",children:e.jsx("span",{className:"text-[var(--color-primary)] text-xs font-medium",children:"AI"})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Vt,{className:"w-3 h-3 text-[var(--color-primary)] fill-current"}),e.jsxs("span",{className:"text-[var(--color-primary)] font-medium text-xs",children:[Q.suitability,"%"]})]})]}),Q.images&&Q.images.length>0&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:Q.images.map((ee,le)=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:ee.thumbnail||ee.url,alt:`${Q.name} style ${le+1}`,className:"w-16 h-16 object-cover rounded-lg border border-gray-600/30",onError:R=>{R.target.style.display="none"}})},le))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-3 leading-relaxed",children:Q.description}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Q.benefits.slice(0,3).map((ee,le)=>e.jsx("span",{className:"bg-gray-700/40 text-gray-300 px-2 py-0.5 rounded-lg text-xs",children:ee},le))})]})]})},Q.id))}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:T,disabled:s===0||f,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${s===0||f?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:P,disabled:!te()||s===5||f,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[100px] ${te()&&s<5&&!f?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 text-white shadow-lg shadow-[var(--color-primary)]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("span",{children:s===5?"Complete":"Continue"}),s<5&&e.jsx(sr,{className:"w-4 h-4"})]})]})]}),I=()=>{const Q=p?p.name:"men haircut styles";return e.jsxs("div",{className:"space-y-4",children:[p&&e.jsxs("div",{className:"bg-gradient-to-r from-[var(--color-primary)]/10 to-[var(--color-accent)]/10 p-4 rounded-xl border border-[var(--color-primary)]/30",children:[e.jsxs("h3",{className:"text-white font-medium text-sm mb-1",children:["Exploring: ",p.name]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Browse similar styles and get inspired"})]}),e.jsx(Sz,{searchQuery:Q,onImageSelect:ee=>{console.log("Selected image:",ee)}}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:T,disabled:s===0,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${s===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:P,disabled:s===5,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[100px] ${s<5?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 text-white shadow-lg shadow-[var(--color-primary)]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("span",{children:"Continue"}),e.jsx(sr,{className:"w-4 h-4"})]})]})]})},O=()=>{const Q=()=>{if(t&&p){const le=S?.find(R=>R.name.toLowerCase().includes("haircut")||R.name.toLowerCase().includes("cut"))||S?.[0];t(le)}},ee=()=>{localStorage.setItem("savedRecommendation",JSON.stringify(p)),alert("Recommendation saved! You can book this style anytime from your dashboard.")};return e.jsxs("div",{className:"space-y-4",children:[p&&e.jsxs("div",{className:"bg-gradient-to-r from-[var(--color-primary)]/10 to-[var(--color-accent)]/10 p-4 rounded-xl border border-[var(--color-primary)]/30",children:[e.jsxs("h3",{className:"text-white font-medium text-sm mb-1",children:["Perfect Choice: ",p.name]}),e.jsx("p",{className:"text-gray-400 text-xs",children:p.description})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[e.jsx(Je,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-white font-medium text-lg",children:"Ready to Transform!"})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Your personalized recommendation is ready. Choose how you'd like to proceed with your new look."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:Q,className:"w-full bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] hover:from-[var(--color-accent)] hover:brightness-110 text-white px-6 py-4 rounded-xl font-medium transition-all duration-200 shadow-lg shadow-[var(--color-primary)]/20 flex items-center justify-center space-x-3",children:[e.jsx(rt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base font-semibold",children:"Book Appointment Now"}),e.jsx(sr,{className:"w-5 h-5"})]}),e.jsxs("button",{onClick:ee,className:"w-full bg-gray-700/50 hover:bg-gray-600/70 text-gray-200 px-6 py-4 rounded-xl font-medium transition-all duration-200 border border-gray-600/50 hover:border-gray-500/50 flex items-center justify-center space-x-3",children:[e.jsx(Nt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base font-semibold",children:"Save for Later"})]})]}),e.jsxs("div",{className:"bg-gray-800/30 rounded-xl p-4 border border-gray-600/30",children:[e.jsx("h4",{className:"text-white font-medium text-sm mb-3",children:"Why This Style Works for You:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Matches your ",c.hairType," hair type"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Suits your ",c.lifestyle," lifestyle"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:[c.maintenance," maintenance required"]})]}),p.suitability&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:[p.suitability,"% compatibility match"]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:T,disabled:s===1,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${s===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-2.5 rounded-xl font-medium text-sm flex items-center space-x-2",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"Complete"})]})]})]})},G=()=>{switch(s){case 0:return L();case 1:return X();case 2:return Z();case 3:return ne();case 4:return I();case 5:return O();default:return L()}},te=()=>{switch(s){case 0:return!0;case 1:return i!==null;case 2:return c.hairType&&c.lifestyle&&c.maintenance;case 3:return p!==null;case 4:return!0;default:return!0}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ys,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("h1",{className:"text-white font-bold text-base",children:"AI Style Assistant"}),e.jsx(Gu,{className:"w-4 h-4 text-[var(--color-primary)]"})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Personalized recommendations powered by AI"})]})]})})}),e.jsxs("div",{className:"px-4 py-3 bg-[#1A1A1A]/95 border-b border-[#333333]/50",children:[e.jsx("div",{className:"flex justify-center items-center mb-2",children:e.jsx("div",{className:"flex items-center space-x-2",children:_.map((Q,ee)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold transition-all duration-300 ${s>=Q.id?"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white shadow-md":"bg-[#2A2A2A] border border-[#444444] text-gray-500"}`,children:s>Q.id?e.jsx(Je,{className:"w-3 h-3"}):Q.id})}),ee<_.length-1&&e.jsx("div",{className:"w-6 mx-1",children:e.jsx("div",{className:`h-0.5 rounded-full transition-all duration-500 ${s>Q.id?"bg-[var(--color-primary)]":"bg-[#444444]"}`})})]},Q.id))})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-white font-medium text-sm",children:_[s-1]?.title}),e.jsx("p",{className:"text-gray-400 text-xs",children:_[s-1]?.subtitle})]})]}),e.jsx("div",{className:"flex-1 px-4 py-3 pb-3",children:G()})]})]})},Fz=({onBack:t})=>{const{user:s,logout:n,loading:i,sessionToken:o}=Dt(),c=Ws(),d=De(H.services.auth.updateUserProfile),[m,h]=C.useState(!1),[p,u]=C.useState(!1),[f,g]=C.useState(""),[y,b]=C.useState(""),{branding:j}=Ts(),[N,w]=C.useState({username:"",email:"",nickname:"",mobile_number:"",birthday:"",preferences:{notifications:!0,emailUpdates:!0,smsReminders:!0}});C.useEffect(()=>{B()},[s]);const B=async()=>{try{s&&w({username:s.username||"",email:s.email||"",nickname:s.nickname||"",mobile_number:s.mobile_number||"",birthday:s.birthday||"",preferences:{notifications:!0,emailUpdates:!0,smsReminders:!0}})}catch(D){console.error("Error loading profile:",D)}},S=(D,F)=>{w(M=>({...M,[D]:F}))},_=async()=>{try{if(u(!0),g(""),b(""),N.nickname&&N.nickname.length>100)throw new Error("Nickname must be less than 100 characters");if(N.mobile_number&&N.mobile_number.length>0&&!/^\+?[0-9\s\-\(\)]{7,}$/.test(N.mobile_number))throw new Error("Please enter a valid phone number with at least 7 digits");await d({sessionToken:o||"",nickname:N.nickname||void 0,email:void 0,mobile_number:N.mobile_number||void 0,birthday:N.birthday||void 0})&&(b("Profile updated successfully!"),h(!1),setTimeout(()=>b(""),3e3))}catch(D){console.error("Error saving profile:",D);const F=D?.message||"Failed to update profile. Please try again.";g(F)}finally{u(!1)}},k=async()=>{try{console.log("Logging out..."),await n(),console.log("Logout successful, navigating to login..."),window.location.href="/auth/login"}catch(D){console.error("Logout error:",D),window.location.href="/auth/login"}},E=()=>{t?t():c("/customer/dashboard")};return i||!s?e.jsx("div",{className:"min-h-screen bg-[#0A0A0A] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-primary)] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading profile..."})]})}):e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-[#0A0A0A]/95 backdrop-blur-xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center py-4",children:[e.jsxs("button",{onClick:E,className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),e.jsx("h1",{className:"text-lg font-bold text-white",children:"Profile"}),e.jsx("button",{onClick:k,className:"px-3 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-colors text-sm shadow-lg",children:e.jsx(Mn,{className:"w-4 h-4"})})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6 pb-20",children:[e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl shadow-lg border border-[#2A2A2A] mb-6 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] px-6 py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden mx-auto mb-3 ring-4 ring-white/30",children:e.jsx("img",{src:s?.avatar||"/img/avatar_default.jpg",alt:N.nickname||N.username||"User",className:"w-full h-full object-cover"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:N.nickname||N.username||"User"}),e.jsx("p",{className:"text-white/90 text-sm",children:N.email}),e.jsx("div",{className:"mt-3 px-4 py-1.5 bg-white/20 rounded-full inline-block",children:e.jsx("span",{className:"text-white text-xs font-medium uppercase tracking-wide",children:s?.role==="staff"?"Staff Member":"Customer"})})]})})}),f&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3 mb-4 flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-300",children:f})]}),y&&e.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-3 mb-4 flex items-center space-x-2",children:[e.jsx(Je,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-green-300",children:y})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl shadow-lg border border-[#2A2A2A] mb-4",children:[e.jsx("div",{className:"px-4 py-4 border-b border-[#2A2A2A]",children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Personal Information"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:[e.jsx(tt,{className:"w-4 h-4 inline mr-2"}),"Username"]}),m?e.jsx("input",{type:"text",value:N.username,onChange:D=>S("username",D.target.value),className:"w-full px-4 py-3 bg-[#0A0A0A] border border-[#2A2A2A] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"}):e.jsx("p",{className:"px-4 py-3 bg-[#0A0A0A] text-white rounded-xl",children:N.username})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:[e.jsx(Ht,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),m?e.jsx("input",{type:"email",value:N.email,onChange:D=>S("email",D.target.value),className:"w-full px-4 py-3 bg-[#0A0A0A] border border-[#2A2A2A] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"}):e.jsx("p",{className:"px-4 py-3 bg-[#0A0A0A] text-white rounded-xl",children:N.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:[e.jsx(tt,{className:"w-4 h-4 inline mr-2"}),"Nickname"]}),m?e.jsx("input",{type:"text",value:N.nickname,onChange:D=>S("nickname",D.target.value),placeholder:"Enter your preferred name",className:"w-full px-4 py-3 bg-[#0A0A0A] border border-[#2A2A2A] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"}):e.jsx("p",{className:"px-4 py-3 bg-[#0A0A0A] text-gray-300 rounded-xl",children:N.nickname||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:[e.jsx(Er,{className:"w-4 h-4 inline mr-2"}),"Mobile Number"]}),m?e.jsx("input",{type:"tel",value:N.mobile_number,onChange:D=>S("mobile_number",D.target.value),className:"w-full px-4 py-3 bg-[#0A0A0A] border border-[#2A2A2A] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"}):e.jsx("p",{className:"px-4 py-3 bg-[#0A0A0A] text-gray-300 rounded-xl",children:N.mobile_number})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:[e.jsx(rt,{className:"w-4 h-4 inline mr-2"}),"Birthday"]}),m?e.jsx("input",{type:"date",value:N.birthday,onChange:D=>S("birthday",D.target.value),className:"w-full px-4 py-3 bg-[#0A0A0A] border border-[#2A2A2A] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:border-transparent"}):e.jsx("p",{className:"px-4 py-3 bg-[#0A0A0A] text-gray-300 rounded-xl",children:N.birthday?new Date(N.birthday).toLocaleDateString("en-PH"):"Not set"})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl shadow-lg border border-[#2A2A2A] mb-6",children:[e.jsx("div",{className:"px-4 py-4 border-b border-[#2A2A2A]",children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Account Summary"})}),e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] rounded-xl",children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Member since"}),e.jsx("div",{className:"text-white text-lg font-bold",children:new Date().toLocaleDateString("en-PH",{month:"long",year:"numeric"})})]})})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["v",zo]}),e.jsx("p",{className:"text-xs text-gray-600",children:j?.display_name})]}),!m&&e.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-xl hover:shadow-xl transition-all duration-300 transform hover:scale-105 shadow-lg mb-4",children:[e.jsx(W7,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Profile"})]}),m&&e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsxs("button",{onClick:()=>{h(!1),B()},className:"flex-1 px-4 py-3 bg-[#1A1A1A] border border-[#2A2A2A] text-gray-300 rounded-xl hover:bg-[#2A2A2A] transition-colors",children:[e.jsx(Ze,{className:"w-4 h-4 inline mr-2"}),"Cancel"]}),e.jsxs("button",{onClick:_,disabled:p,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-xl hover:shadow-xl transition-all duration-300 disabled:opacity-50",children:[e.jsx(qr,{className:"w-4 h-4"}),e.jsx("span",{children:p?"Saving...":"Save Changes"})]})]})]})]})},Pz=({images:t=[],autoPlay:s=!0,interval:n=5e3})=>{const[i,o]=C.useState(0),c=t&&t.length>0?t:["/carousel/IMG_0154-min.JPG","/carousel/IMG_0155-min.JPG","/carousel/IMG_0164-min.JPG","/carousel/IMG_0165-min.JPG","/carousel/IMG_0166-min.JPG"];C.useEffect(()=>{if(!s||c.length<=1)return;const h=setInterval(()=>{o(p=>(p+1)%c.length)},n);return()=>clearInterval(h)},[s,n,c.length]);const d=()=>{o(h=>(h-1+c.length)%c.length)},m=()=>{o(h=>(h+1)%c.length)};return e.jsxs("div",{className:"h-56 relative",children:[c.map((h,p)=>e.jsx("div",{className:`absolute inset-0 bg-cover bg-center bg-no-repeat transition-opacity duration-1000 ${p===i?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${h})`}},p)),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 rounded-full flex items-center justify-center transition-all z-10",children:e.jsx(Xa,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/30 hover:bg-black/50 rounded-full flex items-center justify-center transition-all z-10",children:e.jsx(sr,{className:"w-6 h-6 text-white"})})]})]})},Tz={booking:rt,payment:ds,system:Ir,promotion:Qt,reminder:Nt,alert:Ea},RA={low:"text-blue-400",medium:"text-yellow-400",high:"text-orange-400",urgent:"text-red-400"},zA={booking:"border-blue-500",payment:"border-green-500",system:"border-gray-500",promotion:"border-purple-500",reminder:"border-yellow-500",alert:"border-red-500"},IA={booking:"bg-blue-500/20",payment:"bg-green-500/20",system:"bg-gray-500/20",promotion:"bg-purple-500/20",reminder:"bg-yellow-500/20",alert:"bg-red-500/20"},Oz=({notification:t,onMarkAsRead:s,onDelete:n})=>{const[i,o]=C.useState(!1),c=Tz[t.type]||Ir,d=RA[t.priority]||RA.medium,m=zA[t.type]||zA.system,h=IA[t.type]||IA.system,p=f=>{const y=Date.now()-f,b=Math.floor(y/(1e3*60)),j=Math.floor(y/(1e3*60*60)),N=Math.floor(y/(1e3*60*60*24));return b<1?"Just now":b<60?`${b}m ago`:j<24?`${j}h ago`:N<7?`${N}d ago`:new Date(f).toLocaleDateString()},u=()=>{t.action_url&&(window.location.href=t.action_url)};return e.jsxs("div",{className:`relative p-4 rounded-xl border-2 transition-all duration-200 cursor-pointer
        ${t.is_read?"bg-[#0A0A0A] border-[#2A2A2A] hover:bg-[#1A1A1A]":`bg-[#1A1A1A] ${m} hover:brightness-110`}
      `,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onClick:()=>!t.is_read&&s(t._id),children:[!t.is_read&&e.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-[var(--color-primary)] rounded-full animate-pulse shadow-lg shadow-[var(--color-primary)]/30"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${h} ${t.is_read?"opacity-60":""}`,children:e.jsx(c,{className:`${d} ${t.is_read?"opacity-70":""}`,size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold text-sm leading-tight ${t.is_read?"text-gray-300":"text-white"}`,children:t.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:p(t.createdAt)}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t.is_read?"bg-gray-500/20 text-gray-400":"bg-[var(--color-primary)]/20 text-[var(--color-primary)]"}`,children:t.type})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[!t.is_read&&e.jsx("button",{onClick:f=>{f.stopPropagation(),s(t._id)},className:"p-1.5 text-gray-400 hover:text-[var(--color-primary)] transition-colors rounded-lg hover:bg-[var(--color-primary)]/10",title:"Mark as read",children:e.jsx(hr,{size:14})}),i&&e.jsx("button",{onClick:f=>{f.stopPropagation(),n(t._id)},className:"p-1.5 text-gray-400 hover:text-red-400 transition-colors rounded-lg hover:bg-red-500/10",title:"Delete notification",children:e.jsx(Ze,{size:14})})]})]}),e.jsx("p",{className:`text-sm leading-relaxed mb-3 ${t.is_read?"text-gray-400":"text-gray-300"}`,children:t.message}),t.action_label&&e.jsxs("button",{onClick:u,className:`inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg
                bg-[var(--color-primary)] hover:bg-[var(--color-primary)]/90 text-white transition-all duration-200 shadow-lg shadow-[var(--color-primary)]/20`,children:[t.action_label,e.jsx("span",{className:"ml-1",children:""})]}),t.metadata?.booking_id&&e.jsx("div",{className:"mt-3 pt-3 border-t border-[#2A2A2A]",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Booking ID: ",e.jsx("span",{className:"font-mono text-gray-400",children:t.metadata.booking_id})]})})]})]})]})},Mz=({onBack:t})=>{const{user:s}=Dt(),[n,i]=C.useState("all"),[o,c]=C.useState(!1),d=me(H.services.bookingNotifications.getRecentNotifications,{userId:s?._id,limit:50,type:n==="all"?void 0:n,unreadOnly:o}),m=me(H.services.bookingNotifications.getNotificationStats,{userId:s?._id}),h=De(H.services.bookingNotifications.markNotificationsAsRead),p=De(H.services.notifications.deleteNotification),u=De(H.services.notifications.markAllAsRead),f=async j=>{try{await h({userId:s._id,notificationIds:[j]})}catch(N){console.error("Failed to mark notification as read:",N)}},g=async j=>{try{await p({notificationId:j,userId:s._id})}catch(N){console.error("Failed to delete notification:",N)}},y=async()=>{try{await u({userId:s._id})}catch(j){console.error("Failed to mark all as read:",j)}},b=[{value:"all",label:"All",count:m?.totalCount||0},{value:"booking",label:"Bookings",count:m?.byType?.booking||0},{value:"payment",label:"Payments",count:m?.byType?.payment||0},{value:"reminder",label:"Reminders",count:m?.byType?.reminder||0},{value:"alert",label:"Alerts",count:m?.byType?.alert||0}];return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-[#0A0A0A]/95 backdrop-blur-xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-[var(--color-primary)]/20 rounded-lg border border-[var(--color-primary)]/50",children:e.jsx(Is,{className:"text-[var(--color-primary)] w-5 h-5"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"Notifications"}),e.jsxs("p",{className:"text-xs text-[var(--color-primary)]",children:[m?.unreadCount||0," unread"]})]})]})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-3 border border-[#2A2A2A] text-center",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:m?.totalCount||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Total"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-3 border border-[var(--color-primary)]/50 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-[var(--color-primary)]",children:m?.unreadCount||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Unread"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-3 border border-blue-500/50 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400",children:m?.byType?.booking||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Bookings"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-3 border border-green-500/50 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-400",children:m?.byType?.payment||0}),e.jsx("div",{className:"text-xs text-gray-400",children:"Payments"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-3 border border-[#2A2A2A]",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(j=>e.jsxs("button",{onClick:()=>i(j.value),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 flex-1
                    ${n===j.value?"bg-[var(--color-primary)] text-white":"bg-[#0A0A0A] text-gray-400 hover:bg-[#2A2A2A] hover:text-white"}`,children:[e.jsx("div",{className:"text-xs",children:j.label}),j.count>0&&e.jsxs("div",{className:`text-xs mt-0.5 ${n===j.value?"text-white/80":"text-[var(--color-primary)]"}`,children:["(",j.count,")"]})]},j.value))})})}),e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-[#1A1A1A] rounded-xl p-4 border border-[#2A2A2A]",children:[e.jsxs("label",{className:"flex items-center text-sm text-gray-300 cursor-pointer hover:text-white transition-colors",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:j=>c(j.target.checked),className:"mr-3 w-4 h-4 accent-[var(--color-primary)] rounded"}),"Show unread only"]}),m&&m.unreadCount>0&&e.jsxs("button",{onClick:y,className:"flex items-center space-x-2 px-4 py-2 text-sm bg-[var(--color-primary)] hover:bg-[var(--color-primary)]/90 text-white rounded-lg transition-colors font-medium",children:[e.jsx(Je,{size:14}),e.jsx("span",{children:"Mark all read"})]})]}),e.jsx("div",{className:"space-y-3",children:d===void 0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-t-2 border-[var(--color-primary)] mb-4"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Loading notifications..."})]}):d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400 bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A]",children:[e.jsx("div",{className:"p-4 bg-[#0A0A0A] rounded-2xl border border-[#2A2A2A] mb-4",children:e.jsx(Is,{size:48,className:"text-gray-500"})}),e.jsx("h4",{className:"text-lg font-semibold mb-2 text-white",children:"No notifications found"}),e.jsx("p",{className:"text-sm text-center max-w-md px-4",children:o?"No unread notifications at the moment.":"You're all caught up! Check back later for new updates."})]}):d.map(j=>e.jsx(Oz,{notification:j,onMarkAsRead:f,onDelete:g},j._id))}),d&&d.length>0&&e.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500 space-y-1",children:[e.jsx("p",{children:"Notifications expire after 7 days"}),e.jsx("p",{className:"text-gray-600",children:""}),e.jsxs("p",{children:[m?.totalCount||0," total notifications"]})]})]}),e.jsx("div",{className:"h-6"})]})},LA=()=>{const{user:t,isAuthenticated:s}=Dt(),{branding:n}=Ts(),i=um(),o=Ws(),[c,d]=C.useState("home"),[m,h]=C.useState(!1);if(a9(),n9(),!(i.pathname==="/customer/dashboard"&&!i.pathname.includes("/home")&&!i.pathname.includes("/client")))return null;C.useEffect(()=>{s&&t&&(sessionStorage.getItem("onboarding_completed")||h(!0))},[s,t]),C.useEffect(()=>{const E=()=>{console.log("Switching to bookings tab..."),d("home")};return window.addEventListener("switchToBookings",E),()=>{window.removeEventListener("switchToBookings",E)}},[]);const u=()=>{h(!1)},f=me(H.services.services.getActiveServices),g=me(H.services.barbers.getActiveBarbers),y=t?._id?me(H.services.bookings.getBookingsByCustomer,{customerId:t._id}):void 0,b=t?._id?me(H.services.vouchers.getVouchersByUser,{userId:t._id}):void 0,j=me(H.services.branches.getAllBranches),N=j?.find(E=>E.is_active)||j?.[0];C.useEffect(()=>{f===null&&console.error("Failed to load services"),g===null&&console.error("Failed to load barbers"),t?._id&&y===null&&console.error("Failed to load bookings"),t?._id&&b===null&&console.error("Failed to load vouchers")},[f,g,y,b,t]);const w=[{id:"home",label:"Home",icon:F3},{id:"bookings",label:"Bookings",icon:lg},{id:"wallet",label:"Wallet",icon:gi},{id:"vouchers",label:"Vouchers",icon:Qt},{id:"ai-assistant",label:"AI",icon:Gu}],S=(()=>{const E=y?y.filter(F=>F.status!=="cancelled").length:0,D=b?b.filter(F=>F.status==="assigned"&&!F.isExpired).length:0;return{totalBookings:E,activeVouchers:D}})(),_=[{label:"Total Bookings",value:S.totalBookings.toString(),icon:Nt},{label:"Active Vouchers",value:S.activeVouchers.toString(),icon:Qt}],k=()=>{switch(c){case"booking":return e.jsx(uz,{onBack:()=>d("home")});case"bookings":return e.jsx(yz,{onBack:()=>d("home")});case"vouchers":return e.jsx(gz,{onBack:()=>d("home")});case"ai-assistant":return e.jsx(Dz,{onNavigateToBooking:E=>{d("booking"),E&&sessionStorage.setItem("preSelectedService",JSON.stringify(E))}});case"profile":return e.jsx(Fz,{onBack:()=>d("home")});case"loyalty":return e.jsx(vz,{onBack:()=>d("home")});case"notifications":return e.jsx(Mz,{onBack:()=>d("home")});default:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"px-4 mb-8",children:e.jsxs("div",{className:"relative overflow-hidden rounded-[28px] shadow-2xl",children:[e.jsx(Pz,{images:N?.carousel_images||[],autoPlay:!0,interval:5e3}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent pointer-events-none"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 z-10",children:[e.jsx("h2",{className:"text-2xl font-black text-white mb-1",children:"Welcome Back"}),e.jsx("p",{className:"text-sm text-white/80 font-medium",children:"Your next grooming experience awaits"})]})]})}),e.jsx("div",{className:"px-4 mb-8",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:_.map(E=>e.jsxs("div",{className:"relative bg-[var(--color-bg)] rounded-[24px] p-6 border-2 border-[var(--color-primary)]/40 hover:border-[var(--color-primary)] active:scale-[0.98] transition-all duration-200 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--color-primary)]/5 to-transparent rounded-[24px] opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3",children:E.label}),e.jsx("div",{className:"text-5xl font-black text-white",children:E.value})]})]},E.label))})}),e.jsx("div",{className:"px-4 mb-8",children:e.jsxs("button",{onClick:()=>d("booking"),className:"w-full relative rounded-[24px] overflow-hidden group active:scale-[0.98] transition-all duration-300",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--color-primary)] via-[var(--color-accent)] to-[var(--color-primary)] bg-[length:200%_100%] animate-gradient p-[2px] rounded-[24px]",children:e.jsx("div",{className:"w-full h-full bg-[var(--color-bg)] rounded-[22px]"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--color-primary)]/0 via-[var(--color-primary)]/20 to-[var(--color-primary)]/0 opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-500"}),e.jsxs("div",{className:"relative z-10 p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-2xl blur-md opacity-60"}),e.jsx("div",{className:"relative w-14 h-14 rounded-2xl bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center",children:e.jsx(rt,{className:"w-7 h-7 text-white"})})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-xl font-black text-white mb-0.5",children:"Book Appointment"}),e.jsx("div",{className:"text-sm text-gray-400 font-medium",children:"Schedule your next visit"})]})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})]})]})})]})}};return e.jsxs("div",{className:"min-h-screen bg-[var(--color-bg)]",children:[m&&e.jsx(wz,{onComplete:u}),!["booking","vouchers","ai-assistant","loyalty","bookings","profile"].includes(c)&&e.jsx("div",{className:"sticky top-0 z-40 bg-[var(--color-bg)]/98 backdrop-blur-2xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center py-5",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:n?.logo_light_url,alt:n?.display_name||"Logo",className:"w-14 h-14 object-contain"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-black text-[var(--color-primary)]",children:n?.display_name||""}),e.jsx("p",{className:"text-xs font-semibold text-[var(--color-primary)]",children:n?.display_name?"Branch":"Angeles"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xg,{userId:t?._id,onOpenModal:()=>d("notifications")}),e.jsxs("button",{onClick:()=>d("profile"),className:"relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-full opacity-0 group-hover:opacity-100 blur-md transition-opacity duration-300"}),e.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden ring-2 ring-[#1A1A1A] group-hover:ring-[var(--color-primary)]/50 transition-all duration-300",children:e.jsx("img",{src:t&&t.avatar?t.avatar:"/img/avatar_default.jpg",alt:t?.username||"Profile",className:"w-full h-full object-cover"})})]})]})]})})}),e.jsx("div",{className:"relative z-10 max-w-md mx-auto pb-20",children:k()}),!m&&!["booking","vouchers","ai-assistant","loyalty","bookings","profile"].includes(c)&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 pb-safe",children:e.jsx("div",{className:"max-w-md mx-auto px-4 pb-6",children:e.jsx("div",{className:"bg-[var(--color-bg)]/95 backdrop-blur-2xl rounded-[28px] border border-[#1A1A1A] shadow-2xl p-2",children:e.jsx("div",{role:"navigation","aria-label":"Primary",className:"grid grid-cols-5 gap-1",children:w.map(E=>{const D=E.icon,F=c===E.id;return e.jsxs("button",{onClick:()=>{E.id==="wallet"?o("/customer/wallet"):d(E.id)},className:`flex flex-col items-center justify-center py-3 px-2 rounded-[20px] transition-all duration-300 relative active:scale-95 ${F?"bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)]":"hover:bg-white/5"}`,"aria-current":F?"page":void 0,children:[F&&e.jsx("div",{className:"absolute top-1 w-6 h-0.5 rounded-full bg-white/60"}),e.jsx(D,{className:`w-6 h-6 mb-1 transition-all ${F?"text-white":"text-gray-500"}`}),e.jsx("span",{className:`text-[10px] font-semibold transition-all ${F?"text-white":"text-gray-500"}`,children:E.label})]},E.id)})})})})})]})};function Rz(){const[t,s]=C.useState(null),[n,i]=C.useState(null),[o,c]=C.useState(""),[d,m]=C.useState(""),[h,p]=C.useState(null),[u,f]=C.useState(""),[g,y]=C.useState(null),[b,j]=C.useState(""),[N,w]=C.useState(!1),[B,S]=C.useState(!1),_=Ws(),{user:k,isAuthenticated:E}=Dt(),D=t?me(H.services.services.getActiveServicesByBranch,{branch_id:t._id}):void 0,F=t?me(H.services.barbers.getBarbersByBranch,{branch_id:t._id}):void 0,M=De(H.services.bookings.createBooking),P=t&&(D===void 0||F===void 0);C.useEffect(()=>{const Z=sessionStorage.getItem("preSelectedBarber");if(Z&&F&&F.length>0)try{const ne=JSON.parse(Z),I=F.find(O=>O._id===ne.barberId);I&&p(I),sessionStorage.removeItem("preSelectedBarber")}catch(ne){console.error("Error parsing pre-selected barber:",ne),sessionStorage.removeItem("preSelectedBarber")}},[F]),fr.useMemo(()=>{if(!h||!o)return["09:00","09:30","10:00","10:30","11:00","11:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00"];const ne=new Date(o).toLocaleDateString("en-US",{weekday:"long"}).toLowerCase();if(!h.schedule||!h.schedule[ne])return[];const I=h.schedule[ne];if(!I.available)return[];const[O,G]=I.start.split(":").map(Number),[te,Q]=I.end.split(":").map(Number),ee=[];let le=O,R=G;for(;le<te||le===te&&R<Q;){const q=`${le.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`;ee.push(q),R+=30,R>=60&&(R=0,le+=1)}return ee},[h,o]);const T=async Z=>{try{const ne=await Cr.toDataURL(Z,{width:200,margin:2,color:{dark:"#36454F",light:"#FFFFFF"}});j(ne)}catch(ne){console.error("Error generating QR code:",ne)}},L=async()=>{if(!t||!n||!o||!d){f("Please select branch, service, date, and time");return}w(!0),f("");try{const Z=d.includes(":")?`${d}:00`:d,ne=k?._id||"guest",I=await M({customer:ne,branch_id:t._id,service:n._id,barber:h?h._id:void 0,date:o,time:Z,status:"pending"});y(I),I.booking_code&&await T(I.booking_code)}catch(Z){f("An unexpected error occurred. Please try again."),console.error("Booking error:",Z)}finally{w(!1)}},X=()=>{y(null),j(""),s(null),i(null),c(""),m(""),p(null),f(""),S(!1)};return P&&!D?.length?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--color-primary)] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading booking options..."})]})}):g?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsx("header",{className:"bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30 shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"px-4 py-4 flex items-center",children:e.jsx("h1",{className:"text-xl font-bold text-white",children:"Booking Confirmed"})})}),e.jsx("div",{className:"relative z-10 px-4 py-6 space-y-6",children:e.jsxs(Bu,{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl border-2 border-green-500/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl text-green-400",children:""})}),e.jsx("h2",{className:"text-xl font-bold text-green-400 mb-2",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Your appointment has been successfully booked"})]}),b&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3 text-white",children:"QR Code"}),e.jsx("div",{className:"bg-white p-4 rounded-xl inline-block",children:e.jsx("img",{src:b,alt:"Booking QR Code",className:"mx-auto"})}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Show this QR code at the barbershop"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Kr,{onClick:()=>_("/customer/dashboard"),className:"w-full bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white hover:from-[var(--color-accent)] hover:brightness-110 transition-colors",children:"Go to Dashboard"}),e.jsx(Kr,{onClick:X,className:"w-full bg-[#444444] text-gray-300 border border-[#555555] hover:bg-[#555555] transition-colors",children:"Book Another Appointment"})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("header",{className:"bg-[#0A0A0A]/95 backdrop-blur-xl border-b border-[#1A1A1A] sticky top-0 z-10",children:e.jsxs("div",{className:"px-4 py-4 flex items-center",children:[e.jsx(Js,{to:"/customer/dashboard",className:"mr-4 text-white hover:text-white/80",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-xl font-bold text-white",children:"Book Appointment"})]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[u&&e.jsx(Bu,{className:"bg-red-500/20 border border-red-500/30 p-4",children:e.jsx("p",{className:"text-sm text-red-300",children:u})}),t&&n&&o&&d&&!E&&!B&&e.jsxs(Bu,{className:"bg-[#1A1A1A] border border-[#2A2A2A] p-6 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3 text-white",children:"5. Sign In or Continue as Guest"}),e.jsx("p",{className:"text-sm text-gray-400 mb-5",children:"Sign in to track your booking history or continue as a guest for a one-time booking."}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(Kr,{onClick:()=>_("/auth/login"),className:"w-full bg-[#1F1F1F] text-white border border-[#2A2A2A] hover:bg-[#2A2A2A] transition-all",children:"Sign In"}),e.jsx(Kr,{onClick:()=>S(!0),className:"w-full bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white hover:shadow-lg transition-all",children:"Continue as Guest"})]})]}),(E||B)&&t&&n&&o&&d&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-white",children:"6. Choose Barber (Optional)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>p(null),className:`w-full p-4 rounded-lg border-2 text-left transition-colors ${h===null?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-[#2A2A2A] bg-[#1A1A1A]"}`,children:[e.jsx("span",{className:"font-medium text-white",children:"No preference"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Any available barber"})]}),F&&F.length>0?F.map(Z=>e.jsxs("button",{onClick:()=>p(Z),className:`w-full p-4 rounded-lg border-2 text-left transition-colors ${h?._id===Z._id?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-[#2A2A2A] bg-[#1A1A1A] hover:border-[var(--color-primary)]/50"}`,children:[e.jsx("span",{className:"font-medium text-white",children:Z.full_name}),e.jsx("p",{className:"text-sm text-gray-400",children:"Professional barber"})]},Z._id)):e.jsx(Bu,{style:{backgroundColor:"white",border:"1px solid #E0E0E0"},children:e.jsx("p",{className:"text-center text-gray-500 py-4",children:F===void 0?"Loading barbers...":"No barbers available at this branch"})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(Kr,{onClick:L,disabled:N,className:`w-full transition-colors ${N?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white hover:shadow-lg"}`,children:N?"Creating Booking...":"Confirm Booking"})})]})]})]})}const qA=(t,s)=>{if(!t)return t;let n=0,i=0,o=0;return t.length===4?(n=parseInt(t[1]+t[1],16),i=parseInt(t[2]+t[2],16),o=parseInt(t[3]+t[3],16)):t.length===7&&(n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16)),`rgba(${n}, ${i}, ${o}, ${s})`},$A=({barber:t,className:s="w-12 h-12"})=>{const[n,i]=C.useState(!1),c=me(H.services.barbers.getImageUrl,t.avatarStorageId?{storageId:t.avatarStorageId}:"skip")||t.avatarUrl||"/img/avatar_default.jpg";return n||!c?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 rounded-full ${s}`,children:e.jsx(tt,{className:"w-6 h-6 text-gray-500"})}):e.jsx("img",{src:c,alt:`${t.full_name||t.name} avatar`,className:`${s} rounded-full object-cover`,onError:()=>i(!0)})},zz=({onBack:t})=>{const{branding:s}=Ts(),[n,i]=C.useState({name:"",email:"",number:""}),[o,c]=C.useState(!1);De(H.services.auth.createUser);const d=De(H.services.auth.createGuestUser),{user:m,isAuthenticated:h}=Dt(),[p,u]=C.useState(null),[f,g]=C.useState(null),[y,b]=C.useState(()=>new Date().toISOString().split("T")[0]),[j,N]=C.useState(null),[w,B]=C.useState(null),[S,_]=C.useState(1),[k,E]=C.useState(!1),[D,F]=C.useState(!1),[M,P]=C.useState(null),[T,L]=C.useState(null),[X,Z]=C.useState(!0),[ne,I]=C.useState(null),[O,G]=C.useState(!1),[te,Q]=C.useState(""),[ee,le]=C.useState(""),R=C.useRef(null),[q,J]=C.useState(null),$=me(H.services.branches.getActiveBranches),Y=me(H.services.services.getServicesByBranch,p?{branch_id:p._id}:"skip"),xe=me(H.services.barbers.getBarbersByBranch,p?{branch_id:p._id}:"skip"),oe=me(H.services.vouchers.getVouchersByUser,m?._id?{userId:m._id}:"skip"),de=De(H.services.bookings.createBooking),ve=Xr(H.services.payments.createPaymentRequest),Me=De(H.services.bookings.updatePaymentStatus),Ke=me(H.services.bookings.getBookingById,T?._id?{id:T._id}:"skip"),pe=me(H.services.bookings.getBookingsByBarberAndDate,w&&y?{barberId:w._id,date:y}:"skip"),be=De(H.services.vouchers.redeemVoucher);C.useEffect(()=>{sessionStorage.removeItem("user_id"),sessionStorage.removeItem("guest_email"),sessionStorage.removeItem("guest_name"),sessionStorage.removeItem("guest_number"),sessionStorage.removeItem("guest_type"),i({name:"",email:"",number:""}),c(!1)},[]),C.useEffect(()=>{const _e=sessionStorage.getItem("preSelectedService");if(_e&&Y&&p)try{const $e=JSON.parse(_e),ot=Y.find(ie=>ie._id===$e._id||ie.name.toLowerCase().includes("haircut")||ie.name.toLowerCase().includes("cut"));ot&&(g(ot),_(3)),sessionStorage.removeItem("preSelectedService")}catch($e){console.error("Error parsing pre-selected service:",$e),sessionStorage.removeItem("preSelectedService")}},[Y,p]),C.useEffect(()=>{const _e=sessionStorage.getItem("preSelectedBarber");if(_e&&xe&&xe.length>0)try{const $e=JSON.parse(_e),ot=xe.find(ie=>ie._id===$e.barberId);if(ot&&(B(ot),ot.branch_id&&$)){const ie=$.find(Ae=>Ae._id===ot.branch_id);ie&&!p&&(u(ie),_(2))}sessionStorage.removeItem("preSelectedBarber")}catch($e){console.error("Error parsing pre-selected barber:",$e),sessionStorage.removeItem("preSelectedBarber")}},[xe,$,p]),C.useEffect(()=>{S===7&&Z(!0)},[S]),C.useEffect(()=>{if(S===7&&T?._id&&Ke?.booking_code){console.log("Step 5 reached with booking ID:",T._id,"actual booking code:",Ke.booking_code);const _e=(ot=0)=>{if(R.current){console.log("Canvas found, generating QR code with actual booking data");const ie=Ke,Ae=ie.booking_code;console.log("Generating QR with data:",Ae),console.log("QR Scanner expects format with bookingId and bookingCode fields:",{bookingId:ie._id,bookingCode:ie.booking_code}),Cr.toCanvas(R.current,Ae,{width:192,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},nt=>{nt?console.error("QR Code generation error:",nt):console.log("QR Code generated successfully with booking code:",ie.booking_code),Z(!1)})}else ot<5?(console.log(`Canvas ref not available, retrying... (${ot+1}/5)`),setTimeout(()=>_e(ot+1),200)):(console.error("Canvas ref still not available after 5 retries"),Z(!1))},$e=setTimeout(()=>_e(),100);return()=>clearTimeout($e)}},[S,T?._id,Ke?.booking_code,f,w,ne]);const Be=()=>!o||!oe?[]:oe.filter(_e=>{const $e=_e.expires_at>Date.now(),ot=!_e.redeemed;return $e&&ot}),Ue=fr.useMemo(()=>{if(!y||!w||!p)return[];const _e=[],$e=new Date,ot=new Date(y),ie=ot.toDateString()===$e.toDateString(),Ae=$e.getHours();$e.getMinutes();const nt=ot.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase(),ct=w.schedule?.[nt];if(!ct||!ct.available)return[];const[pt,re]=ct.start.split(":").map(Number),[Oe,qe]=ct.end.split(":").map(Number),ut=pe?pe.filter(dt=>dt.status!=="cancelled").map(dt=>dt.time.substring(0,5)):[];for(let dt=pt;dt<Oe;dt++){const Zt=`${dt.toString().padStart(2,"0")}:${"0".padStart(2,"0")}`,Wt=dt===12?"12:00 PM":dt>12?`${dt-12}:00 PM`:`${dt}:00 AM`;let Ls=!0,Ks=null;if(ut.includes(Zt)&&(Ls=!1,Ks="booked"),ie&&dt<Ae&&(Ls=!1,Ks="past"),w.blocked_periods&&w.blocked_periods.length>0){const xa=ot.toISOString().split("T")[0],us=w.blocked_periods.find(_a=>_a.date===xa);if(us)if(!us.start_time&&!us.end_time)Ls=!1,Ks="blocked";else{const _a=Zt,ua=en=>{if(!en)return 0;const[qn,$n]=en.split(":").map(Number);return qn*60+$n},xt=ua(_a),Gt=ua(us.start_time),_i=ua(us.end_time);xt>=Gt&&xt<_i&&(Ls=!1,Ks="blocked")}}_e.push({time:Zt,displayTime:Wt,available:Ls,reason:Ks})}return _e},[y,w,p,pe]),ue=()=>{if(!xe)return[];let _e=xe.filter($e=>$e.is_active);return f&&(_e=_e.filter($e=>$e.services&&Array.isArray($e.services)&&$e.services.some(ot=>ot===f._id))),_e},Ie=async(_e="pay_later",$e=null)=>{if(!f||!y||!j){alert("Please fill in all booking details");return}const ot=sessionStorage.getItem("user_id");if(!ot){alert("Guest account not created properly. Please try again."),_(4);return}try{F(!0);const ie=j.includes(":")?`${j}:00`:j,Ae=n.email||sessionStorage.getItem("guest_email"),nt=n.name||sessionStorage.getItem("guest_name"),ct={customer:ot,service:f._id,barber:w?._id||void 0,branch_id:p._id,date:y,time:ie,status:"booked",notes:ne?`Used voucher: ${ne.code}`:void 0,voucher_id:ne?._id||void 0,discount_amount:ne?.value||void 0,customer_email:Ae,customer_name:nt};console.log("Creating booking with data:",ct);const pt=await de(ct),re={_id:pt,booking_code:null,service:f,barber:w,date:y,time:ie,status:"booked",voucher_code:ne?.code};if(L(re),_e==="pay_now"&&$e){if(!await st(pt,$e))return;try{await Me({id:pt,payment_status:"paid"}),console.log("Booking payment status updated to paid")}catch(qe){console.error("Error updating booking payment status:",qe)}}else _(7);if(ne?.code&&ot)try{console.log("Redeeming voucher:",ne.code,"User ID:",ot);const Oe=await be({code:ne.code,user_id:ot});console.log(" Voucher redeemed successfully:",{code:ne.code,voucherId:ne._id,status:"redeemed",result:Oe}),setTimeout(()=>{console.log(` Voucher ${ne.code} has been applied and marked as redeemed!`)},1500)}catch(Oe){console.error(" Error during voucher redemption:",{code:ne.code,error:Oe?.message||Oe,userId:ot}),alert("Booking confirmed! Note: Voucher status update encountered an issue. Please refresh to see the updated status.")}}catch(ie){console.error("Error creating booking:",ie),alert(ie.message||"Failed to create booking. Please try again.")}finally{F(!1)}},st=async(_e,$e)=>{try{const ot=f?.price||0,ie=ne?.value||0,Ae=Math.max(0,ot-ie);if(Ae===0)return _(6),!0;console.log("Processing payment:",{amount:Ae,paymentMethod:$e,bookingId:_e});const nt=n.email||sessionStorage.getItem("guest_email"),ct=n.name||sessionStorage.getItem("guest_name"),pt=await ve({amount:Ae,paymentMethod:$e,bookingId:_e,customerEmail:nt,customerName:ct});return console.log("Payment created successfully:",pt),pt.redirect_url?(window.location.href=pt.redirect_url,!0):(_(7),!0)}catch(ot){return console.error("Payment processing error:",ot),alert(`Payment failed: ${ot.message}. Please try again or choose pay later.`),!1}},Le=_e=>{u(_e),g(null),B(null),N(null),_(2)},kt=_e=>{g(_e),_(4)},Pt=_e=>{console.log("Selected Barber ID:",_e._id),sessionStorage.setItem("barberId",_e._id),B(_e),_(3)},St=async(_e="pay_later",$e=null)=>{const ot=sessionStorage.getItem("user_id"),ie=sessionStorage.getItem("guest_email");if(!ot||!ie){Bt("Guest Account Required","Please complete the guest information form before booking."),_(4);return}await Ie(_e,$e)},Jt=()=>e.jsx("div",{className:"flex justify-center mb-4 px-4 py-2",children:e.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5,6,7].map(_e=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${S>=_e?"text-white shadow-md":"text-gray-500"}`,style:{backgroundColor:S>=_e?s?.primary_color||"#F68B24":s?.muted_color||"#E0E0E0"},children:S>_e?"":_e}),_e<7&&e.jsx("div",{className:"w-4 h-0.5 mx-1 rounded transition-all duration-300",style:{backgroundColor:S>_e?s?.primary_color||"#F68B24":s?.muted_color||"#E0E0E0"}})]},_e))})}),Ne=()=>{if(!$)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"})});if($.length===0)return e.jsx("div",{className:"text-center py-12 px-4",children:e.jsx("p",{className:"text-sm text-gray-400",children:"No branches available"})});const _e=$.filter($e=>{const ot=te.toLowerCase();return $e.name.toLowerCase().includes(ot)||$e.address.toLowerCase().includes(ot)||$e.branch_code.toLowerCase().includes(ot)||$e.phone.includes(ot)});return e.jsxs("div",{className:"px-4 pb-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Select Location"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Choose your preferred branch to continue"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by name, address, or code...",value:te,onChange:$e=>Q($e.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-[#1A1A1A] border border-[#2A2A2A] text-white placeholder-gray-500 rounded-lg focus:outline-none focus:border-[var(--color-primary)] transition-colors text-sm"}),te&&e.jsx("button",{onClick:()=>Q(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:e.jsx(Ze,{className:"w-4 h-4"})})]})}),_e.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-sm text-gray-400",children:['No branches found matching "',te,'"']})}):e.jsx("div",{className:"space-y-3",children:_e.map($e=>e.jsx("button",{onClick:()=>Le($e),className:"w-full bg-[#1A1A1A] hover:bg-[#222222] border border-[#2A2A2A] hover:border-[var(--color-primary)] rounded-lg p-4 text-left transition-all duration-200 group",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx(yi,{className:"w-5 h-5 text-[var(--color-primary)] flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-semibold text-white mb-1 group-hover:text-[var(--color-primary)] transition-colors",children:$e.name}),e.jsxs("div",{className:"space-y-0.5 text-xs text-gray-400",children:[e.jsx("p",{className:"truncate",children:$e.address}),e.jsx("div",{className:"flex items-center gap-3"})]})]})]}),e.jsx("div",{className:"ml-4 text-gray-500 group-hover:text-[var(--color-primary)] transition-colors flex-shrink-0",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})},$e._id))})]})},Ye=()=>{if(k||!Y)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary)]"})});if(M)return e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("p",{className:"text-sm text-red-400 mb-4",children:M}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:bg-[var(--color-accent)] transition-colors text-sm font-medium",children:"Try Again"})]});const _e=ie=>{if(!ie)return"Other Services";const Ae=ie.toLowerCase();return Ae.includes("haircut")||Ae.includes("hair")?"Haircut":Ae.includes("package")?"Package":"Other Services"},ot=(w?Y.filter(ie=>w.services&&w.services.includes(ie._id)):Y).reduce((ie,Ae)=>{const nt=_e(Ae.category);return ie[nt]||(ie[nt]=[]),ie[nt].push(Ae),ie},{});return e.jsxs("div",{className:"px-4 pb-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Choose Service"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Select the service you'd like to book"," ",w?`with ${w.full_name||w.name}`:`at ${p?.name}`]})]}),e.jsxs("div",{className:"mb-4 relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search services...",value:ee,onChange:ie=>le(ie.target.value),className:"w-full pl-10 pr-10 py-2.5 bg-[#1A1A1A] border border-[#2A2A2A] text-white placeholder-gray-500 rounded-lg focus:outline-none focus:border-[var(--color-primary)] transition-colors text-sm"}),ee&&e.jsx("button",{onClick:()=>le(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors",children:e.jsx(Ze,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-3",children:["Haircut","Package","Other Services"].map(ie=>{const nt=(ot[ie]||[]).filter(pt=>{const re=ee.toLowerCase();return pt.name.toLowerCase().includes(re)||pt.description&&pt.description.toLowerCase().includes(re)||pt.price.toString().includes(re)});if(nt.length===0)return null;const ct=q===ie;return e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#2A2A2A]",children:[e.jsxs("button",{onClick:()=>J(ct?null:ie),className:"w-full text-left px-4 py-3 flex justify-between items-center text-white font-semibold",children:[e.jsx("span",{children:ie}),e.jsx("span",{children:ct?"":"+"})]}),ct&&e.jsx("div",{className:"space-y-2 px-4 pb-4",children:nt.map(pt=>{const re=xe?xe.filter(Oe=>Oe.is_active&&Oe.services&&Array.isArray(Oe.services)&&Oe.services.some(qe=>qe===pt._id)).length:0;return e.jsxs("button",{onClick:()=>kt(pt),className:"w-full bg-[#2A2A2A] hover:bg-[#333333] border border-[#444444] hover:border-[var(--color-primary)]/50 rounded-xl p-4 text-left transition-all duration-200 flex justify-between items-center group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-1 truncate",children:pt.name}),pt.description&&e.jsx("p",{className:"text-sm text-gray-400 mb-2 line-clamp-1",children:pt.description}),e.jsx("div",{className:"text-[var(--color-primary)] font-bold text-base",children:pt.hide_price?"Price may vary":`${parseFloat(pt.price||0).toLocaleString()}`}),re===0&&e.jsx("p",{className:"text-[10px] mt-1",style:{color:s?.primary_color||"#f59e0b"},children:"Limited availability"})]}),e.jsx("div",{className:"self-center text-gray-400 group-hover:text-[var(--color-primary)] transition-colors duration-200 ml-4",children:e.jsx(sr,{className:"w-6 h-6"})})]},pt._id)})})]},ie)})})]})},Ge=()=>e.jsxs("div",{className:"px-4 pb-6 max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Select Date & Time"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Choose a schedule for your appointment"})]}),e.jsx("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xl",children:f?.image}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-white",children:f?.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"text-[var(--color-primary)] font-semibold",children:[f?.hide_price?"Price may vary":`${f?.price.toLocaleString()}`,e.jsx("p",{className:"text-grey-400 whitespace-pre-line w-full",children:f?.description})]}),e.jsx("span",{className:"text-gray-400",children:f?.duration})]})]})]})}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Select Date"}),e.jsx("input",{type:"date",value:y,onChange:_e=>{b(_e.target.value),N(null)},min:new Date().toISOString().split("T")[0],max:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],className:"w-full px-3 py-2.5 rounded-lg bg-[#121212] border border-[#2A2A2A] text-gray-200 text-sm focus:outline-none focus:border-[var(--color-primary)] transition-colors"})]}),y&&e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#2A2A2A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Available Times"}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(y).toLocaleDateString("en-PH",{weekday:"short",month:"short",day:"numeric"})})]}),O?e.jsxs("div",{className:"flex justify-center items-center py-6 space-x-2",children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-[var(--color-primary)] border-t-transparent rounded-full"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Loading times..."})]}):Ue.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(rt,{className:"w-6 h-6 text-[var(--color-primary)] mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-[var(--color-primary)] font-medium",children:"No available times"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please select a different date"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:Ue.map(_e=>e.jsx("button",{onClick:()=>_e.available&&N(_e.time),disabled:!_e.available,className:`p-2 text-sm rounded-lg border transition-all duration-200 ${_e.available?j===_e.time?"bg-[var(--color-primary)] text-white border-[var(--color-primary)]":"bg-[#1F1F1F] text-gray-200 border-[#2A2A2A] hover:border-[var(--color-primary)]/50":"bg-[#111111] text-gray-500 border-[#1F1F1F] cursor-not-allowed"}`,children:_e.displayTime},_e.time))}),e.jsxs("div",{className:"flex justify-center gap-4 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-[#1F1F1F] border border-[#2A2A2A] rounded"}),e.jsx("span",{children:"Available"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-[var(--color-primary)] rounded"}),e.jsx("span",{children:"Selected"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-[#111111] rounded"}),e.jsx("span",{children:"Booked"})]})]})]})]}),y&&j&&e.jsx("button",{onClick:()=>_(5),className:"w-full py-3 bg-[var(--color-primary)] text-white font-bold rounded-lg hover:bg-[var(--color-accent)] transition-all duration-200",children:"Continue to Your Information"})]}),yt=()=>e.jsxs("div",{className:"pb-6 px-4",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:"Choose Your Barber"}),e.jsx("p",{className:"text-sm md:text-base text-gray-400",children:"Select your preferred professional"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:ue().map(_e=>{const $e=_e.is_accepting_bookings!==!1;return e.jsxs("button",{onClick:()=>$e&&Pt(_e),disabled:!$e,className:`group rounded-2xl p-4 sm:p-5 transition-all duration-300 border-2 hover:shadow-lg flex flex-col items-center text-center ${w?._id===_e._id?"bg-[var(--color-primary)]/15 border-[var(--color-primary)]":$e?"bg-[#1A1A1A] border-[#2A2A2A] hover:border-[var(--color-primary)]/50":"bg-[#1A1A1A] border-[#2A2A2A] opacity-60 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:`w-16 h-16 sm:w-20 sm:h-20 rounded-full overflow-hidden ring-2 ring-[#2A2A2A] ${$e?"group-hover:ring-[var(--color-primary)]/50":"grayscale"} transition-all duration-300`,children:e.jsx($A,{barber:_e,className:"w-full h-full"})}),w?._id===_e._id&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 sm:w-6 sm:h-6 bg-green-500 rounded-full flex items-center justify-center border-2 border-[#1A1A1A] shadow-lg",children:e.jsx(Je,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),!$e&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 rounded-full",children:e.jsx("div",{className:"bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm",children:"Busy"})})]}),e.jsx("h3",{className:"text-base sm:text-lg font-bold text-white mb-1 line-clamp-2 group-hover:text-[var(--color-primary)] transition-colors duration-200",children:_e.full_name||_e.name}),$e?e.jsx("div",{className:"px-2 py-0.5 bg-[var(--color-primary)]/20 text-[var(--color-primary)] rounded-full text-xs font-semibold mb-2 inline-block",children:"Professional"}):e.jsx("div",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 rounded-full text-xs font-semibold mb-2 inline-block",children:"Not Available"}),e.jsx("p",{className:"text-xs text-gray-400 mb-2 line-clamp-1",children:"Experienced professional"}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("div",{className:"flex text-yellow-400 text-sm",children:""}),e.jsx("span",{className:"text-xs font-semibold text-gray-300",children:"5.0"})]})]},_e._id)})}),(!xe||ue().length===0)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"w-12 h-12 text-gray-500 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-gray-400",children:"No barbers available at this branch"})]})]}),[bt,Ee]=C.useState({}),[We,Qe]=C.useState({isOpen:!1,title:"Error",message:""}),[ht,wt]=C.useState({isOpen:!1,title:"Success",message:""}),Bt=(_e,$e)=>{Qe({isOpen:!0,title:_e,message:$e})},K=()=>{Qe({isOpen:!1,title:"Error",message:""})},V=(_e,$e)=>{wt({isOpen:!0,title:_e,message:$e}),setTimeout(()=>{wt({isOpen:!1,title:"Success",message:""})},3e3)},se=()=>{wt({isOpen:!1,title:"Success",message:""})},ke=()=>{const _e={};return n.name.trim()?n.name.trim().length<2&&(_e.name="Name must be at least 2 characters"):_e.name="Full name is required",n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(_e.email="Please enter a valid email address"):_e.email="Email is required",n.number.trim()?/^\+?[0-9\s\-\(\)]{7,}$/.test(n.number)||(_e.number="Please enter a valid phone number"):_e.number="Phone number is required",Ee(_e),Object.keys(_e).length===0},Re=async _e=>{if(_e.preventDefault(),!!ke()){E(!0),Ee({});try{const $e=Date.now(),ot=Math.random().toString(36).slice(2,6),ie=`guest_${n.name.toLowerCase().replace(/\s+/g,"_")}_${$e}_${ot}`,Ae=Math.random().toString(36).slice(-8);console.log("Creating guest user with data:",{username:ie,email:n.email.trim(),mobile_number:n.number?.trim()||void 0,branch_id:p?._id});const nt=await d({username:ie,email:n.email.trim(),password:Ae,mobile_number:n.number?.trim()||void 0,branch_id:p?._id,guest_name:n.name.trim()});sessionStorage.setItem("user_id",nt._id),sessionStorage.setItem("guest_email",n.email.trim()),sessionStorage.setItem("guest_name",n.name.trim()),sessionStorage.setItem("guest_number",n.number?.trim()||""),sessionStorage.setItem("guest_branch_id",p?._id),console.log(" Guest account created/verified:",{userId:nt._id,email:n.email.trim(),name:n.name.trim(),branchId:p?._id,isExisting:nt.isExistingUser||!1}),nt.isExistingUser?(console.log(" Existing customer found for guest booking:",nt._id),sessionStorage.setItem("guest_type","existing_customer"),V("Welcome Back!","We found your existing account. You can continue with your booking.")):(sessionStorage.setItem("guest_username",ie),sessionStorage.setItem("guest_temp_password",Ae),sessionStorage.setItem("guest_type","new_guest"),console.log(" New guest account created successfully:",nt._id),V("Account Created!","Your guest account has been created successfully.")),_(6),c(!0)}catch($e){console.error(" Guest sign-in failed:",$e);let ot="Sign In Failed",ie="Failed to create guest account. Please try again.";$e.message?.includes("email already exists")||$e.message?.includes("AUTH_EMAIL_EXISTS")?($e.message?.includes("staff")||$e.message?.includes("admin")?(ot="Account Type Restricted",ie="This email address is registered as a staff or admin account. Please use a different email for guest booking."):(ot="Booking Issue",ie="There was an issue with your booking. Please try again or contact support."),Ee({email:"Unable to use this email"})):$e.message?.includes("username already exists")||$e.message?.includes("AUTH_USERNAME_EXISTS")?(ot="System Issue",ie="There was a temporary issue creating your booking. Please try again."):$e.message&&(ie=$e.message),Bt(ot,ie)}finally{E(!1)}}},ze=()=>e.jsxs("div",{className:"px-4 pb-6 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-light text-white mb-2",children:"Your Information"}),e.jsx("p",{className:"text-sm text-gray-400",children:"We'll create a temporary guest account for your booking"}),e.jsxs("div",{className:"mt-3 inline-flex items-center px-3 py-1 rounded-full bg-[var(--color-primary)]/10 border border-[var(--color-primary)]/20",children:[e.jsx(P3,{className:"w-3.5 h-3.5 text-[var(--color-primary)] mr-1"}),e.jsx("span",{className:"text-xs text-[var(--color-primary)]",children:"Secure & Private"})]})]}),e.jsx("div",{className:"bg-[#1A1A1A] backdrop-blur-xl rounded-2xl shadow-xl border border-[#2A2A2A]/50 p-6",children:e.jsxs("form",{onSubmit:Re,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Enter your full name",value:n.name,required:!0,onChange:_e=>{i({...n,name:_e.target.value}),bt.name&&Ee({...bt,name:""})},className:`w-full h-12 px-4 bg-[#2A2A2A] border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 transition-all duration-300 text-sm text-white placeholder-gray-500 ${bt.name?"border-red-500 focus:border-red-500":"border-[#3A3A3A] focus:border-[var(--color-primary)]"}`}),bt.name&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:bt.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"email",placeholder:"Enter your email address",value:n.email,required:!0,onChange:_e=>{i({...n,email:_e.target.value}),bt.email&&Ee({...bt,email:""})},className:`w-full h-12 px-4 bg-[#2A2A2A] border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 transition-all duration-300 text-sm text-white placeholder-gray-500 ${bt.email?"border-red-500 focus:border-red-500":"border-[#3A3A3A] focus:border-[var(--color-primary)]"}`}),bt.email&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:bt.email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll only use this for booking confirmation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"tel",placeholder:"+63 912 345 6789",value:n.number,required:!0,onChange:_e=>{i({...n,number:_e.target.value}),bt.number&&Ee({...bt,number:""})},className:`w-full h-12 px-4 bg-[#2A2A2A] border rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 transition-all duration-300 text-sm text-white placeholder-gray-500 ${bt.number?"border-red-500 focus:border-red-500":"border-[#3A3A3A] focus:border-[var(--color-primary)]"}`}),bt.number&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:bt.number}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For booking updates and reminders"})]}),e.jsxs("div",{className:"pt-2 space-y-3",children:[e.jsx("button",{type:"submit",disabled:k,className:`w-full py-3 rounded-xl font-light transition-all duration-300 text-sm ${k?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white hover:shadow-lg transform hover:scale-[1.02]"}`,children:k?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Creating your guest account..."})]}):"Continue to Booking"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"By continuing, you agree to create a guest account for booking purposes"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"You can always upgrade to a full account later"})]})]})]})})]}),Ve=()=>e.jsxs("div",{className:"space-y-3 px-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h2",{className:"text-xl font-bold mb-1 text-white",children:"Confirm Your Booking"}),e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Please review your appointment details"})]}),e.jsx("div",{className:"bg-[#1A1A1A] rounded-xl p-4 border border-[#2A2A2A] shadow-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center border-b pb-3 border-[#2A2A2A]",children:[e.jsx("div",{className:"text-2xl mb-2",children:f?.image}),e.jsx("h3",{className:"text-lg font-bold mb-1 text-white",children:f?.name}),e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsx("span",{className:"font-bold text-base text-[var(--color-primary)]",children:f?.hide_price?"Price may vary":`${f?.price.toLocaleString()}`}),e.jsx("span",{className:"font-medium text-sm text-gray-400",children:f?.duration})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gs,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"font-semibold text-sm text-gray-400",children:"Branch"})]}),e.jsx("span",{className:"font-bold text-sm text-white",children:p?.name})]}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"font-semibold text-sm text-gray-400",children:"Date & Time"})]}),e.jsxs("span",{className:"font-bold text-sm text-white",children:[y?new Date(y).toLocaleDateString("en-PH",{weekday:"short",month:"short",day:"numeric"}):"Today",", ",Wa(j)]})]}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tt,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("span",{className:"font-semibold text-sm text-gray-400",children:"Your Barber"})]}),e.jsx("span",{className:"font-bold text-sm text-white",children:w?.full_name||w?.name||"Any Barber"})]})]}),e.jsxs("div",{className:"border-t pt-3 border-[#2A2A2A]",children:[e.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center text-white",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Apply Voucher (Optional)"]}),Be().length>0?e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:Be().map(_e=>e.jsx("button",{onClick:()=>I(ne?._id===_e._id?null:_e),className:`w-full p-2 rounded-lg border-2 transition-all duration-200 text-left ${ne?._id===_e._id?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-[#2A2A2A] bg-[#0F0F0F] hover:border-[var(--color-primary)]/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qt,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white",children:_e.code}),e.jsxs("p",{className:"text-xs text-[var(--color-primary)]",children:["",parseFloat(_e.value||0).toFixed(2)]})]})]}),ne?._id===_e._id&&e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center bg-[var(--color-primary)]",children:e.jsx("span",{className:"text-white text-xs",children:""})})]})},_e._id))}),ne&&e.jsxs("div",{className:"text-xs text-center p-2 rounded flex items-center justify-center gap-2 bg-blue-900/30 text-blue-300",children:[e.jsx(bm,{className:"w-4 h-4"}),e.jsxs("span",{children:["You'll save ",parseFloat(ne.value||0).toFixed(2)," with this voucher"]})]})]}):e.jsx("div",{className:"text-center py-3",children:e.jsx("p",{className:"text-xs text-gray-400",children:"No vouchers available"})})]}),e.jsxs("div",{className:"border-t pt-3 border-[#2A2A2A]",children:[e.jsx("h4",{className:"text-sm font-bold mb-3 text-white",children:"Complete Your Booking"}),e.jsx("button",{onClick:()=>St("pay_later"),disabled:D,className:`w-full py-3 px-4 rounded-lg transition-all duration-200 text-sm flex items-center justify-center gap-2 font-bold ${D?"bg-gray-600 text-gray-300 cursor-not-allowed":"bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white hover:shadow-lg"}`,children:D?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full"}),e.jsx("span",{children:"Booking..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4"}),e.jsx("span",{children:"Complete Booking - Pay at Shop"})]})}),e.jsx("p",{className:"text-xs text-center mt-3 text-gray-400",children:"Complete your booking now and pay when you arrive at the shop"})]}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:()=>_(4),className:"w-full py-2 px-3 border border-[#2A2A2A] text-gray-400 hover:bg-[#222222] hover:text-white font-bold rounded-lg transition-all duration-200 text-sm",children:" Go Back to Edit Details"})})]})})]}),_t=()=>e.jsxs("div",{className:"space-y-6 px-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl",style:{backgroundColor:s?.primary_color||"#F68B24"},children:e.jsx(Je,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-light mb-2 text-white",children:"Booking Confirmed!"}),e.jsx("p",{className:"font-light text-gray-300 text-sm",children:"Your appointment has been successfully booked"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-8 border border-[#2A2A2A] shadow-lg text-center",children:[e.jsx("h3",{className:"text-lg font-light mb-4 text-white",children:"Your Booking QR Code"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-6 bg-white rounded-2xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"relative w-44 h-44",children:[(X||!Ke?.booking_code)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-orange-500 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-xs text-gray-600",children:Ke?.booking_code?"Generating QR Code...":"Loading booking details..."})]})}),e.jsx("canvas",{ref:R,className:"rounded-lg w-full h-full",style:{display:X||!Ke?.booking_code?"none":"block"}})]})})}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"text-lg font-light text-white",children:["Booking Code:"," ",Ke?.booking_code?e.jsx("span",{className:"font-bold text-[var(--color-primary)]",children:Ke.booking_code}):e.jsxs("span",{className:"inline-flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-400",children:"Generating..."}),e.jsx("div",{className:"animate-pulse w-2 h-2 bg-orange-500 rounded-full"})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Screenshot this QR code and show it when you arrive"})]})]}),e.jsxs("div",{className:"rounded-2xl p-6 border",style:{backgroundColor:qA(s?.primary_color||"#F68B24",.05),borderColor:qA(s?.primary_color||"#F68B24",.2)},children:[e.jsx("h4",{className:"text-sm font-light text-white mb-4 text-center",children:"Booking Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-light text-gray-400 text-sm",children:"Branch:"}),e.jsx("span",{className:"font-normal text-white text-sm",children:p?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-light text-gray-400 text-sm",children:"Service:"}),e.jsx("span",{className:"font-normal text-white text-sm",children:f?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-light text-gray-400 text-sm",children:"Date & Time:"}),e.jsxs("span",{className:"font-normal text-white text-sm",children:[T?.date?new Date(T.date).toLocaleDateString():"Today",", ",Wa(T?.time||j)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-light text-gray-400 text-sm",children:"Barber:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[w&&e.jsx($A,{barber:w,className:"w-6 h-6"}),e.jsx("span",{className:"font-normal text-white text-sm",children:w?.full_name||w?.name||"Any Barber"})]})]}),ne&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-light text-gray-400 text-sm",children:"Subtotal:"}),e.jsx("span",{className:"font-normal line-through text-gray-500 text-sm",children:f?.hide_price?"Price may vary":`${f?.price.toLocaleString()}`})]}),ne&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-light text-gray-400 text-sm",children:"Voucher Discount:"}),e.jsxs("span",{className:"font-normal text-green-400 text-sm",children:["-",parseFloat(ne.value||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3 border-orange-500/30",children:[e.jsx("span",{className:"font-light text-white",children:"Total:"}),e.jsxs("span",{className:"font-normal text-lg text-[var(--color-primary)]",children:["",T?.total_amount?parseFloat(T.total_amount).toLocaleString():Math.max(0,(f?.price||0)-(ne?.value||0)).toLocaleString()]})]})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{onClick:t,className:"w-full py-4 hover:brightness-90 text-white font-bold rounded-2xl transition-all duration-200 shadow-lg",style:{backgroundColor:s?.primary_color||"#F68B24"},children:"Back to Home"})})]});return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-[#0A0A0A]/95 backdrop-blur-xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"relative flex items-center justify-center py-4",children:[e.jsx("button",{onClick:()=>{S===1?window.location.href="/auth/login":_(_e=>Math.max(_e-1,1))},className:"absolute left-0 flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-light text-white",children:"Book Service"}),e.jsxs("p",{className:"text-xs text-[var(--color-primary)]",children:["Step ",S," of 7"]})]})]})})}),e.jsx("div",{className:"relative z-10",children:Jt()}),e.jsxs("div",{className:"relative z-10 pb-8",children:[S===1&&Ne(),S===2&&yt(),S===3&&Ye(),S===4&&Ge(),S===5&&ze(),S===6&&Ve(),S===7&&_t()]}),We.isOpen&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:K}),e.jsxs("div",{className:"relative bg-[#1A1A1A] rounded-2xl shadow-2xl border border-[#2A2A2A] max-w-md w-full mx-auto p-6",role:"dialog","aria-modal":"true","aria-labelledby":"error-dialog-title",tabIndex:"-1",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),e.jsx("h3",{id:"error-dialog-title",className:"text-lg font-semibold text-white text-center mb-2",children:We.title}),e.jsx("p",{className:"text-sm text-gray-300 text-center mb-6 leading-relaxed",children:We.message}),e.jsx("button",{onClick:K,className:"w-full py-3 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white font-medium rounded-xl transition-all duration-200",children:"OK"})]})]}),ht.isOpen&&e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",role:"status","aria-live":"polite",children:e.jsx("div",{className:"bg-green-500/90 backdrop-blur-sm text-white rounded-xl shadow-2xl border border-green-400/30 p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:ht.title}),e.jsx("p",{className:"text-sm text-green-50",children:ht.message})]}),e.jsx("button",{onClick:se,className:"flex-shrink-0 text-green-100 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})})]})};function Iz(){const t=Ws(),[s]=mm(),{user:n}=Dt(),{branding:i}=Ts(),o=wi(),c=i?.primary_color||"#F68B24",d=i?.accent_color||"#E67E22",m=i?.bg_color||"#0A0A0A",h=i?.muted_color||"#6B7280",p=me(H.services.wallet.getWallet,n?._id?{userId:n._id}:"skip"),u=me(H.services.wallet.listTransactions,n?._id?{userId:n._id,limit:50}:"skip"),f=De(H.services.wallet.ensureWallet),g=Xr(H.services.paymongo.captureSourceAndCreditWallet),y=N=>N==="Top-up"?bm:N==="Payment"?ds:N==="Refund"?ka:Qx,b=N=>N==="completed"?{color:"#22C55E"}:N==="pending"?{color:c}:{color:"#EF4444"},j=()=>{t("/customer/wallet/topup")};return fr.useEffect(()=>{n?._id&&f({userId:n._id}).catch(()=>{})},[n,f]),fr.useEffect(()=>{s.get("topup")==="success"&&n?._id&&u&&u.filter(B=>B.status==="pending"&&!!B.source_id).forEach(async B=>{try{await g({sourceId:B.source_id,userId:n._id}),o.success("Wallet updated",`Top-up of ${B.amount} completed`)}catch{}})},[s,n,u,g,o]),e.jsx("div",{className:"min-h-screen bg-transparent relative",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-[#0A0A0A]/98 backdrop-blur-2xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center py-5",children:[e.jsxs("button",{onClick:()=>t("/customer/dashboard"),className:"flex items-center space-x-2 px-4 py-2 bg-[#1A1A1A] hover:bg-[#1A1A1A]/80 rounded-2xl border border-[#2A2A2A] active:scale-95 transition-all",children:[e.jsx(vs,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Back"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center",children:e.jsx(gi,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-lg font-black text-white",children:"Wallet"})]}),e.jsx("div",{className:"w-[72px]"})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6 pb-24 space-y-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-[28px] shadow-xl",style:{backgroundColor:m,borderWidth:"2px",borderStyle:"solid",borderColor:c},children:[e.jsx("img",{src:"/carousel/IMG_0155-min.JPG",alt:"",className:"absolute inset-0 w-full h-full object-cover opacity-10"}),e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"relative z-10 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:i?.display_name||"",className:"w-10 h-10 object-contain"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold",style:{color:h},children:i?.display_name||""}),e.jsx("div",{className:"text-sm text-white font-black",children:"Wallet"})]})]}),e.jsxs("div",{className:"px-3 py-1.5 rounded-full bg-white/5 border border-white/10 flex items-center space-x-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse",style:{backgroundColor:c}}),e.jsx("span",{className:"text-xs font-bold text-gray-300",children:"Active"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:c},children:"Available Balance"}),e.jsxs("div",{className:"text-5xl font-black text-white mb-2",children:["",(p?.balance||0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs",style:{color:h},children:[e.jsx(Nt,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Last updated ",new Date(p?.updatedAt||Date.now()).toLocaleString("en-PH")]})]})]}),e.jsx("div",{className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full bg-white/5 border border-white/10",children:e.jsx("div",{className:"text-sm font-bold text-white",children:n?.nickname||n?.username||"User"})})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("button",{onClick:j,className:"group p-3 rounded-xl hover:bg-white/5 active:scale-95 transition-all",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(LS,{className:"w-6 h-6 text-white"}),e.jsx("span",{className:"mt-2 text-xs font-bold text-white",children:"Add Funds"})]})})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[e.jsx("h3",{className:"text-lg font-black text-white",children:"Recent Activity"}),e.jsx("button",{className:"text-xs font-bold transition-colors",style:{color:c},onMouseEnter:N=>N.target.style.color=d,onMouseLeave:N=>N.target.style.color=c,children:"View All "})]}),e.jsx("div",{className:"space-y-2",children:!u||u.length===0?e.jsxs("div",{className:"rounded-[20px] border p-12 text-center",style:{backgroundColor:m,borderColor:"#1A1A1A"},children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#1A1A1A"},children:e.jsx(Nt,{className:"w-8 h-8",style:{color:h}})}),e.jsx("p",{className:"text-sm font-semibold",style:{color:h},children:"No transactions yet"}),e.jsx("p",{className:"text-xs mt-1",style:{color:h},children:"Your transaction history will appear here"})]}):u.map(N=>{const w=y(N.type==="topup"?"Top-up":N.type==="refund"?"Refund":"Payment"),B=N.type==="topup"||N.amount>=0;return e.jsx("div",{className:"relative overflow-hidden rounded-[20px] p-4 transition-all group",style:{backgroundColor:m,border:"1px solid #1A1A1A"},onMouseEnter:S=>S.currentTarget.style.borderColor=`${c}33`,onMouseLeave:S=>S.currentTarget.style.borderColor="#1A1A1A",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(w,{className:"w-6 h-6 text-white"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white",children:N.type==="topup"?"Top-up":N.type}),e.jsx("div",{className:"text-xs",style:{color:h},children:new Date(N.createdAt).toLocaleString("en-PH")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-base font-black",style:{color:B?"#22C55E":"white"},children:B?`+${N.amount.toLocaleString()}`:`-${Math.abs(N.amount).toLocaleString()}`}),e.jsx("div",{className:"text-xs font-semibold capitalize",style:b(N.status),children:N.status})]})]})},N._id)})})]}),e.jsx("button",{onClick:()=>t("/customer/dashboard"),className:"w-full rounded-[20px] p-5 active:scale-[0.98] transition-all group",style:{backgroundColor:m,border:"1px solid #1A1A1A"},onMouseEnter:N=>N.currentTarget.style.borderColor=`${c}33`,onMouseLeave:N=>N.currentTarget.style.borderColor="#1A1A1A",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(Qt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-bold text-white",children:"My Vouchers"}),e.jsx("div",{className:"text-xs",style:{color:h},children:"View and manage rewards"})]})]}),e.jsx("svg",{className:"w-5 h-5 group-hover:text-white",style:{color:h},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})})]})]})})}function Lz(){const t=Ws(),s=wi(),{user:n}=Dt(),{branding:i}=Ts(),o=i?.primary_color||"#F68B24",c=i?.accent_color||"#E67E22",d=i?.bg_color||"#0A0A0A",m=i?.muted_color||"#6B7280",[h,p]=C.useState(""),[u,f]=C.useState("gcash"),[g,y]=C.useState(!1),[b,j]=C.useState({name:"",number:"",expMonth:"",expYear:"",cvc:""}),N=Xr(H.services.paymongo.createEwalletSource),w=Xr(H.services.paymongo.createCardPaymentIntentAndAttach),B=[100,200,500,1e3],S=async()=>{const _=parseFloat(h);if(isNaN(_)||_<=0){s.error("Invalid amount","Please enter an amount greater than 0");return}if(!n?._id){s.error("Authentication required","Please log in to top up your wallet"),t("/auth/login");return}y(!0);try{const k=window.location.origin;if(u==="gcash"||u==="paymaya"){const E=await N({amount:_,type:u,description:"Wallet Top-up",userId:n._id,origin:k});E?.checkoutUrl?window.location.href=E.checkoutUrl:s.error("Unable to start payment","No checkout URL returned")}else if(u==="card"){const E="pk_test_jqctP4fsrvnYQy3zxR8WLifN",D=await fetch("https://api.paymongo.com/v1/payment_methods",{method:"POST",headers:{Authorization:"Basic "+btoa(E+":"),"Content-Type":"application/json"},body:JSON.stringify({data:{attributes:{type:"card",details:{card_number:b.number.replace(/\s+/g,""),exp_month:parseInt(b.expMonth||"0"),exp_year:parseInt(b.expYear||"0"),cvc:b.cvc},billing:{name:b.name}}}})}),F=await D.json();if(!D.ok){const T=F?.errors?.[0]?.detail||"Failed to create payment method";s.error("Card error",T);return}const M=F.data.id,P=await w({amount:_,paymentMethodId:M,userId:n._id,origin:k});P?.status==="succeeded"?(s.success("Top-up successful",`${_.toLocaleString()} added to wallet`),t("/customer/wallet")):P?.nextAction?.type==="redirect"?window.location.href=P.nextAction.redirect?.url||"/booking/payment/success":s.info("Payment processing","Please follow any additional steps")}}catch(k){s.error("Payment failed",k?.message||"Please try again")}finally{y(!1)}};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:d},children:[e.jsx("div",{className:"sticky top-0 z-40 backdrop-blur-2xl border-b border-[#1A1A1A]",style:{backgroundColor:`${d}f8`},children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center py-5",children:[e.jsxs("button",{onClick:()=>t("/customer/wallet"),className:"flex items-center space-x-2 px-4 py-2 bg-[#1A1A1A] hover:bg-[#1A1A1A]/80 rounded-2xl border border-[#2A2A2A] active:scale-95 transition-all",children:[e.jsx(vs,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:"Back"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center",style:{background:`linear-gradient(to bottom right, ${o}, ${c})`},children:e.jsx(gi,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-lg font-black text-white",children:"Add Funds"})]}),e.jsx("div",{className:"w-[72px]"})]})})}),e.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"rounded-[28px] border border-[#1A1A1A] p-6",style:{backgroundColor:d},children:[e.jsx("div",{className:"mb-3",children:e.jsx("img",{src:"/wallet/PayMongo_Logo.svg.png",alt:"PayMongo",className:"h-8 object-contain opacity-90"})}),e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:m},children:"Amount"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"number",min:"1",value:h,onChange:_=>p(_.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 bg-[#121212] border border-[#2A2A2A] text-white rounded-xl focus:outline-none focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":o},onFocus:_=>_.target.style.boxShadow=`0 0 0 2px ${o}`,onBlur:_=>_.target.style.boxShadow="none"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:B.map(_=>e.jsxs("button",{onClick:()=>p(String(_)),className:"px-3 py-2 rounded-xl bg-[#121212] border text-white text-sm active:scale-95 transition-all",style:{borderColor:h===String(_)?o:"#2A2A2A"},onMouseEnter:k=>k.target.style.borderColor=`${o}66`,onMouseLeave:k=>k.target.style.borderColor=h===String(_)?o:"#2A2A2A",children:["",_]},_))})]})]}),e.jsxs("div",{className:"rounded-[28px] border border-[#1A1A1A] p-6",style:{backgroundColor:d},children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:m},children:"Payment Method"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsx("button",{onClick:()=>f("gcash"),className:"px-3 py-2 rounded-xl border text-sm bg-[#121212] active:scale-95 transition-all",style:{borderColor:u==="gcash"?o:"#2A2A2A",color:u==="gcash"?"white":"#D1D5DB"},children:"GCash"}),e.jsx("button",{onClick:()=>f("paymaya"),className:"px-3 py-2 rounded-xl border text-sm bg-[#121212] active:scale-95 transition-all",style:{borderColor:u==="paymaya"?o:"#2A2A2A",color:u==="paymaya"?"white":"#D1D5DB"},children:"Maya"}),e.jsx("button",{onClick:()=>f("card"),className:"px-3 py-2 rounded-xl border text-sm bg-[#121212] active:scale-95 transition-all",style:{borderColor:u==="card"?o:"#2A2A2A",color:u==="card"?"white":"#D1D5DB"},children:"Card"})]}),u==="card"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("input",{value:b.name,onChange:_=>j({...b,name:_.target.value}),placeholder:"Name on card",className:"px-4 py-3 bg-[#121212] border border-[#2A2A2A] text-white rounded-xl focus:outline-none",onFocus:_=>_.target.style.boxShadow=`0 0 0 2px ${o}`,onBlur:_=>_.target.style.boxShadow="none"}),e.jsx("input",{value:b.number,onChange:_=>j({...b,number:_.target.value}),placeholder:"Card number",className:"px-4 py-3 bg-[#121212] border border-[#2A2A2A] text-white rounded-xl focus:outline-none",onFocus:_=>_.target.style.boxShadow=`0 0 0 2px ${o}`,onBlur:_=>_.target.style.boxShadow="none"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("input",{value:b.expMonth,onChange:_=>j({...b,expMonth:_.target.value}),placeholder:"MM",className:"px-4 py-3 bg-[#121212] border border-[#2A2A2A] text-white rounded-xl focus:outline-none",onFocus:_=>_.target.style.boxShadow=`0 0 0 2px ${o}`,onBlur:_=>_.target.style.boxShadow="none"}),e.jsx("input",{value:b.expYear,onChange:_=>j({...b,expYear:_.target.value}),placeholder:"YYYY",className:"px-4 py-3 bg-[#121212] border border-[#2A2A2A] text-white rounded-xl focus:outline-none",onFocus:_=>_.target.style.boxShadow=`0 0 0 2px ${o}`,onBlur:_=>_.target.style.boxShadow="none"}),e.jsx("input",{value:b.cvc,onChange:_=>j({...b,cvc:_.target.value}),placeholder:"CVC",className:"px-4 py-3 bg-[#121212] border border-[#2A2A2A] text-white rounded-xl focus:outline-none",onFocus:_=>_.target.style.boxShadow=`0 0 0 2px ${o}`,onBlur:_=>_.target.style.boxShadow="none"})]})]}),e.jsx("p",{className:"text-xs",style:{color:m},children:"Card details are sent securely to PayMongo using your public key."})]})]}),e.jsx("button",{onClick:S,disabled:g,className:"w-full py-3 px-4 rounded-xl font-bold text-white active:scale-95 transition-all disabled:opacity-50",style:{backgroundColor:o,boxShadow:`0 10px 25px -5px ${o}33`},onMouseEnter:_=>!g&&(_.target.style.backgroundColor=c),onMouseLeave:_=>!g&&(_.target.style.backgroundColor=o),children:g?"Processing...":"Continue"})]})]})}const qz=()=>{const{user:t}=Dt(),[s,n]=C.useState(new Date().toISOString().split("T")[0]),[i,o]=C.useState("all"),[c,d]=C.useState(""),[m,h]=C.useState(null),[p,u]=C.useState(!1),[f,g]=C.useState(null),y=t?.branch_id?me(H.services.barbers.getBarbersByBranch,{branch_id:t.branch_id}):me(H.services.barbers.getAllBarbers),b=y?.find(P=>P.user===t?._id),j=t?.branch_id?me(H.services.services.getServicesByBranch,{branch_id:t.branch_id}):me(H.services.services.getAllServices),N=De(H.services.barbers.createBarberProfile);fr.useEffect(()=>{t?.role==="barber"&&y&&!b&&t._id&&t.branch_id&&N({userId:t._id,branch_id:t.branch_id}).catch(P=>{console.error("Failed to create barber profile:",P)})},[t,y,b,N]);const S=((t?.branch_id?me(H.services.bookings.getBookingsByBranch,{branch_id:t.branch_id}):me(H.services.bookings.getAllBookings))?.filter(P=>P.barber===b?._id)||[]).filter(P=>{const T=P.date===s,L=i==="all"||P.status===i,X=c===""||P.customer_name?.toLowerCase().includes(c.toLowerCase())||P.service_name?.toLowerCase().includes(c.toLowerCase());return T&&L&&X}),_=De(H.services.bookings.updateBooking),k=async(P,T)=>{try{await _({id:P,status:T}),window.location.reload()}catch(L){console.error("Failed to update booking status:",L),alert("Failed to update booking status")}},E=P=>{h(P)},D=async()=>{if(m){u(!0);try{if(!j?.find(T=>T._id===m.service)){alert("Service not found. Cannot complete booking.");return}await _({id:m._id,status:"completed"}),h(null),window.location.reload()}catch(P){console.error("Failed to complete booking:",P),alert("Failed to complete booking. Please try again.")}finally{u(!1)}}},F=P=>{switch(P){case"confirmed":return"text-green-400 bg-green-500/10 border border-green-500/20";case"completed":return"text-blue-400 bg-blue-500/10 border border-blue-500/20";case"cancelled":return"text-red-400 bg-red-500/10 border border-red-500/20";case"pending":return"text-yellow-400 bg-yellow-500/10 border border-yellow-500/20";default:return"text-gray-400 bg-gray-500/10 border border-gray-500/20"}},M=P=>{switch(P){case"confirmed":return e.jsx(Je,{className:"w-3 h-3"});case"completed":return e.jsx(Je,{className:"w-3 h-3"});case"cancelled":return e.jsx(xs,{className:"w-3 h-3"});case"pending":return e.jsx(Xe,{className:"w-3 h-3"});default:return e.jsx(Nt,{className:"w-3 h-3"})}};return b?e.jsxs("div",{className:"min-h-screen bg-[#0D0D0D] pb-20 md:pb-0",children:[e.jsx("div",{className:"bg-[#0D0D0D] border-b border-[#1A1A1A] sticky top-0 z-10",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-white",children:"Appointments"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Manage bookings"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500",children:s===new Date().toISOString().split("T")[0]?"Today":"Selected"}),e.jsx("div",{className:"text-sm font-bold text-[var(--color-primary)]",children:S.length})]})]})})}),e.jsxs("div",{className:"px-4 py-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] p-4 mb-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","confirmed","completed","cancelled"].map(P=>e.jsx("button",{onClick:()=>o(P),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all active:scale-95 ${i===P?"bg-[var(--color-primary)] text-white":"bg-[#2A2A2A] text-gray-400"}`,children:P==="all"?"All":P.charAt(0).toUpperCase()+P.slice(1)},P))})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(rt,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("label",{className:"text-xs font-medium text-gray-400",children:"Date"})]}),e.jsx("input",{type:"date",value:s,onChange:P=>n(P.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white rounded-xl focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] text-sm"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ns,{className:"w-4 h-4 text-[var(--color-primary)]"}),e.jsx("label",{className:"text-xs font-medium text-gray-400",children:"Search"})]}),e.jsx("input",{type:"text",placeholder:"Customer or service...",value:c,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#3A3A3A] text-white placeholder-gray-500 rounded-xl focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] text-sm"})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:S.length===0?e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] p-6 text-center",children:[e.jsx(rt,{className:"w-10 h-10 text-gray-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"No Appointments Found"}),e.jsx("p",{className:"text-xs text-gray-500",children:i==="all"?"No appointments scheduled for this date.":`No ${i} appointments for this date.`})]}):S.map(P=>e.jsxs("div",{onClick:()=>g(P),className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] p-4 active:scale-[0.98] transition-all duration-200 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex items-center space-x-1 ${F(P.status)}`,children:[M(P.status),e.jsx("span",{className:"capitalize",children:P.status})]}),e.jsx("span",{className:"text-gray-400 text-xs",children:Wa(P.time)})]}),e.jsx("h3",{className:"font-bold text-white text-sm mb-2",children:P.service_name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-400 text-xs",children:[e.jsx(tt,{className:"w-3 h-3 mr-1.5"}),e.jsx("span",{children:P.customer_name})]}),e.jsxs("span",{className:"font-bold text-[var(--color-primary)] text-sm",children:["",P.price]})]}),P.customer_phone&&e.jsxs("div",{className:"flex items-center text-gray-500 text-xs mt-2",children:[e.jsx(Er,{className:"w-3 h-3 mr-1.5"}),e.jsx("span",{children:P.customer_phone})]})]},P._id))})]}),m&&e.jsx($z,{booking:m,onConfirm:D,onClose:()=>h(null),loading:p}),f&&e.jsx(Uz,{booking:f,onClose:()=>g(null),onConfirm:P=>k(P,"confirmed"),onCancel:P=>k(P,"cancelled"),onComplete:P=>{g(null),E(P)},getStatusColor:F,getStatusIcon:M})]}):e.jsx("div",{className:"min-h-screen bg-[#0D0D0D] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xe,{className:"w-10 h-10 text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-bold text-white mb-2",children:"Barber Profile Not Found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Please contact admin to set up your barber profile."})]})})},$z=({booking:t,onConfirm:s,onClose:n,loading:i})=>t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl border border-gray-200",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Je,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:"Complete Booking?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Are you sure you want to mark this booking as completed? This will finalize the service and update customer records."})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 text-left mb-6",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.service_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.customer_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.date})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Time:"}),e.jsx("span",{className:"font-medium text-gray-900",children:Wa(t.time)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Price:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["",t.price]})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:n,disabled:i,className:"flex-1 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:s,disabled:i,className:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:i?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Completing..."})]}):"Complete Booking"})]})]})})}):null,Uz=({booking:t,onClose:s,onConfirm:n,onCancel:i,onComplete:o,getStatusColor:c,getStatusIcon:d})=>{if(!t)return null;const m=h=>new Date(h).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 transition-opacity",onClick:s}),e.jsx("div",{className:"fixed bottom-20 left-0 right-0 z-50 animate-slide-up",children:e.jsxs("div",{className:"bg-[#0D0D0D] rounded-t-3xl max-h-[75vh] overflow-hidden border-t border-[#2A2A2A]",children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),e.jsx("div",{className:"px-5 pb-4 border-b border-[#1A1A1A]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Booking Details"}),e.jsx("button",{onClick:s,className:"p-2 bg-[#1A1A1A] rounded-full",children:e.jsx(Ze,{className:"w-5 h-5 text-gray-400"})})]})}),e.jsxs("div",{className:"px-5 py-4 overflow-y-auto max-h-[55vh] space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:`px-3 py-1.5 rounded-full text-sm font-medium flex items-center space-x-2 ${c(t.status)}`,children:[d(t.status),e.jsx("span",{className:"capitalize",children:t.status})]}),e.jsxs("span",{className:"text-2xl font-bold text-[var(--color-primary)]",children:["",t.price]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[var(--color-primary)]/20 rounded-xl flex items-center justify-center",children:e.jsx(ys,{className:"w-5 h-5 text-[var(--color-primary)]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Service"}),e.jsx("p",{className:"text-white font-semibold",children:t.service_name})]})]}),t.duration&&e.jsxs("div",{className:"flex items-center text-gray-400 text-sm",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[t.duration," minutes"]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"Schedule"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#2A2A2A] rounded-xl flex items-center justify-center",children:e.jsx(rt,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Date"}),e.jsx("p",{className:"text-white font-medium",children:m(t.date)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#2A2A2A] rounded-xl flex items-center justify-center",children:e.jsx(Nt,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Time"}),e.jsx("p",{className:"text-white font-medium",children:Wa(t.time)})]})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"Customer Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#2A2A2A] rounded-xl flex items-center justify-center",children:e.jsx(tt,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Name"}),e.jsx("p",{className:"text-white font-medium",children:t.customer_name})]})]}),t.customer_phone&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#2A2A2A] rounded-xl flex items-center justify-center",children:e.jsx(Er,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),e.jsx("a",{href:`tel:${t.customer_phone}`,className:"text-[var(--color-primary)] font-medium",children:t.customer_phone})]}),e.jsx("a",{href:`tel:${t.customer_phone}`,className:"p-2 bg-[var(--color-primary)]/20 rounded-xl",children:e.jsx(Er,{className:"w-4 h-4 text-[var(--color-primary)]"})})]}),t.customer_email&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#2A2A2A] rounded-xl flex items-center justify-center",children:e.jsx(Ht,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("p",{className:"text-white font-medium truncate",children:t.customer_email})]})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"Payment"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#2A2A2A] rounded-xl flex items-center justify-center",children:e.jsx(ds,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total Amount"}),e.jsxs("p",{className:"text-white font-bold text-lg",children:["",t.price]})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-lg text-xs font-medium ${t.payment_status==="paid"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:t.payment_status==="paid"?"Paid":"Pending"})]})]}),t.notes&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsx("h3",{className:"text-xs text-gray-500 uppercase tracking-wide mb-3",children:"Notes"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#2A2A2A] rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(M3,{className:"w-5 h-5 text-gray-400"})}),e.jsx("p",{className:"text-gray-300 text-sm",children:t.notes})]})]}),e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Booking ID"}),e.jsx("p",{className:"text-gray-400 font-mono text-xs",children:t._id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Created"}),e.jsx("p",{className:"text-gray-400 text-xs",children:t._creationTime?new Date(t._creationTime).toLocaleDateString():"N/A"})]})]})})]}),e.jsxs("div",{className:"px-5 py-4 border-t border-[#1A1A1A] bg-[#0D0D0D]",children:[t.status==="pending"&&e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{i(t._id),s()},className:"flex-1 py-3 bg-[#1A1A1A] border border-[#2A2A2A] text-gray-400 rounded-xl font-medium active:scale-95 transition-all",children:"Cancel"}),e.jsx("button",{onClick:()=>{n(t._id),s()},className:"flex-1 py-3 bg-[var(--color-primary)] text-white rounded-xl font-medium active:scale-95 transition-all",children:"Confirm Booking"})]}),t.status==="confirmed"&&e.jsx("button",{onClick:()=>o(t),className:"w-full py-3 bg-[var(--color-primary)] text-white rounded-xl font-medium active:scale-95 transition-all",children:"Mark as Complete"}),t.status==="completed"&&e.jsxs("div",{className:"flex items-center justify-center py-3 bg-[#1A1A1A] rounded-xl",children:[e.jsx(Je,{className:"w-5 h-5 text-green-400 mr-2"}),e.jsx("span",{className:"text-green-400 font-medium",children:"Booking Completed"})]}),t.status==="cancelled"&&e.jsxs("div",{className:"flex items-center justify-center py-3 bg-[#1A1A1A] rounded-xl",children:[e.jsx(xs,{className:"w-5 h-5 text-red-400 mr-2"}),e.jsx("span",{className:"text-red-400 font-medium",children:"Booking Cancelled"})]})]})]})}),e.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
          }
          to {
            transform: translateY(0);
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})},Vz=()=>{const{user:t,logout:s}=Dt(),[n,i]=C.useState(!1),[o,c]=C.useState(!1),[d,m]=C.useState(!1),[h,p]=C.useState(!1),[u,f]=C.useState(!1),[g,y]=C.useState(""),b=C.useRef(null),j=C.useCallback(()=>{i(ee=>!ee)},[]);C.useEffect(()=>(window.addEventListener("toggleBarberProfileEdit",j),()=>{window.removeEventListener("toggleBarberProfileEdit",j)}),[j]);const[N,w]=C.useState({full_name:"",email:"",phone:"",experience:"",specialties:[],bio:"",avatar:""}),[B,S]=C.useState(""),_=t?.branch_id?me(H.services.barbers.getBarbersByBranch,{branch_id:t.branch_id}):me(H.services.barbers.getAllBarbers),k=_?.find(ee=>ee.user===t?._id),E=De(H.services.auth.updateUserProfile),D=De(H.services.barbers.updateBarber),F=De(H.services.barbers.createBarberProfile),M=De(H.services.barbers.generateUploadUrl),P=me(H.services.barbers.getImageUrl,k?.avatarStorageId?{storageId:k.avatarStorageId}:"skip");C.useEffect(()=>{t?.role==="barber"&&_&&!k&&t._id&&t.branch_id&&F({userId:t._id,branch_id:t.branch_id}).catch(console.error)},[t,_,k,F]),C.useEffect(()=>{k&&t&&w({full_name:k.full_name||"",email:k.email||t.email||"",phone:k.phone||t.mobile_number||"",experience:k.experience||"",specialties:k.specialties||[],bio:t.bio||"",avatar:P||k.avatar||""})},[k,t,P]);const T=(ee,le)=>{w(R=>({...R,[ee]:le}))},L=()=>{B.trim()&&!N.specialties.includes(B.trim())&&(w(ee=>({...ee,specialties:[...ee.specialties,B.trim()]})),S(""))},X=ee=>{w(le=>({...le,specialties:le.specialties.filter(R=>R!==ee)}))},Z=()=>{n&&b.current&&b.current.click()},ne=async ee=>{const le=ee.target.files?.[0];if(le){if(!le.type.startsWith("image/")){y("Please select an image file"),f(!0);return}if(le.size>5*1024*1024){y("Image must be less than 5MB"),f(!0);return}m(!0);try{const R=await M(),q=await fetch(R,{method:"POST",headers:{"Content-Type":le.type},body:le});if(!q.ok)throw new Error("Upload failed");const{storageId:J}=await q.json();k?._id&&await D({id:k._id,avatarStorageId:J});const $=URL.createObjectURL(le);w(Y=>({...Y,avatar:$}))}catch(R){console.error("Upload error:",R),y("Failed to upload image. Please try again."),f(!0)}finally{m(!1)}}},I=async()=>{c(!0);try{const ee=localStorage.getItem("session_token");ee&&await E({sessionToken:ee,bio:N.bio,avatar:N.avatar}),k?._id&&await D({id:k._id,full_name:N.full_name,email:N.email,phone:N.phone,experience:N.experience,specialties:N.specialties}),i(!1),p(!0),setTimeout(()=>p(!1),2e3)}catch(ee){console.error("Failed to update profile:",ee),y(ee.message||"Failed to update profile"),f(!0)}finally{c(!1)}},O=()=>{k&&t&&w({full_name:k.full_name||"",email:k.email||t.email||"",phone:k.phone||t.mobile_number||"",experience:k.experience||"",specialties:k.specialties||[],bio:t.bio||"",avatar:P||k.avatar||""}),i(!1)},G=ee=>ee?.split(" ").map(le=>le.charAt(0)).join("").toUpperCase().slice(0,2)||"U",te=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await s(),window.location.href="/auth/login"}catch{window.location.href="/auth/login"}},Q=P||k?.avatar||N.avatar;return _===void 0?e.jsx("div",{className:"min-h-screen bg-[#0D0D0D] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-[var(--color-primary)] border-t-transparent mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading profile..."})]})}):k?e.jsxs("div",{className:"min-h-screen bg-[#0D0D0D] pb-24",children:[e.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:ne,className:"hidden"}),e.jsxs("div",{className:"px-4 pt-4 space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-5 border border-[#2A2A2A]",children:[n&&e.jsxs("div",{className:"flex items-center justify-end space-x-2 mb-4",children:[e.jsx("button",{onClick:O,disabled:o,className:"px-4 py-2 bg-[#2A2A2A] rounded-lg text-gray-400 text-sm hover:text-white disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:o,className:"px-4 py-2 bg-[var(--color-primary)] rounded-lg text-white text-sm font-medium disabled:opacity-50 flex items-center space-x-1",children:o?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Save Changes"})]})})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{onClick:Z,className:`w-16 h-16 rounded-xl overflow-hidden border-2 border-[#2A2A2A] ${n?"cursor-pointer":""}`,children:d?e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-[var(--color-primary)] border-t-transparent"})}):Q?e.jsx("img",{src:Q,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-bold text-gray-500",children:G(N.full_name||t?.username)})})}),n&&e.jsx("button",{onClick:Z,disabled:d,className:"absolute -bottom-1 -right-1 p-1.5 bg-[var(--color-primary)] text-white rounded-lg shadow-lg disabled:opacity-50",children:e.jsx(da,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[n?e.jsx("input",{type:"text",value:N.full_name,onChange:ee=>T("full_name",ee.target.value),className:"text-lg font-bold text-white bg-[#2A2A2A] border border-[#3A3A3A] rounded-lg px-3 py-1.5 focus:border-[var(--color-primary)] focus:outline-none w-full mb-2",placeholder:"Full Name"}):e.jsx("h2",{className:"text-lg font-bold text-white mb-1 truncate",children:k.full_name}),e.jsxs("div",{className:"flex items-center flex-wrap gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Vt,{className:"w-3.5 h-3.5 text-[var(--color-primary)] fill-[var(--color-primary)]"}),e.jsx("span",{className:"text-white font-medium",children:k.rating||0}),e.jsx("span",{className:"text-gray-500",children:"/5"})]}),e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("span",{className:"text-gray-400",children:[k.totalBookings||0," bookings"]}),e.jsx("span",{className:"text-gray-600",children:""}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${k.is_active?"bg-green-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-gray-400",children:k.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-[#2A2A2A]",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Bio"}),n?e.jsx("textarea",{value:N.bio,onChange:ee=>T("bio",ee.target.value),className:"w-full p-3 bg-[#2A2A2A] border border-[#3A3A3A] rounded-xl text-white text-sm resize-none focus:outline-none focus:border-[var(--color-primary)]",rows:"2",placeholder:"Write a short bio about yourself..."}):e.jsx("p",{className:"text-gray-400 text-sm",children:t?.bio||"No bio added yet"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A] text-center",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:k.totalBookings||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Jobs"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A] text-center",children:[e.jsx("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:k.rating||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rating"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A] text-center",children:[e.jsxs("p",{className:"text-xl font-bold text-white",children:["",(k.monthlyRevenue||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500",children:"This Month"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#2A2A2A]",children:e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(Ht,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Contact Information"]})}),e.jsxs("div",{className:"divide-y divide-[#2A2A2A]",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Email"}),n?e.jsx("input",{type:"email",value:N.email,onChange:ee=>T("email",ee.target.value),className:"w-full bg-[#2A2A2A] border border-[#3A3A3A] rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-[var(--color-primary)]"}):e.jsx("p",{className:"text-white text-sm",children:k.email})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Phone"}),n?e.jsx("input",{type:"tel",value:N.phone,onChange:ee=>T("phone",ee.target.value),className:"w-full bg-[#2A2A2A] border border-[#3A3A3A] rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-[var(--color-primary)]"}):e.jsx("p",{className:"text-white text-sm",children:k.phone||"Not provided"})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#2A2A2A]",children:e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(D3,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Professional Details"]})}),e.jsxs("div",{className:"divide-y divide-[#2A2A2A]",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Experience"}),n?e.jsx("input",{type:"text",value:N.experience,onChange:ee=>T("experience",ee.target.value),className:"w-full bg-[#2A2A2A] border border-[#3A3A3A] rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-[var(--color-primary)]",placeholder:"e.g., 5 years"}):e.jsx("p",{className:"text-white text-sm",children:k.experience||"Not specified"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("label",{className:"text-xs text-gray-500 mb-2 block",children:"Specialties"}),n?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:B,onChange:ee=>S(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&L(),className:"flex-1 bg-[#2A2A2A] border border-[#3A3A3A] rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-[var(--color-primary)]",placeholder:"Add specialty"}),e.jsx("button",{onClick:L,className:"px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg text-sm font-medium",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.specialties.map((ee,le)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-[#2A2A2A] text-white rounded-lg text-xs border border-[#3A3A3A]",children:[ee,e.jsx("button",{onClick:()=>X(ee),className:"ml-2 text-gray-400 hover:text-white",children:e.jsx(Ze,{className:"w-3 h-3"})})]},le))})]}):e.jsx("div",{className:"flex flex-wrap gap-2",children:k.specialties?.length>0?k.specialties.map((ee,le)=>e.jsx("span",{className:"px-3 py-1 bg-[#2A2A2A] text-gray-300 rounded-lg text-xs border border-[#3A3A3A]",children:ee},le)):e.jsx("p",{className:"text-gray-500 text-sm",children:"No specialties added"})})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#2A2A2A]",children:e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(Ni,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Account"]})}),e.jsx("div",{children:e.jsxs("button",{onClick:te,className:"w-full p-4 flex items-center justify-between text-red-400 hover:bg-red-500/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Mn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Logout"})]}),e.jsx(sr,{className:"w-4 h-4"})]})})]})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-6 max-w-sm w-full border border-[#2A2A2A]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-7 h-7 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Profile Updated"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Your changes have been saved"})]})})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsx("div",{className:"bg-[#1A1A1A] rounded-2xl p-6 max-w-sm w-full border border-[#2A2A2A]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ze,{className:"w-7 h-7 text-red-400"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Error"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:g}),e.jsx("button",{onClick:()=>f(!1),className:"px-6 py-2 bg-[#2A2A2A] text-white rounded-lg text-sm",children:"Close"})]})})})]}):e.jsx("div",{className:"min-h-screen bg-[#0D0D0D] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-[var(--color-primary)] border-t-transparent mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Setting up profile..."})]})})},Hz=({isOpen:t,onClose:s,userId:n})=>{const i=me(H.services.notifications.getUserNotifications,n?{userId:n,limit:20}:"skip"),o=me(H.services.notifications.getUnreadCount,n?{userId:n}:"skip"),c=De(H.services.notifications.markAsRead),d=De(H.services.notifications.markAllAsRead),m=De(H.services.notifications.clearAllNotifications),h=async y=>{try{await c({notificationId:y,userId:n})}catch(b){console.error("Failed to mark notification as read:",b)}},p=async()=>{try{await d({userId:n})}catch(y){console.error("Failed to mark all as read:",y)}},u=async()=>{try{await m({userId:n})}catch(y){console.error("Failed to clear notifications:",y)}},f=y=>{const b=new Date(y),N=new Date-b,w=Math.floor(N/6e4),B=Math.floor(N/36e5),S=Math.floor(N/864e5);return w<1?"Just now":w<60?`${w}m ago`:B<24?`${B}h ago`:S<7?`${S}d ago`:b.toLocaleDateString()},g=(y,b)=>{if(b==="high"||b==="urgent")return e.jsx(Xe,{className:"w-5 h-5 text-[var(--color-primary)]"});switch(y){case"booking":return e.jsx(rt,{className:"w-5 h-5 text-[var(--color-primary)]"});case"payment":return e.jsx(ds,{className:"w-5 h-5 text-green-500"});case"reminder":return e.jsx(Nt,{className:"w-5 h-5 text-blue-500"});case"alert":return e.jsx(dS,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(Is,{className:"w-5 h-5 text-gray-400"})}};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 z-40 animate-fade-in",onClick:s}),e.jsxs("div",{className:"fixed top-0 right-0 bottom-20 w-full max-w-md bg-[#0D0D0D] z-50 animate-slide-in-right flex flex-col border-l border-[#2A2A2A]",children:[e.jsxs("div",{className:"px-4 py-4 border-b border-[#2A2A2A] flex items-center justify-between bg-[#0D0D0D]",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#1A1A1A] rounded-xl flex items-center justify-center",children:e.jsx(Is,{className:"w-5 h-5 text-[var(--color-primary)]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:o>0?`${o} unread`:"All caught up!"})]})]}),e.jsx("button",{onClick:s,className:"p-2 bg-[#1A1A1A] rounded-xl hover:bg-[#2A2A2A] transition-colors",children:e.jsx(Ze,{className:"w-5 h-5 text-gray-400"})})]}),i&&i.length>0&&e.jsxs("div",{className:"px-4 py-2 border-b border-[#2A2A2A] flex items-center justify-between",children:[e.jsxs("button",{onClick:p,className:"text-xs text-gray-400 hover:text-white flex items-center space-x-1",children:[e.jsx(hr,{className:"w-3 h-3"}),e.jsx("span",{children:"Mark all read"})]}),e.jsxs("button",{onClick:u,className:"text-xs text-gray-400 hover:text-red-400 flex items-center space-x-1",children:[e.jsx(Ze,{className:"w-3 h-3"}),e.jsx("span",{children:"Clear all"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:i?i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#1A1A1A] rounded-full flex items-center justify-center mb-4",children:e.jsx(Is,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-white font-medium mb-2",children:"No notifications"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"You're all caught up! New booking notifications will appear here."})]}):e.jsx("div",{className:"divide-y divide-[#1A1A1A]",children:i.map(y=>e.jsx("div",{onClick:()=>!y.is_read&&h(y._id),className:`p-4 hover:bg-[#1A1A1A] transition-colors cursor-pointer ${y.is_read?"":"bg-[#1A1A1A]/50 border-l-2 border-[var(--color-primary)]"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${y.is_read?"bg-[#2A2A2A]":"bg-[var(--color-primary)]/20"}`,children:g(y.type,y.priority)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:`text-sm font-medium ${y.is_read?"text-gray-300":"text-white"}`,children:y.title}),!y.is_read&&e.jsx("span",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full flex-shrink-0 mt-1.5 ml-2"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:y.message}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:f(y.createdAt)}),y.priority==="high"||y.priority==="urgent"?e.jsx("span",{className:"px-2 py-0.5 text-[10px] font-medium bg-[var(--color-primary)]/20 text-[var(--color-primary)] rounded-full",children:y.priority}):null]})]})]})},y._id))}):e.jsx("div",{className:"flex items-center justify-center h-40",children:e.jsx(Fo,{size:"md"})})})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slide-in-right {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.2s ease-out;
        }
        .animate-slide-in-right {
          animation: slide-in-right 0.3s ease-out;
        }
      `})]}):null},Jz=({tier:t,size:s="sm"})=>{const n={platinum:{bg:"bg-white/20",text:"text-white",icon:Ja},gold:{bg:"bg-[var(--color-primary)]/20",text:"text-[var(--color-primary)]",icon:ym},silver:{bg:"bg-gray-500/20",text:"text-gray-300",icon:T3},bronze:{bg:"bg-gray-600/20",text:"text-gray-400",icon:c0}},i=n[t]||n.bronze,o=i.icon,c=s==="sm"?"px-2 py-0.5 text-xs":"px-3 py-1 text-sm";return e.jsxs("span",{className:`inline-flex items-center rounded-full font-medium ${i.bg} ${i.text} ${c}`,children:[e.jsx(o,{className:s==="sm"?"w-3 h-3 mr-1":"w-4 h-4 mr-1.5"}),t.charAt(0).toUpperCase()+t.slice(1)]})},Lu=({icon:t,label:s,onClick:n,badge:i})=>e.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center p-3 bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] hover:border-[#3A3A3A] transition-all duration-200 active:scale-95 relative",children:[i&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[var(--color-primary)] text-white text-xs rounded-full flex items-center justify-center font-bold",children:i}),e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center mb-2 bg-[#2A2A2A]",children:e.jsx(t,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-400",children:s})]}),qu=({icon:t,label:s,value:n,subValue:i,trend:o,trendUp:c})=>e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-20",children:e.jsx(t,{className:"w-12 h-12 text-gray-500"})}),e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mb-1",children:s}),e.jsxs("div",{className:"flex items-baseline space-x-1",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:n}),i&&e.jsx("span",{className:"text-[10px] text-gray-500",children:i})]}),o&&e.jsxs("div",{className:`mt-2 flex items-center text-xs ${c?"text-[var(--color-primary)]":"text-gray-500"}`,children:[c?e.jsx(sS,{className:"w-3 h-3 mr-0.5"}):e.jsx(KB,{className:"w-3 h-3 mr-0.5"}),e.jsx("span",{children:o})]})]}),Gz=()=>{const{user:t}=Dt(),s=um(),n=Ws(),{tab:i}=JA(),{branding:o}=Ts(),[c,d]=C.useState("monthly"),[m,h]=C.useState(!1),p={home:"overview",bookings:"bookings",portfolio:"portfolio",earnings:"earnings",schedule:"schedule",profile:"profile"},u=p[i]||"overview",f=Ne=>{const Ye=Object.keys(p).find(Ge=>p[Ge]===Ne)||"home";n(`/barber/${Ye}`,{replace:!0})},g=me(H.services.notifications.getUnreadCount,t?._id?{userId:t._id}:"skip");if(!s.pathname.startsWith("/barber"))return null;const b=t?.branch_id?me(H.services.barbers.getBarbersByBranch,{branch_id:t.branch_id}):me(H.services.barbers.getAllBarbers),j=b?.find(Ne=>Ne.user===t?._id);De(H.services.barbers.updateBarber);const N=De(H.services.barbers.createBarberProfile);C.useEffect(()=>{t?.role==="barber"&&b&&!j&&t._id&&t.branch_id&&N({userId:t._id,branch_id:t.branch_id}).catch(console.error)},[t,b,j,N]);const w=t?.branch_id?me(H.services.transactions.getTransactionsByBranch,{branch_id:t.branch_id}):me(H.services.transactions.getAllTransactions),B=me(H.services.bookings.getBookingsByBarber,j?{barberId:j._id}:"skip")||[],S=me(H.services.ratings.getBarberRatingsAnalytics,j?{barberId:j._id}:"skip"),_=me(H.services.barbers.getImageUrl,j?.avatarStorageId?{storageId:j.avatarStorageId}:"skip"),k=me(H.services.barbers.getBarberStatsByPeriod,j?{barberId:j._id,period:c}:"skip"),E=me(H.services.barbers.getTopBarbers,t?.branch_id?{branch_id:t.branch_id,limit:5,period:"monthly"}:"skip"),D=me(H.services.barbers.getBarberActivities,j?{barberId:j._id,limit:10}:"skip"),F=me(H.services.portfolio.getBarberPortfolio,j?{barber_id:j._id}:"skip"),M=De(H.services.portfolio.addPortfolioItem),P=De(H.services.portfolio.deletePortfolioItem),T=De(H.services.barbers.generateUploadUrl),[L,X]=C.useState(!1),[Z,ne]=C.useState(""),[I,O]=C.useState(null),[G,te]=C.useState(!1),[Q,ee]=C.useState(null),[le,R]=C.useState(null),q=w?.filter(Ne=>Ne.barber===j?._id&&Ne.payment_status==="completed")||[],J=new Date().toISOString().split("T")[0],$=B.filter(Ne=>Ne.date===J),Y=B.filter(Ne=>Ne.status==="pending"||Ne.status==="confirmed"),xe=q.filter(Ne=>new Date(Ne.createdAt).toISOString().split("T")[0]===J).reduce((Ne,Ye)=>Ne+Ye.total_amount,0),oe=new Date().toISOString().slice(0,7),de=q.filter(Ne=>new Date(Ne.createdAt).toISOString().slice(0,7)===oe).reduce((Ne,Ye)=>Ne+Ye.total_amount,0),ve=[{value:"daily",label:"Today"},{value:"weekly",label:"Week"},{value:"monthly",label:"Month"},{value:"yearly",label:"Year"},{value:"all_time",label:"All"}],Me=[{id:"overview",urlPath:"home",label:"Home",icon:F3},{id:"bookings",urlPath:"bookings",label:"Bookings",icon:rt},{id:"portfolio",urlPath:"portfolio",label:"Portfolio",icon:On},{id:"earnings",urlPath:"earnings",label:"Earnings",icon:gi},{id:"schedule",urlPath:"schedule",label:"Schedule",icon:Nt}],Ke=Ne=>{const Ye=new Date(Ne),yt=new Date-Ye,bt=Math.floor(yt/6e4),Ee=Math.floor(yt/36e5),We=Math.floor(yt/864e5);return bt<1?"Just now":bt<60?`${bt}m ago`:Ee<24?`${Ee}h ago`:We<7?`${We}d ago`:Ye.toLocaleDateString()},pe=Ne=>{switch(Ne){case"booking":return rt;case"transaction":return ds;case"rating":return Vt;default:return Qa}},be=()=>e.jsxs("div",{className:"px-4 pb-6 space-y-4",children:[e.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-[#1A1A1A] border border-[var(--color-primary)]/50",children:e.jsxs("div",{className:"relative p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#2A2A2A] flex items-center justify-center overflow-hidden border border-[#3A3A3A]",children:j?.avatar?e.jsx("img",{src:j.avatar,alt:"",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-lg font-bold text-[var(--color-primary)]",children:j?.full_name?.split(" ").map(Ne=>Ne[0]).join("").slice(0,2)||"U"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-400",children:["Good ",new Date().getHours()<12?"Morning":new Date().getHours()<17?"Afternoon":"Evening",","]}),e.jsxs("h2",{className:"text-lg font-bold text-white",children:[j?.full_name?.split(" ")[0]||"Barber","!"]})]})]}),j?.rating>0&&e.jsxs("div",{className:"flex items-center space-x-1 bg-[#2A2A2A] rounded-lg px-2 py-1 border border-[#3A3A3A]",children:[e.jsx(Vt,{className:"w-3 h-3 fill-[var(--color-primary)] text-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm font-medium text-white",children:j.rating})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-[#2A2A2A] rounded-xl p-3 text-center border border-[#3A3A3A]",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:$.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Today"})]}),e.jsxs("div",{className:"bg-[#2A2A2A] rounded-xl p-3 text-center border border-[#3A3A3A]",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:Y.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Pending"})]}),e.jsxs("div",{className:"bg-[#2A2A2A] rounded-xl p-3 text-center border border-[#3A3A3A]",children:[e.jsxs("div",{className:"text-xl font-bold text-[var(--color-primary)]",children:["",xe.toLocaleString()]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Earned"})]})]}),e.jsx("div",{className:"mt-3 bg-[#2A2A2A] rounded-xl p-2.5 border border-[#3A3A3A]",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[var(--color-primary)] rounded-full animate-pulse"}),e.jsx("p",{className:"text-sm text-gray-400",children:$.length===0?"No appointments yet - time to shine!":$.length<=2?"Great start! Keep up the momentum!":$.length<=4?"Busy day ahead! You're doing great!":"Fully booked! You're on fire today!"})]})})]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-400 mb-3 flex items-center",children:[e.jsx(Do,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx(Lu,{icon:rt,label:"Bookings",onClick:()=>f("bookings"),badge:Y.length>0?Y.length:null}),e.jsx(Lu,{icon:gi,label:"Earnings",onClick:()=>f("earnings")}),e.jsx(Lu,{icon:Nt,label:"Schedule",onClick:()=>f("schedule")}),e.jsx(Lu,{icon:hs,label:"Clients",onClick:()=>f("clients")})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-[#1A1A1A] rounded-2xl p-3 border border-[#2A2A2A]",children:[e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Statistics"}),e.jsx("div",{className:"flex gap-1",children:ve.map(Ne=>e.jsx("button",{onClick:()=>d(Ne.value),className:`px-2.5 py-1 text-xs rounded-lg transition-colors ${c===Ne.value?"bg-[var(--color-primary)] text-white":"bg-[#2A2A2A] text-gray-400 hover:bg-[#333333]"}`,children:Ne.label},Ne.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(qu,{icon:rt,label:"Bookings",value:k?.totalBookings??B.length,subValue:ve.find(Ne=>Ne.value===c)?.label.toLowerCase(),trend:`${k?.completedBookings??0} done`,trendUp:!0}),e.jsx(qu,{icon:Vt,label:"Rating",value:S?.averageRating||j?.rating||"0.0",subValue:"/5",trend:`${S?.totalRatings||0} reviews`,trendUp:!0}),e.jsx(qu,{icon:as,label:"Earnings",value:`${(k?.totalEarnings??0).toLocaleString()}`,trend:`${k?.commissionRate??0}% commission`,trendUp:!0}),e.jsx(qu,{icon:hs,label:"Clients",value:k?.uniqueCustomers??0,subValue:"unique",trend:`${k?.cancelledBookings??0} cancelled`,trendUp:!1})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-[#2A2A2A] flex justify-between items-center",children:[e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(s0,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Today's Schedule"]}),e.jsx("button",{onClick:()=>f("bookings"),className:"text-xs text-gray-400 hover:text-white",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-[#2A2A2A]",children:$.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-[#2A2A2A] rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(rt,{className:"w-6 h-6 text-gray-600"})}),e.jsx("p",{className:"text-white font-medium mb-1",children:"No appointments today"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Time to relax or prepare for tomorrow!"})]}):$.slice(0,4).map(Ne=>e.jsxs("div",{className:"p-4 flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 w-12 h-12 bg-[#2A2A2A] rounded-xl flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[10px] text-gray-500",children:Wa(Ne.time).split(" ")[1]}),e.jsx("span",{className:"text-sm font-bold text-white",children:Wa(Ne.time).split(" ")[0]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white text-sm truncate",children:Ne.customer_name}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:Ne.service_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-white",children:["",Ne.price]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Ne.status==="confirmed"?"bg-[var(--color-primary)]/20 text-[var(--color-primary)]":Ne.status==="completed"?"bg-white/10 text-white":(Ne.status==="pending","bg-gray-500/20 text-gray-400")}`,children:Ne.status})]})]},Ne._id))})]}),D&&D.length>0&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#2A2A2A]",children:e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(Qa,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Recent Activity"]})}),e.jsx("div",{className:"divide-y divide-[#2A2A2A]",children:D.slice(0,5).map((Ne,Ye)=>{const Ge=pe(Ne.type);return e.jsxs("div",{className:"p-3 flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-[#2A2A2A]",children:e.jsx(Ge,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white",children:Ne.title}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:Ne.description})]}),e.jsx("span",{className:"text-xs text-gray-500",children:Ke(Ne.timestamp)})]},Ye)})})]}),E&&E.length>0&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-[#2A2A2A] flex justify-between items-center",children:[e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(ym,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Leaderboard"]}),e.jsx("span",{className:"text-xs text-gray-500",children:"This Month"})]}),e.jsx("div",{className:"divide-y divide-[#2A2A2A]",children:E.slice(0,3).map((Ne,Ye)=>{const Ge=j&&Ne._id===j._id;return e.jsxs("div",{className:`p-3 flex items-center space-x-3 ${Ge?"bg-[#2A2A2A]":""}`,children:[e.jsx("div",{className:`w-7 h-7 rounded-full flex items-center justify-center font-bold text-xs ${Ye===0?"bg-[var(--color-primary)] text-white":"bg-[#2A2A2A] text-gray-400"}`,children:Ye+1}),e.jsx("div",{className:"w-9 h-9 rounded-full overflow-hidden bg-[#2A2A2A]",children:Ne.avatar?e.jsx("img",{src:Ne.avatar,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(tt,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:`text-sm font-medium truncate ${Ge?"text-[var(--color-primary)]":"text-white"}`,children:[Ne.full_name,Ge&&e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(You)"})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Vt,{className:"w-3 h-3 text-[var(--color-primary)] fill-[var(--color-primary)] mr-0.5"}),Ne.rating||0]}),e.jsxs("span",{children:[Ne.completedBookings," jobs"]})]})]}),e.jsx(Jz,{tier:Ne.tier})]},Ne._id)})})]}),S&&S.totalRatings>0&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(Vt,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Customer Reviews"]}),e.jsxs("div",{className:"flex items-center space-x-1 bg-[var(--color-primary)]/20 px-2 py-1 rounded-lg",children:[e.jsx(Vt,{className:"w-3 h-3 text-[var(--color-primary)] fill-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm font-bold text-[var(--color-primary)]",children:S.averageRating})]})]}),e.jsx("div",{className:"space-y-2 mb-4",children:[5,4,3,2,1].map(Ne=>{const Ye=S.ratingBreakdown[Ne]||0,Ge=S.totalRatings>0?Ye/S.totalRatings*100:0;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500 w-3",children:Ne}),e.jsx(Vt,{className:"w-3 h-3 text-[var(--color-primary)] fill-[var(--color-primary)]"}),e.jsx("div",{className:"flex-1 bg-[#2A2A2A] rounded-full h-1.5",children:e.jsx("div",{className:"bg-[var(--color-primary)] h-1.5 rounded-full transition-all",style:{width:`${Ge}%`}})}),e.jsx("span",{className:"text-xs text-gray-500 w-6 text-right",children:Ye})]},Ne)})}),S.recentRatings?.length>0&&e.jsxs("div",{className:"border-t border-[#2A2A2A] pt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Recent Reviews"}),e.jsx("div",{className:"space-y-2",children:S.recentRatings.slice(0,2).map((Ne,Ye)=>e.jsxs("div",{className:"bg-[#2A2A2A] rounded-lg p-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(Ge=>e.jsx(Vt,{className:`w-3 h-3 ${Ge<=Ne.rating?"text-[var(--color-primary)] fill-[var(--color-primary)]":"text-gray-600"}`},Ge))}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(Ne.created_at).toLocaleDateString()})]}),Ne.feedback&&e.jsx("p",{className:"text-xs text-gray-400 line-clamp-2",children:Ne.feedback})]},Ye))})]})]})]}),Be=()=>e.jsxs("div",{className:"px-4 pb-6 space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-5 border border-[#2A2A2A]",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Your Earnings"}),e.jsxs("h2",{className:"text-3xl font-bold text-white mb-3",children:["",(k?.totalEarnings??0).toLocaleString()]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center text-gray-400 text-xs",children:e.jsxs("span",{children:["Gross Revenue: ",(k?.totalRevenue??de).toLocaleString()]})}),e.jsx("div",{className:"flex items-center text-[var(--color-primary)] text-xs",children:e.jsxs("span",{children:[k?.daysWorked??0," days worked"]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-[#1A1A1A] rounded-2xl p-3 border border-[#2A2A2A]",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Period"}),e.jsx("div",{className:"flex gap-1",children:ve.map(Ne=>e.jsx("button",{onClick:()=>d(Ne.value),className:`px-2.5 py-1 text-xs rounded-lg transition-colors ${c===Ne.value?"bg-[var(--color-primary)] text-white":"bg-[#2A2A2A] text-gray-400 hover:bg-[#333333]"}`,children:Ne.label},Ne.value))})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsxs("h3",{className:"text-sm font-medium text-white mb-3 flex items-center",children:[e.jsx(gi,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Commission Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Service Commission"})]}),e.jsxs("span",{className:"text-sm font-medium text-white",children:["",(k?.serviceCommission??0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Product Commission"})]}),e.jsxs("span",{className:"text-sm font-medium text-white",children:["",(k?.productCommission??0).toLocaleString()]})]}),e.jsxs("div",{className:"border-t border-[#2A2A2A] pt-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Daily Rate"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["",(k?.dailyRate??0).toLocaleString(),"/day"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Commission Rate"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[k?.commissionRate??0,"%"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Je,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Completed"})]}),e.jsx("p",{className:"text-xl font-bold text-white",children:k?.completedBookings??0}),e.jsx("p",{className:"text-xs text-gray-500",children:"services"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-4 border border-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(d0,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Avg. Earning"})]}),e.jsxs("p",{className:"text-xl font-bold text-white",children:["",Math.round((k?.totalEarnings??0)/Math.max(k?.daysWorked??1,1)).toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500",children:"per day"})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#2A2A2A]",children:e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(ds,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Recent Transactions"]})}),e.jsxs("div",{className:"divide-y divide-[#2A2A2A]",children:[q.slice(0,5).map((Ne,Ye)=>e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"Service Payment"}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(Ne.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-bold text-[var(--color-primary)]",children:["+",Ne.total_amount.toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500",children:Ne.payment_method})]})]},Ye)),q.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(gi,{className:"w-10 h-10 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No transactions yet"})]})]})]})]}),Ue=Ne=>{if(!Ne)return"";const[Ye,Ge]=Ne.split(":"),yt=parseInt(Ye,10),bt=yt>=12?"PM":"AM";return`${yt%12||12}:${Ge} ${bt}`},ue=j?.schedule||{},Ie=[{key:"monday",label:"Monday"},{key:"tuesday",label:"Tuesday"},{key:"wednesday",label:"Wednesday"},{key:"thursday",label:"Thursday"},{key:"friday",label:"Friday"},{key:"saturday",label:"Saturday"},{key:"sunday",label:"Sunday"}],st=()=>e.jsxs("div",{className:"px-4 pb-6 space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-5 border border-[#2A2A2A]",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Your Schedule"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Working Hours"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your weekly availability schedule"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#2A2A2A] flex justify-between items-center",children:e.jsxs("h3",{className:"text-sm font-medium text-white flex items-center",children:[e.jsx(Nt,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Weekly Schedule"]})}),e.jsx("div",{className:"divide-y divide-[#2A2A2A]",children:Ie.map(({key:Ne,label:Ye})=>{const Ge=ue[Ne],yt=Ge?.available??!1,bt=Ge?.start||"09:00",Ee=Ge?.end||"17:00";return e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${yt?"bg-green-500":"bg-gray-600"}`}),e.jsx("span",{className:`text-sm ${yt?"text-white":"text-gray-500"}`,children:Ye})]}),e.jsx("span",{className:`text-sm ${yt?"text-gray-400":"text-gray-600"}`,children:yt?`${Ue(bt)} - ${Ue(Ee)}`:"Day Off"})]},Ne)})})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] p-4",children:[e.jsxs("h3",{className:"text-sm font-medium text-white mb-3 flex items-center",children:[e.jsx(s0,{className:"w-4 h-4 mr-2 text-[var(--color-primary)]"}),"Schedule Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#2A2A2A] rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:Ie.filter(Ne=>ue[Ne.key]?.available).length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Working Days"})]}),e.jsxs("div",{className:"bg-[#2A2A2A] rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:Ie.filter(Ne=>!ue[Ne.key]?.available).length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Days Off"})]})]})]})]}),Le=()=>e.jsxs("div",{className:"px-4 pb-6 space-y-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl p-5 border border-[#2A2A2A]",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Your Clients"}),e.jsxs("h2",{className:"text-xl font-bold text-white mb-1",children:[k?.uniqueCustomers??0," Customers"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Build lasting relationships"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl border border-[#2A2A2A] p-8 text-center",children:[e.jsx(hs,{className:"w-10 h-10 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-2",children:"Client Management"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Track your regular clients and their preferences"}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Coming soon"})]})]}),kt=async Ne=>{const Ye=Ne.target.files?.[0];if(!(!Ye||!j)){X(!0);try{const Ge=await T(),yt=await fetch(Ge,{method:"POST",headers:{"Content-Type":Ye.type},body:Ye}),{storageId:bt}=await yt.json();await M({barber_id:j._id,branch_id:j.branch_id,image_storage_id:bt,caption:Z||"",tags:[],is_featured:!1}),ne("")}catch(Ge){console.error("Failed to upload portfolio image:",Ge)}finally{X(!1)}}},Pt=async Ne=>{if(confirm("Delete this portfolio image?"))try{await P({id:Ne})}catch(Ye){console.error("Failed to delete portfolio item:",Ye)}},St=()=>e.jsxs("div",{className:"pb-6 px-4",children:[e.jsxs("div",{className:"pt-2 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden ring-2 ring-[var(--color-primary)] ring-offset-2 ring-offset-[#0D0D0D]",children:_||j?.avatar?e.jsx("img",{src:_||j?.avatar,alt:j?.full_name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:j?.full_name?.charAt(0)})})}),e.jsx("button",{onClick:()=>te(!0),className:"absolute -bottom-1 -right-1 w-7 h-7 bg-[var(--color-primary)] rounded-full flex items-center justify-center border-2 border-[#0D0D0D] shadow-lg",children:e.jsx(cs,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:F?.length||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Posts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:j?.totalBookings||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Clients"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:j?.rating?.toFixed(1)||"5.0"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Rating"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-base font-bold text-white",children:j?.full_name}),e.jsx("p",{className:"text-sm text-[var(--color-primary)] font-medium",children:"Professional Barber"}),j?.specialties?.length>0&&e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:j.specialties.slice(0,3).join("  ")})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>te(!0),className:"flex-1 py-2.5 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"New Post"]}),e.jsx("button",{onClick:()=>f("profile"),className:"flex-1 py-2.5 bg-[#1A1A1A] hover:bg-[#2A2A2A] text-white font-semibold rounded-xl transition-colors border border-[#2A2A2A]",children:"Edit Profile"})]})]}),e.jsxs("div",{className:"border-t border-[#1A1A1A] flex -mx-4",children:[e.jsxs("button",{className:"flex-1 py-3 flex items-center justify-center gap-2 border-b-2 border-white text-white",children:[e.jsx(vm,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Grid"})]}),e.jsxs("button",{className:"flex-1 py-3 flex items-center justify-center gap-2 border-b-2 border-transparent text-gray-500",children:[e.jsx(hS,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Saved"})]})]}),F?.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full border-2 border-gray-700 flex items-center justify-center",children:e.jsx(da,{className:"w-10 h-10 text-gray-600"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Share Photos"}),e.jsx("p",{className:"text-gray-500 text-sm max-w-xs mx-auto mb-6",children:"When you share photos, they will appear on your profile."}),e.jsx("button",{onClick:()=>te(!0),className:"text-[var(--color-primary)] font-semibold text-sm hover:text-[var(--color-accent)]",children:"Share your first photo"})]}):e.jsx("div",{className:"grid grid-cols-3 gap-1 -mx-4 mt-2",children:F?.map((Ne,Ye)=>e.jsxs("div",{onClick:()=>O(Ne),className:"relative aspect-square cursor-pointer group",children:[e.jsx("img",{src:Ne.imageUrl,alt:Ne.caption||"Portfolio",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-white",children:[e.jsx(nj,{className:"w-5 h-5 fill-white"}),e.jsx("span",{className:"font-semibold",children:Ne.likes_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-white",children:[e.jsx(cg,{className:"w-5 h-5 fill-white"}),e.jsx("span",{className:"font-semibold",children:"0"})]})]}),Ne.is_featured&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Ca,{className:"w-4 h-4 text-yellow-400 drop-shadow-lg"})})]},Ne._id))}),G&&e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{L||(te(!1),ee(null),R(null))}}),e.jsxs("div",{className:"relative w-full max-w-xl mx-4 bg-[#1A1A1A] rounded-t-3xl sm:rounded-2xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#2A2A2A]",children:[e.jsx("button",{onClick:()=>{L||(te(!1),ee(null),R(null))},className:"text-gray-400 hover:text-white transition-colors",disabled:L,children:"Cancel"}),e.jsx("h3",{className:"text-base font-semibold text-white",children:"New Post"}),e.jsx("div",{className:"w-12"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:`aspect-video rounded-2xl overflow-hidden ${le?"":"border-2 border-dashed border-[#3A3A3A]"} bg-[#0D0D0D] transition-all flex flex-col items-center justify-center`,children:L?e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-[var(--color-primary)] border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Uploading..."})]}):le?e.jsx("img",{src:le,alt:"Preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx(da,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select a photo to upload"})]})}),e.jsx("input",{type:"text",value:Z,onChange:Ne=>ne(Ne.target.value),placeholder:"Write a caption...",className:"w-full h-12 px-4 bg-[#0D0D0D] border border-[#2A2A2A] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-transparent text-sm",disabled:L}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[#0D0D0D] rounded-xl",children:[e.jsx(Ca,{className:"w-5 h-5 text-[var(--color-primary)] flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"Pro tip: Upload high-quality photos of your best work to attract more clients"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:`flex-1 ${Q?"":"flex-[2]"}`,children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Ne=>{const Ye=Ne.target.files?.[0];Ye&&(ee(Ye),R(URL.createObjectURL(Ye)))},className:"hidden",disabled:L}),e.jsx("div",{className:`w-full py-4 rounded-xl font-semibold text-center cursor-pointer transition-all ${L?"bg-gray-700 text-gray-500 cursor-not-allowed":Q?"bg-[#2A2A2A] hover:bg-[#3A3A3A] text-white border border-[#3A3A3A]":"bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white"}`,children:Q?"Change Photo":"Select Photo"})]}),Q&&e.jsx("button",{onClick:async()=>{if(!Q||L)return;await kt({target:{files:[Q]}}),ee(null),R(null),te(!1)},disabled:L,className:`flex-[2] py-4 rounded-xl font-semibold text-center transition-all ${L?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white"}`,children:L?"Uploading...":"Upload"})]})]})]})]}),I&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/95",onClick:()=>O(null)}),e.jsx("div",{className:"relative w-full max-w-lg mx-4",children:e.jsxs("div",{className:"bg-[#1A1A1A] rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:_||j?.avatar?e.jsx("img",{src:_||j?.avatar,alt:"",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-white",children:j?.full_name?.charAt(0)})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:j?.full_name}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(I.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),e.jsx("button",{onClick:()=>O(null),className:"w-8 h-8 flex items-center justify-center hover:bg-[#2A2A2A] rounded-full transition-colors",children:e.jsx(Ze,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"aspect-square",children:e.jsx("img",{src:I.imageUrl,alt:I.caption||"Portfolio",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"hover:opacity-70 transition-opacity",children:e.jsx(nj,{className:"w-6 h-6 text-white"})}),e.jsx("button",{className:"hover:opacity-70 transition-opacity",children:e.jsx(cg,{className:"w-6 h-6 text-white"})})]}),e.jsxs("button",{onClick:()=>{Pt(I._id),O(null)},className:"flex items-center gap-2 px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg transition-colors text-sm",children:[e.jsx(js,{className:"w-4 h-4"}),"Delete"]})]}),e.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[I.likes_count||0," likes"]}),I.caption&&e.jsxs("p",{className:"text-sm text-gray-300",children:[e.jsx("span",{className:"font-semibold text-white mr-2",children:j?.full_name?.split(" ")[0]}),I.caption]}),I.tags?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:I.tags.map((Ne,Ye)=>e.jsxs("span",{className:"text-sm text-[var(--color-primary)]",children:["#",Ne]},Ye))})]})]})})]}),e.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out forwards;
        }
      `})]}),Jt=()=>{switch(u){case"overview":return be();case"bookings":return e.jsx(qz,{});case"portfolio":return St();case"earnings":return Be();case"schedule":return st();case"clients":return Le();case"profile":return e.jsx(Vz,{});default:return be()}};return b===void 0||t===void 0?e.jsx("div",{className:"min-h-screen bg-[#0D0D0D] flex items-center justify-center p-4",children:e.jsx(Fo,{size:"lg",message:"Loading dashboard..."})}):j?e.jsxs("div",{className:"min-h-screen bg-[#0D0D0D] pb-20",children:[e.jsx("div",{className:"bg-[#0D0D0D] border-b border-[#1A1A1A] sticky top-0 z-20",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:u==="overview"?"Dashboard":u==="bookings"?"Bookings":u==="portfolio"?"Portfolio":u==="earnings"?"Earnings":u==="schedule"?"Schedule":u==="clients"?"Clients":u==="profile"?"Profile":"Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[u==="profile"&&e.jsx("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("toggleBarberProfileEdit"))},className:"w-9 h-9 flex items-center justify-center bg-[#1A1A1A] rounded-xl active:scale-95 transition-transform",children:e.jsx(Y7,{className:"w-[18px] h-[18px] text-gray-400"})}),e.jsxs("button",{onClick:()=>h(!0),className:"w-9 h-9 flex items-center justify-center bg-[#1A1A1A] rounded-xl relative active:scale-95 transition-transform",children:[e.jsx(Is,{className:"w-[18px] h-[18px] text-gray-400"}),(g>0||Y.length>0)&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-[var(--color-primary)] text-white text-[10px] rounded-full flex items-center justify-center font-medium animate-pulse",children:g>0?g:Y.length})]}),e.jsx("button",{onClick:()=>f("profile"),className:`w-9 h-9 flex items-center justify-center rounded-xl active:scale-95 transition-transform overflow-hidden ${u==="profile"?"bg-[var(--color-primary)] ring-2 ring-[var(--color-primary)]":"bg-[#1A1A1A]"}`,children:_||j?.avatar?e.jsx("img",{src:_||j.avatar,alt:"",className:"w-full h-full object-cover"}):e.jsx(VS,{className:`w-[18px] h-[18px] ${u==="profile"?"text-white":"text-gray-400"}`})})]})]})})}),e.jsx("div",{className:"pt-4",children:Jt()}),e.jsx(Hz,{isOpen:m,onClose:()=>h(!1),userId:t?._id}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-[#0D0D0D] border-t border-[#1A1A1A] safe-area-inset-bottom",children:e.jsx("div",{className:"grid grid-cols-5 p-1 pb-2",children:Me.map(Ne=>{const Ye=Ne.icon,Ge=u===Ne.id;return e.jsxs("button",{onClick:()=>n(`/barber/${Ne.urlPath}`,{replace:!0}),className:`flex flex-col items-center justify-center py-2 transition-colors ${Ge?"text-[var(--color-primary)]":"text-gray-600"}`,children:[e.jsx(Ye,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[10px] mt-1 font-medium",children:Ne.label})]},Ne.id)})})})]}):e.jsx("div",{className:"min-h-screen bg-[#0D0D0D] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(hs,{className:"w-10 h-10 text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-bold text-white mb-2",children:"Setting Up Profile"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Please wait while we set up your barber profile..."})]})})},Yz=()=>{const t=Ws(),{branding:s}=Ts(),{isAuthenticated:n}=Dt(),[i,o]=C.useState(""),c=me(H.services.portfolio.getPublicBarbers,{}),d=()=>{t(n?"/customer/booking":"/guest/booking")},m=c?.filter(h=>h.name.toLowerCase().includes(i.toLowerCase())||h.specialties?.some(p=>p.toLowerCase().includes(i.toLowerCase())));return e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-[#0A0A0A]/90 backdrop-blur-xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/"),className:"w-10 h-10 flex items-center justify-center bg-[#1A1A1A] rounded-xl hover:bg-[#2A2A2A] transition-colors",children:e.jsx(vs,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white",children:"Our Team"}),e.jsx("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Expert barbers ready to serve you"})]})]}),e.jsx(Js,{to:"/",className:"flex items-center",children:e.jsx("img",{src:s?.logo_light_url||"/img/tipuno_x_logo_white.avif",alt:"Logo",className:"h-8 object-contain"})})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:["Meet Our ",e.jsx("span",{className:"text-[var(--color-primary)]",children:"Barbers"})]}),e.jsx("p",{className:"text-gray-400 text-sm sm:text-base max-w-md mx-auto",children:"Choose from our talented team of professional barbers"})]}),e.jsx("div",{className:"max-w-md mx-auto mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),e.jsx("input",{type:"text",value:i,onChange:h=>o(h.target.value),placeholder:"Search barbers...",className:"w-full h-12 pl-12 pr-4 bg-[#111111] border border-[#1A1A1A] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)]/50 focus:border-[var(--color-primary)] transition-all"})]})}),c&&e.jsxs("div",{className:"flex items-center justify-center gap-8 mb-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:c.length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Barbers"})]}),e.jsx("div",{className:"w-px h-8 bg-[#1A1A1A]"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:c.filter(h=>h.is_accepting_bookings).length}),e.jsx("p",{className:"text-xs text-gray-500",children:"Available"})]})]})]}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 pb-12",children:c?m?.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-[#111111] flex items-center justify-center mx-auto mb-4",children:e.jsx(ys,{className:"w-10 h-10 text-gray-600"})}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"No Barbers Found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:m?.map(h=>e.jsx("div",{onClick:()=>t(`/barbers/${h._id}`),className:"group bg-[#111111] rounded-xl overflow-hidden border border-[#1A1A1A] hover:border-[var(--color-primary)]/50 transition-all duration-300 cursor-pointer",children:e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[h.avatarUrl||h.featuredImageUrl?e.jsx("img",{src:h.avatarUrl||h.featuredImageUrl,alt:h.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[var(--color-primary)]/10 to-[var(--color-accent)]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-5xl font-bold text-[var(--color-primary)]/30",children:h.name?.charAt(0)})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0A0A0A] via-[#0A0A0A]/20 to-transparent"}),h.is_accepting_bookings&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 ring-2 ring-green-500/30"})}),h.portfolioCount>0&&e.jsxs("div",{className:"absolute top-3 left-3 px-2 py-1 bg-black/50 backdrop-blur-sm rounded-lg flex items-center gap-1",children:[e.jsx(Ca,{className:"w-3 h-3 text-[var(--color-primary)]"}),e.jsx("span",{className:"text-xs text-white font-medium",children:h.portfolioCount})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[e.jsx("h3",{className:"text-base font-bold text-white mb-1 truncate",children:h.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-3.5 h-3.5 text-[var(--color-primary)] fill-[var(--color-primary)]"}),e.jsx("span",{className:"text-white font-medium",children:h.rating?.toFixed(1)||"5.0"})]}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsx("span",{className:"text-gray-400",children:h.experience||"Expert"})]}),h.specialties?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:h.specialties.slice(0,2).map((p,u)=>e.jsx("span",{className:"px-2 py-0.5 text-[10px] font-medium bg-white/10 text-white/80 rounded",children:p},u))})]})]})},h._id))}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(8)].map((h,p)=>e.jsx("div",{className:"bg-[#111111] rounded-xl overflow-hidden animate-pulse",children:e.jsx("div",{className:"aspect-[3/4] bg-[#1A1A1A]"})},p))})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-[#0A0A0A] via-[#0A0A0A] to-transparent z-50",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("button",{onClick:d,className:"w-full py-4 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white font-bold rounded-xl transition-all shadow-lg shadow-[var(--color-primary)]/20 flex items-center justify-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"Book Appointment"]})})}),e.jsx("div",{className:"h-24"})]})},Qz=()=>{const t=Ws(),{barberId:s}=JA(),{branding:n}=Ts(),{isAuthenticated:i}=Dt(),[o,c]=C.useState(null),d=()=>{sessionStorage.setItem("preSelectedBarber",JSON.stringify({barberId:s,barberName:m?.name})),t(i?"/customer/booking":"/guest/booking")},m=me(H.services.portfolio.getPublicBarberProfile,s?{barber_id:s}:"skip"),h=f=>{if(!f)return"";const[g,y]=f.split(":"),b=parseInt(g,10),j=b>=12?"PM":"AM";return`${b%12||12}:${y} ${j}`},p=f=>{switch(f){case"certification":return b7;case"award":return ym;case"milestone":return d0;case"training":return T3;default:return c0}},u=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}];return m?e.jsxs("div",{className:"min-h-screen bg-[#0A0A0A]",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-[#0A0A0A]/90 backdrop-blur-xl border-b border-[#1A1A1A]",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t("/barbers"),className:"w-10 h-10 flex items-center justify-center bg-[#1A1A1A] rounded-xl hover:bg-[#2A2A2A] transition-colors",children:e.jsx(vs,{className:"w-5 h-5 text-white"})}),e.jsx("button",{onClick:d,className:"px-5 py-2.5 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white text-sm font-semibold rounded-xl transition-all",children:"Book Now"})]})})}),e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-8 pb-32",children:[e.jsx("section",{className:"mb-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0 mx-auto md:mx-0",children:e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-2xl overflow-hidden ring-4 ring-[var(--color-primary)]/20 bg-[#1A1A1A]",children:m.avatarUrl?e.jsx("img",{src:m.avatarUrl,alt:m.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-[var(--color-primary)]/20 to-[var(--color-accent)]/20",children:e.jsx("span",{className:"text-4xl md:text-5xl font-bold text-[var(--color-primary)]",children:m.name?.charAt(0)})})})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:m.name}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Vt,{className:"w-5 h-5 text-[var(--color-primary)] fill-[var(--color-primary)]"}),e.jsx("span",{className:"text-white font-semibold",children:m.rating?.toFixed(1)||"5.0"})]}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-600"}),e.jsxs("span",{className:"text-gray-400",children:[m.totalBookings||0," bookings"]}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-600"}),e.jsx("span",{className:"text-gray-400",children:m.experience})]}),m.specialties?.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 mb-4",children:m.specialties.map((f,g)=>e.jsx("span",{className:"px-3 py-1.5 text-sm font-medium bg-[var(--color-primary)]/10 text-[var(--color-primary)] rounded-lg",children:f},g))}),m.is_accepting_bookings&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-green-500/10 border border-green-500/20 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm text-green-400 font-medium",children:"Available for booking"})]})]})]})}),e.jsxs("section",{className:"mb-10",children:[e.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Working Hours"}),e.jsx("div",{className:"bg-[#111111] rounded-xl border border-[#1A1A1A] overflow-hidden",children:e.jsx("div",{className:"grid grid-cols-7 divide-x divide-[#1A1A1A]",children:u.map(({key:f,label:g})=>{const y=m.schedule?.[f],b=y?.available??!1;return e.jsxs("div",{className:"p-3 text-center",children:[e.jsx("p",{className:`text-xs font-medium mb-2 ${b?"text-white":"text-gray-600"}`,children:g}),e.jsx("div",{className:`w-2 h-2 rounded-full mx-auto mb-2 ${b?"bg-green-500":"bg-gray-700"}`}),e.jsx("p",{className:`text-xs ${b?"text-gray-400":"text-gray-700"}`,children:b?h(y.start)?.replace(" ",""):"Off"}),b&&e.jsx("p",{className:"text-xs text-gray-500",children:h(y.end)?.replace(" ","")})]},f)})})})]}),m.portfolio?.length>0&&e.jsxs("section",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Portfolio"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[m.portfolio.length," works"]})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2",children:m.portfolio.map((f,g)=>e.jsxs("div",{onClick:()=>c(f),className:"relative aspect-square rounded-xl overflow-hidden cursor-pointer group bg-[#1A1A1A]",children:[e.jsx("img",{src:f.imageUrl,alt:f.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors"}),f.is_featured&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Ca,{className:"w-4 h-4 text-[var(--color-primary)]"})})]},g))})]}),m.services?.length>0&&e.jsxs("section",{className:"mb-10",children:[e.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Services"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:m.services.map((f,g)=>e.jsx("div",{className:"bg-[#111111] rounded-xl p-4 border border-[#1A1A1A] hover:border-[var(--color-primary)]/30 transition-colors group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[var(--color-primary)]/10 flex items-center justify-center group-hover:bg-[var(--color-primary)]/20 transition-colors",children:e.jsx(ND,{className:"w-5 h-5 text-[var(--color-primary)]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:f.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[f.duration_minutes," mins"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-lg font-bold text-[var(--color-primary)]",children:f.hide_price?"---":`${f.price}`})})]})},g))})]}),m.reviews?.length>0&&e.jsxs("section",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Reviews"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Vt,{className:"w-4 h-4 text-[var(--color-primary)] fill-[var(--color-primary)]"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:m.rating?.toFixed(1)||"5.0"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",m.reviews.length,")"]})]})]}),e.jsx("div",{className:"space-y-3",children:m.reviews.slice(0,5).map((f,g)=>e.jsx("div",{className:"bg-[#111111] rounded-xl p-4 border border-[#1A1A1A]",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#1A1A1A] flex items-center justify-center flex-shrink-0",children:f.customerAvatar?e.jsx("img",{src:f.customerAvatar,alt:"",className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-sm font-bold text-gray-400",children:f.customerName?.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:f.customerName}),e.jsx("span",{className:"text-xs text-gray-600 flex-shrink-0",children:new Date(f.created_at).toLocaleDateString()})]}),e.jsx("div",{className:"flex gap-0.5 mb-2",children:[...Array(5)].map((y,b)=>e.jsx(Vt,{className:`w-3.5 h-3.5 ${b<f.rating?"text-[var(--color-primary)] fill-[var(--color-primary)]":"text-gray-700"}`},b))}),f.feedback&&e.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:f.feedback})]})]})},g))})]}),m.achievements?.length>0&&e.jsxs("section",{className:"mb-10",children:[e.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Achievements"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:m.achievements.map((f,g)=>{const y=p(f.achievement_type);return e.jsxs("div",{className:"bg-[#111111] rounded-xl p-4 border border-[#1A1A1A] flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[var(--color-primary)]/10 flex items-center justify-center flex-shrink-0",children:e.jsx(y,{className:"w-5 h-5 text-[var(--color-primary)]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("h4",{className:"text-sm font-medium text-white truncate",children:f.title})}),f.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:f.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-600",children:[e.jsx("span",{className:"px-2 py-0.5 bg-[#1A1A1A] rounded capitalize",children:f.achievement_type}),f.date_earned&&e.jsx("span",{children:f.date_earned})]})]})]},g)})})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-[#0A0A0A] via-[#0A0A0A] to-transparent z-50",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("button",{onClick:d,className:"w-full py-4 bg-[var(--color-primary)] hover:bg-[var(--color-accent)] text-white font-bold rounded-xl transition-all shadow-lg shadow-[var(--color-primary)]/20 flex items-center justify-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"Book with ",m.name?.split(" ")[0]]})})}),o&&e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/95 p-4",onClick:()=>c(null),children:[e.jsx("button",{onClick:()=>c(null),className:"absolute top-4 right-4 w-10 h-10 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded-full transition-colors",children:e.jsx("span",{className:"text-white text-2xl",children:""})}),e.jsx("img",{src:o.imageUrl,alt:o.caption||"Portfolio",className:"max-w-full max-h-[80vh] rounded-xl object-contain",onClick:f=>f.stopPropagation()}),o.caption&&e.jsx("div",{className:"absolute bottom-8 left-4 right-4 text-center",children:e.jsx("p",{className:"text-white text-sm bg-black/50 px-4 py-2 rounded-lg inline-block",children:o.caption})})]})]}):e.jsx("div",{className:"min-h-screen bg-[#0A0A0A] flex items-center justify-center",children:e.jsxs("div",{className:"animate-pulse space-y-4 text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-[#1A1A1A] mx-auto"}),e.jsx("div",{className:"h-6 bg-[#1A1A1A] rounded w-48 mx-auto"}),e.jsx("div",{className:"h-4 bg-[#1A1A1A] rounded w-32 mx-auto"})]})})},Wz=({barber:t,className:s="w-12 h-12"})=>{const[n,i]=C.useState(!1),c=(t.avatarStorageId?me(H.services.barbers.getImageUrl,{storageId:t.avatarStorageId}):null)||t.avatarUrl||"/img/avatar_default.jpg";return n||!c?e.jsx("div",{className:`flex items-center justify-center bg-gray-600 rounded-full ${s}`,children:e.jsx(tt,{className:"w-6 h-6 text-gray-300"})}):e.jsx("img",{src:c,alt:`${t.full_name||t.name} avatar`,className:`${s} rounded-full object-cover`,onError:()=>i(!0)})};function Kz(){const[t,s]=C.useState(null),[n,i]=C.useState(null),[o,c]=C.useState(null),[d,m]=C.useState(1),[h,p]=C.useState(""),[u,f]=C.useState(!1),[g,y]=C.useState(null),[b,j]=C.useState(null),[N,w]=C.useState(!0),[B,S]=C.useState(""),[_,k]=C.useState(""),[E,D]=C.useState(""),F=C.useRef(null),M=me(H.services.services.getActiveServices),P=me(H.services.barbers.getActiveBarbers),T=De(H.services.bookings.createWalkInBooking),L=me(H.services.bookings.getBookingById,g?._id?{id:g._id}:"skip"),X=new Date().toISOString().split("T")[0],Z=me(H.services.bookings.getBookingsByBarberAndDate,n&&X?{barberId:n._id,date:X}:"skip"),ne=M===void 0||P===void 0;C.useEffect(()=>{d===5&&w(!0)},[d]),C.useEffect(()=>{if(d===5&&g?._id&&L?.booking_code){console.log("Step 4 reached with booking ID:",g._id,"actual booking code:",L.booking_code);const R=(J=0)=>{if(F.current){console.log("Canvas found, generating QR code with actual booking data");const $=L,Y=JSON.stringify({bookingId:$._id,bookingCode:$.booking_code,service:t?.name,barber:n?.full_name||n?.name,date:X,time:formattedTime,barbershop:" Barbershop"});console.log("Generating QR with data:",Y),Cr.toCanvas(F.current,Y,{width:192,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},xe=>{xe?console.error("QR Code generation error:",xe):console.log("QR Code generated successfully with booking code:",$.booking_code),w(!1)})}else J<5?(console.log(`Canvas ref not available, retrying... (${J+1}/5)`),setTimeout(()=>R(J+1),200)):(console.error("Canvas ref still not available after 5 retries"),w(!1))},q=setTimeout(()=>R(),100);return()=>clearTimeout(q)}},[d,g?._id,L?.booking_code,t,n]);const I=fr.useMemo(()=>{if(!n)return[];const R=[],q=9,J=18,$=new Date,Y=$.getHours(),xe=$.getMinutes(),oe=Z?Z.filter(de=>de.status!=="cancelled").map(de=>de.time.substring(0,5)):[];for(let de=q;de<J;de++)for(let ve of[0,30]){const Me=`${de.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`,Ke=de===12?`12:${ve.toString().padStart(2,"0")} PM`:de>12?`${de-12}:${ve.toString().padStart(2,"0")} PM`:`${de}:${ve.toString().padStart(2,"0")} AM`;let pe=!0,be=null;oe.includes(Me)&&(pe=!1,be="booked"),(de<Y||de===Y&&ve<=xe)&&(pe=!1,be="past"),R.push({time:Me,displayTime:Ke,available:pe,reason:be})}return R},[n,Z]),O=()=>{if(!t||!P)return P||[];const R=P.filter(q=>q.services&&Array.isArray(q.services)&&q.services.some(J=>J===t._id));return console.log(`Found ${R.length} barbers for service ${t.name}`),R},G=R=>{const q=R?.toLowerCase()||"";return q.includes("haircut")||q.includes("cut")?e.jsx(ys,{className:"w-5 h-5 text-white"}):q.includes("beard")?e.jsx(Ni,{className:"w-5 h-5 text-white"}):q.includes("shave")?e.jsx(Do,{className:"w-5 h-5 text-white"}):q.includes("wash")?e.jsx(Ca,{className:"w-5 h-5 text-white"}):q.includes("package")||q.includes("complete")?e.jsx(Ja,{className:"w-5 h-5 text-white"}):e.jsx(Vt,{className:"w-5 h-5 text-white"})},te=async()=>{if(!t||!o||!n||!B.trim()){alert("Please fill in all required booking details including customer name");return}try{f(!0);const R=o.includes(":")?`${o}:00`:o,q={customer_name:B.trim(),customer_phone:_.trim()||void 0,customer_email:E.trim()||void 0,service:t._id,barber:n._id,branch_id:n.branch_id,date:X,time:R,status:"pending",notes:`Kiosk walk-in booking for ${t.name}`};console.log("Creating walk-in booking with data:",q);const $={_id:await T(q),booking_code:null,service:t,barber:n,date:X,time:R,status:"pending",customer_name:B,customer_phone:_,customer_email:E};y($),m(5)}catch(R){console.error("Error creating booking:",R),alert(R.message||"Failed to create booking. Please try again.")}finally{f(!1)}},Q=()=>{s(null),i(null),c(null),S(""),k(""),D(""),m(1),y(null),p(""),j(null)},ee=()=>{const R=window.open("","_blank");R.document.write(`
      <html>
        <head>
          <title> Barbershop - Booking QR Code</title>
          <style>
            body { 
              font-family: Arial, sans-serif; 
              text-align: center; 
              padding: 20px;
              margin: 0;
            }
            .header { 
              color: #36454F; 
              margin-bottom: 20px; 
            }
            .qr-container { 
              margin: 20px 0; 
            }
            .service-info { 
              background: #F0F8FF; 
              padding: 15px; 
              border-radius: 10px; 
              margin: 20px 0; 
              border: 1px solid #E0E0E0;
            }
            .footer { 
              color: #8B8B8B; 
              font-size: 12px; 
              margin-top: 30px; 
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1> Barbershop</h1>
            <h2>Booking Confirmation</h2>
          </div>
          <div class="service-info">
            <h3>Service: ${t?.name}</h3>
            <p>Price: ${t?.price}</p>
            <p>Barber: ${n?.full_name||n?.name}</p>
            <p>Date: ${new Date().toLocaleDateString()}</p>
            <p>Time: ${o}</p>
          </div>
          <div class="qr-container">
            <canvas ref="qrCanvas"></canvas>
          </div>
          <div class="footer">
            <p>Show this QR code at the kiosk to confirm your appointment</p>
            <p>Thank you for choosing  Barbershop!</p>
          </div>
        </body>
      </html>
    `),R.document.close(),R.print()},le=()=>e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center space-x-3",children:[1,2,3,4].map(R=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${d>=R?"text-white shadow-md":"text-gray-500"}`,style:{backgroundColor:d>=R?"var(--color-primary)":"#444444"},children:d>R?"":R}),R<4&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded transition-all duration-300",style:{backgroundColor:d>R?"var(--color-primary)":"#444444"}})]},R))})});return ne?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[var(--color-primary)] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-white",children:"Loading Services..."})]})}):b?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 bg-red-500/20",children:e.jsx(xs,{className:"w-8 h-8 text-red-400"})}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-400 mb-4",children:b}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 text-white font-bold rounded-xl transition-colors duration-200 bg-[var(--color-primary)] hover:brightness-90",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[d<5&&le(),d===1&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Service"}),e.jsx("p",{className:"text-gray-300",children:"Select the service you'd like to book"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:M&&M.map(R=>e.jsx("button",{onClick:()=>{s(R),i(null),c(null),m(2)},className:"group relative w-full bg-gradient-to-br from-[#1A1A1A]/50 to-[#2A2A2A]/50 rounded-xl p-4 border-2 border-[#444444]/50 hover:border-[var(--color-primary)]/50 transition-all duration-200 hover:scale-105",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-full w-12 h-12 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-200",children:G(R.name)})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"text-base font-bold text-white group-hover:text-[var(--color-primary)] transition-colors duration-200",children:R.name}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:R.description||"Professional grooming service"}),e.jsx("div",{className:"flex items-center space-x-4 mt-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Nt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-400",children:R.duration_minutes?`${R.duration_minutes} min`:"Duration varies"})]})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-xl px-3 py-2 bg-[var(--color-primary)]/20 border border-[var(--color-primary)]/30",children:e.jsxs("div",{className:"text-base font-bold text-[var(--color-primary)]",children:["",parseFloat(R.price||0).toLocaleString()]})})})]})},R._id))})]}),d===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-4 border border-[#444444]/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"rounded-full w-10 h-10 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] flex items-center justify-center",children:G(t?.name)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-bold text-white",children:t?.name}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsxs("span",{className:"font-bold text-[var(--color-primary)]",children:["",t?.price.toLocaleString()]}),e.jsxs("span",{className:"font-medium text-gray-400",children:[t?.duration_minutes," min"]})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Choose Your Barber"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O().length>0?O().map(R=>e.jsx("button",{onClick:()=>{i(R),c(null)},className:`p-4 rounded-xl border-2 transition-all duration-200 text-left hover:scale-105 ${n?._id===R._id?"border-[var(--color-primary)] bg-[var(--color-primary)]/10":"border-[#444444]/50 bg-[#1A1A1A]/50 hover:border-[var(--color-primary)]/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Wz,{barber:R,className:"w-12 h-12"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-white",children:R.full_name||R.name||"Professional Barber"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"flex text-yellow-400 text-xs",children:""}),e.jsx("span",{className:"text-xs text-gray-400",children:"5.0  Professional"})]})]}),n?._id===R._id&&e.jsx(Je,{className:"w-5 h-5 text-[var(--color-primary)]"})]})},R._id)):e.jsxs("div",{className:"col-span-2 text-center py-6",children:[e.jsx("p",{className:"text-[var(--color-primary)] font-medium",children:"No barbers available for this service"}),e.jsx("button",{onClick:()=>m(1),className:"mt-3 px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg hover:brightness-90 transition-colors",children:"Choose Different Service"})]})})]}),n&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Available Times"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Today - ",new Date().toLocaleDateString()]})]}),I.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-[var(--color-primary)] font-medium",children:"No available times today"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Please try again tomorrow"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3 mb-4",children:I.map(R=>e.jsx("button",{onClick:()=>R.available&&c(R.time),disabled:!R.available,className:`p-3 rounded-lg font-semibold text-center transition-all duration-200 border text-sm ${R.available?o===R.time?"bg-[var(--color-primary)] text-white border-[var(--color-primary)]":"bg-[#1A1A1A]/50 text-white border-[#444444]/50 hover:border-[var(--color-primary)]/50":"bg-gray-600/30 text-gray-500 border-gray-600/30 cursor-not-allowed"}`,title:R.available?`Book at ${R.displayTime}`:`${R.displayTime} - ${R.reason==="past"?"Past time":"Already booked"}`,children:R.displayTime},R.time))}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-[#1A1A1A]/50 border border-[#444444]/50"}),e.jsx("span",{className:"text-gray-400",children:"Available"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-[var(--color-primary)]"}),e.jsx("span",{className:"text-gray-400",children:"Selected"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-gray-600/30"}),e.jsx("span",{className:"text-gray-400",children:"Unavailable"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>m(1),className:"flex-1 py-3 px-4 border border-[#444444] text-gray-300 rounded-xl hover:bg-[#1A1A1A]/50 transition-all duration-200",children:" Back to Services"}),o&&n&&e.jsx("button",{onClick:()=>m(3),className:"flex-1 py-3 px-4 bg-[var(--color-primary)] text-white font-bold rounded-xl hover:brightness-90 transition-all duration-200",children:"Continue to Customer Info"})]})]}),d===3&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Customer Information"}),e.jsx("p",{className:"text-gray-300",children:"Please provide your contact details"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:B,onChange:R=>S(R.target.value),placeholder:"Enter your full name",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)] transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",value:_,onChange:R=>k(R.target.value),placeholder:"Enter your phone number",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)] transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address (Optional)"}),e.jsx("input",{type:"email",value:E,onChange:R=>D(R.target.value),placeholder:"Enter your email address",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)] transition-colors"})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>m(2),className:"flex-1 py-3 px-4 border border-[#444444] text-gray-300 rounded-xl hover:bg-[#1A1A1A]/50 transition-all duration-200",children:" Back to Time Selection"}),B.trim()&&e.jsx("button",{onClick:()=>m(4),className:"flex-1 py-3 px-4 bg-[var(--color-primary)] text-white font-bold rounded-xl hover:brightness-90 transition-all duration-200",children:"Continue to Confirmation"})]})]}),d===4&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Confirm Your Booking"}),e.jsx("p",{className:"text-gray-300",children:"Please review your appointment details"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Customer:"}),e.jsx("span",{className:"font-bold text-white",children:B})]}),_&&e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"}),e.jsx("span",{className:"font-bold text-white",children:_})]}),E&&e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("span",{className:"font-bold text-white",children:E})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Service:"}),e.jsx("span",{className:"font-bold text-white",children:t?.name})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Barber:"}),e.jsx("span",{className:"font-bold text-white",children:n?.full_name||n?.name})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Date:"}),e.jsxs("span",{className:"font-bold text-white",children:["Today - ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Time:"}),e.jsx("span",{className:"font-bold text-white",children:I.find(R=>R.time===o)?.displayTime})]}),e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("span",{className:"text-gray-400",children:"Price:"}),e.jsxs("span",{className:"font-bold text-[var(--color-primary)] text-xl",children:["",t?.price.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>m(3),className:"flex-1 py-3 px-4 border border-[#444444] text-gray-300 rounded-xl hover:bg-[#1A1A1A]/50 transition-all duration-200",children:" Back to Customer Info"}),e.jsx("button",{onClick:te,disabled:u,className:`flex-1 py-3 px-4 text-white font-bold rounded-xl transition-all duration-200 ${u?"bg-gray-600 cursor-not-allowed":"bg-[var(--color-primary)] hover:brightness-90"}`,children:u?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Ps,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Creating Booking..."})]}):"Confirm Booking"})]})]}),d===5&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-8 text-center border border-[#444444]/50",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl bg-green-500",children:e.jsx(Je,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold mb-2 text-white",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-lg mb-6 text-green-400",children:"Your appointment has been scheduled"}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-[#36454F]",children:"Your Booking QR Code"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-white rounded-2xl border-2 border-[#E0E0E0] shadow-sm",children:e.jsxs("div",{className:"relative w-48 h-48",children:[(N||!L?.booking_code)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-[var(--color-primary)] border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-[#8B8B8B]",children:L?.booking_code?"Generating QR Code...":"Loading booking details..."})]})}),e.jsx("canvas",{ref:F,className:"rounded-xl w-full h-full",style:{display:N||!L?.booking_code?"none":"block"}})]})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("div",{className:"text-lg font-bold text-[#36454F]",children:["Booking Code: ",L?.booking_code?L.booking_code:e.jsxs("span",{className:"inline-flex items-center space-x-2",children:[e.jsx("span",{children:"Generating..."}),e.jsx("div",{className:"animate-pulse w-2 h-2 bg-[var(--color-primary)] rounded-full"})]})]}),e.jsx("p",{className:"text-sm text-[#8B8B8B]",children:"Show this QR code when you arrive"})]})]}),e.jsx("div",{className:"bg-[var(--color-primary)]/10 border border-[var(--color-primary)]/30 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Customer:"}),e.jsx("span",{className:"font-bold text-white",children:B})]}),_&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Phone:"}),e.jsx("span",{className:"font-bold text-white",children:_})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Service:"}),e.jsx("span",{className:"font-bold text-white",children:t?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Barber:"}),e.jsx("span",{className:"font-bold text-white",children:n?.full_name||n?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Date & Time:"}),e.jsxs("span",{className:"font-bold text-white",children:["Today, ",I.find(R=>R.time===o)?.displayTime]})]}),e.jsxs("div",{className:"flex justify-between border-t border-[var(--color-primary)]/30 pt-3",children:[e.jsx("span",{className:"font-bold text-gray-300",children:"Total:"}),e.jsxs("span",{className:"font-bold text-[var(--color-primary)] text-xl",children:["",t?.price.toLocaleString()]})]})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:ee,className:"flex-1 py-3 px-4 bg-[#1A1A1A] border border-[#444444] text-white font-bold rounded-xl hover:bg-[#2A2A2A] transition-all duration-200",children:"Print QR Code"}),e.jsx("button",{onClick:Q,className:"flex-1 py-3 px-4 bg-[var(--color-primary)] text-white font-bold rounded-xl hover:brightness-90 transition-all duration-200",children:"Book Another Service"})]})]})]})}const Xz=()=>{const[t,s]=C.useState(!1),[n,i]=C.useState(!1),o=async()=>{try{return navigator.permissions?(await navigator.permissions.query({name:"camera"})).state==="granted":!0}catch(m){return console.log("Permissions API not available:",m),!0}},c=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?{video:{facingMode:{ideal:"environment"},width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:30,max:60},aspectRatio:{ideal:16/9}},audio:!1}:{video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:!1};return{cameraPermissionDenied:t,setCameraPermissionDenied:s,requestingPermission:n,setRequestingPermission:i,checkCameraPermissions:o,requestCameraPermission:async()=>{i(!0),s(!1);try{let m=null;try{m=await navigator.mediaDevices.getUserMedia(c())}catch(h){console.log("Optimal constraints failed, trying fallback:",h),m=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{min:320,ideal:640},height:{min:240,ideal:480}},audio:!1})}return m&&m.getTracks().forEach(h=>h.stop()),i(!1),!0}catch(m){return console.error("Camera permission denied:",m),i(!1),m.name==="NotAllowedError"||m.name==="PermissionDeniedError"?(s(!0),{error:"Camera access denied. Please allow camera permissions and refresh the page."}):m.name==="NotFoundError"?{error:"No camera found on this device."}:m.name==="OverconstrainedError"?{error:"Camera constraints not supported. Please try a different device."}:{error:"Camera access failed. Please check your device settings."}}}}},Zz=({onRetry:t})=>e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center text-white p-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#F44336"},children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Camera Access Required"}),e.jsx("p",{className:"text-sm mb-4 opacity-90",children:"This kiosk needs camera access to scan QR codes. Please:"}),e.jsxs("div",{className:"text-left text-sm mb-6 space-y-2 opacity-90",children:[e.jsx("p",{children:"1. Click the camera icon in your browser's address bar"}),e.jsx("p",{children:'2. Select "Allow" for camera access'}),e.jsx("p",{children:"3. Refresh this page"})]}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-white text-black font-bold rounded-xl transition-colors duration-200 hover:bg-gray-100",children:"Try Again"})]})}),eI=({requestingPermission:t})=>e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent rounded-full animate-spin mx-auto mb-3",style:{borderColor:"#F68B24",borderTopColor:"transparent"}}),e.jsx("p",{className:"text-lg font-medium",children:t?"Requesting Camera Access...":"Initializing Camera..."}),e.jsx("p",{className:"text-sm mt-2",style:{color:"#F68B24",opacity:.8},children:t?"Please allow camera access in the popup":"Please allow camera access"})]})}),tI=({onQRDetected:t,scannerError:s,setScannerError:n,showCamera:i,setShowCamera:o})=>{const c=C.useRef(null),d=C.useRef(null),{cameraPermissionDenied:m,setCameraPermissionDenied:h,requestingPermission:p,checkCameraPermissions:u,requestCameraPermission:f}=Xz(),g=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:"environment",maxScansPerSecond:3,calculateScanRegion:w=>{const B=Math.min(w.videoWidth,w.videoHeight),S=Math.floor(B*.6),_=Math.floor((w.videoWidth-S)/2),k=Math.floor((w.videoHeight-S)/2);return{x:_,y:k,width:S,height:S}}}:{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:"environment",maxScansPerSecond:5},y=async()=>{try{if(!c.current)return;if(!await u()){const B=await f();if(B?.error){n(B.error);return}}const w=c.current;w.setAttribute("playsinline","true"),w.setAttribute("webkit-playsinline","true"),w.setAttribute("muted","true"),w.setAttribute("autoplay","true"),w.style.touchAction="manipulation",d.current=new Fn(w,async B=>{console.log("QR Code detected:",B.data),navigator.vibrate&&navigator.vibrate(100),await t(B.data)},g()),await d.current.start(),o(!0),h(!1),n("")}catch(N){console.error("Error starting camera:",N),N.name==="NotAllowedError"||N.name==="PermissionDeniedError"?(h(!0),n("Camera access denied. Please allow camera permissions in your browser settings.")):N.name==="NotFoundError"?n("No camera found on this device."):N.name==="OverconstrainedError"?n("Camera settings not supported on this device. Please try a different browser."):n("Failed to start camera. Please refresh the page and try again.")}},b=()=>{d.current&&(d.current.stop(),d.current.destroy(),d.current=null),o(!1)};C.useEffect(()=>(y(),()=>{b()}),[]);const j=async()=>{h(!1),n(""),await y()};return e.jsxs("div",{className:"relative bg-black rounded-2xl overflow-hidden",style:{aspectRatio:"16/9"},children:[e.jsx("video",{ref:c,className:"w-full h-full object-cover",playsInline:!0,"webkit-playsinline":"true",muted:!0,autoPlay:!0,style:{touchAction:"manipulation",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"}}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-64 h-64 border-4 rounded-2xl relative",style:{borderColor:"#F68B24",opacity:.8},children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-6 h-6 border-t-4 border-l-4 rounded-tl-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 border-t-4 border-r-4 rounded-tr-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-6 h-6 border-b-4 border-l-4 rounded-bl-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 border-b-4 border-r-4 rounded-br-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:e.jsx("div",{className:"absolute w-full h-1 animate-pulse",style:{top:"50%",transform:"translateY(-50%)",background:"linear-gradient(to right, transparent, #F68B24, transparent)"}})})]}),e.jsx("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-white text-lg font-medium bg-black/50 px-4 py-2 rounded-full backdrop-blur-sm",children:"Position QR code within frame"})})]})}),!i&&!m&&e.jsx(eI,{requestingPermission:p}),m&&e.jsx(Zz,{onRetry:j})]})]})},sI=({scannedBooking:t,onDone:s,onValidateAndConfirm:n,isProcessingBooking:i})=>{if(console.log("BookingDetails rendering with:",t),!t)return null;const o=d=>{switch(d){case"confirmed":return"text-green-700 bg-green-100 border-green-200";case"pending":return"text-yellow-700 bg-yellow-100 border-yellow-200";case"completed":return"text-blue-700 bg-blue-100 border-blue-200";case"cancelled":return"text-red-700 bg-red-100 border-red-200";case"scanned":return"text-blue-700 bg-blue-100 border-blue-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}},c=d=>{switch(d){case"confirmed":case"pending":return e.jsx(Je,{className:"w-5 h-5 text-green-600"});case"completed":return e.jsx(Je,{className:"w-5 h-5 text-blue-600"});case"cancelled":case"invalid":return e.jsx(xs,{className:"w-5 h-5 text-red-600"});case"scanned":return e.jsx(rr,{className:"w-5 h-5 text-blue-600"});default:return e.jsx(xs,{className:"w-5 h-5 text-gray-600"})}};return e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:c(t.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-black text-white font-mono",children:t.id}),e.jsx("span",{className:`px-3 py-1 text-sm font-bold rounded-full border-2 uppercase ${o(t.status)}`,children:t.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Customer:"}),e.jsx("p",{className:"text-white font-semibold",children:t.customer})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(rr,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Service:"}),e.jsx("p",{className:"text-white font-semibold",children:t.service?.name})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(rt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Date & Time:"}),e.jsxs("p",{className:"text-white font-semibold",children:[t.date," at ",t.time]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(tt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Staff:"}),e.jsx("p",{className:"text-white font-semibold",children:t.barber?.name})]})]})]})]}),t.phone!=="N/A"&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-[#444444]/50",children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Phone:"}),e.jsx("p",{className:"text-white font-semibold",children:t.phone})]}),t.status==="confirmed"&&e.jsx("div",{className:"mt-4 p-3 bg-green-500/20 border border-green-500/50 rounded-xl",children:e.jsx("p",{className:"text-green-300 font-bold text-sm",children:" Booking confirmed - Ready for service!"})}),t.status==="scanned"&&e.jsx("div",{className:"mt-4 p-3 bg-blue-500/20 border border-blue-500/50 rounded-xl",children:e.jsx("p",{className:"text-blue-300 font-bold text-sm",children:" QR Code scanned - Please confirm your booking"})}),t.status==="pending"&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-xl",children:e.jsx("p",{className:"text-yellow-800 font-bold text-sm",children:" Confirming booking..."})}),t.status==="completed"&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-xl",children:e.jsx("p",{className:"text-gray-800 font-bold text-sm",children:" This booking has already been completed"})}),t.status==="cancelled"&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-red-800 font-bold text-sm",children:" This booking has been cancelled"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.status==="scanned"&&e.jsx("button",{onClick:n,disabled:i,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-green-600 text-white font-bold rounded-xl transition-all duration-200 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Confirming..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-5 h-5"}),e.jsx("span",{children:"Confirm Booking"})]})}),e.jsxs("button",{onClick:s,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-[#1A1A1A] border border-[#444444] text-white font-bold rounded-xl transition-all duration-200 hover:bg-[#2A2A2A] hover:border-[var(--color-primary)]/50 shadow-lg",children:[e.jsx(xs,{className:"w-5 h-5"}),e.jsx("span",{children:"Done"})]})]})]})})};function rI(){const[t,s]=C.useState("home"),[n,i]=C.useState(""),[o,c]=C.useState(""),[d,m]=C.useState(""),[h,p]=C.useState(!1),[u,f]=C.useState(!1),[g,y]=C.useState(null),[b,j]=C.useState(!1),[N,w]=C.useState(""),[B,S]=C.useState(!1),_=De(H.services.bookings.updateBooking);C.useEffect(()=>{(async()=>{try{const P=await Cr.toDataURL("https://tpx-booking-app.vercel.app/download",{width:200,margin:1,color:{dark:"#36454F",light:"#FFFFFF"}});m(P)}catch(M){console.error("Error generating app download QR:",M)}})()},[]);const k=F=>{s(F),F==="home"&&(y(null),w(""),j(!1),S(!1))},E=async()=>{if(!g||!g.id){w("No booking to validate.");return}try{S(!0),w(""),await _({id:g.id,status:"confirmed"}),console.log("Booking confirmed successfully");const F={...g,status:"confirmed"};y(F),w("")}catch(F){console.error("Error confirming booking:",F),w("Failed to confirm booking. Please try again.")}finally{S(!1)}},D=async F=>{console.log("Kiosk QR Data:",F),j(!0),w("");try{let M=null;if(F.startsWith("{"))try{M=JSON.parse(F),console.log("Parsed booking data:",M)}catch{w("Invalid QR code format."),j(!1);return}else{w("Invalid QR code format. Expected JSON data."),j(!1);return}if(!M.bookingId){w("Missing booking ID in QR code."),j(!1);return}const P={id:M.bookingId,booking_code:M.bookingCode||"N/A",customer:"Customer",service:{name:M.service||"N/A"},date:M.date||"N/A",time:M.time||"N/A",barber:{name:M.barber||"N/A"},status:"scanned",phone:"N/A",barbershop:M.barbershop||"N/A"};console.log("Setting scannedBooking:",P),y(P),j(!1),console.log("Scanner loading set to false")}catch(M){console.error("Error processing booking QR code:",M),w("Failed to process booking QR code. Please try again."),j(!1)}};return e.jsx(WA,{branchCode:new URLSearchParams(window.location.search).get("branch")||void 0,children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[e.jsx("style",{children:`
        /* Tablet optimizations */
        @media screen and (min-width: 768px) and (max-width: 1024px) {
          .kiosk-container {
            padding: 2rem;
            max-width: 90vw;
          }
          .camera-container {
            aspect-ratio: 16/10;
            max-height: 50vh;
          }
          .action-cards {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          }
        }
        
        /* Mobile optimizations */
        @media screen and (max-width: 767px) {
          .kiosk-container {
            padding: 1rem;
          }
          .camera-container {
            aspect-ratio: 4/3;
            max-height: 60vh;
          }
        }
        
        /* Prevent zoom and improve touch */
        input, select, textarea {
          font-size: 16px !important;
        }
        
        .mobile-optimized {
          -webkit-user-select: none;
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: transparent;
        }
        
        /* Dark mode scrollbar */
        ::-webkit-scrollbar {
          width: 8px;
        }
        ::-webkit-scrollbar-track {
          background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
          background: #4b5563;
          border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
          background: #6b7280;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 bg-gradient-to-r from-[#2A2A2A] to-[#333333] shadow-lg border-b border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-primary)]/80 shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg md:text-xl",children:"T"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:" Barbershop"}),e.jsx("div",{className:"bg-[var(--color-primary)]/20 rounded-full px-2 py-0.5 border border-[var(--color-primary)]/30",children:e.jsx("span",{className:"text-xs font-semibold text-[var(--color-primary)]",children:"v8.1.2"})})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-300",children:"Self-Service Kiosk"})]})]}),e.jsx(Js,{to:"/login",className:"px-3 py-2 md:px-4 md:py-2 text-white rounded-xl transition-all duration-200 flex items-center space-x-2 text-sm md:text-base bg-[#1A1A1A] border border-[#444444] hover:bg-[#2A2A2A] hover:border-[var(--color-primary)]/50",children:e.jsx("span",{children:"Back to Login"})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto kiosk-container mobile-optimized",children:[t==="home"&&e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-white",children:"Live Camera Feed"}),e.jsx("p",{className:"text-base md:text-lg text-gray-300",children:"Point your camera at a QR code to scan automatically"})]}),e.jsx("div",{className:"relative camera-container",style:{minHeight:"300px"},children:e.jsx(tI,{onQRDetected:D,scannerError:N,setScannerError:w,showCamera:u,setShowCamera:f})}),B&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(Ps,{className:"w-6 h-6 text-[var(--color-primary)] animate-spin"}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Processing booking..."})]})}),N&&e.jsx("div",{className:"bg-red-500/20 border-2 border-red-500/50 rounded-2xl p-4 mt-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xs,{className:"w-6 h-6 text-red-400"}),e.jsx("p",{className:"text-red-300 font-bold",children:N})]})})]}),g&&e.jsx(sI,{scannedBooking:g,onDone:()=>{y(null),w(""),j(!1),S(!1)},onValidateAndConfirm:E,isProcessingBooking:B}),e.jsxs("div",{className:"grid md:grid-cols-2 xl:grid-cols-3 gap-6 action-cards",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50 transition-all duration-300 hover:scale-105 hover:border-[var(--color-primary)]/50",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-gradient-to-r from-green-500/20 to-green-600/20 border-2 border-green-500/50",children:e.jsx(rr,{className:"w-8 h-8 text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Scan Your Booking QR"}),e.jsx("p",{className:"text-gray-300",children:"Point the camera above at your booking QR code to confirm your appointment"})]}),b&&e.jsx("div",{className:"rounded-lg p-4 bg-green-500/20 border border-green-500/50",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-green-400 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"font-medium text-green-400",children:"Validating Booking..."})]})}),N&&e.jsx("div",{className:"rounded-lg p-4 bg-red-500/20 border border-red-500/50",children:e.jsx("p",{className:"text-red-300 text-sm font-medium text-center",children:N})}),!b&&!N&&e.jsxs("div",{className:"rounded-lg p-4 bg-[#1A1A1A]/50 border border-[#444444]/50",children:[e.jsx("h4",{className:"font-medium mb-2 text-white",children:"Instructions:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-left text-gray-300",children:[e.jsx("li",{children:" Hold your device steady"}),e.jsx("li",{children:" Ensure good lighting"}),e.jsx("li",{children:" Keep QR code within the camera frame above"}),e.jsx("li",{children:" Wait for automatic detection"})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50 transition-all duration-300 hover:scale-105 hover:border-[var(--color-primary)]/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-primary)]/80 shadow-lg",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),e.jsx("h2",{className:"text-xl font-bold mb-3 text-white",children:"Download Our App"}),e.jsx("p",{className:"mb-4 text-base text-gray-300",children:"Get exclusive vouchers and loyalty rewards"}),e.jsx("div",{className:"rounded-xl p-3 mb-4 mx-auto w-fit bg-[#1A1A1A]/50 border border-[#444444]/50",children:e.jsx("div",{className:"w-24 h-24 rounded-lg flex items-center justify-center overflow-hidden bg-white",children:d?e.jsx("img",{src:d,alt:"Download App QR Code",className:"w-full h-full object-contain"}):e.jsx("div",{className:"text-xs text-center text-gray-500",children:"Loading..."})})}),e.jsx("p",{className:"text-sm text-gray-300",children:"Scan to download and unlock exclusive offers!"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50 transition-all duration-300 hover:scale-105 hover:border-[var(--color-primary)]/50 md:col-span-2 xl:col-span-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-primary)]/80 shadow-lg",children:e.jsx(rr,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-xl font-bold mb-3 text-white",children:"Book Appointment"}),e.jsx("p",{className:"mb-4 text-base text-gray-300",children:"Schedule your service and get a QR confirmation"}),e.jsx("button",{onClick:()=>k("generate"),className:"w-full py-3 text-white font-bold rounded-xl transition-all duration-200 text-base shadow-lg bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-primary)]/80 hover:from-[var(--color-primary)]/90 hover:to-[var(--color-primary)]/70 transform hover:scale-105",children:"Book Now"})]})})]})]}),t==="generate"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Book & Generate QR"}),e.jsx("button",{onClick:()=>k("home"),className:"px-4 py-2 text-white rounded-xl transition-all duration-200 flex items-center space-x-2 bg-[#1A1A1A] border border-[#444444] hover:bg-[#2A2A2A] hover:border-[var(--color-primary)]/50",children:e.jsx("span",{children:" Back"})})]}),e.jsx(Kz,{})]})]})]})})}const aI=()=>{const t=Ws(),[s]=mm(),[n,i]=C.useState(null),[o,c]=C.useState(!1),d=De(H.services.payments.updatePaymentStatus);me(H.services.payments.getPaymentByRequestId,n?.paymentId?{paymentRequestId:n.paymentId}:"skip"),C.useEffect(()=>{const p=s.get("payment_request_id"),u=s.get("reference_id"),f=s.get("status");p&&i({paymentId:p,referenceId:u,status:f})},[s]),C.useEffect(()=>{(async()=>{if(n?.paymentId&&n?.status==="COMPLETED"&&!o)try{console.log("Updating payment status for successful payment:",n.paymentId),await d({payment_request_id:n.paymentId,status:"SUCCEEDED",metadata:{source:"payment_success_page",timestamp:new Date().toISOString()}}),c(!0),console.log("Payment status updated successfully")}catch(u){console.error("Error updating payment status:",u)}})()},[n,d,o]);const m=()=>{t("/customer/dashboard")},h=()=>{t("/customer/dashboard?section=bookings")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-xl border border-[#444444]/50 p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(Je,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Your booking payment has been processed successfully."}),n&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Payment ID:"}),e.jsxs("span",{className:"text-white font-mono text-xs",children:[n.paymentId?.substring(0,20),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Reference:"}),e.jsx("span",{className:"text-white font-mono text-xs",children:n.referenceId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:"text-green-400 font-semibold",children:n.status||"COMPLETED"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Booking Status:"}),e.jsx("span",{className:`font-semibold ${o?"text-green-400":"text-yellow-400"}`,children:o?"Updated":"Updating..."})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:h,className:"w-full py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white font-semibold rounded-xl hover:from-[var(--color-accent)] hover:brightness-110 transition-all duration-200 shadow-lg flex items-center justify-center space-x-2",children:[e.jsx(rt,{className:"w-5 h-5"}),e.jsx("span",{children:"View My Bookings"})]}),e.jsxs("button",{onClick:m,className:"w-full py-3 border border-[#555555] text-gray-300 font-semibold rounded-xl hover:bg-[#444444] transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"You will receive a confirmation email shortly."})})]})})},nI=()=>{const t=Ws(),[s]=mm(),[n,i]=C.useState(null);C.useEffect(()=>{const d=s.get("payment_request_id"),m=s.get("reference_id"),h=s.get("status"),p=s.get("failure_reason");d&&i({paymentId:d,referenceId:m,status:h,failureReason:p})},[s]);const o=()=>{t("/customer/dashboard")},c=()=>{t("/customer/dashboard?section=booking")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-xl border border-[#444444]/50 p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(xs,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"We couldn't process your payment. Please try again or use a different payment method."}),n&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Payment ID:"}),e.jsxs("span",{className:"text-white font-mono text-xs",children:[n.paymentId?.substring(0,20),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Reference:"}),e.jsx("span",{className:"text-white font-mono text-xs",children:n.referenceId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:"text-red-400 font-semibold",children:n.status||"FAILED"})]}),n.failureReason&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Reason:"}),e.jsx("span",{className:"text-red-400 text-xs",children:n.failureReason})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Common Issues"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[e.jsx("li",{children:" Insufficient balance in your e-wallet"}),e.jsx("li",{children:" Network connection issues"}),e.jsx("li",{children:" Payment method temporarily unavailable"}),e.jsx("li",{children:" Transaction timeout"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:c,className:"w-full py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white font-semibold rounded-xl hover:from-[var(--color-accent)] hover:brightness-110 transition-all duration-200 shadow-lg flex items-center justify-center space-x-2",children:[e.jsx(Ps,{className:"w-5 h-5"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:o,className:"w-full py-3 border border-[#555555] text-gray-300 font-semibold rounded-xl hover:bg-[#444444] transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(vs,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Need help? Contact our support team."})})]})})},iI=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-200",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-10",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Privacy Policy"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Effective date: ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-6 bg-gray-800/60 rounded-2xl p-6 border border-gray-700/50",children:[e.jsx("p",{children:"This Privacy Policy describes how we collect, use, and protect your personal information when you use our services. By using our website and application, you consent to the data practices described in this policy."}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Information We Collect"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Account details such as name, email, and mobile number."}),e.jsx("li",{children:"Booking information and transaction history."}),e.jsx("li",{children:"Authentication data from third parties when you choose social login (e.g., Facebook name and profile image URL)."}),e.jsx("li",{children:"Technical data for security and analytics (IP address, device, and usage)."})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"How We Use Your Information"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Provide and improve booking and account features."}),e.jsx("li",{children:"Send service notifications, booking confirmations, and updates."}),e.jsx("li",{children:"Maintain platform security and prevent fraud."})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Data Sharing"}),e.jsx("p",{children:"We do not sell your personal data. We may share limited data with processors (e.g., payment, analytics, hosting) under strict agreements and only as necessary to operate the service."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Your Rights"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Access, update, or correct your information."}),e.jsx("li",{children:"Request deletion of your account and associated personal data."}),e.jsx("li",{children:"Withdraw consent for optional processing."})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Contact"}),e.jsxs("p",{children:["For privacy requests, contact us at ",e.jsx("span",{className:"text-orange-400",children:"fcvndo@fcv.com"})," or visit the"," ",e.jsx(Js,{to:"/account-deletion",className:"text-orange-400 hover:text-orange-300",children:"Account Deletion"})," ","page."]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Js,{to:"/",className:"text-orange-400 hover:text-orange-300",children:"Back to Home"})})]})}),oI=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-200",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-10",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Account Deletion"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Request deletion of your account and personal data"})]}),e.jsxs("div",{className:"space-y-6 bg-gray-800/60 rounded-2xl p-6 border border-gray-700/50",children:[e.jsx("p",{children:"You can permanently delete your account and associated personal data from our systems. This action is irreversible. Once we process your request, you will lose access to bookings, vouchers, and saved preferences."}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"How to Request Deletion"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-300",children:[e.jsx("li",{children:"Make sure you are signed in to the account you wish to delete."}),e.jsxs("li",{children:["Send an email to ",e.jsx("span",{className:"text-orange-400",children:"privacy@tpx-barbershop.example"}),' with the subject "Account Deletion Request".']}),e.jsx("li",{children:"Include your registered email address and a brief confirmation that you want the account deleted."})]}),e.jsx("p",{className:"mt-3 text-gray-400 text-sm",children:"We will verify your identity and process deletion within 714 business days."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"What Will Be Deleted"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Profile data (name, email, phone, avatar)."}),e.jsx("li",{children:"Authentication tokens and sessions."}),e.jsx("li",{children:"Booking history and voucher associations, where applicable."})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Certain records may be retained as required by law (e.g., financial records)."})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Js,{to:"/",className:"text-orange-400 hover:text-orange-300",children:"Back to Home"})})]})});class m0{constructor(s=0,n="Network Error"){this.status=s,this.text=n}}const lI=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,s)=>Promise.resolve(localStorage.setItem(t,s)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},lr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:lI()},hb=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},cI=(t,s="https://api.emailjs.com")=>{if(!t)return;const n=hb(t);lr.publicKey=n.publicKey,lr.blockHeadless=n.blockHeadless,lr.storageProvider=n.storageProvider,lr.blockList=n.blockList,lr.limitRate=n.limitRate,lr.origin=n.origin||s},_9=async(t,s,n={})=>{const i=await fetch(lr.origin+t,{method:"POST",headers:n,body:s}),o=await i.text(),c=new m0(i.status,o);if(i.ok)return c;throw c},B9=(t,s,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!s||typeof s!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},dI=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},S9=t=>t.webdriver||!t.languages||t.languages.length===0,D9=()=>new m0(451,"Unavailable For Headless Browser"),xI=(t,s)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof s!="string")throw"The BlockList watchVariable has to be a string"},uI=t=>!t.list?.length||!t.watchVariable,mI=(t,s)=>t instanceof FormData?t.get(s):t[s],F9=(t,s)=>{if(uI(t))return!1;xI(t.list,t.watchVariable);const n=mI(s,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},P9=()=>new m0(403,"Forbidden"),hI=(t,s)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(s&&typeof s!="string")throw"The LimitRate ID has to be a non-empty string"},pI=async(t,s,n)=>{const i=Number(await n.get(t)||0);return s-Date.now()+i},T9=async(t,s,n)=>{if(!s.throttle||!n)return!1;hI(s.throttle,s.id);const i=s.id||t;return await pI(i,s.throttle,n)>0?!0:(await n.set(i,Date.now().toString()),!1)},O9=()=>new m0(429,"Too Many Requests"),fI=async(t,s,n,i)=>{const o=hb(i),c=o.publicKey||lr.publicKey,d=o.blockHeadless||lr.blockHeadless,m=o.storageProvider||lr.storageProvider,h={...lr.blockList,...o.blockList},p={...lr.limitRate,...o.limitRate};return d&&S9(navigator)?Promise.reject(D9()):(B9(c,t,s),dI(n),n&&F9(h,n)?Promise.reject(P9()):await T9(location.pathname,p,m)?Promise.reject(O9()):_9("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:c,service_id:t,template_id:s,template_params:n}),{"Content-type":"application/json"}))},gI=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},bI=t=>typeof t=="string"?document.querySelector(t):t,vI=async(t,s,n,i)=>{const o=hb(i),c=o.publicKey||lr.publicKey,d=o.blockHeadless||lr.blockHeadless,m=lr.storageProvider||o.storageProvider,h={...lr.blockList,...o.blockList},p={...lr.limitRate,...o.limitRate};if(d&&S9(navigator))return Promise.reject(D9());const u=bI(n);B9(c,t,s),gI(u);const f=new FormData(u);return F9(h,f)?Promise.reject(P9()):await T9(location.pathname,p,m)?Promise.reject(O9()):(f.append("lib_version","4.4.1"),f.append("service_id",t),f.append("template_id",s),f.append("user_id",c),_9("/api/v1.0/email/send-form",f))},M9={init:cI,send:fI,sendForm:vI,EmailJSResponseStatus:m0},yI="service_bczerea",jI="template_qqctchj",NI="rIfJ3j9HQe8hynx_3";M9.init(NI);const R9=()=>!0,pb=async t=>{try{console.log(" Sending email via EmailJS:",{to:t.to,subject:t.subject,hasHtml:!!t.html_content}),R9();const s={to_email:t.to,to_name:t.to_name||t.to,subject:t.subject,html_content:t.html_content,text_content:t.text_content||t.html_content?.replace(/<[^>]*>/g,"")||"",company_name:"TPX Barber",current_year:new Date().getFullYear()};console.log(" EmailJS template params:",{...s,html_content:s.html_content?"HTML_CONTENT_PROVIDED":"NO_HTML"});const n=await M9.send(yI,jI,s);return console.log(" Email sent successfully via EmailJS:",n),{success:!0,data:n}}catch(s){return console.error(" EmailJS sending failed:",s),{success:!1,error:s.message||"Failed to send email",details:s}}},z9=async t=>pb({to:t,to_name:"Test User",subject:" TPX Barber - Test Email",html_content:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%); padding: 30px; text-align: center; border-radius: 10px;">
          <h1 style="color: white; margin: 0;"> Test Email</h1>
          <p style="color: white; margin: 10px 0 0;">Your EmailJS integration is working!</p>
        </div>
        <div style="padding: 30px 20px; background: #1a1a1a; border-radius: 0 0 10px 10px;">
          <p style="color: #e5e5e5; margin: 0 0 20px;">Hello!</p>
          <p style="color: #e5e5e5; margin: 0 0 20px;">
            This test email confirms your TPX Barber email system is properly configured with EmailJS.
          </p>
          <p style="color: #e5e5e5; margin: 0;">
            If you received this email, everything is working correctly! 
          </p>
        </div>
      </div>
    `,text_content:"Test email from TPX Barber. Your EmailJS integration is working!"}),wI=async({campaignData:t,recipients:s,onProgress:n})=>{const i={total:s.length,sent:0,failed:0,errors:[]};console.log(` Starting EmailJS campaign: ${t.name} to ${s.length} recipients`);for(let o=0;o<s.length;o++){const c=s[o];try{const d=await pb({to:c.email,to_name:c.username||c.email,subject:t.subject,html_content:t.html_content,text_content:t.text_content});d.success?(i.sent++,console.log(` Email sent to: ${c.email}`)):(i.failed++,i.errors.push({email:c.email,error:d.error}),console.error(` Failed to send to: ${c.email}`,d.error))}catch(d){i.failed++,i.errors.push({email:c.email,error:d.message}),console.error(` Error sending to: ${c.email}`,d)}n&&n({current:o+1,total:s.length,sent:i.sent,failed:i.failed,percentage:Math.round((o+1)/s.length*100)}),o<s.length-1&&await new Promise(d=>setTimeout(d,100))}return console.log(` EmailJS Campaign completed. Sent: ${i.sent}, Failed: ${i.failed}`),i},UA=Object.freeze(Object.defineProperty({__proto__:null,isEmailServiceConfigured:R9,sendCampaignEmails:wI,sendEmailViaEmailJS:pb,sendTestEmail:z9},Symbol.toStringTag,{value:"Module"})),AI=()=>{const[t,s]=C.useState(""),[n,i]=C.useState(!1),[o,c]=C.useState(null),d=async()=>{if(!t||!t.includes("@")){alert("Please enter a valid email address");return}i(!0),c(null);try{console.log(" Testing email to:",t);const m=await z9(t);c(m),m.success?console.log(" Test email sent successfully!"):console.error(" Test email failed:",m.error)}catch(m){console.error(" Test email error:",m),c({success:!1,error:m.message||"Unknown error occurred"})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0A0A0A] to-[#1A1A1A]",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx(Js,{to:"/staff/dashboard",className:"p-2 bg-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#3A3A3A] transition-colors",children:e.jsx(vs,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Email Configuration Test"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Debug and test your Resend email integration"})]})]}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-6 rounded-xl border border-[#444444]/50",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Current Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"EmailJS Service ID"}),e.jsx("div",{className:"text-white font-mono text-sm",children:`${"service_bczerea".substring(0,8)}...`})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"EmailJS Template ID"}),e.jsx("div",{className:"text-white font-mono text-sm",children:`${"template_qqctchj".substring(0,8)}...`})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"EmailJS Public Key"}),e.jsx("div",{className:"text-white font-mono text-sm",children:`${"rIfJ3j9HQe8hynx_3".substring(0,8)}...`})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Service Status"}),e.jsx("div",{className:"text-green-400 font-mono text-sm",children:" EmailJS (No Restrictions)"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-6 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-[var(--color-primary)] to-[var(--color-accent)] rounded-lg",children:e.jsx(Ht,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Send Test Email"}),e.jsx("p",{className:"text-gray-400",children:"Verify your Resend integration is working"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Test Email Address"}),e.jsx("input",{type:"email",value:t,onChange:m=>s(m.target.value),placeholder:"your.email@example.com",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)] transition-colors",disabled:n}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:" EmailJS can send to any email address - no restrictions!"})]}),e.jsx("button",{onClick:d,disabled:n||!t,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-accent)] text-white rounded-lg hover:from-[var(--color-accent)] hover:brightness-110 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:n?e.jsxs(e.Fragment,{children:[e.jsx(So,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Sending Test Email..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qx,{className:"w-5 h-5"}),e.jsx("span",{children:"Send Test Email"})]})})]})]}),o&&e.jsx("div",{className:`p-6 rounded-xl border ${o.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[o.success?e.jsx(Je,{className:"w-8 h-8 text-green-400 flex-shrink-0 mt-1"}):e.jsx(Xe,{className:"w-8 h-8 text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-lg font-semibold ${o.success?"text-green-400":"text-red-400"}`,children:o.success?"Test Email Sent Successfully!":"Test Email Failed"}),o.success?e.jsxs("div",{className:"text-green-300 mt-2 space-y-1",children:[e.jsxs("p",{children:[" Email sent to: ",e.jsx("span",{className:"font-mono",children:t})]}),e.jsx("p",{children:" Resend integration is working correctly"}),o.data?.id&&e.jsxs("p",{className:"text-sm text-green-400",children:["Email ID: ",e.jsx("span",{className:"font-mono",children:o.data.id})]})]}):e.jsxs("div",{className:"text-red-300 mt-2",children:[e.jsxs("p",{className:"font-medium",children:[" Error: ",o.error]}),e.jsxs("div",{className:"text-sm text-red-400 mt-3 bg-red-900/20 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"Common troubleshooting steps:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Verify VITE_RESEND_API_KEY is correct in .env.local"}),e.jsx("li",{children:"Ensure from email domain is verified in Resend dashboard"}),e.jsx("li",{children:"Check if you've exceeded rate limits"}),e.jsx("li",{children:"Verify network connectivity"}),e.jsx("li",{children:"Check browser console for detailed errors"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-[#1A1A1A] p-6 rounded-xl border border-[#444444]/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Debug Information"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Environment:"}),e.jsx("span",{className:"text-white",children:"production"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"EmailJS Service:"}),e.jsx("span",{className:"text-white font-mono",children:"Client-side sending"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Browser Console:"}),e.jsx("span",{className:"text-white",children:"Check for detailed logs"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Restrictions:"}),e.jsx("span",{className:"text-green-400",children:"None - send to any email!"})]})]})]})]})]})})};var Ku={exports:{}},CI=Ku.exports,VA;function EI(){return VA||(VA=1,function(t,s){(function(n,i){i()})(CI,function(){function n(p,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p}function i(p,u,f){var g=new XMLHttpRequest;g.open("GET",p),g.responseType="blob",g.onload=function(){h(g.response,u,f)},g.onerror=function(){console.error("could not download file")},g.send()}function o(p){var u=new XMLHttpRequest;u.open("HEAD",p,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function c(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(u)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof yu=="object"&&yu.global===yu?yu:void 0,m=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(p,u,f){var g=d.URL||d.webkitURL,y=document.createElement("a");u=u||p.name||"download",y.download=u,y.rel="noopener",typeof p=="string"?(y.href=p,y.origin===location.origin?c(y):o(y.href)?i(p,u,f):c(y,y.target="_blank")):(y.href=g.createObjectURL(p),setTimeout(function(){g.revokeObjectURL(y.href)},4e4),setTimeout(function(){c(y)},0))}:"msSaveOrOpenBlob"in navigator?function(p,u,f){if(u=u||p.name||"download",typeof p!="string")navigator.msSaveOrOpenBlob(n(p,f),u);else if(o(p))i(p,u,f);else{var g=document.createElement("a");g.href=p,g.target="_blank",setTimeout(function(){c(g)})}}:function(p,u,f,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof p=="string")return i(p,u,f);var y=p.type==="application/octet-stream",b=/constructor/i.test(d.HTMLElement)||d.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||y&&b||m)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var S=N.result;S=j?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=S:location=S,g=null},N.readAsDataURL(p)}else{var w=d.URL||d.webkitURL,B=w.createObjectURL(p);g?g.location=B:location.href=B,g=null,setTimeout(function(){w.revokeObjectURL(B)},4e4)}});d.saveAs=h.saveAs=h,t.exports=h})}(Ku)),Ku.exports}var kI=EI();let _I={data:""},BI=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||_I,SI=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,DI=/\/\*[^]*?\*\/|  +/g,HA=/\n+/g,Sn=(t,s)=>{let n="",i="",o="";for(let c in t){let d=t[c];c[0]=="@"?c[1]=="i"?n=c+" "+d+";":i+=c[1]=="f"?Sn(d,c):c+"{"+Sn(d,c[1]=="k"?"":s)+"}":typeof d=="object"?i+=Sn(d,s?s.replace(/([^,])+/g,m=>c.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,m):m?m+" "+h:h)):c):d!=null&&(c=/^--/.test(c)?c:c.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Sn.p?Sn.p(c,d):c+":"+d+";")}return n+(s&&o?s+"{"+o+"}":o)+i},Ha={},I9=t=>{if(typeof t=="object"){let s="";for(let n in t)s+=n+I9(t[n]);return s}return t},FI=(t,s,n,i,o)=>{let c=I9(t),d=Ha[c]||(Ha[c]=(h=>{let p=0,u=11;for(;p<h.length;)u=101*u+h.charCodeAt(p++)>>>0;return"go"+u})(c));if(!Ha[d]){let h=c!==t?t:(p=>{let u,f,g=[{}];for(;u=SI.exec(p.replace(DI,""));)u[4]?g.shift():u[3]?(f=u[3].replace(HA," ").trim(),g.unshift(g[0][f]=g[0][f]||{})):g[0][u[1]]=u[2].replace(HA," ").trim();return g[0]})(t);Ha[d]=Sn(o?{["@keyframes "+d]:h}:h,n?"":"."+d)}let m=n&&Ha.g?Ha.g:null;return n&&(Ha.g=Ha[d]),((h,p,u,f)=>{f?p.data=p.data.replace(f,h):p.data.indexOf(h)===-1&&(p.data=u?h+p.data:p.data+h)})(Ha[d],s,i,m),d},PI=(t,s,n)=>t.reduce((i,o,c)=>{let d=s[c];if(d&&d.call){let m=d(n),h=m&&m.props&&m.props.className||/^go/.test(m)&&m;d=h?"."+h:m&&typeof m=="object"?m.props?"":Sn(m,""):m===!1?"":m}return i+o+(d??"")},"");function Bm(t){let s=this||{},n=t.call?t(s.p):t;return FI(n.unshift?n.raw?PI(n,[].slice.call(arguments,1),s.p):n.reduce((i,o)=>Object.assign(i,o&&o.call?o(s.p):o),{}):n,BI(s.target),s.g,s.o,s.k)}let L9,hg,pg;Bm.bind({g:1});let Ka=Bm.bind({k:1});function TI(t,s,n,i){Sn.p=s,L9=t,hg=n,pg=i}function Ln(t,s){let n=this||{};return function(){let i=arguments;function o(c,d){let m=Object.assign({},c),h=m.className||o.className;n.p=Object.assign({theme:hg&&hg()},m),n.o=/ *go\d+/.test(h),m.className=Bm.apply(n,i)+(h?" "+h:"");let p=t;return t[0]&&(p=m.as||t,delete m.as),pg&&p[0]&&pg(m),L9(p,m)}return o}}var OI=t=>typeof t=="function",fg=(t,s)=>OI(t)?t(s):t,MI=(()=>{let t=0;return()=>(++t).toString()})(),RI=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),zI=20,q9="default",$9=(t,s)=>{let{toastLimit:n}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(d=>d.id===s.toast.id?{...d,...s.toast}:d)};case 2:let{toast:i}=s;return $9(t,{type:t.toasts.find(d=>d.id===i.id)?1:0,toast:i});case 3:let{toastId:o}=s;return{...t,toasts:t.toasts.map(d=>d.id===o||o===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(d=>d.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let c=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+c}))}}},II=[],LI={toasts:[],pausedAt:void 0,settings:{toastLimit:zI}},ko={},U9=(t,s=q9)=>{ko[s]=$9(ko[s]||LI,t),II.forEach(([n,i])=>{n===s&&i(ko[s])})},V9=t=>Object.keys(ko).forEach(s=>U9(t,s)),qI=t=>Object.keys(ko).find(s=>ko[s].toasts.some(n=>n.id===t)),fb=(t=q9)=>s=>{U9(s,t)},$I=(t,s="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||MI()}),h0=t=>(s,n)=>{let i=$I(s,t,n);return fb(i.toasterId||qI(i.id))({type:2,toast:i}),i.id},_s=(t,s)=>h0("blank")(t,s);_s.error=h0("error");_s.success=h0("success");_s.loading=h0("loading");_s.custom=h0("custom");_s.dismiss=(t,s)=>{let n={type:3,toastId:t};s?fb(s)(n):V9(n)};_s.dismissAll=t=>_s.dismiss(void 0,t);_s.remove=(t,s)=>{let n={type:4,toastId:t};s?fb(s)(n):V9(n)};_s.removeAll=t=>_s.remove(void 0,t);_s.promise=(t,s,n)=>{let i=_s.loading(s.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(o=>{let c=s.success?fg(s.success,o):void 0;return c?_s.success(c,{id:i,...n,...n?.success}):_s.dismiss(i),o}).catch(o=>{let c=s.error?fg(s.error,o):void 0;c?_s.error(c,{id:i,...n,...n?.error}):_s.dismiss(i)}),t};var UI=Ka`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,VI=Ka`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HI=Ka`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,JI=Ln("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${UI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${VI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${HI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,GI=Ka`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,YI=Ln("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${GI} 1s linear infinite;
`,QI=Ka`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,WI=Ka`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,KI=Ln("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${QI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${WI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,XI=Ln("div")`
  position: absolute;
`,ZI=Ln("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,eL=Ka`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tL=Ln("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${eL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,sL=({toast:t})=>{let{icon:s,type:n,iconTheme:i}=t;return s!==void 0?typeof s=="string"?C.createElement(tL,null,s):s:n==="blank"?null:C.createElement(ZI,null,C.createElement(YI,{...i}),n!=="loading"&&C.createElement(XI,null,n==="error"?C.createElement(JI,{...i}):C.createElement(KI,{...i})))},rL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,aL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,nL="0%{opacity:0;} 100%{opacity:1;}",iL="0%{opacity:1;} 100%{opacity:0;}",oL=Ln("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,lL=Ln("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,cL=(t,s)=>{let n=t.includes("top")?1:-1,[i,o]=RI()?[nL,iL]:[rL(n),aL(n)];return{animation:s?`${Ka(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ka(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};C.memo(({toast:t,position:s,style:n,children:i})=>{let o=t.height?cL(t.position||s||"top-center",t.visible):{opacity:0},c=C.createElement(sL,{toast:t}),d=C.createElement(lL,{...t.ariaProps},fg(t.message,t));return C.createElement(oL,{className:t.className,style:{...o,...n,...t.style}},typeof i=="function"?i({icon:c,message:d}):C.createElement(C.Fragment,null,c,d))});TI(C.createElement);Bm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;class dL{constructor(){this.downloadQueue=[],this.activeDownloads=new Map}async downloadAPK(s={}){const{onProgress:n=()=>{},onComplete:i=()=>{},onError:o=()=>{},fileName:c="tipuo-app.apk",showToasts:d=!0}=s;try{const h=`${window.location.origin}/apk/tipuo-app.apk`;d&&_s.loading("Preparing download...",{id:"apk-download"});const p=await fetch(h);if(!p.ok)throw new Error(`HTTP error! status: ${p.status}`);const u=p.headers.get("content-length"),f=u?parseInt(u,10):0;let g=0;const y=p.body.getReader(),b=[];for(;;){const{done:B,value:S}=await y.read();if(B)break;if(b.push(S),g+=S.length,f>0){const _=Math.round(g/f*100);n(_)}}const j=new Blob(b,{type:"application/vnd.android.package-archive"}),w=`TPX-Barbershop-${new Date().toISOString().replace(/[:.]/g,"-")}.apk`;kI.saveAs(j,w),d&&_s.success("Download completed successfully!",{id:"apk-download"}),i()}catch(m){throw console.error("Download failed:",m),d&&_s.error("Download failed. Please try again.",{id:"apk-download"}),o(m),m}}directDownload(s="tipuo-app.apk"){try{const i=`${window.location.origin}/apk/tipuo-app.apk`,o=document.createElement("a");o.href=i,o.download=s,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),_s.success("Download started!")}catch(n){console.error("Direct download failed:",n),_s.error("Download failed. Please try again.")}}async checkAPKAvailability(){try{const n=`${window.location.origin}/apk/tipuo-app.apk`;return(await fetch(n,{method:"HEAD"})).ok}catch(s){return console.error("APK availability check failed:",s),!1}}async getAPKSize(){try{const n=`${window.location.origin}/apk/tipuo-app.apk`,i=await fetch(n,{method:"HEAD"});if(i.ok){const o=i.headers.get("content-length");return o?parseInt(o,10):0}return 0}catch(s){return console.error("Failed to get APK size:",s),0}}formatFileSize(s){if(s===0)return"0 Bytes";const n=1024,i=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(n));return parseFloat((s/Math.pow(n,o)).toFixed(2))+" "+i[o]}simulateDownload(s,n=3e3){return new Promise(i=>{const o=Date.now(),c=setInterval(()=>{const d=Date.now()-o,m=Math.min(100,d/n*100);s(Math.round(m)),m>=100&&(clearInterval(c),i())},100)})}queueDownloads(s){s.forEach((n,i)=>{this.downloadAPK({...n,showToasts:!1,onComplete:()=>{_s.success(`Download ${i+1} completed!`)}})})}cancelDownload(s){this.activeDownloads.has(s)&&(this.activeDownloads.get(s).abort(),this.activeDownloads.delete(s),_s.info("Download cancelled"))}getStats(){return{activeDownloads:this.activeDownloads.size,queuedDownloads:this.downloadQueue.length,totalDownloads:this.activeDownloads.size+this.downloadQueue.length}}}const xL=new dL,uL=()=>{const t=Ws(),[s,n]=C.useState(0),[i,o]=C.useState(!1),[c,d]=C.useState(!1),m=async()=>{try{o(!0),n(0),d(!1),await xL.downloadAPK({onProgress:h=>{n(h)},onComplete:()=>{o(!1),d(!0)},onError:h=>{o(!1),console.error("Download failed:",h)}})}catch(h){o(!1),console.error("Download failed:",h)}};return e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:'url("/landing/4.webp")'}}),e.jsx("div",{className:"absolute inset-0 bg-gray-900/90"}),e.jsxs("div",{className:"relative z-10 flex flex-col min-h-screen",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[e.jsxs(Js,{to:"/",className:"flex items-center space-x-3",children:[e.jsx("img",{src:"",alt:"Barbershop",className:"w-8 h-8 object-contain"}),e.jsx("span",{className:"text-white font-bold text-lg",children:"Barbershop"})]}),e.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(vs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]})]})}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-12",children:e.jsxs("div",{className:"max-w-2xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex justify-center items-center gap-8 mb-6",children:e.jsx("img",{src:"",alt:"Barbershop",className:"w-60 h-24 object-contain"})}),e.jsx("div",{className:"inline-flex items-center gap-2 bg-orange-600/20 border border-orange-500/30 text-orange-400 px-3 py-1 rounded-full text-sm font-medium mb-4",children:"Android App"}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Download Barbershop"}),e.jsx("p",{className:"text-gray-400 text-lg max-w-md mx-auto",children:"Book appointments, get AI recommendations, and manage your loyalty points"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-8 border border-gray-700 shadow-xl",children:[e.jsx("button",{onClick:m,disabled:i||c,className:"w-full bg-orange-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-orange-700 transition-all duration-200 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed mb-6",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Downloading... ",Math.round(s),"%"]}):c?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-6 h-6"}),"Download Complete"]}):e.jsxs(e.Fragment,{children:[e.jsx(ka,{className:"w-6 h-6"}),"Download APK (11.2 MB)"]})}),i&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"4.9"}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center justify-center",children:[e.jsx(Vt,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),"Rating"]})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:"10K+"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Downloads"})]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"text-white font-semibold text-lg mb-4",children:"App Features"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600/20 rounded-lg flex items-center justify-center",children:e.jsx(rt,{className:"w-4 h-4 text-orange-400"})}),e.jsx("span",{className:"text-gray-300",children:"Easy appointment booking"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600/20 rounded-lg flex items-center justify-center",children:e.jsx(Ca,{className:"w-4 h-4 text-orange-400"})}),e.jsx("span",{className:"text-gray-300",children:"AI style recommendations"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600/20 rounded-lg flex items-center justify-center",children:e.jsx(hs,{className:"w-4 h-4 text-orange-400"})}),e.jsx("span",{className:"text-gray-300",children:"Loyalty rewards program"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600/20 rounded-lg flex items-center justify-center",children:e.jsx(ys,{className:"w-4 h-4 text-orange-400"})}),e.jsx("span",{className:"text-gray-300",children:"Service history tracking"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Requirements"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"w-4 h-4 text-orange-400"}),"Android 6.0 or higher"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"w-4 h-4 text-orange-400"}),"50MB storage space"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hr,{className:"w-4 h-4 text-orange-400"}),"Internet connection for setup"]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-gray-700/30 rounded-xl border border-gray-600",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ni,{className:"w-5 h-5 text-orange-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:"100% Secure"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Scanned for viruses and malware"})]})]})})]}),e.jsx("div",{className:"text-center mt-8 text-gray-500 text-sm",children:"Version 1.0  Compatible with Android 6.0+"})]})})]})]})};class mL extends fr.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){console.error("ErrorBoundary caught an error:",s,n),this.setState({error:s,errorInfo:n})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:e.jsxs("div",{className:"text-center text-white p-8 max-w-md mx-auto",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 bg-red-500/20 border-2 border-red-500/50",children:e.jsx("svg",{className:"w-10 h-10 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"System Error"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Something went wrong with the application. Please try refreshing the page or contact support if the problem persists."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 bg-[var(--color-primary)] text-white font-bold rounded-xl transition-all duration-200 hover:brightness-90 shadow-lg",children:"Reload Application"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"w-full px-6 py-3 bg-[#1A1A1A] border border-[#444444] text-white font-bold rounded-xl transition-all duration-200 hover:bg-[#2A2A2A] hover:border-[var(--color-primary)]/50",children:"Try Again"})]}),!1]})}):this.props.children}}const hL=()=>{if(typeof window>"u")return{isNativeApp:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isDesktop:!1,isWebView:!1};const t=navigator.userAgent||navigator.vendor||window.opera,s=typeof window.Capacitor<"u",n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t),i=/Android/i.test(t),o=/iPhone|iPad|iPod/i.test(t),c=!n,d=s||n&&/; wv\)|Instagram|FBAN|FBAV|Twitter/i.test(t);return{isNativeApp:s,isMobile:n,isAndroid:i,isIOS:o,isDesktop:c,isWebView:d}},pL=()=>hL().isNativeApp?"/auth/login":"/";function fL(){const t=pL();return e.jsx(i6,{children:e.jsx(WD,{children:e.jsx(WA,{children:e.jsx(HC,{children:e.jsx("div",{className:"min-h-screen bg-[var(--color-bg)]",children:e.jsxs(JC,{children:[e.jsx(Xt,{path:"/",element:t==="/auth/login"?e.jsx(Rr,{to:"/auth/login",replace:!0}):e.jsx(dj,{})}),e.jsx(Xt,{path:"/landing",element:e.jsx(dj,{})}),e.jsx(Xt,{path:"/guest/booking",element:e.jsx(zz,{})}),e.jsx(Xt,{path:"/barbers",element:e.jsx(Yz,{})}),e.jsx(Xt,{path:"/barbers/:barberId",element:e.jsx(Qz,{})}),e.jsx(Xt,{path:"/platform-selection",element:e.jsx(rF,{})}),e.jsx(Xt,{path:"/privacy",element:e.jsx(iI,{})}),e.jsx(Xt,{path:"/account-deletion",element:e.jsx(oI,{})}),e.jsx(Xt,{path:"/email-test",element:e.jsx(AI,{})}),e.jsx(Xt,{path:"/auth/login",element:e.jsx(ku,{children:e.jsx(aF,{})})}),e.jsx(Xt,{path:"/auth/forgot-password",element:e.jsx(ku,{children:e.jsx(iF,{})})}),e.jsx(Xt,{path:"/auth/reset-password",element:e.jsx(ku,{children:e.jsx(oF,{})})}),e.jsx(Xt,{path:"/auth/facebook/callback",element:e.jsx(lF,{})}),e.jsx(Xt,{path:"/auth/register",element:e.jsx(ku,{children:e.jsx(nF,{})})}),e.jsx(Xt,{path:"/admin",element:e.jsx(Rr,{to:"/admin/dashboard",replace:!0})}),e.jsx(Xt,{path:"/admin/dashboard",element:e.jsx(Ua,{requireSuperAdmin:!0,children:e.jsx(xz,{})})}),e.jsx(Xt,{path:"/staff",element:e.jsx(Rr,{to:"/staff/dashboard",replace:!0})}),e.jsx(Xt,{path:"/staff/dashboard",element:e.jsx(Ua,{requireStaff:!0,children:e.jsx(ST,{})})}),e.jsx(Xt,{path:"/staff/pos",element:e.jsx(Ua,{requireStaff:!0,requirePageAccess:"pos",children:e.jsx(HR,{})})}),e.jsx(Xt,{path:"/barber",element:e.jsx(Rr,{to:"/barber/home",replace:!0})}),e.jsx(Xt,{path:"/barber/:tab",element:e.jsx(Ua,{requireBarber:!0,children:e.jsx(Gz,{})})}),e.jsx(Xt,{path:"/customer/dashboard",element:e.jsx(Ua,{children:e.jsx(LA,{})})}),e.jsx(Xt,{path:"/customer/booking",element:e.jsx(Ua,{children:e.jsx(Rz,{})})}),e.jsx(Xt,{path:"/customer/client",element:e.jsx(Ua,{children:e.jsx(LA,{})})}),e.jsx(Xt,{path:"/customer/wallet",element:e.jsx(Ua,{children:e.jsx(Iz,{})})}),e.jsx(Xt,{path:"/customer/wallet/topup",element:e.jsx(Ua,{children:e.jsx(Lz,{})})}),e.jsx(Xt,{path:"/kiosk",element:e.jsx(mL,{children:e.jsx(rI,{})})}),e.jsx(Xt,{path:"/booking/payment/success",element:e.jsx(aI,{})}),e.jsx(Xt,{path:"/booking/payment/failure",element:e.jsx(nI,{})}),e.jsx(Xt,{path:"/download-app",element:e.jsx(uL,{})})]})})})})})})}const gL=new WC("https://sincere-capybara-890.convex.cloud");a6.createRoot(document.getElementById("root")).render(e.jsx(C.StrictMode,{children:e.jsx(KC,{client:gL,children:e.jsx(fL,{})})}));
