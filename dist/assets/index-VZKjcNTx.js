(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const x of c)if(x.type==="childList")for(const u of x.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function l(c){const x={};return c.integrity&&(x.integrity=c.integrity),c.referrerPolicy&&(x.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?x.credentials="include":c.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function i(c){if(c.ep)return;c.ep=!0;const x=l(c);fetch(c.href,x)}})();var So=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hd={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff;function G4(){if(ff)return Gl;ff=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(i,c,x){var u=null;if(x!==void 0&&(u=""+x),c.key!==void 0&&(u=""+c.key),"key"in c){x={};for(var g in c)g!=="key"&&(x[g]=c[g])}else x=c;return c=x.ref,{$$typeof:n,type:i,key:u,ref:c!==void 0?c:null,props:x}}return Gl.Fragment=r,Gl.jsx=l,Gl.jsxs=l,Gl}var gf;function X4(){return gf||(gf=1,hd.exports=G4()),hd.exports}var e=X4(),fd={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf;function K4(){if(pf)return Ke;pf=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),u=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),p=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=p&&T[p]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,w={};function D(T,H,oe){this.props=T,this.context=H,this.refs=w,this.updater=oe||N}D.prototype.isReactComponent={},D.prototype.setState=function(T,H){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,H,"setState")},D.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function C(){}C.prototype=D.prototype;function L(T,H,oe){this.props=T,this.context=H,this.refs=w,this.updater=oe||N}var A=L.prototype=new C;A.constructor=L,j(A,D.prototype),A.isPureReactComponent=!0;var _=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function M(T,H,oe,W,le,K){return oe=K.ref,{$$typeof:n,type:T,key:H,ref:oe!==void 0?oe:null,props:K}}function E(T,H){return M(T.type,H,void 0,void 0,void 0,T.props)}function S(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function $(T){var H={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(oe){return H[oe]})}var P=/\/+/g;function q(T,H){return typeof T=="object"&&T!==null&&T.key!=null?$(""+T.key):H.toString(36)}function z(){}function V(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(z,z):(T.status="pending",T.then(function(H){T.status==="pending"&&(T.status="fulfilled",T.value=H)},function(H){T.status==="pending"&&(T.status="rejected",T.reason=H)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Z(T,H,oe,W,le){var K=typeof T;(K==="undefined"||K==="boolean")&&(T=null);var Y=!1;if(T===null)Y=!0;else switch(K){case"bigint":case"string":case"number":Y=!0;break;case"object":switch(T.$$typeof){case n:case r:Y=!0;break;case b:return Y=T._init,Z(Y(T._payload),H,oe,W,le)}}if(Y)return le=le(T),Y=W===""?"."+q(T,0):W,_(le)?(oe="",Y!=null&&(oe=Y.replace(P,"$&/")+"/"),Z(le,H,oe,"",function(ye){return ye})):le!=null&&(S(le)&&(le=E(le,oe+(le.key==null||T&&T.key===le.key?"":(""+le.key).replace(P,"$&/")+"/")+Y)),H.push(le)),1;Y=0;var ge=W===""?".":W+":";if(_(T))for(var pe=0;pe<T.length;pe++)W=T[pe],K=ge+q(W,pe),Y+=Z(W,H,oe,K,le);else if(pe=y(T),typeof pe=="function")for(T=pe.call(T),pe=0;!(W=T.next()).done;)W=W.value,K=ge+q(W,pe++),Y+=Z(W,H,oe,K,le);else if(K==="object"){if(typeof T.then=="function")return Z(V(T),H,oe,W,le);throw H=String(T),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Y}function B(T,H,oe){if(T==null)return T;var W=[],le=0;return Z(T,W,"","",function(K){return H.call(oe,K,le++)}),W}function k(T){if(T._status===-1){var H=T._result;H=H(),H.then(function(oe){(T._status===0||T._status===-1)&&(T._status=1,T._result=oe)},function(oe){(T._status===0||T._status===-1)&&(T._status=2,T._result=oe)}),T._status===-1&&(T._status=0,T._result=H)}if(T._status===1)return T._result.default;throw T._result}var I=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function se(){}return Ke.Children={map:B,forEach:function(T,H,oe){B(T,function(){H.apply(this,arguments)},oe)},count:function(T){var H=0;return B(T,function(){H++}),H},toArray:function(T){return B(T,function(H){return H})||[]},only:function(T){if(!S(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Ke.Component=D,Ke.Fragment=l,Ke.Profiler=c,Ke.PureComponent=L,Ke.StrictMode=i,Ke.Suspense=m,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(T){return O.H.useMemoCache(T)}},Ke.cache=function(T){return function(){return T.apply(null,arguments)}},Ke.cloneElement=function(T,H,oe){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var W=j({},T.props),le=T.key,K=void 0;if(H!=null)for(Y in H.ref!==void 0&&(K=void 0),H.key!==void 0&&(le=""+H.key),H)!U.call(H,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&H.ref===void 0||(W[Y]=H[Y]);var Y=arguments.length-2;if(Y===1)W.children=oe;else if(1<Y){for(var ge=Array(Y),pe=0;pe<Y;pe++)ge[pe]=arguments[pe+2];W.children=ge}return M(T.type,le,void 0,void 0,K,W)},Ke.createContext=function(T){return T={$$typeof:u,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:x,_context:T},T},Ke.createElement=function(T,H,oe){var W,le={},K=null;if(H!=null)for(W in H.key!==void 0&&(K=""+H.key),H)U.call(H,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(le[W]=H[W]);var Y=arguments.length-2;if(Y===1)le.children=oe;else if(1<Y){for(var ge=Array(Y),pe=0;pe<Y;pe++)ge[pe]=arguments[pe+2];le.children=ge}if(T&&T.defaultProps)for(W in Y=T.defaultProps,Y)le[W]===void 0&&(le[W]=Y[W]);return M(T,K,void 0,void 0,null,le)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(T){return{$$typeof:g,render:T}},Ke.isValidElement=S,Ke.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:k}},Ke.memo=function(T,H){return{$$typeof:f,type:T,compare:H===void 0?null:H}},Ke.startTransition=function(T){var H=O.T,oe={};O.T=oe;try{var W=T(),le=O.S;le!==null&&le(oe,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(se,I)}catch(K){I(K)}finally{O.T=H}},Ke.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ke.use=function(T){return O.H.use(T)},Ke.useActionState=function(T,H,oe){return O.H.useActionState(T,H,oe)},Ke.useCallback=function(T,H){return O.H.useCallback(T,H)},Ke.useContext=function(T){return O.H.useContext(T)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(T,H){return O.H.useDeferredValue(T,H)},Ke.useEffect=function(T,H,oe){var W=O.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(T,H)},Ke.useId=function(){return O.H.useId()},Ke.useImperativeHandle=function(T,H,oe){return O.H.useImperativeHandle(T,H,oe)},Ke.useInsertionEffect=function(T,H){return O.H.useInsertionEffect(T,H)},Ke.useLayoutEffect=function(T,H){return O.H.useLayoutEffect(T,H)},Ke.useMemo=function(T,H){return O.H.useMemo(T,H)},Ke.useOptimistic=function(T,H){return O.H.useOptimistic(T,H)},Ke.useReducer=function(T,H,oe){return O.H.useReducer(T,H,oe)},Ke.useRef=function(T){return O.H.useRef(T)},Ke.useState=function(T){return O.H.useState(T)},Ke.useSyncExternalStore=function(T,H,oe){return O.H.useSyncExternalStore(T,H,oe)},Ke.useTransition=function(){return O.H.useTransition()},Ke.version="19.1.1",Ke}var bf;function p0(){return bf||(bf=1,fd.exports=K4()),fd.exports}var v=p0();const ma=g0(v);var gd={exports:{}},Xl={},pd={exports:{}},bd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf;function Z4(){return yf||(yf=1,function(n){function r(B,k){var I=B.length;B.push(k);e:for(;0<I;){var se=I-1>>>1,T=B[se];if(0<c(T,k))B[se]=k,B[I]=T,I=se;else break e}}function l(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var k=B[0],I=B.pop();if(I!==k){B[0]=I;e:for(var se=0,T=B.length,H=T>>>1;se<H;){var oe=2*(se+1)-1,W=B[oe],le=oe+1,K=B[le];if(0>c(W,I))le<T&&0>c(K,W)?(B[se]=K,B[le]=I,se=le):(B[se]=W,B[oe]=I,se=oe);else if(le<T&&0>c(K,I))B[se]=K,B[le]=I,se=le;else break e}}return k}function c(B,k){var I=B.sortIndex-k.sortIndex;return I!==0?I:B.id-k.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;n.unstable_now=function(){return x.now()}}else{var u=Date,g=u.now();n.unstable_now=function(){return u.now()-g}}var m=[],f=[],b=1,p=null,y=3,N=!1,j=!1,w=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function _(B){for(var k=l(f);k!==null;){if(k.callback===null)i(f);else if(k.startTime<=B)i(f),k.sortIndex=k.expirationTime,r(m,k);else break;k=l(f)}}function O(B){if(w=!1,_(B),!j)if(l(m)!==null)j=!0,U||(U=!0,q());else{var k=l(f);k!==null&&Z(O,k.startTime-B)}}var U=!1,M=-1,E=5,S=-1;function $(){return D?!0:!(n.unstable_now()-S<E)}function P(){if(D=!1,U){var B=n.unstable_now();S=B;var k=!0;try{e:{j=!1,w&&(w=!1,L(M),M=-1),N=!0;var I=y;try{t:{for(_(B),p=l(m);p!==null&&!(p.expirationTime>B&&$());){var se=p.callback;if(typeof se=="function"){p.callback=null,y=p.priorityLevel;var T=se(p.expirationTime<=B);if(B=n.unstable_now(),typeof T=="function"){p.callback=T,_(B),k=!0;break t}p===l(m)&&i(m),_(B)}else i(m);p=l(m)}if(p!==null)k=!0;else{var H=l(f);H!==null&&Z(O,H.startTime-B),k=!1}}break e}finally{p=null,y=I,N=!1}k=void 0}}finally{k?q():U=!1}}}var q;if(typeof A=="function")q=function(){A(P)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,V=z.port2;z.port1.onmessage=P,q=function(){V.postMessage(null)}}else q=function(){C(P,0)};function Z(B,k){M=C(function(){B(n.unstable_now())},k)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(B){switch(y){case 1:case 2:case 3:var k=3;break;default:k=y}var I=y;y=k;try{return B()}finally{y=I}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(B,k){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var I=y;y=B;try{return k()}finally{y=I}},n.unstable_scheduleCallback=function(B,k,I){var se=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?se+I:se):I=se,B){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=I+T,B={id:b++,callback:k,priorityLevel:B,startTime:I,expirationTime:T,sortIndex:-1},I>se?(B.sortIndex=I,r(f,B),l(m)===null&&B===l(f)&&(w?(L(M),M=-1):w=!0,Z(O,I-se))):(B.sortIndex=T,r(m,B),j||N||(j=!0,U||(U=!0,q()))),B},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(B){var k=y;return function(){var I=y;y=k;try{return B.apply(this,arguments)}finally{y=I}}}}(bd)),bd}var vf;function J4(){return vf||(vf=1,pd.exports=Z4()),pd.exports}var yd={exports:{}},fs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf;function W4(){if(jf)return fs;jf=1;var n=p0();function r(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)f+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},c=Symbol.for("react.portal");function x(m,f,b){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:p==null?null:""+p,children:m,containerInfo:f,implementation:b}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return fs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,fs.createPortal=function(m,f){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(r(299));return x(m,f,null,b)},fs.flushSync=function(m){var f=u.T,b=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=f,i.p=b,i.d.f()}},fs.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(m,f))},fs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},fs.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var b=f.as,p=g(b,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,N=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;b==="style"?i.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:N}):b==="script"&&i.d.X(m,{crossOrigin:p,integrity:y,fetchPriority:N,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},fs.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var b=g(f.as,f.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(m)},fs.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var b=f.as,p=g(b,f.crossOrigin);i.d.L(m,b,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},fs.preloadModule=function(m,f){if(typeof m=="string")if(f){var b=g(f.as,f.crossOrigin);i.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(m)},fs.requestFormReset=function(m){i.d.r(m)},fs.unstable_batchedUpdates=function(m,f){return m(f)},fs.useFormState=function(m,f,b){return u.H.useFormState(m,f,b)},fs.useFormStatus=function(){return u.H.useHostTransitionStatus()},fs.version="19.1.1",fs}var Nf;function Dg(){if(Nf)return yd.exports;Nf=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),yd.exports=W4(),yd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf;function e2(){if(wf)return Xl;wf=1;var n=J4(),r=p0(),l=Dg();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(x(t)!==t)throw Error(i(188))}function m(t){var s=t.alternate;if(!s){if(s=x(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,o=s;;){var d=a.return;if(d===null)break;var h=d.alternate;if(h===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===a)return g(d),t;if(h===o)return g(d),s;h=h.sibling}throw Error(i(188))}if(a.return!==o.return)a=d,o=h;else{for(var F=!1,R=d.child;R;){if(R===a){F=!0,a=d,o=h;break}if(R===o){F=!0,o=d,a=h;break}R=R.sibling}if(!F){for(R=h.child;R;){if(R===a){F=!0,a=h,o=d;break}if(R===o){F=!0,o=h,a=d;break}R=R.sibling}if(!F)throw Error(i(189))}}if(a.alternate!==o)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function f(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=f(t),s!==null)return s;t=t.sibling}return null}var b=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),A=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var z=Symbol.for("react.client.reference");function V(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case D:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case U:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case A:return(t.displayName||"Context")+".Provider";case L:return(t._context.displayName||"Context")+".Consumer";case _:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return s=t.displayName||null,s!==null?s:V(t.type)||"Memo";case E:s=t._payload,t=t._init;try{return V(t(s))}catch{}}return null}var Z=Array.isArray,B=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},se=[],T=-1;function H(t){return{current:t}}function oe(t){0>T||(t.current=se[T],se[T]=null,T--)}function W(t,s){T++,se[T]=t.current,t.current=s}var le=H(null),K=H(null),Y=H(null),ge=H(null);function pe(t,s){switch(W(Y,s),W(K,t),W(le,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?$h(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=$h(s),t=Ih(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(le),W(le,t)}function ye(){oe(le),oe(K),oe(Y)}function Ae(t){t.memoizedState!==null&&W(ge,t);var s=le.current,a=Ih(s,t.type);s!==a&&(W(K,t),W(le,a))}function Te(t){K.current===t&&(oe(le),oe(K)),ge.current===t&&(oe(ge),Il._currentValue=I)}var Ge=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,Xe=n.unstable_shouldYield,pt=n.unstable_requestPaint,it=n.unstable_now,xe=n.unstable_getCurrentPriorityLevel,Fe=n.unstable_ImmediatePriority,ae=n.unstable_UserBlockingPriority,G=n.unstable_NormalPriority,me=n.unstable_LowPriority,Ce=n.unstable_IdlePriority,ee=n.log,_e=n.unstable_setDisableYieldValue,Ue=null,Ie=null;function Nt(t){if(typeof ee=="function"&&_e(t),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(Ue,t)}catch{}}var xt=Math.clz32?Math.clz32:_s,zt=Math.log,wt=Math.LN2;function _s(t){return t>>>=0,t===0?32:31-(zt(t)/wt|0)|0}var ot=256,vs=4194304;function js(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function la(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var d=0,h=t.suspendedLanes,F=t.pingedLanes;t=t.warmLanes;var R=o&134217727;return R!==0?(o=R&~h,o!==0?d=js(o):(F&=R,F!==0?d=js(F):a||(a=R&~t,a!==0&&(d=js(a))))):(R=o&~h,R!==0?d=js(R):F!==0?d=js(F):a||(a=o&~t,a!==0&&(d=js(a)))),d===0?0:s!==0&&s!==d&&(s&h)===0&&(h=d&-d,a=s&-s,h>=a||h===32&&(a&4194048)!==0)?s:d}function Q(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function he(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ke(){var t=ot;return ot<<=1,(ot&4194048)===0&&(ot=256),t}function ze(){var t=vs;return vs<<=1,(vs&62914560)===0&&(vs=4194304),t}function Pe(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function At(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function We(t,s,a,o,d,h){var F=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var R=t.entanglements,X=t.expirationTimes,ie=t.hiddenUpdates;for(a=F&~a;0<a;){var be=31-xt(a),je=1<<be;R[be]=0,X[be]=-1;var ce=ie[be];if(ce!==null)for(ie[be]=null,be=0;be<ce.length;be++){var ue=ce[be];ue!==null&&(ue.lane&=-536870913)}a&=~je}o!==0&&us(t,o,0),h!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=h&~(F&~s))}function us(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-xt(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function Da(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-xt(a),d=1<<o;d&s|t[o]&s&&(t[o]|=s),a&=~d}}function Jn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Wn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function el(){var t=k.p;return t!==0?t:(t=window.event,t===void 0?32:cf(t.type))}function nc(t,s){var a=k.p;try{return k.p=t,s()}finally{k.p=a}}var ga=Math.random().toString(36).slice(2),Wt="__reactFiber$"+ga,ms="__reactProps$"+ga,er="__reactContainer$"+ga,tl="__reactEvents$"+ga,lc="__reactListeners$"+ga,ic="__reactHandles$"+ga,yi="__reactResources$"+ga,Rr="__reactMarker$"+ga;function de(t){delete t[Wt],delete t[ms],delete t[tl],delete t[lc],delete t[ic]}function Ne(t){var s=t[Wt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[er]||a[Wt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Yh(t);t!==null;){if(a=t[Wt])return a;t=Yh(t)}return s}t=a,a=t.parentNode}return null}function De(t){if(t=t[Wt]||t[er]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function Be(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Oe(t){var s=t[yi];return s||(s=t[yi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ve(t){t[Rr]=!0}var mt=new Set,Ns={};function Ts(t,s){pa(t,s),pa(t+"Capture",s)}function pa(t,s){for(Ns[t]=s,t=0;t<s.length;t++)mt.add(s[t])}var Ms=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tr={},M0={};function qp(t){return Ge.call(M0,t)?!0:Ge.call(tr,t)?!1:Ms.test(t)?M0[t]=!0:(tr[t]=!0,!1)}function vi(t,s,a){if(qp(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function ji(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Sa(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}var oc,R0;function ln(t){if(oc===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);oc=s&&s[1]||"",R0=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oc+t+R0}var cc=!1;function xc(t,s){if(!t||cc)return"";cc=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(ue){var ce=ue}Reflect.construct(t,[],je)}else{try{je.call()}catch(ue){ce=ue}t.call(je.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(je=t())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),F=h[0],R=h[1];if(F&&R){var X=F.split(`
`),ie=R.split(`
`);for(d=o=0;o<X.length&&!X[o].includes("DetermineComponentFrameRoot");)o++;for(;d<ie.length&&!ie[d].includes("DetermineComponentFrameRoot");)d++;if(o===X.length||d===ie.length)for(o=X.length-1,d=ie.length-1;1<=o&&0<=d&&X[o]!==ie[d];)d--;for(;1<=o&&0<=d;o--,d--)if(X[o]!==ie[d]){if(o!==1||d!==1)do if(o--,d--,0>d||X[o]!==ie[d]){var be=`
`+X[o].replace(" at new "," at ");return t.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",t.displayName)),be}while(1<=o&&0<=d);break}}}finally{cc=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ln(a):""}function $p(t){switch(t.tag){case 26:case 27:case 5:return ln(t.type);case 16:return ln("Lazy");case 13:return ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return xc(t.type,!1);case 11:return xc(t.type.render,!1);case 1:return xc(t.type,!0);case 31:return ln("Activity");default:return""}}function P0(t){try{var s="";do s+=$p(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Hs(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L0(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ip(t){var s=L0(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),o=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,h=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(F){o=""+F,h.call(this,F)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(F){o=""+F},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ni(t){t._valueTracker||(t._valueTracker=Ip(t))}function O0(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=L0(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function wi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vp=/[\n"\\]/g;function Qs(t){return t.replace(Vp,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function dc(t,s,a,o,d,h,F,R){t.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?t.type=F:t.removeAttribute("type"),s!=null?F==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Hs(s)):t.value!==""+Hs(s)&&(t.value=""+Hs(s)):F!=="submit"&&F!=="reset"||t.removeAttribute("value"),s!=null?uc(t,F,Hs(s)):a!=null?uc(t,F,Hs(a)):o!=null&&t.removeAttribute("value"),d==null&&h!=null&&(t.defaultChecked=!!h),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+Hs(R):t.removeAttribute("name")}function U0(t,s,a,o,d,h,F,R){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),s!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||s!=null))return;a=a!=null?""+Hs(a):"",s=s!=null?""+Hs(s):a,R||s===t.value||(t.value=s),t.defaultValue=s}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=R?t.checked:!!o,t.defaultChecked=!!o,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(t.name=F)}function uc(t,s,a){s==="number"&&wi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function on(t,s,a,o){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Hs(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function z0(t,s,a){if(s!=null&&(s=""+Hs(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Hs(a):""}function q0(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(i(92));if(Z(o)){if(1<o.length)throw Error(i(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=Hs(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function cn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Hp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $0(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Hp.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function I0(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in s)o=s[d],s.hasOwnProperty(d)&&a[d]!==o&&$0(t,d,o)}else for(var h in s)s.hasOwnProperty(h)&&$0(t,h,s[h])}function mc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ci(t){return Yp.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var hc=null;function fc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xn=null,dn=null;function V0(t){var s=De(t);if(s&&(t=s.stateNode)){var a=t[ms]||null;e:switch(t=s.stateNode,s.type){case"input":if(dc(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Qs(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var d=o[ms]||null;if(!d)throw Error(i(90));dc(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&O0(o)}break e;case"textarea":z0(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&on(t,!!a.multiple,s,!1)}}}var gc=!1;function H0(t,s,a){if(gc)return t(s,a);gc=!0;try{var o=t(s);return o}finally{if(gc=!1,(xn!==null||dn!==null)&&(co(),xn&&(s=xn,t=dn,dn=xn=null,V0(s),t)))for(s=0;s<t.length;s++)V0(t[s])}}function sl(t,s){var a=t.stateNode;if(a===null)return null;var o=a[ms]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var _a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=!1;if(_a)try{var al={};Object.defineProperty(al,"passive",{get:function(){pc=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{pc=!1}var sr=null,bc=null,Ai=null;function Q0(){if(Ai)return Ai;var t,s=bc,a=s.length,o,d="value"in sr?sr.value:sr.textContent,h=d.length;for(t=0;t<a&&s[t]===d[t];t++);var F=a-t;for(o=1;o<=F&&s[a-o]===d[h-o];o++);return Ai=d.slice(t,1<o?1-o:void 0)}function Ei(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Fi(){return!0}function Y0(){return!1}function ws(t){function s(a,o,d,h,F){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=h,this.target=F,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(a=t[R],this[R]=a?a(h):h[R]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Fi:Y0,this.isPropagationStopped=Y0,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),s}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=ws(Pr),rl=b({},Pr,{view:0,detail:0}),Gp=ws(rl),yc,vc,nl,ki=b({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nl&&(nl&&t.type==="mousemove"?(yc=t.screenX-nl.screenX,vc=t.screenY-nl.screenY):vc=yc=0,nl=t),yc)},movementY:function(t){return"movementY"in t?t.movementY:vc}}),G0=ws(ki),Xp=b({},ki,{dataTransfer:0}),Kp=ws(Xp),Zp=b({},rl,{relatedTarget:0}),jc=ws(Zp),Jp=b({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wp=ws(Jp),eb=b({},Pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tb=ws(eb),sb=b({},Pr,{data:0}),X0=ws(sb),ab={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lb(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=nb[t])?!!s[t]:!1}function Nc(){return lb}var ib=b({},rl,{key:function(t){if(t.key){var s=ab[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(t){return t.type==="keypress"?Ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ob=ws(ib),cb=b({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K0=ws(cb),xb=b({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),db=ws(xb),ub=b({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mb=ws(ub),hb=b({},ki,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fb=ws(hb),gb=b({},Pr,{newState:0,oldState:0}),pb=ws(gb),bb=[9,13,27,32],wc=_a&&"CompositionEvent"in window,ll=null;_a&&"documentMode"in document&&(ll=document.documentMode);var yb=_a&&"TextEvent"in window&&!ll,Z0=_a&&(!wc||ll&&8<ll&&11>=ll),J0=" ",W0=!1;function eu(t,s){switch(t){case"keyup":return bb.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var un=!1;function vb(t,s){switch(t){case"compositionend":return tu(s);case"keypress":return s.which!==32?null:(W0=!0,J0);case"textInput":return t=s.data,t===J0&&W0?null:t;default:return null}}function jb(t,s){if(un)return t==="compositionend"||!wc&&eu(t,s)?(t=Q0(),Ai=bc=sr=null,un=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Z0&&s.locale!=="ko"?null:s.data;default:return null}}var Nb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function su(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Nb[t.type]:s==="textarea"}function au(t,s,a,o){xn?dn?dn.push(o):dn=[o]:xn=o,s=go(s,"onChange"),0<s.length&&(a=new Bi("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var il=null,ol=null;function wb(t){Lh(t,0)}function Di(t){var s=Be(t);if(O0(s))return t}function ru(t,s){if(t==="change")return s}var nu=!1;if(_a){var Cc;if(_a){var Ac="oninput"in document;if(!Ac){var lu=document.createElement("div");lu.setAttribute("oninput","return;"),Ac=typeof lu.oninput=="function"}Cc=Ac}else Cc=!1;nu=Cc&&(!document.documentMode||9<document.documentMode)}function iu(){il&&(il.detachEvent("onpropertychange",ou),ol=il=null)}function ou(t){if(t.propertyName==="value"&&Di(ol)){var s=[];au(s,ol,t,fc(t)),H0(wb,s)}}function Cb(t,s,a){t==="focusin"?(iu(),il=s,ol=a,il.attachEvent("onpropertychange",ou)):t==="focusout"&&iu()}function Ab(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Di(ol)}function Eb(t,s){if(t==="click")return Di(s)}function Fb(t,s){if(t==="input"||t==="change")return Di(s)}function Bb(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Rs=typeof Object.is=="function"?Object.is:Bb;function cl(t,s){if(Rs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!Ge.call(s,d)||!Rs(t[d],s[d]))return!1}return!0}function cu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xu(t,s){var a=cu(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cu(a)}}function du(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?du(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function uu(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=wi(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=wi(t.document)}return s}function Ec(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var kb=_a&&"documentMode"in document&&11>=document.documentMode,mn=null,Fc=null,xl=null,Bc=!1;function mu(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bc||mn==null||mn!==wi(o)||(o=mn,"selectionStart"in o&&Ec(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xl&&cl(xl,o)||(xl=o,o=go(Fc,"onSelect"),0<o.length&&(s=new Bi("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=mn)))}function Lr(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var hn={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},kc={},hu={};_a&&(hu=document.createElement("div").style,"AnimationEvent"in window||(delete hn.animationend.animation,delete hn.animationiteration.animation,delete hn.animationstart.animation),"TransitionEvent"in window||delete hn.transitionend.transition);function Or(t){if(kc[t])return kc[t];if(!hn[t])return t;var s=hn[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in hu)return kc[t]=s[a];return t}var fu=Or("animationend"),gu=Or("animationiteration"),pu=Or("animationstart"),Db=Or("transitionrun"),Sb=Or("transitionstart"),_b=Or("transitioncancel"),bu=Or("transitionend"),yu=new Map,Dc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dc.push("scrollEnd");function ia(t,s){yu.set(t,s),Ts(s,[t])}var vu=new WeakMap;function Ys(t,s){if(typeof t=="object"&&t!==null){var a=vu.get(t);return a!==void 0?a:(s={value:t,source:s,stack:P0(s)},vu.set(t,s),s)}return{value:t,source:s,stack:P0(s)}}var Gs=[],fn=0,Sc=0;function Si(){for(var t=fn,s=Sc=fn=0;s<t;){var a=Gs[s];Gs[s++]=null;var o=Gs[s];Gs[s++]=null;var d=Gs[s];Gs[s++]=null;var h=Gs[s];if(Gs[s++]=null,o!==null&&d!==null){var F=o.pending;F===null?d.next=d:(d.next=F.next,F.next=d),o.pending=d}h!==0&&ju(a,d,h)}}function _i(t,s,a,o){Gs[fn++]=t,Gs[fn++]=s,Gs[fn++]=a,Gs[fn++]=o,Sc|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function _c(t,s,a,o){return _i(t,s,a,o),Ti(t)}function gn(t,s){return _i(t,null,null,s),Ti(t)}function ju(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var d=!1,h=t.return;h!==null;)h.childLanes|=a,o=h.alternate,o!==null&&(o.childLanes|=a),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(d=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,d&&s!==null&&(d=31-xt(a),t=h.hiddenUpdates,o=t[d],o===null?t[d]=[s]:o.push(s),s.lane=a|536870912),h):null}function Ti(t){if(50<Rl)throw Rl=0,Ox=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var pn={};function Tb(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t,s,a,o){return new Tb(t,s,a,o)}function Tc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ta(t,s){var a=t.alternate;return a===null?(a=Ps(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Nu(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Mi(t,s,a,o,d,h){var F=0;if(o=t,typeof t=="function")Tc(t)&&(F=1);else if(typeof t=="string")F=R4(t,a,le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=Ps(31,a,s,d),t.elementType=S,t.lanes=h,t;case j:return Ur(a.children,d,h,s);case w:F=8,d|=24;break;case D:return t=Ps(12,a,s,d|2),t.elementType=D,t.lanes=h,t;case O:return t=Ps(13,a,s,d),t.elementType=O,t.lanes=h,t;case U:return t=Ps(19,a,s,d),t.elementType=U,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:case A:F=10;break e;case L:F=9;break e;case _:F=11;break e;case M:F=14;break e;case E:F=16,o=null;break e}F=29,a=Error(i(130,t===null?"null":typeof t,"")),o=null}return s=Ps(F,a,s,d),s.elementType=t,s.type=o,s.lanes=h,s}function Ur(t,s,a,o){return t=Ps(7,t,o,s),t.lanes=a,t}function Mc(t,s,a){return t=Ps(6,t,null,s),t.lanes=a,t}function Rc(t,s,a){return s=Ps(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var bn=[],yn=0,Ri=null,Pi=0,Xs=[],Ks=0,zr=null,Ma=1,Ra="";function qr(t,s){bn[yn++]=Pi,bn[yn++]=Ri,Ri=t,Pi=s}function wu(t,s,a){Xs[Ks++]=Ma,Xs[Ks++]=Ra,Xs[Ks++]=zr,zr=t;var o=Ma;t=Ra;var d=32-xt(o)-1;o&=~(1<<d),a+=1;var h=32-xt(s)+d;if(30<h){var F=d-d%5;h=(o&(1<<F)-1).toString(32),o>>=F,d-=F,Ma=1<<32-xt(s)+d|a<<d|o,Ra=h+t}else Ma=1<<h|a<<d|o,Ra=t}function Pc(t){t.return!==null&&(qr(t,1),wu(t,1,0))}function Lc(t){for(;t===Ri;)Ri=bn[--yn],bn[yn]=null,Pi=bn[--yn],bn[yn]=null;for(;t===zr;)zr=Xs[--Ks],Xs[Ks]=null,Ra=Xs[--Ks],Xs[Ks]=null,Ma=Xs[--Ks],Xs[Ks]=null}var bs=null,Lt=null,ut=!1,$r=null,ba=!1,Oc=Error(i(519));function Ir(t){var s=Error(i(418,""));throw ml(Ys(s,t)),Oc}function Cu(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Wt]=t,s[ms]=o,a){case"dialog":st("cancel",s),st("close",s);break;case"iframe":case"object":case"embed":st("load",s);break;case"video":case"audio":for(a=0;a<Ll.length;a++)st(Ll[a],s);break;case"source":st("error",s);break;case"img":case"image":case"link":st("error",s),st("load",s);break;case"details":st("toggle",s);break;case"input":st("invalid",s),U0(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Ni(s);break;case"select":st("invalid",s);break;case"textarea":st("invalid",s),q0(s,o.value,o.defaultValue,o.children),Ni(s)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||qh(s.textContent,a)?(o.popover!=null&&(st("beforetoggle",s),st("toggle",s)),o.onScroll!=null&&st("scroll",s),o.onScrollEnd!=null&&st("scrollend",s),o.onClick!=null&&(s.onclick=po),s=!0):s=!1,s||Ir(t)}function Au(t){for(bs=t.return;bs;)switch(bs.tag){case 5:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:bs=bs.return}}function dl(t){if(t!==bs)return!1;if(!ut)return Au(t),ut=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||ed(t.type,t.memoizedProps)),a=!a),a&&Lt&&Ir(t),Au(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){Lt=ca(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}Lt=null}}else s===27?(s=Lt,br(t.type)?(t=rd,rd=null,Lt=t):Lt=s):Lt=bs?ca(t.stateNode.nextSibling):null;return!0}function ul(){Lt=bs=null,ut=!1}function Eu(){var t=$r;return t!==null&&(Es===null?Es=t:Es.push.apply(Es,t),$r=null),t}function ml(t){$r===null?$r=[t]:$r.push(t)}var Uc=H(null),Vr=null,Pa=null;function ar(t,s,a){W(Uc,s._currentValue),s._currentValue=a}function La(t){t._currentValue=Uc.current,oe(Uc)}function zc(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function qc(t,s,a,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var h=d.dependencies;if(h!==null){var F=d.child;h=h.firstContext;e:for(;h!==null;){var R=h;h=d;for(var X=0;X<s.length;X++)if(R.context===s[X]){h.lanes|=a,R=h.alternate,R!==null&&(R.lanes|=a),zc(h.return,a,t),o||(F=null);break e}h=R.next}}else if(d.tag===18){if(F=d.return,F===null)throw Error(i(341));F.lanes|=a,h=F.alternate,h!==null&&(h.lanes|=a),zc(F,a,t),F=null}else F=d.child;if(F!==null)F.return=d;else for(F=d;F!==null;){if(F===t){F=null;break}if(d=F.sibling,d!==null){d.return=F.return,F=d;break}F=F.return}d=F}}function hl(t,s,a,o){t=null;for(var d=s,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var F=d.alternate;if(F===null)throw Error(i(387));if(F=F.memoizedProps,F!==null){var R=d.type;Rs(d.pendingProps.value,F.value)||(t!==null?t.push(R):t=[R])}}else if(d===ge.current){if(F=d.alternate,F===null)throw Error(i(387));F.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Il):t=[Il])}d=d.return}t!==null&&qc(s,t,a,o),s.flags|=262144}function Li(t){for(t=t.firstContext;t!==null;){if(!Rs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hr(t){Vr=t,Pa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function hs(t){return Fu(Vr,t)}function Oi(t,s){return Vr===null&&Hr(t),Fu(t,s)}function Fu(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Pa===null){if(t===null)throw Error(i(308));Pa=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Pa=Pa.next=s;return a}var Mb=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Rb=n.unstable_scheduleCallback,Pb=n.unstable_NormalPriority,Gt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $c(){return{controller:new Mb,data:new Map,refCount:0}}function fl(t){t.refCount--,t.refCount===0&&Rb(Pb,function(){t.controller.abort()})}var gl=null,Ic=0,vn=0,jn=null;function Lb(t,s){if(gl===null){var a=gl=[];Ic=0,vn=Hx(),jn={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Ic++,s.then(Bu,Bu),s}function Bu(){if(--Ic===0&&gl!==null){jn!==null&&(jn.status="fulfilled");var t=gl;gl=null,vn=0,jn=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Ob(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var ku=B.S;B.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Lb(t,s),ku!==null&&ku(t,s)};var Qr=H(null);function Vc(){var t=Qr.current;return t!==null?t:Et.pooledCache}function Ui(t,s){s===null?W(Qr,Qr.current):W(Qr,s.pool)}function Du(){var t=Vc();return t===null?null:{parent:Gt._currentValue,pool:t}}var pl=Error(i(460)),Su=Error(i(474)),zi=Error(i(542)),Hc={then:function(){}};function _u(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qi(){}function Tu(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(qi,qi),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ru(t),t;default:if(typeof s.status=="string")s.then(qi,qi);else{if(t=Et,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=o}},function(o){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Ru(t),t}throw bl=s,pl}}var bl=null;function Mu(){if(bl===null)throw Error(i(459));var t=bl;return bl=null,t}function Ru(t){if(t===pl||t===zi)throw Error(i(483))}var rr=!1;function Qc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yc(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function nr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function lr(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ht&2)!==0){var d=o.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),o.pending=s,s=Ti(t),ju(t,null,a),s}return _i(t,o,s,a),Ti(t)}function yl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Da(t,a)}}function Gc(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var F={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?d=h=F:h=h.next=F,a=a.next}while(a!==null);h===null?d=h=s:h=h.next=s}else d=h=s;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Xc=!1;function vl(){if(Xc){var t=jn;if(t!==null)throw t}}function jl(t,s,a,o){Xc=!1;var d=t.updateQueue;rr=!1;var h=d.firstBaseUpdate,F=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var X=R,ie=X.next;X.next=null,F===null?h=ie:F.next=ie,F=X;var be=t.alternate;be!==null&&(be=be.updateQueue,R=be.lastBaseUpdate,R!==F&&(R===null?be.firstBaseUpdate=ie:R.next=ie,be.lastBaseUpdate=X))}if(h!==null){var je=d.baseState;F=0,be=ie=X=null,R=h;do{var ce=R.lane&-536870913,ue=ce!==R.lane;if(ue?(lt&ce)===ce:(o&ce)===ce){ce!==0&&ce===vn&&(Xc=!0),be!==null&&(be=be.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var He=t,qe=R;ce=s;var vt=a;switch(qe.tag){case 1:if(He=qe.payload,typeof He=="function"){je=He.call(vt,je,ce);break e}je=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=qe.payload,ce=typeof He=="function"?He.call(vt,je,ce):He,ce==null)break e;je=b({},je,ce);break e;case 2:rr=!0}}ce=R.callback,ce!==null&&(t.flags|=64,ue&&(t.flags|=8192),ue=d.callbacks,ue===null?d.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:R.tag,payload:R.payload,callback:R.callback,next:null},be===null?(ie=be=ue,X=je):be=be.next=ue,F|=ce;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;ue=R,R=ue.next,ue.next=null,d.lastBaseUpdate=ue,d.shared.pending=null}}while(!0);be===null&&(X=je),d.baseState=X,d.firstBaseUpdate=ie,d.lastBaseUpdate=be,h===null&&(d.shared.lanes=0),hr|=F,t.lanes=F,t.memoizedState=je}}function Pu(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Lu(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Pu(a[t],s)}var Nn=H(null),$i=H(0);function Ou(t,s){t=Va,W($i,t),W(Nn,s),Va=t|s.baseLanes}function Kc(){W($i,Va),W(Nn,Nn.current)}function Zc(){Va=$i.current,oe(Nn),oe($i)}var ir=0,Je=null,bt=null,Ht=null,Ii=!1,wn=!1,Yr=!1,Vi=0,Nl=0,Cn=null,Ub=0;function qt(){throw Error(i(321))}function Jc(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Rs(t[a],s[a]))return!1;return!0}function Wc(t,s,a,o,d,h){return ir=h,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=t===null||t.memoizedState===null?jm:Nm,Yr=!1,h=a(o,d),Yr=!1,wn&&(h=zu(s,a,o,d)),Uu(t),h}function Uu(t){B.H=Ki;var s=bt!==null&&bt.next!==null;if(ir=0,Ht=bt=Je=null,Ii=!1,Nl=0,Cn=null,s)throw Error(i(300));t===null||es||(t=t.dependencies,t!==null&&Li(t)&&(es=!0))}function zu(t,s,a,o){Je=t;var d=0;do{if(wn&&(Cn=null),Nl=0,wn=!1,25<=d)throw Error(i(301));if(d+=1,Ht=bt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}B.H=Qb,h=s(a,o)}while(wn);return h}function zb(){var t=B.H,s=t.useState()[0];return s=typeof s.then=="function"?wl(s):s,t=t.useState()[0],(bt!==null?bt.memoizedState:null)!==t&&(Je.flags|=1024),s}function ex(){var t=Vi!==0;return Vi=0,t}function tx(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function sx(t){if(Ii){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Ii=!1}ir=0,Ht=bt=Je=null,wn=!1,Nl=Vi=0,Cn=null}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Je.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Qt(){if(bt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var s=Ht===null?Je.memoizedState:Ht.next;if(s!==null)Ht=s,bt=t;else{if(t===null)throw Je.alternate===null?Error(i(467)):Error(i(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Ht===null?Je.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function ax(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var s=Nl;return Nl+=1,Cn===null&&(Cn=[]),t=Tu(Cn,t,s),s=Je,(Ht===null?s.memoizedState:Ht.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?jm:Nm),t}function Hi(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===A)return hs(t)}throw Error(i(438,String(t)))}function rx(t){var s=null,a=Je.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=Je.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ax(),Je.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=$;return s.index++,a}function Oa(t,s){return typeof s=="function"?s(t):s}function Qi(t){var s=Qt();return nx(s,bt,t)}function nx(t,s,a){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=a;var d=t.baseQueue,h=o.pending;if(h!==null){if(d!==null){var F=d.next;d.next=h.next,h.next=F}s.baseQueue=d=h,o.pending=null}if(h=t.baseState,d===null)t.memoizedState=h;else{s=d.next;var R=F=null,X=null,ie=s,be=!1;do{var je=ie.lane&-536870913;if(je!==ie.lane?(lt&je)===je:(ir&je)===je){var ce=ie.revertLane;if(ce===0)X!==null&&(X=X.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),je===vn&&(be=!0);else if((ir&ce)===ce){ie=ie.next,ce===vn&&(be=!0);continue}else je={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},X===null?(R=X=je,F=h):X=X.next=je,Je.lanes|=ce,hr|=ce;je=ie.action,Yr&&a(h,je),h=ie.hasEagerState?ie.eagerState:a(h,je)}else ce={lane:je,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},X===null?(R=X=ce,F=h):X=X.next=ce,Je.lanes|=je,hr|=je;ie=ie.next}while(ie!==null&&ie!==s);if(X===null?F=h:X.next=R,!Rs(h,t.memoizedState)&&(es=!0,be&&(a=jn,a!==null)))throw a;t.memoizedState=h,t.baseState=F,t.baseQueue=X,o.lastRenderedState=h}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function lx(t){var s=Qt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var o=a.dispatch,d=a.pending,h=s.memoizedState;if(d!==null){a.pending=null;var F=d=d.next;do h=t(h,F.action),F=F.next;while(F!==d);Rs(h,s.memoizedState)||(es=!0),s.memoizedState=h,s.baseQueue===null&&(s.baseState=h),a.lastRenderedState=h}return[h,o]}function qu(t,s,a){var o=Je,d=Qt(),h=ut;if(h){if(a===void 0)throw Error(i(407));a=a()}else a=s();var F=!Rs((bt||d).memoizedState,a);F&&(d.memoizedState=a,es=!0),d=d.queue;var R=Vu.bind(null,o,d,t);if(Cl(2048,8,R,[t]),d.getSnapshot!==s||F||Ht!==null&&Ht.memoizedState.tag&1){if(o.flags|=2048,An(9,Yi(),Iu.bind(null,o,d,a,s),null),Et===null)throw Error(i(349));h||(ir&124)!==0||$u(o,s,a)}return a}function $u(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Je.updateQueue,s===null?(s=ax(),Je.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Iu(t,s,a,o){s.value=a,s.getSnapshot=o,Hu(s)&&Qu(t)}function Vu(t,s,a){return a(function(){Hu(s)&&Qu(t)})}function Hu(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Rs(t,a)}catch{return!0}}function Qu(t){var s=gn(t,2);s!==null&&qs(s,t,2)}function ix(t){var s=Cs();if(typeof t=="function"){var a=t;if(t=a(),Yr){Nt(!0);try{a()}finally{Nt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},s}function Yu(t,s,a,o){return t.baseState=a,nx(t,bt,typeof o=="function"?o:Oa)}function qb(t,s,a,o,d){if(Xi(t))throw Error(i(485));if(t=s.action,t!==null){var h={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){h.listeners.push(F)}};B.T!==null?a(!0):h.isTransition=!1,o(h),a=s.pending,a===null?(h.next=s.pending=h,Gu(s,h)):(h.next=a.next,s.pending=a.next=h)}}function Gu(t,s){var a=s.action,o=s.payload,d=t.state;if(s.isTransition){var h=B.T,F={};B.T=F;try{var R=a(d,o),X=B.S;X!==null&&X(F,R),Xu(t,s,R)}catch(ie){ox(t,s,ie)}finally{B.T=h}}else try{h=a(d,o),Xu(t,s,h)}catch(ie){ox(t,s,ie)}}function Xu(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ku(t,s,o)},function(o){return ox(t,s,o)}):Ku(t,s,a)}function Ku(t,s,a){s.status="fulfilled",s.value=a,Zu(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Gu(t,a)))}function ox(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,Zu(s),s=s.next;while(s!==o)}t.action=null}function Zu(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Ju(t,s){return s}function Wu(t,s){if(ut){var a=Et.formState;if(a!==null){e:{var o=Je;if(ut){if(Lt){t:{for(var d=Lt,h=ba;d.nodeType!==8;){if(!h){d=null;break t}if(d=ca(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){Lt=ca(d.nextSibling),o=d.data==="F!";break e}}Ir(o)}o=!1}o&&(s=a[0])}}return a=Cs(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:s},a.queue=o,a=bm.bind(null,Je,o),o.dispatch=a,o=ix(!1),h=mx.bind(null,Je,!1,o.queue),o=Cs(),d={state:s,dispatch:null,action:t,pending:null},o.queue=d,a=qb.bind(null,Je,d,h,a),d.dispatch=a,o.memoizedState=t,[s,a,!1]}function em(t){var s=Qt();return tm(s,bt,t)}function tm(t,s,a){if(s=nx(t,s,Ju)[0],t=Qi(Oa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=wl(s)}catch(F){throw F===pl?zi:F}else o=s;s=Qt();var d=s.queue,h=d.dispatch;return a!==s.memoizedState&&(Je.flags|=2048,An(9,Yi(),$b.bind(null,d,a),null)),[o,h,t]}function $b(t,s){t.action=s}function sm(t){var s=Qt(),a=bt;if(a!==null)return tm(s,a,t);Qt(),s=s.memoizedState,a=Qt();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function An(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=Je.updateQueue,s===null&&(s=ax(),Je.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function Yi(){return{destroy:void 0,resource:void 0}}function am(){return Qt().memoizedState}function Gi(t,s,a,o){var d=Cs();o=o===void 0?null:o,Je.flags|=t,d.memoizedState=An(1|s,Yi(),a,o)}function Cl(t,s,a,o){var d=Qt();o=o===void 0?null:o;var h=d.memoizedState.inst;bt!==null&&o!==null&&Jc(o,bt.memoizedState.deps)?d.memoizedState=An(s,h,a,o):(Je.flags|=t,d.memoizedState=An(1|s,h,a,o))}function rm(t,s){Gi(8390656,8,t,s)}function nm(t,s){Cl(2048,8,t,s)}function lm(t,s){return Cl(4,2,t,s)}function im(t,s){return Cl(4,4,t,s)}function om(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function cm(t,s,a){a=a!=null?a.concat([t]):null,Cl(4,4,om.bind(null,s,t),a)}function cx(){}function xm(t,s){var a=Qt();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&Jc(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function dm(t,s){var a=Qt();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&Jc(s,o[1]))return o[0];if(o=t(),Yr){Nt(!0);try{t()}finally{Nt(!1)}}return a.memoizedState=[o,s],o}function xx(t,s,a){return a===void 0||(ir&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=hh(),Je.lanes|=t,hr|=t,a)}function um(t,s,a,o){return Rs(a,s)?a:Nn.current!==null?(t=xx(t,a,o),Rs(t,s)||(es=!0),t):(ir&42)===0?(es=!0,t.memoizedState=a):(t=hh(),Je.lanes|=t,hr|=t,s)}function mm(t,s,a,o,d){var h=k.p;k.p=h!==0&&8>h?h:8;var F=B.T,R={};B.T=R,mx(t,!1,s,a);try{var X=d(),ie=B.S;if(ie!==null&&ie(R,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var be=Ob(X,o);Al(t,s,be,zs(t))}else Al(t,s,o,zs(t))}catch(je){Al(t,s,{then:function(){},status:"rejected",reason:je},zs())}finally{k.p=h,B.T=F}}function Ib(){}function dx(t,s,a,o){if(t.tag!==5)throw Error(i(476));var d=hm(t).queue;mm(t,d,s,I,a===null?Ib:function(){return fm(t),a(o)})}function hm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:I},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function fm(t){var s=hm(t).next.queue;Al(t,s,{},zs())}function ux(){return hs(Il)}function gm(){return Qt().memoizedState}function pm(){return Qt().memoizedState}function Vb(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=zs();t=nr(a);var o=lr(s,t,a);o!==null&&(qs(o,s,a),yl(o,s,a)),s={cache:$c()},t.payload=s;return}s=s.return}}function Hb(t,s,a){var o=zs();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Xi(t)?ym(s,a):(a=_c(t,s,a,o),a!==null&&(qs(a,t,o),vm(a,s,o)))}function bm(t,s,a){var o=zs();Al(t,s,a,o)}function Al(t,s,a,o){var d={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xi(t))ym(s,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=s.lastRenderedReducer,h!==null))try{var F=s.lastRenderedState,R=h(F,a);if(d.hasEagerState=!0,d.eagerState=R,Rs(R,F))return _i(t,s,d,0),Et===null&&Si(),!1}catch{}finally{}if(a=_c(t,s,d,o),a!==null)return qs(a,t,o),vm(a,s,o),!0}return!1}function mx(t,s,a,o){if(o={lane:2,revertLane:Hx(),action:o,hasEagerState:!1,eagerState:null,next:null},Xi(t)){if(s)throw Error(i(479))}else s=_c(t,a,o,2),s!==null&&qs(s,t,2)}function Xi(t){var s=t.alternate;return t===Je||s!==null&&s===Je}function ym(t,s){wn=Ii=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function vm(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Da(t,a)}}var Ki={readContext:hs,use:Hi,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt},jm={readContext:hs,use:Hi,useCallback:function(t,s){return Cs().memoizedState=[t,s===void 0?null:s],t},useContext:hs,useEffect:rm,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Gi(4194308,4,om.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Gi(4194308,4,t,s)},useInsertionEffect:function(t,s){Gi(4,2,t,s)},useMemo:function(t,s){var a=Cs();s=s===void 0?null:s;var o=t();if(Yr){Nt(!0);try{t()}finally{Nt(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=Cs();if(a!==void 0){var d=a(s);if(Yr){Nt(!0);try{a(s)}finally{Nt(!1)}}}else d=s;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=Hb.bind(null,Je,t),[o.memoizedState,t]},useRef:function(t){var s=Cs();return t={current:t},s.memoizedState=t},useState:function(t){t=ix(t);var s=t.queue,a=bm.bind(null,Je,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:cx,useDeferredValue:function(t,s){var a=Cs();return xx(a,t,s)},useTransition:function(){var t=ix(!1);return t=mm.bind(null,Je,t.queue,!0,!1),Cs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=Je,d=Cs();if(ut){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),Et===null)throw Error(i(349));(lt&124)!==0||$u(o,s,a)}d.memoizedState=a;var h={value:a,getSnapshot:s};return d.queue=h,rm(Vu.bind(null,o,h,t),[t]),o.flags|=2048,An(9,Yi(),Iu.bind(null,o,h,a,s),null),a},useId:function(){var t=Cs(),s=Et.identifierPrefix;if(ut){var a=Ra,o=Ma;a=(o&~(1<<32-xt(o)-1)).toString(32)+a,s=""+s+"R"+a,a=Vi++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=Ub++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:ux,useFormState:Wu,useActionState:Wu,useOptimistic:function(t){var s=Cs();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=mx.bind(null,Je,!0,a),a.dispatch=s,[t,s]},useMemoCache:rx,useCacheRefresh:function(){return Cs().memoizedState=Vb.bind(null,Je)}},Nm={readContext:hs,use:Hi,useCallback:xm,useContext:hs,useEffect:nm,useImperativeHandle:cm,useInsertionEffect:lm,useLayoutEffect:im,useMemo:dm,useReducer:Qi,useRef:am,useState:function(){return Qi(Oa)},useDebugValue:cx,useDeferredValue:function(t,s){var a=Qt();return um(a,bt.memoizedState,t,s)},useTransition:function(){var t=Qi(Oa)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:wl(t),s]},useSyncExternalStore:qu,useId:gm,useHostTransitionStatus:ux,useFormState:em,useActionState:em,useOptimistic:function(t,s){var a=Qt();return Yu(a,bt,t,s)},useMemoCache:rx,useCacheRefresh:pm},Qb={readContext:hs,use:Hi,useCallback:xm,useContext:hs,useEffect:nm,useImperativeHandle:cm,useInsertionEffect:lm,useLayoutEffect:im,useMemo:dm,useReducer:lx,useRef:am,useState:function(){return lx(Oa)},useDebugValue:cx,useDeferredValue:function(t,s){var a=Qt();return bt===null?xx(a,t,s):um(a,bt.memoizedState,t,s)},useTransition:function(){var t=lx(Oa)[0],s=Qt().memoizedState;return[typeof t=="boolean"?t:wl(t),s]},useSyncExternalStore:qu,useId:gm,useHostTransitionStatus:ux,useFormState:sm,useActionState:sm,useOptimistic:function(t,s){var a=Qt();return bt!==null?Yu(a,bt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rx,useCacheRefresh:pm},En=null,El=0;function Zi(t){var s=El;return El+=1,En===null&&(En=[]),Tu(En,t,s)}function Fl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Ji(t,s){throw s.$$typeof===p?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function wm(t){var s=t._init;return s(t._payload)}function Cm(t){function s(re,te){if(t){var ne=re.deletions;ne===null?(re.deletions=[te],re.flags|=16):ne.push(te)}}function a(re,te){if(!t)return null;for(;te!==null;)s(re,te),te=te.sibling;return null}function o(re){for(var te=new Map;re!==null;)re.key!==null?te.set(re.key,re):te.set(re.index,re),re=re.sibling;return te}function d(re,te){return re=Ta(re,te),re.index=0,re.sibling=null,re}function h(re,te,ne){return re.index=ne,t?(ne=re.alternate,ne!==null?(ne=ne.index,ne<te?(re.flags|=67108866,te):ne):(re.flags|=67108866,te)):(re.flags|=1048576,te)}function F(re){return t&&re.alternate===null&&(re.flags|=67108866),re}function R(re,te,ne,ve){return te===null||te.tag!==6?(te=Mc(ne,re.mode,ve),te.return=re,te):(te=d(te,ne),te.return=re,te)}function X(re,te,ne,ve){var Se=ne.type;return Se===j?be(re,te,ne.props.children,ve,ne.key):te!==null&&(te.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===E&&wm(Se)===te.type)?(te=d(te,ne.props),Fl(te,ne),te.return=re,te):(te=Mi(ne.type,ne.key,ne.props,null,re.mode,ve),Fl(te,ne),te.return=re,te)}function ie(re,te,ne,ve){return te===null||te.tag!==4||te.stateNode.containerInfo!==ne.containerInfo||te.stateNode.implementation!==ne.implementation?(te=Rc(ne,re.mode,ve),te.return=re,te):(te=d(te,ne.children||[]),te.return=re,te)}function be(re,te,ne,ve,Se){return te===null||te.tag!==7?(te=Ur(ne,re.mode,ve,Se),te.return=re,te):(te=d(te,ne),te.return=re,te)}function je(re,te,ne){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=Mc(""+te,re.mode,ne),te.return=re,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return ne=Mi(te.type,te.key,te.props,null,re.mode,ne),Fl(ne,te),ne.return=re,ne;case N:return te=Rc(te,re.mode,ne),te.return=re,te;case E:var ve=te._init;return te=ve(te._payload),je(re,te,ne)}if(Z(te)||q(te))return te=Ur(te,re.mode,ne,null),te.return=re,te;if(typeof te.then=="function")return je(re,Zi(te),ne);if(te.$$typeof===A)return je(re,Oi(re,te),ne);Ji(re,te)}return null}function ce(re,te,ne,ve){var Se=te!==null?te.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Se!==null?null:R(re,te,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:return ne.key===Se?X(re,te,ne,ve):null;case N:return ne.key===Se?ie(re,te,ne,ve):null;case E:return Se=ne._init,ne=Se(ne._payload),ce(re,te,ne,ve)}if(Z(ne)||q(ne))return Se!==null?null:be(re,te,ne,ve,null);if(typeof ne.then=="function")return ce(re,te,Zi(ne),ve);if(ne.$$typeof===A)return ce(re,te,Oi(re,ne),ve);Ji(re,ne)}return null}function ue(re,te,ne,ve,Se){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return re=re.get(ne)||null,R(te,re,""+ve,Se);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case y:return re=re.get(ve.key===null?ne:ve.key)||null,X(te,re,ve,Se);case N:return re=re.get(ve.key===null?ne:ve.key)||null,ie(te,re,ve,Se);case E:var et=ve._init;return ve=et(ve._payload),ue(re,te,ne,ve,Se)}if(Z(ve)||q(ve))return re=re.get(ne)||null,be(te,re,ve,Se,null);if(typeof ve.then=="function")return ue(re,te,ne,Zi(ve),Se);if(ve.$$typeof===A)return ue(re,te,ne,Oi(te,ve),Se);Ji(te,ve)}return null}function He(re,te,ne,ve){for(var Se=null,et=null,Me=te,$e=te=0,ss=null;Me!==null&&$e<ne.length;$e++){Me.index>$e?(ss=Me,Me=null):ss=Me.sibling;var dt=ce(re,Me,ne[$e],ve);if(dt===null){Me===null&&(Me=ss);break}t&&Me&&dt.alternate===null&&s(re,Me),te=h(dt,te,$e),et===null?Se=dt:et.sibling=dt,et=dt,Me=ss}if($e===ne.length)return a(re,Me),ut&&qr(re,$e),Se;if(Me===null){for(;$e<ne.length;$e++)Me=je(re,ne[$e],ve),Me!==null&&(te=h(Me,te,$e),et===null?Se=Me:et.sibling=Me,et=Me);return ut&&qr(re,$e),Se}for(Me=o(Me);$e<ne.length;$e++)ss=ue(Me,re,$e,ne[$e],ve),ss!==null&&(t&&ss.alternate!==null&&Me.delete(ss.key===null?$e:ss.key),te=h(ss,te,$e),et===null?Se=ss:et.sibling=ss,et=ss);return t&&Me.forEach(function(wr){return s(re,wr)}),ut&&qr(re,$e),Se}function qe(re,te,ne,ve){if(ne==null)throw Error(i(151));for(var Se=null,et=null,Me=te,$e=te=0,ss=null,dt=ne.next();Me!==null&&!dt.done;$e++,dt=ne.next()){Me.index>$e?(ss=Me,Me=null):ss=Me.sibling;var wr=ce(re,Me,dt.value,ve);if(wr===null){Me===null&&(Me=ss);break}t&&Me&&wr.alternate===null&&s(re,Me),te=h(wr,te,$e),et===null?Se=wr:et.sibling=wr,et=wr,Me=ss}if(dt.done)return a(re,Me),ut&&qr(re,$e),Se;if(Me===null){for(;!dt.done;$e++,dt=ne.next())dt=je(re,dt.value,ve),dt!==null&&(te=h(dt,te,$e),et===null?Se=dt:et.sibling=dt,et=dt);return ut&&qr(re,$e),Se}for(Me=o(Me);!dt.done;$e++,dt=ne.next())dt=ue(Me,re,$e,dt.value,ve),dt!==null&&(t&&dt.alternate!==null&&Me.delete(dt.key===null?$e:dt.key),te=h(dt,te,$e),et===null?Se=dt:et.sibling=dt,et=dt);return t&&Me.forEach(function(Y4){return s(re,Y4)}),ut&&qr(re,$e),Se}function vt(re,te,ne,ve){if(typeof ne=="object"&&ne!==null&&ne.type===j&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case y:e:{for(var Se=ne.key;te!==null;){if(te.key===Se){if(Se=ne.type,Se===j){if(te.tag===7){a(re,te.sibling),ve=d(te,ne.props.children),ve.return=re,re=ve;break e}}else if(te.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===E&&wm(Se)===te.type){a(re,te.sibling),ve=d(te,ne.props),Fl(ve,ne),ve.return=re,re=ve;break e}a(re,te);break}else s(re,te);te=te.sibling}ne.type===j?(ve=Ur(ne.props.children,re.mode,ve,ne.key),ve.return=re,re=ve):(ve=Mi(ne.type,ne.key,ne.props,null,re.mode,ve),Fl(ve,ne),ve.return=re,re=ve)}return F(re);case N:e:{for(Se=ne.key;te!==null;){if(te.key===Se)if(te.tag===4&&te.stateNode.containerInfo===ne.containerInfo&&te.stateNode.implementation===ne.implementation){a(re,te.sibling),ve=d(te,ne.children||[]),ve.return=re,re=ve;break e}else{a(re,te);break}else s(re,te);te=te.sibling}ve=Rc(ne,re.mode,ve),ve.return=re,re=ve}return F(re);case E:return Se=ne._init,ne=Se(ne._payload),vt(re,te,ne,ve)}if(Z(ne))return He(re,te,ne,ve);if(q(ne)){if(Se=q(ne),typeof Se!="function")throw Error(i(150));return ne=Se.call(ne),qe(re,te,ne,ve)}if(typeof ne.then=="function")return vt(re,te,Zi(ne),ve);if(ne.$$typeof===A)return vt(re,te,Oi(re,ne),ve);Ji(re,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,te!==null&&te.tag===6?(a(re,te.sibling),ve=d(te,ne),ve.return=re,re=ve):(a(re,te),ve=Mc(ne,re.mode,ve),ve.return=re,re=ve),F(re)):a(re,te)}return function(re,te,ne,ve){try{El=0;var Se=vt(re,te,ne,ve);return En=null,Se}catch(Me){if(Me===pl||Me===zi)throw Me;var et=Ps(29,Me,null,re.mode);return et.lanes=ve,et.return=re,et}finally{}}}var Fn=Cm(!0),Am=Cm(!1),Zs=H(null),ya=null;function or(t){var s=t.alternate;W(Xt,Xt.current&1),W(Zs,t),ya===null&&(s===null||Nn.current!==null||s.memoizedState!==null)&&(ya=t)}function Em(t){if(t.tag===22){if(W(Xt,Xt.current),W(Zs,t),ya===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(ya=t)}}else cr()}function cr(){W(Xt,Xt.current),W(Zs,Zs.current)}function Ua(t){oe(Zs),ya===t&&(ya=null),oe(Xt)}var Xt=H(0);function Wi(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ad(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function hx(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:b({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var fx={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=zs(),d=nr(o);d.payload=s,a!=null&&(d.callback=a),s=lr(t,d,o),s!==null&&(qs(s,t,o),yl(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=zs(),d=nr(o);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=lr(t,d,o),s!==null&&(qs(s,t,o),yl(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=zs(),o=nr(a);o.tag=2,s!=null&&(o.callback=s),s=lr(t,o,a),s!==null&&(qs(s,t,a),yl(s,t,a))}};function Fm(t,s,a,o,d,h,F){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,F):s.prototype&&s.prototype.isPureReactComponent?!cl(a,o)||!cl(d,h):!0}function Bm(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&fx.enqueueReplaceState(s,s.state,null)}function Gr(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=b({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var eo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function km(t){eo(t)}function Dm(t){console.error(t)}function Sm(t){eo(t)}function to(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function _m(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function gx(t,s,a){return a=nr(a),a.tag=3,a.payload={element:null},a.callback=function(){to(t,s)},a}function Tm(t){return t=nr(t),t.tag=3,t}function Mm(t,s,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=o.value;t.payload=function(){return d(h)},t.callback=function(){_m(s,a,o)}}var F=a.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(t.callback=function(){_m(s,a,o),typeof d!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})})}function Yb(t,s,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&hl(s,a,d,!0),a=Zs.current,a!==null){switch(a.tag){case 13:return ya===null?zx():a.alternate===null&&Ot===0&&(Ot=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===Hc?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),$x(t,o,d)),!1;case 22:return a.flags|=65536,o===Hc?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),$x(t,o,d)),!1}throw Error(i(435,a.tag))}return $x(t,o,d),zx(),!1}if(ut)return s=Zs.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,o!==Oc&&(t=Error(i(422),{cause:o}),ml(Ys(t,a)))):(o!==Oc&&(s=Error(i(423),{cause:o}),ml(Ys(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=Ys(o,a),d=gx(t.stateNode,o,d),Gc(t,d),Ot!==4&&(Ot=2)),!1;var h=Error(i(520),{cause:o});if(h=Ys(h,a),Ml===null?Ml=[h]:Ml.push(h),Ot!==4&&(Ot=2),s===null)return!0;o=Ys(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=gx(a.stateNode,o,t),Gc(a,t),!1;case 1:if(s=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(fr===null||!fr.has(h))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Tm(d),Mm(d,t,a,o),Gc(a,d),!1}a=a.return}while(a!==null);return!1}var Rm=Error(i(461)),es=!1;function ns(t,s,a,o){s.child=t===null?Am(s,null,a,o):Fn(s,t.child,a,o)}function Pm(t,s,a,o,d){a=a.render;var h=s.ref;if("ref"in o){var F={};for(var R in o)R!=="ref"&&(F[R]=o[R])}else F=o;return Hr(s),o=Wc(t,s,a,F,h,d),R=ex(),t!==null&&!es?(tx(t,s,d),za(t,s,d)):(ut&&R&&Pc(s),s.flags|=1,ns(t,s,o,d),s.child)}function Lm(t,s,a,o,d){if(t===null){var h=a.type;return typeof h=="function"&&!Tc(h)&&h.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=h,Om(t,s,h,o,d)):(t=Mi(a.type,null,o,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(h=t.child,!Cx(t,d)){var F=h.memoizedProps;if(a=a.compare,a=a!==null?a:cl,a(F,o)&&t.ref===s.ref)return za(t,s,d)}return s.flags|=1,t=Ta(h,o),t.ref=s.ref,t.return=s,s.child=t}function Om(t,s,a,o,d){if(t!==null){var h=t.memoizedProps;if(cl(h,o)&&t.ref===s.ref)if(es=!1,s.pendingProps=o=h,Cx(t,d))(t.flags&131072)!==0&&(es=!0);else return s.lanes=t.lanes,za(t,s,d)}return px(t,s,a,o,d)}function Um(t,s,a){var o=s.pendingProps,d=o.children,h=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((s.flags&128)!==0){if(o=h!==null?h.baseLanes|a:a,t!==null){for(d=s.child=t.child,h=0;d!==null;)h=h|d.lanes|d.childLanes,d=d.sibling;s.childLanes=h&~o}else s.childLanes=0,s.child=null;return zm(t,s,o,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ui(s,h!==null?h.cachePool:null),h!==null?Ou(s,h):Kc(),Em(s);else return s.lanes=s.childLanes=536870912,zm(t,s,h!==null?h.baseLanes|a:a,a)}else h!==null?(Ui(s,h.cachePool),Ou(s,h),cr(),s.memoizedState=null):(t!==null&&Ui(s,null),Kc(),cr());return ns(t,s,d,a),s.child}function zm(t,s,a,o){var d=Vc();return d=d===null?null:{parent:Gt._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},t!==null&&Ui(s,null),Kc(),Em(s),t!==null&&hl(t,s,o,!0),null}function so(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function px(t,s,a,o,d){return Hr(s),a=Wc(t,s,a,o,void 0,d),o=ex(),t!==null&&!es?(tx(t,s,d),za(t,s,d)):(ut&&o&&Pc(s),s.flags|=1,ns(t,s,a,d),s.child)}function qm(t,s,a,o,d,h){return Hr(s),s.updateQueue=null,a=zu(s,o,a,d),Uu(t),o=ex(),t!==null&&!es?(tx(t,s,h),za(t,s,h)):(ut&&o&&Pc(s),s.flags|=1,ns(t,s,a,h),s.child)}function $m(t,s,a,o,d){if(Hr(s),s.stateNode===null){var h=pn,F=a.contextType;typeof F=="object"&&F!==null&&(h=hs(F)),h=new a(o,h),s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=fx,s.stateNode=h,h._reactInternals=s,h=s.stateNode,h.props=o,h.state=s.memoizedState,h.refs={},Qc(s),F=a.contextType,h.context=typeof F=="object"&&F!==null?hs(F):pn,h.state=s.memoizedState,F=a.getDerivedStateFromProps,typeof F=="function"&&(hx(s,a,F,o),h.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(F=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),F!==h.state&&fx.enqueueReplaceState(h,h.state,null),jl(s,o,h,d),vl(),h.state=s.memoizedState),typeof h.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){h=s.stateNode;var R=s.memoizedProps,X=Gr(a,R);h.props=X;var ie=h.context,be=a.contextType;F=pn,typeof be=="object"&&be!==null&&(F=hs(be));var je=a.getDerivedStateFromProps;be=typeof je=="function"||typeof h.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,be||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(R||ie!==F)&&Bm(s,h,o,F),rr=!1;var ce=s.memoizedState;h.state=ce,jl(s,o,h,d),vl(),ie=s.memoizedState,R||ce!==ie||rr?(typeof je=="function"&&(hx(s,a,je,o),ie=s.memoizedState),(X=rr||Fm(s,a,X,o,ce,ie,F))?(be||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(s.flags|=4194308)):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=ie),h.props=o,h.state=ie,h.context=F,o=X):(typeof h.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{h=s.stateNode,Yc(t,s),F=s.memoizedProps,be=Gr(a,F),h.props=be,je=s.pendingProps,ce=h.context,ie=a.contextType,X=pn,typeof ie=="object"&&ie!==null&&(X=hs(ie)),R=a.getDerivedStateFromProps,(ie=typeof R=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(F!==je||ce!==X)&&Bm(s,h,o,X),rr=!1,ce=s.memoizedState,h.state=ce,jl(s,o,h,d),vl();var ue=s.memoizedState;F!==je||ce!==ue||rr||t!==null&&t.dependencies!==null&&Li(t.dependencies)?(typeof R=="function"&&(hx(s,a,R,o),ue=s.memoizedState),(be=rr||Fm(s,a,be,o,ce,ue,X)||t!==null&&t.dependencies!==null&&Li(t.dependencies))?(ie||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,ue,X),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,ue,X)),typeof h.componentDidUpdate=="function"&&(s.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof h.componentDidUpdate!="function"||F===t.memoizedProps&&ce===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||F===t.memoizedProps&&ce===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=ue),h.props=o,h.state=ue,h.context=X,o=be):(typeof h.componentDidUpdate!="function"||F===t.memoizedProps&&ce===t.memoizedState||(s.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||F===t.memoizedProps&&ce===t.memoizedState||(s.flags|=1024),o=!1)}return h=o,so(t,s),o=(s.flags&128)!==0,h||o?(h=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:h.render(),s.flags|=1,t!==null&&o?(s.child=Fn(s,t.child,null,d),s.child=Fn(s,null,a,d)):ns(t,s,a,d),s.memoizedState=h.state,t=s.child):t=za(t,s,d),t}function Im(t,s,a,o){return ul(),s.flags|=256,ns(t,s,a,o),s.child}var bx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yx(t){return{baseLanes:t,cachePool:Du()}}function vx(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Js),t}function Vm(t,s,a){var o=s.pendingProps,d=!1,h=(s.flags&128)!==0,F;if((F=h)||(F=t!==null&&t.memoizedState===null?!1:(Xt.current&2)!==0),F&&(d=!0,s.flags&=-129),F=(s.flags&32)!==0,s.flags&=-33,t===null){if(ut){if(d?or(s):cr(),ut){var R=Lt,X;if(X=R){e:{for(X=R,R=ba;X.nodeType!==8;){if(!R){R=null;break e}if(X=ca(X.nextSibling),X===null){R=null;break e}}R=X}R!==null?(s.memoizedState={dehydrated:R,treeContext:zr!==null?{id:Ma,overflow:Ra}:null,retryLane:536870912,hydrationErrors:null},X=Ps(18,null,null,0),X.stateNode=R,X.return=s,s.child=X,bs=s,Lt=null,X=!0):X=!1}X||Ir(s)}if(R=s.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return ad(R)?s.lanes=32:s.lanes=536870912,null;Ua(s)}return R=o.children,o=o.fallback,d?(cr(),d=s.mode,R=ao({mode:"hidden",children:R},d),o=Ur(o,d,a,null),R.return=s,o.return=s,R.sibling=o,s.child=R,d=s.child,d.memoizedState=yx(a),d.childLanes=vx(t,F,a),s.memoizedState=bx,o):(or(s),jx(s,R))}if(X=t.memoizedState,X!==null&&(R=X.dehydrated,R!==null)){if(h)s.flags&256?(or(s),s.flags&=-257,s=Nx(t,s,a)):s.memoizedState!==null?(cr(),s.child=t.child,s.flags|=128,s=null):(cr(),d=o.fallback,R=s.mode,o=ao({mode:"visible",children:o.children},R),d=Ur(d,R,a,null),d.flags|=2,o.return=s,d.return=s,o.sibling=d,s.child=o,Fn(s,t.child,null,a),o=s.child,o.memoizedState=yx(a),o.childLanes=vx(t,F,a),s.memoizedState=bx,s=d);else if(or(s),ad(R)){if(F=R.nextSibling&&R.nextSibling.dataset,F)var ie=F.dgst;F=ie,o=Error(i(419)),o.stack="",o.digest=F,ml({value:o,source:null,stack:null}),s=Nx(t,s,a)}else if(es||hl(t,s,a,!1),F=(a&t.childLanes)!==0,es||F){if(F=Et,F!==null&&(o=a&-a,o=(o&42)!==0?1:Jn(o),o=(o&(F.suspendedLanes|a))!==0?0:o,o!==0&&o!==X.retryLane))throw X.retryLane=o,gn(t,o),qs(F,t,o),Rm;R.data==="$?"||zx(),s=Nx(t,s,a)}else R.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=X.treeContext,Lt=ca(R.nextSibling),bs=s,ut=!0,$r=null,ba=!1,t!==null&&(Xs[Ks++]=Ma,Xs[Ks++]=Ra,Xs[Ks++]=zr,Ma=t.id,Ra=t.overflow,zr=s),s=jx(s,o.children),s.flags|=4096);return s}return d?(cr(),d=o.fallback,R=s.mode,X=t.child,ie=X.sibling,o=Ta(X,{mode:"hidden",children:o.children}),o.subtreeFlags=X.subtreeFlags&65011712,ie!==null?d=Ta(ie,d):(d=Ur(d,R,a,null),d.flags|=2),d.return=s,o.return=s,o.sibling=d,s.child=o,o=d,d=s.child,R=t.child.memoizedState,R===null?R=yx(a):(X=R.cachePool,X!==null?(ie=Gt._currentValue,X=X.parent!==ie?{parent:ie,pool:ie}:X):X=Du(),R={baseLanes:R.baseLanes|a,cachePool:X}),d.memoizedState=R,d.childLanes=vx(t,F,a),s.memoizedState=bx,o):(or(s),a=t.child,t=a.sibling,a=Ta(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(F=s.deletions,F===null?(s.deletions=[t],s.flags|=16):F.push(t)),s.child=a,s.memoizedState=null,a)}function jx(t,s){return s=ao({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ao(t,s){return t=Ps(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Nx(t,s,a){return Fn(s,t.child,null,a),t=jx(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Hm(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),zc(t.return,s,a)}function wx(t,s,a,o,d){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d}:(h.isBackwards=s,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=a,h.tailMode=d)}function Qm(t,s,a){var o=s.pendingProps,d=o.revealOrder,h=o.tail;if(ns(t,s,o.children,a),o=Xt.current,(o&2)!==0)o=o&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hm(t,a,s);else if(t.tag===19)Hm(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(W(Xt,o),d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&Wi(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),wx(s,!1,d,a,h);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Wi(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}wx(s,!0,a,null,h);break;case"together":wx(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function za(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),hr|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(hl(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=Ta(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Ta(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Cx(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Li(t)))}function Gb(t,s,a){switch(s.tag){case 3:pe(s,s.stateNode.containerInfo),ar(s,Gt,t.memoizedState.cache),ul();break;case 27:case 5:Ae(s);break;case 4:pe(s,s.stateNode.containerInfo);break;case 10:ar(s,s.type,s.memoizedProps.value);break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(or(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Vm(t,s,a):(or(s),t=za(t,s,a),t!==null?t.sibling:null);or(s);break;case 19:var d=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(hl(t,s,a,!1),o=(a&s.childLanes)!==0),d){if(o)return Qm(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),W(Xt,Xt.current),o)break;return null;case 22:case 23:return s.lanes=0,Um(t,s,a);case 24:ar(s,Gt,t.memoizedState.cache)}return za(t,s,a)}function Ym(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)es=!0;else{if(!Cx(t,a)&&(s.flags&128)===0)return es=!1,Gb(t,s,a);es=(t.flags&131072)!==0}else es=!1,ut&&(s.flags&1048576)!==0&&wu(s,Pi,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var o=s.elementType,d=o._init;if(o=d(o._payload),s.type=o,typeof o=="function")Tc(o)?(t=Gr(o,t),s.tag=1,s=$m(null,s,o,t,a)):(s.tag=0,s=px(null,s,o,t,a));else{if(o!=null){if(d=o.$$typeof,d===_){s.tag=11,s=Pm(null,s,o,t,a);break e}else if(d===M){s.tag=14,s=Lm(null,s,o,t,a);break e}}throw s=V(o)||o,Error(i(306,s,""))}}return s;case 0:return px(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,d=Gr(o,s.pendingProps),$m(t,s,o,d,a);case 3:e:{if(pe(s,s.stateNode.containerInfo),t===null)throw Error(i(387));o=s.pendingProps;var h=s.memoizedState;d=h.element,Yc(t,s),jl(s,o,null,a);var F=s.memoizedState;if(o=F.cache,ar(s,Gt,o),o!==h.cache&&qc(s,[Gt],a,!0),vl(),o=F.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:F.cache},s.updateQueue.baseState=h,s.memoizedState=h,s.flags&256){s=Im(t,s,o,a);break e}else if(o!==d){d=Ys(Error(i(424)),s),ml(d),s=Im(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Lt=ca(t.firstChild),bs=s,ut=!0,$r=null,ba=!0,a=Am(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ul(),o===d){s=za(t,s,a);break e}ns(t,s,o,a)}s=s.child}return s;case 26:return so(t,s),t===null?(a=Zh(s.type,null,s.pendingProps,null))?s.memoizedState=a:ut||(a=s.type,t=s.pendingProps,o=bo(Y.current).createElement(a),o[Wt]=s,o[ms]=t,is(o,a,t),Ve(o),s.stateNode=o):s.memoizedState=Zh(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Ae(s),t===null&&ut&&(o=s.stateNode=Gh(s.type,s.pendingProps,Y.current),bs=s,ba=!0,d=Lt,br(s.type)?(rd=d,Lt=ca(o.firstChild)):Lt=d),ns(t,s,s.pendingProps.children,a),so(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&ut&&((d=o=Lt)&&(o=N4(o,s.type,s.pendingProps,ba),o!==null?(s.stateNode=o,bs=s,Lt=ca(o.firstChild),ba=!1,d=!0):d=!1),d||Ir(s)),Ae(s),d=s.type,h=s.pendingProps,F=t!==null?t.memoizedProps:null,o=h.children,ed(d,h)?o=null:F!==null&&ed(d,F)&&(s.flags|=32),s.memoizedState!==null&&(d=Wc(t,s,zb,null,null,a),Il._currentValue=d),so(t,s),ns(t,s,o,a),s.child;case 6:return t===null&&ut&&((t=a=Lt)&&(a=w4(a,s.pendingProps,ba),a!==null?(s.stateNode=a,bs=s,Lt=null,t=!0):t=!1),t||Ir(s)),null;case 13:return Vm(t,s,a);case 4:return pe(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=Fn(s,null,o,a):ns(t,s,o,a),s.child;case 11:return Pm(t,s,s.type,s.pendingProps,a);case 7:return ns(t,s,s.pendingProps,a),s.child;case 8:return ns(t,s,s.pendingProps.children,a),s.child;case 12:return ns(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,ar(s,s.type,o.value),ns(t,s,o.children,a),s.child;case 9:return d=s.type._context,o=s.pendingProps.children,Hr(s),d=hs(d),o=o(d),s.flags|=1,ns(t,s,o,a),s.child;case 14:return Lm(t,s,s.type,s.pendingProps,a);case 15:return Om(t,s,s.type,s.pendingProps,a);case 19:return Qm(t,s,a);case 31:return o=s.pendingProps,a=s.mode,o={mode:o.mode,children:o.children},t===null?(a=ao(o,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Ta(t.child,o),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Um(t,s,a);case 24:return Hr(s),o=hs(Gt),t===null?(d=Vc(),d===null&&(d=Et,h=$c(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=a),d=h),s.memoizedState={parent:o,cache:d},Qc(s),ar(s,Gt,d)):((t.lanes&a)!==0&&(Yc(t,s),jl(s,null,null,a),vl()),d=t.memoizedState,h=s.memoizedState,d.parent!==o?(d={parent:o,cache:o},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ar(s,Gt,o)):(o=h.cache,ar(s,Gt,o),o!==d.cache&&qc(s,[Gt],a,!0))),ns(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function qa(t){t.flags|=4}function Gm(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!sf(s)){if(s=Zs.current,s!==null&&((lt&4194048)===lt?ya!==null:(lt&62914560)!==lt&&(lt&536870912)===0||s!==ya))throw bl=Hc,Su;t.flags|=8192}}function ro(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?ze():536870912,t.lanes|=s,Sn|=s)}function Bl(t,s){if(!ut)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Mt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function Xb(t,s,a){var o=s.pendingProps;switch(Lc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Mt(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),La(Gt),ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(dl(s)?qa(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Eu())),Mt(s),null;case 26:return a=s.memoizedState,t===null?(qa(s),a!==null?(Mt(s),Gm(s,a)):(Mt(s),s.flags&=-16777217)):a?a!==t.memoizedState?(qa(s),Mt(s),Gm(s,a)):(Mt(s),s.flags&=-16777217):(t.memoizedProps!==o&&qa(s),Mt(s),s.flags&=-16777217),null;case 27:Te(s),a=Y.current;var d=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==o&&qa(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Mt(s),null}t=le.current,dl(s)?Cu(s):(t=Gh(d,o,a),s.stateNode=t,qa(s))}return Mt(s),null;case 5:if(Te(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&qa(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return Mt(s),null}if(t=le.current,dl(s))Cu(s);else{switch(d=bo(Y.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?d.createElement(a,{is:o.is}):d.createElement(a)}}t[Wt]=s,t[ms]=o;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=t;e:switch(is(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&qa(s)}}return Mt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&qa(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(i(166));if(t=Y.current,dl(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,d=bs,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[Wt]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||qh(t.nodeValue,a)),t||Ir(s)}else t=bo(t).createTextNode(o),t[Wt]=s,s.stateNode=t}return Mt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=dl(s),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Wt]=s}else ul(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),d=!1}else d=Eu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Ua(s),s):(Ua(s),null)}if(Ua(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=s.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var h=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==d&&(o.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),ro(s,s.updateQueue),Mt(s),null;case 4:return ye(),t===null&&Xx(s.stateNode.containerInfo),Mt(s),null;case 10:return La(s.type),Mt(s),null;case 19:if(oe(Xt),d=s.memoizedState,d===null)return Mt(s),null;if(o=(s.flags&128)!==0,h=d.rendering,h===null)if(o)Bl(d,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(h=Wi(t),h!==null){for(s.flags|=128,Bl(d,!1),t=h.updateQueue,s.updateQueue=t,ro(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Nu(a,t),a=a.sibling;return W(Xt,Xt.current&1|2),s.child}t=t.sibling}d.tail!==null&&it()>io&&(s.flags|=128,o=!0,Bl(d,!1),s.lanes=4194304)}else{if(!o)if(t=Wi(h),t!==null){if(s.flags|=128,o=!0,t=t.updateQueue,s.updateQueue=t,ro(s,t),Bl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!h.alternate&&!ut)return Mt(s),null}else 2*it()-d.renderingStartTime>io&&a!==536870912&&(s.flags|=128,o=!0,Bl(d,!1),s.lanes=4194304);d.isBackwards?(h.sibling=s.child,s.child=h):(t=d.last,t!==null?t.sibling=h:s.child=h,d.last=h)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=it(),s.sibling=null,t=Xt.current,W(Xt,o?t&1|2:t&1),s):(Mt(s),null);case 22:case 23:return Ua(s),Zc(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),a=s.updateQueue,a!==null&&ro(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&oe(Qr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),La(Gt),Mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Kb(t,s){switch(Lc(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return La(Gt),ye(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Te(s),null;case 13:if(Ua(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ul()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return oe(Xt),null;case 4:return ye(),null;case 10:return La(s.type),null;case 22:case 23:return Ua(s),Zc(),t!==null&&oe(Qr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return La(Gt),null;case 25:return null;default:return null}}function Xm(t,s){switch(Lc(s),s.tag){case 3:La(Gt),ye();break;case 26:case 27:case 5:Te(s);break;case 4:ye();break;case 13:Ua(s);break;case 19:oe(Xt);break;case 10:La(s.type);break;case 22:case 23:Ua(s),Zc(),t!==null&&oe(Qr);break;case 24:La(Gt)}}function kl(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&t)===t){o=void 0;var h=a.create,F=a.inst;o=h(),F.destroy=o}a=a.next}while(a!==d)}}catch(R){Ct(s,s.return,R)}}function xr(t,s,a){try{var o=s.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&t)===t){var F=o.inst,R=F.destroy;if(R!==void 0){F.destroy=void 0,d=s;var X=a,ie=R;try{ie()}catch(be){Ct(d,X,be)}}}o=o.next}while(o!==h)}}catch(be){Ct(s,s.return,be)}}function Km(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Lu(s,a)}catch(o){Ct(t,t.return,o)}}}function Zm(t,s,a){a.props=Gr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){Ct(t,s,o)}}function Dl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(d){Ct(t,s,d)}}function va(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){Ct(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Ct(t,s,d)}else a.current=null}function Jm(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){Ct(t,t.return,d)}}function Ax(t,s,a){try{var o=t.stateNode;p4(o,t.type,a,s),o[ms]=s}catch(d){Ct(t,t.return,d)}}function Wm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&br(t.type)||t.tag===4}function Ex(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fx(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=po));else if(o!==4&&(o===27&&br(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Fx(t,s,a),t=t.sibling;t!==null;)Fx(t,s,a),t=t.sibling}function no(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&br(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(no(t,s,a),t=t.sibling;t!==null;)no(t,s,a),t=t.sibling}function eh(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);is(s,o,a),s[Wt]=t,s[ms]=a}catch(h){Ct(t,t.return,h)}}var $a=!1,$t=!1,Bx=!1,th=typeof WeakSet=="function"?WeakSet:Set,ts=null;function Zb(t,s){if(t=t.containerInfo,Jx=Co,t=uu(t),Ec(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break e}var F=0,R=-1,X=-1,ie=0,be=0,je=t,ce=null;t:for(;;){for(var ue;je!==a||d!==0&&je.nodeType!==3||(R=F+d),je!==h||o!==0&&je.nodeType!==3||(X=F+o),je.nodeType===3&&(F+=je.nodeValue.length),(ue=je.firstChild)!==null;)ce=je,je=ue;for(;;){if(je===t)break t;if(ce===a&&++ie===d&&(R=F),ce===h&&++be===o&&(X=F),(ue=je.nextSibling)!==null)break;je=ce,ce=je.parentNode}je=ue}a=R===-1||X===-1?null:{start:R,end:X}}else a=null}a=a||{start:0,end:0}}else a=null;for(Wx={focusedElem:t,selectionRange:a},Co=!1,ts=s;ts!==null;)if(s=ts,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,ts=t;else for(;ts!==null;){switch(s=ts,h=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,a=s,d=h.memoizedProps,h=h.memoizedState,o=a.stateNode;try{var He=Gr(a.type,d,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(He,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(qe){Ct(a,a.return,qe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)sd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,ts=t;break}ts=s.return}}function sh(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:dr(t,a),o&4&&kl(5,a);break;case 1:if(dr(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(F){Ct(a,a.return,F)}else{var d=Gr(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(F){Ct(a,a.return,F)}}o&64&&Km(a),o&512&&Dl(a,a.return);break;case 3:if(dr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Lu(t,s)}catch(F){Ct(a,a.return,F)}}break;case 27:s===null&&o&4&&eh(a);case 26:case 5:dr(t,a),s===null&&o&4&&Jm(a),o&512&&Dl(a,a.return);break;case 12:dr(t,a);break;case 13:dr(t,a),o&4&&nh(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=l4.bind(null,a),C4(t,a))));break;case 22:if(o=a.memoizedState!==null||$a,!o){s=s!==null&&s.memoizedState!==null||$t,d=$a;var h=$t;$a=o,($t=s)&&!h?ur(t,a,(a.subtreeFlags&8772)!==0):dr(t,a),$a=d,$t=h}break;case 30:break;default:dr(t,a)}}function ah(t){var s=t.alternate;s!==null&&(t.alternate=null,ah(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&de(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Dt=null,As=!1;function Ia(t,s,a){for(a=a.child;a!==null;)rh(t,s,a),a=a.sibling}function rh(t,s,a){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(Ue,a)}catch{}switch(a.tag){case 26:$t||va(a,s),Ia(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:$t||va(a,s);var o=Dt,d=As;br(a.type)&&(Dt=a.stateNode,As=!1),Ia(t,s,a),Ul(a.stateNode),Dt=o,As=d;break;case 5:$t||va(a,s);case 6:if(o=Dt,d=As,Dt=null,Ia(t,s,a),Dt=o,As=d,Dt!==null)if(As)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(a.stateNode)}catch(h){Ct(a,s,h)}else try{Dt.removeChild(a.stateNode)}catch(h){Ct(a,s,h)}break;case 18:Dt!==null&&(As?(t=Dt,Qh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Yl(t)):Qh(Dt,a.stateNode));break;case 4:o=Dt,d=As,Dt=a.stateNode.containerInfo,As=!0,Ia(t,s,a),Dt=o,As=d;break;case 0:case 11:case 14:case 15:$t||xr(2,a,s),$t||xr(4,a,s),Ia(t,s,a);break;case 1:$t||(va(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Zm(a,s,o)),Ia(t,s,a);break;case 21:Ia(t,s,a);break;case 22:$t=(o=$t)||a.memoizedState!==null,Ia(t,s,a),$t=o;break;default:Ia(t,s,a)}}function nh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yl(t)}catch(a){Ct(s,s.return,a)}}function Jb(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new th),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new th),s;default:throw Error(i(435,t.tag))}}function kx(t,s){var a=Jb(t);s.forEach(function(o){var d=i4.bind(null,t,o);a.has(o)||(a.add(o),o.then(d,d))})}function Ls(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],h=t,F=s,R=F;e:for(;R!==null;){switch(R.tag){case 27:if(br(R.type)){Dt=R.stateNode,As=!1;break e}break;case 5:Dt=R.stateNode,As=!1;break e;case 3:case 4:Dt=R.stateNode.containerInfo,As=!0;break e}R=R.return}if(Dt===null)throw Error(i(160));rh(h,F,d),Dt=null,As=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)lh(s,t),s=s.sibling}var oa=null;function lh(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ls(s,t),Os(t),o&4&&(xr(3,t,t.return),kl(3,t),xr(5,t,t.return));break;case 1:Ls(s,t),Os(t),o&512&&($t||a===null||va(a,a.return)),o&64&&$a&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=oa;if(Ls(s,t),Os(t),o&512&&($t||a===null||va(a,a.return)),o&4){var h=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Rr]||h[Wt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(o),d.head.insertBefore(h,d.querySelector("head > title"))),is(h,o,a),h[Wt]=t,Ve(h),o=h;break e;case"link":var F=ef("link","href",d).get(o+(a.href||""));if(F){for(var R=0;R<F.length;R++)if(h=F[R],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){F.splice(R,1);break t}}h=d.createElement(o),is(h,o,a),d.head.appendChild(h);break;case"meta":if(F=ef("meta","content",d).get(o+(a.content||""))){for(R=0;R<F.length;R++)if(h=F[R],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){F.splice(R,1);break t}}h=d.createElement(o),is(h,o,a),d.head.appendChild(h);break;default:throw Error(i(468,o))}h[Wt]=t,Ve(h),o=h}t.stateNode=o}else tf(d,t.type,t.stateNode);else t.stateNode=Wh(d,o,t.memoizedProps);else h!==o?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,o===null?tf(d,t.type,t.stateNode):Wh(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Ax(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ls(s,t),Os(t),o&512&&($t||a===null||va(a,a.return)),a!==null&&o&4&&Ax(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ls(s,t),Os(t),o&512&&($t||a===null||va(a,a.return)),t.flags&32){d=t.stateNode;try{cn(d,"")}catch(ue){Ct(t,t.return,ue)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,Ax(t,d,a!==null?a.memoizedProps:d)),o&1024&&(Bx=!0);break;case 6:if(Ls(s,t),Os(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ue){Ct(t,t.return,ue)}}break;case 3:if(jo=null,d=oa,oa=yo(s.containerInfo),Ls(s,t),oa=d,Os(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Yl(s.containerInfo)}catch(ue){Ct(t,t.return,ue)}Bx&&(Bx=!1,ih(t));break;case 4:o=oa,oa=yo(t.stateNode.containerInfo),Ls(s,t),Os(t),oa=o;break;case 12:Ls(s,t),Os(t);break;case 13:Ls(s,t),Os(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Rx=it()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,kx(t,o)));break;case 22:d=t.memoizedState!==null;var X=a!==null&&a.memoizedState!==null,ie=$a,be=$t;if($a=ie||d,$t=be||X,Ls(s,t),$t=be,$a=ie,Os(t),o&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||X||$a||$t||Xr(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){X=a=s;try{if(h=X.stateNode,d)F=h.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{R=X.stateNode;var je=X.memoizedProps.style,ce=je!=null&&je.hasOwnProperty("display")?je.display:null;R.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){Ct(X,X.return,ue)}}}else if(s.tag===6){if(a===null){X=s;try{X.stateNode.nodeValue=d?"":X.memoizedProps}catch(ue){Ct(X,X.return,ue)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,kx(t,a))));break;case 19:Ls(s,t),Os(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,kx(t,o)));break;case 30:break;case 21:break;default:Ls(s,t),Os(t)}}function Os(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(Wm(o)){a=o;break}o=o.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,h=Ex(t);no(t,h,d);break;case 5:var F=a.stateNode;a.flags&32&&(cn(F,""),a.flags&=-33);var R=Ex(t);no(t,R,F);break;case 3:case 4:var X=a.stateNode.containerInfo,ie=Ex(t);Fx(t,ie,X);break;default:throw Error(i(161))}}catch(be){Ct(t,t.return,be)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function ih(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;ih(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function dr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)sh(t,s.alternate,s),s=s.sibling}function Xr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:xr(4,s,s.return),Xr(s);break;case 1:va(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Zm(s,s.return,a),Xr(s);break;case 27:Ul(s.stateNode);case 26:case 5:va(s,s.return),Xr(s);break;case 22:s.memoizedState===null&&Xr(s);break;case 30:Xr(s);break;default:Xr(s)}t=t.sibling}}function ur(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,d=t,h=s,F=h.flags;switch(h.tag){case 0:case 11:case 15:ur(d,h,a),kl(4,h);break;case 1:if(ur(d,h,a),o=h,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ie){Ct(o,o.return,ie)}if(o=h,d=o.updateQueue,d!==null){var R=o.stateNode;try{var X=d.shared.hiddenCallbacks;if(X!==null)for(d.shared.hiddenCallbacks=null,d=0;d<X.length;d++)Pu(X[d],R)}catch(ie){Ct(o,o.return,ie)}}a&&F&64&&Km(h),Dl(h,h.return);break;case 27:eh(h);case 26:case 5:ur(d,h,a),a&&o===null&&F&4&&Jm(h),Dl(h,h.return);break;case 12:ur(d,h,a);break;case 13:ur(d,h,a),a&&F&4&&nh(d,h);break;case 22:h.memoizedState===null&&ur(d,h,a),Dl(h,h.return);break;case 30:break;default:ur(d,h,a)}s=s.sibling}}function Dx(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&fl(a))}function Sx(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&fl(t))}function ja(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)oh(t,s,a,o),s=s.sibling}function oh(t,s,a,o){var d=s.flags;switch(s.tag){case 0:case 11:case 15:ja(t,s,a,o),d&2048&&kl(9,s);break;case 1:ja(t,s,a,o);break;case 3:ja(t,s,a,o),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&fl(t)));break;case 12:if(d&2048){ja(t,s,a,o),t=s.stateNode;try{var h=s.memoizedProps,F=h.id,R=h.onPostCommit;typeof R=="function"&&R(F,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(X){Ct(s,s.return,X)}}else ja(t,s,a,o);break;case 13:ja(t,s,a,o);break;case 23:break;case 22:h=s.stateNode,F=s.alternate,s.memoizedState!==null?h._visibility&2?ja(t,s,a,o):Sl(t,s):h._visibility&2?ja(t,s,a,o):(h._visibility|=2,Bn(t,s,a,o,(s.subtreeFlags&10256)!==0)),d&2048&&Dx(F,s);break;case 24:ja(t,s,a,o),d&2048&&Sx(s.alternate,s);break;default:ja(t,s,a,o)}}function Bn(t,s,a,o,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var h=t,F=s,R=a,X=o,ie=F.flags;switch(F.tag){case 0:case 11:case 15:Bn(h,F,R,X,d),kl(8,F);break;case 23:break;case 22:var be=F.stateNode;F.memoizedState!==null?be._visibility&2?Bn(h,F,R,X,d):Sl(h,F):(be._visibility|=2,Bn(h,F,R,X,d)),d&&ie&2048&&Dx(F.alternate,F);break;case 24:Bn(h,F,R,X,d),d&&ie&2048&&Sx(F.alternate,F);break;default:Bn(h,F,R,X,d)}s=s.sibling}}function Sl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,d=o.flags;switch(o.tag){case 22:Sl(a,o),d&2048&&Dx(o.alternate,o);break;case 24:Sl(a,o),d&2048&&Sx(o.alternate,o);break;default:Sl(a,o)}s=s.sibling}}var _l=8192;function kn(t){if(t.subtreeFlags&_l)for(t=t.child;t!==null;)ch(t),t=t.sibling}function ch(t){switch(t.tag){case 26:kn(t),t.flags&_l&&t.memoizedState!==null&&L4(oa,t.memoizedState,t.memoizedProps);break;case 5:kn(t);break;case 3:case 4:var s=oa;oa=yo(t.stateNode.containerInfo),kn(t),oa=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=_l,_l=16777216,kn(t),_l=s):kn(t));break;default:kn(t)}}function xh(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Tl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];ts=o,uh(o,t)}xh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dh(t),t=t.sibling}function dh(t){switch(t.tag){case 0:case 11:case 15:Tl(t),t.flags&2048&&xr(9,t,t.return);break;case 3:Tl(t);break;case 12:Tl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,lo(t)):Tl(t);break;default:Tl(t)}}function lo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];ts=o,uh(o,t)}xh(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:xr(8,s,s.return),lo(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,lo(s));break;default:lo(s)}t=t.sibling}}function uh(t,s){for(;ts!==null;){var a=ts;switch(a.tag){case 0:case 11:case 15:xr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:fl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ts=o;else e:for(a=t;ts!==null;){o=ts;var d=o.sibling,h=o.return;if(ah(o),o===a){ts=null;break e}if(d!==null){d.return=h,ts=d;break e}ts=h}}}var Wb={getCacheForType:function(t){var s=hs(Gt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},e4=typeof WeakMap=="function"?WeakMap:Map,ht=0,Et=null,tt=null,lt=0,ft=0,Us=null,mr=!1,Dn=!1,_x=!1,Va=0,Ot=0,hr=0,Kr=0,Tx=0,Js=0,Sn=0,Ml=null,Es=null,Mx=!1,Rx=0,io=1/0,oo=null,fr=null,ls=0,gr=null,_n=null,Tn=0,Px=0,Lx=null,mh=null,Rl=0,Ox=null;function zs(){if((ht&2)!==0&&lt!==0)return lt&-lt;if(B.T!==null){var t=vn;return t!==0?t:Hx()}return el()}function hh(){Js===0&&(Js=(lt&536870912)===0||ut?ke():536870912);var t=Zs.current;return t!==null&&(t.flags|=32),Js}function qs(t,s,a){(t===Et&&(ft===2||ft===9)||t.cancelPendingCommit!==null)&&(Mn(t,0),pr(t,lt,Js,!1)),At(t,a),((ht&2)===0||t!==Et)&&(t===Et&&((ht&2)===0&&(Kr|=a),Ot===4&&pr(t,lt,Js,!1)),Na(t))}function fh(t,s,a){if((ht&6)!==0)throw Error(i(327));var o=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Q(t,s),d=o?a4(t,s):qx(t,s,!0),h=o;do{if(d===0){Dn&&!o&&pr(t,s,0,!1);break}else{if(a=t.current.alternate,h&&!t4(a)){d=qx(t,s,!1),h=!1;continue}if(d===2){if(h=s,t.errorRecoveryDisabledLanes&h)var F=0;else F=t.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){s=F;e:{var R=t;d=Ml;var X=R.current.memoizedState.isDehydrated;if(X&&(Mn(R,F).flags|=256),F=qx(R,F,!1),F!==2){if(_x&&!X){R.errorRecoveryDisabledLanes|=h,Kr|=h,d=4;break e}h=Es,Es=d,h!==null&&(Es===null?Es=h:Es.push.apply(Es,h))}d=F}if(h=!1,d!==2)continue}}if(d===1){Mn(t,0),pr(t,s,0,!0);break}e:{switch(o=t,h=d,h){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:pr(o,s,Js,!mr);break e;case 2:Es=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=Rx+300-it(),10<d)){if(pr(o,s,Js,!mr),la(o,0,!0)!==0)break e;o.timeoutHandle=Vh(gh.bind(null,o,a,Es,oo,Mx,s,Js,Kr,Sn,mr,h,2,-0,0),d);break e}gh(o,a,Es,oo,Mx,s,Js,Kr,Sn,mr,h,0,-0,0)}}break}while(!0);Na(t)}function gh(t,s,a,o,d,h,F,R,X,ie,be,je,ce,ue){if(t.timeoutHandle=-1,je=s.subtreeFlags,(je&8192||(je&16785408)===16785408)&&($l={stylesheets:null,count:0,unsuspend:P4},ch(s),je=O4(),je!==null)){t.cancelPendingCommit=je(wh.bind(null,t,s,h,a,o,d,F,R,X,be,1,ce,ue)),pr(t,h,F,!ie);return}wh(t,s,h,a,o,d,F,R,X)}function t4(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],h=d.getSnapshot;d=d.value;try{if(!Rs(h(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pr(t,s,a,o){s&=~Tx,s&=~Kr,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var d=s;0<d;){var h=31-xt(d),F=1<<h;o[h]=-1,d&=~F}a!==0&&us(t,a,s)}function co(){return(ht&6)===0?(Pl(0),!1):!0}function Ux(){if(tt!==null){if(ft===0)var t=tt.return;else t=tt,Pa=Vr=null,sx(t),En=null,El=0,t=tt;for(;t!==null;)Xm(t.alternate,t),t=t.return;tt=null}}function Mn(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,y4(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ux(),Et=t,tt=a=Ta(t.current,null),lt=s,ft=0,Us=null,mr=!1,Dn=Q(t,s),_x=!1,Sn=Js=Tx=Kr=hr=Ot=0,Es=Ml=null,Mx=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var d=31-xt(o),h=1<<d;s|=t[d],o&=~h}return Va=s,Si(),a}function ph(t,s){Je=null,B.H=Ki,s===pl||s===zi?(s=Mu(),ft=3):s===Su?(s=Mu(),ft=4):ft=s===Rm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Us=s,tt===null&&(Ot=1,to(t,Ys(s,t.current)))}function bh(){var t=B.H;return B.H=Ki,t===null?Ki:t}function yh(){var t=B.A;return B.A=Wb,t}function zx(){Ot=4,mr||(lt&4194048)!==lt&&Zs.current!==null||(Dn=!0),(hr&134217727)===0&&(Kr&134217727)===0||Et===null||pr(Et,lt,Js,!1)}function qx(t,s,a){var o=ht;ht|=2;var d=bh(),h=yh();(Et!==t||lt!==s)&&(oo=null,Mn(t,s)),s=!1;var F=Ot;e:do try{if(ft!==0&&tt!==null){var R=tt,X=Us;switch(ft){case 8:Ux(),F=6;break e;case 3:case 2:case 9:case 6:Zs.current===null&&(s=!0);var ie=ft;if(ft=0,Us=null,Rn(t,R,X,ie),a&&Dn){F=0;break e}break;default:ie=ft,ft=0,Us=null,Rn(t,R,X,ie)}}s4(),F=Ot;break}catch(be){ph(t,be)}while(!0);return s&&t.shellSuspendCounter++,Pa=Vr=null,ht=o,B.H=d,B.A=h,tt===null&&(Et=null,lt=0,Si()),F}function s4(){for(;tt!==null;)vh(tt)}function a4(t,s){var a=ht;ht|=2;var o=bh(),d=yh();Et!==t||lt!==s?(oo=null,io=it()+500,Mn(t,s)):Dn=Q(t,s);e:do try{if(ft!==0&&tt!==null){s=tt;var h=Us;t:switch(ft){case 1:ft=0,Us=null,Rn(t,s,h,1);break;case 2:case 9:if(_u(h)){ft=0,Us=null,jh(s);break}s=function(){ft!==2&&ft!==9||Et!==t||(ft=7),Na(t)},h.then(s,s);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:_u(h)?(ft=0,Us=null,jh(s)):(ft=0,Us=null,Rn(t,s,h,7));break;case 5:var F=null;switch(tt.tag){case 26:F=tt.memoizedState;case 5:case 27:var R=tt;if(!F||sf(F)){ft=0,Us=null;var X=R.sibling;if(X!==null)tt=X;else{var ie=R.return;ie!==null?(tt=ie,xo(ie)):tt=null}break t}}ft=0,Us=null,Rn(t,s,h,5);break;case 6:ft=0,Us=null,Rn(t,s,h,6);break;case 8:Ux(),Ot=6;break e;default:throw Error(i(462))}}r4();break}catch(be){ph(t,be)}while(!0);return Pa=Vr=null,B.H=o,B.A=d,ht=a,tt!==null?0:(Et=null,lt=0,Si(),Ot)}function r4(){for(;tt!==null&&!Xe();)vh(tt)}function vh(t){var s=Ym(t.alternate,t,Va);t.memoizedProps=t.pendingProps,s===null?xo(t):tt=s}function jh(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=qm(a,s,s.pendingProps,s.type,void 0,lt);break;case 11:s=qm(a,s,s.pendingProps,s.type.render,s.ref,lt);break;case 5:sx(s);default:Xm(a,s),s=tt=Nu(s,Va),s=Ym(a,s,Va)}t.memoizedProps=t.pendingProps,s===null?xo(t):tt=s}function Rn(t,s,a,o){Pa=Vr=null,sx(s),En=null,El=0;var d=s.return;try{if(Yb(t,d,s,a,lt)){Ot=1,to(t,Ys(a,t.current)),tt=null;return}}catch(h){if(d!==null)throw tt=d,h;Ot=1,to(t,Ys(a,t.current)),tt=null;return}s.flags&32768?(ut||o===1?t=!0:Dn||(lt&536870912)!==0?t=!1:(mr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Zs.current,o!==null&&o.tag===13&&(o.flags|=16384))),Nh(s,t)):xo(s)}function xo(t){var s=t;do{if((s.flags&32768)!==0){Nh(s,mr);return}t=s.return;var a=Xb(s.alternate,s,Va);if(a!==null){tt=a;return}if(s=s.sibling,s!==null){tt=s;return}tt=s=t}while(s!==null);Ot===0&&(Ot=5)}function Nh(t,s){do{var a=Kb(t.alternate,t);if(a!==null){a.flags&=32767,tt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){tt=t;return}tt=t=a}while(t!==null);Ot=6,tt=null}function wh(t,s,a,o,d,h,F,R,X){t.cancelPendingCommit=null;do uo();while(ls!==0);if((ht&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(h=s.lanes|s.childLanes,h|=Sc,We(t,a,h,F,R,X),t===Et&&(tt=Et=null,lt=0),_n=s,gr=t,Tn=a,Px=h,Lx=d,mh=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,o4(G,function(){return Bh(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,d=k.p,k.p=2,F=ht,ht|=4;try{Zb(t,s,a)}finally{ht=F,k.p=d,B.T=o}}ls=1,Ch(),Ah(),Eh()}}function Ch(){if(ls===1){ls=0;var t=gr,s=_n,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var o=k.p;k.p=2;var d=ht;ht|=4;try{lh(s,t);var h=Wx,F=uu(t.containerInfo),R=h.focusedElem,X=h.selectionRange;if(F!==R&&R&&R.ownerDocument&&du(R.ownerDocument.documentElement,R)){if(X!==null&&Ec(R)){var ie=X.start,be=X.end;if(be===void 0&&(be=ie),"selectionStart"in R)R.selectionStart=ie,R.selectionEnd=Math.min(be,R.value.length);else{var je=R.ownerDocument||document,ce=je&&je.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),He=R.textContent.length,qe=Math.min(X.start,He),vt=X.end===void 0?qe:Math.min(X.end,He);!ue.extend&&qe>vt&&(F=vt,vt=qe,qe=F);var re=xu(R,qe),te=xu(R,vt);if(re&&te&&(ue.rangeCount!==1||ue.anchorNode!==re.node||ue.anchorOffset!==re.offset||ue.focusNode!==te.node||ue.focusOffset!==te.offset)){var ne=je.createRange();ne.setStart(re.node,re.offset),ue.removeAllRanges(),qe>vt?(ue.addRange(ne),ue.extend(te.node,te.offset)):(ne.setEnd(te.node,te.offset),ue.addRange(ne))}}}}for(je=[],ue=R;ue=ue.parentNode;)ue.nodeType===1&&je.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<je.length;R++){var ve=je[R];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Co=!!Jx,Wx=Jx=null}finally{ht=d,k.p=o,B.T=a}}t.current=s,ls=2}}function Ah(){if(ls===2){ls=0;var t=gr,s=_n,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var o=k.p;k.p=2;var d=ht;ht|=4;try{sh(t,s.alternate,s)}finally{ht=d,k.p=o,B.T=a}}ls=3}}function Eh(){if(ls===4||ls===3){ls=0,pt();var t=gr,s=_n,a=Tn,o=mh;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ls=5:(ls=0,_n=gr=null,Fh(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(fr=null),Wn(a),s=s.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(Ue,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=B.T,d=k.p,k.p=2,B.T=null;try{for(var h=t.onRecoverableError,F=0;F<o.length;F++){var R=o[F];h(R.value,{componentStack:R.stack})}}finally{B.T=s,k.p=d}}(Tn&3)!==0&&uo(),Na(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Ox?Rl++:(Rl=0,Ox=t):Rl=0,Pl(0)}}function Fh(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,fl(s)))}function uo(t){return Ch(),Ah(),Eh(),Bh()}function Bh(){if(ls!==5)return!1;var t=gr,s=Px;Px=0;var a=Wn(Tn),o=B.T,d=k.p;try{k.p=32>a?32:a,B.T=null,a=Lx,Lx=null;var h=gr,F=Tn;if(ls=0,_n=gr=null,Tn=0,(ht&6)!==0)throw Error(i(331));var R=ht;if(ht|=4,dh(h.current),oh(h,h.current,F,a),ht=R,Pl(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(Ue,h)}catch{}return!0}finally{k.p=d,B.T=o,Fh(t,s)}}function kh(t,s,a){s=Ys(a,s),s=gx(t.stateNode,s,2),t=lr(t,s,2),t!==null&&(At(t,2),Na(t))}function Ct(t,s,a){if(t.tag===3)kh(t,t,a);else for(;s!==null;){if(s.tag===3){kh(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(fr===null||!fr.has(o))){t=Ys(a,t),a=Tm(2),o=lr(s,a,2),o!==null&&(Mm(a,o,s,t),At(o,2),Na(o));break}}s=s.return}}function $x(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new e4;var d=new Set;o.set(s,d)}else d=o.get(s),d===void 0&&(d=new Set,o.set(s,d));d.has(a)||(_x=!0,d.add(a),t=n4.bind(null,t,s,a),s.then(t,t))}function n4(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Et===t&&(lt&a)===a&&(Ot===4||Ot===3&&(lt&62914560)===lt&&300>it()-Rx?(ht&2)===0&&Mn(t,0):Tx|=a,Sn===lt&&(Sn=0)),Na(t)}function Dh(t,s){s===0&&(s=ze()),t=gn(t,s),t!==null&&(At(t,s),Na(t))}function l4(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Dh(t,a)}function i4(t,s){var a=0;switch(t.tag){case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(s),Dh(t,a)}function o4(t,s){return Ze(t,s)}var mo=null,Pn=null,Ix=!1,ho=!1,Vx=!1,Zr=0;function Na(t){t!==Pn&&t.next===null&&(Pn===null?mo=Pn=t:Pn=Pn.next=t),ho=!0,Ix||(Ix=!0,x4())}function Pl(t,s){if(!Vx&&ho){Vx=!0;do for(var a=!1,o=mo;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var h=0;else{var F=o.suspendedLanes,R=o.pingedLanes;h=(1<<31-xt(42|t)+1)-1,h&=d&~(F&~R),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,Mh(o,h))}else h=lt,h=la(o,o===Et?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Q(o,h)||(a=!0,Mh(o,h));o=o.next}while(a);Vx=!1}}function c4(){Sh()}function Sh(){ho=Ix=!1;var t=0;Zr!==0&&(b4()&&(t=Zr),Zr=0);for(var s=it(),a=null,o=mo;o!==null;){var d=o.next,h=_h(o,s);h===0?(o.next=null,a===null?mo=d:a.next=d,d===null&&(Pn=a)):(a=o,(t!==0||(h&3)!==0)&&(ho=!0)),o=d}Pl(t)}function _h(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var F=31-xt(h),R=1<<F,X=d[F];X===-1?((R&a)===0||(R&o)!==0)&&(d[F]=he(R,s)):X<=s&&(t.expiredLanes|=R),h&=~R}if(s=Et,a=lt,a=la(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(ft===2||ft===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Ye(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Q(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&Ye(o),Wn(a)){case 2:case 8:a=ae;break;case 32:a=G;break;case 268435456:a=Ce;break;default:a=G}return o=Th.bind(null,t),a=Ze(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&Ye(o),t.callbackPriority=2,t.callbackNode=null,2}function Th(t,s){if(ls!==0&&ls!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(uo()&&t.callbackNode!==a)return null;var o=lt;return o=la(t,t===Et?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(fh(t,o,s),_h(t,it()),t.callbackNode!=null&&t.callbackNode===a?Th.bind(null,t):null)}function Mh(t,s){if(uo())return null;fh(t,s,!0)}function x4(){v4(function(){(ht&6)!==0?Ze(Fe,c4):Sh()})}function Hx(){return Zr===0&&(Zr=ke()),Zr}function Rh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ci(""+t)}function Ph(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function d4(t,s,a,o,d){if(s==="submit"&&a&&a.stateNode===d){var h=Rh((d[ms]||null).action),F=o.submitter;F&&(s=(s=F[ms]||null)?Rh(s.formAction):F.getAttribute("formAction"),s!==null&&(h=s,F=null));var R=new Bi("action","action",null,o,d);t.push({event:R,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Zr!==0){var X=F?Ph(d,F):new FormData(d);dx(a,{pending:!0,data:X,method:d.method,action:h},null,X)}}else typeof h=="function"&&(R.preventDefault(),X=F?Ph(d,F):new FormData(d),dx(a,{pending:!0,data:X,method:d.method,action:h},h,X))},currentTarget:d}]})}}for(var Qx=0;Qx<Dc.length;Qx++){var Yx=Dc[Qx],u4=Yx.toLowerCase(),m4=Yx[0].toUpperCase()+Yx.slice(1);ia(u4,"on"+m4)}ia(fu,"onAnimationEnd"),ia(gu,"onAnimationIteration"),ia(pu,"onAnimationStart"),ia("dblclick","onDoubleClick"),ia("focusin","onFocus"),ia("focusout","onBlur"),ia(Db,"onTransitionRun"),ia(Sb,"onTransitionStart"),ia(_b,"onTransitionCancel"),ia(bu,"onTransitionEnd"),pa("onMouseEnter",["mouseout","mouseover"]),pa("onMouseLeave",["mouseout","mouseover"]),pa("onPointerEnter",["pointerout","pointerover"]),pa("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function Lh(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],d=o.event;o=o.listeners;e:{var h=void 0;if(s)for(var F=o.length-1;0<=F;F--){var R=o[F],X=R.instance,ie=R.currentTarget;if(R=R.listener,X!==h&&d.isPropagationStopped())break e;h=R,d.currentTarget=ie;try{h(d)}catch(be){eo(be)}d.currentTarget=null,h=X}else for(F=0;F<o.length;F++){if(R=o[F],X=R.instance,ie=R.currentTarget,R=R.listener,X!==h&&d.isPropagationStopped())break e;h=R,d.currentTarget=ie;try{h(d)}catch(be){eo(be)}d.currentTarget=null,h=X}}}}function st(t,s){var a=s[tl];a===void 0&&(a=s[tl]=new Set);var o=t+"__bubble";a.has(o)||(Oh(s,t,2,!1),a.add(o))}function Gx(t,s,a){var o=0;s&&(o|=4),Oh(a,t,o,s)}var fo="_reactListening"+Math.random().toString(36).slice(2);function Xx(t){if(!t[fo]){t[fo]=!0,mt.forEach(function(a){a!=="selectionchange"&&(h4.has(a)||Gx(a,!1,t),Gx(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[fo]||(s[fo]=!0,Gx("selectionchange",!1,s))}}function Oh(t,s,a,o){switch(cf(s)){case 2:var d=q4;break;case 8:d=$4;break;default:d=cd}a=d.bind(null,s,a,t),d=void 0,!pc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Kx(t,s,a,o,d){var h=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var F=o.tag;if(F===3||F===4){var R=o.stateNode.containerInfo;if(R===d)break;if(F===4)for(F=o.return;F!==null;){var X=F.tag;if((X===3||X===4)&&F.stateNode.containerInfo===d)return;F=F.return}for(;R!==null;){if(F=Ne(R),F===null)return;if(X=F.tag,X===5||X===6||X===26||X===27){o=h=F;continue e}R=R.parentNode}}o=o.return}H0(function(){var ie=h,be=fc(a),je=[];e:{var ce=yu.get(t);if(ce!==void 0){var ue=Bi,He=t;switch(t){case"keypress":if(Ei(a)===0)break e;case"keydown":case"keyup":ue=ob;break;case"focusin":He="focus",ue=jc;break;case"focusout":He="blur",ue=jc;break;case"beforeblur":case"afterblur":ue=jc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Kp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=db;break;case fu:case gu:case pu:ue=Wp;break;case bu:ue=mb;break;case"scroll":case"scrollend":ue=Gp;break;case"wheel":ue=fb;break;case"copy":case"cut":case"paste":ue=tb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=K0;break;case"toggle":case"beforetoggle":ue=pb}var qe=(s&4)!==0,vt=!qe&&(t==="scroll"||t==="scrollend"),re=qe?ce!==null?ce+"Capture":null:ce;qe=[];for(var te=ie,ne;te!==null;){var ve=te;if(ne=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ne===null||re===null||(ve=sl(te,re),ve!=null&&qe.push(Ol(te,ve,ne))),vt)break;te=te.return}0<qe.length&&(ce=new ue(ce,He,null,a,be),je.push({event:ce,listeners:qe}))}}if((s&7)===0){e:{if(ce=t==="mouseover"||t==="pointerover",ue=t==="mouseout"||t==="pointerout",ce&&a!==hc&&(He=a.relatedTarget||a.fromElement)&&(Ne(He)||He[er]))break e;if((ue||ce)&&(ce=be.window===be?be:(ce=be.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?(He=a.relatedTarget||a.toElement,ue=ie,He=He?Ne(He):null,He!==null&&(vt=x(He),qe=He.tag,He!==vt||qe!==5&&qe!==27&&qe!==6)&&(He=null)):(ue=null,He=ie),ue!==He)){if(qe=G0,ve="onMouseLeave",re="onMouseEnter",te="mouse",(t==="pointerout"||t==="pointerover")&&(qe=K0,ve="onPointerLeave",re="onPointerEnter",te="pointer"),vt=ue==null?ce:Be(ue),ne=He==null?ce:Be(He),ce=new qe(ve,te+"leave",ue,a,be),ce.target=vt,ce.relatedTarget=ne,ve=null,Ne(be)===ie&&(qe=new qe(re,te+"enter",He,a,be),qe.target=ne,qe.relatedTarget=vt,ve=qe),vt=ve,ue&&He)t:{for(qe=ue,re=He,te=0,ne=qe;ne;ne=Ln(ne))te++;for(ne=0,ve=re;ve;ve=Ln(ve))ne++;for(;0<te-ne;)qe=Ln(qe),te--;for(;0<ne-te;)re=Ln(re),ne--;for(;te--;){if(qe===re||re!==null&&qe===re.alternate)break t;qe=Ln(qe),re=Ln(re)}qe=null}else qe=null;ue!==null&&Uh(je,ce,ue,qe,!1),He!==null&&vt!==null&&Uh(je,vt,He,qe,!0)}}e:{if(ce=ie?Be(ie):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var Se=ru;else if(su(ce))if(nu)Se=Fb;else{Se=Ab;var et=Cb}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ie&&mc(ie.elementType)&&(Se=ru):Se=Eb;if(Se&&(Se=Se(t,ie))){au(je,Se,a,be);break e}et&&et(t,ce,ie),t==="focusout"&&ie&&ce.type==="number"&&ie.memoizedProps.value!=null&&uc(ce,"number",ce.value)}switch(et=ie?Be(ie):window,t){case"focusin":(su(et)||et.contentEditable==="true")&&(mn=et,Fc=ie,xl=null);break;case"focusout":xl=Fc=mn=null;break;case"mousedown":Bc=!0;break;case"contextmenu":case"mouseup":case"dragend":Bc=!1,mu(je,a,be);break;case"selectionchange":if(kb)break;case"keydown":case"keyup":mu(je,a,be)}var Me;if(wc)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else un?eu(t,a)&&($e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&(Z0&&a.locale!=="ko"&&(un||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&un&&(Me=Q0()):(sr=be,bc="value"in sr?sr.value:sr.textContent,un=!0)),et=go(ie,$e),0<et.length&&($e=new X0($e,t,null,a,be),je.push({event:$e,listeners:et}),Me?$e.data=Me:(Me=tu(a),Me!==null&&($e.data=Me)))),(Me=yb?vb(t,a):jb(t,a))&&($e=go(ie,"onBeforeInput"),0<$e.length&&(et=new X0("onBeforeInput","beforeinput",null,a,be),je.push({event:et,listeners:$e}),et.data=Me)),d4(je,t,ie,a,be)}Lh(je,s)})}function Ol(t,s,a){return{instance:t,listener:s,currentTarget:a}}function go(t,s){for(var a=s+"Capture",o=[];t!==null;){var d=t,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=sl(t,a),d!=null&&o.unshift(Ol(t,d,h)),d=sl(t,s),d!=null&&o.push(Ol(t,d,h))),t.tag===3)return o;t=t.return}return[]}function Ln(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Uh(t,s,a,o,d){for(var h=s._reactName,F=[];a!==null&&a!==o;){var R=a,X=R.alternate,ie=R.stateNode;if(R=R.tag,X!==null&&X===o)break;R!==5&&R!==26&&R!==27||ie===null||(X=ie,d?(ie=sl(a,h),ie!=null&&F.unshift(Ol(a,ie,X))):d||(ie=sl(a,h),ie!=null&&F.push(Ol(a,ie,X)))),a=a.return}F.length!==0&&t.push({event:s,listeners:F})}var f4=/\r\n?/g,g4=/\u0000|\uFFFD/g;function zh(t){return(typeof t=="string"?t:""+t).replace(f4,`
`).replace(g4,"")}function qh(t,s){return s=zh(s),zh(t)===s}function po(){}function yt(t,s,a,o,d,h){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||cn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&cn(t,""+o);break;case"className":ji(t,"class",o);break;case"tabIndex":ji(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ji(t,a,o);break;case"style":I0(t,o,h);break;case"data":if(s!=="object"){ji(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Ci(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(s!=="input"&&yt(t,s,"name",d.name,d,null),yt(t,s,"formEncType",d.formEncType,d,null),yt(t,s,"formMethod",d.formMethod,d,null),yt(t,s,"formTarget",d.formTarget,d,null)):(yt(t,s,"encType",d.encType,d,null),yt(t,s,"method",d.method,d,null),yt(t,s,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Ci(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=po);break;case"onScroll":o!=null&&st("scroll",t);break;case"onScrollEnd":o!=null&&st("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Ci(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":st("beforetoggle",t),st("toggle",t),vi(t,"popover",o);break;case"xlinkActuate":Sa(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Sa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Sa(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Sa(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Sa(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Sa(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Sa(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Sa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Sa(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":vi(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Qp.get(a)||a,vi(t,a,o))}}function Zx(t,s,a,o,d,h){switch(a){case"style":I0(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof o=="string"?cn(t,o):(typeof o=="number"||typeof o=="bigint")&&cn(t,""+o);break;case"onScroll":o!=null&&st("scroll",t);break;case"onScrollEnd":o!=null&&st("scrollend",t);break;case"onClick":o!=null&&(t.onclick=po);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ns.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),h=t[ms]||null,h=h!=null?h[a]:null,typeof h=="function"&&t.removeEventListener(s,h,d),typeof o=="function")){typeof h!="function"&&h!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,d);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):vi(t,a,o)}}}function is(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",t),st("load",t);var o=!1,d=!1,h;for(h in a)if(a.hasOwnProperty(h)){var F=a[h];if(F!=null)switch(h){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:yt(t,s,h,F,a,null)}}d&&yt(t,s,"srcSet",a.srcSet,a,null),o&&yt(t,s,"src",a.src,a,null);return;case"input":st("invalid",t);var R=h=F=d=null,X=null,ie=null;for(o in a)if(a.hasOwnProperty(o)){var be=a[o];if(be!=null)switch(o){case"name":d=be;break;case"type":F=be;break;case"checked":X=be;break;case"defaultChecked":ie=be;break;case"value":h=be;break;case"defaultValue":R=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(i(137,s));break;default:yt(t,s,o,be,a,null)}}U0(t,h,R,X,ie,F,d,!1),Ni(t);return;case"select":st("invalid",t),o=F=h=null;for(d in a)if(a.hasOwnProperty(d)&&(R=a[d],R!=null))switch(d){case"value":h=R;break;case"defaultValue":F=R;break;case"multiple":o=R;default:yt(t,s,d,R,a,null)}s=h,a=F,t.multiple=!!o,s!=null?on(t,!!o,s,!1):a!=null&&on(t,!!o,a,!0);return;case"textarea":st("invalid",t),h=d=o=null;for(F in a)if(a.hasOwnProperty(F)&&(R=a[F],R!=null))switch(F){case"value":o=R;break;case"defaultValue":d=R;break;case"children":h=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:yt(t,s,F,R,a,null)}q0(t,o,d,h),Ni(t);return;case"option":for(X in a)if(a.hasOwnProperty(X)&&(o=a[X],o!=null))switch(X){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:yt(t,s,X,o,a,null)}return;case"dialog":st("beforetoggle",t),st("toggle",t),st("cancel",t),st("close",t);break;case"iframe":case"object":st("load",t);break;case"video":case"audio":for(o=0;o<Ll.length;o++)st(Ll[o],t);break;case"image":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"embed":case"source":case"link":st("error",t),st("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in a)if(a.hasOwnProperty(ie)&&(o=a[ie],o!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:yt(t,s,ie,o,a,null)}return;default:if(mc(s)){for(be in a)a.hasOwnProperty(be)&&(o=a[be],o!==void 0&&Zx(t,s,be,o,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(o=a[R],o!=null&&yt(t,s,R,o,a,null))}function p4(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,F=null,R=null,X=null,ie=null,be=null;for(ue in a){var je=a[ue];if(a.hasOwnProperty(ue)&&je!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":X=je;default:o.hasOwnProperty(ue)||yt(t,s,ue,null,o,je)}}for(var ce in o){var ue=o[ce];if(je=a[ce],o.hasOwnProperty(ce)&&(ue!=null||je!=null))switch(ce){case"type":h=ue;break;case"name":d=ue;break;case"checked":ie=ue;break;case"defaultChecked":be=ue;break;case"value":F=ue;break;case"defaultValue":R=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,s));break;default:ue!==je&&yt(t,s,ce,ue,o,je)}}dc(t,F,R,X,ie,be,h,d);return;case"select":ue=F=R=ce=null;for(h in a)if(X=a[h],a.hasOwnProperty(h)&&X!=null)switch(h){case"value":break;case"multiple":ue=X;default:o.hasOwnProperty(h)||yt(t,s,h,null,o,X)}for(d in o)if(h=o[d],X=a[d],o.hasOwnProperty(d)&&(h!=null||X!=null))switch(d){case"value":ce=h;break;case"defaultValue":R=h;break;case"multiple":F=h;default:h!==X&&yt(t,s,d,h,o,X)}s=R,a=F,o=ue,ce!=null?on(t,!!a,ce,!1):!!o!=!!a&&(s!=null?on(t,!!a,s,!0):on(t,!!a,a?[]:"",!1));return;case"textarea":ue=ce=null;for(R in a)if(d=a[R],a.hasOwnProperty(R)&&d!=null&&!o.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:yt(t,s,R,null,o,d)}for(F in o)if(d=o[F],h=a[F],o.hasOwnProperty(F)&&(d!=null||h!=null))switch(F){case"value":ce=d;break;case"defaultValue":ue=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==h&&yt(t,s,F,d,o,h)}z0(t,ce,ue);return;case"option":for(var He in a)if(ce=a[He],a.hasOwnProperty(He)&&ce!=null&&!o.hasOwnProperty(He))switch(He){case"selected":t.selected=!1;break;default:yt(t,s,He,null,o,ce)}for(X in o)if(ce=o[X],ue=a[X],o.hasOwnProperty(X)&&ce!==ue&&(ce!=null||ue!=null))switch(X){case"selected":t.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:yt(t,s,X,ce,o,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in a)ce=a[qe],a.hasOwnProperty(qe)&&ce!=null&&!o.hasOwnProperty(qe)&&yt(t,s,qe,null,o,ce);for(ie in o)if(ce=o[ie],ue=a[ie],o.hasOwnProperty(ie)&&ce!==ue&&(ce!=null||ue!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,s));break;default:yt(t,s,ie,ce,o,ue)}return;default:if(mc(s)){for(var vt in a)ce=a[vt],a.hasOwnProperty(vt)&&ce!==void 0&&!o.hasOwnProperty(vt)&&Zx(t,s,vt,void 0,o,ce);for(be in o)ce=o[be],ue=a[be],!o.hasOwnProperty(be)||ce===ue||ce===void 0&&ue===void 0||Zx(t,s,be,ce,o,ue);return}}for(var re in a)ce=a[re],a.hasOwnProperty(re)&&ce!=null&&!o.hasOwnProperty(re)&&yt(t,s,re,null,o,ce);for(je in o)ce=o[je],ue=a[je],!o.hasOwnProperty(je)||ce===ue||ce==null&&ue==null||yt(t,s,je,ce,o,ue)}var Jx=null,Wx=null;function bo(t){return t.nodeType===9?t:t.ownerDocument}function $h(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ih(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function ed(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var td=null;function b4(){var t=window.event;return t&&t.type==="popstate"?t===td?!1:(td=t,!0):(td=null,!1)}var Vh=typeof setTimeout=="function"?setTimeout:void 0,y4=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,v4=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(t){return Hh.resolve(null).then(t).catch(j4)}:Vh;function j4(t){setTimeout(function(){throw t})}function br(t){return t==="head"}function Qh(t,s){var a=s,o=0,d=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(0<o&&8>o){a=o;var F=t.ownerDocument;if(a&1&&Ul(F.documentElement),a&2&&Ul(F.body),a&4)for(a=F.head,Ul(a),F=a.firstChild;F;){var R=F.nextSibling,X=F.nodeName;F[Rr]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&F.rel.toLowerCase()==="stylesheet"||a.removeChild(F),F=R}}if(d===0){t.removeChild(h),Yl(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:o=a.charCodeAt(0)-48;else o=0;a=h}while(a);Yl(s)}function sd(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":sd(a),de(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function N4(t,s,a,o){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Rr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=ca(t.nextSibling),t===null)break}return null}function w4(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ca(t.nextSibling),t===null))return null;return t}function ad(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function C4(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ca(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var rd=null;function Yh(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function Gh(t,s,a){switch(s=bo(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Ul(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);de(t)}var Ws=new Map,Xh=new Set;function yo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ha=k.d;k.d={f:A4,r:E4,D:F4,C:B4,L:k4,m:D4,X:_4,S:S4,M:T4};function A4(){var t=Ha.f(),s=co();return t||s}function E4(t){var s=De(t);s!==null&&s.tag===5&&s.type==="form"?fm(s):Ha.r(t)}var On=typeof document>"u"?null:document;function Kh(t,s,a){var o=On;if(o&&typeof s=="string"&&s){var d=Qs(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Xh.has(d)||(Xh.add(d),t={rel:t,crossOrigin:a,href:s},o.querySelector(d)===null&&(s=o.createElement("link"),is(s,"link",t),Ve(s),o.head.appendChild(s)))}}function F4(t){Ha.D(t),Kh("dns-prefetch",t,null)}function B4(t,s){Ha.C(t,s),Kh("preconnect",t,s)}function k4(t,s,a){Ha.L(t,s,a);var o=On;if(o&&t&&s){var d='link[rel="preload"][as="'+Qs(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Qs(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Qs(a.imageSizes)+'"]')):d+='[href="'+Qs(t)+'"]';var h=d;switch(s){case"style":h=Un(t);break;case"script":h=zn(t)}Ws.has(h)||(t=b({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Ws.set(h,t),o.querySelector(d)!==null||s==="style"&&o.querySelector(zl(h))||s==="script"&&o.querySelector(ql(h))||(s=o.createElement("link"),is(s,"link",t),Ve(s),o.head.appendChild(s)))}}function D4(t,s){Ha.m(t,s);var a=On;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Qs(o)+'"][href="'+Qs(t)+'"]',h=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=zn(t)}if(!Ws.has(h)&&(t=b({rel:"modulepreload",href:t},s),Ws.set(h,t),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ql(h)))return}o=a.createElement("link"),is(o,"link",t),Ve(o),a.head.appendChild(o)}}}function S4(t,s,a){Ha.S(t,s,a);var o=On;if(o&&t){var d=Oe(o).hoistableStyles,h=Un(t);s=s||"default";var F=d.get(h);if(!F){var R={loading:0,preload:null};if(F=o.querySelector(zl(h)))R.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Ws.get(h))&&nd(t,a);var X=F=o.createElement("link");Ve(X),is(X,"link",t),X._p=new Promise(function(ie,be){X.onload=ie,X.onerror=be}),X.addEventListener("load",function(){R.loading|=1}),X.addEventListener("error",function(){R.loading|=2}),R.loading|=4,vo(F,s,o)}F={type:"stylesheet",instance:F,count:1,state:R},d.set(h,F)}}}function _4(t,s){Ha.X(t,s);var a=On;if(a&&t){var o=Oe(a).hoistableScripts,d=zn(t),h=o.get(d);h||(h=a.querySelector(ql(d)),h||(t=b({src:t,async:!0},s),(s=Ws.get(d))&&ld(t,s),h=a.createElement("script"),Ve(h),is(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function T4(t,s){Ha.M(t,s);var a=On;if(a&&t){var o=Oe(a).hoistableScripts,d=zn(t),h=o.get(d);h||(h=a.querySelector(ql(d)),h||(t=b({src:t,async:!0,type:"module"},s),(s=Ws.get(d))&&ld(t,s),h=a.createElement("script"),Ve(h),is(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function Zh(t,s,a,o){var d=(d=Y.current)?yo(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Un(a.href),a=Oe(d).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Un(a.href);var h=Oe(d).hoistableStyles,F=h.get(t);if(F||(d=d.ownerDocument||d,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,F),(h=d.querySelector(zl(t)))&&!h._p&&(F.instance=h,F.state.loading=5),Ws.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ws.set(t,a),h||M4(d,t,a,F.state))),s&&o===null)throw Error(i(528,""));return F}if(s&&o!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zn(a),a=Oe(d).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Un(t){return'href="'+Qs(t)+'"'}function zl(t){return'link[rel="stylesheet"]['+t+"]"}function Jh(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function M4(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),is(s,"link",a),Ve(s),t.head.appendChild(s))}function zn(t){return'[src="'+Qs(t)+'"]'}function ql(t){return"script[async]"+t}function Wh(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+Qs(a.href)+'"]');if(o)return s.instance=o,Ve(o),o;var d=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Ve(o),is(o,"style",d),vo(o,a.precedence,t),s.instance=o;case"stylesheet":d=Un(a.href);var h=t.querySelector(zl(d));if(h)return s.state.loading|=4,s.instance=h,Ve(h),h;o=Jh(a),(d=Ws.get(d))&&nd(o,d),h=(t.ownerDocument||t).createElement("link"),Ve(h);var F=h;return F._p=new Promise(function(R,X){F.onload=R,F.onerror=X}),is(h,"link",o),s.state.loading|=4,vo(h,a.precedence,t),s.instance=h;case"script":return h=zn(a.src),(d=t.querySelector(ql(h)))?(s.instance=d,Ve(d),d):(o=a,(d=Ws.get(h))&&(o=b({},a),ld(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),Ve(d),is(d,"link",o),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,vo(o,a.precedence,t));return s.instance}function vo(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,h=d,F=0;F<o.length;F++){var R=o[F];if(R.dataset.precedence===s)h=R;else if(h!==d)break}h?h.parentNode.insertBefore(t,h.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function nd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function ld(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var jo=null;function ef(t,s,a){if(jo===null){var o=new Map,d=jo=new Map;d.set(a,o)}else d=jo,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var h=a[d];if(!(h[Rr]||h[Wt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var F=h.getAttribute(s)||"";F=t+F;var R=o.get(F);R?R.push(h):o.set(F,[h])}}return o}function tf(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function R4(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function sf(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var $l=null;function P4(){}function L4(t,s,a){if($l===null)throw Error(i(475));var o=$l;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Un(a.href),h=t.querySelector(zl(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=No.bind(o),t.then(o,o)),s.state.loading|=4,s.instance=h,Ve(h);return}h=t.ownerDocument||t,a=Jh(a),(d=Ws.get(d))&&nd(a,d),h=h.createElement("link"),Ve(h);var F=h;F._p=new Promise(function(R,X){F.onload=R,F.onerror=X}),is(h,"link",a),s.instance=h}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(o.count++,s=No.bind(o),t.addEventListener("load",s),t.addEventListener("error",s))}}function O4(){if($l===null)throw Error(i(475));var t=$l;return t.stylesheets&&t.count===0&&id(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&id(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function No(){if(this.count--,this.count===0){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wo=null;function id(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wo=new Map,s.forEach(U4,t),wo=null,No.call(t))}function U4(t,s){if(!(s.state.loading&4)){var a=wo.get(t);if(a)var o=a.get(null);else{a=new Map,wo.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var F=d[h];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(a.set(F.dataset.precedence,F),o=F)}o&&a.set(null,o)}d=s.instance,F=d.getAttribute("data-precedence"),h=a.get(F)||o,h===o&&a.set(null,d),a.set(F,d),this.count++,o=No.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),h?h.parentNode.insertBefore(d,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var Il={$$typeof:A,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function z4(t,s,a,o,d,h,F,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function af(t,s,a,o,d,h,F,R,X,ie,be,je){return t=new z4(t,s,a,F,R,X,ie,je),s=1,h===!0&&(s|=24),h=Ps(3,null,null,s),t.current=h,h.stateNode=t,s=$c(),s.refCount++,t.pooledCache=s,s.refCount++,h.memoizedState={element:o,isDehydrated:a,cache:s},Qc(h),t}function rf(t){return t?(t=pn,t):pn}function nf(t,s,a,o,d,h){d=rf(d),o.context===null?o.context=d:o.pendingContext=d,o=nr(s),o.payload={element:a},h=h===void 0?null:h,h!==null&&(o.callback=h),a=lr(t,o,s),a!==null&&(qs(a,t,s),yl(a,t,s))}function lf(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function od(t,s){lf(t,s),(t=t.alternate)&&lf(t,s)}function of(t){if(t.tag===13){var s=gn(t,67108864);s!==null&&qs(s,t,67108864),od(t,67108864)}}var Co=!0;function q4(t,s,a,o){var d=B.T;B.T=null;var h=k.p;try{k.p=2,cd(t,s,a,o)}finally{k.p=h,B.T=d}}function $4(t,s,a,o){var d=B.T;B.T=null;var h=k.p;try{k.p=8,cd(t,s,a,o)}finally{k.p=h,B.T=d}}function cd(t,s,a,o){if(Co){var d=xd(o);if(d===null)Kx(t,s,o,Ao,a),xf(t,o);else if(V4(d,t,s,a,o))o.stopPropagation();else if(xf(t,o),s&4&&-1<I4.indexOf(t)){for(;d!==null;){var h=De(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var F=js(h.pendingLanes);if(F!==0){var R=h;for(R.pendingLanes|=2,R.entangledLanes|=2;F;){var X=1<<31-xt(F);R.entanglements[1]|=X,F&=~X}Na(h),(ht&6)===0&&(io=it()+500,Pl(0))}}break;case 13:R=gn(h,2),R!==null&&qs(R,h,2),co(),od(h,2)}if(h=xd(o),h===null&&Kx(t,s,o,Ao,a),h===d)break;d=h}d!==null&&o.stopPropagation()}else Kx(t,s,o,null,a)}}function xd(t){return t=fc(t),dd(t)}var Ao=null;function dd(t){if(Ao=null,t=Ne(t),t!==null){var s=x(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Ao=t,null}function cf(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Fe:return 2;case ae:return 8;case G:case me:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var ud=!1,yr=null,vr=null,jr=null,Vl=new Map,Hl=new Map,Nr=[],I4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xf(t,s){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Vl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(s.pointerId)}}function Ql(t,s,a,o,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:h,targetContainers:[d]},s!==null&&(s=De(s),s!==null&&of(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function V4(t,s,a,o,d){switch(s){case"focusin":return yr=Ql(yr,t,s,a,o,d),!0;case"dragenter":return vr=Ql(vr,t,s,a,o,d),!0;case"mouseover":return jr=Ql(jr,t,s,a,o,d),!0;case"pointerover":var h=d.pointerId;return Vl.set(h,Ql(Vl.get(h)||null,t,s,a,o,d)),!0;case"gotpointercapture":return h=d.pointerId,Hl.set(h,Ql(Hl.get(h)||null,t,s,a,o,d)),!0}return!1}function df(t){var s=Ne(t.target);if(s!==null){var a=x(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,nc(t.priority,function(){if(a.tag===13){var o=zs();o=Jn(o);var d=gn(a,o);d!==null&&qs(d,a,o),od(a,o)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eo(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=xd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);hc=o,a.target.dispatchEvent(o),hc=null}else return s=De(a),s!==null&&of(s),t.blockedOn=a,!1;s.shift()}return!0}function uf(t,s,a){Eo(t)&&a.delete(s)}function H4(){ud=!1,yr!==null&&Eo(yr)&&(yr=null),vr!==null&&Eo(vr)&&(vr=null),jr!==null&&Eo(jr)&&(jr=null),Vl.forEach(uf),Hl.forEach(uf)}function Fo(t,s){t.blockedOn===s&&(t.blockedOn=null,ud||(ud=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,H4)))}var Bo=null;function mf(t){Bo!==t&&(Bo=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bo===t&&(Bo=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],d=t[s+2];if(typeof o!="function"){if(dd(o||a)===null)continue;break}var h=De(a);h!==null&&(t.splice(s,3),s-=3,dx(h,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function Yl(t){function s(X){return Fo(X,t)}yr!==null&&Fo(yr,t),vr!==null&&Fo(vr,t),jr!==null&&Fo(jr,t),Vl.forEach(s),Hl.forEach(s);for(var a=0;a<Nr.length;a++){var o=Nr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Nr.length&&(a=Nr[0],a.blockedOn===null);)df(a),a.blockedOn===null&&Nr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],h=a[o+1],F=d[ms]||null;if(typeof h=="function")F||mf(a);else if(F){var R=null;if(h&&h.hasAttribute("formAction")){if(d=h,F=h[ms]||null)R=F.formAction;else if(dd(d)!==null)continue}else R=F.action;typeof R=="function"?a[o+1]=R:(a.splice(o,3),o-=3),mf(a)}}}function md(t){this._internalRoot=t}ko.prototype.render=md.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,o=zs();nf(a,o,t,s,null,null)},ko.prototype.unmount=md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;nf(t.current,2,null,t,null,null),co(),s[er]=null}};function ko(t){this._internalRoot=t}ko.prototype.unstable_scheduleHydration=function(t){if(t){var s=el();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Nr.length&&s!==0&&s<Nr[a].priority;a++);Nr.splice(a,0,t),a===0&&df(t)}};var hf=r.version;if(hf!=="19.1.1")throw Error(i(527,hf,"19.1.1"));k.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=m(s),t=t!==null?f(t):null,t=t===null?null:t.stateNode,t};var Q4={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Do=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Do.isDisabled&&Do.supportsFiber)try{Ue=Do.inject(Q4),Ie=Do}catch{}}return Xl.createRoot=function(t,s){if(!c(t))throw Error(i(299));var a=!1,o="",d=km,h=Dm,F=Sm,R=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(h=s.onCaughtError),s.onRecoverableError!==void 0&&(F=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(R=s.unstable_transitionCallbacks)),s=af(t,1,!1,null,null,a,o,d,h,F,R,null),t[er]=s.current,Xx(t),new md(s)},Xl.hydrateRoot=function(t,s,a){if(!c(t))throw Error(i(299));var o=!1,d="",h=km,F=Dm,R=Sm,X=null,ie=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(F=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(X=a.unstable_transitionCallbacks),a.formState!==void 0&&(ie=a.formState)),s=af(t,1,!0,s,a??null,o,d,h,F,R,X,ie),s.context=rf(null),a=s.current,o=zs(),o=Jn(o),d=nr(o),d.callback=null,lr(a,d,o),a=o,s.current.lanes=a,At(s,a),Na(s),t[er]=s.current,Xx(t),new ko(s)},Xl.version="19.1.1",Xl}var Cf;function t2(){if(Cf)return gd.exports;Cf=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),gd.exports=e2(),gd.exports}var s2=t2(),Aa=[],ta=[],a2=Uint8Array,vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var qn=0,r2=vd.length;qn<r2;++qn)Aa[qn]=vd[qn],ta[vd.charCodeAt(qn)]=qn;ta[45]=62;ta[95]=63;function n2(n){var r=n.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=n.indexOf("=");l===-1&&(l=r);var i=l===r?0:4-l%4;return[l,i]}function l2(n,r,l){return(r+l)*3/4-l}function ri(n){var r,l=n2(n),i=l[0],c=l[1],x=new a2(l2(n,i,c)),u=0,g=c>0?i-4:i,m;for(m=0;m<g;m+=4)r=ta[n.charCodeAt(m)]<<18|ta[n.charCodeAt(m+1)]<<12|ta[n.charCodeAt(m+2)]<<6|ta[n.charCodeAt(m+3)],x[u++]=r>>16&255,x[u++]=r>>8&255,x[u++]=r&255;return c===2&&(r=ta[n.charCodeAt(m)]<<2|ta[n.charCodeAt(m+1)]>>4,x[u++]=r&255),c===1&&(r=ta[n.charCodeAt(m)]<<10|ta[n.charCodeAt(m+1)]<<4|ta[n.charCodeAt(m+2)]>>2,x[u++]=r>>8&255,x[u++]=r&255),x}function i2(n){return Aa[n>>18&63]+Aa[n>>12&63]+Aa[n>>6&63]+Aa[n&63]}function o2(n,r,l){for(var i,c=[],x=r;x<l;x+=3)i=(n[x]<<16&16711680)+(n[x+1]<<8&65280)+(n[x+2]&255),c.push(i2(i));return c.join("")}function ni(n){for(var r,l=n.length,i=l%3,c=[],x=16383,u=0,g=l-i;u<g;u+=x)c.push(o2(n,u,u+x>g?g:u+x));return i===1?(r=n[l-1],c.push(Aa[r>>2]+Aa[r<<4&63]+"==")):i===2&&(r=(n[l-2]<<8)+n[l-1],c.push(Aa[r>>10]+Aa[r>>4&63]+Aa[r<<2&63]+"=")),c.join("")}function Ya(n){if(n===void 0)return{};if(!Sg(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function c2(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function Sg(n){const r=typeof n=="object",l=Object.getPrototypeOf(n),i=l===null||l===Object.prototype||l?.constructor?.name==="Object";return r&&i}const _g=!0,Qn=BigInt("-9223372036854775808"),b0=BigInt("9223372036854775807"),t0=BigInt("0"),x2=BigInt("8"),d2=BigInt("256");function Tg(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function u2(n){n<t0&&(n-=Qn+Qn);let r=n.toString(16);r.length%2===1&&(r="0"+r);const l=new Uint8Array(new ArrayBuffer(8));let i=0;for(const c of r.match(/.{2}/g).reverse())l.set([parseInt(c,16)],i++),n>>=x2;return ni(l)}function m2(n){const r=ri(n);if(r.byteLength!==8)throw new Error(`Received ${r.byteLength} bytes, expected 8 for $integer`);let l=t0,i=t0;for(const c of r)l+=BigInt(c)*d2**i,i++;return l>b0&&(l+=Qn+Qn),l}function h2(n){if(n<Qn||b0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const r=new ArrayBuffer(8);return new DataView(r).setBigInt64(0,n,!0),ni(new Uint8Array(r))}function f2(n){const r=ri(n);if(r.byteLength!==8)throw new Error(`Received ${r.byteLength} bytes, expected 8 for $integer`);return new DataView(r.buffer).getBigInt64(0,!0)}const g2=DataView.prototype.setBigInt64?h2:u2,p2=DataView.prototype.getBigInt64?f2:m2,Af=1024;function Mg(n){if(n.length>Af)throw new Error(`Field name ${n} exceeds maximum field name length ${Af}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let r=0;r<n.length;r+=1){const l=n.charCodeAt(r);if(l<32||l>=127)throw new Error(`Field name ${n} has invalid character '${n[r]}': Field names can only contain non-control ASCII characters`)}}function Yn(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(i=>Yn(i));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const r=Object.entries(n);if(r.length===1){const i=r[0][0];if(i==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return ri(n.$bytes).buffer}if(i==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return p2(n.$integer)}if(i==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const c=ri(n.$float);if(c.byteLength!==8)throw new Error(`Received ${c.byteLength} bytes, expected 8 for $float`);const u=new DataView(c.buffer).getFloat64(0,_g);if(!Tg(u))throw new Error(`Float ${u} should be encoded as a number`);return u}if(i==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(i==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const l={};for(const[i,c]of Object.entries(n))Mg(i),l[i]=Yn(c);return l}function ti(n){return JSON.stringify(n,(r,l)=>l===void 0?"undefined":typeof l=="bigint"?`${l.toString()}n`:l)}function s0(n,r,l,i){if(n===void 0){const u=l&&` (present at path ${l} in original object ${ti(r)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<Qn||b0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:g2(n)}}if(typeof n=="number")if(Tg(n)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,n,_g),{$float:ni(new Uint8Array(u))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:ni(new Uint8Array(n))};if(Array.isArray(n))return n.map((u,g)=>s0(u,r,l+`[${g}]`));if(n instanceof Set)throw new Error(jd(l,"Set",[...n],r));if(n instanceof Map)throw new Error(jd(l,"Map",[...n],r));if(!Sg(n)){const u=n?.constructor?.name,g=u?`${u} `:"";throw new Error(jd(l,g,n,r))}const c={},x=Object.entries(n);x.sort(([u,g],[m,f])=>u===m?0:u<m?-1:1);for(const[u,g]of x)g!==void 0&&(Mg(u),c[u]=s0(g,r,l+`.${u}`));return c}function jd(n,r,l,i){return n?`${r}${ti(l)} is not a supported Convex type (present at path ${n} in original object ${ti(i)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${r}${ti(l)} is not a supported Convex type.`}function Dr(n){return s0(n,n,"")}var b2=Object.defineProperty,y2=(n,r,l)=>r in n?b2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,Nd=(n,r,l)=>y2(n,typeof r!="symbol"?r+"":r,l),Ef,Ff;const v2=Symbol.for("ConvexError");class a0 extends(Ff=Error,Ef=v2,Ff){constructor(r){super(typeof r=="string"?r:ti(r)),Nd(this,"name","ConvexError"),Nd(this,"data"),Nd(this,Ef,!0),this.data=r}}const Rg=()=>Array.from({length:4},()=>0);Rg();Rg();const Bf="1.26.1";var j2=Object.defineProperty,N2=(n,r,l)=>r in n?j2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,kf=(n,r,l)=>N2(n,typeof r!="symbol"?r+"":r,l);const w2="color:rgb(0, 145, 255)";function Pg(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class Lg{constructor(r){kf(this,"_onLogLineFuncs"),kf(this,"_verbose"),this._onLogLineFuncs={},this._verbose=r.verbose}addLogLineListener(r){let l=Math.random().toString(36).substring(2,15);for(let i=0;i<10&&this._onLogLineFuncs[l]!==void 0;i++)l=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[l]=r,()=>{delete this._onLogLineFuncs[l]}}logVerbose(...r){if(this._verbose)for(const l of Object.values(this._onLogLineFuncs))l("debug",`${new Date().toISOString()}`,...r)}log(...r){for(const l of Object.values(this._onLogLineFuncs))l("info",...r)}warn(...r){for(const l of Object.values(this._onLogLineFuncs))l("warn",...r)}error(...r){for(const l of Object.values(this._onLogLineFuncs))l("error",...r)}}function Og(n){const r=new Lg(n);return r.addLogLineListener((l,...i)=>{switch(l){case"debug":console.debug(...i);break;case"info":console.log(...i);break;case"warn":console.warn(...i);break;case"error":console.error(...i);break;default:console.log(...i)}}),r}function Ug(n){return new Lg(n)}function Ho(n,r,l,i,c){const x=Pg(l);if(typeof c=="object"&&(c=`ConvexError ${JSON.stringify(c.errorData,null,2)}`),r==="info"){const u=c.match(/^\[.*?\] /);if(u===null){n.error(`[CONVEX ${x}(${i})] Could not parse console.log`);return}const g=c.slice(1,u[0].length-2),m=c.slice(u[0].length);n.log(`%c[CONVEX ${x}(${i})] [${g}]`,w2,m)}else n.error(`[CONVEX ${x}(${i})] ${c}`)}function C2(n,r){const l=`[CONVEX FATAL ERROR] ${r}`;return n.error(l),new Error(l)}function In(n,r,l){return`[CONVEX ${Pg(n)}(${r})] ${l.errorMessage}
  Called by client`}function r0(n,r){return r.data=n.errorData,r}function Qo(n){const r=n.split(":");let l,i;return r.length===1?(l=r[0],i="default"):(l=r.slice(0,r.length-1).join(":"),i=r[r.length-1]),l.endsWith(".js")&&(l=l.slice(0,-3)),`${l}:${i}`}function tn(n,r){return JSON.stringify({udfPath:Qo(n),args:Dr(r)})}var A2=Object.defineProperty,E2=(n,r,l)=>r in n?A2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,wa=(n,r,l)=>E2(n,typeof r!="symbol"?r+"":r,l);class F2{constructor(){wa(this,"nextQueryId"),wa(this,"querySetVersion"),wa(this,"querySet"),wa(this,"queryIdToToken"),wa(this,"identityVersion"),wa(this,"auth"),wa(this,"outstandingQueriesOlderThanRestart"),wa(this,"outstandingAuthOlderThanRestart"),wa(this,"paused"),wa(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(r,l,i,c){const x=Qo(r),u=tn(x,l),g=this.querySet.get(u);if(g!==void 0)return g.numSubscribers+=1,{queryToken:u,modification:null,unsubscribe:()=>this.removeSubscriber(u)};{const m=this.nextQueryId++,f={id:m,canonicalizedUdfPath:x,args:l,numSubscribers:1,journal:i,componentPath:c};this.querySet.set(u,f),this.queryIdToToken.set(m,u);const b=this.querySetVersion,p=this.querySetVersion+1,y={type:"Add",queryId:m,udfPath:x,args:[Dr(l)],journal:i,componentPath:c};return this.paused?this.pendingQuerySetModifications.set(m,y):this.querySetVersion=p,{queryToken:u,modification:{type:"ModifyQuerySet",baseVersion:b,newVersion:p,modifications:[y]},unsubscribe:()=>this.removeSubscriber(u)}}}transition(r){for(const l of r.modifications)switch(l.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(l.queryId);const i=l.journal;if(i!==void 0){const c=this.queryIdToToken.get(l.queryId);c!==void 0&&(this.querySet.get(c).journal=i)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(l.queryId);break}default:throw new Error(`Invalid modification ${l.type}`)}}queryId(r,l){const i=Qo(r),c=tn(i,l),x=this.querySet.get(c);return x!==void 0?x.id:null}isCurrentOrNewerAuthVersion(r){return r>=this.identityVersion}setAuth(r){this.auth={tokenType:"User",value:r};const l=this.identityVersion;return this.paused||(this.identityVersion=l+1),{type:"Authenticate",baseVersion:l,...this.auth}}setAdminAuth(r,l){const i={tokenType:"Admin",value:r,impersonating:l};this.auth=i;const c=this.identityVersion;return this.paused||(this.identityVersion=c+1),{type:"Authenticate",baseVersion:c,...i}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const r=this.identityVersion;return this.paused||(this.identityVersion=r+1),{type:"Authenticate",tokenType:"None",baseVersion:r}}hasAuth(){return!!this.auth}isNewAuth(r){return this.auth?.value!==r}queryPath(r){const l=this.queryIdToToken.get(r);return l?this.querySet.get(l).canonicalizedUdfPath:null}queryArgs(r){const l=this.queryIdToToken.get(r);return l?this.querySet.get(l).args:null}queryToken(r){return this.queryIdToToken.get(r)??null}queryJournal(r){return this.querySet.get(r)?.journal}restart(r){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const l=[];for(const x of this.querySet.values()){const u={type:"Add",queryId:x.id,udfPath:x.canonicalizedUdfPath,args:[Dr(x.args)],journal:x.journal,componentPath:x.componentPath};l.push(u),r.has(x.id)||this.outstandingQueriesOlderThanRestart.add(x.id)}this.querySetVersion=1;const i={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:l};if(!this.auth)return this.identityVersion=0,[i,void 0];this.outstandingAuthOlderThanRestart=!0;const c={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[i,c]}pause(){this.paused=!0}resume(){const r=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,l=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[r,l]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(r){const l=this.querySet.get(r);if(l.numSubscribers>1)return l.numSubscribers-=1,null;{this.querySet.delete(r),this.queryIdToToken.delete(l.id),this.outstandingQueriesOlderThanRestart.delete(l.id);const i=this.querySetVersion,c=this.querySetVersion+1,x={type:"Remove",queryId:l.id};return this.paused?this.pendingQuerySetModifications.has(l.id)?this.pendingQuerySetModifications.delete(l.id):this.pendingQuerySetModifications.set(l.id,x):this.querySetVersion=c,{type:"ModifyQuerySet",baseVersion:i,newVersion:c,modifications:[x]}}}}var B2=Object.defineProperty,k2=(n,r,l)=>r in n?B2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,_o=(n,r,l)=>k2(n,typeof r!="symbol"?r+"":r,l);class D2{constructor(r,l){this.logger=r,this.markConnectionStateDirty=l,_o(this,"inflightRequests"),_o(this,"requestsOlderThanRestart"),_o(this,"inflightMutationsCount",0),_o(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(r,l){const i=new Promise(c=>{const x=l?"Requested":"NotSent";this.inflightRequests.set(r.requestId,{message:r,status:{status:x,requestedAt:new Date,onResult:c}}),r.type==="Mutation"?this.inflightMutationsCount++:r.type==="Action"&&this.inflightActionsCount++});return this.markConnectionStateDirty(),i}onResponse(r){const l=this.inflightRequests.get(r.requestId);if(l===void 0||l.status.status==="Completed")return null;const i=l.message.type==="Mutation"?"mutation":"action",c=l.message.udfPath;for(const m of r.logLines)Ho(this.logger,"info",i,c,m);const x=l.status;let u,g;if(r.success)u={success:!0,logLines:r.logLines,value:Yn(r.result)},g=()=>x.onResult(u);else{const m=r.result,{errorData:f}=r;Ho(this.logger,"error",i,c,m),u={success:!1,errorMessage:m,errorData:f!==void 0?Yn(f):void 0,logLines:r.logLines},g=()=>x.onResult(u)}return r.type==="ActionResponse"||!r.success?(g(),this.inflightRequests.delete(r.requestId),this.requestsOlderThanRestart.delete(r.requestId),l.message.type==="Action"?this.inflightActionsCount--:l.message.type==="Mutation"&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:r.requestId,result:u}):(l.status={status:"Completed",result:u,ts:r.ts,onResolve:g},null)}removeCompleted(r){const l=new Map;for(const[i,c]of this.inflightRequests.entries()){const x=c.status;x.status==="Completed"&&x.ts.lessThanOrEqual(r)&&(x.onResolve(),l.set(i,x.result),c.message.type==="Mutation"?this.inflightMutationsCount--:c.message.type==="Action"&&this.inflightActionsCount--,this.inflightRequests.delete(i),this.requestsOlderThanRestart.delete(i))}return l.size>0&&this.markConnectionStateDirty(),l}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const r=[];for(const[l,i]of this.inflightRequests){if(i.status.status==="NotSent"){i.status.status="Requested",r.push(i.message);continue}if(i.message.type==="Mutation")r.push(i.message);else if(i.message.type==="Action"){if(this.inflightRequests.delete(l),this.requestsOlderThanRestart.delete(l),this.inflightActionsCount--,i.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");i.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),r}resume(){const r=[];for(const[,l]of this.inflightRequests)if(l.status.status==="NotSent"){l.status.status="Requested",r.push(l.message);continue}return r}hasIncompleteRequests(){for(const r of this.inflightRequests.values())if(r.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let r=Date.now();for(const l of this.inflightRequests.values())l.status.status!=="Completed"&&l.status.requestedAt.getTime()<r&&(r=l.status.requestedAt.getTime());return new Date(r)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}const li=Symbol.for("functionName"),S2=Symbol.for("toReferencePath");function _2(n){return n[S2]??null}function T2(n){return n.startsWith("function://")}function M2(n){let r;if(typeof n=="string")T2(n)?r={functionHandle:n}:r={name:n};else if(n[li])r={name:n[li]};else{const l=_2(n);if(!l)throw new Error(`${n} is not a functionReference`);r={reference:l}}return r}function Bs(n){const r=M2(n);if(r.name===void 0)throw r.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${r.functionHandle}`):r.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${r.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(r)}`);if(typeof n=="string")return n;const l=n[li];if(!l)throw new Error(`${n} is not a functionReference`);return l}function y0(n){return{[li]:n}}function zg(n=[]){const r={get(l,i){if(typeof i=="string"){const c=[...n,i];return zg(c)}else if(i===li){if(n.length<2){const u=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${u}\``)}const c=n.slice(0,-1).join("/"),x=n[n.length-1];return x==="default"?c:c+":"+x}else return i===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},r)}const R2=zg();var P2=Object.defineProperty,L2=(n,r,l)=>r in n?P2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,Yo=(n,r,l)=>L2(n,typeof r!="symbol"?r+"":r,l);class ii{constructor(r){Yo(this,"queryResults"),Yo(this,"modifiedQueries"),this.queryResults=r,this.modifiedQueries=[]}getQuery(r,...l){const i=Ya(l[0]),c=Bs(r),x=this.queryResults.get(tn(c,i));if(x!==void 0)return ii.queryValue(x.result)}getAllQueries(r){const l=[],i=Bs(r);for(const c of this.queryResults.values())c.udfPath===Qo(i)&&l.push({args:c.args,value:ii.queryValue(c.result)});return l}setQuery(r,l,i){const c=Ya(l),x=Bs(r),u=tn(x,c);let g;i===void 0?g=void 0:g={success:!0,value:i,logLines:[]};const m={udfPath:x,args:c,result:g};this.queryResults.set(u,m),this.modifiedQueries.push(u)}static queryValue(r){if(r!==void 0)return r.success?r.value:void 0}}class O2{constructor(){Yo(this,"queryResults"),Yo(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(r,l){this.optimisticUpdates=this.optimisticUpdates.filter(u=>!l.has(u.mutationId));const i=this.queryResults;this.queryResults=new Map(r);const c=new ii(this.queryResults);for(const u of this.optimisticUpdates)u.update(c);const x=[];for(const[u,g]of this.queryResults){const m=i.get(u);(m===void 0||m.result!==g.result)&&x.push(u)}return x}applyOptimisticUpdate(r,l){this.optimisticUpdates.push({update:r,mutationId:l});const i=new ii(this.queryResults);return r(i),i.modifiedQueries}rawQueryResult(r){return this.queryResults.get(r)}queryResult(r){const l=this.queryResults.get(r);if(l===void 0)return;const i=l.result;if(i!==void 0){if(i.success)return i.value;throw i.errorData!==void 0?r0(i,new a0(In("query",l.udfPath,i))):new Error(In("query",l.udfPath,i))}}hasQueryResult(r){return this.queryResults.get(r)!==void 0}queryLogs(r){return this.queryResults.get(r)?.result?.logLines}}var U2=Object.defineProperty,z2=(n,r,l)=>r in n?U2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,wd=(n,r,l)=>z2(n,typeof r!="symbol"?r+"":r,l);class $s{constructor(r,l){wd(this,"low"),wd(this,"high"),wd(this,"__isUnsignedLong__"),this.low=r|0,this.high=l|0,this.__isUnsignedLong__=!0}static isLong(r){return(r&&r.__isUnsignedLong__)===!0}static fromBytesLE(r){return new $s(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24)}toBytesLE(){const r=this.high,l=this.low;return[l&255,l>>>8&255,l>>>16&255,l>>>24,r&255,r>>>8&255,r>>>16&255,r>>>24]}static fromNumber(r){return isNaN(r)||r<0?Df:r>=q2?$2:new $s(r%si|0,r/si|0)}toString(){return(BigInt(this.high)*BigInt(si)+BigInt(this.low)).toString()}equals(r){return $s.isLong(r)||(r=$s.fromValue(r)),this.high>>>31===1&&r.high>>>31===1?!1:this.high===r.high&&this.low===r.low}notEquals(r){return!this.equals(r)}comp(r){return $s.isLong(r)||(r=$s.fromValue(r)),this.equals(r)?0:r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(r){return this.comp(r)<=0}static fromValue(r){return typeof r=="number"?$s.fromNumber(r):new $s(r.low,r.high)}}const Df=new $s(0,0),Sf=65536,si=Sf*Sf,q2=si*si,$2=new $s(-1,-1);var I2=Object.defineProperty,V2=(n,r,l)=>r in n?I2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,To=(n,r,l)=>V2(n,typeof r!="symbol"?r+"":r,l);class _f{constructor(r,l){To(this,"version"),To(this,"remoteQuerySet"),To(this,"queryPath"),To(this,"logger"),this.version={querySet:0,ts:$s.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=r,this.logger=l}transition(r){const l=r.startVersion;if(this.version.querySet!==l.querySet||this.version.ts.notEquals(l.ts)||this.version.identity!==l.identity)throw new Error(`Invalid start version: ${l.ts.toString()}:${l.querySet}`);for(const i of r.modifications)switch(i.type){case"QueryUpdated":{const c=this.queryPath(i.queryId);if(c)for(const u of i.logLines)Ho(this.logger,"info","query",c,u);const x=Yn(i.value??null);this.remoteQuerySet.set(i.queryId,{success:!0,value:x,logLines:i.logLines});break}case"QueryFailed":{const c=this.queryPath(i.queryId);if(c)for(const u of i.logLines)Ho(this.logger,"info","query",c,u);const{errorData:x}=i;this.remoteQuerySet.set(i.queryId,{success:!1,errorMessage:i.errorMessage,errorData:x!==void 0?Yn(x):void 0,logLines:i.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(i.queryId);break}default:throw new Error(`Invalid modification ${i.type}`)}this.version=r.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Cd(n){const r=ri(n);return $s.fromBytesLE(Array.from(r))}function H2(n){const r=new Uint8Array(n.toBytesLE());return ni(r)}function Q2(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:Cd(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:Cd(n.startVersion.ts)},endVersion:{...n.endVersion,ts:Cd(n.endVersion.ts)}}}}function Y2(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:H2(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var G2=Object.defineProperty,X2=(n,r,l)=>r in n?G2(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,gs=(n,r,l)=>X2(n,typeof r!="symbol"?r+"":r,l);const K2=1e3,Z2=1001,J2=1005,W2=4040,qg={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};function ey(n){if(n===void 0)return"Unknown";for(const r of Object.keys(qg))if(n.startsWith(r))return r;return"Unknown"}class ty{constructor(r,l,i,c,x){this.markConnectionStateDirty=x,gs(this,"socket"),gs(this,"connectionCount"),gs(this,"_hasEverConnected",!1),gs(this,"lastCloseReason"),gs(this,"defaultInitialBackoff"),gs(this,"maxBackoff"),gs(this,"retries"),gs(this,"serverInactivityThreshold"),gs(this,"reconnectDueToServerInactivityTimeout"),gs(this,"uri"),gs(this,"onOpen"),gs(this,"onResume"),gs(this,"onMessage"),gs(this,"webSocketConstructor"),gs(this,"logger"),gs(this,"onServerDisconnectError"),this.webSocketConstructor=i,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=r,this.onOpen=l.onOpen,this.onResume=l.onResume,this.onMessage=l.onMessage,this.onServerDisconnectError=l.onServerDisconnectError,this.logger=c,this.connect()}setSocketState(r){this.socket=r,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const r=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:r,paused:"no"}),this.resetServerInactivityTimeout(),r.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:r,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})),this.lastCloseReason!=="InitialConnect"&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},r.onerror=l=>{const i=l.message;this.logger.log(`WebSocket error: ${i}`)},r.onmessage=l=>{this.resetServerInactivityTimeout();const i=Q2(JSON.parse(l.data));this._logVerbose(`received ws message with type ${i.type}`),this.onMessage(i).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())},r.onclose=l=>{if(this._logVerbose("begin ws.onclose"),this.lastCloseReason===null&&(this.lastCloseReason=l.reason??"OnCloseInvoked"),l.code!==K2&&l.code!==Z2&&l.code!==J2&&l.code!==W2){let c=`WebSocket closed with code ${l.code}`;l.reason&&(c+=`: ${l.reason}`),this.logger.log(c),this.onServerDisconnectError&&l.reason&&this.onServerDisconnectError(c)}const i=ey(l.reason);this.scheduleReconnect(i)}}socketState(){return this.socket.state}sendMessage(r){const l={type:r.type,...r.type==="Authenticate"&&r.tokenType==="User"?{value:`...${r.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const i=Y2(r),c=JSON.stringify(i);try{this.socket.ws.send(c)}catch(x){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${x}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`sent message with type ${r.type}: ${JSON.stringify(l)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(l)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(r){this.socket={state:"disconnected"};const l=this.nextBackoff(r);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${l}ms`),setTimeout(()=>this.connect(),l)}closeAndReconnect(r){switch(this._logVerbose(`begin closeAndReconnect with reason ${r}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=r,this.close(),this.scheduleReconnect("client");return}default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const r=this.socket.ws;return new Promise(l=>{r.onclose=()=>{this._logVerbose("Closed after connecting"),l()},r.onopen=()=>{this._logVerbose("Opened after connecting"),r.close()}})}case"ready":{this._logVerbose("ws.close called");const r=this.socket.ws,l=new Promise(i=>{r.onclose=()=>{i()}});return r.close(),l}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const r=this.close();return this.setSocketState({state:"terminated"}),r}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const r=this.close();return this.socket={state:"stopped"},r}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(r){this.logger.logVerbose(r)}nextBackoff(r){const i=(r==="client"?100:r==="Unknown"?this.defaultInitialBackoff:qg[r].timeout)*Math.pow(2,this.retries);this.retries+=1;const c=Math.min(i,this.maxBackoff),x=c*(Math.random()-.5);return c+x}}function sy(){return ay()}function ay(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const r=Math.random()*16|0;return(n==="x"?r:r&3|8).toString(16)})}class Jl extends Error{}Jl.prototype.name="InvalidTokenError";function ry(n){return decodeURIComponent(atob(n).replace(/(.)/g,(r,l)=>{let i=l.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function ny(n){let r=n.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return ry(r)}catch{return atob(r)}}function ly(n,r){if(typeof n!="string")throw new Jl("Invalid token specified: must be a string");r||(r={});const l=r.header===!0?0:1,i=n.split(".")[l];if(typeof i!="string")throw new Jl(`Invalid token specified: missing part #${l+1}`);let c;try{c=ny(i)}catch(x){throw new Jl(`Invalid token specified: invalid base64 for part #${l+1} (${x.message})`)}try{return JSON.parse(c)}catch(x){throw new Jl(`Invalid token specified: invalid json for part #${l+1} (${x.message})`)}}var iy=Object.defineProperty,oy=(n,r,l)=>r in n?iy(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,ea=(n,r,l)=>oy(n,typeof r!="symbol"?r+"":r,l);const cy=480*60*60*1e3,Tf=2;class xy{constructor(r,l,i){ea(this,"authState",{state:"noAuth"}),ea(this,"configVersion",0),ea(this,"syncState"),ea(this,"authenticate"),ea(this,"stopSocket"),ea(this,"tryRestartSocket"),ea(this,"pauseSocket"),ea(this,"resumeSocket"),ea(this,"clearAuth"),ea(this,"logger"),ea(this,"refreshTokenLeewaySeconds"),ea(this,"tokenConfirmationAttempts",0),this.syncState=r,this.authenticate=l.authenticate,this.stopSocket=l.stopSocket,this.tryRestartSocket=l.tryRestartSocket,this.pauseSocket=l.pauseSocket,this.resumeSocket=l.resumeSocket,this.clearAuth=l.clearAuth,this.logger=i.logger,this.refreshTokenLeewaySeconds=i.refreshTokenLeewaySeconds}async setConfig(r,l){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const i=await this.fetchTokenAndGuardAgainstRace(r,{forceRefreshToken:!1});i.isFromOutdatedConfig||(i.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:r,onAuthChange:l},hasRetried:!1}),this.authenticate(i.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:r,onAuthChange:l}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(r){if(this.syncState.isCurrentOrNewerAuthVersion(r.endVersion.identity)&&!(r.endVersion.identity<=r.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(r){if(r.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:l}=r;if(!this.syncState.isCurrentOrNewerAuthVersion(l+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(r)}async tryToReauthenticate(r){if(this._logVerbose(`attempting to reauthenticate: ${r.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=Tf){this.logger.error(`Failed to authenticate: "${r.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${Tf-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const l=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});l.isFromOutdatedConfig||(l.value&&this.syncState.isNewAuth(l.value)?(this.authenticate(l.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:l.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const r=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});r.isFromOutdatedConfig||(r.value?this.syncState.isNewAuth(r.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:r.value,config:this.authState.config}),this.authenticate(r.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(r){if(this.authState.state==="noAuth")return;const l=this.decodeToken(r);if(!l){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:i,exp:c}=l;if(!i||!c){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const x=c-i;if(x<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let u=Math.min(cy,(x-this.refreshTokenLeewaySeconds)*1e3);u<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${x}s`),u=0);const g=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},u);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:g,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${u}ms`)}async fetchTokenAndGuardAgainstRace(r,l){const i=++this.configVersion;this._logVerbose(`fetching token with config version ${i}`);const c=await r(l);return this.configVersion!==i?(this._logVerbose(`stale config version, expected ${i}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:c}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(r){r(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(r){const l=r.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:r.hadAuth,state:r.state,token:`...${r.token.slice(-7)}`}:{state:r.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(l)}`),r.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=r}decodeToken(r){try{return ly(r)}catch(l){return this._logVerbose(`Error decoding token: ${l instanceof Error?l.message:"Unknown error"}`),null}}_logVerbose(r){this.logger.logVerbose(`${r} [v${this.configVersion}]`)}}const dy=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function uy(n,r){const l={sessionId:r};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:l})}function my(n){let r=n.name.slice(6);return r=r.charAt(0).toLowerCase()+r.slice(1),{name:r,startTime:n.startTime}}function hy(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const r=[];for(const l of dy){const i=performance.getEntriesByName(l).filter(c=>c.entryType==="mark").filter(c=>c.detail.sessionId===n);r.push(...i)}return r.map(my)}var fy=Object.defineProperty,gy=(n,r,l)=>r in n?fy(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,Yt=(n,r,l)=>gy(n,typeof r!="symbol"?r+"":r,l);class py{constructor(r,l,i){if(Yt(this,"address"),Yt(this,"state"),Yt(this,"requestManager"),Yt(this,"webSocketManager"),Yt(this,"authenticationManager"),Yt(this,"remoteQuerySet"),Yt(this,"optimisticQueryResults"),Yt(this,"_transitionHandlerCounter",0),Yt(this,"_nextRequestId"),Yt(this,"_onTransitionFns",new Map),Yt(this,"_sessionId"),Yt(this,"firstMessageReceived",!1),Yt(this,"debug"),Yt(this,"logger"),Yt(this,"maxObservedTimestamp"),Yt(this,"connectionStateSubscribers",new Map),Yt(this,"nextConnectionStateSubscriberId",0),Yt(this,"_lastPublishedConnectionState"),Yt(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{const N=this.connectionState();if(JSON.stringify(N)!==JSON.stringify(this._lastPublishedConnectionState)){this._lastPublishedConnectionState=N;for(const j of this.connectionStateSubscribers.values())j(N)}})}),Yt(this,"mark",N=>{this.debug&&uy(N,this.sessionId)}),typeof r=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");i?.skipConvexDeploymentUrlCheck!==!0&&c2(r),i={...i};const c=i.authRefreshTokenLeewaySeconds??2;let x=i.webSocketConstructor;if(!x&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");x=x||WebSocket,this.debug=i.reportDebugInfoToConvex??!1,this.address=r,this.logger=i.logger===!1?Ug({verbose:i.verbose??!1}):i.logger!==!0&&i.logger?i.logger:Og({verbose:i.verbose??!1});const u=r.search("://");if(u===-1)throw new Error("Provided address was not an absolute URL.");const g=r.substring(u+3),m=r.substring(0,u);let f;if(m==="http")f="ws";else if(m==="https")f="wss";else throw new Error(`Unknown parent protocol ${m}`);const b=`${f}://${g}/api/${Bf}/sync`;this.state=new F2,this.remoteQuerySet=new _f(N=>this.state.queryPath(N),this.logger),this.requestManager=new D2(this.logger,this.markConnectionStateDirty);const p=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new xy(this.state,{authenticate:N=>{const j=this.state.setAuth(N);return this.webSocketManager.sendMessage(j),j.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:p,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:c}),this.optimisticQueryResults=new O2,this.addOnTransitionHandler(N=>{l(N.queries.map(j=>j.token))}),this._nextRequestId=0,this._sessionId=sy();const{unsavedChangesWarning:y}=i;if(typeof window>"u"||typeof window.addEventListener>"u"){if(y===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else y!==!1&&window.addEventListener("beforeunload",N=>{if(this.requestManager.hasIncompleteRequests()){N.preventDefault();const j="Are you sure you want to leave? Your changes may not be saved.";return(N||window.event).returnValue=j,j}});this.webSocketManager=new ty(b,{onOpen:N=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...N,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const j=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new _f(C=>this.state.queryPath(C),this.logger);const[w,D]=this.state.restart(j);D&&this.webSocketManager.sendMessage(D),this.webSocketManager.sendMessage(w);for(const C of this.requestManager.restart())this.webSocketManager.sendMessage(C)},onResume:()=>{const[N,j]=this.state.resume();j&&this.webSocketManager.sendMessage(j),N&&this.webSocketManager.sendMessage(N);for(const w of this.requestManager.resume())this.webSocketManager.sendMessage(w)},onMessage:N=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),N.type){case"Transition":{this.observedTimestamp(N.endVersion.ts),this.authenticationManager.onTransition(N),this.remoteQuerySet.transition(N),this.state.transition(N);const j=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(j);break}case"MutationResponse":{N.success&&this.observedTimestamp(N.ts);const j=this.requestManager.onResponse(N);j!==null&&this.notifyOnQueryResultChanges(new Map([[j.requestId,j.result]]));break}case"ActionResponse":{this.requestManager.onResponse(N);break}case"AuthError":{this.authenticationManager.onAuthError(N);break}case"FatalError":{const j=C2(this.logger,N.error);throw this.webSocketManager.terminate(),j}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:i.onServerDisconnectError},x,this.logger,this.markConnectionStateDirty),this.mark("convexClientConstructed"),i.expectAuth&&p()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(r){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(r))&&(this.maxObservedTimestamp=r)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(r){const l=this.remoteQuerySet.remoteQueryResults(),i=new Map;for(const[x,u]of l){const g=this.state.queryToken(x);if(g!==null){const m={result:u,udfPath:this.state.queryPath(x),args:this.state.queryArgs(x)};i.set(g,m)}}const c=this.optimisticQueryResults.ingestQueryResultsFromServer(i,new Set(r.keys()));this.handleTransition({queries:c.map(x=>{const u=this.optimisticQueryResults.rawQueryResult(x);return{token:x,modification:{kind:"Updated",result:u.result}}}),reflectedMutations:Array.from(r).map(([x,u])=>({requestId:x,result:u})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(r){for(const l of this._onTransitionFns.values())l(r)}addOnTransitionHandler(r){const l=this._transitionHandlerCounter++;return this._onTransitionFns.set(l,r),()=>this._onTransitionFns.delete(l)}setAuth(r,l){this.authenticationManager.setConfig(r,l)}hasAuth(){return this.state.hasAuth()}setAdminAuth(r,l){const i=this.state.setAdminAuth(r,l);this.webSocketManager.sendMessage(i)}clearAuth(){const r=this.state.clearAuth();this.webSocketManager.sendMessage(r)}subscribe(r,l,i){const c=Ya(l),{modification:x,queryToken:u,unsubscribe:g}=this.state.subscribe(r,c,i?.journal,i?.componentPath);return x!==null&&this.webSocketManager.sendMessage(x),{queryToken:u,unsubscribe:()=>{const m=g();m&&this.webSocketManager.sendMessage(m)}}}localQueryResult(r,l){const i=Ya(l),c=tn(r,i);return this.optimisticQueryResults.queryResult(c)}localQueryResultByToken(r){return this.optimisticQueryResults.queryResult(r)}hasLocalQueryResultByToken(r){return this.optimisticQueryResults.hasQueryResult(r)}localQueryLogs(r,l){const i=Ya(l),c=tn(r,i);return this.optimisticQueryResults.queryLogs(c)}queryJournal(r,l){const i=Ya(l),c=tn(r,i);return this.state.queryJournal(c)}connectionState(){const r=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:r.isConnected,hasEverConnected:r.hasEverConnected,connectionCount:r.connectionCount,connectionRetries:r.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(r){const l=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(l,r),()=>{this.connectionStateSubscribers.delete(l)}}async mutation(r,l,i){const c=await this.mutationInternal(r,l,i);if(!c.success)throw c.errorData!==void 0?r0(c,new a0(In("mutation",r,c))):new Error(In("mutation",r,c));return c.value}async mutationInternal(r,l,i,c){const{mutationPromise:x}=this.enqueueMutation(r,l,i,c);return x}enqueueMutation(r,l,i,c){const x=Ya(l);this.tryReportLongDisconnect();const u=this.nextRequestId;if(this._nextRequestId++,i!==void 0){const b=i.optimisticUpdate;if(b!==void 0){const p=j=>{b(j,x)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},N=this.optimisticQueryResults.applyOptimisticUpdate(p,u).map(j=>{const w=this.localQueryResultByToken(j);return{token:j,modification:{kind:"Updated",result:w===void 0?void 0:{success:!0,value:w,logLines:[]}}}});this.handleTransition({queries:N,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const g={type:"Mutation",requestId:u,udfPath:r,componentPath:c,args:[Dr(x)]},m=this.webSocketManager.sendMessage(g),f=this.requestManager.request(g,m);return{requestId:u,mutationPromise:f}}async action(r,l){const i=await this.actionInternal(r,l);if(!i.success)throw i.errorData!==void 0?r0(i,new a0(In("action",r,i))):new Error(In("action",r,i));return i.value}async actionInternal(r,l,i){const c=Ya(l),x=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const u={type:"Action",requestId:x,udfPath:r,componentPath:i,args:[Dr(c)]},g=this.webSocketManager.sendMessage(u);return this.requestManager.request(u,g)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const r=hy(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:r})}}tryReportLongDisconnect(){if(!this.debug)return;const r=this.connectionState().timeOfOldestInflightRequest;if(r===null||Date.now()-r.getTime()<=60*1e3)return;const l=`${this.address}/api/debug_event`;fetch(l,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Bf}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(i=>{i.ok||this.logger.warn("Analytics request failed with response:",i.body)}).catch(i=>{this.logger.warn("Analytics response failed with error:",i)})}}function by({getCurrentValue:n,subscribe:r}){const[l,i]=v.useState(()=>({getCurrentValue:n,subscribe:r,value:n()}));let c=l.value;return(l.getCurrentValue!==n||l.subscribe!==r)&&(c=n(),i({getCurrentValue:n,subscribe:r,value:c})),v.useEffect(()=>{let x=!1;const u=()=>{x||i(m=>{if(m.getCurrentValue!==n||m.subscribe!==r)return m;const f=n();return m.value===f?m:{...m,value:f}})},g=r(u);return u(),()=>{x=!0,g()}},[n,r]),c}var yy=Object.defineProperty,vy=(n,r,l)=>r in n?yy(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,Cr=(n,r,l)=>vy(n,typeof r!="symbol"?r+"":r,l);const jy=5e3;if(typeof ma>"u")throw new Error("Required dependency 'react' not found");function $g(n,r,l){function i(c){return Ey(c),r.mutation(n,c,{optimisticUpdate:l})}return i.withOptimisticUpdate=function(x){if(l!==void 0)throw new Error(`Already specified optimistic update for mutation ${Bs(n)}`);return $g(n,r,x)},i}function Ny(n,r){return function(l){return r.action(n,l)}}class wy{constructor(r,l){if(Cr(this,"address"),Cr(this,"cachedSync"),Cr(this,"listeners"),Cr(this,"options"),Cr(this,"closed",!1),Cr(this,"_logger"),Cr(this,"adminAuth"),Cr(this,"fakeUserIdentity"),r===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof r!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof r} instead.`);if(!r.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=r,this.listeners=new Map,this._logger=l?.logger===!1?Ug({verbose:l?.verbose??!1}):l?.logger!==!0&&l?.logger?l.logger:Og({verbose:l?.verbose??!1}),this.options={...l,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new py(this.address,r=>this.transition(r),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(r,l){if(typeof r=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(r,l??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(r,l){if(this.adminAuth=r,this.fakeUserIdentity=l,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(r,l)}watchQuery(r,...l){const[i,c]=l,x=Bs(r);return{onUpdate:u=>{const{queryToken:g,unsubscribe:m}=this.sync.subscribe(x,i,c),f=this.listeners.get(g);return f!==void 0?f.add(u):this.listeners.set(g,new Set([u])),()=>{if(this.closed)return;const b=this.listeners.get(g);b.delete(u),b.size===0&&this.listeners.delete(g),m()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(x,i)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(x,i)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(x,i)}}}prewarmQuery(r){const l=r.extendSubscriptionFor??jy,c=this.watchQuery(r.query,r.args||{}).onUpdate(()=>{});setTimeout(c,l)}mutation(r,...l){const[i,c]=l,x=Bs(r);return this.sync.mutation(x,i,c)}action(r,...l){const i=Bs(r);return this.sync.action(i,...l)}query(r,...l){const i=this.watchQuery(r,...l),c=i.localQueryResult();return c!==void 0?Promise.resolve(c):new Promise((x,u)=>{const g=i.onUpdate(()=>{g();try{x(i.localQueryResult())}catch(m){u(m)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(r){return this.sync.subscribeToConnectionState(r)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const r=this.cachedSync;this.cachedSync=void 0,await r.close()}}transition(r){for(const l of r){const i=this.listeners.get(l);if(i)for(const c of i)c()}}}const Wo=ma.createContext(void 0);function Cy(){return v.useContext(Wo)}const Ay=({client:n,children:r})=>ma.createElement(Wo.Provider,{value:n},r);function fe(n,...r){const l=r[0]==="skip",i=r[0]==="skip"?{}:Ya(r[0]),c=typeof n=="string"?y0(n):n,x=Bs(c),u=v.useMemo(()=>l?{}:{query:{query:c,args:i}},[JSON.stringify(Dr(i)),x,l]),m=Dy(u).query;if(m instanceof Error)throw m;return m}function Ee(n){const r=typeof n=="string"?y0(n):n,l=v.useContext(Wo);if(l===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return v.useMemo(()=>$g(r,l),[l,Bs(r)])}function Go(n){const r=v.useContext(Wo),l=typeof n=="string"?y0(n):n;if(r===void 0)throw new Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return v.useMemo(()=>Ny(l,r),[r,Bs(l)])}function Ey(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var Fy=Object.defineProperty,By=(n,r,l)=>r in n?Fy(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,Ad=(n,r,l)=>By(n,typeof r!="symbol"?r+"":r,l);class ky{constructor(r){Ad(this,"createWatch"),Ad(this,"queries"),Ad(this,"listeners"),this.createWatch=r,this.queries={},this.listeners=new Set}setQueries(r){for(const l of Object.keys(r)){const{query:i,args:c}=r[l];if(Bs(i),this.queries[l]===void 0)this.addQuery(l,i,c);else{const x=this.queries[l];(Bs(i)!==Bs(x.query)||JSON.stringify(Dr(c))!==JSON.stringify(Dr(x.args)))&&(this.removeQuery(l),this.addQuery(l,i,c))}}for(const l of Object.keys(this.queries))r[l]===void 0&&this.removeQuery(l)}subscribe(r){return this.listeners.add(r),()=>{this.listeners.delete(r)}}getLocalResults(r){const l={};for(const i of Object.keys(r)){const{query:c,args:x}=r[i];Bs(c);const u=this.createWatch(c,x);let g;try{g=u.localQueryResult()}catch(m){if(m instanceof Error)g=m;else throw m}l[i]=g}return l}setCreateWatch(r){this.createWatch=r;for(const l of Object.keys(this.queries)){const{query:i,args:c,watch:x}=this.queries[l],u=x.journal();this.removeQuery(l),this.addQuery(l,i,c,u)}}destroy(){for(const r of Object.keys(this.queries))this.removeQuery(r);this.listeners=new Set}addQuery(r,l,i,c){if(this.queries[r]!==void 0)throw new Error(`Tried to add a new query with identifier ${r} when it already exists.`);const x=this.createWatch(l,i,c),u=x.onUpdate(()=>this.notifyListeners());this.queries[r]={query:l,args:i,watch:x,unsubscribe:u}}removeQuery(r){const l=this.queries[r];if(l===void 0)throw new Error(`No query found with identifier ${r}.`);l.unsubscribe(),delete this.queries[r]}notifyListeners(){for(const r of this.listeners)r()}}function Dy(n){const r=Cy();if(r===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const l=v.useMemo(()=>(i,c,x)=>r.watchQuery(i,c,{journal:x}),[r]);return Sy(n,l)}function Sy(n,r){const[l]=v.useState(()=>new ky(r));l.createWatch!==r&&l.setCreateWatch(r),v.useEffect(()=>()=>l.destroy(),[l]);const i=v.useMemo(()=>({getCurrentValue:()=>l.getLocalResults(n),subscribe:c=>(l.setQueries(n),l.subscribe(c))}),[l,n]);return by(i)}/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mf="popstate";function _y(n={}){function r(i,c){let{pathname:x,search:u,hash:g}=i.location;return n0("",{pathname:x,search:u,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function l(i,c){return typeof c=="string"?c:oi(c)}return My(r,l,null,n)}function _t(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function ra(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Ty(){return Math.random().toString(36).substring(2,10)}function Rf(n,r){return{usr:n.state,key:n.key,idx:r}}function n0(n,r,l=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?Xn(r):r,state:l,key:r&&r.key||i||Ty()}}function oi({pathname:n="/",search:r="",hash:l=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function Xn(n){let r={};if(n){let l=n.indexOf("#");l>=0&&(r.hash=n.substring(l),n=n.substring(0,l));let i=n.indexOf("?");i>=0&&(r.search=n.substring(i),n=n.substring(0,i)),n&&(r.pathname=n)}return r}function My(n,r,l,i={}){let{window:c=document.defaultView,v5Compat:x=!1}=i,u=c.history,g="POP",m=null,f=b();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function b(){return(u.state||{idx:null}).idx}function p(){g="POP";let D=b(),C=D==null?null:D-f;f=D,m&&m({action:g,location:w.location,delta:C})}function y(D,C){g="PUSH";let L=n0(w.location,D,C);f=b()+1;let A=Rf(L,f),_=w.createHref(L);try{u.pushState(A,"",_)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;c.location.assign(_)}x&&m&&m({action:g,location:w.location,delta:1})}function N(D,C){g="REPLACE";let L=n0(w.location,D,C);f=b();let A=Rf(L,f),_=w.createHref(L);u.replaceState(A,"",_),x&&m&&m({action:g,location:w.location,delta:0})}function j(D){return Ry(D)}let w={get action(){return g},get location(){return n(c,u)},listen(D){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(Mf,p),m=D,()=>{c.removeEventListener(Mf,p),m=null}},createHref(D){return r(c,D)},createURL:j,encodeLocation(D){let C=j(D);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:N,go(D){return u.go(D)}};return w}function Ry(n,r=!1){let l="http://localhost";typeof window<"u"&&(l=window.location.origin!=="null"?window.location.origin:window.location.href),_t(l,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:oi(n);return i=i.replace(/ $/,"%20"),!r&&i.startsWith("//")&&(i=l+i),new URL(i,l)}function Ig(n,r,l="/"){return Py(n,r,l,!1)}function Py(n,r,l,i){let c=typeof r=="string"?Xn(r):r,x=Za(c.pathname||"/",l);if(x==null)return null;let u=Vg(n);Ly(u);let g=null;for(let m=0;g==null&&m<u.length;++m){let f=Gy(x);g=Qy(u[m],f,i)}return g}function Vg(n,r=[],l=[],i=""){let c=(x,u,g)=>{let m={relativePath:g===void 0?x.path||"":g,caseSensitive:x.caseSensitive===!0,childrenIndex:u,route:x};m.relativePath.startsWith("/")&&(_t(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let f=Ka([i,m.relativePath]),b=l.concat(m);x.children&&x.children.length>0&&(_t(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Vg(x.children,r,b,f)),!(x.path==null&&!x.index)&&r.push({path:f,score:Vy(f,x.index),routesMeta:b})};return n.forEach((x,u)=>{if(x.path===""||!x.path?.includes("?"))c(x,u);else for(let g of Hg(x.path))c(x,u,g)}),r}function Hg(n){let r=n.split("/");if(r.length===0)return[];let[l,...i]=r,c=l.endsWith("?"),x=l.replace(/\?$/,"");if(i.length===0)return c?[x,""]:[x];let u=Hg(i.join("/")),g=[];return g.push(...u.map(m=>m===""?x:[x,m].join("/"))),c&&g.push(...u),g.map(m=>n.startsWith("/")&&m===""?"/":m)}function Ly(n){n.sort((r,l)=>r.score!==l.score?l.score-r.score:Hy(r.routesMeta.map(i=>i.childrenIndex),l.routesMeta.map(i=>i.childrenIndex)))}var Oy=/^:[\w-]+$/,Uy=3,zy=2,qy=1,$y=10,Iy=-2,Pf=n=>n==="*";function Vy(n,r){let l=n.split("/"),i=l.length;return l.some(Pf)&&(i+=Iy),r&&(i+=zy),l.filter(c=>!Pf(c)).reduce((c,x)=>c+(Oy.test(x)?Uy:x===""?qy:$y),i)}function Hy(n,r){return n.length===r.length&&n.slice(0,-1).every((i,c)=>i===r[c])?n[n.length-1]-r[r.length-1]:0}function Qy(n,r,l=!1){let{routesMeta:i}=n,c={},x="/",u=[];for(let g=0;g<i.length;++g){let m=i[g],f=g===i.length-1,b=x==="/"?r:r.slice(x.length)||"/",p=Xo({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},b),y=m.route;if(!p&&f&&l&&!i[i.length-1].route.index&&(p=Xo({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},b)),!p)return null;Object.assign(c,p.params),u.push({params:c,pathname:Ka([x,p.pathname]),pathnameBase:Jy(Ka([x,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(x=Ka([x,p.pathnameBase]))}return u}function Xo(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[l,i]=Yy(n.path,n.caseSensitive,n.end),c=r.match(l);if(!c)return null;let x=c[0],u=x.replace(/(.)\/+$/,"$1"),g=c.slice(1);return{params:i.reduce((f,{paramName:b,isOptional:p},y)=>{if(b==="*"){let j=g[y]||"";u=x.slice(0,x.length-j.length).replace(/(.)\/+$/,"$1")}const N=g[y];return p&&!N?f[b]=void 0:f[b]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:x,pathnameBase:u,pattern:n}}function Yy(n,r=!1,l=!0){ra(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,g,m)=>(i.push({paramName:g,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),i]}function Gy(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return ra(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function Za(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let l=r.endsWith("/")?r.length-1:r.length,i=n.charAt(l);return i&&i!=="/"?null:n.slice(l)||"/"}function Xy(n,r="/"){let{pathname:l,search:i="",hash:c=""}=typeof n=="string"?Xn(n):n;return{pathname:l?l.startsWith("/")?l:Ky(l,r):r,search:Wy(i),hash:ev(c)}}function Ky(n,r){let l=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?l.length>1&&l.pop():c!=="."&&l.push(c)}),l.length>1?l.join("/"):"/"}function Ed(n,r,l,i){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${l}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Zy(n){return n.filter((r,l)=>l===0||r.route.path&&r.route.path.length>0)}function v0(n){let r=Zy(n);return r.map((l,i)=>i===r.length-1?l.pathname:l.pathnameBase)}function j0(n,r,l,i=!1){let c;typeof n=="string"?c=Xn(n):(c={...n},_t(!c.pathname||!c.pathname.includes("?"),Ed("?","pathname","search",c)),_t(!c.pathname||!c.pathname.includes("#"),Ed("#","pathname","hash",c)),_t(!c.search||!c.search.includes("#"),Ed("#","search","hash",c)));let x=n===""||c.pathname==="",u=x?"/":c.pathname,g;if(u==null)g=l;else{let p=r.length-1;if(!i&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),p-=1;c.pathname=y.join("/")}g=p>=0?r[p]:"/"}let m=Xy(c,g),f=u&&u!=="/"&&u.endsWith("/"),b=(x||u===".")&&l.endsWith("/");return!m.pathname.endsWith("/")&&(f||b)&&(m.pathname+="/"),m}var Ka=n=>n.join("/").replace(/\/\/+/g,"/"),Jy=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Wy=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ev=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function tv(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Qg=["POST","PUT","PATCH","DELETE"];new Set(Qg);var sv=["GET",...Qg];new Set(sv);var Kn=v.createContext(null);Kn.displayName="DataRouter";var ec=v.createContext(null);ec.displayName="DataRouterState";v.createContext(!1);var Yg=v.createContext({isTransitioning:!1});Yg.displayName="ViewTransition";var av=v.createContext(new Map);av.displayName="Fetchers";var rv=v.createContext(null);rv.displayName="Await";var ha=v.createContext(null);ha.displayName="Navigation";var mi=v.createContext(null);mi.displayName="Location";var ka=v.createContext({outlet:null,matches:[],isDataRoute:!1});ka.displayName="Route";var N0=v.createContext(null);N0.displayName="RouteError";function nv(n,{relative:r}={}){_t(Zn(),"useHref() may be used only in the context of a <Router> component.");let{basename:l,navigator:i}=v.useContext(ha),{hash:c,pathname:x,search:u}=hi(n,{relative:r}),g=x;return l!=="/"&&(g=x==="/"?l:Ka([l,x])),i.createHref({pathname:g,search:u,hash:c})}function Zn(){return v.useContext(mi)!=null}function Vs(){return _t(Zn(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(mi).location}var Gg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xg(n){v.useContext(ha).static||v.useLayoutEffect(n)}function ys(){let{isDataRoute:n}=v.useContext(ka);return n?bv():lv()}function lv(){_t(Zn(),"useNavigate() may be used only in the context of a <Router> component.");let n=v.useContext(Kn),{basename:r,navigator:l}=v.useContext(ha),{matches:i}=v.useContext(ka),{pathname:c}=Vs(),x=JSON.stringify(v0(i)),u=v.useRef(!1);return Xg(()=>{u.current=!0}),v.useCallback((m,f={})=>{if(ra(u.current,Gg),!u.current)return;if(typeof m=="number"){l.go(m);return}let b=j0(m,JSON.parse(x),c,f.relative==="path");n==null&&r!=="/"&&(b.pathname=b.pathname==="/"?r:Ka([r,b.pathname])),(f.replace?l.replace:l.push)(b,f.state,f)},[r,l,x,c,n])}v.createContext(null);function hi(n,{relative:r}={}){let{matches:l}=v.useContext(ka),{pathname:i}=Vs(),c=JSON.stringify(v0(l));return v.useMemo(()=>j0(n,JSON.parse(c),i,r==="path"),[n,c,i,r])}function iv(n,r){return Kg(n,r)}function Kg(n,r,l,i){_t(Zn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=v.useContext(ha),{matches:x}=v.useContext(ka),u=x[x.length-1],g=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",b=u&&u.route;{let C=b&&b.path||"";Zg(m,!b||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=Vs(),y;if(r){let C=typeof r=="string"?Xn(r):r;_t(f==="/"||C.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),y=C}else y=p;let N=y.pathname||"/",j=N;if(f!=="/"){let C=f.replace(/^\//,"").split("/");j="/"+N.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=Ig(n,{pathname:j});ra(b||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),ra(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=uv(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},g,C.params),pathname:Ka([f,c.encodeLocation?c.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ka([f,c.encodeLocation?c.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),x,l,i);return r&&D?v.createElement(mi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},D):D}function ov(){let n=pv(),r=tv(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),l=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:i},x={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:x},"ErrorBoundary")," or"," ",v.createElement("code",{style:x},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},r),l?v.createElement("pre",{style:c},l):null,u)}var cv=v.createElement(ov,null),xv=class extends v.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){console.error("React Router caught the following error during render",n,r)}render(){return this.state.error!==void 0?v.createElement(ka.Provider,{value:this.props.routeContext},v.createElement(N0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function dv({routeContext:n,match:r,children:l}){let i=v.useContext(Kn);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(ka.Provider,{value:n},l)}function uv(n,r=[],l=null,i=null){if(n==null){if(!l)return null;if(l.errors)n=l.matches;else if(r.length===0&&!l.initialized&&l.matches.length>0)n=l.matches;else return null}let c=n,x=l?.errors;if(x!=null){let m=c.findIndex(f=>f.route.id&&x?.[f.route.id]!==void 0);_t(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),c=c.slice(0,Math.min(c.length,m+1))}let u=!1,g=-1;if(l)for(let m=0;m<c.length;m++){let f=c[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(g=m),f.route.id){let{loaderData:b,errors:p}=l,y=f.route.loader&&!b.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||y){u=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((m,f,b)=>{let p,y=!1,N=null,j=null;l&&(p=x&&f.route.id?x[f.route.id]:void 0,N=f.route.errorElement||cv,u&&(g<0&&b===0?(Zg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,j=null):g===b&&(y=!0,j=f.route.hydrateFallbackElement||null)));let w=r.concat(c.slice(0,b+1)),D=()=>{let C;return p?C=N:y?C=j:f.route.Component?C=v.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=m,v.createElement(dv,{match:f,routeContext:{outlet:m,matches:w,isDataRoute:l!=null},children:C})};return l&&(f.route.ErrorBoundary||f.route.errorElement||b===0)?v.createElement(xv,{location:l.location,revalidation:l.revalidation,component:N,error:p,children:D(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):D()},null)}function w0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mv(n){let r=v.useContext(Kn);return _t(r,w0(n)),r}function hv(n){let r=v.useContext(ec);return _t(r,w0(n)),r}function fv(n){let r=v.useContext(ka);return _t(r,w0(n)),r}function C0(n){let r=fv(n),l=r.matches[r.matches.length-1];return _t(l.route.id,`${n} can only be used on routes that contain a unique "id"`),l.route.id}function gv(){return C0("useRouteId")}function pv(){let n=v.useContext(N0),r=hv("useRouteError"),l=C0("useRouteError");return n!==void 0?n:r.errors?.[l]}function bv(){let{router:n}=mv("useNavigate"),r=C0("useNavigate"),l=v.useRef(!1);return Xg(()=>{l.current=!0}),v.useCallback(async(c,x={})=>{ra(l.current,Gg),l.current&&(typeof c=="number"?n.navigate(c):await n.navigate(c,{fromRouteId:r,...x}))},[n,r])}var Lf={};function Zg(n,r,l){!r&&!Lf[n]&&(Lf[n]=!0,ra(!1,l))}v.memo(yv);function yv({routes:n,future:r,state:l}){return Kg(n,void 0,l,r)}function sa({to:n,replace:r,state:l,relative:i}){_t(Zn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=v.useContext(ha);ra(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:x}=v.useContext(ka),{pathname:u}=Vs(),g=ys(),m=j0(n,v0(x),u,i==="path"),f=JSON.stringify(m);return v.useEffect(()=>{g(JSON.parse(f),{replace:r,state:l,relative:i})},[g,f,i,r,l]),null}function St(n){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vv({basename:n="/",children:r=null,location:l,navigationType:i="POP",navigator:c,static:x=!1}){_t(!Zn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),g=v.useMemo(()=>({basename:u,navigator:c,static:x,future:{}}),[u,c,x]);typeof l=="string"&&(l=Xn(l));let{pathname:m="/",search:f="",hash:b="",state:p=null,key:y="default"}=l,N=v.useMemo(()=>{let j=Za(m,u);return j==null?null:{location:{pathname:j,search:f,hash:b,state:p,key:y},navigationType:i}},[u,m,f,b,p,y,i]);return ra(N!=null,`<Router basename="${u}"> is not able to match the URL "${m}${f}${b}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:v.createElement(ha.Provider,{value:g},v.createElement(mi.Provider,{children:r,value:N}))}function jv({children:n,location:r}){return iv(l0(n),r)}function l0(n,r=[]){let l=[];return v.Children.forEach(n,(i,c)=>{if(!v.isValidElement(i))return;let x=[...r,c];if(i.type===v.Fragment){l.push.apply(l,l0(i.props.children,x));return}_t(i.type===St,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||x.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=l0(i.props.children,x)),l.push(u)}),l}var Oo="get",Uo="application/x-www-form-urlencoded";function tc(n){return n!=null&&typeof n.tagName=="string"}function Nv(n){return tc(n)&&n.tagName.toLowerCase()==="button"}function wv(n){return tc(n)&&n.tagName.toLowerCase()==="form"}function Cv(n){return tc(n)&&n.tagName.toLowerCase()==="input"}function Av(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Ev(n,r){return n.button===0&&(!r||r==="_self")&&!Av(n)}function i0(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,l)=>{let i=n[l];return r.concat(Array.isArray(i)?i.map(c=>[l,c]):[[l,i]])},[]))}function Fv(n,r){let l=i0(n);return r&&r.forEach((i,c)=>{l.has(c)||r.getAll(c).forEach(x=>{l.append(c,x)})}),l}var Mo=null;function Bv(){if(Mo===null)try{new FormData(document.createElement("form"),0),Mo=!1}catch{Mo=!0}return Mo}var kv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fd(n){return n!=null&&!kv.has(n)?(ra(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uo}"`),null):n}function Dv(n,r){let l,i,c,x,u;if(wv(n)){let g=n.getAttribute("action");i=g?Za(g,r):null,l=n.getAttribute("method")||Oo,c=Fd(n.getAttribute("enctype"))||Uo,x=new FormData(n)}else if(Nv(n)||Cv(n)&&(n.type==="submit"||n.type==="image")){let g=n.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||g.getAttribute("action");if(i=m?Za(m,r):null,l=n.getAttribute("formmethod")||g.getAttribute("method")||Oo,c=Fd(n.getAttribute("formenctype"))||Fd(g.getAttribute("enctype"))||Uo,x=new FormData(g,n),!Bv()){let{name:f,type:b,value:p}=n;if(b==="image"){let y=f?`${f}.`:"";x.append(`${y}x`,"0"),x.append(`${y}y`,"0")}else f&&x.append(f,p)}}else{if(tc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');l=Oo,i=null,c=Uo,u=n}return x&&c==="text/plain"&&(u=x,x=void 0),{action:i,method:l.toLowerCase(),encType:c,formData:x,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function A0(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Sv(n,r,l){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${l}`:r&&Za(i.pathname,r)==="/"?i.pathname=`${r.replace(/\/$/,"")}/_root.${l}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${l}`,i}async function _v(n,r){if(n.id in r)return r[n.id];try{let l=await import(n.module);return r[n.id]=l,l}catch(l){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(l),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Tv(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Mv(n,r,l){let i=await Promise.all(n.map(async c=>{let x=r.routes[c.route.id];if(x){let u=await _v(x,l);return u.links?u.links():[]}return[]}));return Ov(i.flat(1).filter(Tv).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Of(n,r,l,i,c,x){let u=(m,f)=>l[f]?m.route.id!==l[f].route.id:!0,g=(m,f)=>l[f].pathname!==m.pathname||l[f].route.path?.endsWith("*")&&l[f].params["*"]!==m.params["*"];return x==="assets"?r.filter((m,f)=>u(m,f)||g(m,f)):x==="data"?r.filter((m,f)=>{let b=i.routes[m.route.id];if(!b||!b.hasLoader)return!1;if(u(m,f)||g(m,f))return!0;if(m.route.shouldRevalidate){let p=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:l[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Rv(n,r,{includeHydrateFallback:l}={}){return Pv(n.map(i=>{let c=r.routes[i.route.id];if(!c)return[];let x=[c.module];return c.clientActionModule&&(x=x.concat(c.clientActionModule)),c.clientLoaderModule&&(x=x.concat(c.clientLoaderModule)),l&&c.hydrateFallbackModule&&(x=x.concat(c.hydrateFallbackModule)),c.imports&&(x=x.concat(c.imports)),x}).flat(1))}function Pv(n){return[...new Set(n)]}function Lv(n){let r={},l=Object.keys(n).sort();for(let i of l)r[i]=n[i];return r}function Ov(n,r){let l=new Set;return new Set(r),n.reduce((i,c)=>{let x=JSON.stringify(Lv(c));return l.has(x)||(l.add(x),i.push({key:x,link:c})),i},[])}function Jg(){let n=v.useContext(Kn);return A0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Uv(){let n=v.useContext(ec);return A0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var E0=v.createContext(void 0);E0.displayName="FrameworkContext";function Wg(){let n=v.useContext(E0);return A0(n,"You must render this element inside a <HydratedRouter> element"),n}function zv(n,r){let l=v.useContext(E0),[i,c]=v.useState(!1),[x,u]=v.useState(!1),{onFocus:g,onBlur:m,onMouseEnter:f,onMouseLeave:b,onTouchStart:p}=r,y=v.useRef(null);v.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let w=C=>{C.forEach(L=>{u(L.isIntersecting)})},D=new IntersectionObserver(w,{threshold:.5});return y.current&&D.observe(y.current),()=>{D.disconnect()}}},[n]),v.useEffect(()=>{if(i){let w=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(w)}}},[i]);let N=()=>{c(!0)},j=()=>{c(!1),u(!1)};return l?n!=="intent"?[x,y,{}]:[x,y,{onFocus:Kl(g,N),onBlur:Kl(m,j),onMouseEnter:Kl(f,N),onMouseLeave:Kl(b,j),onTouchStart:Kl(p,N)}]:[!1,y,{}]}function Kl(n,r){return l=>{n&&n(l),l.defaultPrevented||r(l)}}function qv({page:n,...r}){let{router:l}=Jg(),i=v.useMemo(()=>Ig(l.routes,n,l.basename),[l.routes,n,l.basename]);return i?v.createElement(Iv,{page:n,matches:i,...r}):null}function $v(n){let{manifest:r,routeModules:l}=Wg(),[i,c]=v.useState([]);return v.useEffect(()=>{let x=!1;return Mv(n,r,l).then(u=>{x||c(u)}),()=>{x=!0}},[n,r,l]),i}function Iv({page:n,matches:r,...l}){let i=Vs(),{manifest:c,routeModules:x}=Wg(),{basename:u}=Jg(),{loaderData:g,matches:m}=Uv(),f=v.useMemo(()=>Of(n,r,m,c,i,"data"),[n,r,m,c,i]),b=v.useMemo(()=>Of(n,r,m,c,i,"assets"),[n,r,m,c,i]),p=v.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let j=new Set,w=!1;if(r.forEach(C=>{let L=c.routes[C.route.id];!L||!L.hasLoader||(!f.some(A=>A.route.id===C.route.id)&&C.route.id in g&&x[C.route.id]?.shouldRevalidate||L.hasClientLoader?w=!0:j.add(C.route.id))}),j.size===0)return[];let D=Sv(n,u,"data");return w&&j.size>0&&D.searchParams.set("_routes",r.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[D.pathname+D.search]},[u,g,i,c,f,r,n,x]),y=v.useMemo(()=>Rv(b,c),[b,c]),N=$v(b);return v.createElement(v.Fragment,null,p.map(j=>v.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...l})),y.map(j=>v.createElement("link",{key:j,rel:"modulepreload",href:j,...l})),N.map(({key:j,link:w})=>v.createElement("link",{key:j,...w})))}function Vv(...n){return r=>{n.forEach(l=>{typeof l=="function"?l(r):l!=null&&(l.current=r)})}}var ep=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ep&&(window.__reactRouterVersion="7.7.1")}catch{}function Hv({basename:n,children:r,window:l}){let i=v.useRef();i.current==null&&(i.current=_y({window:l,v5Compat:!0}));let c=i.current,[x,u]=v.useState({action:c.action,location:c.location}),g=v.useCallback(m=>{v.startTransition(()=>u(m))},[u]);return v.useLayoutEffect(()=>c.listen(g),[c,g]),v.createElement(vv,{basename:n,children:r,location:x.location,navigationType:x.action,navigator:c})}var tp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ps=v.forwardRef(function({onClick:r,discover:l="render",prefetch:i="none",relative:c,reloadDocument:x,replace:u,state:g,target:m,to:f,preventScrollReset:b,viewTransition:p,...y},N){let{basename:j}=v.useContext(ha),w=typeof f=="string"&&tp.test(f),D,C=!1;if(typeof f=="string"&&w&&(D=f,ep))try{let S=new URL(window.location.href),$=f.startsWith("//")?new URL(S.protocol+f):new URL(f),P=Za($.pathname,j);$.origin===S.origin&&P!=null?f=P+$.search+$.hash:C=!0}catch{ra(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=nv(f,{relative:c}),[A,_,O]=zv(i,y),U=Xv(f,{replace:u,state:g,target:m,preventScrollReset:b,relative:c,viewTransition:p});function M(S){r&&r(S),S.defaultPrevented||U(S)}let E=v.createElement("a",{...y,...O,href:D||L,onClick:C||x?r:M,ref:Vv(N,_),target:m,"data-discover":!w&&l==="render"?"true":void 0});return A&&!w?v.createElement(v.Fragment,null,E,v.createElement(qv,{page:L})):E});ps.displayName="Link";var Qv=v.forwardRef(function({"aria-current":r="page",caseSensitive:l=!1,className:i="",end:c=!1,style:x,to:u,viewTransition:g,children:m,...f},b){let p=hi(u,{relative:f.relative}),y=Vs(),N=v.useContext(ec),{navigator:j,basename:w}=v.useContext(ha),D=N!=null&&e1(p)&&g===!0,C=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,L=y.pathname,A=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;l||(L=L.toLowerCase(),A=A?A.toLowerCase():null,C=C.toLowerCase()),A&&w&&(A=Za(A,w)||A);const _=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let O=L===C||!c&&L.startsWith(C)&&L.charAt(_)==="/",U=A!=null&&(A===C||!c&&A.startsWith(C)&&A.charAt(C.length)==="/"),M={isActive:O,isPending:U,isTransitioning:D},E=O?r:void 0,S;typeof i=="function"?S=i(M):S=[i,O?"active":null,U?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let $=typeof x=="function"?x(M):x;return v.createElement(ps,{...f,"aria-current":E,className:S,ref:b,style:$,to:u,viewTransition:g},typeof m=="function"?m(M):m)});Qv.displayName="NavLink";var Yv=v.forwardRef(({discover:n="render",fetcherKey:r,navigate:l,reloadDocument:i,replace:c,state:x,method:u=Oo,action:g,onSubmit:m,relative:f,preventScrollReset:b,viewTransition:p,...y},N)=>{let j=Jv(),w=Wv(g,{relative:f}),D=u.toLowerCase()==="get"?"get":"post",C=typeof g=="string"&&tp.test(g),L=A=>{if(m&&m(A),A.defaultPrevented)return;A.preventDefault();let _=A.nativeEvent.submitter,O=_?.getAttribute("formmethod")||u;j(_||A.currentTarget,{fetcherKey:r,method:O,navigate:l,replace:c,state:x,relative:f,preventScrollReset:b,viewTransition:p})};return v.createElement("form",{ref:N,method:D,action:w,onSubmit:i?m:L,...y,"data-discover":!C&&n==="render"?"true":void 0})});Yv.displayName="Form";function Gv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sp(n){let r=v.useContext(Kn);return _t(r,Gv(n)),r}function Xv(n,{target:r,replace:l,state:i,preventScrollReset:c,relative:x,viewTransition:u}={}){let g=ys(),m=Vs(),f=hi(n,{relative:x});return v.useCallback(b=>{if(Ev(b,r)){b.preventDefault();let p=l!==void 0?l:oi(m)===oi(f);g(n,{replace:p,state:i,preventScrollReset:c,relative:x,viewTransition:u})}},[m,g,f,l,i,r,n,c,x,u])}function ap(n){ra(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=v.useRef(i0(n)),l=v.useRef(!1),i=Vs(),c=v.useMemo(()=>Fv(i.search,l.current?null:r.current),[i.search]),x=ys(),u=v.useCallback((g,m)=>{const f=i0(typeof g=="function"?g(new URLSearchParams(c)):g);l.current=!0,x("?"+f,m)},[x,c]);return[c,u]}var Kv=0,Zv=()=>`__${String(++Kv)}__`;function Jv(){let{router:n}=sp("useSubmit"),{basename:r}=v.useContext(ha),l=gv();return v.useCallback(async(i,c={})=>{let{action:x,method:u,encType:g,formData:m,body:f}=Dv(i,r);if(c.navigate===!1){let b=c.fetcherKey||Zv();await n.fetch(b,l,c.action||x,{preventScrollReset:c.preventScrollReset,formData:m,body:f,formMethod:c.method||u,formEncType:c.encType||g,flushSync:c.flushSync})}else await n.navigate(c.action||x,{preventScrollReset:c.preventScrollReset,formData:m,body:f,formMethod:c.method||u,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:l,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,r,l])}function Wv(n,{relative:r}={}){let{basename:l}=v.useContext(ha),i=v.useContext(ka);_t(i,"useFormAction must be used inside a RouteContext");let[c]=i.matches.slice(-1),x={...hi(n||".",{relative:r})},u=Vs();if(n==null){x.search=u.search;let g=new URLSearchParams(x.search),m=g.getAll("index");if(m.some(b=>b==="")){g.delete("index"),m.filter(p=>p).forEach(p=>g.append("index",p));let b=g.toString();x.search=b?`?${b}`:""}}return(!n||n===".")&&c.route.index&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),l!=="/"&&(x.pathname=x.pathname==="/"?l:Ka([l,x.pathname])),oi(x)}function e1(n,{relative:r}={}){let l=v.useContext(Yg);_t(l!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=sp("useViewTransitionState"),c=hi(n,{relative:r});if(!l.isTransitioning)return!1;let x=Za(l.currentLocation.pathname,i)||l.currentLocation.pathname,u=Za(l.nextLocation.pathname,i)||l.nextLocation.pathname;return Xo(c.pathname,u)!=null||Xo(c.pathname,x)!=null}var Kt=Dg();const J=R2,rp=v.createContext(null),Tt=()=>{const n=v.useContext(rp);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},t1=({children:n})=>{const[r,l]=v.useState(!1),[i,c]=v.useState(null),[x,u]=v.useState(!0),[g,m]=v.useState(null);v.useEffect(()=>{const C=localStorage.getItem("session_token");C?m(C):(u(!1),l(!1),c(null))},[]);const f=fe(J.services.auth.getCurrentUser,g?{sessionToken:g}:"skip"),b=Ee(J.services.auth.loginUser),p=Go(J.services.auth.loginWithFacebook),y=Ee(J.services.auth.logoutUser);v.useEffect(()=>{g&&f!==void 0&&(u(!1),f?(l(!0),c({_id:f._id,id:f._id,username:f.username,email:f.email,nickname:f.nickname,mobile_number:f.mobile_number,role:f.role,avatar:f.avatar,is_staff:f.role==="staff"||f.role==="admin"||f.role==="super_admin"||f.role==="branch_admin",branch_id:f.branch_id})):(l(!1),c(null),m(null),localStorage.removeItem("session_token")))},[f,g]);const D={isAuthenticated:r,user:i,loading:x,login:async(C,L)=>{try{console.log("Attempting login with:",{email:C});const A=await b({email:C,password:L});return console.log("Login result:",A),A?(localStorage.setItem("session_token",A.sessionToken),m(A.sessionToken),l(!0),c({_id:A.user._id,id:A.user._id,username:A.user.username,email:A.user.email,nickname:A.user.nickname,mobile_number:A.user.mobile_number,role:A.user.role,avatar:A.user.avatar,is_staff:A.user.role==="staff"||A.user.role==="admin"||A.user.role==="super_admin"||A.user.role==="branch_admin",branch_id:A.user.branch_id}),{success:!0,data:A.user}):{success:!1,error:"Login failed"}}catch(A){return console.error("Login error:",A),{success:!1,error:A.message||"Login failed. Please try again."}}},logout:async()=>{try{g&&await y({sessionToken:g})}catch(C){console.error("Logout error:",C)}finally{localStorage.removeItem("session_token"),m(null),l(!1),c(null)}},loginWithFacebook:async C=>{try{const L=await p({access_token:C});return L?.sessionToken&&L?.user?(localStorage.setItem("session_token",L.sessionToken),m(L.sessionToken),l(!0),c({_id:L.user._id,id:L.user._id,username:L.user.username,email:L.user.email,nickname:L.user.nickname,mobile_number:L.user.mobile_number,role:L.user.role,avatar:L.user.avatar,is_staff:L.user.role==="staff"||L.user.role==="admin"||L.user.role==="super_admin"||L.user.role==="branch_admin",branch_id:L.user.branch_id}),{success:!0,data:L.user}):{success:!1,error:"Facebook login failed"}}catch(L){return console.error("Facebook login error:",L),{success:!1,error:L.message||"Facebook login failed"}}},sessionToken:g};return e.jsx(rp.Provider,{value:D,children:n})},np=({message:n="Loading..."})=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-[#333333] opacity-20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-[#FF8C42] animate-spin"}),e.jsx("div",{className:"absolute inset-2 rounded-full border-2 border-transparent border-t-[#FF8C42] animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full animate-pulse"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-white text-lg font-medium",children:n}),e.jsxs("div",{className:"flex justify-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-transparent via-[#FF8C42] to-transparent mx-auto opacity-50"})})]})}),Jr=({children:n,requireStaff:r=!1,requireBarber:l=!1,requireSuperAdmin:i=!1})=>{const{isAuthenticated:c,user:x,loading:u}=Tt(),g=Vs();return u?e.jsx(np,{message:"Verifying access..."}):c?r&&x?.role!=="staff"&&x?.role!=="admin"&&x?.role!=="super_admin"&&x?.role!=="branch_admin"?e.jsx(sa,{to:Bd(x?.role),replace:!0}):l&&x?.role!=="barber"?e.jsx(sa,{to:Bd(x?.role),replace:!0}):i&&x?.role!=="super_admin"?e.jsx(sa,{to:Bd(x?.role),replace:!0}):n:e.jsx(sa,{to:"/auth/login",state:{from:g},replace:!0})},Bd=n=>{switch(n){case"super_admin":return"/admin/dashboard";case"staff":case"admin":case"branch_admin":return"/staff/dashboard";case"barber":return"/barber/dashboard";case"customer":default:return"/customer/dashboard"}},Uf=({children:n})=>{const{isAuthenticated:r,user:l,loading:i}=Tt();if(i)return e.jsx(np,{message:"Authenticating..."});if(r&&l)switch(l.role){case"super_admin":return e.jsx(sa,{to:"/admin/dashboard",replace:!0});case"staff":case"admin":case"branch_admin":return e.jsx(sa,{to:"/staff/dashboard",replace:!0});case"barber":return e.jsx(sa,{to:"/barber/dashboard",replace:!0});case"customer":default:return e.jsx(sa,{to:"/customer/dashboard",replace:!0})}return n};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,i)=>i?i.toUpperCase():l.toLowerCase()),zf=n=>{const r=a1(n);return r.charAt(0).toUpperCase()+r.slice(1)},lp=(...n)=>n.filter((r,l,i)=>!!r&&r.trim()!==""&&i.indexOf(r)===l).join(" ").trim(),r1=n=>{for(const r in n)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=v.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:x,iconNode:u,...g},m)=>v.createElement("svg",{ref:m,...n1,width:r,height:r,stroke:n,strokeWidth:i?Number(l)*24/Number(r):l,className:lp("lucide",c),...!x&&!r1(g)&&{"aria-hidden":"true"},...g},[...u.map(([f,b])=>v.createElement(f,b)),...Array.isArray(x)?x:[x]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(n,r)=>{const l=v.forwardRef(({className:i,...c},x)=>v.createElement(l1,{ref:x,iconNode:r,className:lp(`lucide-${s1(zf(n))}`,`lucide-${n}`,i),...c}));return l.displayName=zf(n),l};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Gn=we("activity",i1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rs=we("arrow-left",o1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ip=we("arrow-right",c1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Vn=we("award",x1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],u1=we("bell-ring",d1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sc=we("bell",m1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],op=we("book-open",h1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],zo=we("bot",f1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],cs=we("building",g1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],ai=we("calculator",p1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],y1=we("calendar-days",b1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Re=we("calendar",v1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ja=we("camera",j1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ks=we("chart-column",N1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],qf=we("check-check",w1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ga=we("check",C1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wr=we("chevron-down",A1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],cp=we("chevron-left",E1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Er=we("chevron-right",F1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],k1=we("chevron-up",B1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],at=we("circle-alert",D1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qe=we("circle-check-big",S1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Pt=we("circle-x",_1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jt=we("clock",T1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],R1=we("code",M1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],L1=we("copy",P1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],da=we("credit-card",O1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ea=we("crown",U1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],xp=we("database",z1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ut=we("dollar-sign",q1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xa=we("download",$1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],kd=we("ellipsis",I1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],dp=we("external-link",V1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qo=we("eye",H1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wl=we("file-text",Q1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fa=we("funnel",Y1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],kt=we("gift",G1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],up=we("globe",X1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],F0=we("grid-3x3",K1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],J1=we("history",Z1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ej=we("house",W1);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],o0=we("image",tj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],c0=we("info",sj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],rj=we("keyboard",aj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ko=we("layout-dashboard",nj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],B0=we("list",lj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mp=we("loader-circle",ij);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],ei=we("loader",oj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ac=we("log-out",cj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ft=we("mail",xj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],fi=we("map-pin",dj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M5 12h14",key:"1ays0h"}]],ci=we("minus",uj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],hj=we("monitor",mj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],aa=we("package",fj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],pj=we("palette",gj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],yj=we("pause",bj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jj=we("pen-line",vj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],wj=we("pen",Nj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],$f=we("percent",Cj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Is=we("phone",Aj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Fj=we("play",Ej);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bt=we("plus",Bj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],hp=we("printer",kj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Vt=we("qr-code",Dj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Fr=we("receipt",Sj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xs=we("refresh-cw",_j);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],an=we("rotate-ccw",Tj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],na=we("save",Mj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],It=we("scissors",Rj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Jt=we("search",Pj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$o=we("send",Lj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Uj=we("server",Oj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sr=we("settings",zj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Tr=we("shield",qj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Ij=we("shopping-bag",$j);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],xi=we("shopping-cart",Vj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Qj=we("smartphone",Hj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fa=we("sparkles",Yj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ba=we("square-pen",Gj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],nt=we("star",Xj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Zj=we("store",Kj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wj=we("target",Jj);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],If=we("test-tube",e8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],s8=we("ticket",t8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ss=we("trash-2",a8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],fp=we("trending-down",r8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fs=we("trending-up",n8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],i8=we("triangle-alert",l8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],c8=we("trophy",o8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],d8=we("type",x8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_r=we("upload",u8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zo=we("user-check",m8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ua=we("user-plus",h8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Vf=we("user-x",f8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Le=we("user",g8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gt=we("users",p8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rt=we("x",b8);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],di=we("zap",y8);function Zt({children:n,variant:r="primary",onClick:l,disabled:i=!1,className:c="",type:x="button"}){const u="w-full min-h-[48px] rounded-lg font-bold text-base transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",g={primary:"bg-primary-orange text-white hover:bg-orange-600 active:bg-orange-700",secondary:"bg-primary-black text-white hover:bg-gray-800 active:bg-gray-900",outline:"border-2 border-primary-orange text-primary-orange bg-transparent hover:bg-primary-orange hover:text-white"};return e.jsx("button",{type:x,onClick:l,disabled:i,className:`${u} ${g[r]} ${c}`,children:n})}const k0="/assets/banner-CSqrWLZa.jpg",Hf=()=>{const n=ys(),r=[{title:"Premium Haircuts",description:"Expert styling with precision and attention to detail",icon:It,price:"Starting at 299",popular:!0},{title:"Beard Grooming",description:"Professional beard trimming and styling services",icon:nt,price:"Starting at 199",popular:!1},{title:"Hair Treatments",description:"Nourishing treatments for healthy, vibrant hair",icon:Vn,price:"Starting at 399",popular:!1},{title:"Hot Towel Shave",description:"Relaxing traditional shave with premium hot towel service",icon:Fa,price:"Starting at 249",popular:!1}],l=[{title:"Expert Barbers",description:"Skilled professionals with years of experience",icon:gt,stat:"10+ Years"},{title:"Premium Products",description:"Only the finest grooming products and tools",icon:Vn,stat:"Top Brands"},{title:"Hygienic Standards",description:"Strict cleanliness protocols for your safety",icon:Tr,stat:"100% Safe"}],i=[{name:"Miguel Santos",rating:5,comment:"Best barbershop experience in the city. Professional service and great atmosphere.",initials:"MS",service:"Premium Haircut"},{name:"Carlos Rivera",rating:5,comment:"Amazing attention to detail. My go-to place for all grooming needs.",initials:"CR",service:"Beard Grooming"},{name:"Juan dela Cruz",rating:5,comment:"Top-notch service every time. Highly recommend TPX Barbershop!",initials:"JC",service:"Hair Treatment"}];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsxs("header",{className:"bg-[#0a0a0a] backdrop-blur-xl border-b border-gray-800/30 sticky top-0 z-50 shadow-2xl",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TPX Barbershop Logo",className:"w-12 h-12 object-contain filter brightness-110 contrast-125"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white tracking-tight font-sans",children:"TPX Barbershop"}),e.jsx("p",{className:"text-xs text-orange-400 font-medium tracking-wider uppercase font-sans",children:"Premium Grooming"})]})]}),e.jsxs("nav",{className:"hidden lg:flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>n("/platform-selection",{state:{action:"signin"}}),className:"relative px-4 py-2 text-sm font-medium text-gray-400 hover:text-white transition-all duration-300 group",children:[e.jsx("span",{className:"relative z-10",children:"Sign In"}),e.jsx("div",{className:"absolute inset-0 bg-gray-800/50 rounded-lg scale-95 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-300"})]}),e.jsxs("button",{onClick:()=>n("/platform-selection",{state:{action:"booking"}}),className:"relative px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-orange-600 to-orange-700 rounded-lg shadow-xl hover:shadow-orange-600/40 transition-all duration-300 group overflow-hidden",children:[e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Book Now"]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500 to-orange-600 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white/15 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-500"})]}),e.jsxs("button",{onClick:()=>n("/privacy"),className:"relative px-3 py-2 text-sm font-medium text-gray-500 hover:text-white transition-all duration-300 group font-sans",children:[e.jsx("span",{className:"relative z-10",children:"Policy"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 w-0 h-px bg-orange-500 transition-all duration-300 group-hover:w-3/4 group-hover:left-1/8"}),e.jsx("div",{className:"absolute inset-0 bg-gray-800/30 rounded-lg scale-95 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-300"})]})]}),e.jsxs("button",{className:"lg:hidden relative p-2 text-gray-400 hover:text-white transition-all duration-300 group",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-800/50 rounded-lg scale-95 opacity-0 group-hover:scale-100 group-hover:opacity-100 transition-all duration-300"}),e.jsx("svg",{className:"w-5 h-5 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})}),e.jsx("div",{className:"absolute top-2 right-2 w-1 h-1 bg-orange-500 rounded-full opacity-60"})]})]})}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-700/50 to-transparent"})]}),e.jsxs("section",{className:"relative bg-gray-900 py-20 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/landing/1.avif')"}})}),e.jsx("div",{className:"absolute inset-0 bg-black/75"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 z-10",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"inline-block bg-orange-600/20 border border-orange-500/30 text-orange-400 px-4 py-2 rounded-full text-sm font-medium mb-8 backdrop-blur-sm",children:"Professional Barbershop Services"}),e.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-8 leading-tight",children:["Premium grooming",e.jsx("br",{}),e.jsx("span",{className:"text-orange-500",children:"in Angeles City"})]}),e.jsx("p",{className:"text-xl text-gray-300 mb-10 leading-relaxed",children:"Experience expert haircuts, professional beard grooming, and premium styling services. Book your appointment with TPX Barbershop today."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-12",children:[e.jsxs("button",{onClick:()=>n("/platform-selection",{state:{action:"booking"}}),className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-orange-500/25",children:[e.jsx(Re,{className:"w-5 h-5"}),"Book Appointment"]}),e.jsx("button",{onClick:()=>n("/platform-selection",{state:{action:"signin"}}),className:"border-2 border-gray-600 text-gray-300 px-8 py-4 rounded-lg font-semibold text-lg hover:border-orange-500 hover:text-white transition-all duration-200 backdrop-blur-sm",children:"Sign In"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-8 border-t border-gray-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"2,500+"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Happy Clients"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"10+"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Years Experience"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"4.9"}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center",children:[e.jsx(nt,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),"Rating"]})]})]})]}),e.jsx("div",{className:"relative flex justify-center lg:justify-end",children:e.jsxs("div",{className:"relative w-full max-w-lg",children:[e.jsx("div",{className:"relative z-30 flex justify-center",children:e.jsx("img",{src:"/screenshots/ss3.png",alt:"TPX Barbershop Dashboard",className:"w-[300px] rounded-3xl shadow-2xl hover:scale-105 transition-all duration-500"})}),e.jsx("div",{className:"absolute top-8 -left-16 z-20 hidden lg:block",children:e.jsx("img",{src:"/screenshots/ss2.png",alt:"TPX Welcome Screen",className:"w-[200px] rounded-2xl shadow-xl transform -rotate-6 hover:rotate-0 hover:scale-110 transition-all duration-300 opacity-85 hover:opacity-100"})}),e.jsx("div",{className:"absolute top-16 -right-12 z-20 hidden lg:block",children:e.jsx("img",{src:"/screenshots/ss4.png",alt:"AI Style Assistant",className:"w-[180px] rounded-2xl shadow-xl transform rotate-8 hover:rotate-0 hover:scale-110 transition-all duration-300 opacity-85 hover:opacity-100"})}),e.jsxs("div",{className:"flex justify-center gap-4 mt-8 lg:hidden",children:[e.jsx("img",{src:"/screenshots/ss2.png",alt:"Welcome Screen",className:"w-[130px] rounded-2xl shadow-lg opacity-80"}),e.jsx("img",{src:"/screenshots/ss4.png",alt:"AI Assistant",className:"w-[130px] rounded-2xl shadow-lg opacity-80"})]}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 z-40",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-xl px-6 py-4 rounded-2xl shadow-2xl border border-white/50 flex items-center gap-3 hover:bg-white/95 transition-all duration-300",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((c,x)=>e.jsx(nt,{className:"w-5 h-5 text-yellow-400 fill-current"},x))}),e.jsxs("div",{className:"border-l border-gray-300 pl-3",children:[e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:"4.9"}),e.jsx("span",{className:"text-gray-600 text-sm ml-1",children:"2,500+ reviews"})]})]})})]})})]})})]}),e.jsxs("section",{className:"relative py-20 bg-gray-900 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/landing/3.jpeg')"}})}),e.jsx("div",{className:"absolute inset-0 bg-black/95"}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Our Services"}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Professional grooming services designed to make you look and feel your best"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((c,x)=>e.jsxs("div",{className:"group border border-gray-700/50 rounded-xl overflow-hidden hover:shadow-2xl transition-all duration-300 bg-gray-800/90 backdrop-blur-sm",children:[e.jsxs("div",{className:"h-48 relative overflow-hidden bg-gray-100",children:[e.jsx("img",{src:x===0?"/landing/2.webp":x===1?"/landing/4.webp":x===2?"/landing/7.jpg":"/landing/8.webp",alt:c.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),c.popular&&e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx("span",{className:"bg-orange-600 text-white text-xs font-semibold px-3 py-1 rounded-full",children:"Most Popular"})}),e.jsxs("div",{className:"absolute bottom-4 left-4 text-white",children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:c.title}),e.jsx("p",{className:"text-sm text-gray-200",children:c.price})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-300 text-sm mb-6 leading-relaxed",children:c.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(5)].map((u,g)=>e.jsx(nt,{className:"w-4 h-4 text-yellow-400 fill-current"},g)),e.jsx("span",{className:"text-gray-400 text-sm ml-2",children:"(4.9)"})]}),e.jsx("span",{className:"text-gray-400 text-sm",children:"30-45 min"})]}),e.jsx("button",{onClick:()=>n("/auth/register"),className:"w-full bg-orange-600 text-white py-3 rounded-lg font-semibold hover:bg-orange-700 transition-colors duration-200",children:"Book Service"})]})]},x))})]})]}),e.jsxs("section",{className:"py-16 bg-gray-900 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('/landing/5.jpg')"}})}),e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Why Choose TPX Barbershop"}),e.jsx("div",{className:"w-20 h-1 bg-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:"Real barbers, real skills, real results"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:l.map((c,x)=>{const u=c.icon;return e.jsxs("div",{className:"text-center p-6 hover:bg-gray-800/50 rounded-lg transition-colors duration-200",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(u,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:c.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-3 leading-relaxed",children:c.description}),e.jsx("div",{className:"text-orange-400 font-medium",children:c.stat})]},x)})}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("div",{className:"inline-flex items-center space-x-4 text-gray-400 text-sm",children:[e.jsx("span",{children:"Established 2014"}),e.jsx("span",{children:""}),e.jsx("span",{children:"2,500+ Happy Clients"}),e.jsx("span",{children:""}),e.jsx("span",{children:"Quezon City"})]})})]})]}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"What our customers say"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Real reviews from satisfied customers who trust TPX Barbershop"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:i.map((c,x)=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-8 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[[...Array(c.rating)].map((u,g)=>e.jsx(nt,{className:"w-5 h-5 text-yellow-400 fill-current"},g)),e.jsx("span",{className:"text-gray-600 ml-2 text-sm",children:"5.0"})]}),e.jsxs("p",{className:"text-gray-700 mb-6 leading-relaxed text-lg",children:['"',c.comment,'"']}),e.jsxs("div",{className:"flex items-center pt-4 border-t border-gray-100",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-full flex items-center justify-center text-white font-semibold",children:c.initials}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:c.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:c.service})]})]})]},x))})]})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Download the TPX app"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Experience seamless booking, AI-powered style recommendations, and manage your grooming appointments on the go."})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Easy Booking"}),e.jsx("p",{className:"text-gray-600",children:"Schedule appointments instantly with our intuitive booking system. View available slots and book your preferred time."})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Fa,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"AI Style Assistant"}),e.jsx("p",{className:"text-gray-600",children:"Get personalized style recommendations powered by AI. Advanced head shape and hair analysis for perfect suggestions."})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(gt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Personal Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Track your bookings, manage vouchers, and access shop information all in one convenient dashboard."})]})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Vn,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Premium Experience"}),e.jsx("p",{className:"text-gray-600",children:"Enjoy a premium barbershop experience with professional service tracking and loyalty rewards."})]})]})]}),e.jsx("div",{className:"mt-10",children:e.jsxs("button",{onClick:()=>n("/auth/register"),className:"bg-orange-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-orange-700 transition-colors inline-flex items-center gap-2",children:["Download App & Book Now",e.jsx(ip,{className:"w-5 h-5"})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[e.jsx("div",{className:"transform hover:scale-105 transition-transform duration-300",children:e.jsx("img",{src:"/screenshots/ss1.png",alt:"TPX Barbershop Mobile App",className:"w-full max-w-[250px] rounded-3xl shadow-2xl"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-900 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center",children:e.jsx("div",{className:"text-xs font-bold text-gray-900",children:"QR"})})}),e.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"Scan to download"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Available on iOS & Android"})]})]}),e.jsx("div",{className:"absolute -top-8 -left-8 bg-orange-600 text-white px-3 py-2 rounded-full text-sm font-semibold shadow-lg",children:"Easy Login"}),e.jsx("div",{className:"absolute -bottom-8 -right-8 bg-white p-3 rounded-xl shadow-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Fa,{className:"w-4 h-4 text-orange-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Premium Features"})]})})]})]})]})}),e.jsx("section",{className:"py-20 bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:"Visit our barbershop"}),e.jsx("p",{className:"text-xl text-gray-600 mb-10 leading-relaxed",children:"Located in the heart of Quezon City, our modern barbershop offers a premium grooming experience in a comfortable, professional environment."}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx(fi,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Address"}),e.jsx("p",{className:"text-gray-600",children:"123 Main Street, Quezon City"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx(Is,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Phone"}),e.jsx("p",{className:"text-gray-600",children:"+63 912 345 6789"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx(jt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Hours"}),e.jsx("p",{className:"text-gray-600",children:"Monday - Saturday: 9:00 AM - 8:00 PM"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Closed Sundays"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Ready to book?"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Join over 2,500 satisfied customers who trust TPX Barbershop for their grooming needs."}),e.jsx("div",{className:"space-y-3 mb-8",children:["Professional expert barbers","Premium quality products","Clean, modern facilities","Convenient online booking"].map((c,x)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ga,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-gray-700",children:c})]},x))}),e.jsxs("button",{onClick:()=>n("/auth/register"),className:"w-full bg-orange-600 text-white py-4 rounded-lg font-semibold text-lg hover:bg-orange-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5"}),"Book Your Appointment"]})]})]})})}),e.jsx("footer",{className:"bg-gray-900 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TPX Barbershop Logo",className:"w-7 h-7 object-contain"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"TPX Barbershop"}),e.jsx("p",{className:"text-orange-500 text-sm font-medium",children:"Professional Grooming Services"})]})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:" 2024 TPX Barbershop. All rights reserved."}),e.jsxs("div",{className:"text-gray-500 text-sm flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>n("/privacy"),className:"hover:text-white",children:"Policy"}),e.jsx("span",{children:""}),e.jsx("button",{onClick:()=>n("/account-deletion"),className:"hover:text-white",children:"Account Deletion"})]})]})})})]})},v8=()=>{const n=ys(),i=(Vs().state?.action||"signin")==="booking",c=()=>{n(i?"/auth/register":"/auth/login")},x=()=>{n("/download-app")};return e.jsxs("div",{className:"min-h-screen relative bg-gray-900 overflow-hidden flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900/95 via-gray-900/90 to-gray-900/95"}),e.jsxs("button",{onClick:()=>n("/"),className:"absolute top-6 left-6 z-10 flex items-center gap-2 text-gray-300 hover:text-white transition-colors",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Back"})]}),e.jsxs("div",{className:"relative z-10 px-4 w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"flex items-center justify-center gap-3 mb-6",children:e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TPX Logo",className:"w-20 h-20 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-3",children:i?"Ready to Book?":"Welcome Back"}),e.jsx("p",{className:"text-gray-300",children:"Choose your preferred way to continue"})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("button",{onClick:x,className:"w-full bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-6 hover:bg-white/15 hover:border-orange-500/50 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 overflow-hidden",children:e.jsx("img",{src:"/img/android.png",alt:"Android",className:"w-8 h-8 object-contain"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg font-bold text-white",children:"Android App"}),e.jsx("span",{className:"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full",children:"Recommended"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"AI assistant & premium features"})]}),e.jsx(Xa,{className:"w-5 h-5 text-green-400"})]})}),e.jsx("button",{onClick:c,className:"w-full bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:bg-white/10 hover:border-white/30 transition-all duration-300 group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(up,{className:"w-6 h-6 text-gray-300"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("span",{className:"text-lg font-bold text-white block mb-1",children:"Web Browser"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Quick access, no download"})]}),e.jsx(rs,{className:"w-5 h-5 text-gray-400 rotate-180"})]})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-400",children:[e.jsx(nt,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-white font-semibold",children:"4.9"}),e.jsx("span",{children:" 2,500+ customers"})]})})]})]})};function j8(n){let r="",l="",i="",c="";try{if(typeof n=="string")if(n.includes('{"message"')){const x=n.match(/\{"message".*?\}/);if(x){const u=JSON.parse(x[0]);r=u.message||"An error occurred",l=u.code||"UNKNOWN_ERROR",i=u.details||"",c=u.action||""}else r=n}else r=n;else if(n?.message){const x=n.message;if(x.includes('{"message"')){const u=x.match(/\{"message".*?\}/);if(u){const g=JSON.parse(u[0]);r=g.message||"An error occurred",l=g.code||"UNKNOWN_ERROR",i=g.details||"",c=g.action||""}else r=x}else r=x}else r="An unexpected error occurred"}catch{r=n?.message||n||"An unexpected error occurred"}return{message:r,code:l,details:i,action:c,isUserError:!!(l&&i)}}function N8(n){const r=j8(n);return{title:r.isUserError?"Error":"Something went wrong",message:r.message,details:r.details,action:r.action,type:w8(r.code),code:r.code}}function w8(n){return n.includes("AUTH_")?"auth":n.includes("BOOKING_")?"booking":n.includes("VOUCHER_")?"voucher":n.includes("TRANSACTION_")?"transaction":n.includes("PRODUCT_")?"product":n.includes("EVENT_")?"event":n.includes("PERMISSION_")?"permission":"general"}const ui=({error:n,onClose:r,onRetry:l,className:i="",variant:c="default"})=>{if(!n)return null;const x=N8(n);return c==="inline"?e.jsxs("div",{className:`flex items-start space-x-3 p-3 bg-red-50 border border-red-200 rounded-lg ${i}`,children:[e.jsx(at,{className:"w-4 h-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm text-red-800",children:x.message})}),r&&e.jsx("button",{onClick:r,className:"text-red-400 hover:text-red-600 transition-colors",children:e.jsx(rt,{className:"w-4 h-4"})})]}):c==="compact"?e.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${i}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(at,{className:"w-5 h-5 text-red-500"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:x.message})})]}),e.jsx("div",{className:"flex items-center space-x-2",children:r&&e.jsx("button",{onClick:r,className:"text-red-400 hover:text-red-600 transition-colors",children:e.jsx(rt,{className:"w-4 h-4"})})})]})}):e.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${i}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(at,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:x.message}),x.details&&e.jsx("p",{className:"text-xs text-red-600 mb-2",children:x.details}),x.action&&e.jsx("p",{className:"text-xs text-red-600",children:x.action})]}),r&&e.jsx("button",{onClick:r,className:"text-red-400 hover:text-red-600 transition-colors ml-3",children:e.jsx(rt,{className:"w-4 h-4"})})]})})]})})};function C8(){const[n,r]=v.useState({email:"",password:""}),[l,i]=v.useState(!1),[c,x]=v.useState(""),u=ys(),{login:g,loginWithFacebook:m}=Tt(),[f,b]=v.useState(!1),[p,y]=v.useState(!1);v.useEffect(()=>{if(window.FB)return;const D="815755054211011";window.fbAsyncInit=function(){try{window.FB.init({appId:D,cookie:!0,xfbml:!1,version:"v19.0"}),y(!0)}catch(C){console.error("FB.init error:",C)}},function(C,L,A){const _=C.getElementsByTagName(L)[0];if(C.getElementById(A))return;const O=C.createElement(L);O.id=A,O.async=!0,O.defer=!0,O.src="https://connect.facebook.net/en_US/sdk.js",_.parentNode.insertBefore(O,_)}(document,"script","facebook-jssdk")},[]);const N=()=>{const D="815755054211011";if(window.location.protocol!=="https:"&&window.location.hostname!=="localhost"){x("Facebook login requires HTTPS. Please use HTTPS or localhost for development.");return}b(!0),x("");const C=`${window.location.origin}/auth/facebook/callback`,A=`https://www.facebook.com/v19.0/dialog/oauth?client_id=${encodeURIComponent(D)}&redirect_uri=${encodeURIComponent(C)}&response_type=token&scope=${encodeURIComponent("public_profile,email")}`;window.location.href=A},j=D=>{r({...n,[D.target.name]:D.target.value})},w=async D=>{D.preventDefault(),i(!0),x("");try{const C=await g(n.email,n.password);if(C.success){const{role:L}=C.data;u(L==="staff"||L==="admin"||L==="super_admin"||L==="branch_admin"?"/staff/dashboard":L==="barber"?"/barber/dashboard":"/customer/dashboard")}else x(C.error)}catch{x("An unexpected error occurred. Please try again.")}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:`url(${k0})`,filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"flex justify-center mb-1",children:e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TipunoX Angeles Barbershop Logo",className:"w-52 h-32 object-contain"})}),e.jsx("p",{className:"text-sm font-light text-gray-400",children:"Welcome back! Please sign in to continue."})]}),e.jsx("div",{className:"bg-gradient-to-b from-[#2A2A2A]/90 to-[#333333]/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-[#444444]/30",children:e.jsxs("div",{className:"p-8",children:[c&&e.jsx("div",{className:"mb-4",children:e.jsx(ui,{error:c,variant:"compact",onClose:()=>x("")})}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{children:e.jsx("input",{type:"email",name:"email",value:n.email,onChange:j,placeholder:"Email address",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"})}),e.jsx("div",{children:e.jsx("input",{type:"password",name:"password",value:n.password,onChange:j,placeholder:"Password",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"})})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("a",{href:"#",className:"text-sm font-medium text-[#FF8C42] hover:text-[#FF7A2B] transition-colors active:text-[#FF6B1A]",children:"Forgot Password?"})}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full h-14 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] active:from-[#FF6B1A] active:to-[#E8610F] disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 disabled:transform-none text-base",children:l?"Signing In...":"Sign In"})}),e.jsx("div",{className:"pt-2",children:e.jsxs("button",{type:"button",onClick:N,disabled:f,className:"w-full h-12 bg-[#1877F2] hover:bg-[#166FE5] active:bg-[#145FCB] disabled:bg-gray-600 text-white font-semibold rounded-2xl transition-all duration-200 shadow-md hover:shadow-lg active:scale-95 disabled:transform-none text-sm flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{d:"M22.675 0h-21.35C.595 0 0 .594 0 1.326v21.348C0 23.406.595 24 1.325 24h11.495v-9.294H9.847v-3.622h2.973V8.413c0-2.943 1.796-4.548 4.418-4.548 1.256 0 2.336.093 2.65.135v3.07l-1.82.001c-1.428 0-1.703.679-1.703 1.675v2.197h3.406l-.444 3.622h-2.962V24h5.809C23.406 24 24 23.406 24 22.674V1.326C24 .594 23.406 0 22.675 0z"})}),f?"Connecting...":"Continue with Facebook"]})}),e.jsxs("div",{className:"text-center pt-4 border-t border-[#444444]/30 mt-8",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Don't have an account? "}),e.jsx(ps,{to:"/auth/register",className:"text-sm font-semibold text-[#FF8C42] hover:text-[#FF7A2B] active:text-[#FF6B1A] transition-colors",children:"Sign up"})]})]})]})})]})})]})}function A8(){const[n,r]=v.useState({username:"",password:"",confirmPassword:"",nickname:"",mobile_number:"",email:"",birthday:""}),[l,i]=v.useState(!1),[c,x]=v.useState(""),[u,g]=v.useState(""),m=ys(),f=Ee(J.services.auth.registerUser),b=y=>{r({...n,[y.target.name]:y.target.value})},p=async y=>{if(y.preventDefault(),i(!0),x(""),g(""),n.password!==n.confirmPassword){x("Passwords do not match"),i(!1);return}try{await f({username:n.username,password:n.password,nickname:n.nickname||void 0,mobile_number:n.mobile_number,email:n.email,birthday:n.birthday||void 0,role:"customer"}),g("Registration successful! Please log in with your credentials."),setTimeout(()=>{m("/auth/login")},2e3)}catch(N){console.error("Registration error:",N),x(N.message||"An unexpected error occurred. Please try again.")}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:`url(${k0})`,filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex flex-col justify-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-18 h-18 p-3 bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-3xl shadow-2xl ring-4 ring-[#FF8C42]/20",children:e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TipunoX Angeles Barbershop Logo",className:"w-full h-full object-contain"})})}),e.jsxs("h1",{className:"text-2xl font-light tracking-wider mb-3 text-white",children:[e.jsx("span",{className:"font-thin",children:"TipunoX Angeles"}),e.jsx("span",{className:"font-extralight ml-2 text-[#FF8C42]",children:"BARBERSHOP"})]}),e.jsx("p",{className:"text-sm font-light text-gray-400",children:"Create your account to get started"})]}),e.jsx("div",{className:"bg-gradient-to-b from-[#2A2A2A]/90 to-[#333333]/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-[#444444]/30",children:e.jsxs("div",{className:"p-6",children:[c&&e.jsx("div",{className:"mb-4",children:e.jsx(ui,{error:c,variant:"compact",onClose:()=>x("")})}),u&&e.jsx("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-400",children:u})}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",name:"username",value:n.username,onChange:b,placeholder:"Username",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"}),e.jsx("input",{type:"text",name:"nickname",value:n.nickname,onChange:b,placeholder:"Nickname",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"}),e.jsx("input",{type:"email",name:"email",value:n.email,onChange:b,placeholder:"Email address",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"}),e.jsx("input",{type:"tel",name:"mobile_number",value:n.mobile_number,onChange:b,placeholder:"Mobile number",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"}),e.jsx("input",{type:"date",name:"birthday",value:n.birthday,onChange:b,required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white shadow-inner"}),e.jsx("input",{type:"password",name:"password",value:n.password,onChange:b,placeholder:"Password",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"}),e.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:b,placeholder:"Confirm password",required:!0,className:"w-full h-14 px-5 bg-[#1A1A1A]/80 border-0 rounded-2xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:bg-[#1A1A1A] transition-all duration-300 text-base text-white placeholder-gray-400 shadow-inner"})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full h-14 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] active:from-[#FF6B1A] active:to-[#E8610F] disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold rounded-2xl transition-all duration-200 shadow-lg hover:shadow-xl active:scale-95 disabled:transform-none text-base",children:l?"Creating Account...":"Create Account"})}),e.jsxs("div",{className:"text-center pt-4 border-t border-[#444444]/30 mt-6",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Already have an account? "}),e.jsx(ps,{to:"/auth/login",className:"text-sm font-semibold text-[#FF8C42] hover:text-[#FF7A2B] active:text-[#FF6B1A] transition-colors",children:"Sign In"})]})]})]})})]})})]})}const Jo=({size:n="md",message:r=null,variant:l="primary",className:i=""})=>{const c={xs:"w-4 h-4",sm:"w-5 h-5",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},x={primary:"border-[#FF8C42]",white:"border-white",gray:"border-gray-400"};return e.jsxs("div",{className:`flex items-center justify-center ${i}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`${c[n]} rounded-full border-2 border-gray-600 border-t-${x[l]} animate-spin`}),(n==="lg"||n==="xl")&&e.jsx("div",{className:`absolute inset-1 rounded-full border border-transparent border-t-${x[l]} animate-spin opacity-60`,style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),r&&e.jsx("span",{className:"ml-3 text-gray-300 text-sm font-medium",children:r})]})};function E8(){const n=ys(),{loginWithFacebook:r}=Tt(),[l,i]=v.useState(""),[c,x]=v.useState(!0);return v.useEffect(()=>{const u=window.location.hash||"",g=new URLSearchParams(u.startsWith("#")?u.slice(1):u),m=g.get("access_token"),f=g.get("error");async function b(){try{if(f){i("Facebook authorization was cancelled or failed"),x(!1);return}if(!m){i("No access token returned from Facebook"),x(!1);return}const p=await r(m);p.success?n("/customer/dashboard"):i(p.error||"Facebook login failed")}catch{i("Facebook login error. Please try again.")}finally{x(!1)}}b()},[r,n]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e.jsxs("div",{className:"w-full max-w-sm p-6",children:[c&&e.jsxs("div",{className:"flex flex-col items-center gap-4 text-white",children:[e.jsx(Jo,{}),e.jsx("span",{children:"Completing Facebook sign-in"})]}),!!l&&e.jsx(ui,{error:l,onClose:()=>i("")})]})})}const ds=({isOpen:n,onClose:r,title:l,children:i,size:c="md",variant:x="light",compact:u=!1})=>{if(!n)return null;const g={xs:"max-w-sm",sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"},m=x==="dark",f=`${m?"bg-gradient-to-br from-[#1E1E1E] to-[#2A2A2A] border border-[#333333]/60":"bg-white"} relative w-full ${g[c]} transform rounded-3xl shadow-2xl transition-all z-[10000]`,b=m?`flex items-center justify-between ${u?"p-5":"p-8"} border-b border-[#2F2F2F]`:`flex items-center justify-between ${u?"p-5":"p-8"} border-b border-[#F5F5F5]`,p=m?"text-2xl font-black text-white":"text-2xl font-black text-[#1A1A1A]",y=m?"w-10 h-10 rounded-2xl bg-[#2A2A2A] hover:bg-[#FF8C42]/10 flex items-center justify-center transition-colors duration-200":"w-10 h-10 rounded-2xl bg-[#F5F5F5] hover:bg-[#FF8C42]/10 flex items-center justify-center transition-colors duration-200",N=m?"w-5 h-5 text-gray-300 hover:text-[#FF8C42]":"w-5 h-5 text-[#6B6B6B] hover:text-[#FF8C42]",j=u?"p-5":"p-8";return Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:r}),e.jsxs("div",{className:f,children:[l&&e.jsxs("div",{className:b,children:[e.jsx("h2",{className:p,children:l}),e.jsx("button",{onClick:r,className:y,children:e.jsx(rt,{className:N})})]}),e.jsx("div",{className:l?j:"p-0",children:i})]})]})}),document.body)};function as({label:n,type:r="text",placeholder:l,value:i,onChange:c,required:x=!1,className:u=""}){return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{className:"block text-primary-black font-medium text-base mb-2",children:[n,x&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:r,placeholder:l,value:i,onChange:c,required:x,className:`w-full h-12 px-4 border-2 border-gray-300 rounded-lg text-base focus:outline-none focus:border-primary-orange transition-colors duration-200 ${u}`})]})}const F8=({isOpen:n,onClose:r,onSave:l})=>{const[i,c]=v.useState({shopName:"TipunoX Angeles Barbershop",address:"123 Main Street, Quezon City, Philippines",phone:"+63 912 345 6789",email:"info@tpxbarbershop.com",openTime:"09:00",closeTime:"18:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"],currency:"PHP",taxRate:"12",loyaltyPointsRate:"1",maxConcurrentBookings:"3",bookingSlotDuration:"30",advanceBookingDays:"30",emailNotifications:!0,smsNotifications:!0,reminderHours:"24",sessionTimeout:"60",requireStaffPin:!1,auditLogging:!0,theme:"professional",language:"en",timezone:"Asia/Manila",dateFormat:"MM/DD/YYYY"}),x=(p,y)=>{c(N=>({...N,[p]:y}))},u=(p,y)=>{c(N=>({...N,[p]:y}))},g=p=>{c(y=>({...y,workingDays:y.workingDays.includes(p)?y.workingDays.filter(N=>N!==p):[...y.workingDays,p]}))},m=()=>{l?.(i),r()},f=()=>{c({shopName:"TipunoX Angeles Barbershop",address:"123 Main Street, Quezon City, Philippines",phone:"+63 912 345 6789",email:"info@tpxbarbershop.com",openTime:"09:00",closeTime:"18:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"],currency:"PHP",taxRate:"12",loyaltyPointsRate:"1",maxConcurrentBookings:"3",bookingSlotDuration:"30",advanceBookingDays:"30",emailNotifications:!0,smsNotifications:!0,reminderHours:"24",sessionTimeout:"60",requireStaffPin:!1,auditLogging:!0,theme:"professional",language:"en",timezone:"Asia/Manila",dateFormat:"MM/DD/YYYY"})},b=[{id:"monday",label:"Monday"},{id:"tuesday",label:"Tuesday"},{id:"wednesday",label:"Wednesday"},{id:"thursday",label:"Thursday"},{id:"friday",label:"Friday"},{id:"saturday",label:"Saturday"},{id:"sunday",label:"Sunday"}];return e.jsxs(ds,{isOpen:n,onClose:r,title:"System Settings",size:"xl",children:[e.jsxs("div",{className:"space-y-8 max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(Zj,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Barbershop Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(as,{label:"Shop Name",value:i.shopName,onChange:p=>x("shopName",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsx(as,{label:"Phone Number",value:i.phone,onChange:p=>x("phone",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsx(as,{label:"Email Address",type:"email",value:i.email,onChange:p=>x("email",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Address"}),e.jsx("textarea",{value:i.address,onChange:p=>x("address",p.target.value),rows:2,className:"w-full px-4 py-3 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200 resize-none"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(jt,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Business Hours"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(as,{label:"Opening Time",type:"time",value:i.openTime,onChange:p=>x("openTime",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsx(as,{label:"Closing Time",type:"time",value:i.closeTime,onChange:p=>x("closeTime",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-3",children:"Working Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(p=>e.jsx("button",{onClick:()=>g(p.id),className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all duration-200 ${i.workingDays.includes(p.id)?"bg-[#FF8C42] text-white":"bg-[#F5F5F5] text-[#6B6B6B] hover:bg-[#FF8C42]/10"}`,children:p.label},p.id))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(Ut,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Pricing & Loyalty"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Currency"}),e.jsxs("select",{value:i.currency,onChange:p=>x("currency",p.target.value),className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200",children:[e.jsx("option",{value:"PHP",children:"Philippine Peso ()"}),e.jsx("option",{value:"USD",children:"US Dollar ($)"}),e.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),e.jsx(as,{label:"Tax Rate (%)",type:"number",value:i.taxRate,onChange:p=>x("taxRate",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsx(as,{label:"Loyalty Points per 1",type:"number",value:i.loyaltyPointsRate,onChange:p=>x("loyaltyPointsRate",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(gt,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Staff & Booking Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(as,{label:"Max Concurrent Bookings",type:"number",value:i.maxConcurrentBookings,onChange:p=>x("maxConcurrentBookings",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsx(as,{label:"Booking Slot Duration (min)",type:"number",value:i.bookingSlotDuration,onChange:p=>x("bookingSlotDuration",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsx(as,{label:"Advance Booking Days",type:"number",value:i.advanceBookingDays,onChange:p=>x("advanceBookingDays",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(sc,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Notifications"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"emailNotifications",checked:i.emailNotifications,onChange:p=>u("emailNotifications",p.target.checked),className:"w-5 h-5 text-[#FF8C42] rounded focus:ring-[#FF8C42]"}),e.jsx("label",{htmlFor:"emailNotifications",className:"text-[#1A1A1A] font-semibold",children:"Email Notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"smsNotifications",checked:i.smsNotifications,onChange:p=>u("smsNotifications",p.target.checked),className:"w-5 h-5 text-[#FF8C42] rounded focus:ring-[#FF8C42]"}),e.jsx("label",{htmlFor:"smsNotifications",className:"text-[#1A1A1A] font-semibold",children:"SMS Notifications"})]})]}),e.jsx(as,{label:"Reminder Hours Before Appointment",type:"number",value:i.reminderHours,onChange:p=>x("reminderHours",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(Tr,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Security Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(as,{label:"Session Timeout (minutes)",type:"number",value:i.sessionTimeout,onChange:p=>x("sessionTimeout",p.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]"}),e.jsxs("div",{className:"space-y-3 pt-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"requireStaffPin",checked:i.requireStaffPin,onChange:p=>u("requireStaffPin",p.target.checked),className:"w-5 h-5 text-[#FF8C42] rounded focus:ring-[#FF8C42]"}),e.jsx("label",{htmlFor:"requireStaffPin",className:"text-[#1A1A1A] font-semibold",children:"Require Staff PIN for Actions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"auditLogging",checked:i.auditLogging,onChange:p=>u("auditLogging",p.target.checked),className:"w-5 h-5 text-[#FF8C42] rounded focus:ring-[#FF8C42]"}),e.jsx("label",{htmlFor:"auditLogging",className:"text-[#1A1A1A] font-semibold",children:"Enable Audit Logging"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(pj,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"System Preferences"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Theme"}),e.jsxs("select",{value:i.theme,onChange:p=>x("theme",p.target.value),className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200",children:[e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"modern",children:"Modern"}),e.jsx("option",{value:"classic",children:"Classic"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Language"}),e.jsxs("select",{value:i.language,onChange:p=>x("language",p.target.value),className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"fil",children:"Filipino"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Timezone"}),e.jsxs("select",{value:i.timezone,onChange:p=>x("timezone",p.target.value),className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200",children:[e.jsx("option",{value:"Asia/Manila",children:"Asia/Manila"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"America/New_York"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Date Format"}),e.jsxs("select",{value:i.dateFormat,onChange:p=>x("dateFormat",p.target.value),className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200",children:[e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-8 border-t border-[#F5F5F5]",children:[e.jsxs("button",{onClick:f,className:"flex items-center space-x-2 px-4 py-2 text-[#6B6B6B] hover:text-[#1A1A1A] font-semibold transition-colors duration-200",children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset to Defaults"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:r,className:"px-6 py-3 border-2 border-[#6B6B6B] text-[#6B6B6B] hover:bg-[#6B6B6B] hover:text-white font-semibold rounded-xl transition-all duration-200",children:"Cancel"}),e.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white hover:shadow-lg font-semibold rounded-xl transition-all duration-200",children:[e.jsx(na,{className:"w-4 h-4"}),e.jsx("span",{children:"Save Settings"})]})]})]})]})},B8=({isOpen:n,onClose:r,onConfirm:l})=>{const i=()=>{l(),r()};return e.jsx(ds,{isOpen:n,onClose:r,title:null,size:"xs",children:e.jsxs("div",{className:"text-center p-6 relative",children:[e.jsx("button",{onClick:r,className:"absolute top-2 right-2 w-6 h-6 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-500"})}),e.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-full flex items-center justify-center mb-4",children:e.jsx(ac,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-[#1A1A1A] mb-2",children:"Sign Out?"}),e.jsx("p",{className:"text-sm text-[#6B6B6B]",children:"You'll need to sign in again to access the dashboard."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:r,className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium rounded-lg transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:i,className:"flex-1 py-2 px-4 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white hover:from-[#FF7A2B] hover:to-[#FF6B1A] font-medium rounded-lg transition-all duration-200",children:"Sign Out"})]})]})})},k8=({onLogout:n,user:r})=>{const[l,i]=v.useState(!1),[c,x]=v.useState(!1),g=(fe(J.services.branches.getAllBranches)||[]).find(m=>m._id===r?.branch_id);return e.jsxs("div",{className:"relative bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A] shadow-xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.3)"}})}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center py-4 lg:py-8 gap-4 lg:gap-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-2xl ring-2 sm:ring-4 ring-[#FF8C42]/20 p-2",children:e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TipunoX Angeles Barbershop Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-white tracking-tight",children:"TipunoX Angeles Barbershop"}),e.jsx("div",{className:"bg-[#FF8C42]/20 backdrop-blur-sm rounded-full px-2 py-0.5 border border-[#FF8C42]/30",children:e.jsx("span",{className:"text-xs font-semibold text-[#FF8C42]",children:"v2.0.0"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-[#FF8C42]",children:"Staff Dashboard"}),g&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-500",children:""}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(cs,{className:"w-3 h-3 text-[#FF8C42]"}),e.jsx("span",{className:"text-xs font-medium text-white",children:g.name}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",g.branch_code,")"]})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6",children:[e.jsxs("div",{className:"text-left sm:text-right order-2 sm:order-1",children:[e.jsx("p",{className:"text-sm sm:text-base font-semibold text-white",children:"Welcome back, Staff"}),e.jsx("p",{className:"text-xs text-gray-300 font-medium hidden sm:block",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("p",{className:"text-xs text-gray-300 font-medium sm:hidden",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center justify-start sm:justify-end space-x-2 sm:space-x-3 order-1 sm:order-2 overflow-x-auto pb-2 sm:pb-0",children:[e.jsxs(ps,{to:"/staff/pos",className:"bg-green-500/20 backdrop-blur-sm rounded-xl sm:rounded-2xl flex items-center space-x-1 sm:space-x-2 px-2 sm:px-4 py-2 sm:py-3 hover:bg-green-500/30 transition-all duration-300 border border-green-500/30 group whitespace-nowrap",title:"POS Mode",children:[e.jsx(da,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-300 group-hover:text-green-200 transition-colors duration-300"}),e.jsx("span",{className:"text-green-300 group-hover:text-green-200 font-semibold text-xs sm:text-sm transition-colors duration-300",children:"POS"})]}),e.jsxs(ps,{to:"/kiosk",className:"bg-blue-500/20 backdrop-blur-sm rounded-xl sm:rounded-2xl flex items-center space-x-1 sm:space-x-2 px-2 sm:px-4 py-2 sm:py-3 hover:bg-blue-500/30 transition-all duration-300 border border-blue-500/30 group whitespace-nowrap",title:"Kiosk Mode",children:[e.jsx(hj,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-300 group-hover:text-blue-200 transition-colors duration-300"}),e.jsx("span",{className:"text-blue-300 group-hover:text-blue-200 font-semibold text-xs sm:text-sm transition-colors duration-300",children:"Kiosk"})]}),e.jsx("button",{onClick:()=>i(!0),className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/10 backdrop-blur-sm rounded-xl sm:rounded-2xl flex items-center justify-center hover:bg-white/20 transition-all duration-300 border border-white/20 group",title:"Settings",children:e.jsx(Sr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white group-hover:rotate-90 transition-transform duration-300"})}),e.jsx("button",{onClick:()=>x(!0),className:"w-10 h-10 sm:w-12 sm:h-12 bg-red-500/20 backdrop-blur-sm rounded-xl sm:rounded-2xl flex items-center justify-center hover:bg-red-500/30 transition-all duration-300 border border-red-500/30 group",title:"Logout",children:e.jsx(ac,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-300 group-hover:text-red-200 transition-colors duration-300"})}),e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/10 backdrop-blur-sm rounded-xl sm:rounded-2xl flex items-center justify-center hover:bg-white/20 transition-all duration-300 cursor-pointer border border-white/20",children:e.jsx(Le,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})]})]})]})}),e.jsx(F8,{isOpen:l,onClose:()=>i(!1),onSave:m=>{console.log("Settings saved:",m)}}),e.jsx(B8,{isOpen:c,onClose:()=>x(!1),onConfirm:n})]})};function xa({children:n,className:r=""}){return e.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 ${r}`,children:n})}const D8="modulepreload",S8=function(n){return"/"+n},Qf={},x0=function(r,l,i){let c=Promise.resolve();if(l&&l.length>0){let f=function(b){return Promise.all(b.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var u=f;document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),m=g?.nonce||g?.getAttribute("nonce");c=f(l.map(b=>{if(b=S8(b),b in Qf)return;Qf[b]=!0;const p=b.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${y}`))return;const N=document.createElement("link");if(N.rel=p?"stylesheet":D8,p||(N.as="script"),N.crossOrigin="",N.href=b,m&&N.setAttribute("nonce",m),document.head.appendChild(N),p)return new Promise((j,w)=>{N.addEventListener("load",j),N.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${b}`)))})}))}function x(g){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=g,window.dispatchEvent(m),!m.defaultPrevented)throw g}return c.then(g=>{for(const m of g||[])m.status==="rejected"&&x(m.reason);return r().catch(x)})};let kr=class ct{constructor(r,l,i,c,x){this._legacyCanvasSize=ct.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=r,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=l:(console.warn(i||c||x?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=l),l=typeof i=="object"?i:{},this._onDecodeError=l.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=l.calculateScanRegion||(typeof c=="function"?c:this._calculateScanRegion),this._preferredCamera=l.preferredCamera||x||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof c=="number"?c:this._legacyCanvasSize,this._maxScansPerSecond=l.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),r.disablePictureInPicture=!0,r.playsInline=!0,r.muted=!0;let u=!1;if(r.hidden&&(r.hidden=!1,u=!0),document.body.contains(r)||(document.body.appendChild(r),u=!0),i=r.parentElement,l.highlightScanRegion||l.highlightCodeOutline){if(c=!!l.overlay,this.$overlay=l.overlay||document.createElement("div"),x=this.$overlay.style,x.position="absolute",x.display="none",x.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!c&&l.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}l.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(r),requestAnimationFrame(()=>{let g=window.getComputedStyle(r);g.display==="none"&&(r.style.setProperty("display","block","important"),u=!0),g.visibility!=="visible"&&(r.style.setProperty("visibility","visible","important"),u=!0),u&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),r.style.opacity="0",r.style.width="0",r.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),r.addEventListener("play",this._onPlay),r.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=ct.createQrEngine()}static set WORKER_PATH(r){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await ct.listCameras(!1)).length}catch{return!1}}static async listCameras(r=!1){if(!navigator.mediaDevices)return[];let l=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(c=>c.kind==="videoinput"),i;try{r&&(await l()).every(c=>!c.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await l()).map((c,x)=>({id:c.deviceId,label:c.label||(x===0?"Default Camera":`Camera ${x+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),ct._stopVideoStream(i))}}async hasFlash(){let r;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;r=this.$video.srcObject}else r=(await this._getCameraStream()).stream;return"torch"in r.getVideoTracks()[0].getSettings()}catch{return!1}finally{r&&r!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),ct._stopVideoStream(r))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(r){throw this._flashOn=!1,r}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),ct._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:r,facingMode:l}=await this._getCameraStream();!this._active||this._paused?ct._stopVideoStream(r):(this._setVideoMirror(l),this.$video.srcObject=r,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(r){if(!this._paused)throw this._active=!1,r}}stop(){this.pause(),this._active=!1}async pause(r=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let l=()=>{this.$video.srcObject instanceof MediaStream&&(ct._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return r?(l(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(l(),!0):!1)}async setCamera(r){r!==this._preferredCamera&&(this._preferredCamera=r,await this._restartVideoStream())}static async scanImage(r,l,i,c,x=!1,u=!1){let g,m=!1;l&&("scanRegion"in l||"qrEngine"in l||"canvas"in l||"disallowCanvasResizing"in l||"alsoTryWithoutScanRegion"in l||"returnDetailedScanResult"in l)?(g=l.scanRegion,i=l.qrEngine,c=l.canvas,x=l.disallowCanvasResizing||!1,u=l.alsoTryWithoutScanRegion||!1,m=!0):console.warn(l||i||c||x||u?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),l=!!i;try{let f,b;[i,f]=await Promise.all([i||ct.createQrEngine(),ct._loadImage(r)]),[c,b]=ct._drawToCanvas(f,g,c,x);let p;if(i instanceof Worker){let y=i;l||ct._postWorkerMessageSync(y,"inversionMode","both"),p=await new Promise((N,j)=>{let w,D,C,L=-1;D=_=>{_.data.id===L&&(y.removeEventListener("message",D),y.removeEventListener("error",C),clearTimeout(w),_.data.data!==null?N({data:_.data.data,cornerPoints:ct._convertPoints(_.data.cornerPoints,g)}):j(ct.NO_QR_CODE_FOUND))},C=_=>{y.removeEventListener("message",D),y.removeEventListener("error",C),clearTimeout(w),j("Scanner error: "+(_?_.message||_:"Unknown Error"))},y.addEventListener("message",D),y.addEventListener("error",C),w=setTimeout(()=>C("timeout"),1e4);let A=b.getImageData(0,0,c.width,c.height);L=ct._postWorkerMessageSync(y,"decode",A,[A.data.buffer])})}else p=await Promise.race([new Promise((y,N)=>window.setTimeout(()=>N("Scanner error: timeout"),1e4)),(async()=>{try{var[y]=await i.detect(c);if(!y)throw ct.NO_QR_CODE_FOUND;return{data:y.rawValue,cornerPoints:ct._convertPoints(y.cornerPoints,g)}}catch(N){if(y=N.message||N,/not implemented|service unavailable/.test(y))return ct._disableBarcodeDetector=!0,ct.scanImage(r,{scanRegion:g,canvas:c,disallowCanvasResizing:x,alsoTryWithoutScanRegion:u});throw`Scanner error: ${y}`}})()]);return m?p:p.data}catch(f){if(!g||!u)throw f;let b=await ct.scanImage(r,{qrEngine:i,canvas:c,disallowCanvasResizing:x});return m?b:b.data}finally{l||ct._postWorkerMessage(i,"close")}}setGrayscaleWeights(r,l,i,c=!0){ct._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:r,green:l,blue:i,useIntegerApproximation:c})}setInversionMode(r){ct._postWorkerMessage(this._qrEnginePromise,"inversionMode",r)}static async createQrEngine(r){if(r&&console.warn("Specifying a worker path is not required and not supported anymore."),r=()=>x0(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(i=>i.createWorker()),!(!ct._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return r();let l=navigator.userAgentData;return l&&l.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(l.platform)&&await l.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:c})=>/arm/i.test(i||"arm")&&13<=parseInt(c||"13")).catch(()=>!0)?r():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(r){let l=Math.round(.6666666666666666*Math.min(r.videoWidth,r.videoHeight));return{x:Math.round((r.videoWidth-l)/2),y:Math.round((r.videoHeight-l)/2),width:l,height:l,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var r=this.$video,l=r.videoWidth,i=r.videoHeight,c=r.offsetWidth,x=r.offsetHeight,u=r.offsetLeft,g=r.offsetTop,m=window.getComputedStyle(r),f=m.objectFit,b=l/i,p=c/x;switch(f){case"none":var y=l,N=i;break;case"fill":y=c,N=x;break;default:(f==="cover"?b>p:b<p)?(N=x,y=N*b):(y=c,N=y/b),f==="scale-down"&&(y=Math.min(y,l),N=Math.min(N,i))}var[j,w]=m.objectPosition.split(" ").map((C,L)=>{const A=parseFloat(C);return C.endsWith("%")?(L?x-N:c-y)*A/100:A});m=this._scanRegion.width||l,p=this._scanRegion.height||i,f=this._scanRegion.x||0;var D=this._scanRegion.y||0;b=this.$overlay.style,b.width=`${m/l*y}px`,b.height=`${p/i*N}px`,b.top=`${g+w+D/i*N}px`,i=/scaleX\(-1\)/.test(r.style.transform),b.left=`${u+(i?c-j-y:j)+(i?l-f-m:f)/l*y}px`,b.transform=r.style.transform}})}static _convertPoints(r,l){if(!l)return r;let i=l.x||0,c=l.y||0,x=l.width&&l.downScaledWidth?l.width/l.downScaledWidth:1;l=l.height&&l.downScaledHeight?l.height/l.downScaledHeight:1;for(let u of r)u.x=u.x*x+i,u.y=u.y*l+c;return r}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var r=Date.now()-this._lastScanTimestamp,l=1e3/this._maxScansPerSecond;r<l&&await new Promise(c=>setTimeout(c,l-r)),this._lastScanTimestamp=Date.now();try{var i=await ct.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(c){if(!this._active)return;this._onDecodeError(c)}!ct._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=ct.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:c,y:x})=>`${c},${x}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(r){r!==ct.NO_QR_CODE_FOUND&&console.log(r)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let r=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",l=[{width:{min:1024}},{width:{min:768}},{}],i=l.map(c=>Object.assign({},c,{[r]:{exact:this._preferredCamera}}));for(let c of[...i,...l])try{let x=await navigator.mediaDevices.getUserMedia({video:c,audio:!1}),u=this._getFacingMode(x)||(c.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:x,facingMode:u}}catch{}throw"Camera not found."}async _restartVideoStream(){let r=this._paused;await this.pause(!0)&&!r&&this._active&&await this.start()}static _stopVideoStream(r){for(let l of r.getTracks())l.stop(),r.removeTrack(l)}_setVideoMirror(r){this.$video.style.transform="scaleX("+(r==="user"?-1:1)+")"}_getFacingMode(r){return(r=r.getVideoTracks()[0])?/rear|back|environment/i.test(r.label)?"environment":/front|user|face/i.test(r.label)?"user":null:null}static _drawToCanvas(r,l,i,c=!1){i=i||document.createElement("canvas");let x=l&&l.x?l.x:0,u=l&&l.y?l.y:0,g=l&&l.width?l.width:r.videoWidth||r.width,m=l&&l.height?l.height:r.videoHeight||r.height;return c||(c=l&&l.downScaledWidth?l.downScaledWidth:g,l=l&&l.downScaledHeight?l.downScaledHeight:m,i.width!==c&&(i.width=c),i.height!==l&&(i.height=l)),l=i.getContext("2d",{alpha:!1}),l.imageSmoothingEnabled=!1,l.drawImage(r,x,u,g,m,0,0,i.width,i.height),[i,l]}static async _loadImage(r){if(r instanceof Image)return await ct._awaitImageLoad(r),r;if(r instanceof HTMLVideoElement||r instanceof HTMLCanvasElement||r instanceof SVGImageElement||"OffscreenCanvas"in window&&r instanceof OffscreenCanvas||"ImageBitmap"in window&&r instanceof ImageBitmap)return r;if(r instanceof File||r instanceof Blob||r instanceof URL||typeof r=="string"){let l=new Image;l.src=r instanceof File||r instanceof Blob?URL.createObjectURL(r):r.toString();try{return await ct._awaitImageLoad(l),l}finally{(r instanceof File||r instanceof Blob)&&URL.revokeObjectURL(l.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(r){r.complete&&r.naturalWidth!==0||await new Promise((l,i)=>{let c=x=>{r.removeEventListener("load",c),r.removeEventListener("error",c),x instanceof ErrorEvent?i("Image load error"):l()};r.addEventListener("load",c),r.addEventListener("error",c)})}static async _postWorkerMessage(r,l,i,c){return ct._postWorkerMessageSync(await r,l,i,c)}static _postWorkerMessageSync(r,l,i,c){if(!(r instanceof Worker))return-1;let x=ct._workerMessageId++;return r.postMessage({id:x,type:l,data:i},c),x}};kr.DEFAULT_CANVAS_SIZE=400;kr.NO_QR_CODE_FOUND="No QR code found";kr._disableBarcodeDetector=!1;kr._workerMessageId=0;const d0=({isOpen:n,onClose:r,onVoucherScanned:l,onBookingScanned:i})=>{const c=v.useRef(null),x=v.useRef(null),[u,g]=v.useState(!1),[m,f]=v.useState(null),[b,p]=v.useState(null),[y,N]=v.useState(!1),[j,w]=v.useState([]),[D,C]=v.useState(null),[L,A]=v.useState(!1),_=Ee(J.services.bookings.validateBookingByCode),O=Ee(J.services.bookings.updateBooking),U=Ee(J.services.vouchers.redeemVoucherByStaff);v.useEffect(()=>(n?M():$(),$),[n]);const M=async()=>{try{if(!kr.hasCamera()){p("No camera found on this device");return}const I=await kr.listCameras(!0);w(I);const se=I.find(T=>T.label.toLowerCase().includes("back")||T.label.toLowerCase().includes("rear")||T.label.toLowerCase().includes("environment"));C(se||I[0]),(se||I[0])&&E()}catch{p("Failed to access camera. Please check permissions.")}},E=async()=>{if(!(!c.current||!D))try{g(!0),p(null),x.current=new kr(c.current,P,{onDecodeError:()=>{},highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:D.id,maxScansPerSecond:3}),await x.current.start()}catch(I){g(!1),I.name==="NotAllowedError"?p("Camera permission denied. Please allow camera access."):p("Failed to start camera. Please try again.")}},S=()=>{x.current&&(x.current.stop(),x.current.destroy(),x.current=null),g(!1)},$=()=>{S(),f(null),p(null),N(!1)},P=async I=>{if(!(y||m)){N(!0),S(),navigator.vibrate&&navigator.vibrate(200);try{const se=I.data;if(/^[A-Z0-9]{8}$/.test(se))await q(se);else if(se.startsWith("{"))await z(se);else throw new Error("Invalid QR code format")}catch(se){p(se.message||"Failed to process QR code"),N(!1)}}},q=async I=>{try{const se=await _({bookingCode:I});if(!se)throw new Error("Booking not found");f({type:"booking",id:se._id,code:I,customer_name:se.customer_name,service_name:se.service_name,barber_name:se.barber_name,date:se.formattedDate,time:se.formattedTime,price:se.service_price||se.price,status:"scanned"})}catch(se){throw new Error(se.message||"Failed to validate booking")}finally{N(!1)}},z=async I=>{try{const se=JSON.parse(I);if(!se.code)throw new Error("Invalid voucher QR code");let T="N/A";if(se.expires_at&&se.expires_at!=="N/A")try{const H=new Date(se.expires_at);isNaN(H.getTime())||(T=H.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))}catch{console.warn("Failed to parse expiry date:",se.expires_at)}f({type:"voucher",code:se.code,value:se.value||"N/A",expires_at:T,user:se.user||se.username||"N/A",status:"scanned"})}catch(se){throw new Error(se.message||"Invalid voucher QR format")}finally{N(!1)}},V=async()=>{if(m){N(!0),p(null);try{if(m.type==="booking"){if(i){i(m),B();return}await O({id:m.id,status:"confirmed"}),f(I=>({...I,status:"confirmed"}))}else{if(l){const se={_id:m.id||m.code,code:m.code,value:m.value,expires_at:m.expires_at};l(se),B();return}const I=await U({code:m.code});if(I.success)f(se=>({...se,status:"redeemed",value:I.value||se.value}));else throw new Error("Voucher redemption failed")}}catch(I){p(I.message||`Failed to ${m.type==="booking"?"confirm booking":"redeem voucher"}`)}finally{N(!1)}}},Z=()=>{f(null),p(null),N(!1),E()},B=()=>{$(),r()},k=async I=>{if(C(I),A(!1),u&&x.current)try{await x.current.setCamera(I.id)}catch{p("Failed to switch camera")}};return e.jsx(ds,{isOpen:n,onClose:B,title:"QR Scanner",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[!m&&e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden",style:{aspectRatio:"16/10"},children:[e.jsx("video",{ref:c,className:"w-full h-full object-cover",playsInline:!0,muted:!0,autoPlay:!0}),u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-40 h-40 border-2 border-[#FF8C42] rounded-2xl animate-pulse",children:e.jsx("div",{className:"absolute inset-3 border border-[#FF8C42] rounded-xl opacity-50"})})}),y&&e.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xs,{className:"w-5 h-5 text-[#FF8C42] animate-spin"}),e.jsx("span",{className:"font-medium text-sm",children:"Processing..."})]})})}),!u&&!b&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(Vt,{className:"w-12 h-12 mx-auto mb-3 opacity-70"}),e.jsx("p",{className:"font-semibold",children:"Ready to Scan"}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"Position QR code in frame"})]})}),j.length>1&&e.jsx("button",{onClick:()=>A(!L),className:"absolute top-3 right-3 p-2 bg-black/50 rounded-lg text-white hover:bg-black/70 transition-colors",children:e.jsx(Sr,{className:"w-4 h-4"})})]}),L&&e.jsxs("div",{className:"absolute top-12 right-0 z-10 bg-white rounded-lg shadow-lg border p-3 min-w-48",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Select Camera"}),e.jsx("div",{className:"space-y-1",children:j.map(I=>e.jsx("button",{onClick:()=>k(I),className:`w-full p-2 rounded text-left text-sm transition-colors ${D?.id===I.id?"bg-[#FF8C42] text-white":"hover:bg-gray-100"}`,children:I.label.includes("back")?"Back Camera":I.label.includes("front")?"Front Camera":I.label},I.id))})]}),e.jsx("div",{className:"mt-3 flex justify-center gap-2",children:u?e.jsxs(Zt,{onClick:S,variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50 px-6",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Stop"]}):e.jsxs(Zt,{onClick:E,disabled:!D,className:"bg-[#FF8C42] hover:bg-[#FF7A2B] text-white px-6",children:[e.jsx(Ja,{className:"w-4 h-4 mr-2"}),"Start Scanning"]})}),e.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-blue-700",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsx("span",{children:"Booking QRs"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(kt,{className:"w-3 h-3"}),e.jsx("span",{children:"Voucher QRs"})]})]})})]}),m&&e.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${m.type==="booking"?"bg-blue-100":"bg-purple-100"}`,children:m.type==="booking"?e.jsx(Re,{className:`w-5 h-5 ${m.type==="booking"?"text-blue-600":"text-purple-600"}`}):e.jsx(kt,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-[#1A1A1A] font-mono text-lg",children:m.code}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:m.type==="booking"?"Booking Details":"Voucher Details"})]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full uppercase ${m.status==="confirmed"||m.status==="redeemed"||m.status==="validated"?"bg-green-100 text-green-700 border border-green-200":"bg-blue-100 text-blue-700 border border-blue-200"}`,children:m.status})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:m.type==="booking"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Customer"})]}),e.jsx("p",{className:"font-semibold text-[#1A1A1A]",children:m.customer_name})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ut,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Price"})]}),e.jsxs("p",{className:"font-bold text-[#FF8C42] text-lg",children:["",m.price]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Date & Time"})]}),e.jsx("p",{className:"font-semibold text-[#1A1A1A] text-sm",children:m.date}),e.jsx("p",{className:"text-[#FF8C42] font-medium text-sm",children:m.time})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Barber"})]}),e.jsx("p",{className:"font-semibold text-[#1A1A1A]",children:m.barber_name}),e.jsx("p",{className:"text-gray-600 text-sm",children:m.service_name})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(kt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Code"})]}),e.jsx("p",{className:"font-semibold text-[#1A1A1A]",children:m.code})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Ut,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Value"})]}),e.jsx("p",{className:"font-bold text-[#FF8C42] text-lg",children:m.value})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Expires"})]}),e.jsx("p",{className:"font-semibold text-[#1A1A1A]",children:m.expires_at}),m.user!=="N/A"&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["User: ",m.user]})]})]})}),m.status==="scanned"&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-blue-600"}),e.jsxs("p",{className:"text-sm font-medium text-blue-800",children:[m.type==="booking"?"Booking":"Voucher"," scanned successfully  Ready to ",m.type==="booking"?"confirm":"use"]})]})}),(m.status==="confirmed"||m.status==="redeemed")&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-green-600"}),e.jsxs("p",{className:"text-sm font-medium text-green-800",children:[" ",m.type==="booking"?"Booking confirmed!":"Voucher used!"," Transaction completed successfully."]})]})})]}),b&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pt,{className:"w-4 h-4 text-red-600"}),e.jsx("p",{className:"text-red-800 font-medium text-sm",children:b})]})}),e.jsxs("div",{className:"flex justify-center gap-3 pt-4 border-t border-gray-200",children:[m&&m.status!=="confirmed"&&m.status!=="redeemed"&&e.jsx(Zt,{onClick:V,disabled:y,className:`flex items-center justify-center text-white px-6 py-3 font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none ${m.type==="booking"?"bg-green-600 hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2":"bg-[#FF8C42] hover:bg-[#E67A1A] focus:ring-2 focus:ring-orange-500 focus:ring-offset-2"}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-5 h-5 mr-3 animate-spin"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5 mr-3"}),e.jsx("span",{children:m.type==="booking"?"Confirm Booking":"Use Voucher"})]})}),m&&e.jsxs(Zt,{variant:"outline",onClick:Z,disabled:y,className:"flex items-center justify-center px-5 py-3 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:border-[#FF8C42] hover:text-[#FF8C42] hover:bg-orange-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ja,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"Scan Again"})]}),e.jsx(Zt,{variant:"outline",onClick:B,disabled:y,className:"flex items-center justify-center px-5 py-3 border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:border-gray-400 hover:bg-gray-50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{children:"Close"})})]})]})})},gp=({isOpen:n,onClose:r,onSubmit:l,onCustomerAdded:i})=>{const[c,x]=v.useState({username:"",password:"",nickname:"",email:"",mobile_number:"",birthday:""}),u=Ee(J.services.auth.registerUser),[g,m]=v.useState(!1),[f,b]=v.useState(null),[p,y]=v.useState({}),N=async D=>{D.preventDefault(),m(!0),b(null),y({});try{const C={username:c.username.trim(),password:c.password,mobile_number:c.mobile_number.trim(),email:c.email.trim(),...c.nickname&&{nickname:c.nickname.trim()},...c.birthday&&{birthday:c.birthday}};console.log("Creating new customer:",C);const L={...C,role:"customer"},A=await u(L);console.log("Customer created successfully:",A),l&&await l(A),i&&i({_id:A,username:C.username,email:C.email,mobile_number:C.mobile_number,nickname:C.nickname,role:"customer"}),j(),r()}catch(C){if(console.error("Error creating customer:",C),C.response?.data){const L=C.response.data;if(typeof L=="object")if(y(L),L.non_field_errors)b(L.non_field_errors[0]);else{const A=Object.entries(L).filter(([_])=>_!=="non_field_errors").map(([_,O])=>`${_}: ${O[0]}`);b(`Please fix the following errors: ${A.join(", ")}`)}else b(L||"Failed to create customer")}else b(C.message||"Failed to create customer. Please try again.")}finally{m(!1)}},j=()=>{x({username:"",password:"",nickname:"",email:"",mobile_number:"",birthday:""}),b(null),y({})},w=(D,C)=>{x(L=>({...L,[D]:C}))};return e.jsx(ds,{isOpen:n,onClose:r,title:"Add New Customer",size:"lg",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[f&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:f})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(Le,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Account Information"]}),e.jsx(as,{label:"Username",placeholder:"Enter unique username",value:c.username,onChange:D=>w("username",D.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[#FF8C42]",error:p.username?.[0]}),e.jsx(as,{label:"Password",type:"password",placeholder:"Enter secure password",value:c.password,onChange:D=>w("password",D.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[#FF8C42]",error:p.password?.[0]}),e.jsx(as,{label:"Email Address",type:"email",placeholder:"customer@example.com",value:c.email,onChange:D=>w("email",D.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[#FF8C42]",error:p.email?.[0]}),e.jsx(as,{label:"Mobile Number",type:"tel",placeholder:"09123456789",value:c.mobile_number,onChange:D=>w("mobile_number",D.target.value),required:!0,className:"border-[#F5F5F5] focus:border-[#FF8C42]",error:p.mobile_number?.[0]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(Re,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Personal Details"]}),e.jsx(as,{label:"Nickname (Optional)",placeholder:"Preferred name or alias",value:c.nickname,onChange:D=>w("nickname",D.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]",error:p.nickname?.[0]}),e.jsx(as,{label:"Birthday (Optional)",type:"date",value:c.birthday,onChange:D=>w("birthday",D.target.value),className:"border-[#F5F5F5] focus:border-[#FF8C42]",error:p.birthday?.[0]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Le,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Customer Account"}),e.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[e.jsx("p",{children:"This will create a new customer account that they can use to:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"Book appointments online"}),e.jsx("li",{children:"View booking history"}),e.jsx("li",{children:"Manage loyalty points"})]})]})]})]})})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-[#F5F5F5]",children:[e.jsx(Zt,{type:"button",variant:"outline",onClick:()=>{j(),r()},disabled:g,className:"flex-1 border-[#6B6B6B] text-[#6B6B6B] hover:bg-[#6B6B6B] hover:text-white",children:"Cancel"}),e.jsx(Zt,{type:"submit",disabled:g,className:"flex-1 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white hover:shadow-lg disabled:opacity-50",children:g?"Creating...":"Create Customer"})]})]})})},pp=({isOpen:n,onClose:r,onSubmit:l,user:i})=>{const[c,x]=v.useState({customerType:"existing",customer:"",walkinName:"",walkinPhone:"",walkinEmail:"",service:"",barber:"",date:"",time:"",notes:"",paymentMethod:"cash"}),[u,g]=v.useState(!1),[m,f]=v.useState(null),[b,p]=v.useState({}),[y,N]=v.useState(!1),[j,w]=v.useState(!1),[D,C]=v.useState([]),[L,A]=v.useState(null),_=v.useRef(null),O=v.useRef(null),U=i?.role==="super_admin"?fe(J.services.services.getAllServices):i?.branch_id?fe(J.services.services.getServicesByBranch,{branch_id:i.branch_id}):void 0,M=i?.role==="super_admin"?fe(J.services.barbers.getActiveBarbers):i?.branch_id?fe(J.services.barbers.getBarbersByBranch,{branch_id:i.branch_id})?.filter(k=>k.is_active):void 0,E=i?.role==="super_admin"?fe(J.services.auth.getAllUsers):i?.branch_id?fe(J.services.auth.getUsersByBranch,{branch_id:i.branch_id}):void 0,S=fe(J.services.bookings.getBookingsByBarberAndDate,c.barber&&c.date?{barberId:c.barber,date:c.date}:"skip"),$=Ee(J.services.bookings.createBooking),P=Ee(J.services.auth.registerUser);v.useEffect(()=>{const k=I=>{_.current&&!_.current.contains(I.target)&&N(!1),O.current&&!O.current.contains(I.target)&&w(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),v.useEffect(()=>{if(c.date&&c.barber&&S&&S!=="skip"){const k=S.filter(H=>H.status!=="cancelled").map(H=>H.time),se=U?.find(H=>H._id===c.service)?.duration_minutes||60,T=V(c.date,k,se);C(T)}else C(V(c.date,[],60))},[c.date,c.barber,c.service,S,U]);const q=async k=>{k.preventDefault(),g(!0),f(null),p({});try{let I=c.customer;if(c.customerType==="existing"&&!c.customer){p({customer:"Please select a customer"});return}if(c.customerType==="walkin"){if(!c.walkinName.trim()){p({walkinName:"Customer name is required"});return}if(c.walkinName.trim().length<2){p({walkinName:"Customer name must be at least 2 characters"});return}if(!c.walkinPhone.trim()){p({walkinPhone:"Phone number is required"});return}if(!/^(\+63|0)[9][0-9]{9}$/.test(c.walkinPhone.replace(/\s/g,""))){p({walkinPhone:"Please enter a valid Philippine phone number (e.g., 09123456789)"});return}if(c.walkinEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.walkinEmail)){p({walkinEmail:"Please enter a valid email address"});return}try{const Te={username:`walkin_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,password:"walkin_temp",email:c.walkinEmail||`walkin_${Date.now()}@temp.local`,mobile_number:c.walkinPhone,role:"customer"};I=(await P(Te)).userId,console.log("Walk-in customer created:",I)}catch(Te){console.error("Error creating walk-in customer:",Te),f("Failed to create walk-in customer. Please try again.");return}}if(!c.service){p({service:"Please select a service"});return}if(!c.date){p({date:"Please select a date"});return}if(!c.time){p({time:"Please select a time"});return}const se=new Date(c.date),T=new Date;if(T.setHours(0,0,0,0),se<T){p({date:"Cannot book appointments in the past"});return}const H=new Date;if(H.setDate(H.getDate()+30),se>H){p({date:"Cannot book appointments more than 30 days in advance"});return}const oe=c.time,W=parseInt(oe.split(":")[0]);if(W<9||W>=17){p({time:"Please select a time between 9:00 AM and 5:00 PM"});return}const le=D.find(Ae=>Ae.display===c.time);if(le&&!le.available){p({time:"This time slot is already booked. Please select another time."});return}if(c.notes&&c.notes.length>500){p({notes:"Notes cannot exceed 500 characters"});return}const K=Ae=>{const[Te,Ge]=Ae.split(" ");let[Ze,Ye]=Te.split(":");return Ze==="12"&&(Ze="00"),Ge==="PM"&&(Ze=parseInt(Ze,10)+12),`${Ze.toString().padStart(2,"0")}:${Ye}`},Y={customer:I,service:c.service,branch_id:i.branch_id,barber:c.barber||void 0,date:c.date,time:K(c.time),status:"booked",notes:c.notes||void 0};console.log("Creating booking:",Y);const ge=await $(Y);console.log("Booking created successfully:",ge);const pe=U?.find(Ae=>Ae._id===c.service),ye=M?.find(Ae=>Ae._id===c.barber);A({bookingCode:`BK${Date.now().toString().slice(-6)}`,service:pe?.name,barber:ye?.full_name||"Any available",date:c.date,time:c.time,price:pe?.price,customerName:c.customerType==="walkin"?c.walkinName:void 0}),l&&await l({_id:ge,...Y,customer_name:c.customerType==="walkin"?c.walkinName:void 0}),z()}catch(I){if(console.error("Error creating booking:",I),I.response?.data){const se=I.response.data;if(typeof se=="object")if(p(se),se.non_field_errors)f(se.non_field_errors[0]);else{const T=Object.entries(se).filter(([H])=>H!=="non_field_errors").map(([H,oe])=>`${H}: ${oe[0]}`);f(`Please fix the following errors: ${T.join(", ")}`)}else f(se||"Failed to create booking")}else f(I.message||"Failed to create booking. Please try again.")}finally{g(!1)}},z=()=>{x({customerType:"existing",customer:"",walkinName:"",walkinPhone:"",walkinEmail:"",service:"",barber:"",date:"",time:"",notes:"",paymentMethod:"cash"}),f(null),p({}),C([])},V=(k,I,se)=>{if(!k)return[];const T=[],H=9,oe=17,W=30;for(let le=H;le<oe;le++)for(let K=0;K<60;K+=W){const Y=`${le.toString().padStart(2,"0")}:${K.toString().padStart(2,"0")}`,ge=new Date(`1970-01-01T${Y}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),pe=I.some(ye=>{const Ae=parseInt(ye.split(":")[0]),Te=parseInt(ye.split(":")[1]);return Ae===le&&Math.abs(Te-K)<se});T.push({value:Y,display:ge,available:!pe})}return T},Z=(k,I)=>{x(se=>({...se,[k]:I}))},B=k=>{const I=`${parseFloat(k.price).toFixed(2)}`,se=`${k.duration_minutes} min`;return`${k.name} - ${I} (${se})`};return e.jsxs(ds,{isOpen:n,onClose:r,title:"Create New Booking",size:"xl",children:[e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[m&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center space-x-2",children:[e.jsx(at,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:m})]}),(!U||!M||!E)&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(xs,{className:"w-6 h-6 animate-spin text-[#FF8C42] mr-3"}),e.jsx("span",{className:"text-gray-600 font-medium",children:"Loading services and staff..."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#F4F0E6] to-[#E8DCC0] rounded-xl p-6 border border-[#D4C4A8]",children:[e.jsxs("h3",{className:"text-lg font-bold text-[#36454F] mb-4 flex items-center",children:[e.jsx(Le,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Customer Information"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"customerType",value:"existing",checked:c.customerType==="existing",onChange:k=>Z("customerType",k.target.value),className:"w-4 h-4 text-[#FF8C42] focus:ring-[#FF8C42]"}),e.jsx("span",{className:"text-[#36454F] font-medium",children:"Existing Customer"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"customerType",value:"walkin",checked:c.customerType==="walkin",onChange:k=>Z("customerType",k.target.value),className:"w-4 h-4 text-[#FF8C42] focus:ring-[#FF8C42]"}),e.jsx("span",{className:"text-[#36454F] font-medium",children:"Walk-in Customer"})]})]})}),c.customerType==="existing"?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:["Select Customer ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",ref:O,children:[e.jsxs("button",{type:"button",onClick:()=>w(!j),disabled:!E,className:"w-full h-12 px-4 border-2 border-[#D4C4A8] rounded-xl text-left flex items-center justify-between focus:outline-none focus:border-[#FF8C42] transition-colors duration-200 disabled:opacity-50 bg-white",children:[e.jsx("div",{className:"flex items-center",children:c.customer?(()=>{const k=E?.find(I=>I._id===c.customer);return k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#FF8C42] flex items-center justify-center mr-3",children:e.jsx(Le,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-[#36454F]",children:k.username}),e.jsx("div",{className:"text-sm text-[#8B8B8B]",children:k.mobile_number})]})]}):e.jsx("span",{className:"text-[#8B8B8B]",children:"Select a customer"})})():e.jsx("span",{className:"text-[#8B8B8B]",children:"Select a customer"})}),e.jsx(Wr,{className:`w-5 h-5 text-[#8B8B8B] transition-transform ${j?"rotate-180":""}`})]}),j&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-[#D4C4A8] rounded-xl shadow-lg max-h-60 overflow-y-auto",children:E?.filter(k=>k.role==="customer").map(k=>e.jsxs("button",{type:"button",onClick:()=>{Z("customer",k._id),w(!1)},className:"w-full px-4 py-3 flex items-center hover:bg-[#F4F0E6] transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#FF8C42] flex items-center justify-center mr-3",children:e.jsx(Le,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-[#36454F]",children:k.username}),e.jsx("div",{className:"text-sm text-[#8B8B8B]",children:k.mobile_number})]}),c.customer===k._id&&e.jsx(Ga,{className:"w-5 h-5 text-[#FF8C42] ml-auto"})]},k._id))||[]})]}),b.customer&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.customer})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:["Customer Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B8B8B]"}),e.jsx("input",{type:"text",value:c.walkinName,onChange:k=>Z("walkinName",k.target.value),className:"w-full h-12 pl-10 pr-4 border-2 border-[#D4C4A8] rounded-xl focus:outline-none focus:border-[#FF8C42] transition-colors bg-white",placeholder:"Enter customer name"})]}),b.walkinName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.walkinName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B8B8B]"}),e.jsx("input",{type:"tel",value:c.walkinPhone,onChange:k=>Z("walkinPhone",k.target.value),className:"w-full h-12 pl-10 pr-4 border-2 border-[#D4C4A8] rounded-xl focus:outline-none focus:border-[#FF8C42] transition-colors bg-white",placeholder:"Enter phone number"})]}),b.walkinPhone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.walkinPhone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:"Email (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B8B8B]"}),e.jsx("input",{type:"email",value:c.walkinEmail,onChange:k=>Z("walkinEmail",k.target.value),className:"w-full h-12 pl-10 pr-4 border-2 border-[#D4C4A8] rounded-xl focus:outline-none focus:border-[#FF8C42] transition-colors bg-white",placeholder:"Enter email address"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#F4F0E6] to-[#E8DCC0] rounded-xl p-6 border border-[#D4C4A8]",children:[e.jsxs("h3",{className:"text-lg font-bold text-[#36454F] mb-4 flex items-center",children:[e.jsx(It,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Service & Staff"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:["Service ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:c.service,onChange:k=>Z("service",k.target.value),required:!0,disabled:!U,className:"w-full h-12 px-4 border-2 border-[#D4C4A8] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200 disabled:opacity-50 bg-white",children:[e.jsx("option",{value:"",children:"Select a service"}),U?.filter(k=>k.is_active).map(k=>e.jsx("option",{value:k._id,children:B(k)},k._id))||[]]}),b.service&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.service})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:"Barber (Optional)"}),e.jsxs("div",{className:"relative",ref:_,children:[e.jsxs("button",{type:"button",onClick:()=>N(!y),disabled:!M,className:"w-full h-12 px-4 border-2 border-[#D4C4A8] rounded-xl text-left flex items-center justify-between focus:outline-none focus:border-[#FF8C42] transition-colors duration-200 disabled:opacity-50 bg-white",children:[e.jsx("div",{className:"flex items-center",children:c.barber?(()=>{const k=M?.find(I=>I._id===c.barber);return k?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:k.avatarUrl||"/img/avatar_default.jpg",alt:k.full_name,className:"w-8 h-8 rounded-full object-cover mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-[#36454F]",children:k.full_name}),e.jsx("div",{className:"text-sm text-[#8B8B8B]",children:k.experience})]})]}):e.jsx("span",{className:"text-[#8B8B8B]",children:"Any available barber"})})():e.jsx("span",{className:"text-[#8B8B8B]",children:"Any available barber"})}),e.jsx(Wr,{className:`w-5 h-5 text-[#8B8B8B] transition-transform ${y?"rotate-180":""}`})]}),y&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border-2 border-[#D4C4A8] rounded-xl shadow-lg max-h-60 overflow-y-auto",children:[e.jsxs("button",{type:"button",onClick:()=>{Z("barber",""),N(!1)},className:"w-full px-4 py-3 flex items-center hover:bg-[#F4F0E6] transition-colors",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center mr-3",children:e.jsx(Le,{className:"w-4 h-4 text-gray-500"})}),e.jsx("span",{className:"text-[#36454F]",children:"Any available barber"}),!c.barber&&e.jsx(Ga,{className:"w-5 h-5 text-[#FF8C42] ml-auto"})]}),M?.filter(k=>k.is_active).map(k=>e.jsxs("button",{type:"button",onClick:()=>{Z("barber",k._id),N(!1)},className:"w-full px-4 py-3 flex items-center hover:bg-[#F4F0E6] transition-colors",children:[e.jsx("img",{src:k.avatarUrl||"/img/avatar_default.jpg",alt:k.full_name,className:"w-8 h-8 rounded-full object-cover mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-[#36454F]",children:k.full_name}),e.jsx("div",{className:"text-sm text-[#8B8B8B]",children:k.experience})]}),c.barber===k._id&&e.jsx(Ga,{className:"w-5 h-5 text-[#FF8C42] ml-auto"})]},k._id))||[]]})]}),b.barber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.barber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:"Notes (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wl,{className:"absolute left-3 top-3 w-5 h-5 text-[#8B8B8B]"}),e.jsx("textarea",{value:c.notes,onChange:k=>Z("notes",k.target.value),className:"w-full h-20 pl-10 pr-4 pt-3 border-2 border-[#D4C4A8] rounded-xl focus:outline-none focus:border-[#FF8C42] transition-colors bg-white resize-none",placeholder:"Any special requests or notes..."})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#F4F0E6] to-[#E8DCC0] rounded-xl p-6 border border-[#D4C4A8]",children:[e.jsxs("h3",{className:"text-lg font-bold text-[#36454F] mb-4 flex items-center",children:[e.jsx(Re,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Schedule"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Re,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B8B8B]"}),e.jsx("input",{type:"date",value:c.date,onChange:k=>Z("date",k.target.value),min:new Date().toISOString().split("T")[0],className:"w-full h-12 pl-10 pr-4 border-2 border-[#D4C4A8] rounded-xl focus:outline-none focus:border-[#FF8C42] transition-colors bg-white",required:!0})]}),b.date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.date})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:["Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B8B8B]"}),e.jsxs("select",{value:c.time,onChange:k=>Z("time",k.target.value),className:"w-full h-12 pl-10 pr-4 border-2 border-[#D4C4A8] rounded-xl focus:outline-none focus:border-[#FF8C42] transition-colors bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select time"}),D.map(k=>e.jsxs("option",{value:k.display,disabled:!k.available,className:k.available?"":"text-red-400",children:[k.display," ",k.available?"":"(Booked)"]},k.value))]})]}),b.time&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#36454F] font-bold text-base mb-2",children:"Payment Method"}),e.jsxs("div",{className:"relative",children:[e.jsx(da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#8B8B8B]"}),e.jsxs("select",{value:c.paymentMethod,onChange:k=>Z("paymentMethod",k.target.value),className:"w-full h-12 pl-10 pr-4 border-2 border-[#D4C4A8] rounded-xl focus:outline-none focus:border-[#FF8C42] transition-colors bg-white",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"digital_wallet",children:"Digital Wallet"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"})]})]})]})]})]})]}),c.service&&c.date&&c.time&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[e.jsx(Ga,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Booking Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8B8B8B] mb-1",children:"Service"}),e.jsx("p",{className:"text-white font-medium",children:U?.find(k=>k._id===c.service)?.name||"N/A"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8B8B8B] mb-1",children:"Date & Time"}),e.jsxs("p",{className:"text-white font-medium",children:[c.date?new Date(c.date).toLocaleDateString():"N/A"," at ",c.time||"N/A"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8B8B8B] mb-1",children:"Barber"}),e.jsx("p",{className:"text-white font-medium",children:c.barber?M?.find(k=>k._id===c.barber)?.full_name:"Any available"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8B8B8B] mb-1",children:"Price"}),e.jsxs("p",{className:"text-green-400 font-bold",children:["",U?.find(k=>k._id===c.service)?.price?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-[#D4C4A8]",children:[e.jsx("button",{type:"button",onClick:()=>{z(),r()},disabled:u,className:"flex-1 h-12 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||!U||!M||!E,className:"flex-1 h-12 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-xl font-medium hover:shadow-lg disabled:opacity-50 transition-all duration-200 flex items-center justify-center space-x-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Booking"})]})})]})]}),L&&e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>{A(null),r()}}),e.jsx("div",{className:"relative w-full max-w-md transform rounded-2xl bg-white shadow-2xl transition-all z-[10000]",children:e.jsxs("div",{className:"text-center space-y-4 p-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-green-100",children:e.jsx(Ga,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Booking Created Successfully!"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Booking details have been saved and customer notified."})]}),e.jsxs("div",{className:"text-left space-y-3 p-4 rounded-xl bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Booking Code:"}),e.jsxs("span",{className:"text-sm font-mono font-bold text-[#FF8C42]",children:["#",L.bookingCode]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Service:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:L.service})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date & Time:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[new Date(L.date).toLocaleDateString()," at ",L.time]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Barber:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:L.barber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Price:"}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:["",L.price?.toFixed(2)]})]}),L.customerName&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Customer:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:L.customerName})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{A(null),r()},className:"flex-1 py-2 px-4 rounded-xl font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>{A(null),r()},className:"flex-1 py-2 px-4 rounded-xl font-medium text-white transition-colors",style:{backgroundColor:"#FF8C42"},children:"Print Receipt"})]})]})})]})})]})};var $n={},Dd,Yf;function _8(){return Yf||(Yf=1,Dd=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Dd}var Sd={},Ar={},Gf;function rn(){if(Gf)return Ar;Gf=1;let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Ar.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Ar.getSymbolTotalCodewords=function(i){return r[i]},Ar.getBCHDigit=function(l){let i=0;for(;l!==0;)i++,l>>>=1;return i},Ar.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');n=i},Ar.isKanjiModeEnabled=function(){return typeof n<"u"},Ar.toSJIS=function(i){return n(i)},Ar}var _d={},Xf;function D0(){return Xf||(Xf=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function r(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+l)}}n.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},n.from=function(i,c){if(n.isValid(i))return i;try{return r(i)}catch{return c}}}(_d)),_d}var Td,Kf;function T8(){if(Kf)return Td;Kf=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(r){const l=Math.floor(r/8);return(this.buffer[l]>>>7-r%8&1)===1},put:function(r,l){for(let i=0;i<l;i++)this.putBit((r>>>l-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const l=Math.floor(this.length/8);this.buffer.length<=l&&this.buffer.push(0),r&&(this.buffer[l]|=128>>>this.length%8),this.length++}},Td=n,Td}var Md,Zf;function M8(){if(Zf)return Md;Zf=1;function n(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return n.prototype.set=function(r,l,i,c){const x=r*this.size+l;this.data[x]=i,c&&(this.reservedBit[x]=!0)},n.prototype.get=function(r,l){return this.data[r*this.size+l]},n.prototype.xor=function(r,l,i){this.data[r*this.size+l]^=i},n.prototype.isReserved=function(r,l){return this.reservedBit[r*this.size+l]},Md=n,Md}var Rd={},Jf;function R8(){return Jf||(Jf=1,function(n){const r=rn().getSymbolSize;n.getRowColCoords=function(i){if(i===1)return[];const c=Math.floor(i/7)+2,x=r(i),u=x===145?26:Math.ceil((x-13)/(2*c-2))*2,g=[x-7];for(let m=1;m<c-1;m++)g[m]=g[m-1]-u;return g.push(6),g.reverse()},n.getPositions=function(i){const c=[],x=n.getRowColCoords(i),u=x.length;for(let g=0;g<u;g++)for(let m=0;m<u;m++)g===0&&m===0||g===0&&m===u-1||g===u-1&&m===0||c.push([x[g],x[m]]);return c}}(Rd)),Rd}var Pd={},Wf;function P8(){if(Wf)return Pd;Wf=1;const n=rn().getSymbolSize,r=7;return Pd.getPositions=function(i){const c=n(i);return[[0,0],[c-r,0],[0,c-r]]},Pd}var Ld={},eg;function L8(){return eg||(eg=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};n.isValid=function(c){return c!=null&&c!==""&&!isNaN(c)&&c>=0&&c<=7},n.from=function(c){return n.isValid(c)?parseInt(c,10):void 0},n.getPenaltyN1=function(c){const x=c.size;let u=0,g=0,m=0,f=null,b=null;for(let p=0;p<x;p++){g=m=0,f=b=null;for(let y=0;y<x;y++){let N=c.get(p,y);N===f?g++:(g>=5&&(u+=r.N1+(g-5)),f=N,g=1),N=c.get(y,p),N===b?m++:(m>=5&&(u+=r.N1+(m-5)),b=N,m=1)}g>=5&&(u+=r.N1+(g-5)),m>=5&&(u+=r.N1+(m-5))}return u},n.getPenaltyN2=function(c){const x=c.size;let u=0;for(let g=0;g<x-1;g++)for(let m=0;m<x-1;m++){const f=c.get(g,m)+c.get(g,m+1)+c.get(g+1,m)+c.get(g+1,m+1);(f===4||f===0)&&u++}return u*r.N2},n.getPenaltyN3=function(c){const x=c.size;let u=0,g=0,m=0;for(let f=0;f<x;f++){g=m=0;for(let b=0;b<x;b++)g=g<<1&2047|c.get(f,b),b>=10&&(g===1488||g===93)&&u++,m=m<<1&2047|c.get(b,f),b>=10&&(m===1488||m===93)&&u++}return u*r.N3},n.getPenaltyN4=function(c){let x=0;const u=c.data.length;for(let m=0;m<u;m++)x+=c.data[m];return Math.abs(Math.ceil(x*100/u/5)-10)*r.N4};function l(i,c,x){switch(i){case n.Patterns.PATTERN000:return(c+x)%2===0;case n.Patterns.PATTERN001:return c%2===0;case n.Patterns.PATTERN010:return x%3===0;case n.Patterns.PATTERN011:return(c+x)%3===0;case n.Patterns.PATTERN100:return(Math.floor(c/2)+Math.floor(x/3))%2===0;case n.Patterns.PATTERN101:return c*x%2+c*x%3===0;case n.Patterns.PATTERN110:return(c*x%2+c*x%3)%2===0;case n.Patterns.PATTERN111:return(c*x%3+(c+x)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}n.applyMask=function(c,x){const u=x.size;for(let g=0;g<u;g++)for(let m=0;m<u;m++)x.isReserved(m,g)||x.xor(m,g,l(c,m,g))},n.getBestMask=function(c,x){const u=Object.keys(n.Patterns).length;let g=0,m=1/0;for(let f=0;f<u;f++){x(f),n.applyMask(f,c);const b=n.getPenaltyN1(c)+n.getPenaltyN2(c)+n.getPenaltyN3(c)+n.getPenaltyN4(c);n.applyMask(f,c),b<m&&(m=b,g=f)}return g}}(Ld)),Ld}var Ro={},tg;function bp(){if(tg)return Ro;tg=1;const n=D0(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],l=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ro.getBlocksCount=function(c,x){switch(x){case n.L:return r[(c-1)*4+0];case n.M:return r[(c-1)*4+1];case n.Q:return r[(c-1)*4+2];case n.H:return r[(c-1)*4+3];default:return}},Ro.getTotalCodewordsCount=function(c,x){switch(x){case n.L:return l[(c-1)*4+0];case n.M:return l[(c-1)*4+1];case n.Q:return l[(c-1)*4+2];case n.H:return l[(c-1)*4+3];default:return}},Ro}var Od={},Zl={},sg;function O8(){if(sg)return Zl;sg=1;const n=new Uint8Array(512),r=new Uint8Array(256);return function(){let i=1;for(let c=0;c<255;c++)n[c]=i,r[i]=c,i<<=1,i&256&&(i^=285);for(let c=255;c<512;c++)n[c]=n[c-255]}(),Zl.log=function(i){if(i<1)throw new Error("log("+i+")");return r[i]},Zl.exp=function(i){return n[i]},Zl.mul=function(i,c){return i===0||c===0?0:n[r[i]+r[c]]},Zl}var ag;function U8(){return ag||(ag=1,function(n){const r=O8();n.mul=function(i,c){const x=new Uint8Array(i.length+c.length-1);for(let u=0;u<i.length;u++)for(let g=0;g<c.length;g++)x[u+g]^=r.mul(i[u],c[g]);return x},n.mod=function(i,c){let x=new Uint8Array(i);for(;x.length-c.length>=0;){const u=x[0];for(let m=0;m<c.length;m++)x[m]^=r.mul(c[m],u);let g=0;for(;g<x.length&&x[g]===0;)g++;x=x.slice(g)}return x},n.generateECPolynomial=function(i){let c=new Uint8Array([1]);for(let x=0;x<i;x++)c=n.mul(c,new Uint8Array([1,r.exp(x)]));return c}}(Od)),Od}var Ud,rg;function z8(){if(rg)return Ud;rg=1;const n=U8();function r(l){this.genPoly=void 0,this.degree=l,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(i){this.degree=i,this.genPoly=n.generateECPolynomial(this.degree)},r.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const c=new Uint8Array(i.length+this.degree);c.set(i);const x=n.mod(c,this.genPoly),u=this.degree-x.length;if(u>0){const g=new Uint8Array(this.degree);return g.set(x,u),g}return x},Ud=r,Ud}var zd={},qd={},$d={},ng;function yp(){return ng||(ng=1,$d.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),$d}var Ca={},lg;function vp(){if(lg)return Ca;lg=1;const n="[0-9]+",r="[A-Z $%*+\\-./:]+";let l="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";l=l.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+l+`)(?:.|[\r
]))+`;Ca.KANJI=new RegExp(l,"g"),Ca.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ca.BYTE=new RegExp(i,"g"),Ca.NUMERIC=new RegExp(n,"g"),Ca.ALPHANUMERIC=new RegExp(r,"g");const c=new RegExp("^"+l+"$"),x=new RegExp("^"+n+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ca.testKanji=function(m){return c.test(m)},Ca.testNumeric=function(m){return x.test(m)},Ca.testAlphanumeric=function(m){return u.test(m)},Ca}var ig;function nn(){return ig||(ig=1,function(n){const r=yp(),l=vp();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(x,u){if(!x.ccBits)throw new Error("Invalid mode: "+x);if(!r.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?x.ccBits[0]:u<27?x.ccBits[1]:x.ccBits[2]},n.getBestModeForData=function(x){return l.testNumeric(x)?n.NUMERIC:l.testAlphanumeric(x)?n.ALPHANUMERIC:l.testKanji(x)?n.KANJI:n.BYTE},n.toString=function(x){if(x&&x.id)return x.id;throw new Error("Invalid mode")},n.isValid=function(x){return x&&x.bit&&x.ccBits};function i(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+c)}}n.from=function(x,u){if(n.isValid(x))return x;try{return i(x)}catch{return u}}}(qd)),qd}var og;function q8(){return og||(og=1,function(n){const r=rn(),l=bp(),i=D0(),c=nn(),x=yp(),u=7973,g=r.getBCHDigit(u);function m(y,N,j){for(let w=1;w<=40;w++)if(N<=n.getCapacity(w,j,y))return w}function f(y,N){return c.getCharCountIndicator(y,N)+4}function b(y,N){let j=0;return y.forEach(function(w){const D=f(w.mode,N);j+=D+w.getBitsLength()}),j}function p(y,N){for(let j=1;j<=40;j++)if(b(y,j)<=n.getCapacity(j,N,c.MIXED))return j}n.from=function(N,j){return x.isValid(N)?parseInt(N,10):j},n.getCapacity=function(N,j,w){if(!x.isValid(N))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=c.BYTE);const D=r.getSymbolTotalCodewords(N),C=l.getTotalCodewordsCount(N,j),L=(D-C)*8;if(w===c.MIXED)return L;const A=L-f(w,N);switch(w){case c.NUMERIC:return Math.floor(A/10*3);case c.ALPHANUMERIC:return Math.floor(A/11*2);case c.KANJI:return Math.floor(A/13);case c.BYTE:default:return Math.floor(A/8)}},n.getBestVersionForData=function(N,j){let w;const D=i.from(j,i.M);if(Array.isArray(N)){if(N.length>1)return p(N,D);if(N.length===0)return 1;w=N[0]}else w=N;return m(w.mode,w.getLength(),D)},n.getEncodedBits=function(N){if(!x.isValid(N)||N<7)throw new Error("Invalid QR Code version");let j=N<<12;for(;r.getBCHDigit(j)-g>=0;)j^=u<<r.getBCHDigit(j)-g;return N<<12|j}}(zd)),zd}var Id={},cg;function $8(){if(cg)return Id;cg=1;const n=rn(),r=1335,l=21522,i=n.getBCHDigit(r);return Id.getEncodedBits=function(x,u){const g=x.bit<<3|u;let m=g<<10;for(;n.getBCHDigit(m)-i>=0;)m^=r<<n.getBCHDigit(m)-i;return(g<<10|m)^l},Id}var Vd={},Hd,xg;function I8(){if(xg)return Hd;xg=1;const n=nn();function r(l){this.mode=n.NUMERIC,this.data=l.toString()}return r.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let c,x,u;for(c=0;c+3<=this.data.length;c+=3)x=this.data.substr(c,3),u=parseInt(x,10),i.put(u,10);const g=this.data.length-c;g>0&&(x=this.data.substr(c),u=parseInt(x,10),i.put(u,g*3+1))},Hd=r,Hd}var Qd,dg;function V8(){if(dg)return Qd;dg=1;const n=nn(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(i){this.mode=n.ALPHANUMERIC,this.data=i}return l.getBitsLength=function(c){return 11*Math.floor(c/2)+6*(c%2)},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(c){let x;for(x=0;x+2<=this.data.length;x+=2){let u=r.indexOf(this.data[x])*45;u+=r.indexOf(this.data[x+1]),c.put(u,11)}this.data.length%2&&c.put(r.indexOf(this.data[x]),6)},Qd=l,Qd}var Yd,ug;function H8(){if(ug)return Yd;ug=1;const n=nn();function r(l){this.mode=n.BYTE,typeof l=="string"?this.data=new TextEncoder().encode(l):this.data=new Uint8Array(l)}return r.getBitsLength=function(i){return i*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(l){for(let i=0,c=this.data.length;i<c;i++)l.put(this.data[i],8)},Yd=r,Yd}var Gd,mg;function Q8(){if(mg)return Gd;mg=1;const n=nn(),r=rn();function l(i){this.mode=n.KANJI,this.data=i}return l.getBitsLength=function(c){return c*13},l.prototype.getLength=function(){return this.data.length},l.prototype.getBitsLength=function(){return l.getBitsLength(this.data.length)},l.prototype.write=function(i){let c;for(c=0;c<this.data.length;c++){let x=r.toSJIS(this.data[c]);if(x>=33088&&x<=40956)x-=33088;else if(x>=57408&&x<=60351)x-=49472;else throw new Error("Invalid SJIS character: "+this.data[c]+`
Make sure your charset is UTF-8`);x=(x>>>8&255)*192+(x&255),i.put(x,13)}},Gd=l,Gd}var Xd={exports:{}},hg;function Y8(){return hg||(hg=1,function(n){var r={single_source_shortest_paths:function(l,i,c){var x={},u={};u[i]=0;var g=r.PriorityQueue.make();g.push(i,0);for(var m,f,b,p,y,N,j,w,D;!g.empty();){m=g.pop(),f=m.value,p=m.cost,y=l[f]||{};for(b in y)y.hasOwnProperty(b)&&(N=y[b],j=p+N,w=u[b],D=typeof u[b]>"u",(D||w>j)&&(u[b]=j,g.push(b,j),x[b]=f))}if(typeof c<"u"&&typeof u[c]>"u"){var C=["Could not find a path from ",i," to ",c,"."].join("");throw new Error(C)}return x},extract_shortest_path_from_predecessor_list:function(l,i){for(var c=[],x=i;x;)c.push(x),l[x],x=l[x];return c.reverse(),c},find_path:function(l,i,c){var x=r.single_source_shortest_paths(l,i,c);return r.extract_shortest_path_from_predecessor_list(x,c)},PriorityQueue:{make:function(l){var i=r.PriorityQueue,c={},x;l=l||{};for(x in i)i.hasOwnProperty(x)&&(c[x]=i[x]);return c.queue=[],c.sorter=l.sorter||i.default_sorter,c},default_sorter:function(l,i){return l.cost-i.cost},push:function(l,i){var c={value:l,cost:i};this.queue.push(c),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=r}(Xd)),Xd.exports}var fg;function G8(){return fg||(fg=1,function(n){const r=nn(),l=I8(),i=V8(),c=H8(),x=Q8(),u=vp(),g=rn(),m=Y8();function f(C){return unescape(encodeURIComponent(C)).length}function b(C,L,A){const _=[];let O;for(;(O=C.exec(A))!==null;)_.push({data:O[0],index:O.index,mode:L,length:O[0].length});return _}function p(C){const L=b(u.NUMERIC,r.NUMERIC,C),A=b(u.ALPHANUMERIC,r.ALPHANUMERIC,C);let _,O;return g.isKanjiModeEnabled()?(_=b(u.BYTE,r.BYTE,C),O=b(u.KANJI,r.KANJI,C)):(_=b(u.BYTE_KANJI,r.BYTE,C),O=[]),L.concat(A,_,O).sort(function(M,E){return M.index-E.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function y(C,L){switch(L){case r.NUMERIC:return l.getBitsLength(C);case r.ALPHANUMERIC:return i.getBitsLength(C);case r.KANJI:return x.getBitsLength(C);case r.BYTE:return c.getBitsLength(C)}}function N(C){return C.reduce(function(L,A){const _=L.length-1>=0?L[L.length-1]:null;return _&&_.mode===A.mode?(L[L.length-1].data+=A.data,L):(L.push(A),L)},[])}function j(C){const L=[];for(let A=0;A<C.length;A++){const _=C[A];switch(_.mode){case r.NUMERIC:L.push([_,{data:_.data,mode:r.ALPHANUMERIC,length:_.length},{data:_.data,mode:r.BYTE,length:_.length}]);break;case r.ALPHANUMERIC:L.push([_,{data:_.data,mode:r.BYTE,length:_.length}]);break;case r.KANJI:L.push([_,{data:_.data,mode:r.BYTE,length:f(_.data)}]);break;case r.BYTE:L.push([{data:_.data,mode:r.BYTE,length:f(_.data)}])}}return L}function w(C,L){const A={},_={start:{}};let O=["start"];for(let U=0;U<C.length;U++){const M=C[U],E=[];for(let S=0;S<M.length;S++){const $=M[S],P=""+U+S;E.push(P),A[P]={node:$,lastCount:0},_[P]={};for(let q=0;q<O.length;q++){const z=O[q];A[z]&&A[z].node.mode===$.mode?(_[z][P]=y(A[z].lastCount+$.length,$.mode)-y(A[z].lastCount,$.mode),A[z].lastCount+=$.length):(A[z]&&(A[z].lastCount=$.length),_[z][P]=y($.length,$.mode)+4+r.getCharCountIndicator($.mode,L))}}O=E}for(let U=0;U<O.length;U++)_[O[U]].end=0;return{map:_,table:A}}function D(C,L){let A;const _=r.getBestModeForData(C);if(A=r.from(L,_),A!==r.BYTE&&A.bit<_.bit)throw new Error('"'+C+'" cannot be encoded with mode '+r.toString(A)+`.
 Suggested mode is: `+r.toString(_));switch(A===r.KANJI&&!g.isKanjiModeEnabled()&&(A=r.BYTE),A){case r.NUMERIC:return new l(C);case r.ALPHANUMERIC:return new i(C);case r.KANJI:return new x(C);case r.BYTE:return new c(C)}}n.fromArray=function(L){return L.reduce(function(A,_){return typeof _=="string"?A.push(D(_,null)):_.data&&A.push(D(_.data,_.mode)),A},[])},n.fromString=function(L,A){const _=p(L,g.isKanjiModeEnabled()),O=j(_),U=w(O,A),M=m.find_path(U.map,"start","end"),E=[];for(let S=1;S<M.length-1;S++)E.push(U.table[M[S]].node);return n.fromArray(N(E))},n.rawSplit=function(L){return n.fromArray(p(L,g.isKanjiModeEnabled()))}}(Vd)),Vd}var gg;function X8(){if(gg)return Sd;gg=1;const n=rn(),r=D0(),l=T8(),i=M8(),c=R8(),x=P8(),u=L8(),g=bp(),m=z8(),f=q8(),b=$8(),p=nn(),y=G8();function N(U,M){const E=U.size,S=x.getPositions(M);for(let $=0;$<S.length;$++){const P=S[$][0],q=S[$][1];for(let z=-1;z<=7;z++)if(!(P+z<=-1||E<=P+z))for(let V=-1;V<=7;V++)q+V<=-1||E<=q+V||(z>=0&&z<=6&&(V===0||V===6)||V>=0&&V<=6&&(z===0||z===6)||z>=2&&z<=4&&V>=2&&V<=4?U.set(P+z,q+V,!0,!0):U.set(P+z,q+V,!1,!0))}}function j(U){const M=U.size;for(let E=8;E<M-8;E++){const S=E%2===0;U.set(E,6,S,!0),U.set(6,E,S,!0)}}function w(U,M){const E=c.getPositions(M);for(let S=0;S<E.length;S++){const $=E[S][0],P=E[S][1];for(let q=-2;q<=2;q++)for(let z=-2;z<=2;z++)q===-2||q===2||z===-2||z===2||q===0&&z===0?U.set($+q,P+z,!0,!0):U.set($+q,P+z,!1,!0)}}function D(U,M){const E=U.size,S=f.getEncodedBits(M);let $,P,q;for(let z=0;z<18;z++)$=Math.floor(z/3),P=z%3+E-8-3,q=(S>>z&1)===1,U.set($,P,q,!0),U.set(P,$,q,!0)}function C(U,M,E){const S=U.size,$=b.getEncodedBits(M,E);let P,q;for(P=0;P<15;P++)q=($>>P&1)===1,P<6?U.set(P,8,q,!0):P<8?U.set(P+1,8,q,!0):U.set(S-15+P,8,q,!0),P<8?U.set(8,S-P-1,q,!0):P<9?U.set(8,15-P-1+1,q,!0):U.set(8,15-P-1,q,!0);U.set(S-8,8,1,!0)}function L(U,M){const E=U.size;let S=-1,$=E-1,P=7,q=0;for(let z=E-1;z>0;z-=2)for(z===6&&z--;;){for(let V=0;V<2;V++)if(!U.isReserved($,z-V)){let Z=!1;q<M.length&&(Z=(M[q]>>>P&1)===1),U.set($,z-V,Z),P--,P===-1&&(q++,P=7)}if($+=S,$<0||E<=$){$-=S,S=-S;break}}}function A(U,M,E){const S=new l;E.forEach(function(V){S.put(V.mode.bit,4),S.put(V.getLength(),p.getCharCountIndicator(V.mode,U)),V.write(S)});const $=n.getSymbolTotalCodewords(U),P=g.getTotalCodewordsCount(U,M),q=($-P)*8;for(S.getLengthInBits()+4<=q&&S.put(0,4);S.getLengthInBits()%8!==0;)S.putBit(0);const z=(q-S.getLengthInBits())/8;for(let V=0;V<z;V++)S.put(V%2?17:236,8);return _(S,U,M)}function _(U,M,E){const S=n.getSymbolTotalCodewords(M),$=g.getTotalCodewordsCount(M,E),P=S-$,q=g.getBlocksCount(M,E),z=S%q,V=q-z,Z=Math.floor(S/q),B=Math.floor(P/q),k=B+1,I=Z-B,se=new m(I);let T=0;const H=new Array(q),oe=new Array(q);let W=0;const le=new Uint8Array(U.buffer);for(let ye=0;ye<q;ye++){const Ae=ye<V?B:k;H[ye]=le.slice(T,T+Ae),oe[ye]=se.encode(H[ye]),T+=Ae,W=Math.max(W,Ae)}const K=new Uint8Array(S);let Y=0,ge,pe;for(ge=0;ge<W;ge++)for(pe=0;pe<q;pe++)ge<H[pe].length&&(K[Y++]=H[pe][ge]);for(ge=0;ge<I;ge++)for(pe=0;pe<q;pe++)K[Y++]=oe[pe][ge];return K}function O(U,M,E,S){let $;if(Array.isArray(U))$=y.fromArray(U);else if(typeof U=="string"){let Z=M;if(!Z){const B=y.rawSplit(U);Z=f.getBestVersionForData(B,E)}$=y.fromString(U,Z||40)}else throw new Error("Invalid data");const P=f.getBestVersionForData($,E);if(!P)throw new Error("The amount of data is too big to be stored in a QR Code");if(!M)M=P;else if(M<P)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+P+`.
`);const q=A(M,E,$),z=n.getSymbolSize(M),V=new i(z);return N(V,M),j(V),w(V,M),C(V,E,0),M>=7&&D(V,M),L(V,q),isNaN(S)&&(S=u.getBestMask(V,C.bind(null,V,E))),u.applyMask(S,V),C(V,E,S),{modules:V,version:M,errorCorrectionLevel:E,maskPattern:S,segments:$}}return Sd.create=function(M,E){if(typeof M>"u"||M==="")throw new Error("No input text");let S=r.M,$,P;return typeof E<"u"&&(S=r.from(E.errorCorrectionLevel,r.M),$=f.from(E.version),P=u.from(E.maskPattern),E.toSJISFunc&&n.setToSJISFunction(E.toSJISFunc)),O(M,$,S,P)},Sd}var Kd={},Zd={},pg;function jp(){return pg||(pg=1,function(n){function r(l){if(typeof l=="number"&&(l=l.toString()),typeof l!="string")throw new Error("Color should be defined as hex string");let i=l.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+l);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(x){return[x,x]}))),i.length===6&&i.push("F","F");const c=parseInt(i.join(""),16);return{r:c>>24&255,g:c>>16&255,b:c>>8&255,a:c&255,hex:"#"+i.slice(0,6).join("")}}n.getOptions=function(i){i||(i={}),i.color||(i.color={});const c=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,x=i.width&&i.width>=21?i.width:void 0,u=i.scale||4;return{width:x,scale:x?4:u,margin:c,color:{dark:r(i.color.dark||"#000000ff"),light:r(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},n.getScale=function(i,c){return c.width&&c.width>=i+c.margin*2?c.width/(i+c.margin*2):c.scale},n.getImageWidth=function(i,c){const x=n.getScale(i,c);return Math.floor((i+c.margin*2)*x)},n.qrToImageData=function(i,c,x){const u=c.modules.size,g=c.modules.data,m=n.getScale(u,x),f=Math.floor((u+x.margin*2)*m),b=x.margin*m,p=[x.color.light,x.color.dark];for(let y=0;y<f;y++)for(let N=0;N<f;N++){let j=(y*f+N)*4,w=x.color.light;if(y>=b&&N>=b&&y<f-b&&N<f-b){const D=Math.floor((y-b)/m),C=Math.floor((N-b)/m);w=p[g[D*u+C]?1:0]}i[j++]=w.r,i[j++]=w.g,i[j++]=w.b,i[j]=w.a}}}(Zd)),Zd}var bg;function K8(){return bg||(bg=1,function(n){const r=jp();function l(c,x,u){c.clearRect(0,0,x.width,x.height),x.style||(x.style={}),x.height=u,x.width=u,x.style.height=u+"px",x.style.width=u+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(x,u,g){let m=g,f=u;typeof m>"u"&&(!u||!u.getContext)&&(m=u,u=void 0),u||(f=i()),m=r.getOptions(m);const b=r.getImageWidth(x.modules.size,m),p=f.getContext("2d"),y=p.createImageData(b,b);return r.qrToImageData(y.data,x,m),l(p,f,b),p.putImageData(y,0,0),f},n.renderToDataURL=function(x,u,g){let m=g;typeof m>"u"&&(!u||!u.getContext)&&(m=u,u=void 0),m||(m={});const f=n.render(x,u,m),b=m.type||"image/png",p=m.rendererOpts||{};return f.toDataURL(b,p.quality)}}(Kd)),Kd}var Jd={},yg;function Z8(){if(yg)return Jd;yg=1;const n=jp();function r(c,x){const u=c.a/255,g=x+'="'+c.hex+'"';return u<1?g+" "+x+'-opacity="'+u.toFixed(2).slice(1)+'"':g}function l(c,x,u){let g=c+x;return typeof u<"u"&&(g+=" "+u),g}function i(c,x,u){let g="",m=0,f=!1,b=0;for(let p=0;p<c.length;p++){const y=Math.floor(p%x),N=Math.floor(p/x);!y&&!f&&(f=!0),c[p]?(b++,p>0&&y>0&&c[p-1]||(g+=f?l("M",y+u,.5+N+u):l("m",m,0),m=0,f=!1),y+1<x&&c[p+1]||(g+=l("h",b),b=0)):m++}return g}return Jd.render=function(x,u,g){const m=n.getOptions(u),f=x.modules.size,b=x.modules.data,p=f+m.margin*2,y=m.color.light.a?"<path "+r(m.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",N="<path "+r(m.color.dark,"stroke")+' d="'+i(b,f,m.margin)+'"/>',j='viewBox="0 0 '+p+" "+p+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(m.width?'width="'+m.width+'" height="'+m.width+'" ':"")+j+' shape-rendering="crispEdges">'+y+N+`</svg>
`;return typeof g=="function"&&g(null,D),D},Jd}var vg;function J8(){if(vg)return $n;vg=1;const n=_8(),r=X8(),l=K8(),i=Z8();function c(x,u,g,m,f){const b=[].slice.call(arguments,1),p=b.length,y=typeof b[p-1]=="function";if(!y&&!n())throw new Error("Callback required as last argument");if(y){if(p<2)throw new Error("Too few arguments provided");p===2?(f=g,g=u,u=m=void 0):p===3&&(u.getContext&&typeof f>"u"?(f=m,m=void 0):(f=m,m=g,g=u,u=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(g=u,u=m=void 0):p===2&&!u.getContext&&(m=g,g=u,u=void 0),new Promise(function(N,j){try{const w=r.create(g,m);N(x(w,u,m))}catch(w){j(w)}})}try{const N=r.create(g,m);f(null,x(N,u,m))}catch(N){f(N)}}return $n.create=r.create,$n.toCanvas=c.bind(null,l.render),$n.toDataURL=c.bind(null,l.renderToDataURL),$n.toString=c.bind(null,function(x,u,g){return i.render(x,g)}),$n}var W8=J8();const Ds=g0(W8),e3=({isOpen:n,onClose:r,onSubmit:l})=>{const{user:i}=Tt(),[c,x]=v.useState({code:"",value:"",points_required:"",max_uses:"",expires_at:"",description:""}),u=Ee(J.services.vouchers.createVoucherWithCode),[g,m]=v.useState(""),[f,b]=v.useState(!1),p=()=>{const w="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let D="";for(let C=0;C<8;C++)D+=w.charAt(Math.floor(Math.random()*w.length));x(C=>({...C,code:D})),y(D)},y=async w=>{if(w)try{const D={username:"",code:w,value:c.value||"0"},C=await Ds.toDataURL(JSON.stringify(D),{width:200,margin:2,color:{dark:"#1A1A1A",light:"#FFFFFF"}});m(C)}catch(D){console.error("Failed to generate QR code:",D)}};v.useEffect(()=>{c.code&&y(c.code)},[c.code,c.value]);const N=async w=>{w.preventDefault(),b(!0);try{if(!i?.id){alert("You must be logged in to create vouchers");return}const D={code:c.code,value:parseFloat(c.value)||0,points_required:parseInt(c.points_required)||0,max_uses:parseInt(c.max_uses)||1,expires_at:new Date(c.expires_at).getTime(),description:c.description||void 0,branch_id:i.branch_id,created_by:i.id},C=await u(D);l(C),x({code:"",value:"",points_required:"",max_uses:"",expires_at:"",description:""}),m(""),r()}catch(D){console.error("Failed to create voucher:",D),alert("Failed to create voucher. Please try again.")}finally{b(!1)}},j=(w,D)=>{x(C=>({...C,[w]:D}))};return e.jsx(ds,{isOpen:n,onClose:r,title:"Create New Voucher",size:"lg",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(kt,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Voucher Details"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:["Voucher Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",placeholder:"Enter voucher code",value:c.code,onChange:w=>j("code",w.target.value.toUpperCase()),required:!0,className:"flex-1 h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200 font-mono"}),e.jsx(Zt,{type:"button",onClick:p,className:"px-6 bg-[#6B6B6B] hover:bg-[#4A4A4A] text-white rounded-xl",children:"Generate"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:["Points Required ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",placeholder:"100",value:c.points_required,onChange:w=>j("points_required",w.target.value),required:!0,min:"0",className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:["Max Uses ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",placeholder:"1",value:c.max_uses,onChange:w=>j("max_uses",w.target.value),required:!0,min:"1",className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:["Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",placeholder:"50.00",value:c.value,onChange:w=>j("value",w.target.value),required:!0,min:"0.01",step:"0.01",className:"w-full h-12 px-4 pr-12 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"}),e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-[#6B6B6B] font-bold",children:""})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:["Expiry Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:c.expires_at,onChange:w=>j("expires_at",w.target.value),required:!0,className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(Le,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Description"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Description"}),e.jsx("textarea",{placeholder:"Describe what this voucher is for...",value:c.description,onChange:w=>j("description",w.target.value),rows:6,className:"w-full px-4 py-3 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200 resize-none"})]}),e.jsxs("div",{className:"bg-[#FF8C42]/10 border-2 border-[#FF8C42]/20 rounded-2xl p-4",children:[e.jsxs("h4",{className:"text-base font-bold text-[#1A1A1A] mb-2 flex items-center",children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Voucher Preview"]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-[#FF8C42]/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-black text-[#1A1A1A] font-mono mb-2",children:c.code||"VOUCHER-CODE"}),e.jsxs("div",{className:"text-2xl font-black text-[#FF8C42] my-2",children:["",c.value||"0"," OFF"]}),e.jsxs("div",{className:"text-sm text-[#6B6B6B] mb-2",children:["Points Required: ",c.points_required||"0"]}),e.jsxs("div",{className:"text-sm text-[#6B6B6B] mb-2",children:["Max Uses: ",c.max_uses||"1"]}),e.jsxs("div",{className:"text-sm text-[#6B6B6B] mb-3",children:["Expires: ",c.expires_at?new Date(c.expires_at).toLocaleDateString():"Not Set"]}),g&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:g,alt:"Voucher QR Code",className:"w-24 h-24"})})]})})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-[#F5F5F5]",children:[e.jsx(Zt,{type:"button",variant:"outline",onClick:r,className:"flex-1 border-[#6B6B6B] text-[#6B6B6B] hover:bg-[#6B6B6B] hover:text-white",children:"Cancel"}),e.jsx(Zt,{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Creating...":"Create Voucher"})]})]})})},t3=({onAddCustomer:n,onCreateBooking:r,onCreateVoucher:l,onVoucherScanned:i,onBookingScanned:c,activeModal:x,setActiveModal:u})=>{const[g,m]=v.useState(null),f=x!==void 0?x:g,b=u||m;return console.log("QuickActions render - currentModal:",f),ma.useEffect(()=>{console.log("currentModal changed to:",f)},[f]),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#FF8C42] via-[#FF7A2B] to-[#FF8C42] rounded-2xl opacity-20 group-hover:opacity-40 blur-sm transition-all"}),e.jsxs(xa,{className:"relative text-center p-5 bg-gradient-to-br from-[#FF8C42] via-[#FF7A2B] to-[#E67E37] text-white border-0 hover:shadow-xl transform hover:-translate-y-1 transition-all rounded-xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -translate-y-16 translate-x-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-20 h-20 bg-black/10 rounded-full translate-y-10 -translate-x-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-white/20 backdrop-blur-xl rounded-xl flex items-center justify-center shadow-xl ring-1 ring-white/30 group-hover:scale-105 transition-all",children:e.jsx(Vt,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold mb-3 text-base tracking-tight",children:"QR Scanner"}),e.jsx("button",{onClick:()=>{console.log("Scanner button clicked"),b("scannerSelection")},className:"w-full py-2.5 px-4 bg-white/15 backdrop-blur-xl text-white font-semibold rounded-lg border border-white/20 hover:bg-white/25 transition-colors text-sm shadow",children:"Open Scanner"})]})]})]}),e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#333333] to-[#444444] rounded-2xl opacity-0 group-hover:opacity-30 blur-sm transition-all"}),e.jsxs(xa,{className:"relative text-center p-5 bg-gradient-to-br from-[#2A2A2A] to-[#333333] backdrop-blur-xl border border-[#444444]/50 hover:border-[#FF8C42]/50 hover:shadow-lg transform hover:-translate-y-1 transition-all rounded-xl group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#FF8C42]/10 to-transparent rounded-full -translate-y-12 translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-xl flex items-center justify-center shadow group-hover:scale-105 transition-all",children:e.jsx(ua,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-white mb-3 text-base tracking-tight",children:"Add Customer"}),e.jsx("button",{onClick:()=>b("customer"),className:"w-full py-2.5 px-4 border border-[#FF8C42]/40 text-[#FF8C42] font-semibold rounded-lg hover:bg-[#FF8C42] hover:text-white hover:border-[#FF8C42] transition-colors text-sm",children:"New Customer"})]})]})]}),e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#333333] to-[#444444] rounded-2xl opacity-0 group-hover:opacity-30 blur-sm transition-all"}),e.jsxs(xa,{className:"relative text-center p-5 bg-gradient-to-br from-[#2A2A2A] to-[#333333] backdrop-blur-xl border border-[#444444]/50 hover:border-[#6B6B6B]/50 hover:shadow-lg transform hover:-translate-y-1 transition-all rounded-xl group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#6B6B6B]/10 to-transparent rounded-full -translate-y-12 translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-[#6B6B6B] to-[#4A4A4A] rounded-xl flex items-center justify-center shadow group-hover:scale-105 transition-all",children:e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-white mb-3 text-base tracking-tight",children:"New Booking"}),e.jsx("button",{onClick:()=>b("booking"),className:"w-full py-2.5 px-4 border border-[#6B6B6B]/40 text-[#CCCCCC] font-semibold rounded-lg hover:bg-[#6B6B6B] hover:text-white hover:border-[#6B6B6B] transition-colors text-sm",children:"Book Appointment"})]})]})]}),e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-2xl opacity-0 group-hover:opacity-30 blur-sm transition-all"}),e.jsxs(xa,{className:"relative text-center p-5 bg-gradient-to-br from-[#2A2A2A] to-[#333333] backdrop-blur-xl border border-[#444444]/50 hover:border-[#FF8C42]/50 hover:shadow-lg transform hover:-translate-y-1 transition-all rounded-xl group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#FF8C42]/10 to-transparent rounded-full -translate-y-12 translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-xl flex items-center justify-center shadow group-hover:scale-105 transition-all",children:e.jsx(kt,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-white mb-3 text-base tracking-tight",children:"Create Voucher"}),e.jsx("button",{onClick:()=>b("voucher"),className:"w-full py-2.5 px-4 border border-[#FF8C42]/40 text-[#FF8C42] font-semibold rounded-lg hover:bg-[#FF8C42] hover:text-white hover:border-[#FF8C42] transition-colors text-sm",children:"New Voucher"})]})]})]}),f&&e.jsxs("div",{className:"fixed top-4 right-4 bg-red-500 text-white p-2 rounded z-[10001]",children:["Active Modal: ",f]}),f==="scannerSelection"&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]",children:e.jsx("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl border border-gray-200",children:e.jsxs("div",{className:"text-center space-y-5",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B]",children:e.jsx(Vt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-[#1A1A1A]",children:"Choose Scanner"}),e.jsx("p",{className:"text-[#6B6B6B] text-sm",children:"Select the type of QR code"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>b("bookingScanner"),className:"w-full p-3 border border-[#FF8C42]/30 rounded-lg hover:border-[#FF8C42] hover:bg-[#FF8C42]/5 transition-colors group",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center group-hover:scale-105 transition-transform",children:e.jsx(Re,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-[#1A1A1A] text-base",children:"Booking QR"}),e.jsx("p",{className:"text-[#6B6B6B] text-sm",children:"Scan customer booking QR codes"})]})]})}),e.jsx("button",{onClick:()=>b("voucherScanner"),className:"w-full p-3 border border-[#FF8C42]/30 rounded-lg hover:border-[#FF8C42] hover:bg-[#FF8C42]/5 transition-colors group",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center group-hover:scale-105 transition-transform",children:e.jsx(kt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-[#1A1A1A] text-base",children:"Voucher QR"}),e.jsx("p",{className:"text-[#6B6B6B] text-sm",children:"Scan and redeem voucher QR codes"})]})]})})]}),e.jsx("button",{onClick:()=>b(null),className:"w-full py-2.5 px-4 border border-[#6B6B6B]/30 text-[#6B6B6B] font-semibold rounded-lg hover:bg-[#6B6B6B] hover:text-white transition-colors",children:"Cancel"})]})})}),f==="voucherScanner"&&e.jsx(d0,{isOpen:!0,onClose:()=>b(null),onVoucherScanned:p=>{i?.(p),b(null)}}),f==="bookingScanner"&&e.jsx(d0,{isOpen:!0,onClose:()=>b(null)}),e.jsx(gp,{isOpen:f==="customer",onClose:()=>b(null),onSubmit:p=>{n?.(p),b(null)}}),e.jsx(pp,{isOpen:f==="booking",onClose:()=>b(null),onSubmit:p=>{r?.(p),b(null)}}),e.jsx(e3,{isOpen:f==="voucher",onClose:()=>b(null),onSubmit:p=>{l?.(p),b(null)}})]})},s3=({stats:n=[]})=>{const r=(l,i)=>i.toLowerCase().includes("revenue")?Ut:i.toLowerCase().includes("booking")||i.toLowerCase().includes("appointment")?Re:i.toLowerCase().includes("customer")||i.toLowerCase().includes("client")?gt:i.toLowerCase().includes("voucher")?kt:i.toLowerCase().includes("service")?nt:i.toLowerCase().includes("barber")?It:i.toLowerCase().includes("point")?Vn:nt;return e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:n.map((l,i)=>{const c=r(l.icon,l.label);return e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:l.label}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:l.value})]}),e.jsx(c,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})},i)})})},a3=({activities:n=[]})=>{const r=i=>{switch(i){case"booking":case"appointment":return Re;case"voucher":return kt;case"customer":case"client":return ua;case"sale":return Ut;case"user":return Le;case"info":default:return c0}},l=(i,c)=>{const u={booking:"blue",appointment:"blue",voucher:"emerald",customer:"purple",client:"purple",sale:"green",user:"gray",info:"gray"}[i]||"gray";return{blue:{bg:"bg-gradient-to-r from-[#3B82F6] to-[#2563EB]",icon:"text-white",status:c==="new"?"bg-blue-50 text-blue-700 border-2 border-blue-200":"bg-green-50 text-green-700 border-2 border-green-200"},emerald:{bg:"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B]",icon:"text-white",status:c==="new"?"bg-[#FF8C42]/10 text-[#FF8C42] border-2 border-[#FF8C42]/20":"bg-green-50 text-green-700 border-2 border-green-200"},purple:{bg:"bg-gradient-to-r from-[#8B5CF6] to-[#7C3AED]",icon:"text-white",status:c==="new"?"bg-purple-50 text-purple-700 border-2 border-purple-200":"bg-green-50 text-green-700 border-2 border-green-200"},green:{bg:"bg-gradient-to-r from-[#10B981] to-[#059669]",icon:"text-white",status:"bg-green-50 text-green-700 border-2 border-green-200"},gray:{bg:"bg-gradient-to-r from-[#6B6B6B] to-[#4A4A4A]",icon:"text-white",status:"bg-gray-50 text-gray-700 border-2 border-gray-200"}}[u]};return e.jsxs("div",{className:"p-8 bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 rounded-3xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:"Recent Activity"}),e.jsxs("button",{className:"flex items-center space-x-2 text-[#FF8C42] hover:text-[#FF7A2B] text-base font-bold transition-all duration-300 group hover:scale-105",children:[e.jsx("span",{children:"View All"}),e.jsx(Er,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]}),e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c0,{className:"mx-auto h-12 w-12 text-gray-500 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No recent activity available"})]}):n.map(i=>{const c=r(i.type),x=l(i.type,i.status);return e.jsxs("div",{className:"flex items-start space-x-6 p-6 rounded-2xl bg-[#1A1A1A]/50 border border-transparent hover:bg-[#1A1A1A]/80 hover:border-[#FF8C42]/40 transition-all duration-300 group cursor-pointer hover:shadow-lg hover:-translate-y-1",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${x.bg} group-hover:scale-110 transition-transform shadow-lg ring-4 ring-[#1A1A1A]/20`,children:e.jsx(c,{className:`w-6 h-6 ${x.icon}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-base font-bold text-white mb-2 group-hover:text-[#FF8C42] transition-colors",children:i.message}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-400 font-semibold",children:i.time})]})]}),e.jsx("div",{className:`px-4 py-2 rounded-xl text-sm font-bold uppercase tracking-wider ${x.status}`,children:i.status})]},i.id)})})]})},r3=({tabs:n,activeTab:r,onTabChange:l,incompleteBookingsCount:i=0})=>{const[c,x]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{const j=w=>{u.current&&!u.current.contains(w.target)&&x(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[]);const g=j=>({overview:Ko,customers:gt,bookings:Re,services:It,vouchers:kt,reports:ks,barbers:Zo,users:gt,events:y1,products:aa,notifications:sc,branches:cs,payroll:Ut,email_marketing:Ft})[j]||Ko,m=["overview","bookings","barbers","users","services","vouchers","payroll"],f=["customers","reports","events","products","notifications","email_marketing"],b=n.filter(j=>m.includes(j.id)),p=n.filter(j=>f.includes(j.id)),y=p.find(j=>j.id===r),N=j=>{l(j),x(!1)};return e.jsxs("div",{className:"bg-gradient-to-r from-[#1E1E1E] to-[#2A2A2A] backdrop-blur-sm border border-[#333333]/50 rounded-2xl shadow-xl shadow-black/20 overflow-visible relative z-50",children:[e.jsx("nav",{className:"hidden lg:flex items-center justify-center p-2",children:e.jsxs("div",{className:"flex items-center space-x-1 bg-[#333333]/30 rounded-xl p-1",children:[b.map(j=>{const w=g(j.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>N(j.id),className:`relative flex items-center space-x-3 px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-300 group min-w-0 ${r===j.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg shadow-[#FF8C42]/25 transform scale-105":"text-gray-300 hover:text-white hover:bg-[#444444]/50 hover:shadow-sm"}`,children:[r===j.id&&e.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),e.jsx("div",{className:`flex items-center justify-center w-5 h-5 transition-all duration-200 ${r===j.id?"text-white":"text-gray-400 group-hover:text-[#FF8C42]"}`,children:e.jsx(w,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold whitespace-nowrap",children:j.label}),j.id==="bookings"&&i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:i>99?"99+":i})]})},j.id)}),e.jsxs("div",{className:"relative",ref:u,children:[e.jsx("button",{onClick:()=>x(!c),className:`relative flex items-center space-x-2 px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-300 group ${y?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg shadow-[#FF8C42]/25":"text-gray-600 hover:text-gray-900 hover:bg-white/80 hover:shadow-sm"}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),e.jsx("div",{className:"flex items-center justify-center w-5 h-5 text-white",children:ma.createElement(g(y.id),{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold whitespace-nowrap",children:y.label}),e.jsx(Wr,{className:`w-4 h-4 text-white transition-transform duration-200 ${c?"rotate-180":""}`})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 text-gray-500 group-hover:text-[#FF8C42]",children:e.jsx(kd,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold whitespace-nowrap",children:"More"}),e.jsx(Wr,{className:`w-4 h-4 text-gray-500 group-hover:text-[#FF8C42] transition-transform duration-200 ${c?"rotate-180":""}`})]})}),c&&e.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-200/50 py-2",style:{zIndex:99999,position:"absolute"},children:p.map(j=>{const w=g(j.id);return e.jsxs("button",{onClick:()=>N(j.id),className:`w-full flex items-center space-x-3 px-4 py-3 text-left transition-all duration-200 ${r===j.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white":"text-gray-600 hover:bg-gray-50 hover:text-[#FF8C42]"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 ${r===j.id?"text-white":"text-gray-500"}`,children:e.jsx(w,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold",children:j.label})]},j.id)})})]})]})}),e.jsx("nav",{className:"lg:hidden",children:e.jsxs("div",{className:"flex flex-wrap gap-1 p-2 justify-center",children:[b.map(j=>{const w=g(j.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>N(j.id),className:`flex flex-col items-center justify-center px-2 py-2 rounded-lg font-medium text-xs transition-all duration-200 whitespace-nowrap relative flex-shrink-0 ${r===j.id?"bg-gradient-to-b from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 mb-1 transition-all duration-200 ${r===j.id?"text-white":"text-gray-500"}`,children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold text-[10px]",children:j.label}),r===j.id&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),j.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[14px] h-[14px] flex items-center justify-center px-0.5",children:j.badge>99?"99":j.badge})]})},j.id)}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(!c),className:`flex flex-col items-center justify-center px-2 py-2 rounded-lg font-medium text-xs transition-all duration-200 whitespace-nowrap flex-shrink-0 ${y?"bg-gradient-to-b from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-5 h-5 mb-1 transition-all duration-200 ${y?"text-white":"text-gray-500"}`,children:y?ma.createElement(g(y.id),{className:"w-4 h-4"}):e.jsx(kd,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold text-[10px]",children:y?y.label:"More"}),y&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]}),c&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-40 bg-white rounded-xl shadow-xl border border-gray-200/50 py-2",style:{zIndex:99999,position:"absolute"},children:p.map(j=>{const w=g(j.id);return e.jsxs("button",{onClick:()=>N(j.id),className:`w-full flex items-center space-x-3 px-3 py-2 text-left transition-all duration-200 ${r===j.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white":"text-gray-600 hover:bg-gray-50 hover:text-[#FF8C42]"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-4 h-4 ${r===j.id?"text-white":"text-gray-500"}`,children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold text-xs",children:j.label})]},j.id)})})]})]})}),e.jsx("nav",{className:"hidden md:flex lg:hidden items-center justify-center p-2",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-gray-50/80 rounded-xl p-1",children:[b.map(j=>{const w=g(j.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>N(j.id),className:`flex items-center space-x-2 px-3 py-2.5 rounded-lg font-semibold text-sm transition-all duration-300 whitespace-nowrap relative ${r===j.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-white/80"}`,children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:j.label}),j.badge>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:j.badge>99?"99+":j.badge})]})},j.id)}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>x(!c),className:`flex items-center space-x-2 px-3 py-2.5 rounded-lg font-semibold text-sm transition-all duration-300 whitespace-nowrap ${y?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-white/80"}`,children:y?e.jsxs(e.Fragment,{children:[ma.createElement(g(y.id),{className:"w-4 h-4"}),e.jsx("span",{children:y.label}),e.jsx(Wr,{className:`w-4 h-4 transition-transform duration-200 ${c?"rotate-180":""}`})]}):e.jsxs(e.Fragment,{children:[e.jsx(kd,{className:"w-4 h-4"}),e.jsx("span",{children:"More"}),e.jsx(Wr,{className:`w-4 h-4 transition-transform duration-200 ${c?"rotate-180":""}`})]})}),c&&e.jsx("div",{className:"absolute top-full left-0 mt-2 w-44 bg-white rounded-xl shadow-xl border border-gray-200/50 py-2",style:{zIndex:99999,position:"absolute"},children:p.map(j=>{const w=g(j.id);return e.jsxs("button",{onClick:()=>N(j.id),className:`w-full flex items-center space-x-3 px-4 py-2.5 text-left transition-all duration-200 ${r===j.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white":"text-gray-600 hover:bg-gray-50 hover:text-[#FF8C42]"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-4 h-4 ${r===j.id?"text-white":"text-gray-500"}`,children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold text-sm",children:j.label})]},j.id)})})]})]})})]})},n3=({isOpen:n,onClose:r,title:l,message:i,details:c=[]})=>e.jsx(ds,{isOpen:n,onClose:r,title:"",size:"md",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:e.jsx(Qe,{className:"h-8 w-8 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:l||"Success!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i}),c.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Details:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:c.map((x,u)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(Qe,{className:"h-3 w-3 text-green-500 mr-2 flex-shrink-0"}),x]},u))})]}),e.jsx("button",{onClick:r,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Close"})]})});class gi{constructor(r=0,l="Network Error"){this.status=r,this.text=l}}const l3=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,r)=>Promise.resolve(localStorage.setItem(n,r)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},os={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:l3()},S0=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},i3=(n,r="https://api.emailjs.com")=>{if(!n)return;const l=S0(n);os.publicKey=l.publicKey,os.blockHeadless=l.blockHeadless,os.storageProvider=l.storageProvider,os.blockList=l.blockList,os.limitRate=l.limitRate,os.origin=l.origin||r},Np=async(n,r,l={})=>{const i=await fetch(os.origin+n,{method:"POST",headers:l,body:r}),c=await i.text(),x=new gi(i.status,c);if(i.ok)return x;throw x},wp=(n,r,l)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!r||typeof r!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!l||typeof l!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},o3=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Cp=n=>n.webdriver||!n.languages||n.languages.length===0,Ap=()=>new gi(451,"Unavailable For Headless Browser"),c3=(n,r)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof r!="string")throw"The BlockList watchVariable has to be a string"},x3=n=>!n.list?.length||!n.watchVariable,d3=(n,r)=>n instanceof FormData?n.get(r):n[r],Ep=(n,r)=>{if(x3(n))return!1;c3(n.list,n.watchVariable);const l=d3(r,n.watchVariable);return typeof l!="string"?!1:n.list.includes(l)},Fp=()=>new gi(403,"Forbidden"),u3=(n,r)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(r&&typeof r!="string")throw"The LimitRate ID has to be a non-empty string"},m3=async(n,r,l)=>{const i=Number(await l.get(n)||0);return r-Date.now()+i},Bp=async(n,r,l)=>{if(!r.throttle||!l)return!1;u3(r.throttle,r.id);const i=r.id||n;return await m3(i,r.throttle,l)>0?!0:(await l.set(i,Date.now().toString()),!1)},kp=()=>new gi(429,"Too Many Requests"),h3=async(n,r,l,i)=>{const c=S0(i),x=c.publicKey||os.publicKey,u=c.blockHeadless||os.blockHeadless,g=c.storageProvider||os.storageProvider,m={...os.blockList,...c.blockList},f={...os.limitRate,...c.limitRate};return u&&Cp(navigator)?Promise.reject(Ap()):(wp(x,n,r),o3(l),l&&Ep(m,l)?Promise.reject(Fp()):await Bp(location.pathname,f,g)?Promise.reject(kp()):Np("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:x,service_id:n,template_id:r,template_params:l}),{"Content-type":"application/json"}))},f3=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},g3=n=>typeof n=="string"?document.querySelector(n):n,p3=async(n,r,l,i)=>{const c=S0(i),x=c.publicKey||os.publicKey,u=c.blockHeadless||os.blockHeadless,g=os.storageProvider||c.storageProvider,m={...os.blockList,...c.blockList},f={...os.limitRate,...c.limitRate};if(u&&Cp(navigator))return Promise.reject(Ap());const b=g3(l);wp(x,n,r),f3(b);const p=new FormData(b);return Ep(m,p)?Promise.reject(Fp()):await Bp(location.pathname,f,g)?Promise.reject(kp()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",r),p.append("user_id",x),Np("/api/v1.0/email/send-form",p))},pi={init:i3,send:h3,sendForm:p3,EmailJSResponseStatus:gi},en="service_bczerea",Po="template_qqctchj",sn="rIfJ3j9HQe8hynx_3";pi.init(sn);const b3=async n=>{try{if(console.log("EmailJS Configuration:",{serviceId:en,templateId:Po,publicKey:sn?"***configured***":"not configured"}),!n.email||!n.username||!n.password)throw new Error("Missing required customer data for email");const r={to_email:n.email,to_name:n.username,user_email:n.email,user_password:n.password,username:n.username,login_url:n.loginUrl||`${window.location.origin}/auth/login`,company_name:"TipunoX Angeles",support_email:"support@tpxbarber.com",current_year:new Date().getFullYear()};console.log("Sending welcome email to:",n.email),console.log("Template parameters:",{...r,user_password:"***hidden***"});const l=await pi.send(en,Po,r);return console.log("Welcome email sent successfully:",l),{success:!0,response:l}}catch(r){return console.error("Failed to send welcome email:",r),console.error("Error details:",{message:r.message,status:r.status,text:r.text}),{success:!1,error:r.message}}},y3=async n=>{try{if(!n.email||!n.name||!n.voucherCode)throw new Error("Missing required voucher data for email");const r="template_lo371v3",l={to_email:n.email,to_name:n.name,voucher_code:n.voucherCode,voucher_value:n.voucherValue,points_required:n.pointsRequired||0,expires_at:n.expiresAt,qr_code_image:n.qrCodeImage,business_name:"TipunoX Angeles"};console.log("Sending voucher email to:",n.email),console.log("Template parameters:",{...l,qr_code_image:"QR_CODE_DATA_URL"});const i=await pi.send(en,r,l);return console.log("Voucher email sent successfully:",i),{success:!0,response:i}}catch(r){return console.error("Failed to send voucher email:",r),console.error("Error details:",{message:r.message,status:r.status,text:r.text}),{success:!1,error:r.message}}},v3=()=>sn!=="your_public_key",j3=({isOpen:n,onClose:r,voucher:l})=>{const{user:i}=Tt(),[c,x]=v.useState([]),[u,g]=v.useState([]),[m,f]=v.useState(""),[b,p]=v.useState(!1),[y,N]=v.useState(!1),[j,w]=v.useState(!1),[D,C]=v.useState([]),L=fe(J.services.auth.getAllUsers),A=fe(J.services.vouchers.getVoucherAssignedUsers,l?{voucherId:l._id}:"skip"),_=Ee(J.services.vouchers.assignVoucherByCode),[O,U]=v.useState(0),[M,E]=v.useState(""),S=v.useRef(null);v.useEffect(()=>{n&&$()},[n,l]),v.useEffect(()=>{if(L&&Array.isArray(L)){const B=A?A.map(I=>I._id||I.id):[],k=L.filter(I=>I.role==="customer"&&!B.includes(I._id||I.id));x(k)}},[L,A]),v.useEffect(()=>{const B=k=>{S.current&&!S.current.contains(k.target)&&f("")};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),v.useEffect(()=>{if(L&&Array.isArray(L)){const B=A?A.map(I=>I._id||I.id):[],k=L.filter(I=>I.role==="customer"&&!B.includes(I._id||I.id)&&(I.username?.toLowerCase().includes(m.toLowerCase())||I.email?.toLowerCase().includes(m.toLowerCase())||I.nickname?.toLowerCase().includes(m.toLowerCase())));x(k)}},[L,m,A]);const $=async()=>{if(l)try{const B={username:"",code:l.code,value:l.value},k=await Ds.toDataURL(JSON.stringify(B),{width:300,margin:2,color:{dark:"#1A1A1A",light:"#FFFFFF"}});E(k)}catch(B){console.error("Failed to generate QR code:",B)}},P=()=>{w(!1),C([]),r()},q=B=>{g(k=>{const I=B._id||B.id;return k.find(T=>(T._id||T.id)===I)?k.filter(T=>(T._id||T.id)!==I):[...k,B]})},z=()=>{g([...c])},V=()=>{g([])},Z=async()=>{if(u.length===0){alert("Please select at least one user to send the voucher to.");return}const B=u.filter(I=>!I.email||I.email.trim()==="");if(B.length>0){const I=B.map(se=>se.username).join(", ");alert(`The following users don't have email addresses: ${I}`);return}N(!0),U(0);let k=0;try{for(const se of u)try{const T={code:l.code,user_id:se._id||se.id,assigned_by:i.id};console.log("Assigning voucher to user:",T),await _(T),console.log(`Voucher ${l.code} assigned to ${se.username}`);const H={voucherId:l.id,username:se.username,code:l.code,value:l.value,expires_at:l.expires_at,type:"voucher",brand:"TipunoX Angeles Barbershop"};console.log("Generating QR code for user:",se.username,"with data:",H);const oe=await Ds.toDataURL(JSON.stringify(H),{width:200,margin:1,color:{dark:"#1A1A1A",light:"#FFFFFF"},errorCorrectionLevel:"M",type:"image/png",quality:.6});if(!oe||!oe.startsWith("data:image/png;base64,"))throw new Error("Failed to generate QR code for user: "+se.username);console.log("Generated QR Code URL length:",oe.length);const W={email:se.email,name:se.nickname||se.username,voucherCode:l.code,voucherValue:`${parseFloat(l.value).toFixed(2)}`,pointsRequired:l.points_required||0,expiresAt:new Date(l.expires_at).toLocaleDateString(),qrCodeImage:oe};console.log("Sending voucher email with data:",{...W,qrCodeImage:`QR_CODE_DATA_URL (${oe.length} chars)`});const le=await y3(W);if(le.success)console.log(`Email sent successfully to ${se.email}:`,le.response),k++,U(K=>{const Y=K+1;return console.log(`Incrementing sent count from ${K} to ${Y}`),Y});else throw new Error(le.error)}catch(T){console.error(`Failed to assign/send voucher to ${se.username}:`,T),alert(`Failed to process voucher for ${se.username}: ${T.message}`)}console.log("Final email send count:",k,"out of",u.length);const I=u.map(se=>`${se.username} (${se.email})`);k>0?(C(I.slice(0,k)),w(!0)):u.length>0&&alert("Vouchers were assigned but no emails were sent. Please check the console for errors.")}catch(I){console.error("Failed to assign vouchers:",I),alert("Failed to assign vouchers. Please try again.")}finally{N(!1)}};return l?e.jsxs(e.Fragment,{children:[e.jsx(ds,{isOpen:n,onClose:r,title:"Send Voucher via Email",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-[#FF8C42]/10 border-2 border-[#FF8C42]/20 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:M&&e.jsx("img",{src:M,alt:"Voucher QR Code",className:"w-20 h-20 rounded-lg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] mb-1",children:["Voucher ",l.code]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[#6B6B6B]",children:"Value:"})," ",e.jsxs("span",{className:"font-semibold",children:["",parseFloat(l.value).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#6B6B6B]",children:"Points:"})," ",e.jsx("span",{className:"font-semibold",children:l.points_required||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#6B6B6B]",children:"Max Uses:"})," ",e.jsx("span",{className:"font-semibold",children:l.max_uses||1})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#6B6B6B]",children:"Expires:"})," ",e.jsx("span",{className:"font-semibold",children:new Date(l.expires_at).toLocaleDateString()})]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-base font-bold text-[#1A1A1A] flex items-center",children:[e.jsx(gt,{className:"w-5 h-5 text-[#FF8C42] mr-2"}),"Select Recipients (",u.length," selected)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:z,className:"text-xs px-3 py-1 border border-[#FF8C42] text-[#FF8C42] rounded-lg hover:bg-[#FF8C42]/10",children:"Select All"}),e.jsx("button",{onClick:V,className:"text-xs px-3 py-1 border border-[#6B6B6B] text-[#6B6B6B] rounded-lg hover:bg-[#6B6B6B]/10",children:"Clear All"})]})]}),e.jsx("div",{className:"relative",ref:S,children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search customers...",value:m,onChange:B=>f(B.target.value),className:"w-full h-10 px-4 pr-10 border-2 border-[#F5F5F5] rounded-xl text-sm focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"}),e.jsx(Jt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-[#6B6B6B] w-4 h-4"})]})}),u.length>0&&e.jsx("div",{className:"border-2 border-[#F5F5F5] rounded-xl p-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(B=>e.jsxs("div",{className:"flex items-center space-x-1 bg-[#FF8C42]/10 border border-[#FF8C42]/20 rounded-lg px-2 py-1 text-xs",children:[e.jsx("span",{className:"text-[#1A1A1A] font-medium",children:B.username}),e.jsx("button",{onClick:()=>q(B),className:"text-[#FF8C42] hover:text-[#FF7A2B]",children:e.jsx(rt,{className:"w-3 h-3"})})]},B._id||B.id))})}),e.jsx("div",{className:"border-2 border-[#F5F5F5] rounded-xl max-h-64 overflow-y-auto",children:b?e.jsx("div",{className:"p-4 text-center text-[#6B6B6B]",children:"Loading customers..."}):c.length>0?e.jsx("div",{className:"p-2 space-y-1",children:c.map(B=>{const k=u.find(I=>(I._id||I.id)===(B._id||B.id));return e.jsxs("div",{onClick:()=>q(B),className:`flex items-center space-x-3 p-2 rounded-lg cursor-pointer transition-colors ${k?"bg-[#FF8C42]/10 border-[#FF8C42]/20 border":"hover:bg-[#F5F5F5]"}`,children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${k?"bg-[#FF8C42] border-[#FF8C42]":"border-[#D1D5DB]"}`,children:k&&e.jsx(Qe,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-[#1A1A1A] text-sm",children:B.username}),e.jsx("div",{className:"text-xs text-[#6B6B6B]",children:B.email}),B.nickname&&e.jsxs("div",{className:"text-xs text-[#FF8C42]",children:['"',B.nickname,'"']})]})]},B._id||B.id)})}):e.jsx("div",{className:"p-4 text-center text-[#6B6B6B]",children:m?"No customers found matching your search.":"No customers available."})})]}),y&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsxs("div",{className:"text-blue-700",children:["Assigning vouchers and sending emails... (",O,"/",u.length,")"]})]})}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-[#F5F5F5]",children:[e.jsx(Zt,{type:"button",variant:"outline",onClick:r,disabled:y,className:"flex-1 border-[#6B6B6B] text-[#6B6B6B] hover:bg-[#6B6B6B] hover:text-white",children:"Cancel"}),e.jsx(Zt,{type:"button",onClick:Z,disabled:u.length===0||y,className:"flex-1 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white hover:shadow-lg flex items-center justify-center",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Assigning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Assign & Send to ",u.length," User",u.length!==1?"s":""]})})]})]})}),e.jsx(n3,{isOpen:j,onClose:P,title:"Vouchers Sent Successfully!",message:`Successfully assigned vouchers and sent ${D.length} emails.`,details:D})]}):null},N3=({isOpen:n,onClose:r,voucher:l,assignedUsers:i=[]})=>l?e.jsx(ds,{isOpen:n,onClose:r,title:`Users Assigned to Voucher: ${l.code}`,size:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900",children:"Voucher Details"}),e.jsxs("p",{className:"text-orange-700",children:["Code: ",l.code]}),e.jsxs("p",{className:"text-orange-700",children:["Value: ",parseFloat(l.value).toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-orange-600",children:"Assigned Users"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:i.length})]})]})}),i.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Assigned Users:"}),i.map((c,x)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:c.username||"Unknown User"}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[e.jsx(Ft,{className:"w-3 h-3 mr-1"}),c.email||"No email"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`flex items-center ${c.assignment_status==="redeemed"?"text-green-600":"text-blue-600"}`,children:[e.jsx(Qe,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:c.assignment_status||"Assigned"})]}),c.assigned_at&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),"Assigned: ",new Date(c.assigned_at).toLocaleDateString()]}),c.redeemed_at&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 inline mr-1"}),"Redeemed: ",new Date(c.redeemed_at).toLocaleDateString()]})]})]},c._id||x))]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Le,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Users Assigned"}),e.jsx("p",{className:"text-gray-600",children:"This voucher hasn't been assigned to any users yet."})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:r,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"Close"})})]})}):null,w3=({vouchers:n=[],onRefresh:r,onCreateVoucher:l})=>{const[i,c]=v.useState(""),[x,u]=v.useState("all"),[g,m]=v.useState("created_at"),[f,b]=v.useState(null),[p,y]=v.useState(null),[N,j]=v.useState(null),[w,D]=v.useState(!1),[C,L]=v.useState("card"),A=Ee(J.services.vouchers.deleteVoucher),_=fe(J.services.vouchers.getVoucherAssignedUsers,N?{voucherId:N._id}:"skip"),O=P=>P.redeemed?{status:"redeemed",label:"Redeemed",icon:Qe,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"}:P.expires_at<Date.now()?{status:"expired",label:"Expired",icon:Pt,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"}:{status:"active",label:"Active",icon:jt,bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",iconColor:"text-orange-500"},U=async P=>{if(confirm(`Are you sure you want to delete voucher "${P.code}"?`)){D(!0);try{await A({id:P._id}),r()}catch(q){console.error("Failed to delete voucher:",q),alert("Failed to delete voucher. Please try again.")}finally{D(!1)}}},M=n.filter(P=>{const q=P.code.toLowerCase().includes(i.toLowerCase()),z=x==="all"||O(P).status===x;return q&&z}).sort((P,q)=>g==="value"?parseFloat(q.value)-parseFloat(P.value):g==="expires_at"?new Date(P.expires_at)-new Date(q.expires_at):new Date(q.created_at)-new Date(P.created_at)),E={total:n.length,active:n.filter(P=>!P.redeemed&&!P.isExpired).length,redeemed:n.filter(P=>P.redeemed).length,expired:n.filter(P=>P.isExpired&&!P.redeemed).length,totalValue:n.reduce((P,q)=>P+parseFloat(q.value),0)},S=({voucher:P})=>{const q=v.useRef(null),z=JSON.stringify({voucherId:P.id,code:P.code,type:"voucher",brand:"TipunoX Angeles Barbershop"});return v.useEffect(()=>{q.current&&Ds.toCanvas(q.current,z,{width:32,margin:0,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"M"},V=>{V&&console.error("Mini QR error:",V)})},[z]),e.jsx("canvas",{ref:q,className:"rounded w-8 h-8",style:{maxWidth:"32px",maxHeight:"32px"}})},$=({voucher:P,onClose:q})=>{const z=v.useRef(null),V=JSON.stringify({voucherId:P.id,code:P.code,value:P.value,expires_at:P.expires_at,user:P.user,redeemed:!!P.redeemed,type:"voucher",brand:"TipunoX Angeles Barbershop"});v.useEffect(()=>{z.current&&Ds.toCanvas(z.current,V,{width:220,margin:2,color:{dark:"#1F2937",light:"#ffffff"},errorCorrectionLevel:"H"},se=>{se&&console.error("QR generation error:",se)})},[V]);const Z=async()=>{try{const se=await Ds.toDataURL(V,{width:600,margin:2,color:{dark:"#111827",light:"#ffffff"},errorCorrectionLevel:"H"}),T=document.createElement("a");T.href=se,T.download=`voucher-${P.code}.png`,T.click()}catch(se){console.error("Failed to download QR:",se)}},B=async()=>{try{const se=await Ds.toDataURL(V,{width:600,margin:2,color:{dark:"#111827",light:"#ffffff"},errorCorrectionLevel:"H"}),T=window.open("","_blank");if(!T)return;T.document.write(`
          <html>
            <head>
              <title>Voucher ${P.code} - QR</title>
              <style>
                body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; text-align: center; padding: 24px; }
                .code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-weight: 700; color: #F68B24; }
              </style>
            </head>
            <body>
              <h2>Voucher <span class="code">${P.code}</span></h2>
              <img src="${se}" alt="Voucher QR" style="width: 320px; height: 320px;" />
              <p>Present this QR at the counter to redeem.</p>
              <script>window.onload = () => { window.print(); window.onafterprint = () => window.close(); };<\/script>
            </body>
          </html>
        `),T.document.close()}catch(se){console.error("Failed to print QR:",se)}},k=async()=>{try{await navigator.clipboard.writeText(P.code)}catch(se){console.error("Failed to copy code:",se)}},I=O(P);return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl border border-gray-200",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto bg-gradient-to-br from-orange-400 to-amber-500 shadow-sm",children:e.jsx(Vt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-gray-900",children:"Voucher QR Code"}),e.jsx("p",{className:"text-sm font-mono font-bold text-orange-600",children:P.code}),e.jsx("p",{className:"text-sm text-gray-500",children:"Scan this code to validate or redeem"})]}),e.jsx("div",{className:"p-4 rounded-xl bg-orange-50 border border-orange-100",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("canvas",{ref:z,className:"rounded-lg"})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-left",children:[e.jsxs("div",{className:"p-3 rounded-xl bg-gray-50",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Value"}),e.jsx("div",{className:"text-sm font-bold text-gray-900",children:P.formattedValue||`${parseFloat(P.value).toFixed(2)}`})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-gray-50",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Expires"}),e.jsx("div",{className:`text-sm font-bold ${P.isExpired?"text-red-600":"text-gray-900"}`,children:new Date(P.expires_at).toLocaleDateString()})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-gray-50",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"User"}),e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["User ",P.user]})]}),e.jsxs("div",{className:"p-3 rounded-xl bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Status"}),e.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${I.bg} ${I.border} border ${I.text}`,children:[e.jsx(I.icon,{className:`h-3 w-3 mr-1 ${I.iconColor}`}),I.label]})]}),e.jsxs("button",{onClick:k,className:"ml-2 inline-flex items-center px-2.5 py-1 border border-gray-200 text-xs font-medium rounded bg-white hover:bg-gray-50 text-gray-700",children:[e.jsx(L1,{className:"h-3 w-3 mr-1"})," Copy"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 rounded-xl text-gray-700 border border-gray-200 hover:bg-gray-50",children:"Close"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:Z,className:"inline-flex items-center px-3 py-2 rounded-xl text-white bg-orange-500 hover:bg-orange-600",children:[e.jsx(Xa,{className:"h-4 w-4 mr-1"})," Download"]}),e.jsxs("button",{onClick:B,className:"inline-flex items-center px-3 py-2 rounded-xl text-orange-700 bg-orange-50 hover:bg-orange-100 border border-orange-200",children:[e.jsx(hp,{className:"h-4 w-4 mr-1"})," Print"]})]})]})]})})})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:E.total})]}),e.jsx(kt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:E.active})]}),e.jsx(jt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Redeemed"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:E.redeemed})]}),e.jsx(Qe,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Expired"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:E.expired})]}),e.jsx(Pt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-[#FF8C42]",children:["",E.totalValue.toFixed(0)]})]}),e.jsx(Ut,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search voucher code...",value:i,onChange:P=>c(P.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:x,onChange:P=>u(P.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"redeemed",children:"Redeemed"}),e.jsx("option",{value:"expired",children:"Expired"})]})]}),e.jsxs("select",{value:g,onChange:P=>m(P.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"created_at",children:"Sort by Date"}),e.jsx("option",{value:"value",children:"Sort by Value"}),e.jsx("option",{value:"expires_at",children:"Sort by Expiry"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center bg-[#1A1A1A] rounded-lg border border-[#444444] p-1",children:[e.jsx("button",{onClick:()=>L("card"),className:`p-2 rounded-md transition-colors ${C==="card"?"bg-orange-500 text-white":"text-gray-400 hover:text-gray-300"}`,children:e.jsx(F0,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>L("table"),className:`p-2 rounded-md transition-colors ${C==="table"?"bg-orange-500 text-white":"text-gray-400 hover:text-gray-300"}`,children:e.jsx(B0,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(an,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:l,className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"New Voucher"})]})]})]})}),C==="card"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(P=>{const q=O(P),z=q.icon;return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm hover:shadow-lg transition-all duration-200 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center w-12 h-12",children:e.jsx(S,{voucher:P})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-mono text-sm font-bold text-white",children:P.code}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Points: ",P.points_required]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full ${q.status==="active"?"bg-green-500/20 text-green-400 border border-green-500/30":q.status==="redeemed"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[e.jsx(z,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-medium",children:q.label})]}),e.jsx("button",{onClick:()=>U(P),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded transition-colors",title:"Delete Voucher",children:e.jsx(Ss,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Value"}),e.jsxs("span",{className:"text-lg font-bold text-[#FF8C42]",children:["",parseFloat(P.value).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Points Required"}),e.jsx("span",{className:"text-sm font-medium text-white",children:P.points_required})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Assignments"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[P.assignedCount||0,"/",P.max_uses,P.redeemedCount>0&&e.jsxs("span",{className:"text-green-400 ml-1",children:["(",P.redeemedCount," redeemed)"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Created"}),e.jsx("span",{className:"text-sm text-gray-300",children:new Date(P.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Expires"}),e.jsx("span",{className:`text-sm ${P.expires_at<Date.now()?"text-red-400":"text-gray-300"}`,children:new Date(P.expires_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-[#444444]/30",children:[e.jsxs("button",{onClick:()=>j(P),className:"w-full mb-2 px-3 py-2 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded-lg hover:bg-blue-500/30 transition-colors text-sm font-medium flex items-center justify-center",children:[e.jsx(gt,{className:"h-4 w-4 mr-2"})," View Assigned Users"]}),!P.redeemed&&P.expires_at>=Date.now()&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>b(P),className:"flex-1 px-3 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm font-medium flex items-center justify-center",children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"})," View QR"]}),e.jsxs("button",{onClick:()=>y(P),className:"flex-1 px-3 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors text-sm font-semibold flex items-center justify-center",children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"})," Send Email"]})]})]})]},P._id)})}):e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Voucher"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Points"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Usage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Expires"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#444444]/30",children:M.map(P=>{const q=O(P),z=q.icon;return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-lg mr-3",children:e.jsx(kt,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-mono font-bold text-white",children:P.code}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Created: ",new Date(P.createdAt).toLocaleDateString()]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-[#FF8C42]",children:["",parseFloat(P.value).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:P.points_required})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[P.assignedCount||0,"/",P.max_uses,P.redeemedCount>0&&e.jsxs("div",{className:"text-xs text-green-400",children:["(",P.redeemedCount," redeemed)"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full w-fit ${q.status==="active"?"bg-green-500/20 text-green-400 border border-green-500/30":q.status==="redeemed"?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:[e.jsx(z,{className:"h-3 w-3"}),e.jsx("span",{className:"text-xs font-medium",children:q.label})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${P.expires_at<Date.now()?"text-red-400":"text-gray-300"}`,children:new Date(P.expires_at).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>j(P),className:"p-2 text-gray-400 hover:text-blue-400 hover:bg-[#444444] rounded-lg transition-colors",title:"View Users",children:e.jsx(gt,{className:"h-4 w-4"})}),!P.redeemed&&P.expires_at>=Date.now()&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b(P),className:"p-2 text-gray-400 hover:text-[#FF8C42] hover:bg-[#444444] rounded-lg transition-colors",title:"View QR",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>y(P),className:"p-2 text-gray-400 hover:text-[#FF8C42] hover:bg-[#444444] rounded-lg transition-colors",title:"Send Email",children:e.jsx(Ft,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>U(P),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded-lg transition-colors",title:"Delete",children:e.jsx(Ss,{className:"h-4 w-4"})})]})})]},P._id)})})]})})}),M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(kt,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No vouchers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:i||x!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new voucher."})]}),f&&e.jsx($,{voucher:f,onClose:()=>b(null)}),p&&e.jsx(j3,{voucher:p,isOpen:!!p,onClose:()=>y(null)}),N&&e.jsx(N3,{voucher:N,isOpen:!!N,onClose:()=>j(null),assignedUsers:_||[]})]})},C3=({isOpen:n,onClose:r,onSubmit:l,editingService:i=null})=>{const[c,x]=v.useState({name:"",description:"",duration_minutes:30,price:"",category:"General",is_active:!0});v.useEffect(()=>{x(i?{name:i.name||"",description:i.description||"",duration_minutes:i.duration_minutes||30,price:i.price||"",category:i.category||"General",is_active:i.is_active??!0}:{name:"",description:"",duration_minutes:30,price:"",category:"General",is_active:!0})},[i]);const[u,g]=v.useState(!1),[m,f]=v.useState(""),b=Ee(J.services.services.createService),p=Ee(J.services.services.updateService),y=(w,D)=>{x(C=>({...C,[w]:D}))},N=async w=>{if(w.preventDefault(),!c.name.trim()||!c.price){f("Name and price are required");return}g(!0),f("");try{const D={...c,price:parseFloat(c.price),duration_minutes:parseInt(c.duration_minutes)};i?await p({id:i._id,...D}):await b(D),l&&l(),x({name:"",description:"",duration_minutes:30,price:"",category:"General",is_active:!0}),r()}catch(D){console.error("Error saving service:",D),f(D.message||"Failed to save service")}finally{g(!1)}},j=()=>{x({name:"",description:"",duration_minutes:30,price:"",category:"General",is_active:!0}),f(""),r()};return e.jsx(ds,{isOpen:n,onClose:j,title:i?"Edit Service":"Create New Service",size:"lg",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:e.jsx("p",{className:"text-sm",children:m})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(It,{className:"w-5 h-5 mr-2 text-[#FF8C42]"}),"Service Details"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:["Service Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.name,onChange:w=>y("name",w.target.value),placeholder:"Enter service name",required:!0,className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Description"}),e.jsx("textarea",{value:c.description,onChange:w=>y("description",w.target.value),placeholder:"Describe the service",rows:3,className:"w-full px-4 py-3 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200 resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Category"}),e.jsxs("select",{value:c.category,onChange:w=>y("category",w.target.value),className:"w-full h-12 px-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200",children:[e.jsx("option",{value:"General",children:"General"}),e.jsx("option",{value:"Haircut",children:"Haircut"}),e.jsx("option",{value:"Beard",children:"Beard"}),e.jsx("option",{value:"Styling",children:"Styling"}),e.jsx("option",{value:"Treatment",children:"Treatment"}),e.jsx("option",{value:"Package",children:"Package"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-black text-[#1A1A1A] uppercase tracking-wide flex items-center",children:[e.jsx(Ut,{className:"w-5 h-5 mr-2 text-[#FF8C42]"}),"Pricing & Duration"]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:["Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-[#6B6B6B] font-bold text-base",children:""}),e.jsx("input",{type:"number",value:c.price,onChange:w=>y("price",w.target.value),placeholder:"0.00",step:"0.01",min:"0",required:!0,className:"w-full h-12 pl-8 pr-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Duration (minutes)"}),e.jsxs("div",{className:"relative",children:[e.jsx(jt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-[#6B6B6B]"}),e.jsx("input",{type:"number",value:c.duration_minutes,onChange:w=>y("duration_minutes",w.target.value),placeholder:"30",min:"1",className:"w-full h-12 pl-12 pr-4 border-2 border-[#F5F5F5] rounded-xl text-base focus:outline-none focus:border-[#FF8C42] transition-colors duration-200"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[#1A1A1A] font-bold text-base mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"is_active",checked:c.is_active===!0,onChange:()=>y("is_active",!0),className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42] border-gray-300"}),e.jsx("span",{className:"ml-2 text-[#1A1A1A] font-medium",children:"Active"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"is_active",checked:c.is_active===!1,onChange:()=>y("is_active",!1),className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42] border-gray-300"}),e.jsx("span",{className:"ml-2 text-[#1A1A1A] font-medium",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#FF8C42]/5 to-[#FF7A2B]/5 border-2 border-[#FF8C42]/20 rounded-xl p-4",children:[e.jsx("h4",{className:"text-[#1A1A1A] font-bold text-sm mb-2 uppercase tracking-wide",children:"Service Preview"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[#6B6B6B] text-sm",children:"Name:"}),e.jsx("span",{className:"text-[#1A1A1A] font-bold text-sm",children:c.name||"Service Name"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[#6B6B6B] text-sm",children:"Price:"}),e.jsxs("span",{className:"text-[#FF8C42] font-bold text-sm",children:["",c.price||"0.00"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[#6B6B6B] text-sm",children:"Duration:"}),e.jsxs("span",{className:"text-[#1A1A1A] font-bold text-sm",children:[c.duration_minutes||30," min"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[#6B6B6B] text-sm",children:"Category:"}),e.jsx("span",{className:"text-[#1A1A1A] font-bold text-sm",children:c.category})]})]})]})]})]}),e.jsxs("div",{className:"flex space-x-4 pt-6 border-t border-[#F5F5F5]",children:[e.jsx(Zt,{type:"button",onClick:j,className:"flex-1 bg-[#F5F5F5] text-[#6B6B6B] hover:bg-[#E0E0E0] border-2 border-[#F5F5F5]",children:"Cancel"}),e.jsx(Zt,{type:"submit",disabled:u,className:"flex-1 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white hover:shadow-lg disabled:opacity-50",children:u?"Saving...":i?"Update Service":"Create Service"})]})]})})},A3=({onClose:n,onSuccess:r})=>{const[l,i]=v.useState(!1),[c,x]=v.useState(null),[u,g]=v.useState(null),m=Ee(J.services.services.bulkInsertServices),f=[{name:"Tipuno X Classico",description:"Consultation, Haircut",duration_minutes:30,price:150},{name:"Tipuno X Signature",description:"Consultation, Haircut, Rinse Hot and Cold Towel Finish",duration_minutes:60,price:500},{name:"Tipuno X Deluxe",description:"Consultation, Haircut, Hair Spa Treatment, Rinse Hot and Cold Towel Finish",duration_minutes:90,price:800},{name:"Beard Shave/Shaping/Sculpting",description:"More than a shave. It's a service you'll feel.",duration_minutes:30,price:200},{name:"FACVNDO ELITE BARBERING SERVICE",description:"If you are looking for wedding haircuts, trust the elite hands that turn grooms into legends.",duration_minutes:0,price:1e4},{name:"Package 1",description:"Consultation, Haircut, Shaving, Styling",duration_minutes:45,price:500},{name:"Package 2",description:"Consultation, Haircut, Hair Color or With Single Bleach, Rinse, Styling. Note: Short hair only, add 250 per length",duration_minutes:60,price:850},{name:"Package 3",description:"Consultation, Haircut, Hair Color or With Single Bleach, Hair Spa Treatment, Rinse, Styling. Note: Short hair only, add 250 per length",duration_minutes:60,price:1400},{name:"Mustache/Beard Trim",description:"No Description with this product yet.",duration_minutes:30,price:170},{name:"Hair Spa",description:"No description for this service yet.",duration_minutes:30,price:600},{name:"Hair and Scalp Treatment",description:"No description for this product yet.",duration_minutes:60,price:1500},{name:"Hair Color",description:"No description for this product yet.",duration_minutes:60,price:800},{name:"Perm",description:"No description for this product yet.",duration_minutes:60,price:1500},{name:"Hair Tattoo",description:"No description for this product yet.",duration_minutes:60,price:100}],b=async()=>{i(!0),g(null),x(null);try{const p=await m({services:f});x(p),r&&r(p)}catch(p){console.error("Import error:",p),g(p.message||"Failed to import services")}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:n}),e.jsx("div",{className:"relative w-full max-w-2xl transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all p-6",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center mx-auto",children:e.jsx(_r,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Import Services"}),e.jsxs("p",{className:"text-gray-400",children:["Import ",f.length," services from the CSV data into the database"]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 max-h-60 overflow-y-auto",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Services to be imported:"}),e.jsx("div",{className:"space-y-2",children:f.map((p,y)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-white font-medium",children:p.name}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-[#FF8C42] font-bold",children:["",p.price.toFixed(2)]}),e.jsxs("span",{className:"text-gray-400 ml-2",children:["(",p.duration_minutes,"min)"]})]})]},y))})]}),c&&e.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-400",children:[e.jsx(Qe,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Import Successful!"})]}),e.jsxs("p",{className:"text-sm text-green-300 mt-2",children:["Successfully imported ",c.insertedCount," services"]})]}),u&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-red-400",children:[e.jsx(at,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Import Failed"})]}),e.jsx("p",{className:"text-sm text-red-300 mt-2",children:u})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 rounded-xl text-gray-300 bg-[#444444] hover:bg-[#555555] transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:b,disabled:l||c,className:"flex-1 px-4 py-3 rounded-xl bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white font-medium hover:from-[#FF7A2B] hover:to-[#FF6B1A] disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(ei,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Importing..."})]}):c?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Imported"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_r,{className:"w-4 h-4"}),e.jsx("span",{children:"Import Services"})]})})]})]})})]})})},E3=({services:n=[],onRefresh:r})=>{const[l,i]=v.useState(""),[c,x]=v.useState("name"),[u,g]=v.useState(!1),[m,f]=v.useState(null),[b,p]=v.useState(!1),[y,N]=v.useState("card"),[j,w]=v.useState(!1),D=Ee(J.services.services.deleteService),C=n.filter(E=>E.name.toLowerCase().includes(l.toLowerCase())||E.description.toLowerCase().includes(l.toLowerCase())).sort((E,S)=>c==="name"?E.name.localeCompare(S.name):c==="price"?parseFloat(S.price)-parseFloat(E.price):c==="duration"?S.duration_minutes-E.duration_minutes:E.id-S.id),L={total:n.length,totalRevenue:n.reduce((E,S)=>E+parseFloat(S.price),0),avgPrice:n.length?n.reduce((E,S)=>E+parseFloat(S.price),0)/n.length:0,avgDuration:n.length?n.reduce((E,S)=>E+S.duration_minutes,0)/n.length:0},A=()=>{f(null),g(!0)},_=E=>{f(E),g(!0)},O=()=>{g(!1),f(null)},U=()=>{g(!1),f(null),r()},M=async E=>{if(confirm(`Are you sure you want to delete "${E.name}"?`)){p(!0);try{await D({id:E._id}),r()}catch(S){console.error("Failed to delete service:",S),alert("Failed to delete service. Please try again.")}finally{p(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:L.total})]}),e.jsx(It,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Avg. Price"}),e.jsxs("p",{className:"text-2xl font-bold text-[#FF8C42]",children:["",L.avgPrice.toFixed(0)]})]}),e.jsx(Ut,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Avg. Duration"}),e.jsxs("p",{className:"text-2xl font-bold text-[#FF8C42]",children:[Math.round(L.avgDuration),"m"]})]}),e.jsx(jt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold text-[#FF8C42]",children:["",L.totalRevenue.toFixed(0)]})]}),e.jsx(Ut,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search services...",value:l,onChange:E=>i(E.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:c,onChange:E=>x(E.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"price",children:"Sort by Price"}),e.jsx("option",{value:"duration",children:"Sort by Duration"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center bg-[#1A1A1A] rounded-lg border border-[#444444] p-1",children:[e.jsx("button",{onClick:()=>N("card"),className:`p-2 rounded-md transition-colors ${y==="card"?"bg-orange-500 text-white":"text-gray-400 hover:text-gray-300"}`,children:e.jsx(F0,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>N("table"),className:`p-2 rounded-md transition-colors ${y==="table"?"bg-orange-500 text-white":"text-gray-400 hover:text-gray-300"}`,children:e.jsx(B0,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(an,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[e.jsx(_r,{className:"h-4 w-4"}),e.jsx("span",{children:"Import CSV"})]}),e.jsxs("button",{onClick:A,className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"New Service"})]})]})]})}),e.jsx(C3,{isOpen:u,onClose:O,onSubmit:U,editingService:m}),j&&e.jsx(A3,{onClose:()=>w(!1),onSuccess:E=>{console.log("Import successful:",E),w(!1),r()}}),y==="card"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(E=>e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm hover:shadow-lg transition-all duration-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-lg",children:e.jsx(It,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:E.name}),e.jsx("p",{className:"text-sm text-gray-400",children:E.category})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>_(E),className:"p-2 text-gray-400 hover:text-[#FF8C42] hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(Ba,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(E),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(Ss,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-300",children:E.description}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Price"})]}),e.jsxs("span",{className:"text-lg font-bold text-[#FF8C42]",children:["",parseFloat(E.price).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Duration"})]}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[E.duration_minutes," mins"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-[#1A1A1A] rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Status"})}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.is_active?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:E.is_active?"Active":"Inactive"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-[#444444]/30",children:e.jsx("button",{onClick:()=>_(E),className:"w-full px-3 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors text-sm font-medium",children:"Edit Service"})})]},E._id))}):e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-[#444444]/30",children:C.map(E=>e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-lg mr-3",children:e.jsx(It,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:E.name}),e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:E.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:E.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-[#FF8C42]",children:["",parseFloat(E.price).toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[E.duration_minutes," mins"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.is_active?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:E.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>_(E),className:"p-2 text-gray-400 hover:text-[#FF8C42] hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(Ba,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(E),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-[#444444] rounded-lg transition-colors",children:e.jsx(Ss,{className:"h-4 w-4"})})]})})]},E._id))})]})})}),C.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(It,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No services found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:l?"Try adjusting your search criteria.":"Get started by creating your first service."}),!l&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:A,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A]",children:[e.jsx(Bt,{className:"-ml-1 mr-2 h-4 w-4"}),"New Service"]})})]})]})},F3=({onRefresh:n,user:r})=>{const[l,i]=v.useState(""),[c,x]=v.useState("all"),[u,g]=v.useState("date"),[m,f]=v.useState(!1),[b,p]=v.useState(null),[y,N]=v.useState(null),[j,w]=v.useState({service:"",barber:"",date:"",time:""}),[D,C]=v.useState(!1),[L,A]=v.useState(""),[_,O]=v.useState({show:!1,booking:null,action:null}),[U,M]=v.useState("bookings"),[E,S]=v.useState(null),[$,P]=v.useState(!1),q=r?.role==="super_admin"?fe(J.services.bookings.getAllBookings)||[]:r?.branch_id?fe(J.services.bookings.getBookingsByBranch,{branch_id:r.branch_id})||[]:[],z=r?.role==="super_admin"?fe(J.services.services.getAllServices)||[]:r?.branch_id?fe(J.services.services.getServicesByBranch,{branch_id:r.branch_id})||[]:[],V=r?.role==="super_admin"?fe(J.services.barbers.getActiveBarbers)||[]:r?.branch_id?(fe(J.services.barbers.getBarbersByBranch,{branch_id:r.branch_id})||[]).filter(ae=>ae.is_active):[],Z=fe(J.services.bookings.getBookingPayments,{bookingId:E?._id}),B=fe(J.services.bookings.getBookingTransactions,{bookingId:E?._id}),k=Ee(J.services.bookings.updateBooking),I=Ee(J.services.bookings.deleteBooking);Ee(J.services.bookings.updatePaymentStatus);const se=ae=>{switch(ae){case"booked":return{label:"Booked",icon:Qe,bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",iconColor:"text-blue-500"};case"confirmed":return{label:"Confirmed",icon:Qe,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"};case"completed":return{label:"Completed",icon:Qe,bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",iconColor:"text-orange-500"};case"cancelled":return{label:"Cancelled",icon:Pt,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"};default:return{label:"Pending",icon:at,bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",iconColor:"text-orange-500"}}},T=q.filter(ae=>{const me=(z.find(ee=>ee._id===ae.service)?.name||"").toLowerCase().includes(l.toLowerCase())||(ae.barber_name||"").toLowerCase().includes(l.toLowerCase())||(ae.booking_code||"").toLowerCase().includes(l.toLowerCase()),Ce=c==="all"||ae.status===c;return me&&Ce}).sort((ae,G)=>{if(u==="date"){const me=new Date(ae.date+" "+ae.time);return new Date(G.date+" "+G.time)-me}if(u==="status")return ae.status.localeCompare(G.status);if(u==="service"){const me=z.find(ee=>ee._id===ae.service)?.name||"",Ce=z.find(ee=>ee._id===G.service)?.name||"";return me.localeCompare(Ce)}return ae._id.localeCompare(G._id)}),H={total:q.length,pending:q.filter(ae=>ae.status==="pending").length,booked:q.filter(ae=>ae.status==="booked").length,confirmed:q.filter(ae=>ae.status==="confirmed").length,completed:q.filter(ae=>ae.status==="completed").length,cancelled:q.filter(ae=>ae.status==="cancelled").length,today:q.filter(ae=>{const G=new Date(ae.date).toDateString(),me=new Date().toDateString();return G===me}).length,paid:q.filter(ae=>(ae.payment_status||"unpaid")==="paid").length,unpaid:q.filter(ae=>(ae.payment_status||"unpaid")==="unpaid").length,refunded:q.filter(ae=>(ae.payment_status||"unpaid")==="refunded").length},oe=()=>{w({service:"",barber:"",date:"",time:""}),A("")},W=()=>{f(!0)},le=async ae=>{console.log("New booking created:",ae),n()},K=ae=>{w({service:ae.service,barber:ae.barber||"",date:ae.date,time:ae.time&&ae.time!=="N/A"?ae.time.slice(0,5):""}),p(ae),setIsCreating(!1),A("")},Y=()=>{p(null),oe()},ge=async()=>{if(!j.service||!j.date||!j.time){A("Service, date, and time are required");return}C(!0),A("");try{const ae={service:j.service,date:j.date,time:j.time};j.barber&&(ae.barber=j.barber),b&&await k({id:b._id,...ae}),Y(),n()}catch(ae){console.error("Error saving booking:",ae),A(ae.message||"Failed to save booking")}finally{C(!1)}},pe=async ae=>{if(confirm(`Are you sure you want to delete booking #${ae.booking_code||ae._id}?`)){C(!0);try{await I({id:ae._id}),n()}catch(G){console.error("Error deleting booking:",G),A(G.message||"Failed to delete booking")}finally{C(!1)}}},ye=async(ae,G)=>{C(!0);try{await k({id:ae._id,status:G}),n()}catch(me){console.error("Error updating booking status:",me),A(me.message||"Failed to update booking status")}finally{C(!1)}},Ae=async()=>{if(!_.booking||!_.action)return;const{booking:ae,action:G}=_,me=G==="confirm"?"confirmed":"completed";O({show:!1,booking:null,action:null}),await ye(ae,me)},Te=ae=>{switch(ae){case"paid":return{label:"Paid",icon:Qe,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"};case"refunded":return{label:"Refunded",icon:Pt,bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200",iconColor:"text-yellow-500"};default:return{label:"Unpaid",icon:da,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"}}},Ge=ae=>{S(ae),P(!0)},Ze=ae=>{sessionStorage.setItem("posBooking",JSON.stringify(ae)),window.location.href="/staff/pos"},Ye=ae=>ae?new Date(ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",Xe=ae=>{if(!ae||ae==="N/A")return"N/A";let G=ae;ae.includes(".")&&(G=ae.split(".")[0]),G.split(":").length>2&&(G=G.split(":").slice(0,2).join(":"));try{return new Date(`1970-01-01T${G}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ae}},pt=({booking:ae,onClose:G})=>{const me=v.useRef(null),Ce=JSON.stringify({bookingId:ae._id,bookingCode:ae.booking_code,service:z.find(ee=>ee._id===ae.service)?.name,barber:ae.barber_name,date:ae.date,time:ae.time,status:ae.status,barbershop:"TipunoX Angeles Barbershop"});return v.useEffect(()=>{me.current&&Ds.toCanvas(me.current,Ce,{width:200,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},ee=>{ee&&console.error("QR Code generation error:",ee)})},[Ce]),Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:G}),e.jsx("div",{className:"relative w-full max-w-sm transform rounded-2xl bg-white shadow-2xl transition-all z-[10000]",style:{borderColor:"#E0E0E0",border:"1px solid"},children:e.jsxs("div",{className:"text-center space-y-4 p-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(Vt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"#36454F"},children:"Booking QR Code"}),e.jsxs("p",{className:"text-sm font-mono font-bold text-orange-600",children:["#",ae.booking_code]}),e.jsx("p",{className:"text-sm",style:{color:"#8B8B8B"},children:"Scan this code for booking verification"})]}),e.jsx("div",{className:"p-4 rounded-xl",style:{backgroundColor:"#F4F0E6"},children:e.jsx("div",{className:"flex justify-center",children:e.jsx("canvas",{ref:me,className:"rounded-lg"})})}),e.jsxs("div",{className:"text-left space-y-2 p-4 rounded-xl",style:{backgroundColor:"#F9F9F9"},children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Service:"}),e.jsx("span",{className:"text-sm font-bold",style:{color:"#36454F"},children:z.find(ee=>ee._id===ae.service)?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Date & Time:"}),e.jsxs("span",{className:"text-sm font-bold",style:{color:"#36454F"},children:[Ye(ae.date)," at ",Xe(ae.time)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Barber:"}),e.jsx("span",{className:"text-sm font-bold",style:{color:"#36454F"},children:ae.barber_name||"Not assigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Status:"}),e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${se(ae.status).bg} ${se(ae.status).text}`,children:se(ae.status).label})]})]}),e.jsx("button",{onClick:G,className:"w-full py-2 px-4 rounded-xl font-medium text-white transition-colors",style:{backgroundColor:"#F68B24"},children:"Close"})]})})]})}),document.body)},it=()=>e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Booking"}),e.jsx("button",{onClick:Y,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:e.jsx(rt,{className:"h-5 w-5"})})]}),L&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:L})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service *"}),e.jsxs("select",{value:j.service,onChange:ae=>w(G=>({...G,service:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select a service"}),z?.map(ae=>e.jsxs("option",{value:ae._id,children:[ae.name," - ",parseFloat(ae.price||0).toFixed(2)," (",ae.duration_minutes,"min)"]},ae._id))||[]]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barber (Optional)"}),e.jsxs("select",{value:j.barber,onChange:ae=>w(G=>({...G,barber:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Any available barber"}),V?.map(ae=>e.jsx("option",{value:ae._id,children:ae.full_name},ae._id))||[]]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:j.date,onChange:ae=>w(G=>({...G,date:ae.target.value})),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),e.jsx("input",{type:"time",value:j.time,onChange:ae=>w(G=>({...G,time:ae.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Y,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:ge,disabled:D,className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx("span",{children:D?"Saving...":"Save Booking"})]})]})]}),xe=({booking:ae,onClose:G})=>{if(!ae)return null;const me=z.find(Ce=>Ce._id===ae.service);return e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:G}),e.jsxs("div",{className:"relative w-full max-w-4xl transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10000] max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Transaction Details"}),e.jsx("button",{onClick:G,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(rt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h4",{className:"text-lg font-bold text-white",children:"Booking Summary"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Booking Code"}),e.jsxs("p",{className:"text-sm font-mono font-bold text-white",children:["#",ae.booking_code]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Service"}),e.jsx("p",{className:"text-sm font-bold text-white",children:me?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Date & Time"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[Ye(ae.date)," at ",Xe(ae.time)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-sm font-bold text-green-400",children:["",me?.price?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h4",{className:"text-lg font-bold text-white",children:"Payment History"})}),e.jsx("div",{className:"overflow-x-auto",children:Z&&Z.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:Z.map(Ce=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:Ce.payment_request_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:Ce.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",Ce.amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ce.status==="completed"?"bg-green-50 text-green-700":Ce.status==="pending"?"bg-yellow-50 text-yellow-700":"bg-red-50 text-red-700"}`,children:Ce.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(Ce.created_at).toLocaleDateString()})})]},Ce._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ut,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No payments found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No payment records found for this booking."})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#1A1A1A] to-[#2A2A2A] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h4",{className:"text-lg font-bold text-white",children:"POS Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:B&&B.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Services"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:B.map(Ce=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:Ce.transaction_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:Ce.services?.map(ee=>ee.service_name).join(", ")||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",Ce.total_amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:Ce.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(Ce.createdAt).toLocaleDateString()})})]},Ce._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fr,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No transactions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No POS transactions found for this booking."})]})})]})]})]})]})})},Fe=()=>{if(!E)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Select a Booking"}),!q||!z?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading bookings..."})]}):(T||[]).length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Re,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No bookings found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"Create some bookings first to view transaction details."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Booking Code"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:(T||[]).slice(0,10).map(me=>{const Ce=se(me.status),ee=Te(me.payment_status||"unpaid");Ce.icon,ee.icon;const _e=z.find(Ue=>Ue._id===me.service);return e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-mono font-bold text-white",children:["#",me.booking_code]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:_e?.name||"Unknown"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:Ye(me.date)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Ce.bg} ${Ce.text}`,children:Ce.label})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${ee.bg} ${ee.text}`,children:ee.label})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right",children:e.jsx("button",{onClick:()=>S(me),className:"inline-flex items-center px-3 py-1 border border-blue-500/30 text-xs font-medium rounded text-blue-400 bg-blue-400/20 hover:bg-blue-400/30 transition-colors",children:"View Details"})})]},me._id)})})]})})]})});const ae=E,G=z?z.find(me=>me._id===ae.service):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Booking Summary"}),e.jsx("button",{onClick:()=>S(null),className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(rt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Booking Code"}),e.jsxs("p",{className:"text-sm font-mono font-bold text-white",children:["#",ae.booking_code]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Service"}),e.jsx("p",{className:"text-sm font-bold text-white",children:G?.name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Date & Time"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[Ye(ae.date)," at ",Xe(ae.time)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Amount"}),e.jsxs("p",{className:"text-sm font-bold text-green-400",children:["",G?.price?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h3",{className:"text-lg font-bold text-white",children:"Payment History"})}),e.jsx("div",{className:"overflow-x-auto",children:E?Z?Z.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:Z.map(me=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:me.payment_request_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:me.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",me.amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${me.status==="completed"?"bg-green-50 text-green-700":me.status==="pending"?"bg-yellow-50 text-yellow-700":"bg-red-50 text-red-700"}`,children:me.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(me.created_at).toLocaleDateString()})})]},me._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ut,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No payments found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No payment records found for this booking."})]}):e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading payment history..."})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Fr,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Select a booking to view payment history"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-[#444444]/30",children:e.jsx("h3",{className:"text-lg font-bold text-white",children:"POS Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:E?B?B.length>0?e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Services"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Total Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:B.map(me=>e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-mono text-gray-300",children:me.transaction_id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:me.services?.map(Ce=>Ce.service_name).join(", ")||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",me.total_amount?.toFixed(2)||"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:me.payment_method})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-300",children:new Date(me.createdAt).toLocaleDateString()})})]},me._id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fr,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No transactions found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No POS transactions found for this booking."})]}):e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading POS transactions..."})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(da,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Select a booking to view POS transactions"})]})})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:H.total})]}),e.jsx(Re,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Today"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:H.today})]}),e.jsx(jt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:H.pending})]}),e.jsx(at,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Booked"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:H.booked})]}),e.jsx(Qe,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Confirmed"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:H.confirmed})]}),e.jsx(Qe,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:H.cancelled})]}),e.jsx(Pt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Paid"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:H.paid})]}),e.jsx(Qe,{className:"h-8 w-8 text-green-400 opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Unpaid"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:H.unpaid})]}),e.jsx(da,{className:"h-8 w-8 text-red-400 opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Refunded"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:H.refunded})]}),e.jsx(Pt,{className:"h-8 w-8 text-yellow-400 opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search bookings...",value:l,onChange:ae=>i(ae.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:c,onChange:ae=>x(ae.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"booked",children:"Booked"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("select",{value:u,onChange:ae=>g(ae.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"status",children:"Sort by Status"}),e.jsx("option",{value:"service",children:"Sort by Service"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:[e.jsx(an,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:W,className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"New Booking"})]})]})]})}),b&&e.jsx(it,{}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex space-x-1 mb-4",children:[e.jsxs("button",{onClick:()=>M("bookings"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${U==="bookings"?"bg-[#FF8C42] text-white":"text-gray-300 hover:bg-[#333333] hover:text-white"}`,children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Bookings"})]}),e.jsxs("button",{onClick:()=>M("transaction"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${U==="transaction"?"bg-[#FF8C42] text-white":"text-gray-300 hover:bg-[#333333] hover:text-white"}`,children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:"Transaction"})]})]})}),U==="bookings"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Booking"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Barber"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:T.map(ae=>{const G=se(ae.status),me=Te(ae.payment_status||"unpaid"),Ce=ae.payment_status||"unpaid",ee=G.icon,_e=me.icon,Ue=z.find(Ie=>Ie._id===ae.service);return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-mono font-bold text-white",children:["#",ae.booking_code]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:Ue?.name||"Unknown Service"}),e.jsxs("div",{className:"text-sm text-gray-400",children:[Ue?.duration_minutes,"min"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:Ye(ae.date)}),e.jsx("div",{className:"text-sm text-gray-400",children:Xe(ae.time)})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:ae.barber_name||"Not assigned"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G.bg} ${G.text}`,children:[e.jsx(ee,{className:`-ml-0.5 mr-1.5 h-3 w-3 ${G.iconColor}`}),G.label]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-bold text-green-400",children:["",Ue?parseFloat(Ue.price).toFixed(2):"0.00"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${me.bg} ${me.text}`,children:[e.jsx(_e,{className:`-ml-0.5 mr-1.5 h-3 w-3 ${me.iconColor}`}),me.label]}),ae.status==="confirmed"&&Ce==="unpaid"&&e.jsxs("button",{onClick:()=>Ze(ae),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-green-400 bg-green-400/20 hover:bg-green-400/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-400",disabled:D,title:"Process Payment at POS",children:[e.jsx(da,{className:"h-3 w-3 mr-1"}),"POS"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>N(ae),className:"inline-flex items-center px-2.5 py-1.5 border border-[#FF8C42]/30 text-xs font-medium rounded text-[#FF8C42] bg-[#FF8C42]/20 hover:bg-[#FF8C42]/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF8C42]",title:"View QR Code",children:[e.jsx(Vt,{className:"h-3 w-3 mr-1"}),"QR"]}),ae.status==="completed"&&Ce==="paid"&&e.jsxs("button",{onClick:()=>Ge(ae),className:"inline-flex items-center px-2.5 py-1.5 border border-blue-500/30 text-xs font-medium rounded text-blue-400 bg-blue-400/20 hover:bg-blue-400/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400",title:"View Transaction Details",children:[e.jsx(Fr,{className:"h-3 w-3 mr-1"}),"TXN"]}),ae.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ye(ae,"booked"),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-400 bg-blue-400/20 hover:bg-blue-400/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400",disabled:D,children:"Book"}),e.jsx("button",{onClick:()=>ye(ae,"cancelled"),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-400 bg-red-400/20 hover:bg-red-400/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400",disabled:D,children:"Cancel"})]}),ae.status==="booked"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>O({show:!0,booking:ae,action:"confirm"}),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-green-400 bg-green-400/20 hover:bg-green-400/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-400",disabled:D,children:"Confirm"}),e.jsx("button",{onClick:()=>ye(ae,"cancelled"),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-red-400 bg-red-400/20 hover:bg-red-400/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400",disabled:D,children:"Cancel"})]}),ae.status==="confirmed"&&e.jsx("button",{onClick:()=>O({show:!0,booking:ae,action:"complete"}),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-[#FF8C42] bg-[#FF8C42]/20 hover:bg-[#FF8C42]/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF8C42]",disabled:D,children:"Complete"}),e.jsx("button",{onClick:()=>K(ae),className:"text-blue-400 hover:text-blue-300",disabled:D,children:e.jsx(Ba,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>pe(ae),className:"text-red-400 hover:text-red-300",disabled:D,children:e.jsx(Ss,{className:"h-4 w-4"})})]})})]},ae._id)})})]})}),T.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Re,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No bookings found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:l||c!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new booking."}),!l&&c==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:W,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A]",children:[e.jsx(Bt,{className:"-ml-1 mr-2 h-4 w-4"}),"New Booking"]})})]})]})}):e.jsx(Fe,{}),$&&e.jsx(xe,{booking:E,onClose:()=>{P(!1),S(null)}}),e.jsx(pp,{isOpen:m,onClose:()=>f(!1),onSubmit:le,user:r}),y&&e.jsx(pt,{booking:y,onClose:()=>N(null)}),_.show&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",style:{zIndex:99999},children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl border",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(Qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-900",children:_.action==="confirm"?"Confirm Booking":"Complete Booking"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to ",_.action==="confirm"?"confirm":"mark as completed"," booking #",_.booking?.booking_code,"?"]}),_.booking&&e.jsxs("div",{className:"text-left space-y-2 p-4 rounded-xl bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Service:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:z.find(ae=>ae._id===_.booking.service)?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Date & Time:"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Ye(_.booking.date)," at ",Xe(_.booking.time)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Barber:"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:_.booking.barber_name||"Not assigned"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>O({show:!1,booking:null,action:null}),className:"flex-1 py-2 px-4 rounded-xl font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ae,disabled:D,className:"flex-1 py-2 px-4 rounded-xl font-medium text-white transition-colors bg-orange-600 hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:D?void 0:"#F68B24"},children:D?"Processing...":_.action==="confirm"?"Confirm":"Complete"})]})]})})})]})},B3=({isOpen:n,onClose:r,onSubmit:l,editingBarber:i=null})=>{const{user:c}=Tt(),[x,u]=v.useState({username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",specialties:[],avatar:"",avatarStorageId:void 0});v.useEffect(()=>{u(i?{username:"",email:i.email||"",password:"",newPassword:"",mobile_number:i.phone||"",full_name:i.full_name||"",phone:i.phone||"",is_active:i.is_active??!0,services:i.services||[],experience:i.experience||"0 years",specialties:i.specialties||[],avatar:i.avatar||"",avatarStorageId:i.avatarStorageId||void 0}:{username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",specialties:[],avatar:"",avatarStorageId:void 0})},[i]);const[g,m]=v.useState(!1),[f,b]=v.useState(""),[p,y]=v.useState(!1),N=fe(J.services.services.getAllServices);Ee(J.services.barbers.createBarber);const j=Ee(J.services.barbers.createBarberWithAccount),w=Ee(J.services.barbers.updateBarber),D=Ee(J.services.barbers.updateBarberPassword),C=Ee(J.services.barbers.generateUploadUrl),L=fe(J.services.barbers.getImageUrl,{storageId:x.avatarStorageId}),A=(E,S)=>{u($=>({...$,[E]:S}))},_=async E=>{y(!0);try{const S=await C(),$=await fetch(S,{method:"POST",headers:{"Content-Type":E.type},body:E});if(!$.ok)throw new Error("Failed to upload image");const{storageId:P}=await $.json();return P}catch(S){throw console.error("Image upload failed:",S),S}finally{y(!1)}},O=async E=>{const S=E.target.files[0];if(S){if(!S.type.startsWith("image/")){b("Please select an image file");return}if(S.size>5*1024*1024){b("File size must be less than 5MB");return}try{const $=await _(S);A("avatarStorageId",$),b("")}catch{b("Failed to upload image. Please try again.")}}},U=async E=>{if(E.preventDefault(),i){if(!x.full_name.trim()||!x.email.trim()){b("Full name and email are required");return}}else if(!x.username.trim()||!x.email.trim()||!x.password.trim()||!x.mobile_number.trim()||!x.full_name.trim()){b("Username, email, password, mobile number, and full name are required");return}m(!0),b("");try{if(i){if(!c?.id){b("You must be logged in to update a barber");return}const S={full_name:x.full_name.trim(),email:x.email.trim(),phone:x.phone||"",is_active:x.is_active,services:x.services,experience:x.experience||"0 years",specialties:x.specialties,avatar:x.avatar||"",avatarStorageId:x.avatarStorageId||void 0};await w({id:i._id,...S}),x.newPassword&&x.newPassword.trim()&&await D({barberId:i._id,newPassword:x.newPassword.trim()})}else{const S={username:x.username.trim(),email:x.email.trim(),password:x.password.trim(),mobile_number:x.mobile_number.trim(),full_name:x.full_name.trim(),phone:x.mobile_number.trim(),is_active:x.is_active,services:x.services,experience:x.experience||"0 years",specialties:x.specialties,avatar:x.avatar||"",avatarStorageId:x.avatarStorageId||void 0};await j(S)}l&&l(),u({username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",specialties:[],avatar:"",avatarStorageId:void 0}),r()}catch(S){console.error("Error saving barber:",S),b(S.message||"Failed to save barber")}finally{m(!1)}},M=()=>{u({username:"",email:"",password:"",newPassword:"",mobile_number:"",full_name:"",phone:"",is_active:!0,services:[],experience:"0 years",specialties:[],avatar:"",avatarStorageId:void 0}),b(""),r()};return n?Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:M}),e.jsxs("div",{className:"relative w-full max-w-2xl transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:i?"Edit Barber":"Create New Barber"}),e.jsx("button",{onClick:M,className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[f&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 px-3 py-2 rounded-lg",children:e.jsx("p",{className:"text-sm",children:f})}),!N&&e.jsx(Jo,{size:"sm",message:"Loading services...",className:"py-3"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 uppercase tracking-wide flex items-center",children:[e.jsx(Le,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),i?"Personal Info":"Account & Personal Info"]}),!i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x.username,onChange:E=>A("username",E.target.value),placeholder:"Enter username for login",required:!0,className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",value:x.password,onChange:E=>A("password",E.target.value),placeholder:"Enter password for login",required:!0,className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:x.mobile_number,onChange:E=>A("mobile_number",E.target.value),placeholder:"+63 XXX XXX XXXX",required:!0,className:"w-full h-9 pl-9 pr-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x.full_name,onChange:E=>A("full_name",E.target.value),placeholder:"Enter barber's full name",required:!0,className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:x.email,onChange:E=>A("email",E.target.value),placeholder:"barber@example.com",required:!0,className:"w-full h-9 pl-9 pr-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:x.phone,onChange:E=>A("phone",E.target.value),placeholder:"+63 XXX XXX XXXX",className:"w-full h-9 pl-9 pr-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]})]}),i&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Update Password (Optional)"}),e.jsx("input",{type:"password",value:x.newPassword,onChange:E=>A("newPassword",E.target.value),placeholder:"Enter new password (leave empty to keep current)",className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Leave empty to keep the current password unchanged"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Experience"}),e.jsx("input",{type:"text",value:x.experience,onChange:E=>A("experience",E.target.value),placeholder:"e.g., 5 years",className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Profile Picture"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-[#444444] overflow-hidden bg-[#1A1A1A]",children:L?e.jsx("img",{src:L,alt:"Barber avatar",className:"w-full h-full object-cover"}):x.avatar?e.jsx("img",{src:x.avatar,alt:"Barber avatar",className:"w-full h-full object-cover"}):e.jsx("img",{src:"/img/avatar_default.jpg",alt:"Default avatar",className:"w-full h-full object-cover"})}),p&&e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-full flex items-center justify-center",children:e.jsx(Jo,{size:"xs",variant:"white"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"flex items-center justify-center px-3 py-2 border border-[#FF8C42] text-[#FF8C42] rounded-lg hover:bg-[#FF8C42] hover:text-white transition-colors cursor-pointer",children:[e.jsx(Ja,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-xs font-medium",children:x.avatarStorageId||x.avatar?"Change Photo":"Upload Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",disabled:p})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Max 5MB. JPG, PNG, or GIF files only."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"is_active",checked:x.is_active===!0,onChange:()=>A("is_active",!0),className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42] border-gray-300"}),e.jsx("span",{className:"ml-2 text-gray-300 font-medium",children:"Active"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"is_active",checked:x.is_active===!1,onChange:()=>A("is_active",!1),className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42] border-gray-300"}),e.jsx("span",{className:"ml-2 text-gray-300 font-medium",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-300 uppercase tracking-wide flex items-center",children:[e.jsx(It,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Services & Skills"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Services Offered"}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-[#444444] rounded-lg p-3 bg-[#1A1A1A]",children:N?N.length>0?N.map(E=>e.jsxs("label",{className:"flex items-center py-1 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x.services.includes(E._id),onChange:S=>{const $=E._id;u(P=>({...P,services:S.target.checked?[...P.services,$]:P.services.filter(q=>q!==$)}))},className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42] rounded border-gray-300"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-300",children:[E.name," - ",parseFloat(E.price).toFixed(2)]})]},E._id)):e.jsx("p",{className:"text-sm text-gray-400 p-2",children:"No services available"}):e.jsx("p",{className:"text-sm text-gray-400 p-2",children:"Loading services..."})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Specialties (comma-separated)"}),e.jsx("textarea",{value:x.specialties.join(", "),onChange:E=>{const S=E.target.value.split(",").map($=>$.trim()).filter($=>$);A("specialties",S)},placeholder:"e.g., Fade cuts, Beard styling, Hair coloring",rows:3,className:"w-full px-3 py-2 border border-[#444444] rounded-lg text-sm bg-[#1A1A1A] text-white focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200 resize-none"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#FF8C42]/5 to-[#FF7A2B]/5 border-2 border-[#FF8C42]/20 rounded-xl p-4",children:[e.jsx("h4",{className:"text-gray-200 font-medium text-sm mb-2 uppercase tracking-wide",children:"Barber Preview"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Name:"}),e.jsx("span",{className:"text-gray-200 font-medium text-sm",children:x.full_name||"Barber Name"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Email:"}),e.jsx("span",{className:"text-gray-200 font-medium text-sm",children:x.email||"email@example.com"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Experience:"}),e.jsx("span",{className:"text-gray-200 font-medium text-sm",children:x.experience})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Services:"}),e.jsxs("span",{className:"text-[#FF8C42] font-bold text-sm",children:[x.services.length," selected"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Status:"}),e.jsx("span",{className:`font-bold text-sm ${x.is_active?"text-green-600":"text-red-600"}`,children:x.is_active?"Active":"Inactive"})]})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-[#444444]/50",children:[e.jsx("button",{type:"button",onClick:M,className:"flex-1 px-3 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg text-sm hover:bg-[#555555]/70 transition-all duration-200",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!N,className:"flex-1 px-3 py-2 bg-[#FF8C42] text-white rounded-lg text-sm hover:bg-[#FF8C42]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":i?"Update Barber":"Create Barber"})]})]})})]})]})}),document.body):null},k3=({isOpen:n,onClose:r,barber:l,services:i=[],onRefresh:c,initialView:x="details"})=>{const[u,g]=v.useState(x),[m,f]=v.useState(!1),[b,p]=v.useState(!1),[y,N]=v.useState(""),[j,w]=v.useState({full_name:"",is_active:!0,services:[]}),D=Ee(J.services.barbers.updateBarber),C=fe(J.services.bookings.getBookingsByBarber,l?._id?{barberId:l._id}:"skip"),L=v.useCallback(()=>{l&&w({full_name:l.full_name||"",is_active:l.is_active!==void 0?l.is_active:!0,services:l.services||[]})},[l]);v.useEffect(()=>{n&&l&&(g(x),f(!1),N(""),L())},[n,l,x,L]);const A=v.useCallback(()=>{f(!1),N(""),g("details"),r()},[r]),_=v.useCallback(()=>{f(!0),L()},[L]),O=v.useCallback(()=>{f(!1),N(""),L()},[L]),U=v.useCallback(async()=>{if(!j.full_name.trim()){N("Full name is required");return}p(!0),N("");try{const z={full_name:j.full_name.trim(),is_active:j.is_active,services:j.services};await D({id:l._id,...z}),f(!1),c&&c()}catch(z){N(z.message||"Failed to save barber")}finally{p(!1)}},[j,l?._id,D,c]),M=v.useCallback((z,V)=>{w(Z=>({...Z,[z]:V}))},[]),E=v.useCallback(z=>Object.values(z||{}).filter(V=>V?.available).length,[]),S=v.useCallback(z=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(z||0),[]),$=v.useCallback(z=>{const V={pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",booked:"bg-blue-500/20 text-blue-400 border-blue-500/30",confirmed:"bg-green-500/20 text-green-400 border-green-500/30",completed:"bg-purple-500/20 text-purple-400 border-purple-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"};return V[z]||V.pending},[]);if(!n||!l)return null;const P=E(l.schedule),q=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];return Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:A}),e.jsxs("div",{className:"relative w-full max-w-3xl max-h-[85vh] overflow-hidden transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-[#242424] to-[#2F2F2F] border-b border-[#3A3A3A] p-4 z-10",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-[#2A2A2A] border border-[#3A3A3A] flex items-center justify-center",children:e.jsx(Le,{className:"h-6 w-6 text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:l.full_name}),e.jsxs("p",{className:"text-xs text-gray-400",children:[l.experience||"0 years"," Experience"]}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(nt,{className:"h-3.5 w-3.5 text-[#FF8C42] fill-current"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:l.rating||0}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",l.totalBookings||0," bookings)"]})]})]})]}),e.jsx("button",{onClick:A,className:"w-8 h-8 rounded-lg bg-[#2A2A2A] border border-[#3A3A3A] hover:border-[#FF8C42]/50 hover:bg-[#FF8C42]/10 flex items-center justify-center transition-colors duration-200",title:"Close",children:e.jsx(rt,{className:"h-4 w-4 text-gray-300 hover:text-[#FF8C42]"})})]})}),e.jsx("div",{className:"border-b border-[#3A3A3A] px-4",children:e.jsxs("nav",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>g("details"),className:`py-2 px-2 border-b-2 font-medium text-sm cursor-pointer select-none ${u==="details"?"border-[#FF8C42] text-[#FF8C42]":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-500"} transition-colors`,children:"Details"}),e.jsx("button",{type:"button",onClick:()=>g("bookings"),className:`py-2 px-2 border-b-2 font-medium text-sm cursor-pointer select-none ${u==="bookings"?"border-[#FF8C42] text-[#FF8C42]":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-500"} transition-colors`,children:"Bookings"})]})}),e.jsxs("div",{className:"p-4 max-h-[calc(85vh-160px)] overflow-y-auto",children:[y&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-300",children:y})}),u==="details"?e.jsx("div",{children:m?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:j.full_name,onChange:z=>M("full_name",z.target.value),placeholder:"Enter barber's full name",className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent placeholder:text-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Services"}),e.jsx("div",{className:"max-h-40 overflow-y-auto bg-[#1A1A1A] border border-[#444444] rounded-lg p-2",children:i&&i.length>0?i.map(z=>e.jsxs("label",{className:"flex items-center py-1",children:[e.jsx("input",{type:"checkbox",checked:j.services.includes(z._id),onChange:V=>{const Z=z._id;M("services",V.target.checked?[...j.services,Z]:j.services.filter(B=>B!==Z))},className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42] rounded"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-300",children:[z.name," - ",parseFloat(z.price).toFixed(2)]})]},z._id)):e.jsx("p",{className:"text-sm text-gray-500 p-2",children:"No services available"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"is_active",checked:j.is_active===!0,onChange:()=>M("is_active",!0),className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-300",children:"Active"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"is_active",checked:j.is_active===!1,onChange:()=>M("is_active",!1),className:"h-4 w-4 text-[#FF8C42] focus:ring-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-sm text-gray-300",children:"Inactive"})]})]})]})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:l.email||"N/A"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:l.phone||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Specialties"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.specialties?.map((z,V)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-[#FF8C42]/10 text-[#FF8C42] border border-[#FF8C42]/30",children:z},V))||e.jsx("span",{className:"text-sm text-gray-500",children:"No specialties listed"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Performance"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-xl p-4 bg-gradient-to-br from-[#1E1E1E] to-[#141414] border border-[#2F2F2F]",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Monthly Revenue"}),e.jsx("p",{className:"text-xl font-extrabold text-[#FF8C42] mt-1",children:S(l.monthlyRevenue)})]}),e.jsxs("div",{className:"rounded-xl p-4 bg-gradient-to-br from-[#1E1E1E] to-[#141414] border border-[#2F2F2F]",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Total Bookings"}),e.jsx("p",{className:"text-xl font-extrabold text-green-400 mt-1",children:l.totalBookings||0})]}),e.jsxs("div",{className:"rounded-xl p-4 bg-gradient-to-br from-[#1E1E1E] to-[#141414] border border-[#2F2F2F]",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Working Days"}),e.jsxs("p",{className:"text-xl font-extrabold text-purple-400 mt-1",children:[P,"/week"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Work Schedule"}),e.jsx("div",{className:"space-y-2",children:q.map(z=>{const V=l.schedule?.[z]||{available:!1};return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm capitalize font-medium text-gray-300",children:z}),V.available?e.jsxs("span",{className:"inline-flex items-center text-sm font-medium text-green-400 bg-green-500/10 border border-green-500/20 px-2 py-0.5 rounded-md",children:[V.start,"  ",V.end]}):e.jsx("span",{className:"inline-flex items-center text-sm font-medium text-red-400 bg-red-500/10 border border-red-500/20 px-2 py-0.5 rounded-md",children:"Off"})]},z)})})]})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-5 w-5 text-[#FF8C42]"}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Booking History"})]}),C&&C.length>0&&e.jsxs("span",{className:"text-sm text-gray-300",children:[C.length," total bookings"]})]}),C===void 0?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Jo,{size:"md",message:"Loading bookings..."})}):C&&C.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:C.map(z=>e.jsxs("div",{className:"bg-[#171717] border border-[#2C2C2C] rounded-xl p-4 hover:border-[#FF8C42]/40 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-white",children:z.customer_name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${$(z.status)}`,children:z.status.charAt(0).toUpperCase()+z.status.slice(1)})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:z.service_name}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsx("span",{children:z.formattedDate})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(jt,{className:"h-3 w-3"}),e.jsx("span",{children:z.formattedTime})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-[#FF8C42]",children:["",z.service_price]}),e.jsx("p",{className:"text-xs text-gray-400",children:z.booking_code})]})]}),z.customer_phone&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 mt-2",children:[e.jsx(Is,{className:"h-3 w-3"}),e.jsx("span",{children:z.customer_phone})]}),z.notes&&e.jsxs("div",{className:"mt-2 p-2 bg-[#222222] border border-[#333333] rounded-lg text-xs text-gray-400",children:[e.jsx("strong",{children:"Notes:"})," ",z.notes]})]},z._id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(op,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No bookings found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"No bookings available for this barber yet."})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-[#3A3A3A] flex justify-between items-center bg-[#232323]",children:[e.jsx("div",{className:"flex space-x-3",children:u==="details"&&!m&&e.jsxs("button",{onClick:_,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#ff7a22] transition-colors",children:[e.jsx(Ba,{className:"h-4 w-4"}),e.jsx("span",{children:"Edit"})]})}),e.jsx("div",{className:"flex space-x-3",children:m?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:O,className:"px-4 py-2 border border-[#4A4A4A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:U,disabled:b,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#ff7a22] disabled:opacity-50 transition-colors",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx("span",{children:b?"Saving...":"Save"})]})]}):e.jsx("button",{onClick:A,className:"px-4 py-2 border border-[#4A4A4A] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-colors",children:"Close"})})]})]})]})}),document.body)},D3=({barber:n,className:r="w-12 h-12"})=>{const[l,i]=v.useState(!1),x=fe(J.services.barbers.getImageUrl,{storageId:n.avatarStorageId})||n.avatarUrl||"/img/avatar_default.jpg";return l||!x?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 rounded-full ${r}`,children:e.jsx(Le,{className:"w-6 h-6 text-gray-500"})}):e.jsx("img",{src:x,alt:`${n.full_name} avatar`,className:`${r} rounded-full object-cover`,onError:()=>i(!0)})},S3=({barbers:n=[],onRefresh:r})=>{const[l,i]=v.useState(""),[c,x]=v.useState("all"),[u,g]=v.useState("name"),[m,f]=v.useState(null),[b,p]=v.useState("details"),[y,N]=v.useState(!1),[j,w]=v.useState(null),[D,C]=v.useState(null),[L,A]=v.useState(!1),[_,O]=v.useState(""),[U,M]=v.useState(!1),E=fe(J.services.services.getAllServices);fe(J.services.bookings.getAllBookings),Ee(J.services.barbers.createBarber);const S=Ee(J.services.barbers.updateBarber),$=Ee(J.services.barbers.deleteBarber),P=Ee(J.services.barbers.generateUploadUrl),q=async Y=>{M(!0);try{const ge=await P(),pe=await fetch(ge,{method:"POST",headers:{"Content-Type":Y.type},body:Y});if(!pe.ok)throw new Error("Failed to upload image");const{storageId:ye}=await pe.json();return ye}catch(ge){throw console.error("Image upload failed:",ge),ge}finally{M(!1)}},z=async(Y,ge)=>{const pe=Y.target.files[0];if(pe){if(!pe.type.startsWith("image/")){alert("Please select an image file");return}if(pe.size>5*1024*1024){alert("File size must be less than 5MB");return}try{const ye=await q(pe);await S({id:ge,avatarStorageId:ye}),r()}catch{alert("Failed to upload image. Please try again.")}}},V=Y=>Y?{label:"Active",icon:Zo,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"}:{label:"Inactive",icon:Vf,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"},Z=n.filter(Y=>{const ge=Y.full_name?.toLowerCase().includes(l.toLowerCase())||Y.email?.toLowerCase().includes(l.toLowerCase())||Y.specialties?.some(ye=>ye.toLowerCase().includes(l.toLowerCase()));let pe=!0;return c==="active"?pe=Y.is_active===!0:c==="inactive"&&(pe=Y.is_active===!1),ge&&pe}).sort((Y,ge)=>u==="name"?(Y.full_name||"").localeCompare(ge.full_name||""):u==="rating"?parseFloat(ge.rating||0)-parseFloat(Y.rating||0):u==="bookings"?(ge.totalBookings||0)-(Y.totalBookings||0):(Y._id||"").localeCompare(ge._id||"")),B={total:n.length,active:n.filter(Y=>Y.is_active===!0).length,inactive:n.filter(Y=>Y.is_active===!1).length,avgRating:n.length?n.reduce((Y,ge)=>Y+(ge.rating||0),0)/n.length:0},k=Y=>Object.values(Y||{}).filter(ge=>ge.available).length,I=()=>{w(null),N(!0)},se=Y=>{w(Y),N(!0)},T=()=>{N(!1),w(null)},H=()=>{N(!1),w(null),r()},oe=async Y=>{A(!0);try{await $({id:Y._id}),C(null),r()}catch(ge){O(ge.message||"Failed to delete barber")}finally{A(!1)}},W=Y=>{f(Y),p("details")},le=Y=>{f(Y),p("bookings")},K=({barber:Y,onClose:ge,onConfirm:pe})=>e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-[99997] p-2 sm:p-4 transition-all duration-300 ease-in-out animate-in fade-in-0",onClick:ye=>ye.target===ye.currentTarget&&ge(),children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-4 sm:p-6 shadow-2xl transform transition-all duration-300 ease-out animate-in slide-in-from-bottom-4 fade-in-0 zoom-in-95 mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Ss,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Barber"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:Y.full_name}),"? This will permanently remove the barber from the system."]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-reverse space-y-3 sm:space-y-0 sm:space-x-3",children:[e.jsx("button",{onClick:ge,className:"w-full sm:w-auto px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:pe,disabled:L,className:"w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors",children:L?"Deleting...":"Delete"})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:B.total})]}),e.jsx(Le,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:B.active})]}),e.jsx(Zo,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:B.inactive})]}),e.jsx(Vf,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Avg Rating"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:B.avgRating.toFixed(1)})]}),e.jsx(nt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search barbers...",value:l,onChange:Y=>i(Y.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:c,onChange:Y=>x(Y.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("select",{value:u,onChange:Y=>g(Y.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"rating",children:"Sort by Rating"}),e.jsx("option",{value:"bookings",children:"Sort by Bookings"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(an,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:I,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Barber"})]})]})]})}),e.jsx(B3,{isOpen:y,onClose:T,onSubmit:H,editingBarber:j}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Barber"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Schedule"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:Z.map(Y=>{const ge=V(Y.is_active),pe=ge.icon,ye=k(Y.schedule||{});return e.jsxs("tr",{className:"hover:bg-[#333333]/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative flex-shrink-0 h-10 w-10",children:[e.jsx(D3,{barber:Y,className:"h-10 w-10 border-2 border-[#FF8C42]/50"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer group",children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(Ja,{className:"h-4 w-4 text-white"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Ae=>z(Ae,Y._id),className:"hidden",disabled:U})]})}),U&&e.jsx("div",{className:"absolute inset-0 bg-black/70 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:Y.full_name}),e.jsx("div",{className:"text-sm text-gray-400",children:Y.experience}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(nt,{className:"h-3 w-3 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-xs text-gray-400",children:Y.rating||0})]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:Y.email}),e.jsx("div",{className:"text-sm text-gray-400",children:Y.phone||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Y.specialties?.length||0," specialties"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-white",children:[ye,"/week"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Working days"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ge.bg} ${ge.text}`,children:[e.jsx(pe,{className:`h-3 w-3 mr-1 ${ge.iconColor}`}),ge.label]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>W(Y),className:"text-[#FF8C42] hover:text-[#FF7A2B] p-1 rounded",title:"View Details",children:e.jsx(qo,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>le(Y),className:"text-blue-400 hover:text-blue-300 p-1 rounded",title:"View Bookings",children:e.jsx(op,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>se(Y),className:"text-gray-400 hover:text-gray-300 p-1 rounded",title:"Edit",children:e.jsx(Ba,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>C(Y),className:"text-red-400 hover:text-red-300 p-1 rounded",title:"Delete",children:e.jsx(Ss,{className:"h-4 w-4"})})]})})]},Y._id)})})]})})}),Z.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(It,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No barbers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l||c!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new barber profile."})]}),m&&e.jsx(k3,{isOpen:!!m,onClose:()=>{f(null),p("details")},barber:m,services:E,onRefresh:r,initialView:b}),D&&e.jsx(K,{barber:D,onClose:()=>C(null),onConfirm:()=>oe(D)})]})};function _3(){const{user:n}=Tt(),[r,l]=v.useState(""),[i,c]=v.useState("all"),[x,u]=v.useState(!1),[g,m]=v.useState({username:"",email:"",password:"",mobile_number:"",address:"",role:"staff"}),[f,b]=v.useState(!1),[p,y]=v.useState(""),N=n?.branch_id?fe(J.services.auth.getUsersByBranch,{branch_id:n.branch_id})||[]:[],w=(fe(J.services.branches.getAllBranches)||[]).find(P=>P._id===n?.branch_id),D=Ee(J.services.auth.createUser),C=N.filter(P=>P.role==="staff"||P.role==="barber"),L=P=>{switch(P){case"staff":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"};case"barber":return{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}}},A=C.filter(P=>{const q=P.username.toLowerCase().includes(r.toLowerCase())||P.email.toLowerCase().includes(r.toLowerCase()),z=i==="all"||P.role===i;return q&&z}).sort((P,q)=>new Date(q.createdAt)-new Date(P.createdAt)),_={total:C.length,staff:C.filter(P=>P.role==="staff").length,barbers:C.filter(P=>P.role==="barber").length},O=()=>{m({username:"",email:"",password:"",mobile_number:"",address:"",role:"staff"}),y("")},U=()=>{O(),u(!0)},M=async P=>{if(P.preventDefault(),!g.username.trim()||!g.email.trim()||!g.password.trim()){y("Username, email, and password are required");return}if(!n?.branch_id){y("Branch information is missing");return}b(!0);try{await D({...g,branch_id:n.branch_id}),u(!1),O()}catch(q){console.error("Error creating user:",q),y(q.message||"Failed to create user")}finally{b(!1)}},E=P=>{const{name:q,value:z}=P.target;m(V=>({...V,[q]:z}))},S=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),$=({isOpen:P,onClose:q,title:z,onSubmit:V})=>P?Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:q}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10000] border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:z}),e.jsx("button",{onClick:q,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(rt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[p&&e.jsxs("div",{className:"mb-4 p-3 bg-red-400/20 border border-red-400/30 rounded-lg flex items-center space-x-2",children:[e.jsx(at,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-400",children:p})]}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username *"}),e.jsx("input",{type:"text",name:"username",value:g.username,onChange:E,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role *"}),e.jsxs("select",{name:"role",value:g.role,onChange:E,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",required:!0,children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"barber",children:"Barber"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:g.email,onChange:E,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password *"}),e.jsx("input",{type:"password",name:"password",value:g.password,onChange:E,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter password",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),e.jsx("input",{type:"tel",name:"mobile_number",value:g.mobile_number,onChange:E,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter mobile number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Address"}),e.jsx("textarea",{name:"address",value:g.address,onChange:E,rows:"2",className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter address"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:f,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF7A2B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx("span",{children:f?"Creating...":"Create User"})]})]})]})]})]})]})}),document.body):null;return w?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(cs,{className:"h-6 w-6 text-[#FF8C42]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:w.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Branch Code: ",w.branch_code,"  Managing branch staff"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:_.total})]}),e.jsx(gt,{className:"h-6 w-6 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Staff"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:_.staff})]}),e.jsx(Le,{className:"h-6 w-6 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Barbers"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:_.barbers})]}),e.jsx(Le,{className:"h-6 w-6 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:r,onChange:P=>l(P.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:i,onChange:P=>c(P.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"barber",children:"Barber"})]})]})]}),e.jsxs("button",{onClick:U,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF7A2B] transition-colors text-sm",children:[e.jsx(ua,{className:"h-4 w-4"}),e.jsx("span",{children:"Add User"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:A.map(P=>{const q=L(P.role);return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(Le,{className:"h-5 w-5 text-[#FF8C42]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:P.username}),e.jsx("div",{className:"text-sm text-gray-400",children:P.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${q.bg} ${q.text}`,children:P.role.replace("_"," ").toUpperCase()})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:P.mobile_number||"N/A"}),P.address&&e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:P.address})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:S(P.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:e.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:e.jsx(Ba,{className:"h-4 w-4"})})})})]},P._id)})})]})}),A.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Le,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:r||i!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding staff or barbers to this branch."})]})]}),e.jsx($,{isOpen:x,onClose:()=>{u(!1),O()},title:"Add User to Branch",onSubmit:M})]}):e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading branch users..."})]})}const T3=({customers:n=[],onRefresh:r,onAddCustomer:l})=>{const[i,c]=v.useState(""),[x,u]=v.useState("all"),[g,m]=v.useState("name"),f=y=>{switch(y.status||"active"){case"active":return{status:"active",label:"Active",bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"};case"new":return{status:"new",label:"New",bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",iconColor:"text-blue-500"};default:return{status:"inactive",label:"Inactive",bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"}}},b=n.filter(y=>{const N=(y.name||y.username||"").toLowerCase().includes(i.toLowerCase())||(y.email||"").toLowerCase().includes(i.toLowerCase())||(y.phone||y.mobile_number||"").includes(i),j=x==="all"||f(y).status===x;return N&&j}).sort((y,N)=>g==="name"?(y.name||y.username||"").localeCompare(N.name||N.username||""):g==="email"?(y.email||"").localeCompare(N.email||""):g==="joined"?new Date(N.joinedDate||0)-new Date(y.joinedDate||0):g==="bookings"?(N.totalBookings||0)-(y.totalBookings||0):y.id-N.id),p={total:n.length,active:n.filter(y=>(y.status||"active")==="active").length,new:n.filter(y=>(y.status||"active")==="new").length,inactive:n.filter(y=>(y.status||"active")==="inactive").length,totalSpent:n.reduce((y,N)=>y+(N.totalSpent||0),0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:p.total})]}),e.jsx(Le,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:p.active})]}),e.jsx(Le,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"New"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:p.new})]}),e.jsx(Le,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:p.inactive})]}),e.jsx(Le,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-[#FF8C42]",children:["",p.totalSpent.toFixed(0)]})]}),e.jsx(Re,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search customers...",value:i,onChange:y=>c(y.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:x,onChange:y=>u(y.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("select",{value:g,onChange:y=>m(y.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"email",children:"Sort by Email"}),e.jsx("option",{value:"joined",children:"Sort by Joined Date"}),e.jsx("option",{value:"bookings",children:"Sort by Bookings"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:[e.jsx(an,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:l,className:"flex items-center space-x-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Customer"})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A] border-b border-[#444444]/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{children:"Customer"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{children:"Contact"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{children:"Birthday"})]})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:b.map((y,N)=>{const j=f(y);return e.jsxs("tr",{className:`hover:bg-[#333333]/50 transition-colors ${N%2===0?"bg-[#2A2A2A]":"bg-[#333333]/30"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(Le,{className:"h-5 w-5 text-[#FF8C42]"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-white truncate",children:y.name||y.username}),e.jsxs("div",{className:"text-sm text-gray-400",children:["@",y.username,y.nickname&&e.jsx("span",{className:"ml-2 text-xs bg-[#444444] text-gray-300 px-2 py-0.5 rounded-full",children:y.nickname})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",y.id]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-sm text-white truncate max-w-48",title:y.email,children:y.email||"No email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{className:"h-3 w-3 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-400",children:y.phone||y.mobile_number||"No phone"})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:y.formattedBirthday||y.birthday||"Not provided"}),e.jsxs("div",{className:"text-xs text-gray-400 capitalize",children:["Role: ",y.role||"client"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:`inline-flex items-center px-2.5 py-1.5 rounded-full text-xs font-medium ${j.bg} ${j.text} ${j.border} border`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${j.iconColor.replace("text-","bg-")}`}),j.label]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs("button",{className:"inline-flex items-center px-3 py-1.5 bg-[#FF8C42]/20 text-[#FF8C42] rounded-lg hover:bg-[#FF8C42]/30 transition-colors text-xs font-medium",children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs("button",{className:"inline-flex items-center px-3 py-1.5 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-xs font-medium",children:[e.jsx(Ft,{className:"h-3 w-3 mr-1"}),"Contact"]})]})})]},y.id)})})]})})}),b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Le,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No customers found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:i||x!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding a new customer."})]})]})},M3=({onRefresh:n,user:r})=>{const[l,i]=v.useState("week"),[c,x]=v.useState("revenue"),[u,g]=v.useState(!1),[m,f]=v.useState(null),b=r?.role==="super_admin"?fe(J.services.bookings.getAllBookings):r?.branch_id?fe(J.services.bookings.getBookingsByBranch,{branch_id:r.branch_id}):[],p=r?.role==="super_admin"?fe(J.services.services.getAllServices):r?.branch_id?fe(J.services.services.getServicesByBranch,{branch_id:r.branch_id}):[],y=fe(J.services.products.getAllProducts),N=r?.role==="super_admin"?fe(J.services.transactions.getAllTransactions):r?.branch_id?fe(J.services.transactions.getTransactionsByBranch,{branch_id:r.branch_id}):[],j=r?.role==="super_admin"?fe(J.services.vouchers.getAllVouchers):r?.branch_id?fe(J.services.vouchers.getVouchersByBranch,{branch_id:r.branch_id}):[],w=v.useMemo(()=>{if(!b||!p||!y||!N||!j)return null;try{const M=Date.now(),E=M-10080*60*1e3,S=M-336*60*60*1e3,$=b.filter(ye=>ye.createdAt>=E),P=b.filter(ye=>ye.createdAt>=S&&ye.createdAt<E),q=N.filter(ye=>ye.createdAt>=E),z=N.filter(ye=>ye.createdAt>=S&&ye.createdAt<E),V=j.filter(ye=>ye.redeemed_at&&ye.redeemed_at>=E),Z=j.filter(ye=>ye.redeemed_at&&ye.redeemed_at>=S&&ye.redeemed_at<E),B=q.reduce((ye,Ae)=>ye+(Ae.total_amount||0),0),k=z.reduce((ye,Ae)=>ye+(Ae.total_amount||0),0),I=k>0?(B-k)/k*100:0,se=new Set($.map(ye=>ye.customer)).size,T=new Set(P.map(ye=>ye.customer)).size,H=T>0?(se-T)/T*100:0,oe=$.length,W=P.length,le=W>0?(oe-W)/W*100:0,K=V.length,Y=Z.length,ge=Y>0?(K-Y)/Y*100:0,pe=(ye,Ae)=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((Ge,Ze)=>{const Ye=E+Ze*24*60*60*1e3,Xe=Ye+1440*60*1e3,pt=ye.filter(it=>it.createdAt>=Ye&&it.createdAt<Xe);return{period:Ge,value:Ae(pt)}});return{revenue:{current:B,previous:k,change:Math.abs(I),trend:I>=0?"up":"down",chartData:pe(q,ye=>ye.reduce((Ae,Te)=>Ae+(Te.total_amount||0),0))},customers:{current:se,previous:T,change:Math.abs(H),trend:H>=0?"up":"down",chartData:pe($,ye=>new Set(ye.map(Ae=>Ae.customer)).size)},bookings:{current:oe,previous:W,change:Math.abs(le),trend:le>=0?"up":"down",chartData:pe($,ye=>ye.length)},vouchers:{current:K,previous:Y,change:Math.abs(ge),trend:ge>=0?"up":"down",chartData:pe(V,ye=>ye.length)},services:{current:p?.filter(ye=>ye.is_active).length||0,previous:p?.length||0,change:0,trend:"up",chartData:p?.slice(0,7).map((ye,Ae)=>({period:ye.name.substring(0,8),value:ye.price||0}))||[]},products:{current:y?.filter(ye=>ye.status==="active").length||0,previous:y?.length||0,change:0,trend:"up",chartData:y?.slice(0,7).map((ye,Ae)=>({period:ye.name.substring(0,8),value:ye.price||0}))||[]}}}catch(M){return console.error("Error calculating report data:",M),f("Failed to calculate report data"),null}},[b,p,y,N,j,l]);v.useEffect(()=>{w&&n&&g(!1)},[w,n]);const D=()=>{g(!0),f(null),n?.()},C=[{id:"revenue",label:"Revenue",icon:Ut,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"},{id:"customers",label:"Customers",icon:gt,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},{id:"bookings",label:"Bookings",icon:Re,color:"text-purple-600",bgColor:"bg-purple-50",borderColor:"border-purple-200"},{id:"vouchers",label:"Vouchers",icon:kt,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"},{id:"services",label:"Services",icon:It,color:"text-indigo-600",bgColor:"bg-indigo-50",borderColor:"border-indigo-200"},{id:"products",label:"Products",icon:aa,color:"text-pink-600",bgColor:"bg-pink-50",borderColor:"border-pink-200"}],L=[{id:"day",label:"Today"},{id:"week",label:"This Week"},{id:"month",label:"This Month"},{id:"quarter",label:"This Quarter"},{id:"year",label:"This Year"}],A=M=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(M),_=M=>new Intl.NumberFormat("en-US").format(M);if(!w)return m?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-400 mb-2",children:" Error Loading Data"}),e.jsx("p",{className:"text-gray-300",children:m}),e.jsx("button",{onClick:()=>{f(null),n?.()},className:"mt-4 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200",children:"Retry"})]})})}):e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-[#FF8C42] border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading report data..."})]})})});const O=w[c],U=O?.chartData?Math.max(...O.chartData.map(M=>M.value)):1;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-300 mt-1",children:"Track your business performance and insights"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:D,disabled:u,className:"flex items-center space-x-2 px-4 py-2 bg-[#1A1A1A] border border-[#444444] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(xs,{className:`h-4 w-4 ${u?"animate-spin":""}`}),e.jsx("span",{children:u?"Loading...":"Refresh"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 text-sm",children:[e.jsx(Xa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Period:"})]}),e.jsx("select",{value:l,onChange:M=>i(M.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:L.map(M=>e.jsx("option",{value:M.id,className:"bg-[#1A1A1A] text-white",children:M.label},M.id))})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:C.map(M=>{const E=M.icon,S=w[M.id],$=c===M.id;return e.jsxs("button",{onClick:()=>x(M.id),className:`p-6 rounded-lg border transition-all duration-200 text-left ${$?"bg-gradient-to-br from-[#2A2A2A] to-[#333333] border-[#FF8C42] shadow-lg transform scale-105":"bg-gradient-to-br from-[#2A2A2A] to-[#333333] border-[#444444]/50 hover:border-[#FF8C42]/50 hover:shadow-lg"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${$?"bg-[#FF8C42]/20":"bg-[#1A1A1A]"}`,children:e.jsx(E,{className:`h-6 w-6 ${$?"text-[#FF8C42]":"text-[#FF8C42] opacity-70"}`})}),S.trend==="up"?e.jsx(Fs,{className:"h-4 w-4 text-green-400"}):e.jsx(fp,{className:"h-4 w-4 text-red-400"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:M.label}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:M.id==="revenue"?A(S.current):_(S.current)}),e.jsxs("p",{className:`text-xs font-medium ${S.trend==="up"?"text-green-400":"text-red-400"}`,children:[S.trend==="up"?"+":"-",S.change,"% from last ",l]})]})]},M.id)})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[C.find(M=>M.id===c)?.label," Trend"]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Performance over the selected period"})]})}),e.jsx("div",{className:"space-y-4",children:O.chartData.map((M,E)=>{const S=M.value/U*100,$=c==="services"||c==="products";return e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`${$?"w-20":"w-12"} text-sm font-medium text-gray-300 truncate`,title:M.period,children:M.period}),e.jsxs("div",{className:"flex-1 bg-[#1A1A1A] rounded-full h-6 relative overflow-hidden",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-[#FF8C42] to-[#FF8C42]/80 rounded-full transition-all duration-1000 ease-out",style:{width:`${S}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-end pr-3",children:e.jsx("span",{className:"text-xs font-medium text-white",children:c==="revenue"||$?A(M.value):_(M.value)})})]})]},E)})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[C.find(M=>M.id===c)?.label," Detailed Data"]}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Comprehensive breakdown of ",c," metrics"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#444444]/50",children:[e.jsx("th",{className:"text-left py-4 px-4 font-medium text-gray-300",children:c==="services"||c==="products"?"Item":"Period"}),e.jsx("th",{className:"text-right py-4 px-4 font-medium text-gray-300",children:c==="revenue"||c==="services"||c==="products"?"Amount":"Count"}),e.jsx("th",{className:"text-center py-4 px-4 font-medium text-gray-300",children:"Performance"})]})}),e.jsx("tbody",{children:O.chartData.map((M,E)=>{const S=M.value/U*100,$=S>80,P=S>50&&S<=80;return e.jsxs("tr",{className:"border-b border-[#444444]/20 hover:bg-[#1A1A1A]/30 transition-colors",children:[e.jsx("td",{className:"py-4 px-4 text-white font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:M.period}),$&&e.jsx("span",{className:"text-xs text-green-400",children:""})]})}),e.jsx("td",{className:"py-4 px-4 text-right",children:e.jsx("span",{className:"text-[#FF8C42] font-bold text-lg",children:c==="revenue"||c==="services"||c==="products"?A(M.value):_(M.value)})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:`w-16 h-2 rounded-full ${$?"bg-green-500":P?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.max(S*.8,20)}px`}}),e.jsxs("span",{className:"text-xs text-gray-400 min-w-[40px]",children:[S.toFixed(0),"%"]})]})})]},E)})})]})}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-6 justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Best Performer"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:(()=>{const M=O.chartData.reduce((E,S)=>S.value>E.value?S:E);return`${M.period} (${c==="revenue"||c==="services"||c==="products"?A(M.value):_(M.value)})`})()})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-[#FF8C42] rounded-full"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Average"}),e.jsx("p",{className:"text-sm font-semibold text-white",children:(()=>{const M=O.chartData.reduce((E,S)=>E+S.value,0)/O.chartData.length;return c==="revenue"||c==="services"||c==="products"?A(M):_(Math.round(M))})()})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${O.trend==="up"?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Trend"}),e.jsxs("p",{className:"text-sm font-semibold text-white",children:[O.trend==="up"?"Growing":"Declining"," (",O.change.toFixed(1),"%)"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-[#FF8C42]/20 rounded-lg",children:e.jsx(ks,{className:"h-5 w-5 text-[#FF8C42]"})}),e.jsx("h4",{className:"font-semibold text-white",children:"Average Daily"})]}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:c==="revenue"||c==="services"||c==="products"?A(Math.round(O.current/7)):_(Math.round(O.current/7))}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:c==="services"||c==="products"?`Average price per ${c.slice(0,-1)}`:`Per day this ${l}`})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(Fs,{className:"h-5 w-5 text-green-400"})}),e.jsx("h4",{className:"font-semibold text-white",children:"Best Day"})]}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:(()=>{const M=O.chartData.reduce((E,S)=>S.value>E.value?S:E);return c==="revenue"||c==="services"||c==="products"?A(M.value):_(M.value)})()}),e.jsx("p",{className:"text-sm text-gray-300 mt-1",children:c==="services"||c==="products"?"Highest priced item":O.chartData.reduce((M,E)=>E.value>M.value?E:M).period})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-[#FF8C42]/20 rounded-lg",children:e.jsx(Fs,{className:"h-5 w-5 text-[#FF8C42]"})}),e.jsx("h4",{className:"font-semibold text-white",children:"Growth Rate"})]}),e.jsxs("p",{className:"text-2xl font-bold text-[#FF8C42]",children:["+",O.change,"%"]}),e.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Compared to last ",l]})]})]})]})},R3=({onRefresh:n,user:r})=>{const[l,i]=v.useState(""),[c,x]=v.useState("all"),[u,g]=v.useState(!1),[m,f]=v.useState(null),[b,p]=v.useState({title:"",description:"",date:"",time:"",location:"",maxAttendees:"",price:"",category:"workshop",status:"upcoming"}),[y,N]=v.useState({}),[j,w]=v.useState(!1),[D,C]=v.useState(""),L=r?.role==="super_admin"?fe(J.services.events.getAllEvents):r?.branch_id?fe(J.services.events.getEventsByBranch,{branch_id:r.branch_id}):[],A=Ee(J.services.events.createEvent),_=Ee(J.services.events.updateEvent),O=Ee(J.services.events.deleteEvent),U=!L,M=()=>{const B={};if(b.title.trim()||(B.title="Event title is required"),b.description.trim()||(B.description="Description is required"),b.date||(B.date="Date is required"),b.time||(B.time="Time is required"),b.location.trim()||(B.location="Location is required"),(!b.maxAttendees||b.maxAttendees<1)&&(B.maxAttendees="Valid max attendees required"),b.price<0&&(B.price="Price cannot be negative"),b.date){const k=new Date(b.date),I=new Date;I.setHours(0,0,0,0),k<I&&(B.date="Event date cannot be in the past")}return N(B),Object.keys(B).length===0},E=async B=>{if(B.preventDefault(),!!M()){w(!0),C("");try{const k={title:b.title.trim(),description:b.description.trim(),date:b.date,time:b.time,location:b.location.trim(),maxAttendees:parseInt(b.maxAttendees),price:parseFloat(b.price)||0,category:b.category,status:b.status,branch_id:r.branch_id};m?await _({id:m._id,...k}):await A(k),P(),n?.()}catch(k){console.error("Error saving event:",k),C(k.message||"Failed to save event")}finally{w(!1)}}},S=B=>{p({title:B.title,description:B.description,date:B.date,time:B.time,location:B.location,maxAttendees:B.maxAttendees.toString(),price:B.price.toString(),category:B.category,status:B.status}),f(B),g(!0),C("")},$=async B=>{if(confirm("Are you sure you want to delete this event?"))try{await O({id:B}),n?.()}catch(k){console.error("Error deleting event:",k),C(k.message||"Failed to delete event")}},P=()=>{g(!1),f(null),p({title:"",description:"",date:"",time:"",location:"",maxAttendees:"",price:"",category:"workshop",status:"upcoming"}),N({}),C("")},q=B=>{switch(B){case"upcoming":return{label:"Upcoming",bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"};case"ongoing":return{label:"Ongoing",bg:"bg-green-50",text:"text-green-700",border:"border-green-200"};case"completed":return{label:"Completed",bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"};case"cancelled":return{label:"Cancelled",bg:"bg-red-50",text:"text-red-700",border:"border-red-200"};default:return{label:"Unknown",bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200"}}},z=B=>{switch(B){case"workshop":return"";case"celebration":return"";case"training":return"";case"promotion":return"";default:return""}},V=L?L.filter(B=>{const k=B.title.toLowerCase().includes(l.toLowerCase())||B.description.toLowerCase().includes(l.toLowerCase()),I=c==="all"||B.status===c;return k&&I}):[],Z={total:L?.length||0,upcoming:L?.filter(B=>B.status==="upcoming").length||0,completed:L?.filter(B=>B.status==="completed").length||0,totalAttendees:L?.reduce((B,k)=>B+k.currentAttendees,0)||0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Events Management"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Organize and manage barbershop events and workshops"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>n?.(),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"New Event"})]})]})]}),D&&e.jsx(ui,{error:D,onClose:()=>C(""),variant:"inline"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Events"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:Z.total})]}),e.jsx(Re,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:Z.upcoming})]}),e.jsx(jt,{className:"h-8 w-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:Z.completed})]}),e.jsx(Re,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Attendees"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:Z.totalAttendees})]}),e.jsx(gt,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:l,onChange:B=>i(B.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:c,onChange:B=>x(B.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})})}),U?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(B=>e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-[#444444] rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-3 bg-[#444444] rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-[#444444] rounded w-2/3 mb-4"}),e.jsx("div",{className:"h-8 bg-[#444444] rounded w-1/3"})]})},B))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(B=>{const k=q(B.status),I=B.currentAttendees/B.maxAttendees*100;return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm hover:shadow-md transition-shadow p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:z(B.category)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-lg",children:B.title}),e.jsx("p",{className:"text-sm text-gray-400 capitalize",children:B.category})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${k.bg} ${k.text} ${k.border}`,children:k.label})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-2",children:B.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),new Date(B.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),new Date(`1970-01-01T${B.time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(fi,{className:"h-4 w-4 mr-2"}),B.location]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(gt,{className:"h-4 w-4 mr-2"}),B.currentAttendees,"/",B.maxAttendees," attendees"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[e.jsx("span",{children:"Attendance"}),e.jsxs("span",{children:[Math.round(I),"%"]})]}),e.jsx("div",{className:"w-full bg-[#444444] rounded-full h-2",children:e.jsx("div",{className:"bg-[#FF8C42] h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(I,100)}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-lg font-bold text-[#FF8C42]",children:B.price===0?"Free":`${B.price.toLocaleString()}`}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>S(B),className:"p-2 text-gray-400 hover:text-[#FF8C42] hover:bg-[#FF8C42]/20 rounded-lg transition-colors",title:"Edit Event",children:e.jsx(Ba,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$(B._id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/20 rounded-lg transition-colors",title:"Delete Event",children:e.jsx(Ss,{className:"h-4 w-4"})})]})]})]},B._id)})}),V.length===0&&!U&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Re,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No events found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l||c!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first event."}),!l&&c==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700",children:[e.jsx(Bt,{className:"-ml-1 mr-2 h-4 w-4"}),"New Event"]})})]}),e.jsx(ds,{isOpen:u,onClose:P,title:m?"Edit Event":"Create New Event",size:"lg",children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[D&&e.jsx(ui,{error:D,onClose:()=>C(""),variant:"compact"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),e.jsx("input",{type:"text",value:b.title,onChange:B=>p(k=>({...k,title:B.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${y.title?"border-red-300":"border-gray-300"}`,placeholder:"Enter event title"}),y.title&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),y.title]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:b.description,onChange:B=>p(k=>({...k,description:B.target.value})),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${y.description?"border-red-300":"border-gray-300"}`,placeholder:"Describe the event"}),y.description&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),y.description]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:b.date,onChange:B=>p(k=>({...k,date:B.target.value})),min:new Date().toISOString().split("T")[0],className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${y.date?"border-red-300":"border-gray-300"}`}),y.date&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),y.date]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),e.jsx("input",{type:"time",value:b.time,onChange:B=>p(k=>({...k,time:B.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${y.time?"border-red-300":"border-gray-300"}`}),y.time&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),y.time]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),e.jsx("input",{type:"text",value:b.location,onChange:B=>p(k=>({...k,location:B.target.value})),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${y.location?"border-red-300":"border-gray-300"}`,placeholder:"Event location"}),y.location&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),y.location]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attendees *"}),e.jsx("input",{type:"number",value:b.maxAttendees,onChange:B=>p(k=>({...k,maxAttendees:B.target.value})),min:"1",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${y.maxAttendees?"border-red-300":"border-gray-300"}`,placeholder:"Maximum attendees"}),y.maxAttendees&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),y.maxAttendees]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price ()"}),e.jsx("input",{type:"number",value:b.price,onChange:B=>p(k=>({...k,price:B.target.value})),min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent ${y.price?"border-red-300":"border-gray-300"}`,placeholder:"0.00 (Free event)"}),y.price&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),y.price]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:b.category,onChange:B=>p(k=>({...k,category:B.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"workshop",children:"Workshop"}),e.jsx("option",{value:"celebration",children:"Celebration"}),e.jsx("option",{value:"training",children:"Training"}),e.jsx("option",{value:"promotion",children:"Promotion"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[e.jsx(Zt,{type:"button",variant:"outline",onClick:P,disabled:j,children:"Cancel"}),e.jsx(Zt,{type:"submit",disabled:j,className:"bg-orange-500 hover:bg-orange-600",children:j?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4 mr-2 animate-spin"}),m?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(na,{className:"w-4 h-4 mr-2"}),m?"Update Event":"Create Event"]})})]})]})})]})},P3=({imageUrl:n,imageStorageId:r,productName:l,className:i})=>{const c=fe(r?J.services.products.getImageUrl:void 0,r?{storageId:r}:void 0),[x,u]=v.useState(!1),g=n||c;return x||!g?e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400 w-full h-full",children:[e.jsx(aa,{className:"w-16 h-16 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"No Image"})]}):e.jsx("img",{src:g,alt:l,className:i,onError:()=>u(!0),onLoad:()=>u(!1)})},L3=({onRefresh:n})=>{const[r,l]=v.useState(""),[i,c]=v.useState("all"),[x,u]=v.useState("all"),[g,m]=v.useState(!1),[f,b]=v.useState(null),[p,y]=v.useState({name:"",description:"",price:"",cost:"",category:"hair-care",brand:"",sku:"",stock:"",minStock:"",imageStorageId:"",status:"active"}),[N,j]=v.useState({}),[w,D]=v.useState(!1),C=fe(J.services.products.getAllProducts)||[],L=Ee(J.services.products.createProduct),A=Ee(J.services.products.updateProduct),_=Ee(J.services.products.deleteProduct),O=Ee(J.services.products.generateUploadUrl);Ee(J.services.products.deleteImage);const[U,M]=v.useState(null),[E,S]=v.useState(""),[$,P]=v.useState(!1),q=v.useRef(null),z=!C,V=K=>{const Y=K.target.files?.[0];if(Y){if(Y.size>5*1024*1024){j(pe=>({...pe,image:"Image size must be less than 5MB"}));return}if(!Y.type.startsWith("image/")){j(pe=>({...pe,image:"Please select a valid image file"}));return}M(Y),j(pe=>({...pe,image:""}));const ge=new FileReader;ge.onload=pe=>{pe.target&&pe.target.result&&typeof pe.target.result=="string"?(console.log("Setting image preview:",pe.target.result.substring(0,50)+"..."),S(pe.target.result)):(console.error("Invalid FileReader result:",pe.target?.result),j(ye=>({...ye,image:"Failed to process image file"})))},ge.onerror=pe=>{console.error("FileReader error:",pe),j(ye=>({...ye,image:"Failed to read image file"}))},ge.readAsDataURL(Y)}},Z=async()=>{if(!U)return null;try{P(!0);const K=await O(),Y=await fetch(K,{method:"POST",headers:{"Content-Type":U.type},body:U});if(!Y.ok)throw new Error("Failed to upload image");const{storageId:ge}=await Y.json();return ge}catch(K){return console.error("Error uploading image:",K),j(Y=>({...Y,image:"Failed to upload image"})),null}finally{P(!1)}},B=()=>{M(null),S(""),y(K=>({...K,imageStorageId:""})),q.current&&(q.current.value="")},k=()=>{const K={};return p.name.trim()||(K.name="Product name is required"),p.description.trim()||(K.description="Description is required"),(!p.price||p.price<=0)&&(K.price="Valid price is required"),(!p.cost||p.cost<0)&&(K.cost="Valid cost is required"),p.brand.trim()||(K.brand="Brand is required"),p.sku.trim()||(K.sku="SKU is required"),(!p.stock||p.stock<0)&&(K.stock="Valid stock quantity is required"),(!p.minStock||p.minStock<0)&&(K.minStock="Valid minimum stock is required"),p.price&&p.cost&&parseFloat(p.price)<=parseFloat(p.cost)&&(K.price="Price must be higher than cost"),C.find(ge=>ge.sku.toLowerCase()===p.sku.toLowerCase()&&(!f||ge._id!==f._id))&&(K.sku="SKU already exists"),j(K),Object.keys(K).length===0},I=async K=>{if(K.preventDefault(),!!k()){D(!0);try{let Y=p.imageStorageId;if(U&&(Y=await Z(),!Y))return;const ge={name:p.name,description:p.description,price:parseFloat(p.price),cost:parseFloat(p.cost),category:p.category,brand:p.brand,sku:p.sku,stock:parseInt(p.stock),minStock:parseInt(p.minStock),imageStorageId:Y||void 0,status:p.status};f?await A({id:f._id,...ge}):await L(ge),H(),n?.()}catch(Y){console.error("Error saving product:",Y),j({submit:Y.message||"Failed to save product"})}finally{D(!1)}}},se=K=>{y({name:K.name,description:K.description,price:K.price.toString(),cost:K.cost.toString(),category:K.category,brand:K.brand,sku:K.sku,stock:K.stock.toString(),minStock:K.minStock.toString(),imageStorageId:K.imageStorageId||"",status:K.status}),K.imageUrl&&S(K.imageUrl),b(K),m(!0)},T=async K=>{if(confirm("Are you sure you want to delete this product?"))try{await _({id:K}),n?.()}catch(Y){console.error("Error deleting product:",Y)}},H=()=>{m(!1),b(null),y({name:"",description:"",price:"",cost:"",category:"hair-care",brand:"",sku:"",stock:"",minStock:"",imageStorageId:"",status:"active"}),j({}),M(null),S(""),P(!1),q.current&&(q.current.value="")},oe=K=>K.stock===0?{label:"Out of Stock",bg:"bg-red-50",text:"text-red-700",border:"border-red-200"}:K.stock<=K.minStock?{label:"Low Stock",bg:"bg-yellow-50",text:"text-yellow-700",border:"border-yellow-200"}:{label:"In Stock",bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},W=C.filter(K=>{const Y=K.name.toLowerCase().includes(r.toLowerCase())||K.brand.toLowerCase().includes(r.toLowerCase())||K.sku.toLowerCase().includes(r.toLowerCase()),ge=i==="all"||K.category===i,pe=x==="all"||x==="in-stock"&&K.stock>K.minStock||x==="low-stock"&&K.stock>0&&K.stock<=K.minStock||x==="out-of-stock"&&K.stock===0;return Y&&ge&&pe}),le={total:C.length,inStock:C.filter(K=>K.stock>K.minStock).length,lowStock:C.filter(K=>K.stock>0&&K.stock<=K.minStock).length,outOfStock:C.filter(K=>K.stock===0).length,totalValue:C.reduce((K,Y)=>K+Y.price*Y.stock,0),totalSold:C.reduce((K,Y)=>K+Y.soldThisMonth,0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Products & Inventory"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your barbershop products and track inventory"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>n?.(),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444] text-gray-300 rounded-lg hover:bg-[#555555] transition-colors text-sm",children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"New Product"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:le.total})]}),e.jsx(aa,{className:"h-8 w-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"In Stock"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:le.inStock})]}),e.jsx(Fs,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:le.lowStock})]}),e.jsx(at,{className:"h-8 w-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:le.outOfStock})]}),e.jsx(fp,{className:"h-8 w-8 text-red-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Inventory Value"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:["",le.totalValue.toLocaleString()]})]}),e.jsx(Ut,{className:"h-8 w-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Sold This Month"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:le.totalSold})]}),e.jsx(xi,{className:"h-8 w-8 text-[#FF8C42]"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:r,onChange:K=>l(K.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:i,onChange:K=>c(K.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"hair-care",children:"Hair Care"}),e.jsx("option",{value:"beard-care",children:"Beard Care"}),e.jsx("option",{value:"shaving",children:"Shaving"}),e.jsx("option",{value:"tools",children:"Tools"}),e.jsx("option",{value:"accessories",children:"Accessories"})]})]}),e.jsxs("select",{value:x,onChange:K=>u(K.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Stock Levels"}),e.jsx("option",{value:"in-stock",children:"In Stock"}),e.jsx("option",{value:"low-stock",children:"Low Stock"}),e.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]})})}),z?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6,7,8].map(K=>e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-32 bg-[#444444] rounded mb-4"}),e.jsx("div",{className:"h-4 bg-[#444444] rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-[#444444] rounded w-full mb-2"}),e.jsx("div",{className:"h-6 bg-[#444444] rounded w-1/2"})]})},K))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:W.map(K=>{const Y=oe(K),ge=((K.price-K.cost)/K.price*100).toFixed(1);return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[e.jsxs("div",{className:"h-48 bg-gray-100 flex items-center justify-center relative",children:[K.imageUrl||K.imageStorageId?e.jsx(P3,{imageUrl:K.imageUrl,imageStorageId:K.imageStorageId,productName:K.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[e.jsx(aa,{className:"w-16 h-16 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"No Image"})]}),e.jsx("span",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium border ${Y.bg} ${Y.text} ${Y.border}`,children:Y.label})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white text-sm",children:K.name}),e.jsx("p",{className:"text-xs text-gray-400",children:K.brand})]})}),e.jsx("p",{className:"text-gray-400 text-xs mb-3 line-clamp-2",children:K.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"SKU:"}),e.jsx("span",{className:"font-mono text-gray-300",children:K.sku})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Stock:"}),e.jsxs("span",{className:`font-semibold ${K.stock===0?"text-red-400":K.stock<=K.minStock?"text-yellow-400":"text-green-400"}`,children:[K.stock," units"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Sold:"}),e.jsxs("span",{className:"text-gray-300",children:[K.soldThisMonth," this month"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[e.jsx("span",{children:"Stock Level"}),e.jsxs("span",{children:[Math.round(K.stock/(K.minStock*2)*100),"%"]})]}),e.jsx("div",{className:"w-full bg-[#444444] rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${K.stock===0?"bg-red-500":K.stock<=K.minStock?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(K.stock/(K.minStock*2)*100,100)}%`}})})]}),e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-[#FF8C42]",children:["",K.price.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Cost: ",K.cost.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-green-400",children:["+",ge,"% margin"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:K.category.replace("-"," ")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>se(K),className:"p-2 text-gray-400 hover:text-[#FF8C42] hover:bg-[#FF8C42]/20 rounded-lg transition-colors",title:"Edit Product",children:e.jsx(Ba,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(K._id),className:"p-2 text-gray-400 hover:text-red-400 hover:bg-red-400/20 rounded-lg transition-colors",title:"Delete Product",children:e.jsx(Ss,{className:"h-4 w-4"})})]})]})]})]},K._id)})}),W.length===0&&!z&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(aa,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No products found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:r||i!=="all"||x!=="all"?"Try adjusting your search or filter criteria.":"Get started by adding your first product."}),!r&&i==="all"&&x==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700",children:[e.jsx(Bt,{className:"-ml-1 mr-2 h-4 w-4"}),"New Product"]})})]}),e.jsx(ds,{isOpen:g,onClose:H,title:f?"Edit Product":"Add New Product",size:"xl",children:e.jsxs("form",{onSubmit:I,className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-6 border border-orange-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ja,{className:"w-5 h-5 mr-2 text-orange-600"}),"Product Image"]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"relative",children:E?e.jsxs("div",{className:"relative group bg-white rounded-xl overflow-hidden",children:[e.jsx("img",{src:E,alt:"Product preview",className:"w-full h-48 object-cover border-2 border-orange-200 shadow-lg",style:{display:"block",maxWidth:"100%",height:"192px"},onError:K=>{console.error("Image failed to load:",E),console.error("Image error event:",K),S(""),j(Y=>({...Y,image:"Failed to load image. Please try a different image."}))},onLoad:K=>{console.log("Image loaded successfully:",K.target.src.substring(0,50)+"..."),j(Y=>({...Y,image:""}))}}),e.jsx("div",{className:"absolute inset-0 bg-transparent group-hover:bg-black group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:B,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:e.jsx(rt,{className:"w-4 h-4"})})})]}):e.jsxs("div",{className:"w-full h-48 border-2 border-dashed border-orange-300 rounded-xl flex flex-col items-center justify-center bg-white/50 hover:bg-white/80 transition-colors duration-200",children:[e.jsx(_r,{className:"w-12 h-12 text-orange-400 mb-2"}),e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[e.jsx("span",{className:"font-semibold text-orange-600",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]})})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:V,className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>q.current?.click(),disabled:$,className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 px-4 rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2 disabled:opacity-50",children:$?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_r,{className:"w-4 h-4"}),e.jsx("span",{children:"Choose Image"})]})})]}),N.image&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.image]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Product Name *"}),e.jsx("input",{type:"text",value:p.name,onChange:K=>y(Y=>({...Y,name:K.target.value})),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${N.name?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"Enter product name"}),N.name&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Description *"}),e.jsx("textarea",{value:p.description,onChange:K=>y(Y=>({...Y,description:K.target.value})),rows:4,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 resize-none ${N.description?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"Describe the product features and benefits"}),N.description&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.description]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Category"}),e.jsxs("select",{value:p.category,onChange:K=>y(Y=>({...Y,category:K.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 hover:border-orange-300",children:[e.jsx("option",{value:"hair-care",children:"Hair Care"}),e.jsx("option",{value:"beard-care",children:"Beard Care"}),e.jsx("option",{value:"shaving",children:"Shaving"}),e.jsx("option",{value:"tools",children:"Tools"}),e.jsx("option",{value:"accessories",children:"Accessories"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Brand *"}),e.jsx("input",{type:"text",value:p.brand,onChange:K=>y(Y=>({...Y,brand:K.target.value})),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${N.brand?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"Product brand"}),N.brand&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.brand]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Selling Price () *"}),e.jsx("input",{type:"number",value:p.price,onChange:K=>y(Y=>({...Y,price:K.target.value})),min:"0",step:"0.01",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${N.price?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0.00"}),N.price&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.price]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Cost Price () *"}),e.jsx("input",{type:"number",value:p.cost,onChange:K=>y(Y=>({...Y,cost:K.target.value})),min:"0",step:"0.01",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${N.cost?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0.00"}),N.cost&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.cost]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"SKU *"}),e.jsx("input",{type:"text",value:p.sku,onChange:K=>y(Y=>({...Y,sku:K.target.value.toUpperCase()})),className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent font-mono transition-all duration-200 ${N.sku?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"PROD-001"}),N.sku&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.sku]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Current Stock *"}),e.jsx("input",{type:"number",value:p.stock,onChange:K=>y(Y=>({...Y,stock:K.target.value})),min:"0",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${N.stock?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0"}),N.stock&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.stock]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Minimum Stock *"}),e.jsx("input",{type:"number",value:p.minStock,onChange:K=>y(Y=>({...Y,minStock:K.target.value})),min:"0",className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 ${N.minStock?"border-red-300 bg-red-50":"border-gray-300 hover:border-orange-300"}`,placeholder:"0"}),N.minStock&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),N.minStock]})]})]})]})]}),p.price&&p.cost&&parseFloat(p.price)>parseFloat(p.cost)&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-xl",children:e.jsx(ks,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-green-800",children:["Profit Margin: ",((parseFloat(p.price)-parseFloat(p.cost))/parseFloat(p.price)*100).toFixed(1),"%"]}),e.jsxs("p",{className:"text-sm text-green-700",children:["Profit per unit: ",(parseFloat(p.price)-parseFloat(p.cost)).toFixed(2)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",(parseFloat(p.price)-parseFloat(p.cost)).toFixed(2)]}),e.jsx("div",{className:"text-sm text-green-600",children:"per unit"})]})]})}),N.submit&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),N.submit]})}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:H,disabled:w||$,className:"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||$,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white font-bold rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-200 flex items-center space-x-2 disabled:opacity-50 shadow-lg hover:shadow-xl",children:w||$?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:$?"Uploading...":f?"Updating...":"Adding..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(na,{className:"w-5 h-5"}),e.jsx("span",{children:f?"Update Product":"Add Product"})]})})]})]})})]})},O3=({onRefresh:n})=>{const{user:r}=Tt(),[l,i]=v.useState(""),[c,x]=v.useState("all"),[u,g]=v.useState(!1),[m,f]=v.useState(!1),[b,p]=v.useState(""),y=fe(J.services.notifications.getUserNotifications,r?.id?{userId:r.id,limit:50}:"skip"),N=fe(J.services.notifications.getUnreadCount,r?.id?{userId:r.id}:"skip"),j=Ee(J.services.notifications.markAsRead),w=Ee(J.services.notifications.markAllAsRead),D=Ee(J.services.notifications.deleteNotification);Ee(J.services.notifications.createNotification);const C=y?.filter(E=>{const S=E.title.toLowerCase().includes(l.toLowerCase())||E.message.toLowerCase().includes(l.toLowerCase()),$=c==="all"||E.type===c;return S&&$})||[],L=async E=>{if(r?.id)try{await j({notificationId:E,userId:r.id})}catch(S){p(S.message||"Failed to mark notification as read")}},A=async()=>{if(r?.id)try{f(!0),await w({userId:r.id})}catch(E){p(E.message||"Failed to mark all notifications as read")}finally{f(!1)}},_=async E=>{if(r?.id)try{await D({notificationId:E,userId:r.id})}catch(S){p(S.message||"Failed to delete notification")}},O=E=>{switch(E){case"booking":return e.jsx(Re,{className:"w-4 h-4"});case"payment":return e.jsx(Ut,{className:"w-4 h-4"});case"system":return e.jsx(Sr,{className:"w-4 h-4"});case"promotion":return e.jsx(kt,{className:"w-4 h-4"});case"reminder":return e.jsx(jt,{className:"w-4 h-4"});case"alert":return e.jsx(at,{className:"w-4 h-4"});default:return e.jsx(c0,{className:"w-4 h-4"})}},U=E=>{switch(E){case"urgent":return"text-red-600 bg-red-50 border-red-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"medium":return"text-blue-600 bg-blue-50 border-blue-200";case"low":return"text-gray-600 bg-gray-50 border-gray-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},M=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u1,{className:"w-6 h-6 text-[#FF8C42]"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),N>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:N})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{onClick:A,disabled:m||!N,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(qf,{className:"w-4 h-4"}),e.jsx("span",{children:"Mark All Read"})]})})]}),b&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-red-800",children:b}),e.jsx("button",{onClick:()=>p(""),className:"ml-auto text-red-600 hover:text-red-800",children:e.jsx(rt,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:l,onChange:E=>i(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]})}),e.jsxs("select",{value:c,onChange:E=>x(E.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"booking",children:"Booking"}),e.jsx("option",{value:"payment",children:"Payment"}),e.jsx("option",{value:"system",children:"System"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"reminder",children:"Reminder"}),e.jsx("option",{value:"alert",children:"Alert"})]})]}),e.jsx("div",{className:"space-y-3",children:C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(sc,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No notifications found"}),e.jsx("p",{className:"text-gray-400",children:"You're all caught up!"})]}):C.map(E=>e.jsx("div",{className:`p-4 border rounded-lg transition-all duration-200 hover:shadow-md ${E.is_read?"bg-white border-gray-200":"bg-blue-50 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${U(E.priority)}`,children:O(E.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:`font-semibold ${E.is_read?"text-gray-900":"text-blue-900"}`,children:E.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${U(E.priority)}`,children:E.priority})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:E.message}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsx("span",{children:M(E.createdAt)}),e.jsx("span",{className:"capitalize",children:E.type})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!E.is_read&&e.jsx("button",{onClick:()=>L(E._id),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Mark as read",children:e.jsx(qf,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(E._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete notification",children:e.jsx(Ss,{className:"w-4 h-4"})})]})]})},E._id))})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"Please log in to view notifications"})})},jg=n=>{const{customerName:r="Valued Customer",subject:l="Special Offer Just for You!",mainContent:i="We have an amazing offer just for you.",buttonText:c="Book Now",buttonUrl:x="#",branchName:u="TPX Barber",branchAddress:g="123 Main St, City",branchPhone:m="+1234567890",footerText:f="Thank you for choosing us!",offerImage:b=null}=n||{};return`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>${l}</title>
      </head>
      <body style="margin: 0; padding: 0; background-color: #0a0a0a; font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Ubuntu,sans-serif;">
        <div style="max-width: 600px; margin: 0 auto; background-color: #1a1a1a; border-radius: 12px; border: 1px solid #333; margin-bottom: 64px;">
          <!-- Header -->
          <div style="background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%); padding: 32px 20px; text-align: center; border-radius: 12px 12px 0 0;">
            <h1 style="color: #ffffff; font-size: 32px; font-weight: bold; margin: 0; line-height: 1.2;">${u}</h1>
            <p style="color: #ffffff; font-size: 16px; margin: 8px 0 0; opacity: 0.9;">Premium Barbershop Experience</p>
          </div>

          <!-- Main Content -->
          <div style="padding: 32px 20px;">
            <h2 style="color: #ffffff; font-size: 24px; font-weight: bold; margin: 0 0 20px; line-height: 1.3;">${l}</h2>

            ${b?`<img src="${b}" alt="Special Offer" style="margin: 0 auto 24px; border-radius: 8px; max-width: 100%; height: auto; display: block;">`:""}

            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 0 0 16px;">Hello ${r},</p>
            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 0 0 16px;">${i}</p>

            <!-- Button -->
            <div style="text-align: center; margin: 32px 0;">
              <a href="${x}" style="background-color: #ff8c42; border-radius: 8px; color: #ffffff; font-size: 16px; font-weight: bold; text-decoration: none; text-align: center; display: inline-block; padding: 16px 32px; margin: 0 8px; border: none; cursor: pointer;">
                ${c}
              </a>
            </div>
          </div>

          <!-- Services Section -->
          <div style="padding: 0 20px 32px; background-color: #2a2a2a; margin: 0 20px; border-radius: 8px;">
            <h3 style="color: #ff8c42; font-size: 20px; font-weight: bold; margin: 0 0 16px; padding-top: 20px;">Our Services</h3>
            <div style="display: flex; text-align: center;">
              <div style="flex: 1; padding: 16px 8px;">
                <p style="color: #ff8c42; font-size: 18px; font-weight: bold; margin: 0 0 8px;"> Hair Cut</p>
                <p style="color: #cccccc; font-size: 14px; margin: 0;">Professional styling</p>
              </div>
              <div style="flex: 1; padding: 16px 8px;">
                <p style="color: #ff8c42; font-size: 18px; font-weight: bold; margin: 0 0 8px;"> Beard Trim</p>
                <p style="color: #cccccc; font-size: 14px; margin: 0;">Perfect grooming</p>
              </div>
              <div style="flex: 1; padding: 16px 8px;">
                <p style="color: #ff8c42; font-size: 18px; font-weight: bold; margin: 0 0 8px;"> Head Massage</p>
                <p style="color: #cccccc; font-size: 14px; margin: 0;">Relaxing treatment</p>
              </div>
            </div>
          </div>

          <hr style="border-color: #444444; margin: 20px 0;">

          <!-- Footer -->
          <div style="padding: 0 20px 32px; text-align: center;">
            <p style="color: #ff8c42; font-size: 16px; font-weight: bold; margin: 0 0 16px;">${f}</p>
            <p style="color: #999999; font-size: 14px; line-height: 1.6; margin: 0 0 16px;">
               ${g}<br>
               ${m}
            </p>
            <p style="color: #666666; font-size: 12px; line-height: 1.5; margin: 0;">
              You received this email because you're a valued customer.
              <br>If you don't want to receive these emails, you can <a href="#" style="color: #ff8c42; text-decoration: underline;">unsubscribe</a>.
            </p>
          </div>
        </div>
      </body>
    </html>
  `},U3=n=>{const{customerName:r="Valued Customer",discountPercentage:l="20",promoCode:i="SAVE20",validUntil:c=new Date(Date.now()+10080*60*1e3).toLocaleDateString(),branchName:x="TPX Barber",bookingUrl:u="#"}=n||{};return`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> SPECIAL OFFER</title>
      </head>
      <body style="margin: 0; padding: 0; background-color: #0a0a0a; font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Ubuntu,sans-serif;">
        <div style="max-width: 600px; margin: 0 auto; background-color: #1a1a1a; border-radius: 12px; border: 1px solid #333; margin-bottom: 64px;">
          <!-- Header -->
          <div style="background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%); padding: 32px 20px; text-align: center; border-radius: 12px 12px 0 0;">
            <h1 style="color: #ffffff; font-size: 32px; font-weight: bold; margin: 0; line-height: 1.2;">${x}</h1>
          </div>

          <!-- Promo Section -->
          <div style="padding: 40px 20px; text-align: center; background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%);">
            <h2 style="color: #ffffff; font-size: 28px; font-weight: bold; margin: 0 0 16px; text-transform: uppercase; letter-spacing: 2px;"> SPECIAL OFFER</h2>
            <h1 style="color: #ffffff; font-size: 48px; font-weight: bold; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">${l}% OFF</h1>
            <p style="color: #ffffff; font-size: 18px; margin: 8px 0 32px; opacity: 0.9;">Your next appointment</p>

            <!-- Promo Code Box -->
            <div style="background-color: rgba(255,255,255,0.1); padding: 16px; border-radius: 8px; margin: 24px auto; max-width: 200px; border: 2px dashed #ffffff;">
              <p style="color: #ffffff; font-size: 14px; margin: 0 0 8px; opacity: 0.8;">Use code:</p>
              <p style="color: #ffffff; font-size: 24px; font-weight: bold; margin: 0; letter-spacing: 2px;">${i}</p>
            </div>

            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 24px 0 16px;">Hello ${r},</p>
            <p style="color: #e5e5e5; font-size: 16px; line-height: 1.6; margin: 0 0 32px;">
              Take advantage of this exclusive offer and save ${l}% on your next visit!
            </p>

            <!-- Button -->
            <div style="margin: 32px 0;">
              <a href="${u}" style="background-color: #ffffff; border-radius: 8px; color: #ff8c42; font-size: 16px; font-weight: bold; text-decoration: none; text-align: center; display: inline-block; padding: 16px 32px; border: none; cursor: pointer;">
                Book Now & Save
              </a>
            </div>

            <p style="color: #ffffff; font-size: 14px; margin: 24px 0 0; opacity: 0.8;">Valid until ${c}</p>
          </div>

          <hr style="border-color: #444444; margin: 20px 0;">

          <!-- Footer -->
          <div style="padding: 0 20px 32px; text-align: center;">
            <p style="color: #666666; font-size: 12px; line-height: 1.5; margin: 0;">
              <a href="#" style="color: #ff8c42; text-decoration: underline;">Unsubscribe</a> from promotional emails.
            </p>
          </div>
        </div>
      </body>
    </html>
  `},u0=async({templateType:n,subject:r,templateData:l,fallbackHtml:i})=>{switch(n){case"marketing":return jg({...l,subject:r});case"promotional":return U3({...l});case"custom":return i||"<p>No content provided</p>";default:return i||jg({...l,subject:r})}},z3=n=>{let r={},l=n.template_type||"custom",i=n.body_html||"";try{if(n.body_html&&n.body_html.startsWith("{")){const c=JSON.parse(n.body_html);c.template_type&&(l=c.template_type,r=c.templateData||{})}}catch{i=n.body_html}return{templateType:l,templateData:r,fallbackHtml:i}},Dp=v.memo(({selectedTemplate:n,campaignForm:r})=>{const[l,i]=v.useState(!1),[c,x]=v.useState(""),u=v.useMemo(()=>JSON.stringify(r.templateData||{}),[r.templateData]);return v.useEffect(()=>{let g=!0;return(async()=>{if(!n?.id||n.id==="custom"){x("");return}i(!0);try{const f=await u0({templateType:n.id,subject:r.subject||"Email Subject",templateData:r.templateData,fallbackHtml:r.body_html||""});g&&x(f)}catch(f){console.error("Template rendering error:",f),g&&x("")}finally{g&&i(!1)}})(),()=>{g=!1}},[n,r.subject,u,r.body_html]),!n||!n.component?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ft,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No Template Selected"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Choose a template to see the preview"})]})}):l?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF8C42] mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading template preview..."})]}):c?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 p-4 rounded-[30px] shadow-inner border border-gray-200/60",children:e.jsxs("div",{className:"bg-white rounded-[22px] shadow-2xl overflow-hidden border border-gray-200 w-[360px]",children:[e.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-red-400"}),e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-yellow-400"}),e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-400"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-600 truncate",children:r.subject||"Email Subject"})]}),e.jsx("iframe",{title:"Email preview",srcDoc:c,className:"w-full",style:{height:600,border:"none",backgroundColor:"#f4f4f4"},sandbox:"allow-same-origin"})]})})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Ft,{className:"w-12 h-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Preview not available"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Template will render correctly when sent"})]})});Dp.displayName="TemplatePreview";const Sp=v.memo(({template:n,isSelected:r,onSelect:l})=>e.jsxs("button",{type:"button",onClick:()=>l(n),className:`p-4 rounded-xl border-2 transition-all duration-200 text-left group ${r?"border-[#FF8C42] bg-[#FF8C42]/10 shadow-lg shadow-[#FF8C42]/20":"border-[#444444] bg-[#1A1A1A] hover:border-[#555555] hover:bg-[#222222]"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[(()=>{const i=n.icon;return e.jsx(i,{className:"w-5 h-5 text-[#FF8C42]"})})(),e.jsx("span",{className:"text-sm font-semibold text-white",children:n.name}),r&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-[#FF8C42] rounded-full"})]}),e.jsx("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:n.description})]},n.id));Sp.displayName="TemplateCard";const Lo="noreply@tpxbarber.com",_p=v.memo(({onRefresh:n})=>{const{user:r}=Tt(),[l,i]=v.useState("campaigns"),[c,x]=v.useState(!1),[u,g]=v.useState(!1),[m,f]=v.useState(!1),[b,p]=v.useState(!1),[y,N]=v.useState(!1),[j,w]=v.useState(!1),[D,C]=v.useState(null),[L,A]=v.useState(null),[_,O]=v.useState({current:0,total:0,sent:0,failed:0}),[U,M]=v.useState(!1),[E,S]=v.useState(""),[$,P]=v.useState("all_customers"),[q,z]=v.useState([]),[V,Z]=v.useState("create"),[B,k]=v.useState({name:"",subject:"",body_html:"",audience:"all_customers",template_type:"custom",from_email:"",scheduled_at:"",tags:[],templateData:{}}),[I,se]=v.useState(""),[T,H]=v.useState("all"),[oe,W]=v.useState("all"),[le,K]=v.useState("all"),[Y,ge]=v.useState(""),[pe,ye]=v.useState(void 0),Ae=fe(J.services.emailMarketing.getCampaignsByBranch,r?.branch_id?{branch_id:r.branch_id}:"skip"),Te=fe(J.services.auth.getUsersByRoleAndBranch,r?.branch_id?{role:"customer",branch_id:r.branch_id}:"skip"),Ge=Ee(J.services.emailMarketing.createCampaign),Ze=Ee(J.services.emailMarketing.updateCampaign),Ye=Ee(J.services.emailMarketing.deleteCampaign),Xe=Ee(J.services.emailMarketing.logCampaignSend),pt=v.useMemo(()=>{if(!Te)return{all_customers:0,new_customers:0,returning_customers:0,vip_customers:0};const Q=new Date,he=new Date(Q.getTime()-720*60*60*1e3);return{all_customers:Te.length,new_customers:Te.filter(ke=>new Date(ke.createdAt)>he).length,returning_customers:Te.filter(ke=>ke.createdAt<he.getTime()).length,vip_customers:Te.filter(ke=>!1).length}},[Te]),it=v.useMemo(()=>Ae?Ae.filter(Q=>{const he=Q.name.toLowerCase().includes(I.toLowerCase())||Q.subject.toLowerCase().includes(I.toLowerCase()),ke=T==="all"||Q.audience===T,ze=oe==="all"||Q.status===oe,Pe=le==="all"||Q.template_type===le;return he&&ke&&ze&&Pe}):[],[Ae,I,T,oe,le]),xe=v.useMemo(()=>Ae?Ae.reduce((Q,he)=>({total:Q.total+1,sent:Q.sent+(he.status==="sent"?1:0),scheduled:Q.scheduled+(he.status==="scheduled"?1:0),draft:Q.draft+(he.status==="draft"?1:0)}),{total:0,sent:0,scheduled:0,draft:0}):{total:0,sent:0,scheduled:0,draft:0},[Ae]),Fe=()=>{k({name:"",subject:"",body_html:"",audience:"all_customers",template_type:"custom",from_email:"",scheduled_at:"",tags:[],templateData:{}}),ye(null),z([])},ae=async()=>{if(!r?.branch_id||!r?._id||!B.name||!B.subject)return;const Q=B.scheduled_at?new Date(B.scheduled_at).getTime():void 0,ke=["all_customers","new_customers","returning_customers","vip_customers"].includes(B.audience)?B.audience:"all_customers",ze=pe&&pe.id!=="custom",Pe=ze?pe.id:B.template_type||"custom",At=ze?JSON.stringify({template_type:pe.id,templateData:B.templateData||{}}):B.body_html||"";try{await Ge({branch_id:r.branch_id,name:B.name,subject:B.subject,body_html:At,audience:ke,template_type:Pe,from_email:Lo,created_by:r._id,scheduled_at:Q,tags:B.tags}),Fe(),x(!1),n?.()}catch(We){console.error("Failed to create campaign:",We)}},G=async(Q,he)=>{if(!(!Q||!he||he.length===0)){M(!1),A(Q),O({current:0,total:he.length,sent:0,failed:0});try{await Ze({id:Q._id,status:"sending",total_recipients:he.length});const ke=await _e(Q);console.log(" Campaign email payload:",{campaign_id:Q._id,subject:Q.subject,recipients_count:he.length});const{sendCampaignEmails:ze}=await x0(async()=>{const{sendCampaignEmails:We}=await Promise.resolve().then(()=>Fg);return{sendCampaignEmails:We}},void 0),Pe=await ze({campaignData:{name:Q.name,subject:Q.subject,html_content:ke,text_content:ke.replace(/<[^>]*>/g,"")},recipients:he.map(We=>({email:We.email,username:We.username||We.email,_id:We._id})),onProgress:We=>{O({current:We.current,total:We.total,sent:We.sent,failed:We.failed})}});for(const We of he){const us=Pe.errors.find(Da=>Da.email===We.email)===void 0;await Xe({campaign_id:Q._id,recipient_email:We.email,recipient_id:We._id,status:us?"sent":"failed",error:us?void 0:Pe.errors.find(Da=>Da.email===We.email)?.error})}O({current:he.length,total:he.length,sent:Pe.sent,failed:Pe.failed}),await Ze({id:Q._id,status:Pe.failed>0&&Pe.sent===0?"failed":"sent",sent_at:Date.now(),sent_count:Pe.sent,failed_count:Pe.failed});const At=new Set((Pe.errors||[]).map(We=>We.email));for(const We of he){const us=At.has(We.email)?"failed":"sent";await Xe({campaign_id:Q._id,recipient_email:We.email,recipient_id:We._id,status:us})}if(Pe.failed>0){const We=Pe.errors?.map(us=>`${us.email}: ${us.error}`).join(`
`)||"Some emails failed to send.";alert(`Campaign sent with ${Pe.failed} failures.
${We}`)}else alert(`Campaign sent to ${Pe.sent} recipients!`)}catch(ke){console.error("Failed to send campaign:",ke),await Ze({id:Q._id,status:"failed"})}finally{A(null),O({current:0,total:0,sent:0,failed:0}),z([]),S(""),Z("create")}}},me=async(Q,he=!1)=>{if(!Te||Te.length===0||!Q)return;if(!he){const ze=Q.audience||"all_customers";Z("send"),P(ze),S("");const Pe=ee(Te,ze,"");z(Pe),A(Q),M(!0);return}const ke=q.length?[...q]:ee(Te,Q.audience||"all_customers","");await G(Q,ke)},Ce=()=>{M(!1),V==="send"&&(Z("create"),A(null))},ee=v.useCallback((Q,he,ke)=>{if(!Q)return[];const ze=new Date,Pe=new Date(ze.getTime()-720*60*60*1e3);let At=Q;if(he==="new_customers"?At=Q.filter(We=>new Date(We.createdAt)>Pe):he==="returning_customers"||he==="regular_customers"?At=Q.filter(We=>We.createdAt<Pe.getTime()):he==="vip_customers"&&(At=[]),ke){const We=ke.toLowerCase();At=At.filter(us=>(us.username||"").toLowerCase().includes(We)||(us.email||"").toLowerCase().includes(We))}return At},[]),_e=v.useCallback(async Q=>{if(!Q)return"";const{templateType:he,templateData:ke,fallbackHtml:ze}=z3(Q);try{const Pe=await u0({templateType:he,subject:Q.subject,templateData:ke,fallbackHtml:ze});if(Pe)return Pe}catch(Pe){console.error("Failed to render campaign template:",Pe)}return ze||`<div style="font-family:Arial,sans-serif;padding:20px"><h1>${Q.name||"Campaign"}</h1><p>${Q.subject||""}</p></div>`},[]),Ue=v.useCallback(async()=>{const Q=pe?.id||B.template_type||"custom",he=Q==="custom"&&B.body_html||"";try{const ke=await u0({templateType:Q,subject:B.subject||"Email Subject",templateData:B.templateData,fallbackHtml:he});if(ke)return ke}catch(ke){console.error("Failed to render form template:",ke)}return he||`<div style="font-family:Arial,sans-serif;padding:20px"><h1>${B.name||"Campaign"}</h1><p>${B.subject||""}</p></div>`},[pe,B.template_type,B.body_html,B.subject,B.name,B.templateData]),Ie=async()=>{if(Y)try{const Q=D||{_id:void 0,name:B.name||"Test Campaign",subject:B.subject||"Test Email",from_email:B.from_email,template_type:pe?.id||B.template_type,body_html:B.body_html},he=D?await _e(D):await Ue(),ke=Q._id?{id:Q._id,name:Q.name||"Test Campaign",subject:Q.subject||"Test Email",from:Q.from_email||Lo}:{name:Q.name||"Test Campaign",subject:Q.subject||"Test Email",from:Q.from_email||Lo};console.log(" Test email payload:",{to:Y,subject:ke.subject,hasHtml:!!he});const{sendEmailViaEmailJS:ze}=await x0(async()=>{const{sendEmailViaEmailJS:At}=await Promise.resolve().then(()=>Fg);return{sendEmailViaEmailJS:At}},void 0),Pe=await ze({to:Y,to_name:"Test User",subject:ke.subject,html_content:he,text_content:he.replace(/<[^>]*>/g,"")});Pe.success?alert("Test email sent successfully!"):alert("Failed to send test email: "+Pe.error)}catch(Q){console.error("Test email failed:",Q),alert("Failed to send test email")}},Nt=v.useCallback(async Q=>{if(!(!Q||!window.confirm(`Delete campaign "${Q.name}"? This cannot be undone.`)))try{await Ye({id:Q._id}),D?._id===Q._id&&C(null),n?.()}catch(ke){console.error("Failed to delete campaign:",ke),alert("Failed to delete campaign. Please try again.")}},[Ye,n,D]),xt=[{id:"marketing",name:"Marketing",description:"General announcements & offers",icon:Ft},{id:"promotional",name:"Promotional",description:"Discount-focused campaigns",icon:Ea},{id:"newsletter",name:"Newsletter",description:"Share updates & content",icon:Wl}],zt=Q=>{switch(Q){case"marketing":return{mainContent:"We have an amazing offer just for you.",buttonText:"Book Now",buttonUrl:"#",branchName:"TPX Barber",branchAddress:"123 Main St, City",branchPhone:"+1234567890",footerText:"Thank you for choosing us!"};case"promotional":return{discountPercentage:"25",promoCode:"SUMMER25",validUntil:new Date(Date.now()+10080*60*1e3).toISOString().slice(0,10),bookingUrl:"#"};case"newsletter":return{mainContent:"Welcome to our latest updates and news!",buttonText:"Read More",buttonUrl:"#",footerText:"Thanks for reading!"};default:return{}}},wt=v.useCallback(Q=>{if(pe&&pe.id===Q?.id){g(!1);return}Q&&Q.component?(ye(Q),k(he=>({...he,template_type:Q.id,body_html:"",templateData:zt(Q.id)}))):(ye(null),k(he=>({...he,template_type:"custom",body_html:he.body_html||"",templateData:{}}))),g(!1)},[pe]),_s=Q=>{const he={draft:"bg-gray-500/20 text-gray-300 border border-gray-500/30",scheduled:"bg-blue-500/20 text-blue-300 border border-blue-500/30",sending:"bg-amber-500/20 text-amber-300 border border-amber-500/30",sent:"bg-green-500/20 text-green-300 border border-green-500/30",failed:"bg-red-500/20 text-red-300 border border-red-500/30"};return he[Q]||he.draft},ot=Q=>({all_customers:gt,new_customers:ua,returning_customers:Zo,vip_customers:Ea})[Q]||gt,vs=Q=>({all_customers:"All Customers",new_customers:"New Customers",returning_customers:"Regular Customers",vip_customers:"VIP Customers"})[Q]||"All Customers",js=v.useCallback(Q=>pt&&pt[Q]||0,[pt]),la=V==="send"&&!!L;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-xl",children:e.jsx(Ft,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Email Marketing"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Manage and send email campaigns to your customers"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>i("analytics"),className:"px-4 py-2 bg-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#333333] transition-colors flex items-center space-x-2",children:[e.jsx(ks,{className:"w-4 h-4"}),e.jsx("span",{children:"Analytics"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors flex items-center space-x-2",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{children:"New Campaign"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Campaigns"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:xe.total})]}),e.jsx("div",{className:"p-2 bg-[#FF8C42]/20 rounded-lg",children:e.jsx(Ft,{className:"w-6 h-6 text-[#FF8C42]"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Sent"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:xe.sent})]}),e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-green-400"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:xe.scheduled})]}),e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(jt,{className:"w-6 h-6 text-blue-400"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Audience Size"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:pt.all_customers})]}),e.jsx("div",{className:"p-2 bg-[#FF8C42]/20 rounded-lg",children:e.jsx(gt,{className:"w-6 h-6 text-[#FF8C42]"})})]})})]}),l==="analytics"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-xl",children:e.jsx(ks,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Campaign Analytics"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Detailed performance metrics and insights"})]})]}),e.jsxs("button",{onClick:()=>i("campaigns"),className:"px-4 py-2 border border-[#444444] text-gray-300 rounded-lg hover:bg-[#FF8C42]/10 hover:border-[#FF8C42] hover:text-[#FF8C42] transition-colors flex items-center space-x-2",children:[e.jsx(Ft,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Campaigns"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Sent"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:Ae?.reduce((Q,he)=>Q+(he.sent_count||0),0)||0})]}),e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx($o,{className:"w-5 h-5 text-green-400"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fs,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-green-400",children:"+12% from last month"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Open Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[Ae?.length>0&&Math.round(Ae.reduce((Q,he)=>Q+(he.open_count||0),0)/Ae.reduce((Q,he)=>Q+(he.sent_count||0),0)*100)||0,"%"]})]}),e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(qo,{className:"w-5 h-5 text-blue-400"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fs,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs text-blue-400",children:"Industry avg: 22%"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Click Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:[Ae?.length>0&&Math.round(Ae.reduce((Q,he)=>Q+(he.click_count||0),0)/Ae.reduce((Q,he)=>Q+(he.sent_count||0),0)*100)||0,"%"]})]}),e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(Gn,{className:"w-5 h-5 text-purple-400"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fs,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-purple-400",children:"Industry avg: 3.2%"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Avg Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:"$2,450"})]}),e.jsx("div",{className:"p-2 bg-[#FF8C42]/20 rounded-lg",children:e.jsx(Fs,{className:"w-5 h-5 text-[#FF8C42]"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fs,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-xs text-green-400",children:"+$320 from last month"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-6 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Campaign Performance"}),e.jsx(ks,{className:"w-5 h-5 text-[#FF8C42]"})]}),e.jsx("div",{className:"space-y-4",children:Ae?.slice(0,5).map((Q,he)=>{const ke=Q.sent_count||0,ze=Q.total_recipients||0,Pe=ze>0?Math.round((Q.open_count||0)/ke*100):0,At=ze>0?Math.round((Q.click_count||0)/ke*100):0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:Q.name}),e.jsxs("span",{className:"text-gray-400 text-xs",children:[ke," sent"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Opens"}),e.jsxs("span",{className:"text-blue-400",children:[Pe,"%"]})]}),e.jsx("div",{className:"w-full bg-[#1A1A1A] rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(Pe*3,100)}%`}})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Clicks"}),e.jsxs("span",{className:"text-purple-400",children:[At,"%"]})]}),e.jsx("div",{className:"w-full bg-[#1A1A1A] rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${Math.min(At*10,100)}%`}})})]})]},Q._id)})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-6 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Audience Engagement"}),e.jsx(gt,{className:"w-5 h-5 text-[#FF8C42]"})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(pt).map(([Q,he])=>{const ke=ot(Q),ze={all:"All Customers",new:"New Customers",returning:"Returning",vip:"VIP Customers"},At={all:{opens:24,clicks:3.2},new:{opens:28,clicks:4.1},returning:{opens:22,clicks:3.8},vip:{opens:32,clicks:5.2}}[Q];return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-[#FF8C42]/20 rounded-lg",children:e.jsx(ke,{className:"w-4 h-4 text-[#FF8C42]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:ze[Q]}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[he," contacts"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-blue-400 text-sm font-semibold",children:[At.opens,"% open"]}),e.jsxs("p",{className:"text-purple-400 text-xs",children:[At.clicks,"% click"]})]})]},Q)})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-6 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Campaigns"}),e.jsx(jt,{className:"w-5 h-5 text-[#FF8C42]"})]}),e.jsx("div",{className:"space-y-4",children:Ae?.slice(0,5).map((Q,he)=>{const ke={sent:"text-green-400",scheduled:"text-blue-400",sending:"text-amber-400",failed:"text-red-400",draft:"text-gray-400"}[Q.status]||"text-gray-400";return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-[#1A1A1A] rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:Q.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:Q.subject})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm font-medium ${ke}`,children:Q.status}),e.jsx("p",{className:"text-gray-400 text-xs",children:Q.sent_at?new Date(Q.sent_at).toLocaleDateString():Q.scheduled_at?new Date(Q.scheduled_at).toLocaleDateString():"Not sent"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white text-sm",children:[Q.sent_count||0," sent"]}),e.jsxs("p",{className:"text-blue-400 text-xs",children:[Q.open_count||0," opens"]})]})]})]},Q._id)})})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Audience Segments"}),e.jsx(Wj,{className:"w-5 h-5 text-[#FF8C42]"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(pt).map(([Q,he])=>{const ke=ot(Q),ze={all:"All Customers",new:"New Customers",returning:"Returning",vip:"VIP Customers"};return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-2 bg-[#1A1A1A] rounded-lg inline-block mb-2",children:e.jsx(ke,{className:"w-4 h-4 text-[#FF8C42]"})}),e.jsx("p",{className:"text-2xl font-bold text-white",children:he}),e.jsx("p",{className:"text-xs text-gray-400",children:ze[Q]})]},Q)})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-xl border border-[#444444]/50",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Filters:"})]}),e.jsxs("select",{value:T,onChange:Q=>H(Q.target.value),className:"px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]",children:[e.jsx("option",{value:"all",children:"All Audiences"}),e.jsx("option",{value:"all_customers",children:"All Customers"}),e.jsx("option",{value:"new_customers",children:"New Customers"}),e.jsx("option",{value:"returning_customers",children:"Returning Customers"}),e.jsx("option",{value:"vip_customers",children:"VIP Customers"})]}),e.jsxs("select",{value:oe,onChange:Q=>W(Q.target.value),className:"px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"sent",children:"Sent"}),e.jsx("option",{value:"sending",children:"Sending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("select",{value:le,onChange:Q=>K(Q.target.value),className:"px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]",children:[e.jsx("option",{value:"all",children:"All Templates"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"promotional",children:"Promotional"}),e.jsx("option",{value:"newsletter",children:"Newsletter"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{value:I,onChange:Q=>se(Q.target.value),placeholder:"Search campaigns...",className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:it.map(Q=>{const he=ot(Q.audience),ke=L?._id===Q._id;return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl border border-[#444444]/50 p-5 hover:border-[#FF8C42]/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-lg",children:e.jsx(Ft,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:Q.name}),e.jsx("p",{className:"text-xs text-gray-400",children:Q.subject})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_s(Q.status)}`,children:Q.status})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(he,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-xs text-gray-400 capitalize",children:Q.audience.replace("_"," ")}),Q.template_type&&e.jsxs(e.Fragment,{children:[e.jsx(Wl,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-400 capitalize",children:Q.template_type})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Recipients"}),e.jsx("span",{className:"text-white font-semibold",children:Q.total_recipients||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Sent"}),e.jsx("span",{className:"text-green-400 font-semibold",children:Q.sent_count||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Failed"}),e.jsx("span",{className:"text-red-400 font-semibold",children:Q.failed_count||0})]}),Q.open_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Opens"}),e.jsx("span",{className:"text-blue-400 font-semibold",children:Q.open_count})]}),Q.click_count>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Clicks"}),e.jsx("span",{className:"text-purple-400 font-semibold",children:Q.click_count})]})]}),ke&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-300 mb-2",children:[e.jsx("span",{children:"Sending progress"}),e.jsxs("span",{children:[_.current,"/",_.total]})]}),e.jsx("div",{className:"w-full bg-[#1A1A1A] rounded-full h-2",children:e.jsx("div",{className:"bg-[#FF8C42] h-2 rounded-full transition-all duration-300",style:{width:`${_.total>0?_.current/_.total*100:0}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Nt(Q),className:"px-3 py-2 border border-[#444444] text-gray-300 rounded-lg hover:bg-[#FF4D4F]/10 hover:border-[#FF4D4F] hover:text-[#FF4D4F] transition-colors",title:"Delete campaign",children:e.jsx(Ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{C(Q),p(!0)},className:"px-3 py-2 border border-[#444444] text-gray-300 rounded-lg hover:bg-[#FF8C42]/10 hover:border-[#FF8C42] hover:text-[#FF8C42] transition-colors",children:e.jsx(qo,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{C(Q),w(!0)},className:"px-3 py-2 border border-[#444444] text-gray-300 rounded-lg hover:bg-[#FF8C42]/10 hover:border-[#FF8C42] hover:text-[#FF8C42] transition-colors",children:e.jsx(If,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[Q.status==="draft"&&e.jsxs("button",{onClick:()=>me(Q),disabled:ke,className:"px-3 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF7A2B] transition-colors flex items-center space-x-2 disabled:opacity-50",children:[ke?e.jsx(mp,{className:"w-4 h-4 animate-spin"}):e.jsx($o,{className:"w-4 h-4"}),e.jsx("span",{children:"Send"})]}),Q.status==="scheduled"&&e.jsx("button",{onClick:()=>Ze({id:Q._id,status:"draft"}),className:"px-3 py-2 border border-[#444444] text-gray-300 rounded-lg hover:bg-[#FF8C42]/10 hover:border-[#FF8C42] hover:text-[#FF8C42] transition-colors",children:e.jsx(yj,{className:"w-4 h-4"})})]})]})]},Q._id)})}),c&&Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>x(!1)}),e.jsxs("div",{className:"relative w-full max-w-7xl max-h-[95vh] overflow-hidden transform rounded-3xl bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] border border-[#333333] shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#333333] bg-gradient-to-r from-[#FF8C42]/10 to-transparent",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#FF8C42] to-[#FF6B1A] flex items-center justify-center",children:e.jsx(Ft,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Create Email Campaign"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Design and send professional email campaigns"})]})]}),e.jsx("button",{onClick:()=>x(!1),className:"w-10 h-10 rounded-xl bg-[#333333] hover:bg-[#FF8C42]/20 flex items-center justify-center transition-all duration-200 group",children:e.jsx(rt,{className:"w-5 h-5 text-gray-400 group-hover:text-[#FF8C42] transition-colors"})})]}),e.jsx("div",{className:"h-[calc(95vh-120px)] overflow-y-auto",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:Q=>{Q.preventDefault(),ae()},className:"space-y-6",children:[e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#333333]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(Sr,{className:"w-4 h-4 text-[#FF8C42]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Campaign Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Campaign Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Summer Promo Blast",value:B.name,onChange:Q=>k(he=>({...he,name:Q.target.value})),required:!0,className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#444444] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Subject Line ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Get 20% off this week!",value:B.subject,onChange:Q=>k(he=>({...he,subject:Q.target.value})),required:!0,className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#444444] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"Recipients"}),e.jsx("button",{type:"button",onClick:()=>{const Q=B.audience||"all_customers";if(Z("create"),P(Q),S(""),!q.length){const he=ee(Te||[],Q,"");z(he)}A(null),M(!0)},className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#444444] text-white rounded-xl text-sm text-left hover:border-[#FF8C42] focus:outline-none focus:ring-2 focus:ring-[#FF8C42] transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:vs(B.audience)}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",q.length||js(B.audience||"all_customers"),")"]})]}),e.jsx("span",{className:"text-[#FF8C42] font-medium",children:"Change"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:"From Email (Handled by EmailJS)"}),e.jsx("input",{type:"email",placeholder:"noreply@tpxbarber.com",value:B.from_email||Lo,onChange:Q=>k(he=>({...he,from_email:Q.target.value})),className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#444444] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"From email is configured in your EmailJS template settings."})]})]})]})]}),e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#333333]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(Wl,{className:"w-4 h-4 text-[#FF8C42]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Email Template"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:xt.map(Q=>e.jsx(Sp,{template:Q,isSelected:pe&&pe.name===Q.name,onSelect:wt},Q.id))})]}),e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#333333]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(d8,{className:"w-4 h-4 text-[#FF8C42]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Template Content"})]}),!pe&&e.jsx("div",{className:"text-sm text-gray-400",children:"Select a template above to customize its content."}),pe?.id==="marketing"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Main Content"}),e.jsx("textarea",{rows:4,value:B.templateData?.mainContent||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,mainContent:Q.target.value}})),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]",placeholder:"We have an amazing offer just for you."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button Text"}),e.jsx("input",{type:"text",value:B.templateData?.buttonText||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,buttonText:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button URL"}),e.jsx("input",{type:"url",value:B.templateData?.buttonUrl||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,buttonUrl:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]",placeholder:"#"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Footer Text"}),e.jsx("input",{type:"text",value:B.templateData?.footerText||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,footerText:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]"})]})]}),pe?.id==="promotional"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Discount %"}),e.jsx("input",{type:"number",value:B.templateData?.discountPercentage||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,discountPercentage:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]",min:"1",max:"90"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Promo Code"}),e.jsx("input",{type:"text",value:B.templateData?.promoCode||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,promoCode:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Valid Until"}),e.jsx("input",{type:"date",value:B.templateData?.validUntil||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,validUntil:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Booking URL"}),e.jsx("input",{type:"url",value:B.templateData?.bookingUrl||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,bookingUrl:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]",placeholder:"#"})]})]}),pe?.id==="newsletter"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Intro"}),e.jsx("textarea",{rows:4,value:B.templateData?.mainContent||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,mainContent:Q.target.value}})),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]",placeholder:"Welcome to our latest updates and news!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button Text"}),e.jsx("input",{type:"text",value:B.templateData?.buttonText||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,buttonText:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Button URL"}),e.jsx("input",{type:"url",value:B.templateData?.buttonUrl||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,buttonUrl:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-300 text-sm mb-2",children:"Footer Text"}),e.jsx("input",{type:"text",value:B.templateData?.footerText||"",onChange:Q=>k(he=>({...he,templateData:{...he.templateData,footerText:Q.target.value}})),className:"w-full h-10 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42]"})]})]})]}),e.jsxs("div",{className:"bg-[#222222] rounded-2xl p-6 border border-[#333333]",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(jt,{className:"w-4 h-4 text-[#FF8C42]"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Schedule Campaign"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>k(Q=>({...Q,scheduled_at:null})),className:`px-6 py-3 rounded-xl text-sm font-medium transition-all ${B.scheduled_at?"bg-[#333333] text-gray-300 hover:bg-[#444444]":"bg-[#FF8C42] text-white shadow-lg shadow-[#FF8C42]/20"}`,children:[e.jsx(Fj,{className:"w-4 h-4 mr-2 inline"}),"Send Now"]}),e.jsxs("button",{type:"button",onClick:()=>k(Q=>({...Q,scheduled_at:Date.now()+36e5})),className:`px-6 py-3 rounded-xl text-sm font-medium transition-all ${B.scheduled_at?"bg-[#FF8C42] text-white shadow-lg shadow-[#FF8C42]/20":"bg-[#333333] text-gray-300 hover:bg-[#444444]"}`,children:[e.jsx(jt,{className:"w-4 h-4 mr-2 inline"}),"Schedule"]})]}),B.scheduled_at&&e.jsx("div",{className:"mt-4",children:e.jsx("input",{type:"datetime-local",value:new Date(B.scheduled_at).toISOString().slice(0,16),onChange:Q=>k(he=>({...he,scheduled_at:new Date(Q.target.value).getTime()})),className:"w-full h-12 px-4 bg-[#1A1A1A] border border-[#444444] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200"})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-[#333333]",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-6 py-3 bg-[#333333] hover:bg-[#444444] text-gray-300 rounded-xl text-sm font-medium transition-all duration-200",children:"Cancel"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>N(!0),className:"px-6 py-3 border border-[#444444] hover:border-[#FF8C42] hover:bg-[#FF8C42]/10 text-gray-200 rounded-xl text-sm font-medium transition-all duration-200",children:"Preview Email"}),e.jsxs("button",{type:"button",className:"px-6 py-3 bg-[#444444] hover:bg-[#555555] text-gray-300 rounded-xl text-sm font-medium transition-all duration-200 flex items-center",children:[e.jsx(na,{className:"w-4 h-4 mr-2"}),"Save Draft"]}),e.jsxs("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF6B1A] hover:from-[#FF6B1A] hover:to-[#FF8C42] text-white rounded-xl text-sm font-semibold transition-all duration-200 shadow-lg shadow-[#FF8C42]/20 flex items-center",children:[e.jsx($o,{className:"w-4 h-4 mr-2"}),"Create Campaign"]})]})]})]})})})]})]})}),document.body),y&&Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>N(!1)}),e.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Email Preview"}),e.jsx("button",{onClick:()=>N(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"min-h-[400px] bg-white rounded-xl overflow-hidden border border-gray-200",children:e.jsx(Dp,{selectedTemplate:pe,campaignForm:B})})})]})]})}),document.body),u&&Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>g(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl transform rounded-3xl bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] border border-[#333333] shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#333333] bg-gradient-to-r from-[#FF8C42]/10 to-transparent",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#FF8C42] to-[#FF6B1A] flex items-center justify-center",children:e.jsx(Wl,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Choose Email Template"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Select a professional template or create custom HTML"})]})]}),e.jsx("button",{onClick:()=>g(!1),className:"w-10 h-10 rounded-xl bg-[#333333] hover:bg-[#FF8C42]/20 flex items-center justify-center transition-all duration-200 group",children:e.jsx(rt,{className:"w-5 h-5 text-gray-400 group-hover:text-[#FF8C42] transition-colors"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:xt.map(Q=>{const he=Q.icon,ke=pe&&pe.name===Q.name;return e.jsxs("button",{onClick:()=>wt(Q),className:`p-6 bg-[#222222] border-2 rounded-2xl transition-all duration-200 text-left group ${ke?"border-[#FF8C42] bg-[#FF8C42]/5":"border-[#444444] hover:border-[#FF8C42] hover:bg-[#FF8C42]/5"}`,children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-colors ${ke?"bg-[#FF8C42]/30":"bg-[#FF8C42]/20 group-hover:bg-[#FF8C42]/30"}`,children:e.jsx(he,{className:"w-6 h-6 text-[#FF8C42]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:Q.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Pre-designed template"})]}),ke&&e.jsx("div",{className:"w-6 h-6 bg-[#FF8C42] rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:Q.description}),e.jsxs("div",{className:"mt-4 flex items-center text-[#FF8C42] text-sm font-medium",children:[e.jsx("span",{children:ke?"Selected":"Select Template"}),e.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},Q.id)})})})]})]})}),document.body),U&&Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[10050] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:Ce}),e.jsxs("div",{className:"relative w-full max-w-3xl transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl z-[10051]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Select Recipients"}),e.jsx("button",{onClick:Ce,className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex space-x-2",children:[{id:"all_customers",label:"All"},{id:"new_customers",label:"New"},{id:"returning_customers",label:"Regular"}].map(Q=>e.jsx("button",{onClick:()=>{P(Q.id),V==="create"&&k(ke=>({...ke,audience:Q.id}));const he=ee(Te,Q.id,E);z(he)},className:`px-3 py-1.5 text-xs rounded-lg border ${$===Q.id?"border-[#FF8C42] text-[#FF8C42] bg-[#FF8C42]/10":"border-[#444444] text-gray-300 hover:bg-[#444444]/50"}`,children:Q.label},Q.id))}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>{const Q=ee(Te,$,E);z(Q)},className:"text-xs px-3 py-1.5 border border-[#FF8C42] text-[#FF8C42] rounded-lg hover:bg-[#FF8C42]/10",children:"Select All"}),e.jsx("button",{onClick:()=>z([]),className:"text-xs px-3 py-1.5 border border-[#6B6B6B] text-[#6B6B6B] rounded-lg hover:bg-[#6B6B6B]/10",children:"Clear"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:E,onChange:Q=>{S(Q.target.value)},placeholder:"Search customers...",className:"w-full h-10 px-4 bg-[#1A1A1A] border border-[#444444] text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] pr-10"}),e.jsx(Jt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),q.length>0&&e.jsx("div",{className:"border border-[#444444] rounded-xl p-2",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(Q=>e.jsxs("div",{className:"flex items-center space-x-1 bg-[#FF8C42]/10 border border-[#FF8C42]/20 rounded-lg px-2 py-1 text-xs",children:[e.jsx("span",{className:"text-white",children:Q.username||Q.email}),e.jsx("button",{onClick:()=>z(he=>he.filter(ke=>(ke._id||ke.id)!==(Q._id||Q.id))),className:"text-[#FF8C42] hover:text-[#FF7A2B]",children:e.jsx(rt,{className:"w-3 h-3"})})]},Q._id||Q.id))})}),e.jsx("div",{className:"border border-[#444444] rounded-xl max-h-72 overflow-y-auto p-2",children:ee(Te,$,E).map(Q=>{const he=Q._id||Q.id,ke=q.find(ze=>(ze._id||ze.id)===he);return e.jsxs("button",{onClick:()=>{z(ze=>ke?ze.filter(Pe=>(Pe._id||Pe.id)!==he):[...ze,Q])},className:`w-full flex items-center text-left space-x-3 p-2 rounded-lg ${ke?"bg-[#FF8C42]/10 border border-[#FF8C42]/20":"hover:bg-[#222222]"} `,children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${ke?"bg-[#FF8C42] border-[#FF8C42]":"border-[#555555]"}`,children:ke&&e.jsx(Qe,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-white",children:Q.username||Q.email}),e.jsx("div",{className:"text-xs text-gray-400",children:Q.email})]})]},he)})}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-[#444444]/50",children:[e.jsx("button",{onClick:Ce,className:"flex-1 px-3 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg text-sm hover:bg-[#555555]/70",children:"Cancel"}),e.jsx("button",{onClick:async()=>{la?await me(L,!0):Ce()},disabled:!q.length,className:"flex-1 px-3 py-2 bg-[#FF8C42] text-white rounded-lg text-sm hover:bg-[#FF8C42]/90 disabled:opacity-50",children:la?`Send to ${q.length}`:"Done"})]})]})]})]})}),document.body),b&&D&&Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>p(!1)}),e.jsxs("div",{className:"relative w-full max-w-4xl max-h-[85vh] overflow-hidden transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Campaign Preview"}),e.jsx("button",{onClick:()=>p(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsx("div",{className:"p-4 max-h-[calc(85vh-120px)] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#444444] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Campaign Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-white",children:D.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Subject:"}),e.jsx("span",{className:"text-white",children:D.subject})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Audience:"}),e.jsx("span",{className:"text-white capitalize",children:D.audience.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_s(D.status)}`,children:D.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-gray-300",children:D.createdAt?new Date(D.createdAt).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#444444] rounded-lg p-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center",children:[e.jsx(ks,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Performance"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Recipients:"}),e.jsx("span",{className:"text-white",children:D.total_recipients||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Sent:"}),e.jsx("span",{className:"text-green-400",children:D.sent_count||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Opens:"}),e.jsx("span",{className:"text-blue-400",children:D.open_count||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Clicks:"}),e.jsx("span",{className:"text-purple-400",children:D.click_count||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Failed:"}),e.jsx("span",{className:"text-red-400",children:D.failed_count||0})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center",children:[e.jsx(qo,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Email Preview"]}),e.jsx("div",{className:"bg-white border border-[#444444] rounded-lg p-4 max-h-96 overflow-auto",children:(()=>{try{const Q=xt.find(he=>he.id===D.template_type);if(Q){let he={};D.body_html&&D.body_html.trim().startsWith("{")&&(he=JSON.parse(D.body_html)?.templateData||{});const ke=Q.component;return e.jsx("div",{className:"transform scale-75 origin-top-left w-[133%]",children:e.jsx(ke,{...he,subject:D.subject})})}}catch{}return e.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:D.body_html||'<p class="text-gray-400">No content</p>'}})})()})]})]})})]})]})}),document.body),j&&D&&Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>w(!1)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Send Test Email"}),e.jsx("button",{onClick:()=>w(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-300 font-medium text-sm mb-2",children:["Test Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",placeholder:"test@example.com",value:Y,onChange:Q=>ge(Q.target.value),className:"w-full h-9 px-3 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent transition-all duration-200",required:!0})]}),e.jsxs("div",{className:"bg-[#1A1A1A] border border-[#444444] rounded-lg p-4",children:[e.jsxs("h4",{className:"text-white font-semibold mb-2 flex items-center",children:[e.jsx(If,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Campaign: ",D.name]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Subject: ",D.subject]}),e.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:["Audience: ",D.audience.replace("_"," ")]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-[#444444]/50",children:[e.jsx("button",{type:"button",onClick:()=>w(!1),className:"flex-1 px-3 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg text-sm hover:bg-[#555555]/70 transition-all duration-200",children:"Cancel"}),e.jsx("button",{type:"button",onClick:Ie,disabled:!Y,className:"flex-1 px-3 py-2 bg-[#FF8C42] text-white rounded-lg text-sm hover:bg-[#FF8C42]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Test"})]})]})})]})]})}),document.body)]})});_p.displayName="EmailMarketing";const q3=({onRefresh:n,user:r})=>{const[l,i]=v.useState("overview"),[c,x]=v.useState(null),[u,g]=v.useState(!1),[m,f]=v.useState(!1),[b,p]=v.useState(null),[y,N]=v.useState(new Set),[j,w]=v.useState(!1),[D,C]=v.useState(!1),[L,A]=v.useState(!1),[_,O]=v.useState(!1),[U,M]=v.useState(!1),[E,S]=v.useState(null),[$,P]=v.useState(!1),[q,z]=v.useState(""),[V,Z]=v.useState(null),[B,k]=v.useState({payment_method:"bank_transfer",payment_reference:"",notes:""}),[I,se]=v.useState(!1),[T,H]=v.useState({startDate:"",endDate:""}),[oe,W]=v.useState({}),[le,K]=v.useState({}),[Y,ge]=v.useState(!1),[pe,ye]=v.useState(!1);if(!r)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Loading user data..."}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please ensure you are logged in"})]})});if(!r.branch_id)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-red-500/20 rounded-full",children:e.jsx(at,{className:"h-8 w-8 text-red-400"})})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Branch Required"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Payroll management requires a branch assignment. Your user account is not assigned to a branch."}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please contact an administrator to assign your account to a branch."})]})});const[Ae,Te]=v.useState({default_commission_rate:10,payout_frequency:"weekly",payout_day:5,tax_rate:0}),Ge=fe(J.services.payroll.getPayrollSettingsByBranch,r&&r.branch_id?{branch_id:r.branch_id}:"skip"),Ze=fe(J.services.payroll.getPayrollPeriodsByBranch,r&&r.branch_id?{branch_id:r.branch_id}:"skip"),Ye=fe(J.services.payroll.getPayrollSummaryByBranch,r&&r.branch_id?{branch_id:r.branch_id,limit:10}:"skip"),Xe=fe(J.services.barbers.getBarbersByBranch,r&&r.branch_id?{branch_id:r.branch_id}:"skip"),pt=fe(J.services.services.getActiveServicesByBranch,r&&r.branch_id?{branch_id:r.branch_id}:"skip"),it=fe(J.services.payroll.getServiceCommissionRatesByBranch,r&&r.branch_id?{branch_id:r.branch_id}:"skip"),xe=fe(J.services.payroll.getBarberDailyRatesByBranch,r&&r.branch_id?{branch_id:r.branch_id}:"skip"),Fe=fe(J.services.payroll.getPayrollRecordsByPeriod,c&&c._id?{payroll_period_id:c._id}:"skip"),ae=fe(J.services.payroll.getBookingsByBarberAndPeriod,U&&E&&c?{barber_id:E.barber_id,period_start:c.period_start,period_end:c.period_end}:"skip"),G=Ee(J.services.payroll.createOrUpdatePayrollSettings),me=Ee(J.services.payroll.createPayrollPeriod),Ce=Ee(J.services.payroll.calculatePayrollForPeriod),ee=Ee(J.services.payroll.markPayrollRecordAsPaid);Ee(J.services.payroll.setBarberCommissionRate);const _e=Ee(J.services.payroll.setServiceCommissionRate),Ue=Ee(J.services.payroll.setBarberDailyRate),Ie=Go(J.services.payroll.getBookingsForPrint),Nt=Go(J.services.payroll.getBookingsSummaryForPrint),xt=Ee(J.services.payroll.deletePayrollPeriod);v.useEffect(()=>{Ge&&Te({default_commission_rate:Ge.default_commission_rate,payout_frequency:Ge.payout_frequency,payout_day:Ge.payout_day,tax_rate:Ge.tax_rate||0})},[Ge]),v.useEffect(()=>{const de=Array.isArray(Ze)?Ze:[];de.length>0&&!c&&x(de[0])},[Ze,c]),v.useEffect(()=>{if(!c?._id)return;const Ne=(Array.isArray(Ze)?Ze:[]).find(De=>De._id===c._id);Ne&&(Ne.updatedAt!==c.updatedAt||Ne.status!==c.status||Ne.total_commissions!==c.total_commissions||Ne.total_earnings!==c.total_earnings||Ne.total_deductions!==c.total_deductions)&&x(Ne)},[Ze,c]);const zt=v.useMemo(()=>{const de=Array.isArray(Ye)?Ye:[],De=(Array.isArray(Xe)?Xe:[]).filter(Ms=>Ms?.is_active).length,Be=de[0],Oe=de[1],Ve=Be?.total_commissions||0,mt=Oe?.total_commissions||0,Ns=mt>0?(Ve-mt)/mt*100:0,Ts=de.reduce((Ms,tr)=>Ms+(tr.pending_records||0),0),pa=de.reduce((Ms,tr)=>Ms+(tr.paid_records||0),0);return{totalBarbers:De,currentPayout:Ve,payoutChange:Math.abs(Ns),payoutTrend:Ns>=0?"up":"down",pendingPayments:Ts,totalPaid:pa,averageCommission:De>0?Ve/De:0}},[Ye,Xe]),wt=()=>{const de=Ge?.payout_frequency||"weekly",Ne=new Date;let De,Be;if(de==="weekly"){const Oe=Ne.getDay(),Ve=Oe===0?6:Oe-1;De=new Date(Ne),De.setDate(Ne.getDate()-Ve),Be=new Date(De),Be.setDate(De.getDate()+6)}else de==="bi_weekly"?(De=new Date(Ne),De.setDate(Ne.getDate()-13),Be=new Date(Ne)):(De=new Date(Ne.getFullYear(),Ne.getMonth(),1),Be=new Date(Ne.getFullYear(),Ne.getMonth()+1,0));return{startDate:De.toISOString().split("T")[0],endDate:Be.toISOString().split("T")[0]}},_s=()=>{if(!Ge){p("Please configure payroll settings first before generating periods"),g(!0);return}const de=wt();H(de),w(!0)},ot=async()=>{if(r?.branch_id)try{f(!0),p(null),await G({branch_id:r.branch_id,default_commission_rate:Ae.default_commission_rate,payout_frequency:Ae.payout_frequency,payout_day:Ae.payout_day,tax_rate:Ae.tax_rate,created_by:r._id}),g(!1)}catch(de){p("Failed to save payroll settings"),console.error("Payroll settings error:",de)}finally{f(!1)}},vs=async()=>{if(!(!r?.branch_id||!T.startDate||!T.endDate))try{f(!0),p(null);const de=new Date(T.startDate+"T00:00:00").getTime(),Ne=new Date(T.endDate+"T23:59:59").getTime();if(de>=Ne){p("End date must be after start date");return}await me({branch_id:r.branch_id,period_start:de,period_end:Ne,period_type:Ge?.payout_frequency||"weekly",created_by:r._id}),w(!1),H({startDate:"",endDate:""})}catch(de){p("Failed to create payroll period"),console.error("Create period error:",de)}finally{f(!1)}},js=async de=>{if(de?._id)try{if(de.status==="calculated"&&!(typeof window<"u"?window.confirm("Recalculating will replace existing payroll records for this period. Continue?"):!0))return;f(!0),p(null),await Ce({payroll_period_id:de._id,calculated_by:r._id})}catch(Ne){p("Failed to calculate payroll"),console.error("Calculate payroll error:",Ne)}finally{f(!1)}},la=async(de,Ne,De,Be)=>{try{f(!0),await ee({payroll_record_id:de,payment_method:Ne,payment_reference:De,notes:Be,paid_by:r._id})}catch(Oe){p("Failed to mark payment as complete"),console.error("Mark paid error:",Oe)}finally{f(!1)}},Q=()=>{f(!0),p(null),n?.(),setTimeout(()=>f(!1),1e3)},he=v.useMemo(()=>{const de=new Map;return(Array.isArray(it)?it:[]).forEach(Ne=>{de.set(Ne.service_id,Ne)}),de},[it]),ke=v.useMemo(()=>{const de=new Map;return(Array.isArray(xe)?xe:[]).forEach(Ne=>{const De=de.get(Ne.barber_id);(!De||(Ne.updatedAt||0)>(De.updatedAt||0))&&de.set(Ne.barber_id,Ne)}),de},[xe]),ze=de=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(de),Pe=de=>new Date(de).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),At=`
    body{font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#111; color:#e5e5e5; padding:24px;}
    .card{background:#1a1a1a; border:1px solid #333; border-radius:12px; padding:20px; margin-bottom:16px;}
    .header{display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:12px}
    .title{font-weight:800; font-size:18px}
    .grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    .row{display:flex; justify-content:space-between; margin:6px 0}
    .muted{color:#9ca3af}
    .accent{color:#ff8c42; font-weight:700}
    hr{border:0; border-top:1px solid #2b2b2b; margin:12px 0}
    @media print { body{padding:0;background:#fff;color:#111} .card{border-color:#ddd;background:#fff} .accent{color:#111} }
  `,We=de=>{const Ne=Oe=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0}).format(Oe||0),De=c?`${Pe(c.period_start)}  ${Pe(c.period_end)}`:"";let Be="";if(de.bookings_summary&&Array.isArray(de.bookings_summary.groups)&&de.bookings_summary.groups.length){const Oe=de.bookings_summary.groups.map(mt=>{const Ns=new Date(mt.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ts=(mt.rows||[]).map(Ms=>{const tr=(Ms.time||"--:--").slice(0,5);return`<div class="row"><span><span class="muted">${Ns} ${tr}</span>  ${Ms.service_name} <span class="muted"> ${Ms.customer_name}  ${Ms.booking_code}</span></span><span>${Ne(Ms.price)}</span></div>`}).join(""),pa=`<div class="row" style="font-weight:600"><span>Total (${Ns})</span><span>${Ne(mt.totalAmount)} | Sales: ${Ne(mt.totalAmount)} | Selected Pay: ${Ne(mt.selectedPay||0)}</span></div>`;return Ts+pa+"<hr/>"}).join(""),Ve=`<div class="row" style="font-weight:800"><span>Grand Total</span><span>${Ne(de.bookings_summary.grandTotalAmount)} | Sales: ${Ne(de.bookings_summary.grandTotalAmount)} | Final Daily Salary: ${Ne(de.bookings_summary.grandTotalSelectedPay||0)}</span></div>`;Be=`<hr/>${Oe}${Ve}`}else{const Oe=Array.isArray(de.bookings_detail)?de.bookings_detail:[];Oe.length&&(Be=`<hr/>${Oe.slice().sort((mt,Ns)=>(mt.updatedAt||0)-(Ns.updatedAt||0)).map(mt=>{const Ns=mt.date?new Date(mt.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):new Date(mt.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ts=(mt.time||"--:--").slice(0,5);return`<div class="row"><span><span class="muted">${Ns} ${Ts}</span>  ${mt.service_name} <span class="muted"> ${mt.customer_name}  ${mt.booking_code}</span></span><span>${Ne(mt.price)}</span></div>`}).join("")}`)}return`
      <div class="card">
        <div class="header">
          <div>
            <div class="title">${de.barber_name}</div>
            <div class="muted">Payroll Period: ${De}</div>
          </div>
          <div class="accent">Net Pay: ${Ne(de.net_pay)}</div>
        </div>
        <hr/>
        <div class="grid">
          <div>
            <div class="row"><span class="muted">Services</span><span>${de.total_services}</span></div>
            <div class="row"><span class="muted">Service Revenue</span><span>${Ne(de.total_service_revenue)}</span></div>
          </div>
          <div>
            <div class="row"><span class="muted">Final Daily Salary (per-day max of rate vs commission)</span><span>${Ne(de.daily_pay||0)}</span></div>
            <div class="row"><span class="muted">Tax Deduction</span><span>-${Ne(de.tax_deduction)}</span></div>
            <div class="row"><span class="muted">Other Deductions</span><span>-${Ne(de.other_deductions)}</span></div>
            <hr/>
            <div class="row" style="font-weight:800"><span>Net Pay</span><span class="accent">${Ne(de.net_pay)}</span></div>
          </div>
        </div>
        ${Be}
      </div>
    `},us=(de,Ne)=>`<!doctype html>
    <html>
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>${de}</title>
        <style>${At}</style>
      </head>
      <body>${Ne}</body>
    </html>`,Da=de=>{const Ne=document.createElement("iframe");Ne.style.position="fixed",Ne.style.right="0",Ne.style.bottom="0",Ne.style.width="0",Ne.style.height="0",Ne.style.border="0",document.body.appendChild(Ne);const De=Ne.contentWindow?.document;De&&(De.open(),De.write(de),De.close(),Ne.onload=()=>{setTimeout(()=>{Ne.contentWindow?.focus(),Ne.contentWindow?.print(),setTimeout(()=>document.body.removeChild(Ne),100)},150)})},Jn=async de=>{let Ne=de;if((!de.bookings_detail||de.bookings_detail.length===0)&&c)try{const[Be,Oe]=await Promise.all([Ie({barber_id:de.barber_id,period_start:c.period_start,period_end:c.period_end}),Nt({barber_id:de.barber_id,period_start:c.period_start,period_end:c.period_end})]);Ne={...de,bookings_detail:Be,bookings_summary:Oe}}catch{}const De=us(`Payroll  ${de.barber_name}`,We(Ne));Da(De)},Wn=async()=>{const de=Array.isArray(Fe)?Fe:[],De=(await Promise.all(de.map(async Ve=>{if(Ve.bookings_detail&&Ve.bookings_detail.length>0||!c)return Ve;try{const[mt,Ns]=await Promise.all([Ie({barber_id:Ve.barber_id,period_start:c.period_start,period_end:c.period_end}),Nt({barber_id:Ve.barber_id,period_start:c.period_start,period_end:c.period_end})]);return{...Ve,bookings_detail:mt,bookings_summary:Ns}}catch{return Ve}}))).map(Ve=>We(Ve)).join(`
`),Be=c?`Payroll  ${Pe(c.period_start)} to ${Pe(c.period_end)}`:"Payroll  All",Oe=us(Be,De);Da(Oe)},el=de=>{switch(de){case"weekly":return"Weekly";case"bi_weekly":return"Bi-Weekly";case"monthly":return"Monthly";default:return de}},nc=de=>{const Ne=new Set(y);Ne.has(de)?Ne.delete(de):Ne.add(de),N(Ne)},ga=()=>j?Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>w(!1)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Create Payroll Period"}),e.jsx("button",{onClick:()=>w(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Period Start Date"}),e.jsx("input",{type:"date",value:T.startDate,onChange:de=>H(Ne=>({...Ne,startDate:de.target.value})),className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Period End Date"}),e.jsx("input",{type:"date",value:T.endDate,onChange:de=>H(Ne=>({...Ne,endDate:de.target.value})),className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#444444]/50 p-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Period Summary"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-400",children:[e.jsxs("p",{children:["Frequency: ",Ge?.payout_frequency||"weekly"]}),e.jsxs("p",{children:["Duration: ",T.startDate&&T.endDate?Math.ceil((new Date(T.endDate)-new Date(T.startDate))/(1e3*60*60*24))+1:0," days"]}),e.jsxs("p",{children:["Commission Rate: ",Ge?.default_commission_rate||10,"%"]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#555555]/70 transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:vs,disabled:m||!T.startDate||!T.endDate,className:"flex-1 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating...":"Create Period"})]})]})]})]})}),document.body):null,Wt=()=>u?Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>g(!1)}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Payroll Settings"}),e.jsx("button",{onClick:()=>g(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Commission Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:Ae.default_commission_rate,onChange:de=>Te(Ne=>({...Ne,default_commission_rate:parseFloat(de.target.value)||0})),className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payout Frequency"}),e.jsxs("select",{value:Ae.payout_frequency,onChange:de=>Te(Ne=>({...Ne,payout_frequency:de.target.value})),className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi_weekly",children:"Bi-Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:Ae.payout_frequency==="weekly"?"Payout Day (0=Sunday, 6=Saturday)":"Payout Day of Month"}),e.jsx("input",{type:"number",min:Ae.payout_frequency==="weekly"?"0":"1",max:Ae.payout_frequency==="weekly"?"6":"31",value:Ae.payout_day,onChange:de=>Te(Ne=>({...Ne,payout_day:parseInt(de.target.value)||0})),className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tax Rate (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:Ae.tax_rate,onChange:de=>Te(Ne=>({...Ne,tax_rate:parseFloat(de.target.value)||0})),className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200",children:"Cancel"}),e.jsx("button",{onClick:ot,disabled:m,className:"flex-1 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Saving...":"Save Settings"})]})]})]})]})}),document.body):null,ms=()=>{if(!U||!E)return null;const Ne=(Array.isArray(ae)?ae:[]).reduce((Be,Oe)=>{const Ve=Oe.date||new Date(Oe.updatedAt).toISOString().split("T")[0];return Be[Ve]||(Be[Ve]=[]),Be[Ve].push(Oe),Be},{}),De=Object.keys(Ne).sort((Be,Oe)=>new Date(Oe)-new Date(Be));return Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>M(!1)}),e.jsxs("div",{className:"relative w-full max-w-3xl rounded-2xl bg-gradient-to-br from-[#1F1F1F] to-[#2B2B2B] border border-[#3A3A3A] shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#3A3A3A]",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Bookings  ",E.barber_name]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[Pe(c.period_start),"  ",Pe(c.period_end)]})]}),e.jsx("button",{onClick:()=>M(!1),className:"w-8 h-8 rounded-lg bg-[#3A3A3A]/60 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors",children:e.jsx(rt,{className:"w-4 h-4 text-gray-300 hover:text-[#FF8C42]"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[ae===void 0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading bookings"})]}),ae!==void 0&&De.length===0&&e.jsx("div",{className:"bg-[#121212] border border-[#333333] rounded-lg p-6 text-center text-gray-400",children:"No completed, paid bookings found for this period."}),De.map(Be=>e.jsxs("div",{className:"rounded-xl bg-[#121212] border border-[#333333] overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-3 bg-[#171717] border-b border-[#2A2A2A] flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-white font-medium",children:new Date(Be).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[Ne[Be].length," booking",Ne[Be].length>1?"s":""]})]}),e.jsx("div",{className:"divide-y divide-[#222]",children:Ne[Be].map(Oe=>{const Ve=Oe.time&&Oe.time.length>=4?Oe.time.slice(0,5):"--:--";return e.jsxs("div",{className:"px-5 py-4 flex items-center justify-between hover:bg-[#161616] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"inline-flex items-center justify-center rounded-md bg-[#232323] border border-[#3A3A3A] px-3 py-1.5",children:e.jsx("span",{className:"font-mono text-sm font-semibold text-[#FF8C42] leading-none",children:Ve})})}),e.jsxs("div",{className:"leading-tight",children:[e.jsx("div",{className:"text-white font-semibold",children:Oe.service_name}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Oe.customer_name,"  ",Oe.booking_code]})]})]}),e.jsx("div",{className:"text-right pl-3",children:e.jsx("div",{className:"text-[#FF8C42] font-semibold",children:ze(Oe.price)})})]},Oe.id)})})]},Be))]})]})]})}),document.body)},er=()=>{if(!L)return null;const de=Array.isArray(pt)?pt:[],Ne=async()=>{if(!r?.branch_id)return;const De=Object.entries(oe).map(([Be,Oe])=>({serviceId:Be,rate:parseFloat(String(Oe))})).filter(Be=>!isNaN(Be.rate)).filter(Be=>{const Oe=he.get(Be.serviceId);return!Oe||Number(Oe.commission_rate)!==Number(Be.rate)});if(De.length!==0){ge(!0);try{for(const Be of De)await _e({branch_id:r.branch_id,service_id:Be.serviceId,commission_rate:Be.rate,created_by:r._id});W({})}catch(Be){console.error(Be),p("Failed to save some service commission rates")}finally{ge(!1)}}};return Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>A(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Service Commission Rates"}),e.jsx("button",{onClick:()=>A(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 border-b border-[#444444]/50",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"Service"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Current Rate"}),e.jsx("th",{className:"text-right py-2 px-2",children:"New Rate (%)"})]})}),e.jsx("tbody",{children:de.map(De=>{const Be=he.get(De._id),Oe=oe[De._id]??Be?.commission_rate??"";return e.jsxs("tr",{className:"border-b border-[#444444]/20",children:[e.jsx("td",{className:"py-2 px-2 text-white",children:De.name}),e.jsx("td",{className:"py-2 px-2 text-right text-gray-300",children:Be?`${Be.commission_rate}%`:""}),e.jsx("td",{className:"py-2 px-2 text-right",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:Oe,onChange:Ve=>W(mt=>({...mt,[De._id]:Ve.target.value})),className:"w-28 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent text-right"})})]},De._id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] text-sm",children:"Close"}),e.jsx("button",{onClick:Ne,disabled:Y||Object.keys(oe).length===0,className:"px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 disabled:opacity-50 text-sm",children:Y?"Saving":"Save All Changes"})]})]})]})]})}),document.body)},tl=()=>{if(!_)return null;const de=Array.isArray(Xe)?Xe:[],Ne=async()=>{if(!r?.branch_id)return;const De=Object.entries(le).map(([Be,Oe])=>({barberId:Be,rate:parseFloat(String(Oe))})).filter(Be=>!isNaN(Be.rate)).filter(Be=>{const Oe=ke.get(Be.barberId);return!Oe||Number(Oe.daily_rate)!==Number(Be.rate)});if(De.length!==0){ye(!0);try{for(const Be of De)await Ue({barber_id:Be.barberId,branch_id:r.branch_id,daily_rate:Be.rate,created_by:r._id});K({})}catch(Be){console.error(Be),p("Failed to save some barber daily rates")}finally{ye(!1)}}};return Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>O(!1)}),e.jsxs("div",{className:"relative w-full max-w-2xl rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Barber Daily Rates"}),e.jsx("button",{onClick:()=>O(!1),className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 border-b border-[#444444]/50",children:[e.jsx("th",{className:"text-left py-2 px-2",children:"Barber"}),e.jsx("th",{className:"text-right py-2 px-2",children:"Current Daily Rate"}),e.jsx("th",{className:"text-right py-2 px-2",children:"New Daily Rate"})]})}),e.jsx("tbody",{children:de.map(De=>{const Be=ke.get(De._id),Oe=le[De._id]??Be?.daily_rate??"";return e.jsxs("tr",{className:"border-b border-[#444444]/20",children:[e.jsx("td",{className:"py-2 px-2 text-white",children:De.full_name}),e.jsx("td",{className:"py-2 px-2 text-right text-gray-300",children:Be?ze(Be.daily_rate):""}),e.jsx("td",{className:"py-2 px-2 text-right",children:e.jsx("input",{type:"number",min:"0",step:"1",value:Oe,onChange:Ve=>K(mt=>({...mt,[De._id]:Ve.target.value})),className:"w-28 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-2 py-1 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent text-right"})})]},De._id)})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] text-sm",children:"Close"}),e.jsx("button",{onClick:Ne,disabled:pe||Object.keys(le).length===0,className:"px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 disabled:opacity-50 text-sm",children:pe?"Saving":"Save All Changes"})]})]})]})]})}),document.body)},lc=()=>{if(!D||!E)return null;const de=async Ne=>{Ne.preventDefault();try{se(!0),await la(E._id,B.payment_method,B.payment_reference,B.notes),C(!1),S(null),k({payment_method:"bank_transfer",payment_reference:"",notes:""})}catch(De){console.error("Payment submission error:",De)}finally{se(!1)}};return Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:()=>{C(!1),S(null)}}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] border border-[#444444]/50 shadow-2xl transition-all z-[10000]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/50",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Mark as Paid"}),e.jsx("button",{onClick:()=>{C(!1),S(null)},className:"w-8 h-8 rounded-lg bg-[#444444]/50 hover:bg-[#FF8C42]/20 flex items-center justify-center transition-colors duration-200",children:e.jsx(rt,{className:"w-4 h-4 text-gray-400 hover:text-[#FF8C42]"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#444444]/50 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Barber:"}),e.jsx("span",{className:"text-sm font-medium text-white",children:E?.barber_name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Net Pay:"}),e.jsxs("span",{className:"text-lg font-bold text-[#FF8C42]",children:["",E?.net_pay?.toLocaleString()||"0"]})]})]})}),e.jsxs("form",{onSubmit:de,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Method"}),e.jsxs("select",{value:B.payment_method,onChange:Ne=>k(De=>({...De,payment_method:Ne.target.value})),className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",required:!0,children:[e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"digital_wallet",children:"Digital Wallet"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Reference"}),e.jsx("input",{type:"text",value:B.payment_reference,onChange:Ne=>k(De=>({...De,payment_reference:Ne.target.value})),placeholder:"Transaction ID, check number, etc.",className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:B.notes,onChange:Ne=>k(De=>({...De,notes:Ne.target.value})),placeholder:"Additional notes about the payment...",rows:3,className:"w-full bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent resize-none"})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{C(!1),S(null)},className:"flex-1 px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200",disabled:I,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:I,className:"flex-1 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:I?"Processing...":"Mark as Paid"})]})]})]})]})]})}),document.body)},ic=()=>Ge===void 0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payroll settings..."})]}):Ge===null||!Ge?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-[#FF8C42]/20 rounded-full",children:e.jsx(Sr,{className:"h-8 w-8 text-[#FF8C42]"})})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Payroll Setup Required"}),e.jsx("p",{className:"text-gray-300 mb-6 max-w-md mx-auto",children:"Configure your payroll settings to start managing barber commissions and processing payments."}),e.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 font-medium",children:"Configure Payroll Settings"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Setup Guide"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-[#FF8C42] text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),e.jsx("span",{className:"text-gray-300",children:"Set default commission rate (recommended: 10%)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-[#FF8C42] text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),e.jsx("span",{className:"text-gray-300",children:"Choose payout frequency (weekly, bi-weekly, or monthly)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-[#FF8C42] text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),e.jsx("span",{className:"text-gray-300",children:"Configure tax rate if applicable"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"4"}),e.jsx("span",{className:"text-gray-400",children:"Generate your first payroll period"})]})]})]})]}):Ye===void 0||Xe===void 0||Ge===void 0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading payroll data..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-[#FF8C42]/20 rounded-lg",children:e.jsx(gt,{className:"h-6 w-6 text-[#FF8C42]"})}),e.jsx(Fs,{className:"h-4 w-4 text-green-400"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active Barbers"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:zt.totalBarbers}),e.jsx("p",{className:"text-xs text-green-400",children:"Ready for payroll"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(Ut,{className:"h-6 w-6 text-green-400"})}),e.jsx(Fs,{className:`h-4 w-4 ${zt.payoutTrend==="up"?"text-green-400":"text-red-400"}`})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Current Period Payout"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:ze(zt.currentPayout)}),e.jsxs("p",{className:`text-xs ${zt.payoutTrend==="up"?"text-green-400":"text-red-400"}`,children:[zt.payoutTrend==="up"?"+":"-",zt.payoutChange.toFixed(1),"% from last period"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e.jsx(jt,{className:"h-6 w-6 text-yellow-400"})}),e.jsx(at,{className:"h-4 w-4 text-yellow-400"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Pending Payments"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:zt.pendingPayments}),e.jsx("p",{className:"text-xs text-yellow-400",children:"Require processing"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(ai,{className:"h-6 w-6 text-blue-400"})}),e.jsx(Ga,{className:"h-4 w-4 text-green-400"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Average Commission"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:ze(zt.averageCommission)}),e.jsx("p",{className:"text-xs text-gray-400",children:"Per barber"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Payroll Periods"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Latest payroll periods and their status"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:_s,disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"Create New Period"})]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-[#444444]/50",children:[e.jsx("th",{className:"text-left py-4 px-4 font-medium text-gray-300",children:"Period"}),e.jsx("th",{className:"text-left py-4 px-4 font-medium text-gray-300",children:"Type"}),e.jsx("th",{className:"text-left py-4 px-4 font-medium text-gray-300",children:"Status"}),e.jsx("th",{className:"text-right py-4 px-4 font-medium text-gray-300",children:"Total Payout"}),e.jsx("th",{className:"text-center py-4 px-4 font-medium text-gray-300",children:"Barbers"}),e.jsx("th",{className:"text-center py-4 px-4 font-medium text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{children:(Array.isArray(Ye)?Ye:[]).map(de=>e.jsxs("tr",{className:"border-b border-[#444444]/20 hover:bg-[#1A1A1A]/30 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[Pe(de.period_start)," - ",Pe(de.period_end)]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Created ",Pe(de.createdAt)]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-sm text-gray-300",children:el(de.period_type)})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${de.status==="paid"?"bg-green-500/20 text-green-400":de.status==="calculated"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:de.status==="paid"?"Paid":de.status==="calculated"?"Calculated":"Draft"})}),e.jsx("td",{className:"py-4 px-4 text-right",children:e.jsx("span",{className:"text-[#FF8C42] font-bold",children:ze(de.total_commissions)})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-green-400",children:de.paid_records||0}),e.jsx("span",{className:"text-gray-400",children:" / "}),e.jsx("span",{className:"text-yellow-400",children:de.pending_records||0}),e.jsx("span",{className:"text-gray-400",children:" / "}),e.jsx("span",{className:"text-white",children:de.total_barbers||0})]})}),e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{x(de),i("period")},className:"px-3 py-1 bg-[#FF8C42] text-white rounded text-xs hover:bg-[#FF8C42]/90 transition-colors",children:"View Details"}),de.status!=="paid"&&e.jsx("button",{onClick:()=>{Z(de),z(""),P(!0)},className:"px-3 py-1 bg-red-600/90 text-white rounded text-xs hover:bg-red-600 transition-colors",children:"Delete"})]})})]},de._id))})]})})]})]}),yi=()=>c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Payroll Period: ",Pe(c.period_start)," - ",Pe(c.period_end)]}),e.jsxs("p",{className:"text-sm text-gray-300",children:[el(c.period_type)," payroll  ",c.status==="paid"?"Completed":c.status==="calculated"?"Ready for Payment":"Draft"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[c.status!=="paid"&&e.jsxs("button",{onClick:()=>js(c),disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ai,{className:"h-4 w-4"}),e.jsx("span",{children:c.status==="calculated"?"Recalculate Payroll":"Calculate Payroll"})]}),Array.isArray(Fe)&&Fe.length>0&&e.jsxs("button",{onClick:Wn,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444]/60 border border-[#555555] text-gray-200 rounded-lg hover:bg-[#2A2A2A] transition-colors text-sm",children:[e.jsx(hp,{className:"h-4 w-4"}),e.jsx("span",{children:"Print All"})]}),e.jsx("button",{onClick:()=>i("overview"),className:"px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",children:"Back to Overview"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Total Earnings"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:ze(c.total_earnings)})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx($f,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Commissions"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:ze(c.total_commissions)})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ai,{className:"h-4 w-4 text-red-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Deductions"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:ze(c.total_deductions)})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(gt,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Barbers"})]}),e.jsx("p",{className:"text-lg font-bold text-white",children:(Array.isArray(Fe)?Fe:[]).length})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Barber Payroll Records"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Individual commission calculations and payment status"})]})}),e.jsx("div",{className:"space-y-4",children:(Array.isArray(Fe)?Fe:[]).map(de=>e.jsx("div",{className:"bg-[#1A1A1A] rounded-lg border border-[#333333] overflow-hidden",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:de.barber_name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[de.total_services," services  ",de.total_transactions," POS transactions"]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-[#FF8C42]",children:ze(de.net_pay)}),e.jsx("p",{className:"text-sm text-gray-400",children:"Net Pay"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${de.status==="paid"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:de.status==="paid"?"Paid":"Pending"}),e.jsx("button",{onClick:()=>{S(de),M(!0)},className:"px-3 py-1 bg-[#444444]/60 border border-[#555555] text-gray-200 rounded text-xs hover:bg-[#2A2A2A] transition-colors",children:"View Bookings"}),e.jsx("button",{onClick:()=>nc(de._id),className:"p-1 text-gray-400 hover:text-white transition-colors",children:y.has(de._id)?e.jsx(k1,{className:"h-4 w-4"}):e.jsx(Wr,{className:"h-4 w-4"})}),de.status==="calculated"&&e.jsx("button",{onClick:()=>{S(de),k({payment_method:"bank_transfer",payment_reference:"",notes:""}),C(!0)},className:"px-3 py-1 bg-[#FF8C42] text-white rounded text-xs hover:bg-[#FF8C42]/90 transition-colors",children:"Mark Paid"}),e.jsx("button",{onClick:()=>Jn(de),className:"px-3 py-1 bg-[#444444]/60 border border-[#555555] text-gray-200 rounded text-xs hover:bg-[#2A2A2A] transition-colors",children:"Print"})]})]})]}),y.has(de._id)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-[#333333]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Service Earnings"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Services:"}),e.jsx("span",{className:"text-white",children:de.total_services})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Revenue:"}),e.jsx("span",{className:"text-white",children:ze(de.total_service_revenue)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Commission (per-service rates):"}),e.jsx("span",{className:"text-[#FF8C42]",children:ze(de.gross_commission)})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Gross Commission (reference):"}),e.jsx("span",{className:"text-white",children:ze(de.gross_commission)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Final Daily Salary (per-day max of rate vs commission):"}),e.jsx("span",{className:"text-white",children:ze(de.daily_pay||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Tax Deduction:"}),e.jsxs("span",{className:"text-red-400",children:["-",ze(de.tax_deduction)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Other Deductions:"}),e.jsxs("span",{className:"text-red-400",children:["-",ze(de.other_deductions)]})]}),e.jsxs("div",{className:"flex justify-between font-medium pt-1 border-t border-[#333333]",children:[e.jsx("span",{className:"text-white",children:"Net Pay:"}),e.jsx("span",{className:"text-[#FF8C42]",children:ze(de.net_pay)})]})]})]})]}),de.status==="paid"&&de.paid_at&&e.jsx("div",{className:"mt-4 pt-3 border-t border-[#333333] text-sm",children:e.jsxs("div",{className:"flex items-center space-x-4 text-gray-400",children:[e.jsxs("span",{children:["Paid on ",Pe(de.paid_at)]}),de.payment_method&&e.jsxs("span",{children:["via ",de.payment_method]}),de.payment_reference&&e.jsxs("span",{children:["Ref: ",de.payment_reference]})]})})]})]})},de._id))})]})]}):null,Rr=()=>$&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-[#1F1F1F] border border-[#333] rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Delete Payroll Period"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"This will permanently delete the selected payroll period and all its payroll records and adjustments. This action cannot be undone."}),e.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["Type ",e.jsx("span",{className:"text-red-400 font-semibold",children:"confirm delete record"})," to proceed."]}),e.jsx("input",{type:"text",value:q,onChange:de=>z(de.target.value),placeholder:"confirm delete record",className:"w-full h-11 px-4 bg-[#121212] border border-[#333] rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-red-500/40"}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-5",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-sm bg-[#333] text-gray-200 rounded-lg hover:bg-[#2A2A2A]",children:"Cancel"}),e.jsx("button",{disabled:q.trim().toLowerCase()!=="confirm delete record",onClick:async()=>{if(V)try{f(!0),await xt({payroll_period_id:V._id}),P(!1),Z(null)}catch(de){console.error("Delete period error:",de),p("Failed to delete payroll period")}finally{f(!1)}},className:`px-4 py-2 text-sm rounded-lg ${q.trim().toLowerCase()==="confirm delete record"?"bg-red-600 text-white hover:bg-red-700":"bg-red-900/40 text-red-300/60 cursor-not-allowed"}`,children:"Delete Period"})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-black text-white",children:"Payroll Management"}),e.jsx("p",{className:"text-gray-300 mt-1",children:"Manage barber commissions and payroll processing"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",children:[e.jsx(Sr,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",children:[e.jsx($f,{className:"h-4 w-4"}),e.jsx("span",{children:"Service Rates"})]}),e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center space-x-2 px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm",children:[e.jsx(Ut,{className:"h-4 w-4"}),e.jsx("span",{children:"Daily Rates"})]}),e.jsxs("button",{onClick:Q,disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-[#444444]/50 border border-[#555555] text-gray-300 rounded-lg hover:bg-[#2A2A2A] transition-all duration-200 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(xs,{className:`h-4 w-4 ${m?"animate-spin":""}`}),e.jsx("span",{children:m?"Loading...":"Refresh"})]}),e.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF8C42]/90 transition-all duration-200 text-sm",children:[e.jsx(Xa,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]}),b&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"h-5 w-5 text-red-400"}),e.jsx("p",{className:"text-red-400",children:b}),e.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-400 hover:text-red-300",children:e.jsx(rt,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>i("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${l==="overview"?"bg-[#FF8C42] text-white":"text-gray-300 hover:text-white hover:bg-[#1A1A1A]"}`,children:"Overview"}),c&&e.jsx("button",{onClick:()=>i("period"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${l==="period"?"bg-[#FF8C42] text-white":"text-gray-300 hover:text-white hover:bg-[#1A1A1A]"}`,children:"Period Details"})]})}),l==="overview"?ic():yi(),ga(),Wt(),lc(),er(),tl(),ms(),Rr()]})},$3=()=>{const n=new Date().getFullYear();return e.jsx("footer",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A] border-t border-[#333333]/50 py-8 px-4",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",n," TPX Booking System. All rights reserved."]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Professional barbershop management solution"})]}),e.jsx("div",{className:"flex items-center justify-center space-x-3",children:e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-[#2A2A2A] border border-[#444444]/50 rounded-lg hover:border-[#FF8C42]/30 transition-colors",children:[e.jsx(R1,{className:"h-4 w-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-gray-300 text-sm font-medium",children:"Developed by"}),e.jsx("img",{src:"/img/bg-logo.png",alt:"BroadHeader Logo",className:"h-6 w-auto",onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="inline"}}),e.jsx("span",{className:"text-white font-bold text-sm hidden",style:{display:"none"},children:"BroadHeader"})]})}),e.jsx("div",{className:"text-center lg:text-right",children:e.jsxs("div",{className:"flex items-center justify-center lg:justify-end space-x-4",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"v2.0.0"}),e.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full"}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Multi-Branch System"})]})})]})})})};function I3(){const{user:n,logout:r}=Tt(),l=ys(),[i,c]=v.useState(()=>localStorage.getItem("staff_dashboard_active_tab")||"overview"),[x,u]=v.useState(null);v.useEffect(()=>{localStorage.setItem("staff_dashboard_active_tab",i)},[i]);const g=n?.role==="super_admin"?fe(J.services.bookings.getAllBookings):n?.branch_id?fe(J.services.bookings.getBookingsByBranch,{branch_id:n.branch_id}):void 0,m=n?.role==="super_admin"?fe(J.services.services.getAllServices):n?.branch_id?fe(J.services.services.getServicesByBranch,{branch_id:n.branch_id}):void 0,f=n?.role==="super_admin"?fe(J.services.barbers.getAllBarbers):n?.branch_id?fe(J.services.barbers.getBarbersByBranch,{branch_id:n.branch_id}):void 0,b=n?.role==="super_admin"?fe(J.services.vouchers.getAllVouchers):n?.branch_id?fe(J.services.vouchers.getVouchersByBranch,{branch_id:n.branch_id}):void 0,p=n?.role==="super_admin"?fe(J.services.events.getAllEvents):n?.branch_id?fe(J.services.events.getEventsByBranch,{branch_id:n.branch_id}):void 0,y=n?.role==="super_admin"?fe(J.services.auth.getAllUsers):n?.branch_id?fe(J.services.auth.getUsersByBranch,{branch_id:n.branch_id}):void 0,N=g?g.filter($=>$.status!=="completed"&&$.status!=="cancelled").length:0,w=!g||!m||!b||!f||!y?null:{totalBookings:g.length,totalServices:m.length,totalVouchers:b.length,totalBarbers:f.length,totalCustomers:y.length,todayBookings:g.filter($=>{const P=new Date().toDateString();return new Date($.date).toDateString()===P}).length,activeVouchers:b.filter($=>$.is_active).length,activeServices:m.filter($=>$.is_active).length,activeBarbers:f.filter($=>$.is_active).length},D=()=>w?e.jsxs("div",{className:"space-y-8",children:[e.jsx(s3,{stats:[{label:"Total Bookings",value:w.totalBookings,icon:"calendar"},{label:"Today's Bookings",value:w.todayBookings,icon:"clock"},{label:"Active Services",value:w.activeServices,icon:"scissors"},{label:"Active Barbers",value:w.activeBarbers,icon:"user"},{label:"Total Customers",value:w.totalCustomers,icon:"users"},{label:"Active Vouchers",value:w.activeVouchers,icon:"gift"}]}),e.jsx(a3,{activities:[]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Loading dashboard data..."})]}),C=()=>{window.location.reload()},L=()=>{switch(i){case"overview":return D();case"bookings":return e.jsx(F3,{onRefresh:C,user:n});case"services":return e.jsx(E3,{services:m||[],onRefresh:C});case"vouchers":return e.jsx(w3,{vouchers:b||[],onRefresh:C,onCreateVoucher:()=>u("voucher")});case"barbers":return e.jsx(S3,{barbers:f||[],onRefresh:C});case"users":return e.jsx(_3,{onRefresh:C});case"customers":return e.jsx(T3,{customers:y||[],onRefresh:C,onAddCustomer:()=>u("customer")});case"events":return e.jsx(R3,{events:p||[],onRefresh:C,user:n});case"reports":return e.jsx(M3,{onRefresh:C,user:n});case"products":return e.jsx(L3,{onRefresh:C});case"notifications":return e.jsx(O3,{onRefresh:C});case"payroll":return e.jsx(q3,{onRefresh:C,user:n});case"email_marketing":return e.jsx(_p,{onRefresh:C});default:return D()}},A=()=>{console.log("Create booking clicked")},_=()=>{console.log("Create voucher clicked")},O=()=>{console.log("Add customer clicked")},U=()=>{console.log("Voucher scanned")},M=()=>{console.log("Booking scanned")},E=async()=>{try{await r(),l("/auth/login")}catch($){console.error("Logout error:",$),l("/auth/login")}},S=[{id:"overview",label:"Overview",icon:"dashboard"},{id:"bookings",label:"Bookings",icon:"calendar"},{id:"services",label:"Services",icon:"scissors"},{id:"vouchers",label:"Vouchers",icon:"gift"},{id:"barbers",label:"Barbers",icon:"user"},{id:"users",label:"Users",icon:"users"},{id:"customers",label:"Customers",icon:"users"},{id:"events",label:"Events",icon:"calendar"},{id:"reports",label:"Reports",icon:"chart"},{id:"payroll",label:"Payroll",icon:"dollar-sign"},{id:"products",label:"Products",icon:"package"},{id:"notifications",label:"Notifications",icon:"bell"},{id:"email_marketing",label:"Email Marketing",icon:"mail"}];return console.log("StaffDashboard - User:",n),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0F0F0F] via-[#1A1A1A] to-[#2A2A2A] flex flex-col",children:[e.jsx(k8,{onLogout:E,user:n}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"space-y-12",children:[e.jsx(t3,{onAddCustomer:O,onCreateBooking:A,onCreateVoucher:_,onVoucherScanned:U,onBookingScanned:M,activeModal:x,setActiveModal:u}),e.jsx(r3,{tabs:S,activeTab:i,onTabChange:c,incompleteBookingsCount:N}),e.jsx("div",{className:"bg-gradient-to-br from-[#1E1E1E] to-[#2A2A2A] rounded-3xl shadow-2xl border border-[#333333]/50 p-10 backdrop-blur-sm",children:L()})]})})}),e.jsx($3,{})]})}const V3=({isOpen:n,onClose:r,onConfirm:l,transactionData:i,paymentMethod:c,setPaymentMethod:x})=>{const[u,g]=v.useState(""),[m,f]=v.useState(0),[b,p]=v.useState(!1);v.useEffect(()=>{if(c==="cash"&&u){const j=parseFloat(u)||0,w=Math.max(0,j-i.total_amount);f(w)}else f(0)},[u,c,i.total_amount]);const y=async()=>{if(c==="cash"&&(parseFloat(u)||0)<i.total_amount){alert("Cash received is less than the total amount");return}p(!0);try{await l({...i,payment_method:c,cash_received:c==="cash"?parseFloat(u):void 0,change_amount:c==="cash"?m:void 0})}catch(j){console.error("Payment failed:",j)}finally{p(!1)}},N=()=>{g(""),f(0),p(!1)};return v.useEffect(()=>{n||N()},[n]),e.jsx(ds,{isOpen:n,onClose:r,title:"Payment Confirmation",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Transaction Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsxs("span",{className:"font-medium",children:["",i.subtotal.toFixed(2)]})]}),i.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{className:"font-medium",children:["-",i.discount_amount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax (10%):"}),e.jsxs("span",{className:"font-medium",children:["",i.tax_amount.toFixed(2)]})]}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["",i.total_amount.toFixed(2)]})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"cash",label:"Cash",icon:Ut},{value:"card",label:"Card",icon:da},{value:"digital_wallet",label:"Digital Wallet",icon:da},{value:"bank_transfer",label:"Bank Transfer",icon:da}].map(j=>{const w=j.icon;return e.jsxs("button",{onClick:()=>x(j.value),className:`p-3 rounded-lg border-2 transition-all duration-200 flex items-center space-x-2 ${c===j.value?"border-[#FF8C42] bg-[#FF8C42]/10 text-[#FF8C42]":"border-gray-200 hover:border-[#FF8C42]/50 text-gray-700"}`,children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:j.label})]},j.value)})})]}),c==="cash"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cash Received"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:""}),e.jsx("input",{type:"number",value:u,onChange:j=>g(j.target.value),placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent text-lg font-medium",step:"0.01",min:"0"})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[100,200,500,1e3].map(j=>e.jsxs("button",{onClick:()=>g(j.toString()),className:"py-2 px-3 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition-colors",children:["",j]},j))}),u&&e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ai,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-800",children:"Change:"})]}),e.jsxs("span",{className:"text-xl font-bold text-green-800",children:["",m.toFixed(2)]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Items"}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[i.services.map((j,w)=>e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:j.service_name}),e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["x",j.quantity]})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",(j.price*j.quantity).toFixed(2)]})]},`service-${w}`)),i.products&&i.products.map((j,w)=>e.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:j.product_name}),e.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["x",j.quantity]})]}),e.jsxs("span",{className:"font-medium text-gray-900",children:["",(j.price*j.quantity).toFixed(2)]})]},`product-${w}`))]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:r,disabled:b,className:"flex-1 py-3 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:y,disabled:b||c==="cash"&&(!u||parseFloat(u)<i.total_amount),className:"flex-1 py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white font-bold rounded-xl hover:from-[#FF7A2B] hover:to-[#E67E37] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5"}),e.jsx("span",{children:"Confirm Payment"})]})})]})]})})},H3=({isOpen:n,onClose:r,onCustomerSelected:l,onScanQR:i,onAddNewCustomer:c})=>{const[x,u]=v.useState(""),[g,m]=v.useState("registered"),[f,b]=v.useState({name:"",phone:""}),N=(fe(J.services.auth.getAllUsers)?.filter(C=>C.role==="customer")||[]).filter(C=>C.username.toLowerCase().includes(x.toLowerCase())||C.email.toLowerCase().includes(x.toLowerCase())||C.mobile_number&&C.mobile_number.includes(x)),j=C=>{l({type:"registered",customer:C,customer_name:C.username,customer_phone:C.mobile_number}),r()},w=()=>{if(!f.name.trim()){alert("Please enter customer name");return}l({type:"walkin",customer:null,customer_name:f.name.trim(),customer_phone:f.phone.trim()}),r()},D=()=>{u(""),m("registered"),b({name:"",phone:""})};return v.useEffect(()=>{n||D()},[n]),e.jsx(ds,{isOpen:n,onClose:r,title:"Select Customer",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>m("registered"),className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 ${g==="registered"?"bg-[#FF8C42] text-white shadow-lg":"text-gray-600 hover:text-[#FF8C42]"}`,children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:"Registered Customer"})]}),e.jsxs("button",{onClick:()=>m("walkin"),className:`flex-1 py-3 px-4 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 ${g==="walkin"?"bg-[#FF8C42] text-white shadow-lg":"text-gray-600 hover:text-[#FF8C42]"}`,children:[e.jsx(ua,{className:"w-4 h-4"}),e.jsx("span",{children:"Walk-in Customer"})]})]}),g==="registered"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:x,onChange:C=>u(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]}),e.jsxs("button",{onClick:i,className:"px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",title:"Scan Customer QR",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Scan"})]}),e.jsxs("button",{onClick:c,className:"px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",title:"Add New Customer",children:[e.jsx(ua,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add New"})]})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:N.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Le,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:x?"No customers found":"No customers available"})]}):N.map(C=>e.jsx("button",{onClick:()=>j(C),className:"w-full p-4 border border-gray-200 rounded-lg hover:border-[#FF8C42] hover:bg-[#FF8C42]/5 transition-all duration-200 text-left",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#FF8C42] rounded-lg flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:C.username}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Ft,{className:"w-3 h-3"}),e.jsx("span",{children:C.email})]}),C.mobile_number&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Is,{className:"w-3 h-3"}),e.jsx("span",{children:C.mobile_number})]})]})]})]})},C._id))})]}),g==="walkin"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ua,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-800",children:"Walk-in Customer"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Enter basic information for a walk-in customer who doesn't have an account."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Customer Name *"}),e.jsx("input",{type:"text",value:f.name,onChange:C=>b(L=>({...L,name:C.target.value})),placeholder:"Enter customer name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",value:f.phone,onChange:C=>b(L=>({...L,phone:C.target.value})),placeholder:"Enter phone number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"})]})]}),e.jsxs("button",{onClick:w,disabled:!f.name.trim(),className:"w-full py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white font-bold rounded-xl hover:from-[#FF7A2B] hover:to-[#E67E37] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[e.jsx(ua,{className:"w-5 h-5"}),e.jsx("span",{children:"Select Walk-in Customer"})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx("button",{onClick:r,className:"w-full py-3 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"})})]})})},Ng=({barber:n,className:r="w-12 h-12"})=>{const[l,i]=v.useState(!1),x=fe(J.services.barbers.getImageUrl,{storageId:n.avatarStorageId})||n.avatarUrl||"/img/avatar_default.jpg";return l||!x?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 rounded-full ${r}`,children:e.jsx(Le,{className:"w-6 h-6 text-gray-500"})}):e.jsx("img",{src:x,alt:`${n.full_name} avatar`,className:`${r} rounded-full object-cover`,onError:()=>i(!0)})},Q3=()=>{const{user:n}=Tt(),[r,l]=v.useState(null),[i,c]=v.useState({customer:null,customer_name:"",customer_phone:"",customer_email:"",customer_address:"",services:[],products:[],subtotal:0,discount_amount:0,voucher_applied:null,tax_amount:0,total_amount:0}),[x,u]=v.useState(null),[g,m]=v.useState(""),[f,b]=v.useState("services"),[p,y]=v.useState("cash"),[N,j]=v.useState("card"),[w,D]=v.useState(1),[C,L]=v.useState(null),[A,_]=v.useState(null),O=9,U=15,M=n?.role==="super_admin"?fe(J.services.services.getAllServices):n?.branch_id?fe(J.services.services.getServicesByBranch,{branch_id:n.branch_id}):[],E=fe(J.services.products.getAllProducts),S=n?.role==="super_admin"?fe(J.services.barbers.getAllBarbers):n?.branch_id?fe(J.services.barbers.getBarbersByBranch,{branch_id:n.branch_id}):[],$=n?.role==="super_admin"?fe(J.services.auth.getAllUsers):n?.branch_id?fe(J.services.auth.getUsersByBranch,{branch_id:n.branch_id}):[],q=(fe(J.services.branches.getAllBranches)||[]).find(G=>G._id===n?.branch_id),z=Ee(J.services.transactions.createTransaction),V=Ee(J.services.bookings.updatePaymentStatus),Z=Ee(J.services.bookings.updateBooking),B=Ee(J.services.auth.createUser),k=fe(J.services.vouchers.getVoucherByCode,i.voucher_applied&&typeof i.voucher_applied=="string"&&/[A-Z]/.test(i.voucher_applied)&&!/[a-z]/.test(i.voucher_applied)?{code:i.voucher_applied}:"skip"),I=M?.filter(G=>G.is_active)||[],se=E?.filter(G=>G.status==="active")||[],T=S?.filter(G=>G.is_active)||[];v.useEffect(()=>{const G=sessionStorage.getItem("posBooking");if(G&&M&&$)try{const me=JSON.parse(G);L(me);const Ce=$.find(_e=>_e._id===me.customer);if(!Ce){console.error("Customer not found for booking");return}const ee=M.find(_e=>_e._id===me.service);if(!ee){console.error("Service not found for booking");return}if(c(_e=>({..._e,customer:Ce,customer_name:Ce.username,customer_phone:Ce.mobile_number||"",customer_email:Ce.email||"",customer_address:Ce.address||"",services:[{service_id:ee._id,service_name:ee.name,price:ee.price,quantity:1}],subtotal:ee.price,total_amount:ee.price})),me.barber&&S){const _e=S.find(Ue=>Ue._id===me.barber);_e&&l(_e)}}catch(me){console.error("Error parsing booking data:",me)}},[M,$,S]),$?.filter(G=>G.role==="customer");const H=()=>{u("cancelBooking")},oe=()=>{L(null),sessionStorage.removeItem("posBooking"),c(G=>({...G,customer:G.customer,customer_name:G.customer_name,customer_phone:G.customer_phone,customer_email:G.customer_email,customer_address:G.customer_address,barber:G.barber||null,services:[],products:[],subtotal:0,discount_amount:0,voucher_applied:null,tax_amount:0,total_amount:0})),console.log("Booking attachment canceled - converted to regular POS transaction"),u(null)},W=I.filter(G=>G.name.toLowerCase().includes(g.toLowerCase())||G.category.toLowerCase().includes(g.toLowerCase())),le=se.filter(G=>G.name.toLowerCase().includes(g.toLowerCase())||G.category.toLowerCase().includes(g.toLowerCase())),K=N==="card"?O:U,Y=f==="services"?W:le,ge=Math.ceil(Y.length/K),pe=(w-1)*K,ye=pe+K,Ae=Y.slice(pe,ye);v.useEffect(()=>{D(1)},[g,f,N]);const Te=G=>{D(G)};v.useEffect(()=>{const G=i.services.reduce((Ue,Ie)=>Ue+Ie.price*Ie.quantity,0),me=i.products.reduce((Ue,Ie)=>Ue+Ie.price*Ie.quantity,0),Ce=G+me,ee=0,_e=Ce-i.discount_amount;c(Ue=>({...Ue,subtotal:Ce,tax_amount:ee,total_amount:_e}))},[i.services,i.products,i.discount_amount]);const Ge=G=>{c(me=>{const Ce=me.services.findIndex(ee=>ee.service_id===G._id);if(Ce>=0){const ee=[...me.services];return ee[Ce].quantity+=1,{...me,services:ee}}else return{...me,services:[...me.services,{service_id:G._id,service_name:G.name,price:G.price,quantity:1}]}})},Ze=G=>{c(me=>{const Ce=me.products.findIndex(ee=>ee.product_id===G._id);if(Ce>=0){const ee=[...me.products];return ee[Ce].quantity+=1,{...me,products:ee}}else return{...me,products:[...me.products,{product_id:G._id,product_name:G.name,price:G.price,quantity:1}]}})},Ye=(G,me,Ce)=>{c(ee=>{const _e=[...ee[G]];return _e[me].quantity=Math.max(0,_e[me].quantity+Ce),_e[me].quantity===0&&_e.splice(me,1),{...ee,[G]:_e}})},Xe=()=>{c({customer:null,customer_name:"",customer_phone:"",customer_email:"",customer_address:"",services:[],products:[],subtotal:0,discount_amount:0,voucher_applied:null,tax_amount:0,total_amount:0})},pt=()=>{if(!n||!n._id){alert("User not authenticated. Please log in again.");return}if(!r){alert("Please select a barber");return}if(!(r?.branch_id||n?.branch_id)){alert("No branch selected or associated. Please select a barber from a branch or set your branch.");return}if(i.services.length===0&&i.products.length===0){alert("Please add at least one service or product");return}u("paymentConfirmation")},it=()=>{const G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let me="";for(let Ce=0;Ce<12;Ce++)me+=G.charAt(Math.floor(Math.random()*G.length));return me},xe=async G=>{try{const me=r?.branch_id||n?.branch_id;if(!me){alert("Cannot process payment: Missing branch. Please select a barber from a branch or set your branch.");return}let Ce=i.customer?._id;if(!i.customer&&i.customer_name&&i.customer_email)try{const wt=it();if(Ce=(await B({username:i.customer_name,email:i.customer_email,password:wt,mobile_number:i.customer_phone||void 0,address:i.customer_address||void 0,role:"customer",branch_id:n.branch_id}))._id,v3())try{const ot=await b3({email:i.customer_email,username:i.customer_name,password:wt,loginUrl:`${window.location.origin}/auth/login`});ot.success?console.log("Welcome email sent successfully to:",i.customer_email):console.warn("Failed to send welcome email:",ot.error)}catch(ot){console.error("Error sending welcome email:",ot)}u("customerCreated"),_({email:i.customer_email,password:wt})}catch(wt){console.error("Failed to create user account:",wt)}console.log("Current transaction voucher_applied:",i.voucher_applied),console.log("Current transaction voucher_applied type:",typeof i.voucher_applied);let ee=i.voucher_applied;typeof ee=="string"&&!ee.includes(":")&&k?._id&&(console.log("Converting voucher code to ID via query:",ee),ee=k._id);const _e={customer:Ce||void 0,customer_name:i.customer_name||void 0,customer_phone:i.customer_phone||void 0,customer_email:i.customer_email||void 0,customer_address:i.customer_address||void 0,branch_id:me,barber:r._id,services:i.services,products:i.products.length>0?i.products:void 0,subtotal:i.subtotal,discount_amount:i.discount_amount,voucher_applied:typeof ee=="string"&&!ee.includes(":")?void 0:ee||void 0,tax_amount:i.tax_amount,total_amount:i.total_amount,payment_method:G.payment_method,payment_status:"completed",processed_by:n._id,cash_received:G.cash_received,change_amount:G.change_amount};console.log("Final voucher_applied value:",ee),console.log("Final voucher_applied type:",typeof ee),console.log("Transaction data voucher_applied:",_e.voucher_applied);const Ue=sessionStorage.getItem("posBooking"),Ie=Ue&&i.services.length>0;if(await z({..._e,skip_booking_creation:Ie||!1}),Ie)try{const wt=JSON.parse(Ue);await Z({id:wt._id,status:"completed"}),await V({id:wt._id,payment_status:"paid"}),console.log("Booking status updated to completed and payment status updated to paid"),sessionStorage.removeItem("posBooking"),L(null)}catch(wt){console.error("Error updating booking status:",wt)}const Nt=i.services.length>0,xt=i.products.length>0;let zt="Transaction completed successfully!";if(Ie)zt=`Booking payment completed! Booking #${JSON.parse(Ue).booking_code} has been marked as completed and paid.`;else if(Nt||xt){const wt=i.services.length,_s=i.products.length,ot=[];wt>0&&ot.push(`${wt} service${wt>1?"s":""}`),_s>0&&ot.push(`${_s} product${_s>1?"s":""}`),zt=`POS transaction completed! ${ot.join(" and ")} processed successfully.`}u("paymentSuccess"),setTimeout(()=>{u(null),Xe()},3e3)}catch(me){console.error("Transaction failed:",me),alert("Transaction failed. Please try again."),u(null)}},Fe=G=>{c(me=>({...me,customer:G.customer,customer_name:G.customer_name,customer_phone:G.customer_phone,customer_email:G.customer_email||"",customer_address:G.customer_address||""}))},ae=G=>{console.log("Voucher scanned:",G);const me=G._id||G.id;if(!me){alert("Invalid voucher: No ID found");return}c(Ce=>({...Ce,voucher_applied:me,discount_amount:G.value||0})),u(null),alert(`Voucher applied! Discount: ${G.value||0}`)};return n?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(ps,{to:"/staff",className:"w-12 h-12 bg-[#1A1A1A]/50 backdrop-blur-sm rounded-2xl flex items-center justify-center hover:bg-[#FF8C42]/10 transition-all duration-300 border border-[#444444]/30 group",title:"Back to Dashboard",children:e.jsx(rs,{className:"w-5 h-5 text-gray-300 group-hover:text-[#FF8C42] transition-colors duration-300"})}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-3xl flex items-center justify-center shadow-2xl ring-4 ring-[#FF8C42]/20",children:e.jsx(da,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"POS System"}),e.jsx("div",{className:"bg-[#FF8C42]/20 backdrop-blur-sm rounded-full px-2 py-0.5 border border-[#FF8C42]/30",children:e.jsx("span",{className:"text-xs font-semibold text-[#FF8C42]",children:"v1.0.1"})})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("p",{className:"text-sm font-medium text-[#FF8C42]",children:"Point of Sale"}),q&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-500",children:""}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:q.name}),e.jsxs("span",{className:"text-sm text-gray-400",children:["(",q.branch_code,")"]})]})]})]})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-base font-semibold text-white",children:["Welcome, ",n?.username]}),e.jsx("p",{className:"text-xs text-gray-400 font-medium",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})})]})})}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Select Barber"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:T.map(G=>e.jsx("button",{onClick:()=>l(G),className:`p-3 rounded-xl border-2 transition-all duration-200 ${r?._id===G._id?"border-[#FF8C42] bg-[#FF8C42]/10 text-[#FF8C42]":"border-[#555555] hover:border-[#FF8C42]/50 text-gray-300 hover:text-[#FF8C42]"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden mx-auto mb-2 border-2 border-[#FF8C42]/30",children:e.jsx(Ng,{barber:G,className:"w-10 h-10"})}),e.jsx("p",{className:"text-sm font-semibold",children:G.full_name})]})},G._id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex space-x-1 bg-[#1A1A1A] rounded-xl p-1 mb-4 sm:mb-0",children:[e.jsxs("button",{onClick:()=>b("services"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-200 ${f==="services"?"bg-[#FF8C42] text-white shadow-lg":"text-gray-400 hover:text-[#FF8C42]"}`,children:[e.jsx(It,{className:"w-4 h-4 inline mr-2"}),"Services"]}),e.jsxs("button",{onClick:()=>b("products"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-200 ${f==="products"?"bg-[#FF8C42] text-white shadow-lg":"text-gray-400 hover:text-[#FF8C42]"}`,children:[e.jsx(aa,{className:"w-4 h-4 inline mr-2"}),"Products"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-400 font-medium",children:"View:"}),e.jsxs("div",{className:"flex space-x-1 bg-[#1A1A1A] rounded-lg p-1",children:[e.jsx("button",{onClick:()=>j("card"),className:`p-2 rounded-md transition-all duration-200 ${N==="card"?"bg-[#FF8C42] text-white":"text-gray-400 hover:text-[#FF8C42]"}`,title:"Card View",children:e.jsx(F0,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j("table"),className:`p-2 rounded-md transition-all duration-200 ${N==="table"?"bg-[#FF8C42] text-white":"text-gray-400 hover:text-[#FF8C42]"}`,title:"Table View",children:e.jsx(B0,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:`Search ${f}...`,value:g,onChange:G=>m(G.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",pe+1,"-",Math.min(ye,Y.length)," of ",Y.length," ",f]})]})]}),N==="card"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:f==="services"?Ae.map(G=>e.jsxs("button",{onClick:()=>Ge(G),className:"p-4 bg-[#1A1A1A] border border-[#555555] rounded-xl hover:border-[#FF8C42] hover:bg-[#FF8C42]/5 transition-all duration-200 text-left group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-white group-hover:text-[#FF8C42]",children:G.name}),e.jsx(Bt,{className:"w-4 h-4 text-gray-400 group-hover:text-[#FF8C42]"})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:G.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-[#FF8C42]",children:["",G.price]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[G.duration_minutes," min"]})]})]},G._id)):Ae.map(G=>e.jsxs("button",{onClick:()=>Ze(G),className:"p-4 bg-[#1A1A1A] border border-[#555555] rounded-xl hover:border-[#FF8C42] hover:bg-[#FF8C42]/5 transition-all duration-200 text-left group",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-white group-hover:text-[#FF8C42]",children:G.name}),e.jsx(Bt,{className:"w-4 h-4 text-gray-400 group-hover:text-[#FF8C42]"})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:G.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-[#FF8C42]",children:["",G.price]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Stock: ",G.stock]})]})]},G._id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-[#1A1A1A] rounded-xl border border-[#555555]",children:[e.jsx("thead",{className:"bg-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Price"}),f==="services"?e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Duration"}):e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Stock"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-300 border-b border-[#555555]",children:"Action"})]})}),e.jsx("tbody",{children:Ae.map(G=>e.jsxs("tr",{className:"hover:bg-[#333333] transition-colors border-b border-[#444444] last:border-b-0",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-white",children:G.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-400 max-w-xs truncate",children:G.description}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-[#FF8C42]",children:["",G.price]}),f==="services"?e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-500",children:[G.duration_minutes," min"]}):e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:G.stock}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("button",{onClick:()=>f==="services"?Ge(G):Ze(G),className:"px-3 py-1 bg-[#FF8C42] text-white text-sm rounded-lg hover:bg-[#E67E22] transition-colors flex items-center justify-center space-x-1 mx-auto",children:[e.jsx(Bt,{className:"w-3 h-3"}),e.jsx("span",{children:"Add"})]})})]},G._id))})]})}),ge>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Page ",w," of ",ge]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Te(w-1),disabled:w===1,className:"p-2 bg-[#1A1A1A] border border-[#555555] text-gray-400 rounded-lg hover:bg-[#333333] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(cp,{className:"w-4 h-4"})}),Array.from({length:Math.min(5,ge)},(G,me)=>{let Ce;return ge<=5||w<=3?Ce=me+1:w>=ge-2?Ce=ge-4+me:Ce=w-2+me,e.jsx("button",{onClick:()=>Te(Ce),className:`px-3 py-2 text-sm rounded-lg transition-colors ${w===Ce?"bg-[#FF8C42] text-white":"bg-[#1A1A1A] border border-[#555555] text-gray-400 hover:bg-[#333333] hover:text-white"}`,children:Ce},Ce)}),e.jsx("button",{onClick:()=>Te(w+1),disabled:w===ge,className:"p-2 bg-[#1A1A1A] border border-[#555555] text-gray-400 rounded-lg hover:bg-[#333333] hover:text-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Er,{className:"w-4 h-4"})})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Customer"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>u("scanner"),className:"p-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors border border-blue-500/30",title:"Scan QR",children:e.jsx(Vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u("customerSelection"),className:"p-2 bg-[#FF8C42]/20 text-[#FF8C42] rounded-lg hover:bg-[#FF8C42]/30 transition-colors border border-[#FF8C42]/30",title:"Select Customer",children:e.jsx(Le,{className:"w-4 h-4"})})]})]}),i.customer?e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-500/20 to-green-600/20 rounded-lg border border-green-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/30 rounded-lg flex items-center justify-center border border-green-500/40",children:e.jsx(Le,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:i.customer.username}),e.jsx("p",{className:"text-sm text-gray-400",children:i.customer.email}),i.customer.mobile_number&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer.mobile_number}),i.customer.address&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer.address})]})]}),e.jsx("button",{onClick:()=>c(G=>({...G,customer:null,customer_name:"",customer_phone:"",customer_email:"",customer_address:""})),className:"text-red-400 hover:text-red-300 transition-colors",title:"Remove Customer",children:e.jsx(Ss,{className:"w-4 h-4"})})]})}):i.customer_name?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-500/20 to-blue-600/20 rounded-lg border border-blue-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/30 rounded-lg flex items-center justify-center border border-blue-500/40",children:e.jsx(ua,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:i.customer_name}),e.jsx("p",{className:"text-sm text-gray-400",children:"Walk-in Customer"}),i.customer_phone&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer_phone}),i.customer_email&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer_email}),i.customer_address&&e.jsx("p",{className:"text-sm text-gray-400",children:i.customer_address})]})]}),e.jsx("button",{onClick:()=>c(G=>({...G,customer:null,customer_name:"",customer_phone:"",customer_email:"",customer_address:""})),className:"text-red-400 hover:text-red-300 transition-colors",title:"Remove Customer",children:e.jsx(Ss,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("input",{type:"text",placeholder:"Customer Name *",value:i.customer_name,onChange:G=>c(me=>({...me,customer_name:G.target.value})),className:"px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]"}),e.jsx("input",{type:"tel",placeholder:"Phone Number",value:i.customer_phone,onChange:G=>c(me=>({...me,customer_phone:G.target.value})),className:"px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]"}),e.jsx("input",{type:"email",placeholder:"Email Address (for account creation)",value:i.customer_email,onChange:G=>c(me=>({...me,customer_email:G.target.value})),className:"px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]"}),e.jsx("textarea",{placeholder:"Address (optional)",value:i.customer_address,onChange:G=>c(me=>({...me,customer_address:G.target.value})),rows:2,className:"px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42] resize-none"})]}),i.customer_email&&e.jsx("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:e.jsxs("p",{className:"text-xs text-green-400 font-medium flex items-center",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Customer account will be created automatically"]})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>u("customerSelection"),className:"w-full p-4 border-2 border-dashed border-[#555555] rounded-lg hover:border-[#FF8C42] hover:bg-[#FF8C42]/10 transition-all duration-200 flex items-center justify-center space-x-2 text-gray-400 hover:text-[#FF8C42]",children:[e.jsx(Le,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Select Existing Customer"})]}),e.jsx("div",{className:"text-center text-gray-500 text-sm",children:"or"}),e.jsxs("button",{onClick:()=>c(G=>({...G,customer_name:"Walk-in Customer"})),className:"w-full p-4 border-2 border-dashed border-blue-500/30 rounded-lg hover:border-blue-500 hover:bg-blue-500/10 transition-all duration-200 flex items-center justify-center space-x-2 text-blue-400 hover:text-blue-300",children:[e.jsx(ua,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Add Walk-in Customer"})]})]})]}),C&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center",children:[e.jsx(Fr,{className:"w-5 h-5 mr-2 text-[#FF8C42]"}),"Booking Information"]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl shadow-lg border border-[#444444]/50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#FF8C42]/20 to-[#FF7A2B]/20 rounded-lg flex items-center justify-center border-2 border-[#FF8C42]/30",children:e.jsx(Fr,{className:"w-5 h-5 text-[#FF8C42]"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-white text-base",children:["#",C.booking_code]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Processing payment"}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-medium text-green-400",children:"Active"})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsxs("div",{className:"inline-flex items-center px-2 py-1 bg-[#FF8C42]/20 border border-[#FF8C42]/30 rounded-md",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-[#FF8C42] rounded-full animate-pulse mr-1.5"}),e.jsx("span",{className:"text-xs font-medium text-[#FF8C42]",children:"Processing"})]}),e.jsxs("button",{onClick:H,className:"inline-flex items-center px-2 py-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 hover:border-red-500/50 rounded-lg transition-all duration-200 font-medium text-xs",title:"Cancel booking attachment",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Cancel"]})]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Order Summary"}),(i.services.length>0||i.products.length>0)&&e.jsx("button",{onClick:Xe,className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-colors border border-red-500/30",title:"Clear All",children:e.jsx(Ss,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[i.services.map((G,me)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#1A1A1A] rounded-lg border border-[#555555]/30",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-white",children:G.service_name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["",G.price," each"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ye("services",me,-1),className:"w-6 h-6 bg-[#444444] border border-[#555555] rounded-full flex items-center justify-center hover:bg-[#555555] transition-colors",children:e.jsx(ci,{className:"w-3 h-3 text-gray-300"})}),e.jsx("span",{className:"w-8 text-center font-semibold text-white",children:G.quantity}),e.jsx("button",{onClick:()=>Ye("services",me,1),className:"w-6 h-6 bg-[#FF8C42] rounded-full flex items-center justify-center hover:bg-[#FF7A2B] text-white transition-colors",children:e.jsx(Bt,{className:"w-3 h-3"})})]})]},`service-${me}`)),i.products.map((G,me)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-white",children:G.product_name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["",G.price," each"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Ye("products",me,-1),className:"w-6 h-6 bg-[#444444] border border-[#555555] rounded-full flex items-center justify-center hover:bg-[#555555] transition-colors",children:e.jsx(ci,{className:"w-3 h-3 text-gray-300"})}),e.jsx("span",{className:"w-8 text-center font-semibold text-white",children:G.quantity}),e.jsx("button",{onClick:()=>Ye("products",me,1),className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center hover:bg-blue-600 text-white transition-colors",children:e.jsx(Bt,{className:"w-3 h-3"})})]})]},`product-${me}`)),i.services.length===0&&i.products.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ai,{className:"w-8 h-8 mx-auto mb-2 opacity-50 text-gray-400"}),e.jsx("p",{className:"text-gray-400",children:"No items added yet"})]})]})]}),r&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center",children:[e.jsx(It,{className:"w-5 h-5 mr-2 text-[#FF8C42]"}),"Selected Barber"]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl shadow-lg border border-[#444444]/50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-[#FF8C42]/30",children:e.jsx(Ng,{barber:r,className:"w-10 h-10"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-base",children:r.full_name}),e.jsx("p",{className:"text-xs text-gray-400",children:"Selected barber"})]})]}),e.jsxs("button",{onClick:()=>l(null),className:"inline-flex items-center px-2 py-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 hover:border-red-500/50 rounded-lg transition-all duration-200 font-medium text-xs",title:"Remove barber",children:[e.jsx(rt,{className:"w-3 h-3 mr-1"}),"Remove"]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-lg border border-[#444444]/50 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Payment"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-gray-400",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{className:"text-white",children:["",i.subtotal.toFixed(2)]})]}),i.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-400",children:[e.jsx("span",{children:"Discount:"}),e.jsxs("span",{children:["-",i.discount_amount.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-[#555555] pt-2",children:e.jsxs("div",{className:"flex justify-between text-xl font-bold text-white",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["",i.total_amount.toFixed(2)]})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Payment Method"}),e.jsxs("select",{value:p,onChange:G=>y(G.target.value),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42]",children:[e.jsx("option",{value:"cash",className:"bg-[#1A1A1A] text-white",children:"Cash"}),e.jsx("option",{value:"card",className:"bg-[#1A1A1A] text-white",children:"Card"}),e.jsx("option",{value:"digital_wallet",className:"bg-[#1A1A1A] text-white",children:"Digital Wallet"}),e.jsx("option",{value:"bank_transfer",className:"bg-[#1A1A1A] text-white",children:"Bank Transfer"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:pt,disabled:!r||i.services.length===0&&i.products.length===0,className:"w-full py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white font-bold rounded-xl hover:from-[#FF7A2B] hover:to-[#E67E37] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg",children:[e.jsx(da,{className:"w-5 h-5"}),e.jsx("span",{children:"Process Payment"})]}),e.jsxs("button",{onClick:()=>alert("Receipt functionality coming soon!"),className:"w-full py-2 border border-[#555555] text-gray-300 font-semibold rounded-xl hover:bg-[#FF8C42]/10 hover:border-[#FF8C42] hover:text-[#FF8C42] transition-colors flex items-center justify-center space-x-2",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:"Print Receipt"})]})]})]})]})]})}),x==="scanner"&&e.jsx(d0,{isOpen:!0,onClose:()=>u(null),onVoucherScanned:ae,onBookingScanned:G=>{G.customer&&c(me=>({...me,customer:G.customer})),u(null)}}),x==="customerSelection"&&e.jsx(H3,{isOpen:!0,onClose:()=>u(null),onCustomerSelected:Fe,onScanQR:()=>u("scanner"),onAddNewCustomer:()=>u("addCustomer")}),x==="addCustomer"&&e.jsx(gp,{isOpen:!0,onClose:()=>u("customerSelection"),onCustomerAdded:G=>{c(me=>({...me,customer:G})),u(null)}}),x==="paymentConfirmation"&&e.jsx(V3,{isOpen:!0,onClose:()=>u(null),onConfirm:xe,transactionData:{subtotal:i.subtotal,discount_amount:i.discount_amount,tax_amount:i.tax_amount,total_amount:i.total_amount,services:i.services,products:i.products},paymentMethod:p,setPaymentMethod:y}),x==="paymentSuccess"&&e.jsx(ds,{isOpen:!0,onClose:()=>{},title:"Payment Successful",size:"sm",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Qe,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i.services.length>0?`Transaction completed! ${i.services.length} service${i.services.length>1?"s":""} recorded as completed booking${i.services.length>1?"s":""}.`:"Transaction completed successfully!"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",i.total_amount.toFixed(2)]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:i.services.length>0?"Receipt generated and bookings updated automatically":"Receipt will be generated automatically"})]})}),x==="cancelBooking"&&e.jsx(ds,{isOpen:!0,onClose:()=>u(null),title:"Cancel Booking",size:"sm",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500/20 to-red-600/20 rounded-full flex items-center justify-center mx-auto mb-3 border-2 border-red-500/30",children:e.jsx(rt,{className:"w-6 h-6 text-red-400"})}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:["Cancel Booking #",C?.booking_code,"?"]}),e.jsx("p",{className:"text-red-700 text-sm mb-4 px-2",children:"This will detach the booking and convert to a regular POS transaction."}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>u(null),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-all duration-200 text-sm",children:"Keep"}),e.jsx("button",{onClick:oe,className:"flex-1 px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-medium rounded-lg transition-all duration-200 text-sm",children:"Cancel"})]})]})}),x==="customerCreated"&&A&&e.jsx(ds,{isOpen:!0,onClose:()=>{u(null),_(null)},title:"Customer Account Created",size:"md",children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-green-500/30",children:e.jsx(Qe,{className:"w-8 h-8 text-green-500"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Customer Account Created Successfully!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please provide the following login credentials to the customer:"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address:"}),e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-md px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900",children:A.email}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(A.email),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Copy"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temporary Password:"}),e.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-200 rounded-md px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900",children:A.password}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(A.password),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Copy"})]})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Important:"})," The customer should change their password after first login for security."]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:" Welcome Email:"})," A welcome email with login instructions has been sent to the customer's email address."]})}),e.jsx("button",{onClick:()=>{u(null),_(null)},className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium rounded-lg transition-all duration-200",children:"Continue with Transaction"})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#F5F5F5] to-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF8C42] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading POS system..."})]})})},Y3=({onLogout:n})=>{const{user:r}=Tt();return e.jsxs("header",{className:"relative bg-gradient-to-r from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] backdrop-blur-xl border-b border-[#333333]/50 shadow-2xl",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.1),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.05),transparent_50%)]"})]}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-6",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TPX Barbershop Logo",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center space-x-2",children:[e.jsx(Ea,{className:"w-6 h-6 text-[#FF8C42]"}),e.jsx("span",{children:"Admin Dashboard"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"System Administration Panel"})]})]})}),e.jsx("div",{className:"hidden md:flex items-center space-x-4",children:e.jsx("div",{className:"bg-gradient-to-r from-[#FF8C42]/20 to-[#FF7A2B]/20 border border-[#FF8C42]/30 rounded-full px-4 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"System Online"})]})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden sm:flex items-center space-x-3 bg-gradient-to-r from-[#2A2A2A] to-[#333333] rounded-xl p-3 border border-[#444444]/50",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-lg flex items-center justify-center",children:e.jsx(Tr,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:r?.username||"Admin"}),e.jsx("p",{className:"text-xs text-[#FF8C42] font-medium",children:"Super Administrator"})]})]}),e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-red-500/25 active:scale-95",children:[e.jsx(ac,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-[#FF8C42]/50 to-transparent"})]})},G3=()=>{const n=[{id:"create-branch",title:"Create Branch",description:"Add new branch location",icon:cs,onClick:()=>{console.log("Create branch clicked")}},{id:"create-admin",title:"Create Admin",description:"Add new branch admin",icon:Tr,onClick:()=>{console.log("Create admin clicked")}},{id:"system-reports",title:"System Reports",description:"View global analytics",icon:ks,onClick:()=>{console.log("System reports clicked")}},{id:"backup-data",title:"Backup Data",description:"Export system data",icon:xp,onClick:()=>{console.log("Backup data clicked")}}];return e.jsxs("div",{className:"bg-gradient-to-br from-[#1E1E1E] to-[#2A2A2A] rounded-3xl shadow-2xl border border-[#333333]/50 p-8 backdrop-blur-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-lg flex items-center justify-center",children:e.jsx(Bt,{className:"w-4 h-4 text-white"})}),e.jsx("span",{children:"Quick Actions"})]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Common administrative tasks"})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(r=>{const l=r.icon;return e.jsxs("button",{onClick:r.onClick,className:"group bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50 hover:border-[#FF8C42]/50 transition-all duration-300 hover:shadow-xl hover:shadow-[#FF8C42]/10 hover:scale-[1.02] active:scale-[0.98]",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${r.color} rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-200`,children:e.jsx(l,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-white font-semibold text-lg mb-2 group-hover:text-[#FF8C42] transition-colors",children:r.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:r.description})]}),e.jsx("div",{className:"mt-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("div",{className:"w-full h-1 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-full"})})]},r.id)})})]})},X3=({stats:n})=>{const r=l=>({building:cs,users:gt,calendar:Re,dollar:Ut,user:Le,scissors:It,trending:Fs,activity:Gn})[l]||Gn;return n?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((l,i)=>{const c=r(l.icon);return e.jsxs("div",{className:"group bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50 hover:border-[#FF8C42]/50 transition-all duration-300 hover:shadow-xl hover:shadow-[#FF8C42]/10 hover:scale-[1.02]",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400 mb-2",children:l.label}),e.jsx("p",{className:"text-2xl font-bold text-white mb-1 group-hover:text-[#FF8C42] transition-colors",children:l.value}),l.subtext&&e.jsx("p",{className:"text-xs text-gray-500",children:l.subtext})]}),e.jsx("div",{className:"w-12 h-12 bg-[#FF8C42]/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200 border border-[#FF8C42]/30 group-hover:bg-[#FF8C42]/30",children:e.jsx(c,{className:"w-6 h-6 text-[#FF8C42]"})})]}),e.jsx("div",{className:"mt-4 h-1 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-full transition-all duration-1000 ease-out",style:{width:`${Math.min(100,(i+1)*16.67)}%`}})})]},i)})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((l,i)=>e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-600 rounded w-24"}),e.jsx("div",{className:"h-8 bg-gray-600 rounded w-16"}),e.jsx("div",{className:"h-3 bg-gray-600 rounded w-20"})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-600 rounded-xl"})]})},i))})},K3=({activities:n=[]})=>{const r=[{id:1,type:"branch_created",title:"New Branch Created",description:"Downtown Branch was created by admin",timestamp:new Date(Date.now()-18e5),icon:cs,color:"text-blue-400"},{id:2,type:"user_registered",title:"New User Registered",description:"Branch admin account created for John Doe",timestamp:new Date(Date.now()-72e5),icon:Le,color:"text-green-400"},{id:3,type:"system_alert",title:"System Maintenance",description:"Scheduled maintenance completed successfully",timestamp:new Date(Date.now()-216e5),icon:at,color:"text-orange-400"}],l=n.length>0?n:r,i=c=>{const u=new Date-c,g=Math.floor(u/(1e3*60)),m=Math.floor(u/(1e3*60*60)),f=Math.floor(u/(1e3*60*60*24));return f>0?`${f}d ago`:m>0?`${m}h ago`:g>0?`${g}m ago`:"Just now"};return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-lg flex items-center justify-center",children:e.jsx(Gn,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Recent Activity"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Latest system events"})]})]}),e.jsx("button",{className:"text-[#FF8C42] hover:text-[#FF7A2B] text-sm font-medium transition-colors",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gn,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-400 mb-2",children:"No Recent Activity"}),e.jsx("p",{className:"text-sm text-gray-500",children:"System events will appear here"})]}):l.slice(0,5).map(c=>{const x=c.icon;return e.jsxs("div",{className:"group flex items-start space-x-4 p-4 bg-[#1A1A1A]/50 rounded-xl border border-[#444444]/30 hover:border-[#FF8C42]/30 transition-all duration-200 hover:bg-[#1A1A1A]/80",children:[e.jsx("div",{className:"w-10 h-10 bg-[#333333] rounded-lg flex items-center justify-center group-hover:bg-[#444444] transition-colors flex-shrink-0",children:e.jsx(x,{className:`w-5 h-5 ${c.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-white font-medium text-sm group-hover:text-[#FF8C42] transition-colors",children:c.title}),e.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-xs",children:[e.jsx(jt,{className:"w-3 h-3"}),e.jsx("span",{children:i(c.timestamp)})]})]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1 leading-relaxed",children:c.description})]})]},c.id)})}),l.length>5&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{className:"text-[#FF8C42] hover:text-[#FF7A2B] text-sm font-medium transition-colors",children:["View ",l.length-5," more activities"]})})]})},Z3=({tabs:n,activeTab:r,onTabChange:l})=>{const[i,c]=v.useState(!1),x=v.useRef(null);v.useEffect(()=>{const m=f=>{x.current&&!x.current.contains(f.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const u=m=>({overview:Ko,branches:cs,users:gt,reports:ks,settings:Sr})[m]||Ko,g=m=>{l(m),c(!1)};return e.jsxs("div",{className:"bg-gradient-to-r from-[#1E1E1E] to-[#2A2A2A] backdrop-blur-sm border border-[#333333]/50 rounded-2xl shadow-xl shadow-black/20 overflow-visible relative z-50",children:[e.jsx("nav",{className:"hidden lg:flex items-center justify-center p-2",children:e.jsxs("div",{className:"flex items-center space-x-1 bg-[#333333]/30 rounded-xl p-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-3",children:[e.jsx(Ea,{className:"w-5 h-5 text-[#FF8C42]"}),e.jsx("span",{className:"text-[#FF8C42] font-semibold text-sm",children:"ADMIN"})]}),e.jsx("div",{className:"w-px h-8 bg-[#444444]"}),n.map(m=>{const f=u(m.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>g(m.id),className:`relative flex items-center space-x-3 px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-300 group min-w-0 ${r===m.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg shadow-[#FF8C42]/25 transform scale-105":"text-gray-300 hover:text-white hover:bg-[#444444]/50 hover:shadow-sm"}`,children:[r===m.id&&e.jsx("div",{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"}),e.jsx("div",{className:`flex items-center justify-center w-5 h-5 transition-all duration-200 ${r===m.id?"text-white":"text-gray-400 group-hover:text-[#FF8C42]"}`,children:e.jsx(f,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold whitespace-nowrap",children:m.label})]})},m.id)})]})}),e.jsx("nav",{className:"lg:hidden",children:e.jsxs("div",{className:"flex flex-wrap gap-1 p-2 justify-center",children:[e.jsx("div",{className:"w-full flex justify-center mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-[#FF8C42]/20 to-[#FF7A2B]/20 border border-[#FF8C42]/30 rounded-full px-4 py-2",children:[e.jsx(Ea,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-[#FF8C42] font-semibold text-xs",children:"ADMIN PANEL"})]})}),n.map(m=>{const f=u(m.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>g(m.id),className:`flex flex-col items-center justify-center px-3 py-3 rounded-lg font-medium text-xs transition-all duration-200 whitespace-nowrap relative flex-shrink-0 ${r===m.id?"bg-gradient-to-b from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#333333]/50"}`,children:[e.jsx("div",{className:`flex items-center justify-center w-6 h-6 mb-1 transition-all duration-200 ${r===m.id?"text-white":"text-gray-500"}`,children:e.jsx(f,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold text-[10px]",children:m.label}),r===m.id&&e.jsx("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full"})]})},m.id)})]})}),e.jsx("nav",{className:"hidden md:flex lg:hidden items-center justify-center p-2",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-[#333333]/30 rounded-xl p-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2",children:[e.jsx(Ea,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-[#FF8C42] font-semibold text-xs",children:"ADMIN"})]}),e.jsx("div",{className:"w-px h-6 bg-[#444444]"}),n.map(m=>{const f=u(m.id);return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>g(m.id),className:`flex items-center space-x-2 px-3 py-2.5 rounded-lg font-semibold text-sm transition-all duration-300 whitespace-nowrap relative ${r===m.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-[#444444]/50"}`,children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:m.label})]})},m.id)})]})})]})},wg=({isOpen:n,onClose:r,title:l,onSubmit:i,formData:c,onInputChange:x,error:u,loading:g,isEdit:m=!1})=>n?Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:r}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10000] border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:l}),e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(rt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-400/20 border border-red-400/30 rounded-lg flex items-center space-x-2",children:[e.jsx(at,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-400",children:u})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Branch Name *"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter branch name",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Address *"}),e.jsx("textarea",{name:"address",value:c.address,onChange:x,rows:"3",className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter branch address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter phone number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:c.email,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:g,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF7A2B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx("span",{children:g?"Saving...":m?"Update Branch":"Create Branch"})]})]})]})]})]})]})}),document.body):null;function J3(){const[n,r]=v.useState(""),[l,i]=v.useState("all"),[c,x]=v.useState("name"),[u,g]=v.useState(!1),[m,f]=v.useState(null),[b,p]=v.useState(!1),[y,N]=v.useState({name:"",address:"",phone:"",email:""}),[j,w]=v.useState(!1),[D,C]=v.useState(""),L=fe(J.services.branches.getAllBranches)||[],A=Ee(J.services.branches.createBranch),_=Ee(J.services.branches.updateBranch),O=Ee(J.services.branches.toggleBranchStatus),U=k=>k?{label:"Active",icon:Qe,bg:"bg-green-50",text:"text-green-700",border:"border-green-200",iconColor:"text-green-500"}:{label:"Inactive",icon:Pt,bg:"bg-red-50",text:"text-red-700",border:"border-red-200",iconColor:"text-red-500"},M=L.filter(k=>{const I=k.name.toLowerCase().includes(n.toLowerCase())||k.branch_code.toLowerCase().includes(n.toLowerCase())||k.address.toLowerCase().includes(n.toLowerCase()),se=l==="all"||l==="active"&&k.is_active||l==="inactive"&&!k.is_active;return I&&se}).sort((k,I)=>c==="name"?k.name.localeCompare(I.name):c==="code"?k.branch_code.localeCompare(I.branch_code):c==="status"?I.is_active-k.is_active:new Date(I.createdAt)-new Date(k.createdAt)),E={total:L.length,active:L.filter(k=>k.is_active).length,inactive:L.filter(k=>!k.is_active).length,recent:L.filter(k=>{const I=new Date(k.createdAt),se=new Date;return se.setDate(se.getDate()-7),I>=se}).length},S=()=>{N({name:"",address:"",phone:"",email:""}),C("")},$=()=>{S(),g(!0)},P=k=>{f(k),N({name:k.name,address:k.address,phone:k.phone,email:k.email}),p(!0)},q=async k=>{if(k.preventDefault(),!y.name.trim()||!y.address.trim()||!y.phone.trim()||!y.email.trim()){C("All fields are required");return}w(!0);try{await A(y),g(!1),S()}catch(I){console.error("Error creating branch:",I),C(I.message||"Failed to create branch")}finally{w(!1)}},z=async k=>{if(k.preventDefault(),!y.name.trim()||!y.address.trim()||!y.phone.trim()||!y.email.trim()){C("All fields are required");return}w(!0);try{await _({id:m._id,...y}),p(!1),f(null),S()}catch(I){console.error("Error updating branch:",I),C(I.message||"Failed to update branch")}finally{w(!1)}},V=async k=>{w(!0);try{await O({id:k})}catch(I){console.error("Error toggling branch status:",I),C(I.message||"Failed to update branch status")}finally{w(!1)}},Z=k=>{const{name:I,value:se}=k.target;N(T=>({...T,[I]:se}))},B=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return L?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total Branches"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:E.total})]}),e.jsx(cs,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:E.active})]}),e.jsx(Qe,{className:"h-8 w-8 text-green-400 opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:E.inactive})]}),e.jsx(Pt,{className:"h-8 w-8 text-red-400 opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Recent"}),e.jsx("p",{className:"text-2xl font-bold text-[#FF8C42]",children:E.recent})]}),e.jsx(Re,{className:"h-8 w-8 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search branches...",value:n,onChange:k=>r(k.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:l,onChange:k=>i(k.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("select",{value:c,onChange:k=>x(k.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Sort by Name"}),e.jsx("option",{value:"code",children:"Sort by Code"}),e.jsx("option",{value:"status",children:"Sort by Status"}),e.jsx("option",{value:"date",children:"Sort by Date"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm",children:[e.jsx(an,{className:"h-4 w-4"}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:$,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF7A2B] transition-colors text-sm",children:[e.jsx(Bt,{className:"h-4 w-4"}),e.jsx("span",{children:"New Branch"})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact Info"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:M.map(k=>{const I=U(k.is_active),se=I.icon;return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(cs,{className:"h-5 w-5 text-[#FF8C42]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:k.name}),e.jsxs("div",{className:"text-sm font-mono text-gray-400",children:["#",k.branch_code]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-white",children:[e.jsx(fi,{className:"h-3 w-3 text-gray-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:k.address})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Is,{className:"h-3 w-3 text-gray-500 mr-2 flex-shrink-0"}),e.jsx("span",{children:k.phone})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(Ft,{className:"h-3 w-3 text-gray-500 mr-2 flex-shrink-0"}),e.jsx("span",{children:k.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${I.bg} ${I.text}`,children:[e.jsx(se,{className:`-ml-0.5 mr-1.5 h-3 w-3 ${I.iconColor}`}),I.label]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:B(k.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>V(k._id),className:`inline-flex items-center px-2.5 py-1.5 border text-xs font-medium rounded transition-colors ${k.is_active?"border-red-500/30 text-red-400 bg-red-400/20 hover:bg-red-400/30":"border-green-500/30 text-green-400 bg-green-400/20 hover:bg-green-400/30"}`,disabled:j,children:k.is_active?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>P(k),className:"text-blue-400 hover:text-blue-300",disabled:j,children:e.jsx(Ba,{className:"h-4 w-4"})})]})})]},k._id)})})]})}),M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(cs,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No branches found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:n||l!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new branch."}),!n&&l==="all"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A]",children:[e.jsx(Bt,{className:"-ml-1 mr-2 h-4 w-4"}),"New Branch"]})})]})]}),e.jsx(wg,{isOpen:u,onClose:()=>{g(!1),S()},title:"Create New Branch",onSubmit:q,formData:y,onInputChange:Z,error:D,loading:j}),e.jsx(wg,{isOpen:b,onClose:()=>{p(!1),f(null),S()},title:"Edit Branch",onSubmit:z,formData:y,onInputChange:Z,error:D,loading:j,isEdit:!0})]}):e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading branches..."})]})}const W3=({isOpen:n,onClose:r,title:l,onSubmit:i,formData:c,onInputChange:x,error:u,loading:g,branches:m})=>n?Kt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-full items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:r}),e.jsxs("div",{className:"relative w-full max-w-md transform rounded-2xl bg-gradient-to-br from-[#2A2A2A] to-[#333333] shadow-2xl transition-all z-[10000] border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#444444]/30",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:l}),e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-white hover:bg-[#333333] rounded-lg transition-colors",children:e.jsx(rt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-400/20 border border-red-400/30 rounded-lg flex items-center space-x-2",children:[e.jsx(at,{className:"h-4 w-4 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-red-400",children:u})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username *"}),e.jsx("input",{type:"text",name:"username",value:c.username,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter username",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role *"}),e.jsxs("select",{name:"role",value:c.role,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",required:!0,children:[e.jsx("option",{value:"branch_admin",children:"Branch Admin"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"super_admin",children:"Super Admin"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:c.email,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter email address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password *"}),e.jsx("input",{type:"password",name:"password",value:c.password,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter password",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mobile Number"}),e.jsx("input",{type:"tel",name:"mobile_number",value:c.mobile_number,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter mobile number"})]}),c.role!=="super_admin"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Branch *"}),e.jsxs("select",{name:"branch_id",value:c.branch_id,onChange:x,className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Branch"}),m?.map(f=>e.jsxs("option",{value:f._id,children:[f.name," (",f.branch_code,")"]},f._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Address"}),e.jsx("textarea",{name:"address",value:c.address,onChange:x,rows:"2",className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",placeholder:"Enter address"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-500/20 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:g,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF7A2B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx("span",{children:g?"Creating...":"Create User"})]})]})]})]})]})]})}),document.body):null;function e5(){const[n,r]=v.useState(""),[l,i]=v.useState("all"),[c,x]=v.useState("all"),[u,g]=v.useState(!1),[m,f]=v.useState(null),[b,p]=v.useState(!1),[y,N]=v.useState({username:"",email:"",password:"",mobile_number:"",address:"",role:"branch_admin",branch_id:""}),[j,w]=v.useState(!1),[D,C]=v.useState(""),L=fe(J.services.auth.getAllUsers)||[],A=fe(J.services.branches.getActiveBranches)||[],_=Ee(J.services.auth.createUser),O=Z=>{switch(Z){case"super_admin":return{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"};case"branch_admin":return{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"};case"staff":return{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"};case"barber":return{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"};case"customer":return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"};default:return{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}}},U=L.filter(Z=>Z.role!=="customer"&&Z.role!=="barber"),M=U.filter(Z=>{const B=Z.username.toLowerCase().includes(n.toLowerCase())||Z.email.toLowerCase().includes(n.toLowerCase()),k=l==="all"||Z.role===l,I=c==="all"||Z.branch_id===c;return B&&k&&I}).sort((Z,B)=>new Date(B.createdAt)-new Date(Z.createdAt)),E={total:U.length,superAdmins:U.filter(Z=>Z.role==="super_admin").length,branchAdmins:U.filter(Z=>Z.role==="branch_admin").length,staff:U.filter(Z=>Z.role==="staff").length},S=()=>{N({username:"",email:"",password:"",mobile_number:"",address:"",role:"branch_admin",branch_id:""}),C("")},$=()=>{S(),g(!0)},P=async Z=>{if(Z.preventDefault(),!y.username.trim()||!y.email.trim()||!y.password.trim()){C("Username, email, and password are required");return}if(y.role!=="super_admin"&&!y.branch_id){C("Branch is required for all users except super admin");return}w(!0);try{await _({...y,branch_id:y.role==="super_admin"?void 0:y.branch_id}),g(!1),S()}catch(B){console.error("Error creating user:",B),C(B.message||"Failed to create user")}finally{w(!1)}},q=Z=>{const{name:B,value:k}=Z.target;N(I=>({...I,[B]:k}))},z=Z=>{const B=A.find(k=>k._id===Z);return B?B.name:"N/A"},V=Z=>new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return L?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-[#FF8C42]",children:E.total})]}),e.jsx(gt,{className:"h-6 w-6 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Super Admin"}),e.jsx("p",{className:"text-xl font-bold text-[#FF8C42]",children:E.superAdmins})]}),e.jsx(Tr,{className:"h-6 w-6 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Branch Admin"}),e.jsx("p",{className:"text-xl font-bold text-[#FF8C42]",children:E.branchAdmins})]}),e.jsx(cs,{className:"h-6 w-6 text-[#FF8C42] opacity-30"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Staff"}),e.jsx("p",{className:"text-xl font-bold text-[#FF8C42]",children:E.staff})]}),e.jsx(Le,{className:"h-6 w-6 text-[#FF8C42] opacity-30"})]})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-4 rounded-lg border border-[#444444]/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:n,onChange:Z=>r(Z.target.value),className:"pl-10 pr-4 py-2 bg-[#1A1A1A] border border-[#444444] text-white placeholder-gray-500 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fa,{className:"h-4 w-4 text-gray-500"}),e.jsxs("select",{value:l,onChange:Z=>i(Z.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"super_admin",children:"Super Admin"}),e.jsx("option",{value:"branch_admin",children:"Branch Admin"}),e.jsx("option",{value:"staff",children:"Staff"})]})]}),e.jsxs("select",{value:c,onChange:Z=>x(Z.target.value),className:"bg-[#1A1A1A] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Branches"}),A.map(Z=>e.jsx("option",{value:Z._id,children:Z.name},Z._id))]})]}),e.jsxs("button",{onClick:$,className:"flex items-center space-x-2 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#FF7A2B] transition-colors text-sm",children:[e.jsx(ua,{className:"h-4 w-4"}),e.jsx("span",{children:"New User"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-[#444444]/30",children:[e.jsx("thead",{className:"bg-gradient-to-r from-[#1A1A1A] to-[#2A2A2A]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Role & Branch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] divide-y divide-[#444444]/30",children:M.map(Z=>{const B=O(Z.role);return e.jsxs("tr",{className:"hover:bg-[#333333]/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-lg bg-[#FF8C42]/20 flex items-center justify-center",children:e.jsx(Le,{className:"h-5 w-5 text-[#FF8C42]"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:Z.username}),e.jsx("div",{className:"text-sm text-gray-400",children:Z.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B.bg} ${B.text}`,children:Z.role.replace("_"," ").toUpperCase()}),Z.branch_id&&e.jsx("div",{className:"text-xs text-gray-400",children:z(Z.branch_id)})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-white",children:Z.mobile_number||"N/A"}),Z.address&&e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:Z.address})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-white",children:V(Z.createdAt)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:e.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:e.jsx(Ba,{className:"h-4 w-4"})})})})]},Z._id)})})]})}),M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Le,{className:"mx-auto h-12 w-12 text-gray-500"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:n||l!=="all"||c!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating a new user."})]})]}),e.jsx(W3,{isOpen:u,onClose:()=>{g(!1),S()},title:"Create New User",onSubmit:P,formData:y,onInputChange:q,error:D,loading:j,branches:A})]}):e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF8C42]"}),e.jsx("span",{className:"ml-2 text-gray-400",children:"Loading users..."})]})}const t5=({onRefresh:n})=>{const[r,l]=v.useState("month"),i=[{title:"Branch Performance",description:"Revenue and booking statistics by branch",icon:cs,color:"from-blue-500 to-blue-600",value:"12 Branches",subvalue:"All Active"},{title:"User Analytics",description:"User registration and activity metrics",icon:gt,color:"from-green-500 to-green-600",value:"2,543 Users",subvalue:"+156 this month"},{title:"Revenue Analytics",description:"Global revenue trends and projections",icon:Ut,color:"from-purple-500 to-purple-600",value:"1,234,567",subvalue:"+23% vs last month"},{title:"System Health",description:"Server performance and uptime statistics",icon:Gn,color:"from-orange-500 to-orange-600",value:"99.9% Uptime",subvalue:"All systems operational"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-lg flex items-center justify-center",children:e.jsx(ks,{className:"w-4 h-4 text-white"})}),e.jsx("span",{children:"System Reports"})]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Global analytics and performance metrics"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:r,onChange:c=>l(c.target.value),className:"bg-[#333333] border border-[#444444] text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"})]}),e.jsxs("button",{onClick:()=>console.log("Export reports"),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-all duration-200",children:[e.jsx(Xa,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((c,x)=>{const u=c.icon;return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 border border-[#444444]/50 hover:border-[#FF8C42]/50 transition-all duration-300 hover:shadow-xl hover:shadow-[#FF8C42]/10 cursor-pointer group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${c.color} rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200`,children:e.jsx(u,{className:"w-6 h-6 text-white"})}),e.jsx(Fs,{className:"w-4 h-4 text-green-400"})]}),e.jsx("h3",{className:"text-white font-semibold text-lg mb-2 group-hover:text-[#FF8C42] transition-colors",children:c.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:c.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:c.value}),e.jsx("div",{className:"text-sm text-green-400",children:c.subvalue})]})]},x)})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ks,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Charts Coming Soon"}),e.jsx("p",{className:"text-gray-400",children:"Advanced analytics charts and visualizations will be available here"}),e.jsx("button",{onClick:n,className:"mt-4 px-6 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-all duration-200",children:"Refresh Data"})]})})]})},s5=({onRefresh:n})=>{const[r,l]=v.useState({systemName:"TPX Barbershop Management",timezone:"Asia/Manila",currency:"PHP",emailNotifications:!0,smsNotifications:!1,autoBackup:!0,maintenanceMode:!1,debugMode:!1}),[i,c]=v.useState(!1),x=async()=>{c(!0),setTimeout(()=>{c(!1),console.log("Settings saved:",r)},2e3)},u=(m,f)=>{l(b=>({...b,[m]:f}))},g=[{title:"System Configuration",icon:Uj,settings:[{key:"systemName",label:"System Name",type:"text",description:"Display name for the application"},{key:"timezone",label:"Timezone",type:"select",options:[{value:"Asia/Manila",label:"Asia/Manila (GMT+8)"},{value:"UTC",label:"UTC (GMT+0)"},{value:"America/New_York",label:"America/New_York (GMT-5)"}],description:"System default timezone"},{key:"currency",label:"Default Currency",type:"select",options:[{value:"PHP",label:"PHP (Philippine Peso)"},{value:"USD",label:"USD (US Dollar)"},{value:"EUR",label:"EUR (Euro)"}],description:"Default currency for pricing"}]},{title:"Notifications",icon:sc,settings:[{key:"emailNotifications",label:"Email Notifications",type:"toggle",description:"Enable system email notifications"},{key:"smsNotifications",label:"SMS Notifications",type:"toggle",description:"Enable SMS notifications (requires SMS provider)"}]},{title:"Data & Security",icon:xp,settings:[{key:"autoBackup",label:"Automatic Backups",type:"toggle",description:"Enable daily automatic backups"},{key:"maintenanceMode",label:"Maintenance Mode",type:"toggle",description:"Enable maintenance mode (blocks user access)"},{key:"debugMode",label:"Debug Mode",type:"toggle",description:"Enable debug logging (performance impact)"}]}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-lg flex items-center justify-center",children:e.jsx(Sr,{className:"w-4 h-4 text-white"})}),e.jsx("span",{children:"Global Settings"})]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Configure system-wide settings and preferences"})]}),e.jsxs("button",{onClick:x,disabled:i,className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(na,{className:"w-4 h-4"}),e.jsx("span",{children:i?"Saving...":"Save Changes"})]})]}),e.jsx("div",{className:"space-y-8",children:g.map(m=>{const f=m.icon;return e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(f,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:m.title})]}),e.jsx("div",{className:"space-y-6",children:m.settings.map(b=>e.jsx("div",{className:"bg-[#1A1A1A]/50 rounded-xl p-6 border border-[#444444]/30",children:e.jsxs("div",{className:"flex items-start justify-between space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-white font-medium mb-1",children:b.label}),e.jsx("p",{className:"text-gray-400 text-sm mb-3",children:b.description})]}),e.jsxs("div",{className:"flex-shrink-0",children:[b.type==="text"&&e.jsx("input",{type:"text",value:r[b.key],onChange:p=>u(b.key,p.target.value),className:"w-64 px-3 py-2 bg-[#333333] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"}),b.type==="select"&&e.jsx("select",{value:r[b.key],onChange:p=>u(b.key,p.target.value),className:"w-64 px-3 py-2 bg-[#333333] border border-[#444444] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent",children:b.options.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))}),b.type==="toggle"&&e.jsx("button",{onClick:()=>u(b.key,!r[b.key]),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r[b.key]?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B]":"bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r[b.key]?"translate-x-6":"translate-x-1"}`})})]})]})},b.key))})]},m.title)})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-8 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-gray-500 to-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(up,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"System Information"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{label:"Version",value:"1.0.0"},{label:"Environment",value:"Production"},{label:"Database",value:"Convex"},{label:"Last Backup",value:"2 hours ago"},{label:"Uptime",value:"7d 12h 34m"},{label:"Active Users",value:"156"}].map(m=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:m.value}),e.jsx("div",{className:"text-gray-400 text-sm",children:m.label})]},m.label))})]})]})};function a5(){const{user:n,logout:r}=Tt(),l=ys(),[i,c]=v.useState(()=>localStorage.getItem("admin_dashboard_active_tab")||"overview");v.useEffect(()=>{localStorage.setItem("admin_dashboard_active_tab",i)},[i]);const x=fe(J.services.branches.getAllBranches)||[],u=fe(J.services.auth.getAllUsers)||[],g=fe(J.services.bookings.getAllBookings)||[],m=fe(J.services.services.getAllServices)||[],f=fe(J.services.barbers.getAllBarbers)||[],b=fe(J.services.transactions.getAllTransactions)||[],y=(()=>{if(!x||!u||!g||!b)return null;const L=x.filter(U=>U.is_active).length,A=b.filter(U=>U.payment_status==="completed").reduce((U,M)=>U+M.total_amount,0),_=g.filter(U=>{const M=new Date().toDateString();return new Date(U.date).toDateString()===M}).length,O=b.filter(U=>{const M=new Date(U.createdAt),E=new Date().toISOString().slice(0,7);return M.toISOString().slice(0,7)===E&&U.payment_status==="completed"}).reduce((U,M)=>U+M.total_amount,0);return{totalBranches:x.length,activeBranches:L,totalUsers:u.length,totalBookings:g.length,todayBookings:_,totalRevenue:A,thisMonthRevenue:O,totalBarbers:f.length,totalServices:m.length}})(),N=()=>{window.location.reload()},j=async()=>{try{await r(),l("/auth/login")}catch(L){console.error("Logout error:",L),l("/auth/login")}},w=()=>y?e.jsxs("div",{className:"space-y-8",children:[e.jsx(X3,{stats:[{label:"Total Branches",value:y.totalBranches,icon:"building",subtext:`${y.activeBranches} active`},{label:"Total Users",value:y.totalUsers,icon:"users"},{label:"Total Bookings",value:y.totalBookings,icon:"calendar",subtext:`${y.todayBookings} today`},{label:"Total Revenue",value:`${y.totalRevenue.toLocaleString()}`,icon:"dollar",subtext:`${y.thisMonthRevenue.toLocaleString()} this month`},{label:"Total Barbers",value:y.totalBarbers,icon:"user"},{label:"Total Services",value:y.totalServices,icon:"scissors"}]}),e.jsx(K3,{activities:[]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-400",children:"Loading dashboard data..."})]}),D=()=>{switch(i){case"overview":return w();case"branches":return e.jsx(J3,{onRefresh:N});case"users":return e.jsx(e5,{onRefresh:N});case"reports":return e.jsx(t5,{onRefresh:N});case"settings":return e.jsx(s5,{onRefresh:N});default:return w()}},C=[{id:"overview",label:"Overview",icon:"dashboard"},{id:"branches",label:"Branches",icon:"building"},{id:"users",label:"Users",icon:"users"},{id:"reports",label:"Reports",icon:"chart"},{id:"settings",label:"Settings",icon:"settings"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#0F0F0F] via-[#1A1A1A] to-[#2A2A2A]",children:[e.jsx(Y3,{onLogout:j}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"space-y-12",children:[e.jsx(G3,{}),e.jsx(Z3,{tabs:C,activeTab:i,onTabChange:c}),e.jsx("div",{className:"bg-gradient-to-br from-[#1E1E1E] to-[#2A2A2A] rounded-3xl shadow-2xl border border-[#333333]/50 p-10 backdrop-blur-sm",children:D()})]})})]})}const Wd=({barber:n,className:r="w-12 h-12"})=>{const[l,i]=v.useState(!1),x=fe(J.services.barbers.getImageUrl,n.avatarStorageId?{storageId:n.avatarStorageId}:"skip")||n.avatarUrl||"/img/avatar_default.jpg";return l||!x?e.jsx("div",{className:`flex items-center justify-center bg-gray-200 rounded-full ${r}`,children:e.jsx(Le,{className:"w-6 h-6 text-gray-500"})}):e.jsx("img",{src:x,alt:`${n.full_name||n.name} avatar`,className:`${r} rounded-full object-cover`,onError:()=>i(!0)})},r5=({onBack:n})=>{const{user:r,isAuthenticated:l}=Tt(),[i,c]=v.useState(null),[x,u]=v.useState(null),[g,m]=v.useState(()=>new Date().toISOString().split("T")[0]),[f,b]=v.useState(null),[p,y]=v.useState(null),[N,j]=v.useState(1),[w,D]=v.useState(!1),[C,L]=v.useState(!1),[A,_]=v.useState(null),[O,U]=v.useState(null),[M,E]=v.useState(!0),[S,$]=v.useState(!1),[P,q]=v.useState(null),[z,V]=v.useState(null),[Z,B]=v.useState(!1),k=v.useRef(null),I=fe(J.services.branches.getActiveBranches),se=fe(J.services.services.getServicesByBranch,i?{branch_id:i._id}:"skip"),T=fe(J.services.barbers.getBarbersByBranch,i?{branch_id:i._id}:"skip"),H=fe(J.services.vouchers.getVouchersByUser,r?.id?{userId:r.id}:"skip"),oe=Ee(J.services.bookings.createBooking),W=Go(J.services.payments.createPaymentRequest),le=Ee(J.services.bookings.updatePaymentStatus),K=fe(J.services.bookings.getBookingById,O?._id?{id:O._id}:"skip"),Y=fe(J.services.bookings.getBookingsByBarberAndDate,p&&g?{barberId:p._id,date:g}:"skip"),ge=Ee(J.services.vouchers.redeemVoucher);v.useEffect(()=>{const ee=sessionStorage.getItem("preSelectedService");if(ee&&se&&i)try{const _e=JSON.parse(ee),Ue=se.find(Ie=>Ie._id===_e._id||Ie.name.toLowerCase().includes("haircut")||Ie.name.toLowerCase().includes("cut"));Ue&&(u(Ue),j(3)),sessionStorage.removeItem("preSelectedService")}catch(_e){console.error("Error parsing pre-selected service:",_e),sessionStorage.removeItem("preSelectedService")}},[se,i]),v.useEffect(()=>{N===5&&E(!0)},[N]),v.useEffect(()=>{if(N===5&&O?._id&&K?.booking_code){console.log("Step 4 reached with booking ID:",O._id,"actual booking code:",K.booking_code);const ee=(Ue=0)=>{if(k.current){console.log("Canvas found, generating QR code with actual booking data");const Ie=K,Nt=Ie.booking_code;console.log("Generating QR with data:",Nt),console.log("QR Scanner expects format with bookingId and bookingCode fields:",{bookingId:Ie._id,bookingCode:Ie.booking_code}),Ds.toCanvas(k.current,Nt,{width:192,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},xt=>{xt?console.error("QR Code generation error:",xt):console.log("QR Code generated successfully with booking code:",Ie.booking_code),E(!1)})}else Ue<5?(console.log(`Canvas ref not available, retrying... (${Ue+1}/5)`),setTimeout(()=>ee(Ue+1),200)):(console.error("Canvas ref still not available after 5 retries"),E(!1))},_e=setTimeout(()=>ee(),100);return()=>clearTimeout(_e)}},[N,O?._id,K?.booking_code,x,p,z]);const pe=()=>H?H.filter(ee=>{const _e=ee.expires_at>Date.now(),Ue=!ee.redeemed;return _e&&Ue}):[],ye=ma.useMemo(()=>{if(!g||!p)return[];const ee=[],_e=9,Ue=18,Ie=new Date,xt=new Date(g).toDateString()===Ie.toDateString(),zt=Ie.getHours(),wt=Ie.getMinutes(),_s=Y?Y.filter(ot=>ot.status!=="cancelled").map(ot=>ot.time.substring(0,5)):[];for(let ot=_e;ot<Ue;ot++)for(let vs of[0,30]){const js=`${ot.toString().padStart(2,"0")}:${vs.toString().padStart(2,"0")}`,la=ot===12?`12:${vs.toString().padStart(2,"0")} PM`:ot>12?`${ot-12}:${vs.toString().padStart(2,"0")} PM`:`${ot}:${vs.toString().padStart(2,"0")} AM`;let Q=!0,he=null;_s.includes(js)&&(Q=!1,he="booked"),xt&&(ot<zt||ot===zt&&vs<=wt)&&(Q=!1,he="past"),ee.push({time:js,displayTime:la,available:Q,reason:he})}return ee},[g,p,Y]),Ae=()=>{if(!x||!T)return T||[];const ee=T.filter(_e=>_e.services&&Array.isArray(_e.services)&&_e.services.some(Ue=>Ue===x._id));return console.log(`Found ${ee.length} barbers for service ${x.name}`),ee},Te=ee=>{const _e=ee?.toLowerCase()||"";return _e.includes("haircut")||_e.includes("cut")?e.jsx(It,{className:"w-5 h-5 text-white"}):_e.includes("beard")?e.jsx(Tr,{className:"w-5 h-5 text-white"}):_e.includes("shave")?e.jsx(di,{className:"w-5 h-5 text-white"}):_e.includes("wash")?e.jsx(Fa,{className:"w-5 h-5 text-white"}):_e.includes("package")||_e.includes("complete")?e.jsx(Ea,{className:"w-5 h-5 text-white"}):e.jsx(nt,{className:"w-5 h-5 text-white"})},Ge=async(ee="pay_later",_e=null)=>{if(!x||!g||!f){alert("Please fill in all booking details");return}try{L(!0);const Ue=f.includes(":")?`${f}:00`:f,Ie={customer:r.id,service:x._id,barber:p?._id||void 0,branch_id:i._id,date:g,time:Ue,discount_amount:z?.value,status:"booked",notes:z?`Used voucher: ${z.code}`:void 0};console.log("Creating booking with data:",Ie);const Nt=await oe(Ie),xt={_id:Nt,booking_code:null,service:x,barber:p,date:g,time:Ue,status:"booked",voucher_code:z?.code};if(U(xt),ee==="pay_now"&&_e){if(!await Ze(Nt,_e))return;try{await le({id:Nt,payment_status:"paid"}),console.log("Booking payment status updated to paid")}catch(wt){console.error("Error updating booking payment status:",wt)}}else j(5);if(z?.code)try{console.log("Redeeming voucher:",z.code),await ge({code:z.code,redeemed_by:r.id}),console.log("Voucher redeemed successfully"),setTimeout(()=>{console.log(` Voucher ${z.code} redeemed successfully!`)},1500)}catch(zt){console.error("Error during voucher redemption:",zt)}}catch(Ue){console.error("Error creating booking:",Ue),alert(Ue.message||"Failed to create booking. Please try again.")}finally{L(!1)}},Ze=async(ee,_e)=>{try{const Ue=x?.price||0,Ie=z?.value||0,Nt=Math.max(0,Ue-Ie);if(Nt===0)return j(5),!0;console.log("Processing payment:",{amount:Nt,paymentMethod:_e,bookingId:ee});const xt=await W({amount:Nt,paymentMethod:_e,bookingId:ee,customerEmail:r.email,customerName:r.full_name||r.name});return console.log("Payment created successfully:",xt),xt.redirect_url?(window.location.href=xt.redirect_url,!0):(j(5),!0)}catch(Ue){return console.error("Payment processing error:",Ue),alert(`Payment failed: ${Ue.message}. Please try again or choose pay later.`),!1}},Ye=ee=>{c(ee),u(null),y(null),b(null),j(2)},Xe=ee=>{u(ee),y(null),j(3)},pt=ee=>{console.log("Selected Barber ID:",ee._id),sessionStorage.setItem("barberId",ee._id),y(ee)},it=async(ee="pay_later",_e=null)=>{await Ge(ee,_e)},xe=()=>e.jsx("div",{className:"flex justify-center mb-4 px-4 py-2",children:e.jsx("div",{className:"flex items-center space-x-3",children:[1,2,3,4].map(ee=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${N>=ee?"text-white shadow-md":"text-gray-500"}`,style:{backgroundColor:N>=ee?"#F68B24":"#E0E0E0"},children:N>ee?"":ee}),ee<4&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded transition-all duration-300",style:{backgroundColor:N>ee?"#F68B24":"#E0E0E0"}})]},ee))})}),Fe=()=>I?I.length===0?e.jsxs("div",{className:"text-center py-8 px-4 min-h-[200px] flex flex-col justify-center",children:[e.jsx("div",{className:"rounded-full w-14 h-14 flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"rgba(220, 53, 69, 0.1)"},children:e.jsx(Pt,{className:"w-7 h-7 text-red-500"})}),e.jsx("p",{className:"text-sm text-red-600 mb-4 font-medium px-4",children:"No branches available"})]}):e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"rounded-full w-12 h-12 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center mr-3 shadow-lg",children:e.jsx(cs,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-xl font-bold leading-tight text-white",children:"Select Your Branch"}),e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Choose your preferred location"})]})]})}),e.jsx("div",{className:"space-y-4",children:I.map(ee=>e.jsxs("button",{onClick:()=>Ye(ee),className:"group relative w-full bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl shadow-lg active:shadow-xl border-2 border-[#555555]/30 hover:border-[#FF8C42]/50 active:border-[#FF8C42] transition-all duration-200 overflow-hidden touch-manipulation min-h-[120px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FF8C42]/5 via-transparent to-[#FF8C42]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#FF8C42]/10 to-[#FF7A2B]/10 opacity-0 group-active:opacity-100 transition-opacity duration-200"}),e.jsxs("div",{className:"relative p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-full w-12 h-12 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-105",children:e.jsx(cs,{className:"w-6 h-6 text-white"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("h3",{className:"text-base font-bold leading-tight text-white group-hover:text-[#FF8C42] transition-colors duration-200",children:ee.name}),e.jsxs("p",{className:"text-xs font-mono text-gray-400 mt-1",children:["#",ee.branch_code]})]})}),e.jsxs("div",{className:"space-y-1 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fi,{className:"w-3 h-3 flex-shrink-0 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-400 truncate",children:ee.address})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Is,{className:"w-3 h-3 flex-shrink-0 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-400",children:ee.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"w-3 h-3 flex-shrink-0 text-gray-500"}),e.jsx("span",{className:"text-xs text-gray-400",children:ee.email})]})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] scale-x-0 group-hover:scale-x-100 group-active:scale-x-100 transition-transform duration-200 origin-left rounded-b-2xl"})]})]},ee._id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-3 rounded-full bg-[#FF8C42]/20 border border-[#FF8C42]/30",children:[e.jsx(cs,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsxs("span",{className:"text-sm font-semibold text-[#FF8C42]",children:[I.length," Branch",I.length!==1?"es":""," Available"]})]})})]}):e.jsxs("div",{className:"text-center py-8 px-4 min-h-[200px] flex flex-col justify-center",children:[e.jsx("div",{className:"rounded-full w-14 h-14 flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"rgba(246, 139, 36, 0.1)"},children:e.jsx(cs,{className:"w-7 h-7",style:{color:"#F68B24"}})}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Loading branches..."})]}),ae=()=>w||!se?e.jsxs("div",{className:"text-center py-8 px-4 min-h-[200px] flex flex-col justify-center",children:[e.jsx("div",{className:"rounded-full w-14 h-14 flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"rgba(246, 139, 36, 0.1)"},children:e.jsx(Re,{className:"w-7 h-7",style:{color:"#F68B24"}})}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Loading premium services..."})]}):A?e.jsxs("div",{className:"text-center py-8 px-4 min-h-[200px] flex flex-col justify-center",children:[e.jsx("div",{className:"rounded-full w-14 h-14 flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"rgba(220, 53, 69, 0.1)"},children:e.jsx(Pt,{className:"w-7 h-7 text-red-500"})}),e.jsx("p",{className:"text-sm text-red-600 mb-4 font-medium px-4",children:A}),e.jsx("button",{onClick:loadBookingData,className:"w-full max-w-xs mx-auto px-6 py-3 bg-gradient-to-r from-[#F68B24] to-orange-500 text-white rounded-xl font-semibold hover:from-orange-500 hover:to-[#F68B24] transition-all duration-300 shadow-lg active:shadow-md active:scale-95 min-h-[44px] touch-manipulation",children:"Try Again"})]}):e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"rounded-full w-12 h-12 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center mr-3 shadow-lg",children:e.jsx(nt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h2",{className:"text-xl font-bold leading-tight text-white",children:"Choose Your Service"}),e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Premium grooming services"})]})]})}),e.jsx("div",{className:"space-y-4",children:se&&se.map(ee=>e.jsxs("button",{onClick:()=>Xe(ee),className:"group relative w-full bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl shadow-lg active:shadow-xl border-2 border-[#555555]/30 hover:border-[#FF8C42]/50 active:border-[#FF8C42] transition-all duration-200 overflow-hidden touch-manipulation min-h-[100px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#FF8C42]/5 via-transparent to-[#FF8C42]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#FF8C42]/10 to-[#FF7A2B]/10 opacity-0 group-active:opacity-100 transition-opacity duration-200"}),e.jsxs("div",{className:"relative p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-full w-12 h-12 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-105",children:Te(ee.name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex justify-between items-start mb-1",children:e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("h3",{className:"text-base font-bold leading-tight text-white group-hover:text-[#FF8C42] transition-colors duration-200",children:ee.name}),e.jsx("p",{className:"text-sm mt-1 line-clamp-2 leading-relaxed text-gray-400",children:ee.description||"Professional grooming service tailored to your needs"})]})}),e.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(jt,{className:"w-4 h-4 flex-shrink-0 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium truncate text-gray-400",children:ee.duration_minutes?`${ee.duration_minutes} min`:"Duration varies"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"w-4 h-4 flex-shrink-0 text-[#FF8C42]"}),e.jsx("span",{className:"text-sm font-medium text-gray-400",children:"5.0"})]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-xl px-3 py-2 bg-[#FF8C42]/20 border border-[#FF8C42]/30 text-center min-w-[70px]",children:e.jsxs("div",{className:"text-base font-bold leading-tight text-[#FF8C42]",children:["",parseFloat(ee.price||0).toLocaleString()]})})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] scale-x-0 group-hover:scale-x-100 group-active:scale-x-100 transition-transform duration-200 origin-left rounded-b-2xl"})]})]},ee._id))}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-3 rounded-full bg-[#FF8C42]/20 border border-[#FF8C42]/30",children:[e.jsx(Ea,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsxs("span",{className:"text-sm font-semibold text-[#FF8C42]",children:[se.length," Premium Services Available"]})]})})]}),G=()=>e.jsxs("div",{className:"space-y-4 px-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-2 text-white",children:"Select Barber & Time"}),e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Choose your preferred barber, then pick a time"})]}),e.jsx("div",{className:"bg-white rounded-xl p-3 border shadow-sm",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-xl",children:x?.image}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-bold",style:{color:"#36454F"},children:x?.name}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsxs("span",{className:"font-bold",style:{color:"#F68B24"},children:["",x?.price.toLocaleString()]}),e.jsx("span",{className:"font-medium",style:{color:"#8B8B8B"},children:x?.duration})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",style:{borderColor:"#E0E0E0"},children:[e.jsx("h3",{className:"text-base font-bold mb-3",style:{color:"#36454F"},children:"Step 1: Choose Your Barber"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:Ae().length>0?Ae().map(ee=>e.jsx("button",{onClick:()=>{pt(ee),b(null)},className:"w-full p-3 rounded-lg border-2 transition-all duration-200 text-left hover:shadow-sm",style:{borderColor:p?._id===ee._id?"#F68B24":"#E0E0E0",backgroundColor:p?._id===ee._id?"rgba(246, 139, 36, 0.1)":"white"},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[p?._id===ee._id?e.jsxs("div",{className:"relative",children:[e.jsx(Wd,{barber:ee,className:"w-10 h-10"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-3 h-3 text-white"})})]}):e.jsx(Wd,{barber:ee,className:"w-10 h-10"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-sm",style:{color:"#36454F"},children:ee.full_name||ee.name||"Professional Barber"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"flex text-yellow-400 text-xs",children:""}),e.jsx("span",{className:"text-xs",style:{color:"#8B8B8B"},children:"5.0  Professional"})]})]})]})},ee._id)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsxs("p",{className:"text-sm font-medium",style:{color:"#F68B24"},children:['No barbers available for "',x?.name,'"']}),e.jsx("p",{className:"text-xs mt-1",style:{color:"#8B8B8B"},children:"This service may not be offered by our current staff"}),e.jsx("button",{onClick:()=>j(1),className:"mt-3 px-4 py-2 bg-orange-500 text-white text-xs font-medium rounded-lg hover:bg-orange-600 transition-colors",children:"Choose Different Service"})]})})]}),p&&e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",style:{borderColor:"#E0E0E0"},children:[e.jsx("h3",{className:"text-base font-bold mb-3",style:{color:"#36454F"},children:"Step 2: Select Date"}),e.jsx("input",{type:"date",value:g,onChange:ee=>{m(ee.target.value),b(null)},min:new Date().toISOString().split("T")[0],max:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],className:"w-full p-3 border-2 border-gray-200 rounded-lg text-base font-medium focus:outline-none focus:border-orange-500 transition-colors",style:{color:"#36454F"}})]}),p&&g&&e.jsxs("div",{className:"bg-white rounded-xl p-4 border shadow-sm",style:{borderColor:"#E0E0E0"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-base font-bold",style:{color:"#36454F"},children:"Step 3: Available Times"}),e.jsx("span",{className:"text-xs",style:{color:"#8B8B8B"},children:new Date(g).toLocaleDateString("en-PH",{weekday:"short",month:"short",day:"numeric"})})]}),Z?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-orange-500 border-t-transparent rounded-full"}),e.jsx("span",{className:"text-sm",style:{color:"#8B8B8B"},children:"Loading available times..."})]})}):ye.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#F68B24"},children:"No available times"}),e.jsx("p",{className:"text-xs mt-1",style:{color:"#8B8B8B"},children:"Please select a different date"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:ye.map(ee=>e.jsxs("button",{onClick:()=>ee.available&&b(ee.time),disabled:!ee.available,className:"p-2 rounded-lg font-semibold text-center transition-all duration-200 border text-sm relative",style:{backgroundColor:ee.available?f===ee.time?"#F68B24":"#F5F5F5":"#F0F0F0",color:ee.available?f===ee.time?"white":"#36454F":"#CCCCCC",borderColor:ee.available&&f===ee.time?"#F68B24":"transparent",cursor:ee.available?"pointer":"not-allowed"},title:ee.available?`Book at ${ee.displayTime}`:`${ee.displayTime} - ${ee.reason==="past"?"Past time":ee.reason==="booked"?"Already booked":"Unavailable"}`,children:[ee.displayTime,!ee.available&&e.jsx("div",{className:"absolute top-1 right-1",children:e.jsx("div",{className:`w-2 h-2 rounded-full ${ee.reason==="past"?"bg-gray-400":"bg-red-500"}`})})]},ee.time))}),e.jsxs("div",{className:"flex items-center justify-center space-x-3 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#F5F5F5"}}),e.jsx("span",{style:{color:"#8B8B8B"},children:"Available"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#F68B24"}}),e.jsx("span",{style:{color:"#8B8B8B"},children:"Selected"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#F0F0F0"}}),e.jsx("span",{style:{color:"#8B8B8B"},children:"Booked"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-gray-300"}),e.jsx("span",{style:{color:"#8B8B8B"},children:"Past"})]})]})]})]}),f&&p&&g&&e.jsx("button",{onClick:()=>j(4),className:"w-full py-3 text-white font-bold rounded-xl transition-all duration-200 shadow-lg",style:{backgroundColor:"#F68B24"},onMouseEnter:ee=>ee.target.style.backgroundColor="#E67E22",onMouseLeave:ee=>ee.target.style.backgroundColor="#F68B24",children:"Continue to Confirmation"}),p&&e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full shadow-sm",style:{backgroundColor:"rgba(246, 139, 36, 0.1)"},children:e.jsx("span",{className:"text-xs font-semibold",style:{color:"#F68B24"},children:p&&!g?"Step 2: Select Date":p&&g&&!f?"Step 3: Select Time":p&&g&&f?"Ready to Continue!":"Step 1: Choose Barber"})})})]}),me=()=>e.jsxs("div",{className:"space-y-3 px-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h2",{className:"text-xl font-bold mb-1",style:{color:"#36454F"},children:"Confirm Your Booking"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"#8B8B8B"},children:"Please review your appointment details"})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border shadow-lg",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center border-b pb-3",style:{borderColor:"#E0E0E0"},children:[e.jsx("div",{className:"text-2xl mb-2",children:x?.image}),e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"#36454F"},children:x?.name}),e.jsxs("div",{className:"flex justify-center items-center space-x-3",children:[e.jsxs("span",{className:"font-bold text-base",style:{color:"#F68B24"},children:["",x?.price.toLocaleString()]}),e.jsx("span",{className:"font-medium text-sm",style:{color:"#8B8B8B"},children:x?.duration})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cs,{className:"w-4 h-4",style:{color:"#F68B24"}}),e.jsx("span",{className:"font-semibold text-sm",style:{color:"#36454F"},children:"Branch"})]}),e.jsx("span",{className:"font-bold text-sm",style:{color:"#36454F"},children:i?.name})]}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"w-4 h-4",style:{color:"#F68B24"}}),e.jsx("span",{className:"font-semibold text-sm",style:{color:"#36454F"},children:"Date & Time"})]}),e.jsxs("span",{className:"font-bold text-sm",style:{color:"#36454F"},children:["Today, ",f]})]}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"w-4 h-4",style:{color:"#F68B24"}}),e.jsx("span",{className:"font-semibold text-sm",style:{color:"#36454F"},children:"Your Barber"})]}),e.jsx("span",{className:"font-bold text-sm",style:{color:"#36454F"},children:p?.full_name||p?.name||"Any Barber"})]})]}),e.jsxs("div",{className:"border-t pt-3",style:{borderColor:"#E0E0E0"},children:[e.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center",style:{color:"#36454F"},children:[e.jsx(kt,{className:"w-4 h-4 mr-2",style:{color:"#F68B24"}}),"Apply Voucher (Optional)"]}),pe().length>0?e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:pe().map(ee=>e.jsx("button",{onClick:()=>V(z?._id===ee._id?null:ee),className:"w-full p-2 rounded-lg border-2 transition-all duration-200 text-left",style:{borderColor:z?._id===ee._id?"#F68B24":"#E0E0E0",backgroundColor:z?._id===ee._id?"rgba(246, 139, 36, 0.1)":"white"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-sm",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold",style:{color:"#36454F"},children:ee.code}),e.jsxs("p",{className:"text-xs",style:{color:"#F68B24"},children:["",parseFloat(ee.value||0).toFixed(2)]})]})]}),z?._id===ee._id&&e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center",style:{backgroundColor:"#F68B24"},children:e.jsx("span",{className:"text-white text-xs",children:""})})]})},ee._id))}),z&&e.jsxs("div",{className:"text-xs text-center p-2 rounded",style:{backgroundColor:"#F0F8FF",color:"#36454F"},children:[" You'll save ",parseFloat(z.value||0).toFixed(2)," with this voucher"]})]}):e.jsx("div",{className:"text-center py-3",children:e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"No vouchers available"})})]}),e.jsxs("div",{className:"border-t pt-3",style:{borderColor:"#E0E0E0"},children:[e.jsx("h4",{className:"text-sm font-bold mb-3",style:{color:"#36454F"},children:"Complete Your Booking"}),S?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("h5",{className:"text-sm font-bold mb-2",style:{color:"#36454F"},children:"Select Payment Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>q("gcash"),className:`w-full p-3 rounded-lg border-2 transition-all duration-200 flex items-center space-x-3 ${P==="gcash"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"G"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sm",style:{color:"#36454F"},children:"GCash"}),e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"Digital wallet payment"})]})]},"gcash"),e.jsxs("button",{onClick:()=>q("maya"),className:`w-full p-3 rounded-lg border-2 transition-all duration-200 flex items-center space-x-3 ${P==="maya"?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"M"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sm",style:{color:"#36454F"},children:"Maya"}),e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"Digital wallet payment"})]})]},"maya"),e.jsxs("button",{onClick:()=>q("card"),className:`w-full p-3 rounded-lg border-2 transition-all duration-200 flex items-center space-x-3 ${P==="card"?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"}`,children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:""})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-sm",style:{color:"#36454F"},children:"Credit/Debit Card"}),e.jsx("p",{className:"text-xs",style:{color:"#8B8B8B"},children:"Visa, Mastercard, etc."})]})]},"card")]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{$(!1),q(null)},className:"flex-1 py-2 px-3 border font-bold rounded-lg transition-all duration-200 text-sm",style:{borderColor:"#E0E0E0",color:"#8B8B8B"},onMouseEnter:ee=>{ee.target.style.backgroundColor="#F5F5F5",ee.target.style.color="#36454F"},onMouseLeave:ee=>{ee.target.style.backgroundColor="transparent",ee.target.style.color="#8B8B8B"},children:"Back"}),e.jsx("button",{onClick:()=>it("pay_now",P),disabled:!P||C,className:`flex-1 py-2 px-3 text-white font-bold rounded-lg transition-all duration-200 shadow-lg text-sm ${!P||C?"opacity-75 cursor-not-allowed":""}`,style:{backgroundColor:!P||C?"#CCCCCC":"#22C55E"},onMouseEnter:ee=>!P||C||(ee.target.style.backgroundColor="#16A34A"),onMouseLeave:ee=>!P||C||(ee.target.style.backgroundColor="#22C55E"),children:C?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]}):"Confirm & Pay"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("button",{onClick:()=>$(!0),disabled:C,className:`py-3 px-4 bg-green-500 text-white font-bold rounded-lg transition-all duration-200 text-sm flex items-center justify-center space-x-2 ${C?"opacity-75 cursor-not-allowed":""}`,onMouseEnter:ee=>!C&&(ee.target.style.backgroundColor="#16A34A"),onMouseLeave:ee=>!C&&(ee.target.style.backgroundColor="#22C55E"),children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Pay Now"})]}),e.jsx("button",{onClick:()=>it("pay_later"),disabled:C,className:`py-3 px-4 border-2 font-bold rounded-lg transition-all duration-200 text-sm flex items-center justify-center space-x-2 ${C?"opacity-75 cursor-not-allowed":""}`,style:{borderColor:"#F68B24",color:C?"#CCCCCC":"#F68B24"},onMouseEnter:ee=>!C&&(ee.target.style.backgroundColor="#F68B24",ee.target.style.color="white"),onMouseLeave:ee=>!C&&(ee.target.style.backgroundColor="transparent",ee.target.style.color="#F68B24"),children:C?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full"}),e.jsx("span",{children:"Booking..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Pay Later"})]})})]}),!S&&e.jsx("p",{className:"text-xs text-center mb-3",style:{color:"#8B8B8B"},children:"Choose your preferred payment option to complete booking"})]}),!S&&e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:()=>j(3),className:"w-full py-2 px-3 border font-bold rounded-lg transition-all duration-200 text-sm",style:{borderColor:"#E0E0E0",color:"#8B8B8B"},onMouseEnter:ee=>{ee.target.style.backgroundColor="#F5F5F5",ee.target.style.color="#36454F"},onMouseLeave:ee=>{ee.target.style.backgroundColor="transparent",ee.target.style.color="#8B8B8B"},children:" Go Back to Edit Details"})})]})})]}),Ce=()=>e.jsxs("div",{className:"space-y-6 px-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl",style:{backgroundColor:"#F68B24"},children:e.jsx(Qe,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-black mb-2 text-white",children:"Booking Confirmed!"}),e.jsx("p",{className:"font-medium text-gray-300",children:"Your appointment has been successfully booked"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 border-2 shadow-lg text-center",style:{borderColor:"#E0E0E0"},children:[e.jsx("h3",{className:"text-lg font-black mb-4 text-black",children:"Your Booking QR Code"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-white rounded-2xl border-2 shadow-sm",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"relative w-48 h-48",children:[(M||!K?.booking_code)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-orange-500 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-gray-700",children:K?.booking_code?"Generating QR Code...":"Loading booking details..."})]})}),e.jsx("canvas",{ref:k,className:"rounded-xl w-full h-full",style:{display:M||!K?.booking_code?"none":"block"}})]})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("div",{className:"text-lg font-black text-black",children:["Booking Code: ",K?.booking_code?K.booking_code:e.jsxs("span",{className:"inline-flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-700",children:"Generating..."}),e.jsx("div",{className:"animate-pulse w-2 h-2 bg-orange-500 rounded-full"})]})]}),e.jsx("p",{className:"text-sm text-gray-700",children:"Show this QR code when you arrive"})]})]}),e.jsx("div",{className:"rounded-2xl p-6 border",style:{backgroundColor:"rgba(246, 139, 36, 0.05)",borderColor:"rgba(246, 139, 36, 0.2)"},children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Branch:"}),e.jsx("span",{className:"font-bold text-white",children:i?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Service:"}),e.jsx("span",{className:"font-bold text-white",children:x?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Date & Time:"}),e.jsxs("span",{className:"font-bold text-white",children:[O?.date?new Date(O.date).toLocaleDateString():"Today",", ",O?.time||f]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Barber:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p&&e.jsx(Wd,{barber:p,className:"w-8 h-8"}),e.jsx("span",{className:"font-bold text-white",children:p?.full_name||p?.name||"Any Barber"})]})]}),z&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Subtotal:"}),e.jsxs("span",{className:"font-bold line-through text-gray-400",children:["",x?.price.toLocaleString()]})]}),z&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Voucher Discount:"}),e.jsxs("span",{className:"font-bold text-green-400",children:["-",parseFloat(z.value||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-3 border-orange-500/30",children:[e.jsx("span",{className:"font-bold text-white",children:"Total:"}),e.jsxs("span",{className:"font-black text-lg text-orange-400",children:["",O?.total_amount?parseFloat(O.total_amount).toLocaleString():Math.max(0,(x?.price||0)-(z?.value||0)).toLocaleString()]})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:n,className:"w-full py-4 text-white font-bold rounded-2xl transition-all duration-200 shadow-lg",style:{backgroundColor:"#F68B24"},onMouseEnter:ee=>ee.target.style.backgroundColor="#E67E22",onMouseLeave:ee=>ee.target.style.backgroundColor="#F68B24",children:"Back to Home"}),e.jsx("button",{onClick:()=>{n&&n("bookings")},className:"w-full py-3 border-2 font-bold rounded-2xl transition-all duration-200",style:{borderColor:"#F68B24",color:"#F68B24"},onMouseEnter:ee=>{ee.target.style.backgroundColor="#F68B24",ee.target.style.color="white"},onMouseLeave:ee=>{ee.target.style.backgroundColor="transparent",ee.target.style.color="#F68B24"},children:"View My Bookings"})]})]});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30 shadow-lg",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"Book Service"}),e.jsxs("p",{className:"text-xs text-[#FF8C42]",children:["Step ",N," of 4"]})]})]})})}),e.jsx("div",{className:"relative z-10",children:xe()}),e.jsxs("div",{className:"relative z-10 pb-8",children:[N===1&&Fe(),N===2&&ae(),N===3&&G(),N===4&&me(),N===5&&Ce()]})]})};var Io={exports:{}},n5=Io.exports,Cg;function l5(){return Cg||(Cg=1,function(n,r){(function(i,c){n.exports=c()})(typeof self<"u"?self:n5,function(){return function(l){var i={};function c(x){if(i[x])return i[x].exports;var u=i[x]={i:x,l:!1,exports:{}};return l[x].call(u.exports,u,u.exports,c),u.l=!0,u.exports}return c.m=l,c.c=i,c.d=function(x,u,g){c.o(x,u)||Object.defineProperty(x,u,{configurable:!1,enumerable:!0,get:g})},c.n=function(x){var u=x&&x.__esModule?function(){return x.default}:function(){return x};return c.d(u,"a",u),u},c.o=function(x,u){return Object.prototype.hasOwnProperty.call(x,u)},c.p="",c(c.s=3)}([function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=function(){function u(g,m){this.width=m,this.height=g.length/m,this.data=g}return u.createEmpty=function(g,m){return new u(new Uint8ClampedArray(g*m),g)},u.prototype.get=function(g,m){return g<0||g>=this.width||m<0||m>=this.height?!1:!!this.data[m*this.width+g]},u.prototype.set=function(g,m,f){this.data[m*this.width+g]=f?1:0},u.prototype.setRegion=function(g,m,f,b,p){for(var y=m;y<m+b;y++)for(var N=g;N<g+f;N++)this.set(N,y,!!p)},u}();i.BitMatrix=x},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(2);function u(m,f){return m^f}i.addOrSubtractGF=u;var g=function(){function m(f,b,p){this.primitive=f,this.size=b,this.generatorBase=p,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var y=1,N=0;N<this.size;N++)this.expTable[N]=y,y=y*2,y>=this.size&&(y=(y^this.primitive)&this.size-1);for(var N=0;N<this.size-1;N++)this.logTable[this.expTable[N]]=N;this.zero=new x.default(this,Uint8ClampedArray.from([0])),this.one=new x.default(this,Uint8ClampedArray.from([1]))}return m.prototype.multiply=function(f,b){return f===0||b===0?0:this.expTable[(this.logTable[f]+this.logTable[b])%(this.size-1)]},m.prototype.inverse=function(f){if(f===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[f]-1]},m.prototype.buildMonomial=function(f,b){if(f<0)throw new Error("Invalid monomial degree less than 0");if(b===0)return this.zero;var p=new Uint8ClampedArray(f+1);return p[0]=b,new x.default(this,p)},m.prototype.log=function(f){if(f===0)throw new Error("Can't take log(0)");return this.logTable[f]},m.prototype.exp=function(f){return this.expTable[f]},m}();i.default=g},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(1),u=function(){function g(m,f){if(f.length===0)throw new Error("No coefficients.");this.field=m;var b=f.length;if(b>1&&f[0]===0){for(var p=1;p<b&&f[p]===0;)p++;if(p===b)this.coefficients=m.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(b-p);for(var y=0;y<this.coefficients.length;y++)this.coefficients[y]=f[p+y]}}else this.coefficients=f}return g.prototype.degree=function(){return this.coefficients.length-1},g.prototype.isZero=function(){return this.coefficients[0]===0},g.prototype.getCoefficient=function(m){return this.coefficients[this.coefficients.length-1-m]},g.prototype.addOrSubtract=function(m){var f;if(this.isZero())return m;if(m.isZero())return this;var b=this.coefficients,p=m.coefficients;b.length>p.length&&(f=[p,b],b=f[0],p=f[1]);for(var y=new Uint8ClampedArray(p.length),N=p.length-b.length,j=0;j<N;j++)y[j]=p[j];for(var j=N;j<p.length;j++)y[j]=x.addOrSubtractGF(b[j-N],p[j]);return new g(this.field,y)},g.prototype.multiply=function(m){if(m===0)return this.field.zero;if(m===1)return this;for(var f=this.coefficients.length,b=new Uint8ClampedArray(f),p=0;p<f;p++)b[p]=this.field.multiply(this.coefficients[p],m);return new g(this.field,b)},g.prototype.multiplyPoly=function(m){if(this.isZero()||m.isZero())return this.field.zero;for(var f=this.coefficients,b=f.length,p=m.coefficients,y=p.length,N=new Uint8ClampedArray(b+y-1),j=0;j<b;j++)for(var w=f[j],D=0;D<y;D++)N[j+D]=x.addOrSubtractGF(N[j+D],this.field.multiply(w,p[D]));return new g(this.field,N)},g.prototype.multiplyByMonomial=function(m,f){if(m<0)throw new Error("Invalid degree less than 0");if(f===0)return this.field.zero;for(var b=this.coefficients.length,p=new Uint8ClampedArray(b+m),y=0;y<b;y++)p[y]=this.field.multiply(this.coefficients[y],f);return new g(this.field,p)},g.prototype.evaluateAt=function(m){var f=0;if(m===0)return this.getCoefficient(0);var b=this.coefficients.length;if(m===1)return this.coefficients.forEach(function(y){f=x.addOrSubtractGF(f,y)}),f;f=this.coefficients[0];for(var p=1;p<b;p++)f=x.addOrSubtractGF(this.field.multiply(m,f),this.coefficients[p]);return f},g}();i.default=u},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(4),u=c(5),g=c(11),m=c(12);function f(y){var N=m.locate(y);if(!N)return null;for(var j=0,w=N;j<w.length;j++){var D=w[j],C=g.extract(y,D),L=u.decode(C.matrix);if(L)return{binaryData:L.bytes,data:L.text,chunks:L.chunks,version:L.version,location:{topRightCorner:C.mappingFunction(D.dimension,0),topLeftCorner:C.mappingFunction(0,0),bottomRightCorner:C.mappingFunction(D.dimension,D.dimension),bottomLeftCorner:C.mappingFunction(0,D.dimension),topRightFinderPattern:D.topRight,topLeftFinderPattern:D.topLeft,bottomLeftFinderPattern:D.bottomLeft,bottomRightAlignmentPattern:D.alignmentPattern}}}return null}var b={inversionAttempts:"attemptBoth"};function p(y,N,j,w){w===void 0&&(w={});var D=b;Object.keys(D||{}).forEach(function(M){D[M]=w[M]||D[M]});var C=D.inversionAttempts==="attemptBoth"||D.inversionAttempts==="invertFirst",L=D.inversionAttempts==="onlyInvert"||D.inversionAttempts==="invertFirst",A=x.binarize(y,N,j,C),_=A.binarized,O=A.inverted,U=f(L?O:_);return!U&&(D.inversionAttempts==="attemptBoth"||D.inversionAttempts==="invertFirst")&&(U=f(L?_:O)),U}p.default=p,i.default=p},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(0),u=8,g=24;function m(p,y,N){return p<y?y:p>N?N:p}var f=function(){function p(y,N){this.width=y,this.data=new Uint8ClampedArray(y*N)}return p.prototype.get=function(y,N){return this.data[N*this.width+y]},p.prototype.set=function(y,N,j){this.data[N*this.width+y]=j},p}();function b(p,y,N,j){if(p.length!==y*N*4)throw new Error("Malformed data passed to binarizer.");for(var w=new f(y,N),D=0;D<y;D++)for(var C=0;C<N;C++){var L=p[(C*y+D)*4+0],A=p[(C*y+D)*4+1],_=p[(C*y+D)*4+2];w.set(D,C,.2126*L+.7152*A+.0722*_)}for(var O=Math.ceil(y/u),U=Math.ceil(N/u),M=new f(O,U),E=0;E<U;E++)for(var S=0;S<O;S++){for(var $=0,P=1/0,q=0,C=0;C<u;C++)for(var D=0;D<u;D++){var z=w.get(S*u+D,E*u+C);$+=z,P=Math.min(P,z),q=Math.max(q,z)}var V=$/Math.pow(u,2);if(q-P<=g&&(V=P/2,E>0&&S>0)){var Z=(M.get(S,E-1)+2*M.get(S-1,E)+M.get(S-1,E-1))/4;P<Z&&(V=Z)}M.set(S,E,V)}var B=x.BitMatrix.createEmpty(y,N),k=null;j&&(k=x.BitMatrix.createEmpty(y,N));for(var E=0;E<U;E++)for(var S=0;S<O;S++){for(var I=m(S,2,O-3),se=m(E,2,U-3),$=0,T=-2;T<=2;T++)for(var H=-2;H<=2;H++)$+=M.get(I+T,se+H);for(var oe=$/25,T=0;T<u;T++)for(var H=0;H<u;H++){var D=S*u+T,C=E*u+H,W=w.get(D,C);B.set(D,C,W<=oe),j&&k.set(D,C,!(W<=oe))}}return j?{binarized:B,inverted:k}:{binarized:B}}i.binarize=b},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(0),u=c(6),g=c(9),m=c(10);function f(_,O){for(var U=_^O,M=0;U;)M++,U&=U-1;return M}function b(_,O){return O<<1|_}var p=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],y=[function(_){return(_.y+_.x)%2===0},function(_){return _.y%2===0},function(_){return _.x%3===0},function(_){return(_.y+_.x)%3===0},function(_){return(Math.floor(_.y/2)+Math.floor(_.x/3))%2===0},function(_){return _.x*_.y%2+_.x*_.y%3===0},function(_){return(_.y*_.x%2+_.y*_.x%3)%2===0},function(_){return((_.y+_.x)%2+_.y*_.x%3)%2===0}];function N(_){var O=17+4*_.versionNumber,U=x.BitMatrix.createEmpty(O,O);U.setRegion(0,0,9,9,!0),U.setRegion(O-8,0,8,9,!0),U.setRegion(0,O-8,9,8,!0);for(var M=0,E=_.alignmentPatternCenters;M<E.length;M++)for(var S=E[M],$=0,P=_.alignmentPatternCenters;$<P.length;$++){var q=P[$];S===6&&q===6||S===6&&q===O-7||S===O-7&&q===6||U.setRegion(S-2,q-2,5,5,!0)}return U.setRegion(6,9,1,O-17,!0),U.setRegion(9,6,O-17,1,!0),_.versionNumber>6&&(U.setRegion(O-11,0,3,6,!0),U.setRegion(0,O-11,6,3,!0)),U}function j(_,O,U){for(var M=y[U.dataMask],E=_.height,S=N(O),$=[],P=0,q=0,z=!0,V=E-1;V>0;V-=2){V===6&&V--;for(var Z=0;Z<E;Z++)for(var B=z?E-1-Z:Z,k=0;k<2;k++){var I=V-k;if(!S.get(I,B)){q++;var se=_.get(I,B);M({y:B,x:I})&&(se=!se),P=b(se,P),q===8&&($.push(P),q=0,P=0)}}z=!z}return $}function w(_){var O=_.height,U=Math.floor((O-17)/4);if(U<=6)return m.VERSIONS[U-1];for(var M=0,E=5;E>=0;E--)for(var S=O-9;S>=O-11;S--)M=b(_.get(S,E),M);for(var $=0,S=5;S>=0;S--)for(var E=O-9;E>=O-11;E--)$=b(_.get(S,E),$);for(var P=1/0,q,z=0,V=m.VERSIONS;z<V.length;z++){var Z=V[z];if(Z.infoBits===M||Z.infoBits===$)return Z;var B=f(M,Z.infoBits);B<P&&(q=Z,P=B),B=f($,Z.infoBits),B<P&&(q=Z,P=B)}if(P<=3)return q}function D(_){for(var O=0,U=0;U<=8;U++)U!==6&&(O=b(_.get(U,8),O));for(var M=7;M>=0;M--)M!==6&&(O=b(_.get(8,M),O));for(var E=_.height,S=0,M=E-1;M>=E-7;M--)S=b(_.get(8,M),S);for(var U=E-8;U<E;U++)S=b(_.get(U,8),S);for(var $=1/0,P=null,q=0,z=p;q<z.length;q++){var V=z[q],Z=V.bits,B=V.formatInfo;if(Z===O||Z===S)return B;var k=f(O,Z);k<$&&(P=B,$=k),O!==S&&(k=f(S,Z),k<$&&(P=B,$=k))}return $<=3?P:null}function C(_,O,U){var M=O.errorCorrectionLevels[U],E=[],S=0;if(M.ecBlocks.forEach(function(se){for(var T=0;T<se.numBlocks;T++)E.push({numDataCodewords:se.dataCodewordsPerBlock,codewords:[]}),S+=se.dataCodewordsPerBlock+M.ecCodewordsPerBlock}),_.length<S)return null;_=_.slice(0,S);for(var $=M.ecBlocks[0].dataCodewordsPerBlock,P=0;P<$;P++)for(var q=0,z=E;q<z.length;q++){var V=z[q];V.codewords.push(_.shift())}if(M.ecBlocks.length>1)for(var Z=M.ecBlocks[0].numBlocks,B=M.ecBlocks[1].numBlocks,P=0;P<B;P++)E[Z+P].codewords.push(_.shift());for(;_.length>0;)for(var k=0,I=E;k<I.length;k++){var V=I[k];V.codewords.push(_.shift())}return E}function L(_){var O=w(_);if(!O)return null;var U=D(_);if(!U)return null;var M=j(_,O,U),E=C(M,O,U.errorCorrectionLevel);if(!E)return null;for(var S=E.reduce(function(k,I){return k+I.numDataCodewords},0),$=new Uint8ClampedArray(S),P=0,q=0,z=E;q<z.length;q++){var V=z[q],Z=g.decode(V.codewords,V.codewords.length-V.numDataCodewords);if(!Z)return null;for(var B=0;B<V.numDataCodewords;B++)$[P++]=Z[B]}try{return u.decode($,O.versionNumber)}catch{return null}}function A(_){if(_==null)return null;var O=L(_);if(O)return O;for(var U=0;U<_.width;U++)for(var M=U+1;M<_.height;M++)_.get(U,M)!==_.get(M,U)&&(_.set(U,M,!_.get(U,M)),_.set(M,U,!_.get(M,U)));return L(_)}i.decode=A},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(7),u=c(8),g;(function(w){w.Numeric="numeric",w.Alphanumeric="alphanumeric",w.Byte="byte",w.Kanji="kanji",w.ECI="eci"})(g=i.Mode||(i.Mode={}));var m;(function(w){w[w.Terminator=0]="Terminator",w[w.Numeric=1]="Numeric",w[w.Alphanumeric=2]="Alphanumeric",w[w.Byte=4]="Byte",w[w.Kanji=8]="Kanji",w[w.ECI=7]="ECI"})(m||(m={}));function f(w,D){for(var C=[],L="",A=[10,12,14][D],_=w.readBits(A);_>=3;){var O=w.readBits(10);if(O>=1e3)throw new Error("Invalid numeric value above 999");var U=Math.floor(O/100),M=Math.floor(O/10)%10,E=O%10;C.push(48+U,48+M,48+E),L+=U.toString()+M.toString()+E.toString(),_-=3}if(_===2){var O=w.readBits(7);if(O>=100)throw new Error("Invalid numeric value above 99");var U=Math.floor(O/10),M=O%10;C.push(48+U,48+M),L+=U.toString()+M.toString()}else if(_===1){var O=w.readBits(4);if(O>=10)throw new Error("Invalid numeric value above 9");C.push(48+O),L+=O.toString()}return{bytes:C,text:L}}var b=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function p(w,D){for(var C=[],L="",A=[9,11,13][D],_=w.readBits(A);_>=2;){var O=w.readBits(11),U=Math.floor(O/45),M=O%45;C.push(b[U].charCodeAt(0),b[M].charCodeAt(0)),L+=b[U]+b[M],_-=2}if(_===1){var U=w.readBits(6);C.push(b[U].charCodeAt(0)),L+=b[U]}return{bytes:C,text:L}}function y(w,D){for(var C=[],L="",A=[8,16,16][D],_=w.readBits(A),O=0;O<_;O++){var U=w.readBits(8);C.push(U)}try{L+=decodeURIComponent(C.map(function(M){return"%"+("0"+M.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:C,text:L}}function N(w,D){for(var C=[],L="",A=[8,10,12][D],_=w.readBits(A),O=0;O<_;O++){var U=w.readBits(13),M=Math.floor(U/192)<<8|U%192;M<7936?M+=33088:M+=49472,C.push(M>>8,M&255),L+=String.fromCharCode(u.shiftJISTable[M])}return{bytes:C,text:L}}function j(w,D){for(var C,L,A,_,O=new x.BitStream(w),U=D<=9?0:D<=26?1:2,M={text:"",bytes:[],chunks:[],version:D};O.available()>=4;){var E=O.readBits(4);if(E===m.Terminator)return M;if(E===m.ECI)O.readBits(1)===0?M.chunks.push({type:g.ECI,assignmentNumber:O.readBits(7)}):O.readBits(1)===0?M.chunks.push({type:g.ECI,assignmentNumber:O.readBits(14)}):O.readBits(1)===0?M.chunks.push({type:g.ECI,assignmentNumber:O.readBits(21)}):M.chunks.push({type:g.ECI,assignmentNumber:-1});else if(E===m.Numeric){var S=f(O,U);M.text+=S.text,(C=M.bytes).push.apply(C,S.bytes),M.chunks.push({type:g.Numeric,text:S.text})}else if(E===m.Alphanumeric){var $=p(O,U);M.text+=$.text,(L=M.bytes).push.apply(L,$.bytes),M.chunks.push({type:g.Alphanumeric,text:$.text})}else if(E===m.Byte){var P=y(O,U);M.text+=P.text,(A=M.bytes).push.apply(A,P.bytes),M.chunks.push({type:g.Byte,bytes:P.bytes,text:P.text})}else if(E===m.Kanji){var q=N(O,U);M.text+=q.text,(_=M.bytes).push.apply(_,q.bytes),M.chunks.push({type:g.Kanji,bytes:q.bytes,text:q.text})}}if(O.available()===0||O.readBits(O.available())===0)return M}i.decode=j},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=function(){function u(g){this.byteOffset=0,this.bitOffset=0,this.bytes=g}return u.prototype.readBits=function(g){if(g<1||g>32||g>this.available())throw new Error("Cannot read "+g.toString()+" bits");var m=0;if(this.bitOffset>0){var f=8-this.bitOffset,b=g<f?g:f,p=f-b,y=255>>8-b<<p;m=(this.bytes[this.byteOffset]&y)>>p,g-=b,this.bitOffset+=b,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(g>0){for(;g>=8;)m=m<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,g-=8;if(g>0){var p=8-g,y=255>>p<<p;m=m<<g|(this.bytes[this.byteOffset]&y)>>p,this.bitOffset+=g}}return m},u.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},u}();i.BitStream=x},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0}),i.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(1),u=c(2);function g(p,y,N,j){var w;y.degree()<N.degree()&&(w=[N,y],y=w[0],N=w[1]);for(var D=y,C=N,L=p.zero,A=p.one;C.degree()>=j/2;){var _=D,O=L;if(D=C,L=A,D.isZero())return null;C=_;for(var U=p.zero,M=D.getCoefficient(D.degree()),E=p.inverse(M);C.degree()>=D.degree()&&!C.isZero();){var S=C.degree()-D.degree(),$=p.multiply(C.getCoefficient(C.degree()),E);U=U.addOrSubtract(p.buildMonomial(S,$)),C=C.addOrSubtract(D.multiplyByMonomial(S,$))}if(A=U.multiplyPoly(L).addOrSubtract(O),C.degree()>=D.degree())return null}var P=A.getCoefficient(0);if(P===0)return null;var q=p.inverse(P);return[A.multiply(q),C.multiply(q)]}function m(p,y){var N=y.degree();if(N===1)return[y.getCoefficient(1)];for(var j=new Array(N),w=0,D=1;D<p.size&&w<N;D++)y.evaluateAt(D)===0&&(j[w]=p.inverse(D),w++);return w!==N?null:j}function f(p,y,N){for(var j=N.length,w=new Array(j),D=0;D<j;D++){for(var C=p.inverse(N[D]),L=1,A=0;A<j;A++)D!==A&&(L=p.multiply(L,x.addOrSubtractGF(1,p.multiply(N[A],C))));w[D]=p.multiply(y.evaluateAt(C),p.inverse(L)),p.generatorBase!==0&&(w[D]=p.multiply(w[D],C))}return w}function b(p,y){var N=new Uint8ClampedArray(p.length);N.set(p);for(var j=new x.default(285,256,0),w=new u.default(j,N),D=new Uint8ClampedArray(y),C=!1,L=0;L<y;L++){var A=w.evaluateAt(j.exp(L+j.generatorBase));D[D.length-1-L]=A,A!==0&&(C=!0)}if(!C)return N;var _=new u.default(j,D),O=g(j,j.buildMonomial(y,1),_,y);if(O===null)return null;var U=m(j,O[0]);if(U==null)return null;for(var M=f(j,O[1],U),E=0;E<U.length;E++){var S=N.length-1-j.log(U[E]);if(S<0)return null;N[S]=x.addOrSubtractGF(N[S],M[E])}return N}i.decode=b},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0}),i.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=c(0);function u(b,p,y,N){var j=b.x-p.x+y.x-N.x,w=b.y-p.y+y.y-N.y;if(j===0&&w===0)return{a11:p.x-b.x,a12:p.y-b.y,a13:0,a21:y.x-p.x,a22:y.y-p.y,a23:0,a31:b.x,a32:b.y,a33:1};var D=p.x-y.x,C=N.x-y.x,L=p.y-y.y,A=N.y-y.y,_=D*A-C*L,O=(j*A-C*w)/_,U=(D*w-j*L)/_;return{a11:p.x-b.x+O*p.x,a12:p.y-b.y+O*p.y,a13:O,a21:N.x-b.x+U*N.x,a22:N.y-b.y+U*N.y,a23:U,a31:b.x,a32:b.y,a33:1}}function g(b,p,y,N){var j=u(b,p,y,N);return{a11:j.a22*j.a33-j.a23*j.a32,a12:j.a13*j.a32-j.a12*j.a33,a13:j.a12*j.a23-j.a13*j.a22,a21:j.a23*j.a31-j.a21*j.a33,a22:j.a11*j.a33-j.a13*j.a31,a23:j.a13*j.a21-j.a11*j.a23,a31:j.a21*j.a32-j.a22*j.a31,a32:j.a12*j.a31-j.a11*j.a32,a33:j.a11*j.a22-j.a12*j.a21}}function m(b,p){return{a11:b.a11*p.a11+b.a21*p.a12+b.a31*p.a13,a12:b.a12*p.a11+b.a22*p.a12+b.a32*p.a13,a13:b.a13*p.a11+b.a23*p.a12+b.a33*p.a13,a21:b.a11*p.a21+b.a21*p.a22+b.a31*p.a23,a22:b.a12*p.a21+b.a22*p.a22+b.a32*p.a23,a23:b.a13*p.a21+b.a23*p.a22+b.a33*p.a23,a31:b.a11*p.a31+b.a21*p.a32+b.a31*p.a33,a32:b.a12*p.a31+b.a22*p.a32+b.a32*p.a33,a33:b.a13*p.a31+b.a23*p.a32+b.a33*p.a33}}function f(b,p){for(var y=g({x:3.5,y:3.5},{x:p.dimension-3.5,y:3.5},{x:p.dimension-6.5,y:p.dimension-6.5},{x:3.5,y:p.dimension-3.5}),N=u(p.topLeft,p.topRight,p.alignmentPattern,p.bottomLeft),j=m(N,y),w=x.BitMatrix.createEmpty(p.dimension,p.dimension),D=function(U,M){var E=j.a13*U+j.a23*M+j.a33;return{x:(j.a11*U+j.a21*M+j.a31)/E,y:(j.a12*U+j.a22*M+j.a32)/E}},C=0;C<p.dimension;C++)for(var L=0;L<p.dimension;L++){var A=L+.5,_=C+.5,O=D(A,_);w.set(L,C,b.get(Math.floor(O.x),Math.floor(O.y)))}return{matrix:w,mappingFunction:D}}i.extract=f},function(l,i,c){Object.defineProperty(i,"__esModule",{value:!0});var x=4,u=.5,g=1.5,m=function(A,_){return Math.sqrt(Math.pow(_.x-A.x,2)+Math.pow(_.y-A.y,2))};function f(A){return A.reduce(function(_,O){return _+O})}function b(A,_,O){var U,M,E,S,$=m(A,_),P=m(_,O),q=m(A,O),z,V,Z;return P>=$&&P>=q?(U=[_,A,O],z=U[0],V=U[1],Z=U[2]):q>=P&&q>=$?(M=[A,_,O],z=M[0],V=M[1],Z=M[2]):(E=[A,O,_],z=E[0],V=E[1],Z=E[2]),(Z.x-V.x)*(z.y-V.y)-(Z.y-V.y)*(z.x-V.x)<0&&(S=[Z,z],z=S[0],Z=S[1]),{bottomLeft:z,topLeft:V,topRight:Z}}function p(A,_,O,U){var M=(f(N(A,O,U,5))/7+f(N(A,_,U,5))/7+f(N(O,A,U,5))/7+f(N(_,A,U,5))/7)/4;if(M<1)throw new Error("Invalid module size");var E=Math.round(m(A,_)/M),S=Math.round(m(A,O)/M),$=Math.floor((E+S)/2)+7;switch($%4){case 0:$++;break;case 2:$--;break}return{dimension:$,moduleSize:M}}function y(A,_,O,U){var M=[{x:Math.floor(A.x),y:Math.floor(A.y)}],E=Math.abs(_.y-A.y)>Math.abs(_.x-A.x),S,$,P,q;E?(S=Math.floor(A.y),$=Math.floor(A.x),P=Math.floor(_.y),q=Math.floor(_.x)):(S=Math.floor(A.x),$=Math.floor(A.y),P=Math.floor(_.x),q=Math.floor(_.y));for(var z=Math.abs(P-S),V=Math.abs(q-$),Z=Math.floor(-z/2),B=S<P?1:-1,k=$<q?1:-1,I=!0,se=S,T=$;se!==P+B;se+=B){var H=E?T:se,oe=E?se:T;if(O.get(H,oe)!==I&&(I=!I,M.push({x:H,y:oe}),M.length===U+1))break;if(Z+=V,Z>0){if(T===q)break;T+=k,Z-=z}}for(var W=[],le=0;le<U;le++)M[le]&&M[le+1]?W.push(m(M[le],M[le+1])):W.push(0);return W}function N(A,_,O,U){var M,E=_.y-A.y,S=_.x-A.x,$=y(A,_,O,Math.ceil(U/2)),P=y(A,{x:A.x-S,y:A.y-E},O,Math.ceil(U/2)),q=$.shift()+P.shift()-1;return(M=P.concat(q)).concat.apply(M,$)}function j(A,_){var O=f(A)/f(_),U=0;return _.forEach(function(M,E){U+=Math.pow(A[E]-M*O,2)}),{averageSize:O,error:U}}function w(A,_,O){try{var U=N(A,{x:-1,y:A.y},O,_.length),M=N(A,{x:A.x,y:-1},O,_.length),E={x:Math.max(0,A.x-A.y)-1,y:Math.max(0,A.y-A.x)-1},S=N(A,E,O,_.length),$={x:Math.min(O.width,A.x+A.y)+1,y:Math.min(O.height,A.y+A.x)+1},P=N(A,$,O,_.length),q=j(U,_),z=j(M,_),V=j(S,_),Z=j(P,_),B=Math.sqrt(q.error*q.error+z.error*z.error+V.error*V.error+Z.error*Z.error),k=(q.averageSize+z.averageSize+V.averageSize+Z.averageSize)/4,I=(Math.pow(q.averageSize-k,2)+Math.pow(z.averageSize-k,2)+Math.pow(V.averageSize-k,2)+Math.pow(Z.averageSize-k,2))/k;return B+I}catch{return 1/0}}function D(A,_){for(var O=Math.round(_.x);A.get(O,Math.round(_.y));)O--;for(var U=Math.round(_.x);A.get(U,Math.round(_.y));)U++;for(var M=(O+U)/2,E=Math.round(_.y);A.get(Math.round(M),E);)E--;for(var S=Math.round(_.y);A.get(Math.round(M),S);)S++;var $=(E+S)/2;return{x:M,y:$}}function C(A){for(var _=[],O=[],U=[],M=[],E=function(H){for(var oe=0,W=!1,le=[0,0,0,0,0],K=function(ge){var pe=A.get(ge,H);if(pe===W)oe++;else{le=[le[1],le[2],le[3],le[4],oe],oe=1,W=pe;var ye=f(le)/7,Ae=Math.abs(le[0]-ye)<ye&&Math.abs(le[1]-ye)<ye&&Math.abs(le[2]-3*ye)<3*ye&&Math.abs(le[3]-ye)<ye&&Math.abs(le[4]-ye)<ye&&!pe,Te=f(le.slice(-3))/3,Ge=Math.abs(le[2]-Te)<Te&&Math.abs(le[3]-Te)<Te&&Math.abs(le[4]-Te)<Te&&pe;if(Ae){var Ze=ge-le[3]-le[4],Ye=Ze-le[2],Xe={startX:Ye,endX:Ze,y:H},pt=O.filter(function(Fe){return Ye>=Fe.bottom.startX&&Ye<=Fe.bottom.endX||Ze>=Fe.bottom.startX&&Ye<=Fe.bottom.endX||Ye<=Fe.bottom.startX&&Ze>=Fe.bottom.endX&&le[2]/(Fe.bottom.endX-Fe.bottom.startX)<g&&le[2]/(Fe.bottom.endX-Fe.bottom.startX)>u});pt.length>0?pt[0].bottom=Xe:O.push({top:Xe,bottom:Xe})}if(Ge){var it=ge-le[4],xe=it-le[3],Xe={startX:xe,y:H,endX:it},pt=M.filter(function(G){return xe>=G.bottom.startX&&xe<=G.bottom.endX||it>=G.bottom.startX&&xe<=G.bottom.endX||xe<=G.bottom.startX&&it>=G.bottom.endX&&le[2]/(G.bottom.endX-G.bottom.startX)<g&&le[2]/(G.bottom.endX-G.bottom.startX)>u});pt.length>0?pt[0].bottom=Xe:M.push({top:Xe,bottom:Xe})}}},Y=-1;Y<=A.width;Y++)K(Y);_.push.apply(_,O.filter(function(ge){return ge.bottom.y!==H&&ge.bottom.y-ge.top.y>=2})),O=O.filter(function(ge){return ge.bottom.y===H}),U.push.apply(U,M.filter(function(ge){return ge.bottom.y!==H})),M=M.filter(function(ge){return ge.bottom.y===H})},S=0;S<=A.height;S++)E(S);_.push.apply(_,O.filter(function(H){return H.bottom.y-H.top.y>=2})),U.push.apply(U,M);var $=_.filter(function(H){return H.bottom.y-H.top.y>=2}).map(function(H){var oe=(H.top.startX+H.top.endX+H.bottom.startX+H.bottom.endX)/4,W=(H.top.y+H.bottom.y+1)/2;if(A.get(Math.round(oe),Math.round(W))){var le=[H.top.endX-H.top.startX,H.bottom.endX-H.bottom.startX,H.bottom.y-H.top.y+1],K=f(le)/le.length,Y=w({x:Math.round(oe),y:Math.round(W)},[1,1,3,1,1],A);return{score:Y,x:oe,y:W,size:K}}}).filter(function(H){return!!H}).sort(function(H,oe){return H.score-oe.score}).map(function(H,oe,W){if(oe>x)return null;var le=W.filter(function(Y,ge){return oe!==ge}).map(function(Y){return{x:Y.x,y:Y.y,score:Y.score+Math.pow(Y.size-H.size,2)/H.size,size:Y.size}}).sort(function(Y,ge){return Y.score-ge.score});if(le.length<2)return null;var K=H.score+le[0].score+le[1].score;return{points:[H].concat(le.slice(0,2)),score:K}}).filter(function(H){return!!H}).sort(function(H,oe){return H.score-oe.score});if($.length===0)return null;var P=b($[0].points[0],$[0].points[1],$[0].points[2]),q=P.topRight,z=P.topLeft,V=P.bottomLeft,Z=L(A,U,q,z,V),B=[];Z&&B.push({alignmentPattern:{x:Z.alignmentPattern.x,y:Z.alignmentPattern.y},bottomLeft:{x:V.x,y:V.y},dimension:Z.dimension,topLeft:{x:z.x,y:z.y},topRight:{x:q.x,y:q.y}});var k=D(A,q),I=D(A,z),se=D(A,V),T=L(A,U,k,I,se);return T&&B.push({alignmentPattern:{x:T.alignmentPattern.x,y:T.alignmentPattern.y},bottomLeft:{x:se.x,y:se.y},topLeft:{x:I.x,y:I.y},topRight:{x:k.x,y:k.y},dimension:T.dimension}),B.length===0?null:B}i.locate=C;function L(A,_,O,U,M){var E,S,$;try{E=p(U,O,M,A),S=E.dimension,$=E.moduleSize}catch{return null}var P={x:O.x-U.x+M.x,y:O.y-U.y+M.y},q=(m(U,M)+m(U,O))/2/$,z=1-3/q,V={x:U.x+z*(P.x-U.x),y:U.y+z*(P.y-U.y)},Z=_.map(function(k){var I=(k.top.startX+k.top.endX+k.bottom.startX+k.bottom.endX)/4,se=(k.top.y+k.bottom.y+1)/2;if(A.get(Math.floor(I),Math.floor(se))){var T=[k.top.endX-k.top.startX,k.bottom.endX-k.bottom.startX,k.bottom.y-k.top.y+1];f(T)/T.length;var H=w({x:Math.floor(I),y:Math.floor(se)},[1,1,1],A),oe=H+m({x:I,y:se},V);return{x:I,y:se,score:oe}}}).filter(function(k){return!!k}).sort(function(k,I){return k.score-I.score}),B=q>=15&&Z.length?Z[0]:V;return{alignmentPattern:B,dimension:S}}}]).default})}(Io)),Io.exports}var i5=l5();const o5=g0(i5),c5=({onBack:n})=>{const{user:r,isAuthenticated:l}=Tt(),[i,c]=v.useState(null),[x,u]=v.useState(!1),[g,m]=v.useState(!1),[f,b]=v.useState(!1),[p,y]=v.useState(""),[N,j]=v.useState("code"),[w,D]=v.useState(!1),[C,L]=v.useState(null),[A,_]=v.useState(null),[O,U]=v.useState(null),[M,E]=v.useState(!1),[S,$]=v.useState(null),P=v.useRef(null),q=v.useRef(null),z=v.useRef(null),V=r?.id?fe(J.services.vouchers.getVouchersByUser,{userId:r.id}):void 0,Z=r?.id?fe(J.services.vouchers.debugUserVouchers,{userId:r.id}):void 0,B=V===void 0&&r?.id,k=null,I=Ee(J.services.vouchers.claimVoucher),se=xe=>{switch(xe){case"available":return e.jsx(Qe,{className:"w-5 h-5 text-green-400"});case"redeemed":return e.jsx(kt,{className:"w-5 h-5 text-blue-400"});case"expired":return e.jsx(Pt,{className:"w-5 h-5 text-red-400"});default:return e.jsx(jt,{className:"w-5 h-5 text-gray-400"})}},T=xe=>{switch(xe){case"available":return"bg-green-500/20 text-green-400 border-green-500/30";case"redeemed":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"expired":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},H=xe=>{switch(xe){case"cash":return"";case"percentage":return"";case"discount":return"";default:return""}},oe=xe=>`${parseFloat(xe.value).toFixed(2)}`,W=xe=>xe.isExpired?"expired":xe.status==="assigned"?"available":xe.status==="redeemed"?"redeemed":xe.status||"unknown",le=xe=>{const Fe=new Date,ae=new Date(xe),G=Math.ceil((ae-Fe)/(1e3*60*60*24));return G<=7&&G>0},K=xe=>{if(!xe)return"No expiry";const Fe=new Date(xe),G=Math.ceil((Fe-new Date)/(1e3*60*60*24));return G<0?"Expired":G===0?"Expires today":G===1?"Expires tomorrow":G<=7?`Expires in ${G} days`:Fe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Y=V?V.filter(xe=>xe.status==="assigned"&&!xe.isExpired):[],ge=V?V.filter(xe=>xe.status==="redeemed"):[],pe=V?V.filter(xe=>xe.isExpired):[];console.log("=== VoucherManagement Debug ==="),console.log("User ID:",r?.id,typeof r?.id),console.log("Raw vouchers from API:",V),console.log("Vouchers count:",V?.length||0),console.log("Categorized vouchers:",{available:Y.length,redeemed:ge.length,expired:pe.length}),console.log("Debug data from API:",Z),V&&V.length>0&&console.log("First voucher structure:",V[0]);const ye=async(xe,Fe=null)=>{try{m(!0);const G=(await I({code:xe,user_id:r.id})).voucher.value||Fe||"Unknown";$({type:"success",title:" Voucher Claimed Successfully!",message:`Code: ${xe}
Value: ${parseFloat(G).toLocaleString()}
You can now use this voucher at the barbershop.`}),u(!1),c(null),b(!1),y("")}catch(ae){let G=ae.message;G.includes("expired")?G=" This voucher has expired":G.includes("already")||G.includes("assigned")?G=" This voucher has already been claimed":G.includes("Invalid")||G.includes("not found")?G=" Invalid voucher code. Please check and try again.":G.includes("maximum")||G.includes("limit")?G=" This voucher has reached its usage limit":G=G||"Failed to claim voucher. Please try again.",$({type:"error",title:"Claim Failed",message:G})}finally{m(!1)}},Ae=async()=>{if(!p.trim()){$({type:"warning",title:"Missing Code",message:"Please enter a voucher code"});return}try{E(!0),U(null),_(null),await ye(p.trim())}catch(xe){console.error("Error validating voucher:",xe),U("Failed to validate voucher. Please try again."),_(null)}finally{E(!1)}},Te=async()=>{if(A)try{await ye(A.code,A.value),y(""),_(null),U(null),b(!1)}catch{}},Ge=async xe=>{const Fe=xe.target.files[0];if(Fe){try{const ae=new Image,G=document.createElement("canvas"),me=G.getContext("2d");ae.onload=async()=>{G.width=ae.width,G.height=ae.height,me.drawImage(ae,0,0);try{const ee=me.getImageData(0,0,G.width,G.height),_e=await pt(ee);_e?(await ye(_e),b(!1)):$({type:"warning",title:"QR Code Not Found",message:"No QR code found in the image. Please try again."})}catch(ee){console.error("Error decoding QR code:",ee),$({type:"error",title:"QR Code Error",message:"Failed to decode QR code from image."})}};const Ce=new FileReader;Ce.onload=ee=>{ae.src=ee.target.result},Ce.readAsDataURL(Fe)}catch(ae){console.error("Error processing uploaded file:",ae),$({type:"error",title:"Upload Error",message:"Failed to process uploaded file."})}P.current&&(P.current.value="")}},Ze=async()=>{try{L(null),D(!0);let xe;try{xe=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280,min:640},height:{ideal:720,min:480}}})}catch(Fe){console.log("Back camera not available, trying front camera:",Fe),xe=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280,min:640},height:{ideal:720,min:480}}})}q.current&&xe&&(q.current.srcObject=xe,q.current.onloadedmetadata=()=>{console.log("Video metadata loaded, dimensions:",q.current.videoWidth,"x",q.current.videoHeight),q.current.play().then(()=>{console.log("Video started successfully"),setTimeout(()=>{Ye()},500)}).catch(Fe=>{console.error("Error playing video:",Fe),L("Failed to start camera preview."),D(!1)})},q.current.oncanplay=()=>{console.log("Video can start playing")},q.current.onplaying=()=>{console.log("Video is playing")},q.current.onerror=Fe=>{console.error("Video error:",Fe),L("Camera error occurred."),D(!1)})}catch(xe){console.error("Error starting camera:",xe);let Fe="Failed to access camera.";xe.name==="NotAllowedError"?Fe="Camera permission denied. Please allow camera access and try again.":xe.name==="NotFoundError"?Fe="No camera found on this device.":xe.name==="NotReadableError"&&(Fe="Camera is already in use by another application."),L(Fe),D(!1)}},Ye=()=>{const xe=setInterval(async()=>{if(q.current&&z.current&&w&&q.current.readyState===4){const Fe=z.current,ae=q.current,G=Fe.getContext("2d");if(ae.videoWidth>0&&ae.videoHeight>0){Fe.width=ae.videoWidth,Fe.height=ae.videoHeight,G.drawImage(ae,0,0,Fe.width,Fe.height);try{const me=G.getImageData(0,0,Fe.width,Fe.height),Ce=await pt(me);Ce&&(clearInterval(xe),Xe(),await ye(Ce),b(!1))}catch{}}}else w||clearInterval(xe)},500);setTimeout(()=>{clearInterval(xe),w&&(Xe(),L("Scanning timeout. Please try again."))},3e4)},Xe=()=>{D(!1),q.current&&q.current.srcObject&&(q.current.srcObject.getTracks().forEach(Fe=>Fe.stop()),q.current.srcObject=null)},pt=async xe=>{try{const Fe=o5(xe.data,xe.width,xe.height);if(Fe){let ae=null;try{const G=JSON.parse(Fe.data);ae=G.code||G.voucherCode||G.voucher_code}catch{ae=Fe.data}return ae}return null}catch(Fe){return console.error("Error decoding QR:",Fe),null}},it=({notification:xe,onClose:Fe})=>{if(!xe)return null;const G=(me=>{switch(me){case"success":return{bg:"#F0FDF4",border:"#22C55E",icon:"",iconBg:"#22C55E"};case"error":return{bg:"#FEF2F2",border:"#EF4444",icon:"",iconBg:"#EF4444"};case"warning":return{bg:"#FFFBEB",border:"#F59E0B",icon:"",iconBg:"#F59E0B"};default:return{bg:"#F4F0E6",border:"#F68B24",icon:"",iconBg:"#F68B24"}}})(xe.type);return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border-2",style:{backgroundColor:G.bg,borderColor:G.border},children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:G.iconBg},children:e.jsx("span",{className:"text-2xl",children:G.icon})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black mb-2",style:{color:"#36454F"},children:xe.title}),e.jsx("p",{className:"text-sm whitespace-pre-line",style:{color:"#8B8B8B"},children:xe.message})]}),e.jsx("button",{onClick:Fe,className:"w-full py-3 text-white font-bold rounded-xl transition-all duration-200",style:{backgroundColor:"#F68B24"},onMouseEnter:me=>me.target.style.backgroundColor="#E67E22",onMouseLeave:me=>me.target.style.backgroundColor="#F68B24",children:"OK"})]})})})};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30 shadow-lg",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200 touch-manipulation",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"My Vouchers"}),e.jsxs("p",{className:"text-xs text-[#FF8C42]",children:[Y.length+ge.length," total"]})]})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center mx-auto mb-3 shadow-lg",children:e.jsx(kt,{className:"w-6 h-6 text-white"})}),e.jsx("h1",{className:"text-xl font-black mb-2 text-white",children:"Your Vouchers"}),e.jsx("p",{className:"text-sm font-medium mb-4 text-gray-400",children:"View and manage your vouchers"}),e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsxs("button",{onClick:()=>b(!0),className:"flex-1 py-3 text-white font-bold rounded-xl bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-all duration-200 shadow-lg flex items-center justify-center space-x-2 touch-manipulation",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Claim New"})]}),e.jsx("button",{onClick:()=>window.location.reload(),disabled:B,className:"px-4 py-3 bg-[#444444] text-gray-300 font-bold rounded-xl transition-all duration-200 hover:bg-[#555555] shadow-lg flex items-center justify-center disabled:opacity-50 touch-manipulation",children:e.jsx(xs,{className:`w-4 h-4 ${B?"animate-spin":""}`})})]})]}),B&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"rounded-full w-16 h-16 bg-[#FF8C42]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(kt,{className:"w-8 h-8 text-[#FF8C42]"})}),e.jsx("p",{className:"text-sm text-gray-400",children:"Loading vouchers..."})]}),k,!B&&!k&&Y.length>0&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("h2",{className:"text-base font-black flex items-center px-2",style:{color:"#36454F"},children:[e.jsx(Qe,{className:"w-3.5 h-3.5 text-green-500 mr-2"}),"Available Vouchers (",Y.length,")"]}),e.jsx("div",{className:"space-y-2",children:Y.map(xe=>e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm touch-manipulation",style:{border:"1px solid #E0E0E0"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"text-lg flex-shrink-0",children:H(xe.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-black truncate",style:{color:"#36454F"},children:xe.code}),e.jsx("p",{className:"text-xs truncate",style:{color:"#8B8B8B"},children:xe.description||"Discount voucher"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[se(W(xe)),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold border ${T(W(xe))}`,children:W(xe).toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Value"}),e.jsx("p",{className:"text-xs font-bold text-green-600 truncate",children:oe(xe)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Qe,{className:"w-2 h-2 text-green-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Claimed"}),e.jsx("p",{className:"text-xs font-bold truncate",style:{color:"#36454F"},children:xe.assigned_at?new Date(xe.assigned_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${xe.isExpired||le(xe.expires_at)?"bg-red-500":"bg-blue-500"}`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Expires"}),e.jsx("p",{className:`text-xs font-bold truncate ${xe.isExpired||le(xe.expires_at)?"text-red-600":"text-blue-600"}`,children:K(xe.expires_at)})]})]})]}),e.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),c(xe),u(!0)},className:"w-full py-2 text-white font-bold rounded-lg transition-all duration-200 flex items-center justify-center space-x-1 touch-manipulation",style:{backgroundColor:"#22C55E"},onMouseEnter:Fe=>Fe.target.style.backgroundColor="#16A34A",onMouseLeave:Fe=>Fe.target.style.backgroundColor="#22C55E",children:[e.jsx(Vt,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs",children:"QR Code"})]})]},xe._id))})]}),!B&&!k&&ge.length>0&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("h2",{className:"text-base font-black flex items-center px-2",style:{color:"#36454F"},children:[e.jsx(kt,{className:"w-3.5 h-3.5 text-blue-500 mr-2"}),"Redeemed Vouchers (",ge.length,")"]}),e.jsx("div",{className:"space-y-2",children:ge.map(xe=>e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm opacity-75 touch-manipulation",style:{border:"1px solid #E0E0E0"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"text-lg opacity-50 flex-shrink-0",children:H(xe.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-black truncate",style:{color:"#36454F"},children:xe.code}),e.jsx("p",{className:"text-xs truncate",style:{color:"#8B8B8B"},children:xe.description||"Discount voucher"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[se(W(xe)),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold border ${T(W(xe))}`,children:"REDEEMED"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Value"}),e.jsx("p",{className:"text-xs font-bold text-blue-600 truncate",children:oe(xe)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Qe,{className:"w-2 h-2 text-blue-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Redeemed"}),e.jsx("p",{className:"text-xs font-bold truncate",style:{color:"#36454F"},children:xe.assigned_at?new Date(xe.assigned_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${xe.isExpired||le(xe.expires_at)?"bg-red-500":"bg-blue-500"}`}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Expired"}),e.jsx("p",{className:`text-xs font-bold truncate ${xe.isExpired||le(xe.expires_at)?"text-red-600":"text-blue-600"}`,children:K(xe.expires_at)})]})]})]}),e.jsx("div",{className:"text-center py-1.5 text-gray-500 text-xs",children:"This voucher has been redeemed"})]},xe._id))})]}),!B&&!k&&pe.length>0&&e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsxs("h2",{className:"text-base font-black flex items-center px-2",style:{color:"#36454F"},children:[e.jsx(Pt,{className:"w-3.5 h-3.5 text-red-500 mr-2"}),"Expired Vouchers (",pe.length,")"]}),e.jsx("div",{className:"space-y-2",children:pe.map(xe=>e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm opacity-50 touch-manipulation",style:{border:"1px solid #E0E0E0"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 flex-1",children:[e.jsx("div",{className:"text-lg opacity-50 flex-shrink-0",children:H(xe.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-sm font-black truncate",style:{color:"#36454F"},children:xe.code}),e.jsx("p",{className:"text-xs truncate",style:{color:"#8B8B8B"},children:xe.description||"Discount voucher"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[se(W(xe)),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold border ${T(W(xe))}`,children:W(xe).toUpperCase()})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Value"}),e.jsx("p",{className:"text-xs font-bold text-red-600 truncate",children:oe(xe)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Pt,{className:"w-2 h-2 text-red-500 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Expired"}),e.jsx("p",{className:"text-xs font-bold truncate",style:{color:"#36454F"},children:xe.expires_at?new Date(xe.expires_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-[10px]",style:{color:"#8B8B8B"},children:"Status"}),e.jsx("p",{className:"text-xs font-bold text-gray-600 truncate",children:"Expired"})]})]})]}),e.jsx("div",{className:"text-center py-1.5 text-red-500 text-xs",children:"This voucher has expired"})]},xe._id))})]}),!B&&!k&&Y.length===0&&ge.length===0&&pe.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3",style:{backgroundColor:"#F68B24",opacity:.1},children:e.jsx(s8,{className:"w-6 h-6",style:{color:"#F68B24"}})}),e.jsx("h3",{className:"text-base font-black mb-2",style:{color:"#36454F"},children:"No Vouchers Yet"}),e.jsx("p",{className:"text-xs max-w-md mx-auto mb-3",style:{color:"#8B8B8B"},children:'Your vouchers will appear here. Click "Claim New" above to get started.'})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full shadow-2xl",style:{backgroundColor:"#F4F0E6"},children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(kt,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black mb-2",style:{color:"#36454F"},children:"Claim Voucher"}),e.jsx("p",{className:"font-medium",style:{color:"#8B8B8B"},children:"Enter your voucher code to claim"})]}),e.jsx("div",{className:"rounded-xl p-1",style:{backgroundColor:"#E0E0E0"},children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsxs("button",{onClick:()=>j("code"),className:"py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 flex items-center justify-center space-x-1",style:{backgroundColor:N==="code"?"#F68B24":"transparent",color:N==="code"?"white":"#8B8B8B"},children:[e.jsx(rj,{className:"w-4 h-4"}),e.jsx("span",{children:"Code"})]}),e.jsxs("button",{onClick:()=>j("scan"),className:"py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 flex items-center justify-center space-x-1",style:{backgroundColor:N==="scan"?"#F68B24":"transparent",color:N==="scan"?"white":"#8B8B8B"},children:[e.jsx(Ja,{className:"w-4 h-4"}),e.jsx("span",{children:"Scan"})]}),e.jsxs("button",{onClick:()=>j("upload"),className:"py-2 px-3 rounded-lg text-sm font-semibold transition-all duration-200 flex items-center justify-center space-x-1",style:{backgroundColor:N==="upload"?"#F68B24":"transparent",color:N==="upload"?"white":"#8B8B8B"},children:[e.jsx(_r,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload"})]})]})}),N==="code"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",value:p,onChange:xe=>{y(xe.target.value.toUpperCase()),_(null),U(null)},placeholder:"Enter voucher code",className:"w-full p-4 border-2 rounded-xl text-center font-mono text-lg tracking-widest focus:outline-none",style:{borderColor:"#E0E0E0",backgroundColor:"white",color:"#36454F"},onFocus:xe=>xe.target.style.borderColor="#F68B24",onBlur:xe=>xe.target.style.borderColor="#E0E0E0",maxLength:12})}),!A&&e.jsx("button",{onClick:Ae,disabled:M||!p.trim(),className:"w-full py-4 text-white font-bold rounded-2xl hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#36454F"},onMouseEnter:xe=>!xe.target.disabled&&(xe.target.style.backgroundColor="#2D3748"),onMouseLeave:xe=>!xe.target.disabled&&(xe.target.style.backgroundColor="#36454F"),children:M?"Validating...":"Validate Voucher"}),O&&e.jsx("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#FEF2F2",borderColor:"#F87171"},children:e.jsx("p",{className:"text-sm text-center",style:{color:"#DC2626"},children:O})}),A&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#F4F0E6",borderColor:"#F68B24"},children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(kt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-black",style:{color:"#36454F"},children:A.code}),e.jsx("p",{className:"text-2xl font-black",style:{color:"#F68B24"},children:voucherService.formatVoucherValue(A.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{style:{color:"#8B8B8B"},children:"Points Required"}),e.jsx("p",{className:"font-bold",style:{color:"#36454F"},children:A.points_required})]}),e.jsxs("div",{children:[e.jsx("p",{style:{color:"#8B8B8B"},children:"Expires"}),e.jsx("p",{className:"font-bold",style:{color:"#36454F"},children:voucherService.formatVoucherExpiry(A.expires_at)})]})]}),e.jsx("div",{className:"text-xs",style:{color:"#8B8B8B"},children:e.jsxs("p",{children:["Uses: ",A.used_count,"/",A.max_uses]})})]})}),e.jsx("button",{onClick:Te,disabled:g,className:"w-full py-4 text-white font-bold rounded-2xl hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#F68B24"},onMouseEnter:xe=>!xe.target.disabled&&(xe.target.style.backgroundColor="#E67E22"),onMouseLeave:xe=>!xe.target.disabled&&(xe.target.style.backgroundColor="#F68B24"),children:g?"Claiming...":"Claim This Voucher"}),e.jsx("button",{onClick:()=>{_(null),U(null),y("")},className:"w-full py-2 text-gray-600 font-medium rounded-xl hover:bg-gray-100 transition-all duration-200",children:"Enter Different Code"})]})]}),N==="scan"&&e.jsx("div",{className:"space-y-4",children:w?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative bg-gray-900 rounded-xl overflow-hidden border-2",style:{borderColor:"#F68B24"},children:[e.jsx("video",{ref:q,className:"w-full h-64 object-cover bg-transparent",autoPlay:!0,playsInline:!0,muted:!0,style:{transform:"scaleX(-1)",backgroundColor:"transparent"}}),e.jsx("canvas",{ref:z,className:"hidden"}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 border-2 border-white border-dashed rounded-lg"}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48",children:[e.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-l-4 border-t-4 border-green-400"}),e.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-r-4 border-t-4 border-green-400"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-l-4 border-b-4 border-green-400"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-r-4 border-b-4 border-green-400"})]})]}),e.jsx("button",{onClick:Xe,className:"absolute top-4 right-4 w-10 h-10 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors",children:e.jsx(rt,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#F4F0E6",borderColor:"#F68B24"},children:e.jsx("p",{className:"text-sm text-center",style:{color:"#36454F"},children:" Position the QR code within the frame above"})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-xl p-6",style:{backgroundColor:"#F4F0E6",borderColor:"#F68B24"},children:[e.jsx(Ja,{className:"w-12 h-12 mx-auto mb-3",style:{color:"#F68B24"}}),e.jsx("p",{className:"text-sm mb-3",style:{color:"#36454F"},children:"Position the QR code within the camera frame to scan"}),e.jsx("button",{onClick:Ze,className:"w-full py-3 text-white font-semibold rounded-lg transition-colors",style:{backgroundColor:"#F68B24"},onMouseEnter:xe=>xe.target.style.backgroundColor="#E67E22",onMouseLeave:xe=>xe.target.style.backgroundColor="#F68B24",children:"Start Camera"})]}),C&&e.jsxs("div",{className:"border rounded-xl p-4",style:{backgroundColor:"#FEF2F2",borderColor:"#F87171"},children:[e.jsx("p",{className:"text-sm",style:{color:"#DC2626"},children:C}),e.jsx("button",{onClick:()=>L(null),className:"mt-2 px-3 py-1 rounded text-xs transition-colors",style:{backgroundColor:"#FEE2E2",color:"#DC2626"},onMouseEnter:xe=>xe.target.style.backgroundColor="#FECACA",onMouseLeave:xe=>xe.target.style.backgroundColor="#FEE2E2",children:"Dismiss"})]})]})}),N==="upload"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{onClick:()=>P.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-xl p-8 hover:border-orange-400 hover:bg-orange-50 transition-all duration-200 cursor-pointer text-center",children:[e.jsx(_r,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 text-sm mb-2 font-medium",children:"Upload QR Code Image"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Supports JPG, PNG, WebP formats"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:e.jsxs("p",{className:"text-blue-700 text-xs",children:[" ",e.jsx("strong",{children:"Tip:"})," Make sure the QR code is clear and well-lit for best results"]})}),e.jsx("input",{ref:P,type:"file",accept:"image/*,.jpg,.jpeg,.png,.webp",onChange:Ge,className:"hidden"})]}),e.jsx("button",{onClick:()=>{w&&Xe(),b(!1),y(""),j("code"),L(null),_(null),U(null)},className:"w-full py-4 text-white font-bold rounded-2xl transition-all duration-200",style:{backgroundColor:"#36454F"},onMouseEnter:xe=>xe.target.style.backgroundColor="#2D3748",onMouseLeave:xe=>xe.target.style.backgroundColor="#36454F",children:"Close"})]})})}),x&&i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-orange to-primary-orange-light rounded-full flex items-center justify-center mx-auto",children:e.jsx(Vt,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-primary-black mb-2",children:"Voucher QR Code"}),e.jsx("p",{className:"text-gray-dark font-medium",children:"Show this QR code to staff"})]}),e.jsx("div",{className:"bg-gray-light p-6 rounded-2xl",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(x5,{voucher:i})})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-xl font-black text-primary-black mb-1",children:i.code}),e.jsx("p",{className:"text-2xl font-black text-green-600 mb-1",children:oe(i)}),e.jsx("p",{className:"text-sm text-gray-dark font-medium",children:i.description})]})}),e.jsx("div",{className:"space-y-3",children:e.jsx("button",{onClick:()=>u(!1),className:"w-full py-4 bg-gradient-to-r from-gray-500 to-gray-600 text-white font-bold rounded-2xl hover:shadow-xl transition-all duration-200",children:"Close"})})]})})}),e.jsx(it,{notification:S,onClose:()=>$(null)})]})},x5=({voucher:n})=>{const{user:r}=Tt(),l=v.useRef(null),i=()=>{const x=localStorage.getItem("username");return x||r?.username||"N/A"},c=JSON.stringify({voucherId:n._id,code:n.code,username:i(),value:n.value,expiresAt:n.expires_at,barbershop:"TipunoX Angeles Barbershop"});return v.useEffect(()=>{l.current&&Ds.toCanvas(l.current,c,{width:192,margin:2,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"H"},x=>{x&&console.error("QR Code generation error:",x)})},[c]),e.jsx("canvas",{ref:l,className:"rounded-xl"})},d5=({onBack:n})=>{const[r]=v.useState(1250),[l]=v.useState(3480),[i]=v.useState("Gold"),[c]=v.useState("Platinum"),[x]=v.useState(250),u=[{id:1,date:"2024-01-15",description:"Premium Haircut",points:175,type:"earned"},{id:2,date:"2024-01-10",description:"Redeemed Birthday Voucher",points:-500,type:"redeemed"},{id:3,date:"2024-01-08",description:"Beard Trim & Style",points:125,type:"earned"},{id:4,date:"2024-01-05",description:"Bonus Points - Referral",points:200,type:"bonus"},{id:5,date:"2024-01-03",description:"Classic Cut",points:100,type:"earned"}],g=[{id:1,name:"Free Basic Haircut",pointsCost:500,category:"Services",available:!0,icon:"",description:"Get a complimentary basic haircut"},{id:2,name:"500 Service Voucher",pointsCost:750,category:"Vouchers",available:!0,icon:"",description:"500 off any service"},{id:3,name:"Premium Package Discount",pointsCost:1e3,category:"Services",available:!0,icon:"",description:"50% off complete grooming package"},{id:4,name:"VIP Priority Booking",pointsCost:300,category:"Perks",available:!0,icon:"",description:"Skip the queue with priority booking"},{id:5,name:"1,000 Cash Voucher",pointsCost:1500,category:"Vouchers",available:!1,icon:"",description:"1,000 cash voucher - Not enough points"},{id:6,name:"Platinum Membership",pointsCost:2e3,category:"Membership",available:!1,icon:"",description:"Upgrade to platinum tier - Not enough points"}],m=[{name:"Bronze",min:0,max:499,color:"from-amber-600 to-amber-700",icon:""},{name:"Silver",min:500,max:999,color:"from-gray-400 to-gray-500",icon:""},{name:"Gold",min:1e3,max:1499,color:"from-yellow-400 to-yellow-500",icon:""},{name:"Platinum",min:1500,max:2499,color:"from-purple-400 to-purple-500",icon:""},{name:"Diamond",min:2500,max:1/0,color:"from-blue-400 to-blue-500",icon:""}],f=()=>m.find(w=>r>=w.min&&r<=w.max),b=()=>{const w=m.findIndex(D=>D.name===i);return w<m.length-1?m[w+1]:null},p=()=>{const w=f(),D=b();if(!D)return 100;const C=r-w.min,L=D.min-w.min;return C/L*100},y=w=>{w.available&&r>=w.pointsCost&&window.confirm(`Redeem ${w.name} for ${w.pointsCost} points?`)&&alert("Reward redeemed successfully! Check your vouchers.")},N=f(),j=b();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-accent-cream to-white py-8",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 mb-8",children:[e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-3 text-gray-dark hover:text-primary-orange font-semibold rounded-2xl hover:bg-white/50 transition-all duration-200",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-primary-black",children:"Loyalty Rewards"}),e.jsxs("p",{className:"text-xs text-gray-dark",children:[i," Member"]})]})]}),e.jsxs("div",{className:"text-center mb-8 px-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary-orange to-primary-orange-light rounded-full flex items-center justify-center mx-auto mb-4 shadow-2xl",children:e.jsx(nt,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-black text-primary-black mb-2",children:"Loyalty Rewards"}),e.jsx("p",{className:"text-lg text-gray-dark font-medium",children:"Earn points, unlock rewards"})]}),e.jsxs("div",{className:"space-y-8 px-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-primary-orange to-primary-orange-dark rounded-3xl p-8 shadow-2xl text-white",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"text-6xl",children:N?.icon}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black mb-2",children:[i," Member"]}),e.jsx("div",{className:"text-5xl font-black mb-2",children:r.toLocaleString()}),e.jsx("p",{className:"text-lg font-medium opacity-90",children:"Available Points"})]}),j&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsxs("span",{children:[x," points to ",c]}),e.jsxs("span",{children:[Math.round(p()),"%"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:e.jsx("div",{className:"bg-white rounded-full h-3 transition-all duration-500",style:{width:`${p()}%`}})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-xl border-2 border-gray-medium",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c8,{className:"w-12 h-12 text-accent-coral mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-black text-primary-black mb-1",children:l.toLocaleString()}),e.jsx("div",{className:"text-sm font-semibold text-gray-dark",children:"Lifetime Points"})]})}),e.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-xl border-2 border-gray-medium",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fs,{className:"w-12 h-12 text-primary-orange-light mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-black text-primary-black mb-1",children:"12"}),e.jsx("div",{className:"text-sm font-semibold text-gray-dark",children:"Services Used"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-black text-primary-black flex items-center",children:[e.jsx(kt,{className:"w-6 h-6 text-primary-orange mr-2"}),"Available Rewards"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map(w=>e.jsx("div",{className:`bg-white rounded-3xl p-6 shadow-xl border-2 transition-all duration-300 ${w.available&&r>=w.pointsCost?"border-green-200 hover:shadow-2xl hover:-translate-y-1 cursor-pointer":w.available?"border-yellow-200 opacity-75":"border-gray-200 opacity-50"}`,onClick:()=>y(w),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"text-4xl",children:w.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${w.available&&r>=w.pointsCost?"bg-green-100 text-green-700":w.available?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:w.category})}),e.jsx("h3",{className:"text-lg font-black text-primary-black mb-2",children:w.name}),e.jsx("p",{className:"text-sm text-gray-dark font-medium mb-3",children:w.description}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"w-5 h-5 text-primary-orange"}),e.jsx("span",{className:"text-lg font-black text-primary-orange",children:w.pointsCost.toLocaleString()})]}),w.available&&r>=w.pointsCost&&e.jsx("span",{className:"text-xs font-bold text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"AVAILABLE"}),w.available&&r<w.pointsCost&&e.jsxs("span",{className:"text-xs font-bold text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full",children:[w.pointsCost-r," MORE"]})]})]})]})},w.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-black text-primary-black flex items-center",children:[e.jsx(Ea,{className:"w-6 h-6 text-primary-orange mr-2"}),"Membership Tiers"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map((w,D)=>{const C=w.name===i,L=r>=w.min;return e.jsx("div",{className:`bg-gradient-to-br ${w.color} rounded-3xl p-6 shadow-xl text-white transition-all duration-300 ${C?"ring-4 ring-white shadow-2xl scale-105":""} ${L?"":"opacity-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:w.icon}),e.jsx("h3",{className:"text-xl font-black mb-2",children:w.name}),e.jsxs("p",{className:"text-sm font-medium opacity-90 mb-2",children:[w.min===0?"0":w.min.toLocaleString(),w.max===1/0?"+":` - ${w.max.toLocaleString()}`," points"]}),C&&e.jsx("div",{className:"bg-white/20 rounded-full px-3 py-1 text-xs font-bold",children:"CURRENT TIER"})]})},w.name)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-black text-primary-black flex items-center",children:[e.jsx(di,{className:"w-6 h-6 text-primary-orange mr-2"}),"Recent Activity"]}),e.jsx("div",{className:"bg-white rounded-3xl shadow-xl border-2 border-gray-medium divide-y divide-gray-medium",children:u.map(w=>e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${w.type==="earned"?"bg-green-100":w.type==="bonus"?"bg-blue-100":"bg-red-100"}`,children:[w.type==="earned"&&e.jsx(nt,{className:"w-6 h-6 text-green-600"}),w.type==="bonus"&&e.jsx(kt,{className:"w-6 h-6 text-blue-600"}),w.type==="redeemed"&&e.jsx(di,{className:"w-6 h-6 text-red-600"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-primary-black",children:w.description}),e.jsx("p",{className:"text-sm text-gray-dark font-medium",children:new Date(w.date).toLocaleDateString()})]})]}),e.jsxs("div",{className:`text-lg font-black ${w.points>0?"text-green-600":"text-red-600"}`,children:[w.points>0?"+":"",w.points]})]},w.id))})]}),e.jsx("div",{className:"bg-gradient-to-br from-primary-orange to-primary-orange-dark rounded-3xl p-8 text-white",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(nt,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black mb-2",children:"Earn More Points"}),e.jsx("p",{className:"text-lg font-medium opacity-90 mb-4",children:"Every 1 spent = 1 point earned"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Book Services"}),e.jsx("div",{className:"opacity-80",children:"Earn 1 point per peso"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Refer Friends"}),e.jsx("div",{className:"opacity-80",children:"Get 200 bonus points"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Birthday Month"}),e.jsx("div",{className:"opacity-80",children:"Double points all month"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold mb-1",children:" Complete Package"}),e.jsx("div",{className:"opacity-80",children:"50% bonus points"})]})]})]})]})})]})]})},u5=({onBack:n})=>{const{user:r,isAuthenticated:l}=Tt(),[i,c]=v.useState("all"),[x,u]=v.useState(null),[g,m]=v.useState(null),[f,b]=v.useState(!1),[p,y]=v.useState(null),[N,j]=v.useState(!1),w=r?.id?fe(J.services.bookings.getBookingsByCustomer,{customerId:r.id}):void 0,D=fe(J.services.services.getAllServices),C=fe(J.services.barbers.getAllBarbers),L=fe(J.services.ratings.getAllRatings),A=r?.id&&(w===void 0||D===void 0||C===void 0),_=null,O=Ee(J.services.bookings.updateBooking),U=Ee(J.services.ratings.submitRating),M=async V=>{try{b(!0),await O({id:V,status:"cancelled"}),m(null);const Z=document.createElement("div");Z.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",Z.textContent="Booking cancelled successfully",document.body.appendChild(Z),setTimeout(()=>document.body.removeChild(Z),3e3)}catch(Z){console.error("Error cancelling booking:",Z),alert(Z.message||"Failed to cancel booking. Please try again.")}finally{b(!1)}},E=({booking:V,onSubmit:Z,onClose:B,loading:k})=>{const[I,se]=v.useState(0),[T,H]=v.useState(""),[oe,W]=v.useState(0),le=()=>{if(I===0){alert("Please select a rating");return}Z(V,I,T)},K=()=>{const Y=[];for(let ge=1;ge<=5;ge++)Y.push(e.jsx("button",{type:"button",onClick:()=>se(ge),onMouseEnter:()=>W(ge),onMouseLeave:()=>W(0),className:"p-1 transition-all duration-200 hover:scale-110",children:e.jsx(nt,{className:`w-8 h-8 transition-colors duration-200 ${ge<=(oe||I)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},ge));return Y};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto",style:{backgroundColor:"#F59E0B"},children:e.jsx(nt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"#36454F"},children:"Rate Your Service"}),e.jsxs("p",{className:"text-sm",style:{color:"#8B8B8B"},children:["How was your experience with ",V.barber?.name||"your barber","?"]})]}),e.jsx("div",{className:"rounded-xl p-3 text-left",style:{backgroundColor:"#F4F0E6",border:"1px solid #E0E0E0"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Service:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:V.service?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Date:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:new Date(V.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Barber:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:V.barber?.name||"Any Barber"})]})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-3",style:{color:"#36454F"},children:"Rate your experience:"}),e.jsx("div",{className:"flex justify-center space-x-1 mb-2",children:K()}),I>0&&e.jsxs("p",{className:"text-xs",style:{color:"#8B8B8B"},children:[I===1&&"Poor",I===2&&"Fair",I===3&&"Good",I===4&&"Very Good",I===5&&"Excellent"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#36454F"},children:"Additional Feedback (Optional)"}),e.jsx("textarea",{value:T,onChange:Y=>H(Y.target.value),placeholder:"Share your thoughts about the service...",className:"w-full p-3 border rounded-lg resize-none text-sm",style:{borderColor:"#E0E0E0",backgroundColor:"#FAFAFA",color:"#36454F"},rows:3,maxLength:500}),e.jsxs("p",{className:"text-xs mt-1",style:{color:"#8B8B8B"},children:[T.length,"/500 characters"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:B,disabled:k,className:"flex-1 py-3 border-2 font-bold rounded-xl transition-all duration-200",style:{borderColor:"#E0E0E0",color:"#8B8B8B"},onMouseEnter:Y=>!k&&(Y.target.style.backgroundColor="#F5F5F5"),onMouseLeave:Y=>!k&&(Y.target.style.backgroundColor="transparent"),children:"Cancel"}),e.jsx("button",{onClick:le,disabled:k||I===0,className:`flex-1 py-3 text-white font-bold rounded-xl transition-all duration-200 ${k||I===0?"opacity-75 cursor-not-allowed":""}`,style:{backgroundColor:k||I===0?"#CCCCCC":"#F59E0B"},onMouseEnter:Y=>!k&&I>0&&(Y.target.style.backgroundColor="#D97706"),onMouseLeave:Y=>!k&&I>0&&(Y.target.style.backgroundColor="#F59E0B"),children:k?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Submitting..."})]}):"Submit Rating"})]})]})})})},S=async(V,Z,B)=>{try{j(!0),await U({bookingId:V._id,customerId:r.id,barberId:V.barber._id||V.barber,serviceId:V.service._id||V.service,rating:Z,feedback:B||void 0}),y(null);const k=document.createElement("div");k.className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",k.textContent="Rating submitted successfully",document.body.appendChild(k),setTimeout(()=>document.body.removeChild(k),3e3)}catch(k){console.error("Error submitting rating:",k),alert(k.message||"Failed to submit rating. Please try again.")}finally{j(!1)}},$=V=>{switch(V){case"confirmed":return"bg-green-500/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},P=w?w.filter(V=>i==="all"?!0:V.status===i):[],q=V=>!L||!r?.id?!1:L.some(Z=>Z.booking_id===V&&Z.customer_id===r.id),z=[{id:"all",label:"All Bookings",count:w?w.length:0},{id:"confirmed",label:"Confirmed",count:w?w.filter(V=>V.status==="confirmed").length:0},{id:"pending",label:"Pending",count:w?w.filter(V=>V.status==="pending").length:0},{id:"cancelled",label:"Cancelled",count:w?w.filter(V=>V.status==="cancelled").length:0}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"My Bookings"}),e.jsxs("p",{className:"text-xs text-[#FF8C42]",children:[w?.length||0," total"]})]})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl p-3 border border-[#555555]/30 shadow-lg",children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:z.map(V=>e.jsxs("button",{onClick:()=>c(V.id),className:`py-3 px-2 rounded-xl text-xs font-semibold transition-all duration-200 ${i===V.id?"bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-400 hover:text-gray-300 hover:bg-white/5"}`,children:[e.jsx("div",{children:V.label}),e.jsxs("div",{className:"text-xs mt-1 opacity-80",children:["(",V.count,")"]})]},V.id))})})}),A&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"rounded-full w-16 h-16 bg-[#FF8C42]/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(Re,{className:"w-8 h-8 text-[#FF8C42]"})}),e.jsx("p",{className:"text-sm text-gray-400",children:"Loading bookings..."})]}),_,!A&&!_&&e.jsx("div",{className:"space-y-3",children:P.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Re,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),e.jsx("h3",{className:"text-xl font-bold mb-3 text-white",children:"No Bookings Found"}),e.jsx("p",{className:"mb-6 text-gray-400",children:i==="all"?"You haven't made any bookings yet":`No ${i} bookings found`}),e.jsx("button",{onClick:n,className:"px-6 py-3 text-white font-bold rounded-xl bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-all duration-200 shadow-lg",children:"Book Your First Service"})]}):P.map(V=>{const Z=D?.find(k=>k._id===V.service)||{},B=C?.find(k=>k._id===V.barber)||{};return console.log(`Booking ${V._id}:`,{voucher_code:V.voucher_code,total_amount:V.total_amount,voucherCode:V.voucherCode,voucher:V.voucher}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg border border-[#444444]/50 shadow-sm hover:shadow-lg transition-all duration-200 p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-base font-semibold text-white truncate",children:Z.name||"Service"}),e.jsx("span",{className:`px-2 py-0.5 rounded-md text-xs font-medium ${$(V.status)}`,children:V.status.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[e.jsxs("span",{children:["#",V.booking_code]}),V.branch_name&&e.jsxs("span",{className:"text-[#FF8C42] font-medium flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),V.branch_name]})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-3.5 h-3.5 text-[#FF8C42]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Date"}),e.jsx("p",{className:"font-medium text-white",children:new Date(V.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jt,{className:"w-3.5 h-3.5 text-[#FF8C42]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Time"}),e.jsx("p",{className:"font-medium text-white",children:V.time})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-3.5 h-3.5 text-[#FF8C42]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Barber"}),e.jsx("p",{className:"font-medium text-white",children:B.name||"Any Barber"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Price"}),e.jsxs("p",{className:"font-semibold text-[#FF8C42]",children:["",Z.price?parseFloat(Z.price).toLocaleString():"--"]})]}),(()=>{const k=V.voucher_code||V.voucherCode||V.voucher?.code;return k&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Voucher"}),e.jsx("p",{className:"text-xs font-medium text-green-400",children:k})]})})()]}),e.jsxs("div",{className:"flex gap-2",children:[V.status==="booked"&&e.jsxs("button",{onClick:()=>u({...V,service:Z,barber:B}),className:"flex-1 py-2 px-3 bg-[#FF8C42] text-white text-xs font-medium rounded-lg hover:bg-[#FF7A2B] transition-colors flex items-center justify-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),e.jsx("span",{children:"Show QR"})]}),V.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>m({...V,service:Z,barber:B}),className:"flex-1 py-2 px-3 bg-red-500 text-white text-xs font-medium rounded-lg hover:bg-red-600 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>u({...V,service:Z,barber:B}),className:"flex-1 py-2 px-3 bg-[#FF8C42] text-white text-xs font-medium rounded-lg hover:bg-[#FF7A2B] transition-colors flex items-center justify-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),e.jsx("span",{children:"QR Code"})]})]}),V.status==="completed"&&!q(V._id)&&e.jsxs("button",{onClick:()=>y({...V,service:Z,barber:B}),className:"flex-1 py-2 px-3 bg-yellow-500 text-white text-xs font-medium rounded-lg hover:bg-yellow-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(nt,{className:"w-3 h-3"}),e.jsx("span",{children:"Rate"})]})]})]})]},V._id)})})]}),p&&e.jsx(E,{booking:p,onSubmit:S,onClose:()=>y(null),loading:N}),x&&e.jsx(m5,{booking:x,onClose:()=>u(null)}),g&&e.jsx(h5,{booking:g,onConfirm:M,onClose:()=>m(null),loading:f})]})},m5=({booking:n,onClose:r})=>{const l=v.useRef(null),i=n.booking_code;return v.useEffect(()=>{const c=setTimeout(()=>{l.current?Ds.toCanvas(l.current,i,{width:160,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},x=>{x&&console.error("QR Code generation error:",x)}):console.error("Canvas ref not available in MyBookings QR modal")},100);return()=>clearTimeout(c)},[i]),e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto",style:{backgroundColor:"#F68B24"},children:e.jsx(Vt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-1",style:{color:"#36454F"},children:"Booking QR Code"}),e.jsx("p",{className:"text-sm",style:{color:"#36454F"},children:"Show this to staff when you arrive"})]}),e.jsx("div",{className:"p-4 rounded-xl",style:{backgroundColor:"#F4F0E6"},children:e.jsx("div",{className:"flex justify-center",children:e.jsx("canvas",{ref:l,className:"rounded-lg"})})}),e.jsx("div",{className:"rounded-xl p-3 text-left",style:{backgroundColor:"#F4F0E6",border:"1px solid #E0E0E0"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Service:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.service?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Date:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:new Date(n.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Time:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Barber:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.barber?.name||"Any Barber"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Code:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.booking_code})]}),(()=>{const c=n.voucher_code||n.voucherCode||n.voucher?.code,x=n.total_amount||n.totalAmount;return e.jsxs(e.Fragment,{children:[c&&e.jsxs("div",{className:"flex justify-between border-t pt-2",style:{borderColor:"#E0E0E0"},children:[e.jsx("span",{style:{color:"#22C55E"},children:"Voucher:"}),e.jsx("span",{className:"font-bold",style:{color:"#22C55E"},children:c})]}),x&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#3B82F6"},children:"Total Paid:"}),e.jsxs("span",{className:"font-bold",style:{color:"#3B82F6"},children:["",parseFloat(x).toLocaleString()]})]})]})})()]})}),e.jsx("button",{onClick:r,className:"w-full py-3 text-white font-bold rounded-xl transition-all duration-200",style:{backgroundColor:"#F68B24"},onMouseEnter:c=>c.target.style.backgroundColor="#E67E22",onMouseLeave:c=>c.target.style.backgroundColor="#F68B24",children:"Close"})]})})})},h5=({booking:n,onConfirm:r,onClose:l,loading:i})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl border",style:{borderColor:"#E0E0E0"},children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-red-100",children:e.jsx(Pt,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#36454F"},children:"Cancel Booking?"}),e.jsx("p",{className:"text-sm mb-4",style:{color:"#8B8B8B"},children:"Are you sure you want to cancel this booking? This action cannot be undone."})]}),e.jsx("div",{className:"rounded-xl p-4 text-left",style:{backgroundColor:"#FEF2F2",border:"1px solid #FECACA"},children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Service:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.service?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Date:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.date?new Date(n.date).toLocaleDateString():"Today"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Time:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"#36454F"},children:"Barber:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.barber?.name||"Any Barber"})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",style:{borderColor:"#FECACA"},children:[e.jsx("span",{style:{color:"#36454F"},children:"Code:"}),e.jsx("span",{className:"font-bold",style:{color:"#36454F"},children:n.booking_code})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,disabled:i,className:"flex-1 py-3 border-2 font-bold rounded-xl transition-all duration-200",style:{borderColor:"#E0E0E0",color:"#8B8B8B"},onMouseEnter:c=>!i&&(c.target.style.backgroundColor="#F5F5F5"),onMouseLeave:c=>!i&&(c.target.style.backgroundColor="transparent"),children:"Keep Booking"}),e.jsx("button",{onClick:r,disabled:i,className:`flex-1 py-3 text-white font-bold rounded-xl transition-all duration-200 ${i?"opacity-75 cursor-not-allowed":""}`,style:{backgroundColor:i?"#CCCCCC":"#EF4444"},onMouseEnter:c=>!i&&(c.target.style.backgroundColor="#DC2626"),onMouseLeave:c=>!i&&(c.target.style.backgroundColor="#EF4444"),children:i?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),e.jsx("span",{children:"Cancelling..."})]}):"Yes, Cancel"})]})]})})}),f5=({product:n,onBack:r,onAddToCart:l,cartQuantity:i=0})=>{const[c,x]=v.useState(1),[u,g]=v.useState(0),m=({imageUrl:N,imageStorageId:j,productName:w,className:D})=>{const C=fe(j?J.services.products.getImageUrl:void 0,j?{storageId:j}:void 0),[L,A]=v.useState(!1),_=N||C;return L||!_?e.jsx("div",{className:`bg-gray-100 rounded-lg flex items-center justify-center ${D}`,children:e.jsx(aa,{className:"w-16 h-16 text-gray-400"})}):e.jsx("img",{src:_,alt:w,className:D,onError:()=>A(!0)})},f=()=>{for(let N=0;N<c;N++)l(n);x(1)},b=N=>N.split("-").map(j=>j.charAt(0).toUpperCase()+j.slice(1)).join(" "),y=n.stock===0?{label:"Out of Stock",color:"text-red-600",bg:"bg-red-50"}:n.stock<=n.minStock?{label:"Low Stock",color:"text-yellow-600",bg:"bg-yellow-50"}:{label:"In Stock",color:"text-green-600",bg:"bg-green-50"};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F4F0E6"},children:[e.jsx("div",{className:"sticky top-0 z-40",style:{backgroundColor:"#36454F"},children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-lg transition-all duration-200",style:{"&:hover":{color:"#F68B24"}},onMouseEnter:N=>N.target.style.color="#F68B24",onMouseLeave:N=>N.target.style.color="white",children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Back to Shop"})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm font-bold text-white",children:"Product Details"})}),e.jsx("div",{className:"w-20"})," "]})})}),e.jsxs("div",{className:"max-w-md mx-auto px-4 py-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:e.jsx(m,{imageUrl:n.imageUrl,imageStorageId:n.imageStorageId,productName:n.name,className:"w-full h-64 object-cover rounded-xl"})})}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm mb-6",children:[e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:"#F68B24"},children:b(n.category)})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.name}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:n.brand}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-3xl font-bold",style:{color:"#F68B24"},children:["",n.price.toLocaleString()]}),n.cost&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Cost: ",n.cost.toLocaleString()]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${y.bg} ${y.color}`,children:y.label}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[n.stock," units available"]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",e.jsx("span",{className:"font-mono font-medium text-gray-700",children:n.sku})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sold This Month"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:n.soldThisMonth})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Min Stock Level"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:n.minStock})]})]})]}),n.stock>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm mb-20",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Add to Cart"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>x(Math.max(1,c-1)),className:"w-10 h-10 rounded-full flex items-center justify-center text-white",style:{backgroundColor:"#F68B24"},children:e.jsx(ci,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xl font-bold text-gray-900 min-w-[3rem] text-center",children:c}),e.jsx("button",{onClick:()=>x(Math.min(n.stock,c+1)),disabled:c>=n.stock,className:"w-10 h-10 rounded-full flex items-center justify-center text-white disabled:opacity-50",style:{backgroundColor:"#F68B24"},children:e.jsx(Bt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Total:"}),e.jsxs("span",{className:"text-2xl font-bold",style:{color:"#F68B24"},children:["",(n.price*c).toLocaleString()]})]}),i>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx(xi,{className:"w-4 h-4 inline mr-1"}),i," already in cart"]})}),e.jsxs("button",{onClick:f,disabled:c+i>n.stock,className:"w-full py-4 rounded-xl text-white font-bold text-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",style:{backgroundColor:"#F68B24"},children:[e.jsx(xi,{className:"w-5 h-5"}),e.jsx("span",{children:c+i>n.stock?"Not enough stock":`Add ${c} to Cart`})]}),c+i>n.stock&&e.jsxs("p",{className:"text-sm text-red-600 text-center mt-2",children:["Only ",n.stock-i," more available"]})]}),n.stock===0&&e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm mb-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(aa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-600 mb-2",children:"Out of Stock"}),e.jsx("p",{className:"text-gray-500",children:"This product is currently unavailable. Check back later!"})]})})]})]})},g5=({onBack:n})=>{const[r,l]=v.useState(""),[i,c]=v.useState("all"),[x,u]=v.useState([]),[g,m]=v.useState(!1),[f,b]=v.useState(null),[p,y]=v.useState("shop"),N=fe(J.services.products.getAllProducts)||[],j=N.filter(S=>{const $=S.name.toLowerCase().includes(r.toLowerCase())||S.brand.toLowerCase().includes(r.toLowerCase()),P=i==="all"||S.category===i,q=S.status==="active"&&S.stock>0;return $&&P&&q}),w=["all",...new Set(N.map(S=>S.category))],D=S=>{u($=>$.find(q=>q._id===S._id)?$.map(q=>q._id===S._id?{...q,quantity:Math.min(q.quantity+1,S.stock)}:q):[...$,{...S,quantity:1}])},C=S=>{u($=>{const P=$.find(q=>q._id===S);return P&&P.quantity>1?$.map(q=>q._id===S?{...q,quantity:q.quantity-1}:q):$.filter(q=>q._id!==S)})},L=()=>x.reduce((S,$)=>S+$.quantity,0),A=()=>x.reduce((S,$)=>S+$.price*$.quantity,0),_=S=>{const $=x.find(P=>P._id===S);return $?$.quantity:0},O=S=>{b(S),y("details")},U=()=>{b(null),y("shop")},M=({imageUrl:S,imageStorageId:$,productName:P})=>{const q=fe($?J.services.products.getImageUrl:void 0,$?{storageId:$}:void 0),[z,V]=v.useState(!1),Z=S||q;return z||!Z?e.jsx("div",{className:"w-full h-32 bg-[#2A2A2A] rounded-xl flex items-center justify-center",children:e.jsx(aa,{className:"w-8 h-8 text-gray-500"})}):e.jsx("img",{src:Z,alt:P,className:"w-full h-32 object-cover rounded-xl",onError:()=>V(!0)})},E=S=>S==="all"?"All Products":S.split("-").map($=>$.charAt(0).toUpperCase()+$.slice(1)).join(" ");return p==="details"&&f?e.jsx(f5,{product:f,onBack:U,onAddToCart:D,cartQuantity:_(f._id)}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 text-white font-semibold rounded-xl hover:bg-white/10 transition-all duration-200",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-bold text-white",children:"Product Shop"}),e.jsxs("p",{className:"text-xs text-[#FF8C42]",children:[j.length," products"]})]}),e.jsxs("button",{onClick:()=>m(!g),className:"relative p-2 text-white rounded-xl bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] transition-colors duration-200 shadow-lg",children:[e.jsx(xi,{className:"w-5 h-5"}),L()>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:L()})]})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:r,onChange:S=>l(S.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl bg-[#2A2A2A] border border-[#555555] text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42] transition-colors"})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:w.map(S=>e.jsx("button",{onClick:()=>c(S),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all duration-200 ${i===S?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-400 bg-[#333333] border border-[#555555] hover:text-gray-300 hover:bg-[#444444]"}`,children:E(S)},S))})}),j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(aa,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"No Products Found"}),e.jsx("p",{className:"text-gray-400",children:r||i!=="all"?"Try adjusting your search or filter.":"Products will appear here when available."})]}):e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-20",children:j.map(S=>{const $=_(S._id);return e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl p-4 shadow-lg border border-[#555555]/30 cursor-pointer transition-all duration-200 hover:scale-105 hover:border-[#FF8C42]/50",onClick:()=>O(S),children:[e.jsx(M,{imageUrl:S.imageUrl,imageStorageId:S.imageStorageId,productName:S.name}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"font-bold text-sm text-white line-clamp-2",children:S.name}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:S.brand}),e.jsx("div",{className:"flex items-center justify-between mt-2",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-[#FF8C42]",children:["",S.price.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[S.stock," in stock"]})]})}),e.jsx("div",{className:"mt-3",children:$===0?e.jsx("button",{onClick:P=>{P.stopPropagation(),D(S)},className:"w-full py-2 px-3 rounded-xl bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white font-medium text-sm transition-colors duration-200 hover:from-[#FF7A2B] hover:to-[#FF6B1A]",children:"Add to Cart"}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:P=>{P.stopPropagation(),C(S._id)},className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center text-white",children:e.jsx(ci,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-white",children:$}),e.jsx("button",{onClick:P=>{P.stopPropagation(),D(S)},disabled:$>=S.stock,className:"w-8 h-8 rounded-full bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center text-white disabled:opacity-50",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]})]},S._id)})})]}),g&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"flex-1 bg-black bg-opacity-50",onClick:()=>m(!1)}),e.jsxs("div",{className:"w-80 bg-white h-full overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Shopping Cart"}),e.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-500 hover:text-gray-700",children:e.jsx(rs,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"p-4",children:x.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Your cart is empty"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:x.map(S=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(aa,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900",children:S.name}),e.jsx("p",{className:"text-xs text-gray-500",children:S.brand}),e.jsxs("p",{className:"text-sm font-bold",style:{color:"#F68B24"},children:["",S.price.toLocaleString(),"  ",S.quantity]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>C(S._id),className:"w-6 h-6 rounded-full flex items-center justify-center text-white",style:{backgroundColor:"#F68B24"},children:e.jsx(ci,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>D(S),className:"w-6 h-6 rounded-full flex items-center justify-center text-white",style:{backgroundColor:"#F68B24"},children:e.jsx(Bt,{className:"w-3 h-3"})})]})]},S._id))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total:"}),e.jsxs("span",{className:"text-xl font-bold",style:{color:"#F68B24"},children:["",A().toLocaleString()]})]}),e.jsxs("button",{className:"w-full py-3 rounded-lg text-white font-bold transition-colors duration-200",style:{backgroundColor:"#F68B24"},onClick:()=>{alert("Checkout functionality coming soon!")},children:["Checkout (",L()," items)"]})]})]})})]})]})]})},p5=({onComplete:n})=>{const[r,l]=v.useState(0),[i,c]=v.useState(!0),x=[{id:"welcome",title:"Welcome to Tipuno X",subtitle:"Your Premium Barbershop Experience",content:e.jsxs("div",{className:"text-center space-y-8",children:[e.jsx("div",{className:"relative mx-auto w-32 h-32 mb-8",children:e.jsx("img",{src:"/img/pnglog.png",alt:"Tipuno X Logo",className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Welcome to Tipuno X Barbershop"}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed max-w-lg mx-auto",children:"We're excited to have you here! Let us show you what makes our barbershop special and how we can help you look your absolute best."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-8 max-w-sm mx-auto",children:[e.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[e.jsx(nt,{className:"w-8 h-8 text-[#FF8C42] mx-auto mb-2"}),e.jsx("p",{className:"text-white font-medium text-sm",children:"Expert Barbers"})]}),e.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[e.jsx(Re,{className:"w-8 h-8 text-[#FF8C42] mx-auto mb-2"}),e.jsx("p",{className:"text-white font-medium text-sm",children:"Easy Booking"})]})]})]})},{id:"ai-assistant",title:"Style Consultation",subtitle:"Get personalized recommendations",content:e.jsxs("div",{className:"text-center space-y-8",children:[e.jsx("div",{className:"relative mx-auto w-24 h-24 mb-8",children:e.jsx("div",{className:"bg-gray-800 rounded-full flex items-center justify-center shadow-xl w-full h-full border-2 border-[#FF8C42]/30",children:e.jsx(It,{className:"w-12 h-12 text-[#FF8C42]"})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Expert Style Consultation"}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed max-w-lg mx-auto",children:"Our experienced barbers will help you find the perfect style that complements your face shape, lifestyle, and personal preferences."}),e.jsx("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 max-w-md mx-auto",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-[#FF8C42]/20 p-3 rounded-lg",children:e.jsx(Le,{className:"w-6 h-6 text-[#FF8C42]"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-white",children:"Personalized Service"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Tailored to your unique style"})]})]})})]})]})},{id:"features",title:"What We Offer",subtitle:"Services designed with you in mind",content:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-4 max-w-xl mx-auto",children:[e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-800/30 rounded-xl border border-gray-700/50",children:[e.jsx("div",{className:"bg-[#FF8C42]/20 p-3 rounded-lg",children:e.jsx(Re,{className:"w-6 h-6 text-[#FF8C42]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Easy Booking"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Schedule appointments with your favorite barber at your convenience."})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-800/30 rounded-xl border border-gray-700/50",children:[e.jsx("div",{className:"bg-[#FF8C42]/20 p-3 rounded-lg",children:e.jsx(It,{className:"w-6 h-6 text-[#FF8C42]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Expert Cuts"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Professional haircuts and styling from experienced barbers."})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-800/30 rounded-xl border border-gray-700/50",children:[e.jsx("div",{className:"bg-[#FF8C42]/20 p-3 rounded-lg",children:e.jsx(nt,{className:"w-6 h-6 text-[#FF8C42]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Quality Service"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Premium treatments and products for the best results."})]})]})]})})},{id:"ready",title:"You're All Set!",subtitle:"Ready to book your appointment",content:e.jsxs("div",{className:"text-center space-y-8",children:[e.jsx("div",{className:"relative mx-auto w-24 h-24 mb-8",children:e.jsx("div",{className:"bg-green-600 rounded-full flex items-center justify-center shadow-xl w-full h-full",children:e.jsx(Qe,{className:"w-12 h-12 text-white"})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Welcome to Tipuno X!"}),e.jsx("p",{className:"text-gray-300 text-lg leading-relaxed max-w-lg mx-auto",children:"Thanks for taking the tour! You're now ready to explore everything we have to offer. Book your appointment and let our skilled barbers take care of you."}),e.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl border border-gray-700 max-w-md mx-auto",children:[e.jsx("h3",{className:"font-semibold text-white text-lg mb-2",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Browse our services, pick your preferred barber, and schedule your appointment at a time that works for you."})]})]})]})}],u=()=>{r<x.length-1?l(r+1):m()},g=()=>{r>0&&l(r-1)},m=()=>{sessionStorage.setItem("onboarding_completed","true"),c(!1),setTimeout(()=>{n()},300)},f=()=>{m()};if(!i)return null;const b=x[r],p=r===x.length-1,y=r===0;return e.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-black via-gray-900 to-black z-50 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-[#FF8C42]/3 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-[#FF7A2B]/2 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-[url('/img/pnglog.png')] bg-center bg-no-repeat opacity-[0.02] bg-contain"})]}),e.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TipunoX Angeles Logo",className:"w-16 h-16 object-contain"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white font-bold text-lg",children:"Tipuno X"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Premium Barbershop"})]})]}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-white transition-colors font-medium px-4 py-2 rounded-lg hover:bg-gray-800/50",children:"Skip"})]}),e.jsx("div",{className:"px-6 md:px-8 mb-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"flex space-x-3 mb-4",children:x.map((N,j)=>e.jsx("div",{className:`h-1 rounded-full flex-1 transition-all duration-500 ${j<=r?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B]":"bg-gray-700"}`},j))}),e.jsxs("p",{className:"text-gray-400 text-sm text-center",children:[r+1," of ",x.length]})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-6 md:px-8",children:e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:b.title}),e.jsx("p",{className:"text-xl text-gray-300",children:b.subtitle})]}),e.jsx("div",{className:"transition-all duration-500 ease-in-out",children:b.content})]})}),e.jsx("div",{className:"p-6 md:p-8",children:e.jsxs("div",{className:"max-w-md mx-auto flex justify-between items-center",children:[e.jsxs("button",{onClick:g,disabled:y,className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-semibold transition-all ${y?"text-gray-600 cursor-not-allowed":"text-gray-300 hover:text-white hover:bg-gray-800/50"}`,children:[e.jsx(cp,{className:"w-5 h-5"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:u,className:"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF8C42]/90 hover:to-[#FF7A2B]/90 text-white px-8 py-3 rounded-xl font-semibold flex items-center space-x-2 transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx("span",{children:p?"Get Started":"Continue"}),e.jsx(ip,{className:"w-5 h-5"})]})]})})]})]})},b5="sk-5WGXF2zQz5cZS6C3NTPcuBo0ia3EBPDWxzgs6Z1qhHwweY6o",y5="AIzaSyB_7NiOu4CCbZIFW3V_FAPG3t5Bb4i5jQQ",v5="732e1b0a9174d4473",Ag=100;class j5{constructor(){this.recommendationCount=this.getTodayRecommendationCount()}getTodayRecommendationCount(){const r=new Date().toDateString(),l=localStorage.getItem(`ai_barber_recommendations_${r}`);return l?parseInt(l):0}incrementRecommendationCount(){const r=new Date().toDateString(),l=this.recommendationCount+1;return this.recommendationCount=l,localStorage.setItem(`ai_barber_recommendations_${r}`,l.toString()),l}getRemainingRecommendations(){return Math.max(0,Ag-this.recommendationCount)}canGenerateRecommendations(){return this.recommendationCount<Ag}resetDailyCounter(){const r=new Date().toDateString();this.recommendationCount=0,localStorage.removeItem(`ai_barber_recommendations_${r}`),console.log("Daily recommendation counter reset")}async fetchHaircutImages(r){try{const l=`${r} men haircut hairstyle`,i=await fetch(`https://www.googleapis.com/customsearch/v1?key=${y5}&cx=${v5}&q=${encodeURIComponent(l)}&searchType=image&num=3&safe=active&imgType=photo&imgSize=medium`);if(!i.ok)throw new Error(`Google Images API error: ${i.status}`);return(await i.json()).items?.map(x=>({url:x.link,thumbnail:x.image.thumbnailLink,title:x.title,source:x.displayLink}))||[]}catch(l){return console.error("Failed to fetch haircut images:",l),[]}}async generatePersonalizedRecommendations(r,l=null){if(!this.canGenerateRecommendations())throw new Error("Daily AI recommendation limit reached. Please try again tomorrow.");if(!r||!r.hairType)throw new Error("Please complete all preference selections for personalized recommendations.");console.log(" User Preferences:",{faceShape:r.faceShape||"To be determined by AI",hairType:r.hairType,lifestyle:r.lifestyle,maintenance:r.maintenance,hasUploadedImage:!!l});const i=`You are TipunoX Angeles AI Barber Assistant, an expert hair styling consultant with years of experience in men's grooming and barbering. Your specialty is providing personalized haircut recommendations based on comprehensive head and hair analysis.

CUSTOMER PROFILE:
- Face Shape: ${r.faceShape||"To be determined from image analysis"}
- Hair Type: ${r.hairType}  
- Lifestyle: ${r.lifestyle}
- Maintenance Preference: ${r.maintenance}
${l?"- Has uploaded photo for detailed analysis":"- No photo provided"}

${l?"PHOTO ANALYSIS REQUIRED:":"ANALYSIS BASED ON:"}
${l?`CRITICAL: Provide HONEST and ACCURATE analysis. Do not exaggerate or provide overly positive descriptions. Be objective and truthful.

Analyze the uploaded photo and provide detailed, factual insights about:
1. HEAD SHAPE ANALYSIS (Be precise and honest):
   - Actual head proportions (measure length vs width ratio accurately)
   - True forehead size (small/medium/large) and shape (narrow/wide/rounded/angular)
   - Jawline definition (weak/moderate/strong) and actual width
   - Cheekbone prominence (flat/moderate/high) and positioning
   - Chin shape (pointed/rounded/square/weak/strong) and projection
   - Ear positioning (close/protruding) and relative size
   - DETERMINE ACTUAL FACE SHAPE: oval/round/square/rectangular/heart/diamond based on measurements

2. HAIR DETAILS ANALYSIS (Current state only):
   - Exact current hair length and existing style
   - Actual hair density (thin/medium/thick) and thickness of individual strands
   - True hair texture (pin-straight/wavy/curly/coarse/fine)
   - Hairline shape (straight/widow's peak/receding/irregular) and any recession
   - Crown area characteristics (flat/cowlick/thinning)
   - Natural growth patterns and directions
   - Hair color and current condition (healthy/damaged/dry)

3. FACIAL FEATURES (Objective assessment):
   - Eye shape (almond/round/hooded/deep-set) and spacing
   - Nose size (small/medium/large) and shape (straight/curved/wide/narrow)
   - Lip thickness (thin/medium/full) and shape
   - Overall facial symmetry (note any asymmetries)
   - Skin condition and complexion

BE HONEST about what you observe. Do not flatter or exaggerate positive features.`:"User-provided preferences and standard face shape analysis"}

HAIRCUT OPTIONS TO CHOOSE FROM:
1. Classic Fade - Timeless, professional, versatile
2. Textured Crop - Modern, low maintenance, trendy  
3. Side Part - Sophisticated, classic, business-friendly
4. Buzz Cut - Ultra low maintenance, clean, sporty
5. Pompadour - Bold, stylish, high maintenance
6. Undercut - Edgy, modern, medium maintenance
7. Caesar Cut - Classic Roman style, easy to style
8. Quiff - Voluminous, trendy, requires styling

INSTRUCTIONS:
1. ${l?"FIRST: Analyze the photo with complete honesty and accuracy. Determine the ACTUAL face shape based on measurements, not assumptions.":"Analyze based on provided preferences"}
2. Recommend 3 haircuts from the list above based on your HONEST analysis
3. For each recommendation, provide:
   - Haircut name
   - Realistic suitability score (70-95% - be honest, not all cuts are perfect)
   - 2-sentence description explaining why it matches their ACTUAL features
   - 3 key benefits
   - Maintenance level (Low/Medium/High)
4. Order by best match first
5. Return response in this exact JSON structure:
{
  "analysis": {
    "headShape": "HONEST assessment: Actual face shape (oval/round/square/rectangular/heart/diamond) with specific measurements and proportions. Example: 'Square face shape with strong jawline, wide forehead, and minimal tapering from temples to jaw. Length-to-width ratio approximately 1.2:1.'",
    "hairDetails": "FACTUAL description: Current hair length, density, texture, hairline, and condition without embellishment. Example: 'Medium-length hair, moderate density, slightly wavy texture, straight hairline with no recession, healthy condition.'",
    "facialFeatures": "OBJECTIVE assessment: Key facial features that influence haircut choice, noting any asymmetries or unique characteristics. Example: 'Prominent cheekbones, medium-sized nose, well-defined jawline, symmetrical features overall.'",
    "recommendations_reasoning": "LOGICAL explanation: Why these specific cuts were chosen based on actual face shape and features, not generic praise."
  },
  "recommendations": [
    {
      "id": 1,
      "name": "Haircut Name",
      "description": "HONEST explanation of why this cut works with their ACTUAL features, including any potential challenges.",
      "suitability": 85,
      "maintenance": "Medium",
      "benefits": ["Specific Benefit 1", "Realistic Benefit 2", "Practical Benefit 3"]
    }
  ]
}

CRITICAL: Be truthful about face shape determination. Use actual measurements and proportions, not flattering assumptions.`;try{this.incrementRecommendationCount();const c=await fetch("https://api.moonshot.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b5}`},body:JSON.stringify({model:"kimi-k2-0711-preview",messages:[{role:"system",content:i},{role:"user",content:`Generate personalized haircut recommendations for a customer with ${r.faceShape?r.faceShape+" face shape, ":""}${r.hairType} hair type, ${r.lifestyle} lifestyle, and ${r.maintenance} maintenance preference.${!r.faceShape&&l?" Please analyze the uploaded photo to determine the face shape and provide detailed head analysis.":""}`}],temperature:.7,max_tokens:800})});if(!c.ok)throw new Error(`Kimi API error: ${c.status}`);const u=(await c.json()).choices[0]?.message?.content||"";console.log(" Kimi AI Raw Response:",u);try{const g=JSON.parse(u);g.analysis&&(console.log(" AI Head Shape Analysis:",g.analysis.headShape),console.log(" AI Hair Details Analysis:",g.analysis.hairDetails),console.log(" AI Facial Features Analysis:",g.analysis.facialFeatures),console.log(" AI Recommendations Reasoning:",g.analysis.recommendations_reasoning));const m=g.recommendations||g;if(Array.isArray(m)&&m.length>0)return console.log(" AI Recommendations Generated:",m.length,"suggestions"),m.forEach((b,p)=>{console.log(` Recommendation ${p+1}:`,{name:b.name,suitability:b.suitability+"%",maintenance:b.maintenance,benefits:b.benefits})}),await Promise.all(m.map(async(b,p)=>{const y=await this.fetchHaircutImages(b.name||"Classic Cut");return{id:b.id||p+1,name:b.name||"Classic Cut",description:b.description||"A great cut that suits your style.",suitability:b.suitability||90,maintenance:b.maintenance||"Medium",benefits:b.benefits||["Professional look","Easy to style","Versatile"],images:y.slice(0,3),primaryImage:y[0]?.url||null}}));console.warn(" AI returned invalid recommendations format, using fallback")}catch(g){console.warn(" JSON parsing failed:",g.message),console.log(" Raw content that failed to parse:",u.substring(0,200)+"...")}return console.log(" Using fallback recommendations for:",r),await this.getFallbackRecommendations(r)}catch(c){return console.error(" AI recommendation generation failed:",c.message),console.log(" Falling back to default recommendations"),await this.getFallbackRecommendations(r)}}async getFallbackRecommendations(r){const l={oval:{straight:[{name:"Classic Fade",suitability:95,description:"Perfect for your balanced oval face and straight hair texture."},{name:"Side Part",suitability:92,description:"A timeless choice that complements your face shape beautifully."},{name:"Textured Crop",suitability:88,description:"Modern and stylish, great for your hair type."}]},round:{wavy:[{name:"Textured Crop",suitability:94,description:"Adds height and definition to complement your round face."},{name:"Pompadour",suitability:91,description:"Creates vertical lines that elongate your face shape."},{name:"Undercut",suitability:87,description:"Modern cut with height that balances your features."}]},square:{curly:[{name:"Classic Fade",suitability:93,description:"Softens your strong jawline while maintaining masculine appeal."},{name:"Caesar Cut",suitability:89,description:"Classic style that works well with your natural texture."},{name:"Textured Crop",suitability:86,description:"Adds texture while balancing your angular features."}]}},i=r.faceShape||"oval";console.log(" Fallback recommendations using face shape:",i);const c=l[i]?.[r.hairType]||l.oval?.[r.hairType]||l.oval.straight;return await Promise.all(c.map(async(u,g)=>{const m=await this.fetchHaircutImages(u.name);return{id:g+1,name:u.name,description:u.description,suitability:u.suitability,maintenance:r.maintenance==="low"?"Low":r.maintenance==="high"?"High":"Medium",benefits:this.getDefaultBenefits(u.name),images:m.slice(0,3),primaryImage:m[0]?.url||null}}))}getDefaultBenefits(r){return{"Classic Fade":["Professional look","Easy to style","Versatile"],"Textured Crop":["Low maintenance","Trendy","Natural texture"],"Side Part":["Professional","Classic","Easy to maintain"],"Buzz Cut":["Ultra low maintenance","Clean look","Athletic"],Pompadour:["Stylish","Voluminous","Statement look"],Undercut:["Modern","Edgy","Customizable"],"Caesar Cut":["Classic style","Easy care","Timeless"],Quiff:["Trendy","Voluminous","Stylish"]}[r]||["Great style","Suits you well","Professional"]}}const N5=new j5;class w5{constructor(){this.isLoaded=!1,this.faceDetection=null}async initialize(){if(!this.isLoaded)try{typeof window<"u"&&!window.FaceDetection&&(await this.loadScript("https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4/face_detection.js"),await this.loadScript("https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3/camera_utils.js")),window.FaceDetection&&(this.faceDetection=new window.FaceDetection({locateFile:r=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_detection@0.4/${r}`}),this.faceDetection.setOptions({model:"short",minDetectionConfidence:.5}),this.isLoaded=!0,console.log(" Face Detection Service initialized"))}catch(r){console.error(" Failed to initialize Face Detection:",r),this.isLoaded=!1}}loadScript(r){return new Promise((l,i)=>{const c=document.createElement("script");c.src=r,c.onload=l,c.onerror=i,document.head.appendChild(c)})}async validateFaceInImage(r){console.log(" Starting face detection validation...");try{const l=await this.fileToImageElement(r);return this.isLoaded&&this.faceDetection?await this.detectFaceWithMediaPipe(l):await this.basicImageValidation(l)}catch(l){throw console.error(" Face detection error:",l),new Error("Failed to analyze image. Please try uploading a different photo.")}}fileToImageElement(r){return new Promise((l,i)=>{const c=new Image,x=URL.createObjectURL(r);c.onload=()=>{URL.revokeObjectURL(x),l(c)},c.onerror=()=>{URL.revokeObjectURL(x),i(new Error("Invalid image file"))},c.src=x})}async detectFaceWithMediaPipe(r){return new Promise((l,i)=>{this.faceDetection.onResults(c=>{if(console.log(" MediaPipe detection results:",c),c.detections&&c.detections.length>0){const x=c.detections[0].score;console.log(" Face detected with confidence:",x),l({hasFace:!0,confidence:x,faceCount:c.detections.length,method:"MediaPipe"})}else console.log(" No face detected by MediaPipe"),l({hasFace:!1,confidence:0,faceCount:0,method:"MediaPipe"})}),this.faceDetection.send({image:r}),setTimeout(()=>{i(new Error("Face detection timeout"))},1e4)})}async basicImageValidation(r){console.log(" Using basic image validation (fallback)");const l=r.naturalWidth,i=r.naturalHeight,c=l/i;console.log(" Image dimensions:",{width:l,height:i,aspectRatio:c});const x=l>=200&&i>=200,u=c>=.5&&c<=2,g=c>=.7&&c<=1.4,m=x&&(u||g);return console.log(" Basic validation results:",{isReasonableSize:x,isPortraitish:u,isSquareish:g,likelyHasFace:m}),{hasFace:m,confidence:m?.7:.3,faceCount:m?1:0,method:"Basic Validation",details:{dimensions:{width:l,height:i},aspectRatio:c,checks:{isReasonableSize:x,isPortraitish:u,isSquareish:g}}}}getValidationErrorMessage(r){return r.hasFace?null:{title:"No Face Detected",message:"Please upload a clear photo of your face for accurate analysis.",suggestions:["Ensure your face is clearly visible","Use good lighting","Face the camera directly","Remove sunglasses or hats","Try a different photo"]}}}const e0=new w5,C5=({searchQuery:n="",onImageSelect:r=null})=>{const[l,i]=v.useState(n),[c,x]=v.useState([]),[u,g]=v.useState(!1),[m,f]=v.useState(null),b="732e1b0a9174d4473",p="AIzaSyB_7NiOu4CCbZIFW3V_FAPG3t5Bb4i5jQQ";v.useEffect(()=>{n&&(i(n),y(n))},[n]);const y=async(j=l)=>{if(j.trim()){g(!0),f(null);try{const w=`https://www.googleapis.com/customsearch/v1?key=${p}&cx=${b}&q=${encodeURIComponent(j+" men haircut hairstyle")}&searchType=image&num=4&safe=active&imgType=photo&imgSize=medium`,D=await fetch(w);if(!D.ok)throw new Error(`Search failed: ${D.status}`);const C=await D.json();if(C.items&&C.items.length>0){const L=C.items.map((A,_)=>({id:_,url:A.link,thumbnail:A.image.thumbnailLink,title:A.title,source:A.displayLink,snippet:A.snippet}));x(L)}else x([]),f("No images found for this search term")}catch(w){console.error("Image search failed:",w),f("Failed to search for images. Please check your API configuration."),x([])}finally{g(!1)}}},N=j=>{r&&r(j)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(o0,{className:"w-5 h-5 text-[#FF8C42]"}),e.jsx("h3",{className:"text-white font-medium",children:"Haircut Image Search"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Jt,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",value:l,onChange:j=>i(j.target.value),onKeyPress:j=>j.key==="Enter"&&y(),placeholder:"Search for haircut styles...",className:"w-full pl-10 pr-4 py-3 bg-gray-800/50 border border-gray-600/30 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF8C42]/50 focus:border-[#FF8C42]/50 transition-colors"}),e.jsx("button",{onClick:()=>y(),disabled:u||!l.trim(),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("div",{className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${u||!l.trim()?"bg-gray-700/50 text-gray-500 cursor-not-allowed":"bg-[#FF8C42] hover:bg-[#FF7A2B] text-white cursor-pointer"}`,children:u?"Searching...":"Search"})})]}),u&&e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-[#FF8C42] border-t-transparent"}),e.jsx("span",{className:"text-gray-300 text-sm",children:"Searching for haircut images..."})]})}),m&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4",children:[e.jsx("p",{className:"text-red-400 text-sm",children:m}),!p]}),c.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Found ",c.length,' haircut images for "',l,'"']}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(j=>e.jsxs("div",{className:"group relative bg-gray-800/30 rounded-xl overflow-hidden border border-gray-600/30 hover:border-[#FF8C42]/50 transition-all duration-200 cursor-pointer",onClick:()=>N(j),children:[e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("img",{src:j.thumbnail,alt:j.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200",onError:w=>{w.target.parentElement.innerHTML=`
                        <div class="w-full h-full flex items-center justify-center bg-gray-700/50">
                          <div class="text-gray-400 text-xs text-center p-2">
                            <div class="w-8 h-8 mx-auto mb-2 opacity-50">
                              <svg fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
                              </svg>
                            </div>
                            Image unavailable
                          </div>
                        </div>
                      `}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-200"}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsx("div",{className:"bg-black/50 rounded-full p-1",children:e.jsx(dp,{className:"w-3 h-3 text-white"})})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-white text-xs font-medium truncate mb-1",children:j.title}),e.jsx("p",{className:"text-gray-400 text-xs truncate",children:j.source})]})]},j.id))})]}),!u&&!m&&c.length===0&&l&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 opacity-50",children:e.jsx(o0,{className:"w-full h-full text-gray-400"})}),e.jsxs("p",{className:"text-gray-400 text-sm",children:['No haircut images found for "',l,'"']}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:'Try different search terms like "fade", "undercut", or "pompadour"'})]}),e.jsx("div",{className:"text-center pt-4 border-t border-gray-700/30",children:e.jsx("p",{className:"text-gray-500 text-xs",children:"Powered by Google Custom Search API"})})]})},A5=({onNavigateToBooking:n})=>{const[r,l]=v.useState(0),[i,c]=v.useState(null),[x,u]=v.useState({faceShape:"",hairType:"",lifestyle:"",maintenance:""}),[g,m]=v.useState([]),[f,b]=v.useState(null),[p,y]=v.useState(!1),[N,j]=v.useState(null),[w,D]=v.useState(!1),[C,L]=v.useState(null),A=fe(J.services.services.getActiveServices);fe(J.services.barbers.getActiveBarbers),v.useEffect(()=>{e0.initialize().catch(T=>{console.warn("Face detection service initialization failed:",T)})},[]);const _=[{id:1,title:"Upload Your Photo",subtitle:"Let us analyze your face shape"},{id:2,title:"Tell Us About You",subtitle:"Help us understand your preferences"},{id:3,title:"Your Recommendations",subtitle:"Personalized haircut suggestions"},{id:4,title:"Browse Haircut Styles",subtitle:"Explore visual examples"},{id:5,title:"Book Your Appointment",subtitle:"Schedule with your preferred barber"}],O=[{id:"straight",name:"Straight",description:"Naturally straight hair"},{id:"wavy",name:"Wavy",description:"Slight waves and texture"},{id:"curly",name:"Curly",description:"Defined curls"},{id:"coily",name:"Coily",description:"Tight coils and kinks"}],U=[{id:"professional",name:"Professional",description:"Office/business environment"},{id:"casual",name:"Casual",description:"Relaxed, everyday style"},{id:"active",name:"Active",description:"Sports and fitness focused"},{id:"creative",name:"Creative",description:"Artistic and expressive"}],M=[{id:"low",name:"Low Maintenance",description:"2-3 months between cuts"},{id:"medium",name:"Medium Maintenance",description:"4-6 weeks between cuts"},{id:"high",name:"High Maintenance",description:"2-3 weeks between cuts"}],E=async()=>{y(!0),j(null);try{const H=(await N5.generatePersonalizedRecommendations(x,i)).map((oe,W)=>({...oe,image:`/img/haircut-${oe.name.toLowerCase().replace(/\s+/g,"-")}.jpg`,serviceId:A?.[W%A?.length]?._id||null}));m(H)}catch(T){console.error("AI recommendation failed:",T),j(T.message);const H=[{id:1,name:"Classic Fade",description:"A versatile cut that works well with most face shapes and lifestyles.",suitability:90,maintenance:"Medium",serviceId:A?.[0]?._id,benefits:["Professional look","Easy to style","Versatile"]},{id:2,name:"Textured Crop",description:"Modern and low-maintenance, perfect for busy lifestyles.",suitability:85,maintenance:"Low",serviceId:A?.[1]?._id,benefits:["Low maintenance","Trendy","Natural texture"]}];m(H)}finally{y(!1)}},S=async T=>{const H=T.target.files[0];if(H){L(null),D(!0);try{console.log(" Validating uploaded image for face detection...");const oe=await e0.validateFaceInImage(H);if(console.log(" Face validation result:",oe),!oe.hasFace){const le=e0.getValidationErrorMessage(oe);L(le),D(!1),T.target.value="";return}const W=new FileReader;W.onload=le=>{c(le.target.result),D(!1),console.log(" Image uploaded successfully with face detected")},W.readAsDataURL(H)}catch(oe){console.error(" Image validation error:",oe),L({title:"Validation Error",message:oe.message||"Failed to validate image. Please try again.",suggestions:["Try uploading a different photo","Ensure the image file is not corrupted"]}),D(!1),T.target.value=""}}},$=async()=>{console.log("handleNext called, currentStep:",r,"canProceed:",se()),console.log("userPreferences:",x),r<5&&(r===2&&await E(),l(r+1))},P=()=>{r>0&&l(r-1)},q=()=>e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-2xl flex items-center justify-center shadow-xl",children:e.jsx(zo,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white mb-1",children:"AI TipunoX Angeles Assistant"}),e.jsx("p",{className:"text-gray-400 text-sm px-4",children:"Your personal AI-powered style consultant"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 px-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/40 to-gray-700/40 rounded-lg p-3 border border-gray-600/30",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Fa,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("h3",{className:"text-white font-medium text-sm",children:"AI Analysis"})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Advanced head shape and hair analysis for perfect recommendations."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-800/40 to-gray-700/40 rounded-lg p-3 border border-gray-600/30",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(o0,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("h3",{className:"text-white font-medium text-sm",children:"Style Gallery"})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Browse curated haircut images and find inspiration."})]})]}),e.jsx("div",{className:"px-4 pt-2",children:e.jsxs("button",{onClick:()=>l(1),className:"w-full bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg shadow-[#FF8C42]/20 flex items-center justify-center space-x-3",children:[e.jsx(Fa,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Get Started"}),e.jsx(Er,{className:"w-4 h-4"})]})}),e.jsx("div",{className:"bg-gray-800/30 rounded-lg p-3 border border-gray-600/30 mx-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[#FF8C42] font-bold text-sm",children:"AI"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Powered"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[#FF8C42] font-bold text-sm",children:"5"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Steps"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[#FF8C42] font-bold text-sm",children:""}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Styles"})]})]})})]}),z=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-28 h-28 bg-gradient-to-br from-gray-800/50 to-gray-700/50 rounded-2xl flex items-center justify-center border border-gray-600/30 mb-3 shadow-lg",children:i?e.jsx("img",{src:i,alt:"Uploaded",className:"w-full h-full object-cover rounded-2xl"}):e.jsx(Ja,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed px-2",children:"Upload a clear photo to analyze your face shape and get personalized recommendations."}),w&&e.jsx("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(ei,{className:"w-4 h-4 animate-spin text-blue-400"}),e.jsx("span",{className:"text-blue-400 text-sm font-medium",children:"Analyzing image for face detection..."})]})}),C&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4 mt-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(i8,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-red-400 font-medium text-sm mb-1",children:C.title}),e.jsx("p",{className:"text-red-300 text-xs mb-2",children:C.message}),C.suggestions&&e.jsx("ul",{className:"text-red-300 text-xs space-y-1",children:C.suggestions.map((T,H)=>e.jsxs("li",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-red-400 rounded-full flex-shrink-0"}),e.jsx("span",{children:T})]},H))})]})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",id:"image-upload",disabled:w}),e.jsx("div",{className:`px-6 py-3 rounded-xl font-medium flex items-center justify-center space-x-2 transition-all duration-200 shadow-lg ${w?"bg-gray-600 cursor-not-allowed text-gray-300":"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] text-white cursor-pointer"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx(ei,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Validating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_r,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload Photo"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/60 to-[#444444]/60 p-4 rounded-xl border border-gray-600/30",children:[e.jsx("h4",{className:"text-white font-medium text-sm mb-3",children:"Photo Tips:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[#FF8C42] rounded-full"}),e.jsx("span",{children:"Good lighting"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[#FF8C42] rounded-full"}),e.jsx("span",{children:"Face camera directly"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[#FF8C42] rounded-full"}),e.jsx("span",{children:"Remove accessories"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-[#FF8C42] rounded-full"}),e.jsx("span",{children:"Clear view of face"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-2",children:[e.jsxs("button",{onClick:P,disabled:r===0,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${r===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsx("button",{onClick:$,disabled:!se()||r===5||r===2&&p,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[140px] ${se()&&r<5&&!(r===2&&p)?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] text-white shadow-lg shadow-[#FF8C42]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:r===2&&p?e.jsxs(e.Fragment,{children:[e.jsx(ei,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:r===5?"Complete":r===2?"Generate Recommendations":"Continue"}),r<5&&e.jsx(Er,{className:"w-4 h-4"})]})})]})]})]}),V=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-white font-medium text-base mb-1",children:"Tell us about your style"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Help us create the perfect recommendation for you"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Hair type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:O.map(T=>e.jsxs("button",{onClick:()=>u(H=>({...H,hairType:T.id})),className:`p-3 rounded-xl border transition-all duration-200 text-left ${x.hairType===T.id?"bg-gradient-to-r from-[#FF8C42]/20 to-[#FF7A2B]/20 border-[#FF8C42]/60 text-white shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 text-gray-300 hover:border-gray-500/50"}`,children:[e.jsx("div",{className:"font-medium text-sm",children:T.name}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:T.description})]},T.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Lifestyle"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:U.map(T=>e.jsxs("button",{onClick:()=>u(H=>({...H,lifestyle:T.id})),className:`p-3 rounded-xl border transition-all duration-200 text-left ${x.lifestyle===T.id?"bg-gradient-to-r from-[#FF8C42]/20 to-[#FF7A2B]/20 border-[#FF8C42]/60 text-white shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 text-gray-300 hover:border-gray-500/50"}`,children:[e.jsx("div",{className:"font-medium text-sm",children:T.name}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:T.description})]},T.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Maintenance preference"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:M.map(T=>e.jsxs("button",{onClick:()=>u(H=>({...H,maintenance:T.id})),className:`p-3 rounded-xl border transition-all duration-200 text-center ${x.maintenance===T.id?"bg-gradient-to-r from-[#FF8C42]/20 to-[#FF7A2B]/20 border-[#FF8C42]/60 text-white shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 text-gray-300 hover:border-gray-500/50"}`,children:[e.jsx("div",{className:"font-medium text-sm",children:T.name.replace(" Maintenance","")}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:T.description.split(" ")[0]})]},T.id))})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:P,disabled:r===0,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${r===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsx("button",{onClick:$,disabled:!se()||r===5||r===2&&p,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[140px] ${se()&&r<5&&!(r===2&&p)?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] text-white shadow-lg shadow-[#FF8C42]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:r===2&&p?e.jsxs(e.Fragment,{children:[e.jsx(ei,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:r===5?"Complete":r===2?"Generate Recommendations":"Continue"}),r<5&&e.jsx(Er,{className:"w-4 h-4"})]})})]})]}),Z=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx(zo,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("h3",{className:"text-white font-medium text-base",children:"AI Recommendations"}),e.jsx(Fa,{className:"w-4 h-4 text-[#FF8C42]"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Personalized suggestions based on your preferences"}),N&&e.jsx("p",{className:"text-yellow-400 text-xs mt-2 bg-yellow-400/10 px-3 py-2 rounded-lg border border-yellow-400/20",children:"AI service unavailable - showing fallback recommendations"})]}),p?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-[#FF8C42] border-t-transparent"}),e.jsx("span",{className:"text-gray-300 text-sm",children:"AI analyzing your preferences..."})]})}):e.jsx("div",{className:"space-y-3",children:g.map(T=>e.jsx("div",{className:`p-4 rounded-xl border transition-all duration-200 cursor-pointer ${f?.id===T.id?"bg-gradient-to-r from-[#FF8C42]/20 to-[#FF7A2B]/20 border-[#FF8C42]/60 shadow-lg":"bg-gradient-to-br from-gray-800/40 to-gray-700/40 border-gray-600/30 hover:border-gray-500/50"}`,onClick:()=>b(T),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"text-white font-medium text-sm",children:T.name}),!N&&e.jsx("div",{className:"bg-[#FF8C42]/20 px-1.5 py-0.5 rounded-full",children:e.jsx("span",{className:"text-[#FF8C42] text-xs font-medium",children:"AI"})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"w-3 h-3 text-[#FF8C42] fill-current"}),e.jsxs("span",{className:"text-[#FF8C42] font-medium text-xs",children:[T.suitability,"%"]})]})]}),T.images&&T.images.length>0&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:T.images.map((H,oe)=>e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:H.thumbnail||H.url,alt:`${T.name} style ${oe+1}`,className:"w-16 h-16 object-cover rounded-lg border border-gray-600/30",onError:W=>{W.target.style.display="none"}})},oe))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-3 leading-relaxed",children:T.description}),e.jsx("div",{className:"flex flex-wrap gap-1",children:T.benefits.slice(0,3).map((H,oe)=>e.jsx("span",{className:"bg-gray-700/40 text-gray-300 px-2 py-0.5 rounded-lg text-xs",children:H},oe))})]})]})},T.id))}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:P,disabled:r===0||p,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${r===0||p?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:$,disabled:!se()||r===5||p,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[100px] ${se()&&r<5&&!p?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] text-white shadow-lg shadow-[#FF8C42]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("span",{children:r===5?"Complete":"Continue"}),r<5&&e.jsx(Er,{className:"w-4 h-4"})]})]})]}),B=()=>{const T=f?f.name:"men haircut styles";return e.jsxs("div",{className:"space-y-4",children:[f&&e.jsxs("div",{className:"bg-gradient-to-r from-[#FF8C42]/10 to-[#FF7A2B]/10 p-4 rounded-xl border border-[#FF8C42]/30",children:[e.jsxs("h3",{className:"text-white font-medium text-sm mb-1",children:["Exploring: ",f.name]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Browse similar styles and get inspired"})]}),e.jsx(C5,{searchQuery:T,onImageSelect:H=>{console.log("Selected image:",H)}}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:P,disabled:r===0,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${r===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:$,disabled:r===5,className:`flex items-center justify-center space-x-2 px-6 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[100px] ${r<5?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] text-white shadow-lg shadow-[#FF8C42]/20":"bg-gray-700/30 text-gray-500 cursor-not-allowed"}`,children:[e.jsx("span",{children:"Continue"}),e.jsx(Er,{className:"w-4 h-4"})]})]})]})},k=()=>{const T=()=>{if(n&&f){const oe=A?.find(W=>W.name.toLowerCase().includes("haircut")||W.name.toLowerCase().includes("cut"))||A?.[0];n(oe)}},H=()=>{localStorage.setItem("savedRecommendation",JSON.stringify(f)),alert("Recommendation saved! You can book this style anytime from your dashboard.")};return e.jsxs("div",{className:"space-y-4",children:[f&&e.jsxs("div",{className:"bg-gradient-to-r from-[#FF8C42]/10 to-[#FF7A2B]/10 p-4 rounded-xl border border-[#FF8C42]/30",children:[e.jsxs("h3",{className:"text-white font-medium text-sm mb-1",children:["Perfect Choice: ",f.name]}),e.jsx("p",{className:"text-gray-400 text-xs",children:f.description})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[e.jsx(Qe,{className:"w-6 h-6 text-green-400"}),e.jsx("h3",{className:"text-white font-medium text-lg",children:"Ready to Transform!"})]}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Your personalized recommendation is ready. Choose how you'd like to proceed with your new look."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:T,className:"w-full bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] hover:from-[#FF7A2B] hover:to-[#FF6B1A] text-white px-6 py-4 rounded-xl font-medium transition-all duration-200 shadow-lg shadow-[#FF8C42]/20 flex items-center justify-center space-x-3",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base font-semibold",children:"Book Appointment Now"}),e.jsx(Er,{className:"w-5 h-5"})]}),e.jsxs("button",{onClick:H,className:"w-full bg-gray-700/50 hover:bg-gray-600/70 text-gray-200 px-6 py-4 rounded-xl font-medium transition-all duration-200 border border-gray-600/50 hover:border-gray-500/50 flex items-center justify-center space-x-3",children:[e.jsx(jt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-base font-semibold",children:"Save for Later"})]})]}),e.jsxs("div",{className:"bg-gray-800/30 rounded-xl p-4 border border-gray-600/30",children:[e.jsx("h4",{className:"text-white font-medium text-sm mb-3",children:"Why This Style Works for You:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Matches your ",x.hairType," hair type"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Suits your ",x.lifestyle," lifestyle"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[#FF8C42] rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:[x.maintenance," maintenance required"]})]}),f.suitability&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:[f.suitability,"% compatibility match"]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4",children:[e.jsxs("button",{onClick:P,disabled:r===1,className:`flex items-center justify-center space-x-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-200 text-sm min-w-[80px] ${r===0?"bg-gray-700/30 text-gray-500 cursor-not-allowed":"bg-gray-700/50 text-gray-200 hover:bg-gray-600/70 border border-gray-600/50"}`,children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-2.5 rounded-xl font-medium text-sm flex items-center space-x-2",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Complete"})]})]})]})},I=()=>{switch(r){case 0:return q();case 1:return z();case 2:return V();case 3:return Z();case 4:return B();case 5:return k();default:return q()}},se=()=>{switch(r){case 0:return!0;case 1:return i!==null;case 2:return x.hairType&&x.lifestyle&&x.maintenance;case 3:return f!==null;case 4:return!0;default:return!0}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(It,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("h1",{className:"text-white font-bold text-base",children:"AI Style Assistant"}),e.jsx(zo,{className:"w-4 h-4 text-[#FF8C42]"})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Personalized recommendations powered by AI"})]})]})})}),e.jsxs("div",{className:"px-4 py-3 bg-[#1A1A1A]/95 border-b border-[#333333]/50",children:[e.jsx("div",{className:"flex justify-center items-center mb-2",children:e.jsx("div",{className:"flex items-center space-x-2",children:_.map((T,H)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold transition-all duration-300 ${r>=T.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-md":"bg-[#2A2A2A] border border-[#444444] text-gray-500"}`,children:r>T.id?e.jsx(Qe,{className:"w-3 h-3"}):T.id})}),H<_.length-1&&e.jsx("div",{className:"w-6 mx-1",children:e.jsx("div",{className:`h-0.5 rounded-full transition-all duration-500 ${r>T.id?"bg-[#FF8C42]":"bg-[#444444]"}`})})]},T.id))})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-white font-medium text-sm",children:_[r-1]?.title}),e.jsx("p",{className:"text-gray-400 text-xs",children:_[r-1]?.subtitle})]})]}),e.jsx("div",{className:"flex-1 px-4 py-3 pb-3",children:I()})]})]})},E5=()=>{const{user:n,logout:r,loading:l}=Tt(),i=ys(),[c,x]=v.useState(!1),[u,g]=v.useState(!1),[m,f]=v.useState({username:"",email:"",nickname:"",mobile_number:"",birthday:"",preferences:{notifications:!0,emailUpdates:!0,smsReminders:!0}});v.useEffect(()=>{b()},[n]);const b=async()=>{try{n&&f({username:n.username||"",email:n.email||"",nickname:n.nickname||"",mobile_number:n.mobile_number||"",birthday:n.birthday||"",preferences:{notifications:!0,emailUpdates:!0,smsReminders:!0}})}catch(w){console.error("Error loading profile:",w)}},p=(w,D)=>{f(C=>({...C,[w]:D}))},y=async()=>{try{g(!0),console.log("Saving profile:",m),x(!1)}catch(w){console.error("Error saving profile:",w)}finally{g(!1)}},N=async()=>{try{await r(),i("/auth/login")}catch(w){console.error("Logout error:",w)}},j=()=>{sessionStorage.removeItem("onboarding_completed"),alert("Onboarding has been reset! You will see the welcome tour on your next visit to the dashboard.")};return l||!n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF8C42] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading profile..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6 pb-20",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx("button",{onClick:N,className:"px-3 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition-colors text-sm shadow-lg",children:"Logout"})}),e.jsx("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl shadow-lg border border-[#555555]/30 mb-6 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] px-6 py-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden mx-auto mb-3 bg-white/20",children:e.jsx("img",{src:n?.avatar||"/img/avatar_default.jpg",alt:m.nickname||m.username||"User",className:"w-full h-full object-cover"})}),e.jsx("h2",{className:"text-lg font-bold text-white mb-1",children:m.nickname||m.username||"User"}),e.jsx("p",{className:"text-white/80 text-sm",children:m.email}),e.jsx("div",{className:"mt-2 px-3 py-1 bg-white/20 rounded-full inline-block",children:e.jsx("span",{className:"text-white/90 text-xs font-medium",children:n?.role==="staff"?"Staff Member":"Customer"})})]})})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl shadow-lg border border-[#555555]/30 mb-4",children:[e.jsx("div",{className:"px-4 py-4 border-b border-[#555555]/30",children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Personal Information"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 inline mr-2"}),"Username"]}),c?e.jsx("input",{type:"text",value:m.username,onChange:w=>p("username",w.target.value),className:"w-full px-4 py-3 bg-[#2A2A2A] border border-[#555555] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"}):e.jsx("p",{className:"px-4 py-3 bg-[#2A2A2A] text-white rounded-xl",children:m.username})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:[e.jsx(Ft,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),c?e.jsx("input",{type:"email",value:m.email,onChange:w=>p("email",w.target.value),className:"w-full px-4 py-3 bg-[#2A2A2A] border border-[#555555] text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-[#FF8C42] focus:border-transparent"}):e.jsx("p",{className:"px-4 py-3 bg-[#2A2A2A] text-white rounded-xl",children:m.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#6B6B6B] mb-2",children:[e.jsx(Le,{className:"w-4 h-4 inline mr-2"}),"Nickname"]}),c?e.jsx("input",{type:"text",value:m.nickname,onChange:w=>p("nickname",w.target.value),placeholder:"Enter your preferred name",className:"w-full px-4 py-3 border border-[#E0E0E0] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#F68B24]"}):e.jsx("p",{className:"px-4 py-3 bg-[#F4F0E6] rounded-xl",style:{color:"#36454F"},children:m.nickname||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#6B6B6B] mb-2",children:[e.jsx(Is,{className:"w-4 h-4 inline mr-2"}),"Mobile Number"]}),c?e.jsx("input",{type:"tel",value:m.mobile_number,onChange:w=>p("mobile_number",w.target.value),className:"w-full px-4 py-3 border border-[#E0E0E0] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#F68B24]"}):e.jsx("p",{className:"px-4 py-3 bg-[#F4F0E6] rounded-xl",style:{color:"#36454F"},children:m.mobile_number})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-[#6B6B6B] mb-2",children:[e.jsx(Re,{className:"w-4 h-4 inline mr-2"}),"Birthday"]}),c?e.jsx("input",{type:"date",value:m.birthday,onChange:w=>p("birthday",w.target.value),className:"w-full px-4 py-3 border border-[#E0E0E0] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#F68B24]"}):e.jsx("p",{className:"px-4 py-3 bg-[#F4F0E6] rounded-xl",style:{color:"#36454F"},children:m.birthday?new Date(m.birthday).toLocaleDateString("en-PH"):"Not set"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-[#E0E0E0] mb-6",children:[e.jsx("div",{className:"px-4 py-4 border-b border-[#E0E0E0]",children:e.jsx("h3",{className:"text-lg font-semibold",style:{color:"#36454F"},children:"Account Summary"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-[#F4F0E6] rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"#F68B24"},children:"0"}),e.jsx("div",{className:"text-sm",style:{color:"#8B8B8B"},children:"Total Bookings"})]}),e.jsxs("div",{className:"text-center p-4 bg-[#F4F0E6] rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold",style:{color:"#F68B24"},children:"0"}),e.jsx("div",{className:"text-sm",style:{color:"#8B8B8B"},children:"Vouchers"})]})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-[#F68B24] to-[#E67A1F] rounded-xl",children:[e.jsx("div",{className:"text-white text-sm font-medium",children:"Member since"}),e.jsx("div",{className:"text-white text-lg font-bold",children:new Date().toLocaleDateString("en-PH",{month:"long",year:"numeric"})})]}),e.jsxs("button",{onClick:j,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-colors shadow-lg",children:[e.jsx(an,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset Welcome Tour"})]})]})]}),!c&&e.jsxs("button",{onClick:()=>x(!0),className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-[#F68B24] text-white rounded-xl hover:bg-[#E67A1F] transition-colors shadow-lg mb-4",children:[e.jsx(wj,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Profile"})]}),c&&e.jsxs("div",{className:"flex space-x-3 mb-4",children:[e.jsx("button",{onClick:()=>{x(!1),b()},className:"flex-1 px-4 py-3 border border-[#E0E0E0] rounded-xl hover:bg-[#F4F0E6] transition-colors",style:{color:"#8B8B8B"},children:"Cancel"}),e.jsxs("button",{onClick:y,disabled:u,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-[#F68B24] text-white rounded-xl hover:bg-[#E67A1F] transition-colors disabled:opacity-50",children:[e.jsx(na,{className:"w-4 h-4"}),e.jsx("span",{children:u?"Saving...":"Save Changes"})]})]})]})]})},Eg=()=>{const{user:n,isAuthenticated:r}=Tt(),l=Vs(),[i,c]=v.useState("home"),[x,u]=v.useState(!1);if(!(l.pathname==="/customer/dashboard"&&!l.pathname.includes("/booking")&&!l.pathname.includes("/client")))return null;v.useEffect(()=>{r&&n&&(sessionStorage.getItem("onboarding_completed")||u(!0))},[r,n]);const m=()=>{u(!1)};fe(J.services.services.getActiveServices),fe(J.services.barbers.getActiveBarbers);const f=n?.id?fe(J.services.bookings.getBookingsByCustomer,{customerId:n.id}):void 0,b=n?.id?fe(J.services.vouchers.getVouchersByUser,{userId:n.id}):void 0,p=[{id:"home",label:"Home",icon:ej},{id:"shop",label:"Shop",icon:Ij},{id:"bookings",label:"Bookings",icon:J1},{id:"vouchers",label:"Vouchers",icon:kt},{id:"ai-assistant",label:"TipunoX Angeles AI",icon:zo}],N=(()=>{const D=f?f.length:0,C=b?b.filter(L=>L.status==="assigned"&&!L.isExpired).length:0;return{totalBookings:D,activeVouchers:C}})(),j=[{label:"Total Bookings",value:N.totalBookings.toString(),icon:jt},{label:"Active Vouchers",value:N.activeVouchers.toString(),icon:kt}],w=()=>{switch(i){case"shop":return e.jsx(g5,{onBack:()=>c("home")});case"booking":return e.jsx(r5,{onBack:()=>c("home")});case"bookings":return e.jsx(u5,{onBack:()=>c("home")});case"vouchers":return e.jsx(c5,{onBack:()=>c("home")});case"ai-assistant":return e.jsx(A5,{onNavigateToBooking:D=>{c("booking"),D&&sessionStorage.setItem("preSelectedService",JSON.stringify(D))}});case"profile":return e.jsx(E5,{});case"loyalty":return e.jsx(d5,{onBack:()=>c("home")});default:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-2xl mx-4 shadow-2xl",children:[e.jsxs("div",{className:"h-56 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${k0})`,filter:"brightness(0.4) contrast(1.2) saturate(1.1)"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#FF8C42]/30 via-transparent to-[#1A1A1A]/80"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1A1A1A]/70 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-[#FF8C42] rounded-full animate-pulse"}),e.jsx("div",{className:"absolute top-12 right-8 w-1 h-1 bg-white rounded-full animate-ping"}),e.jsx("div",{className:"absolute bottom-16 left-8 w-1.5 h-1.5 bg-[#FF8C42]/70 rounded-full animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-8 right-4 w-1 h-1 bg-white rounded-full animate-ping",style:{animationDelay:"2s"}})]})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col justify-center items-center text-center px-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-light text-white drop-shadow-2xl tracking-wider",children:[e.jsx("span",{className:"font-thin",children:"TipunoX Angeles"}),e.jsx("span",{className:"font-extralight text-[#FF8C42] ml-2",children:"BARBERSHOP"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-px bg-gradient-to-r from-transparent via-[#FF8C42] to-transparent"})}),e.jsx("p",{className:"text-white/90 font-light text-sm tracking-widest uppercase",children:"Premium Grooming Experience"}),e.jsx("p",{className:"text-white/70 font-light text-xs mt-2",children:"Welcome to your personal grooming dashboard"})]})})]}),e.jsx("div",{className:"px-4 -mt-6 relative z-10",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:j.map(D=>{const C=D.icon;return e.jsx("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl p-4 shadow-lg border border-[#555555]/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center mx-auto mb-2 shadow-lg",children:e.jsx(C,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-2xl font-bold text-white",children:D.value}),e.jsx("div",{className:"text-sm font-medium text-gray-400",children:D.label})]})},D.label)})})}),e.jsx("div",{className:"px-4 space-y-4",children:e.jsx("button",{onClick:()=>c("booking"),className:"w-full p-6 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/20 flex items-center justify-center",children:e.jsx(Re,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Book Your Service"}),e.jsx("p",{className:"text-white/80",children:"Schedule your next appointment"})]})]})})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl mx-4 rounded-xl p-4 shadow-sm border border-[#555555]/30",children:[e.jsx("h3",{className:"text-sm font-bold mb-3 text-center text-white",children:"Shop Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center",children:e.jsx(fi,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-300",children:"123 Main Street, Quezon City"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center",children:e.jsx(Is,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-300",children:"+63 912 345 6789"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center",children:e.jsx(jt,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-xs font-medium text-gray-300",children:"9:00 AM - 8:00 PM (Mon-Sat)"})]})]})]})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[x&&e.jsx(p5,{onComplete:m}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.3)"}})]}),!["shop","booking","vouchers","ai-assistant","loyalty","bookings"].includes(i)&&e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex justify-between items-center py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center shadow-lg",children:e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TipunoX Angeles Barbershop Logo",className:"w-6 h-6 object-contain"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h1",{className:"text-sm font-bold text-white",children:"TipunoX Angeles Barbershop"}),e.jsx("div",{className:"bg-[#FF8C42]/20 backdrop-blur-sm rounded-full px-1.5 py-0.5 border border-[#FF8C42]/30",children:e.jsx("span",{className:"text-xs font-semibold text-[#FF8C42]",children:"v2.0.0"})})]}),e.jsx("p",{className:"text-xs font-medium text-[#FF8C42]",children:"Dashboard"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-medium text-white",children:"Welcome"}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date().toLocaleDateString()})]}),e.jsx("button",{onClick:()=>c("profile"),className:"w-8 h-8 rounded-full overflow-hidden ring-1 ring-white/10 hover:ring-white/20 transition-colors",children:e.jsx("img",{src:n&&n.avatar?n.avatar:"/img/avatar_default.jpg",alt:n?.username||"Profile",className:"w-full h-full object-cover"})})]})]})})}),e.jsx("div",{className:"relative z-10 max-w-md mx-auto pb-20",children:w()}),!x&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-gradient-to-t from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl shadow-2xl border-t border-[#444444]/30",children:e.jsx("div",{className:"max-w-md mx-auto px-3",children:e.jsx("div",{className:"grid grid-cols-5 py-3",children:p.map(D=>{const C=D.icon,L=i===D.id;return e.jsxs("button",{onClick:()=>c(D.id),className:`flex flex-col items-center justify-center py-2 px-1 rounded-2xl transition-all duration-300 relative ${L?"bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-400 hover:text-gray-300"}`,children:[L&&e.jsx("div",{className:"absolute -top-1 w-1 h-1 rounded-full bg-white/60"}),e.jsx("div",{className:`p-2 rounded-xl mb-1 transition-all duration-300 ${L?"bg-white/20 scale-110":"bg-transparent"}`,children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-medium tracking-wide",children:D.label})]},D.id)})})})})]})};function F5({onBranchSelect:n,selectedBranchId:r}){const l=fe(J.services.branches.getActiveBranches),i=c=>{n(c)};return l?l.length===0?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"text-gray-500",children:"No branches available"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Select a Branch"}),e.jsx("p",{className:"text-gray-600",children:"Choose the branch where you'd like to book your appointment"})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:l.map(c=>e.jsx(xa,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg ${r===c._id?"ring-2 ring-blue-500 shadow-lg":"hover:shadow-md"}`,onClick:()=>i(c),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:c.name}),e.jsx("span",{className:"text-sm font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded",children:c.branch_code})]}),r===c._id&&e.jsx("div",{className:"text-blue-500",children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsxs("svg",{className:"w-4 h-4 mt-0.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{children:c.address})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{children:c.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.jsx("span",{children:c.email})]})]}),r===c._id&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center text-blue-600 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Selected Branch"]})})]})},c._id))})]}):e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"text-gray-500",children:"Loading branches..."})})}function B5(){const[n,r]=v.useState(null),[l,i]=v.useState(null),[c,x]=v.useState(""),[u,g]=v.useState(""),[m,f]=v.useState(null),[b,p]=v.useState(""),[y,N]=v.useState(null),[j,w]=v.useState(""),D=ys(),{user:C,isAuthenticated:L}=Tt(),A=n?fe(J.services.services.getActiveServicesByBranch,{branch_id:n._id}):void 0,_=n?fe(J.services.barbers.getBarbersByBranch,{branch_id:n._id}):void 0,O=Ee(J.services.bookings.createBooking),U=n&&(A===void 0||_===void 0),M=["09:00","09:30","10:00","10:30","11:00","11:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00"];v.useEffect(()=>{if(!L){D("/auth/login");return}},[L,D]);const E=z=>`${parseFloat(z).toFixed(2)}`,S=z=>{const[V,Z]=z.split(":"),B=parseInt(V),k=B>=12?"PM":"AM";return`${B===0?12:B>12?B-12:B}:${Z} ${k}`},$=async z=>{try{const V=await Ds.toDataURL(z,{width:200,margin:2,color:{dark:"#36454F",light:"#FFFFFF"}});w(V)}catch(V){console.error("Error generating QR code:",V)}},P=async()=>{if(!n||!l||!c||!u){p("Please select branch, service, date, and time");return}setLoading(!0),p("");try{const z=u.includes(":")?`${u}:00`:u,V=await O({customer:C.id,branch_id:n._id,service:l._id,barber:m?m._id:void 0,date:c,time:z,status:"pending"});N(V),V.booking_code&&await $(V.booking_code)}catch(z){p("An unexpected error occurred. Please try again."),console.error("Booking error:",z)}finally{setLoading(!1)}},q=()=>{N(null),w(""),r(null),i(null),x(""),g(""),f(null),p("")};return U&&!A.length?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF8C42] mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading booking options..."})]})}):y?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A]",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsx("header",{className:"bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30 shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"px-4 py-4 flex items-center",children:e.jsx("h1",{className:"text-xl font-bold text-white",children:"Booking Confirmed"})})}),e.jsx("div",{className:"relative z-10 px-4 py-6 space-y-6",children:e.jsxs(xa,{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl border-2 border-green-500/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl text-green-400",children:""})}),e.jsx("h2",{className:"text-xl font-bold text-green-400 mb-2",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Your appointment has been successfully booked"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Booking Code:"}),e.jsx("span",{className:"font-bold text-[#FF8C42]",children:y.booking_code})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Branch:"}),e.jsx("span",{className:"text-white",children:n.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Service:"}),e.jsx("span",{className:"text-white",children:l.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Date:"}),e.jsx("span",{className:"text-white",children:c})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Time:"}),e.jsx("span",{className:"text-white",children:S(u)})]}),m&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Barber:"}),e.jsx("span",{className:"text-white",children:m.full_name})]}),e.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t border-[#555555]",children:[e.jsx("span",{className:"text-gray-300",children:"Total:"}),e.jsx("span",{className:"text-[#FF8C42]",children:E(l.price)})]})]}),j&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3 text-white",children:"QR Code"}),e.jsx("div",{className:"bg-white p-4 rounded-xl inline-block",children:e.jsx("img",{src:j,alt:"Booking QR Code",className:"mx-auto"})}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Show this QR code at the barbershop"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Zt,{onClick:()=>D("/customer/dashboard"),className:"w-full bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors",children:"Go to Dashboard"}),e.jsx(Zt,{onClick:q,className:"w-full bg-[#444444] text-gray-300 border border-[#555555] hover:bg-[#555555] transition-colors",children:"Book Another Appointment"})]})]})})]}):e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#F4F0E6"},children:[e.jsx("header",{style:{backgroundColor:"#36454F"},className:"shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"px-4 py-4 flex items-center",children:[e.jsx(ps,{to:"/customer/dashboard",className:"mr-4",children:e.jsx("span",{className:"text-xl",style:{color:"#F4F0E6"},children:""})}),e.jsx("h1",{className:"text-xl font-bold",style:{color:"#F4F0E6"},children:"Book Appointment"})]})}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[b&&e.jsx(xa,{style:{backgroundColor:"#FEF2F2",border:"1px solid #FCA5A5"},children:e.jsx("p",{className:"text-sm text-red-600",children:b})}),!n&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"#36454F"},children:"1. Choose Branch"}),e.jsx(F5,{onBranchSelect:r,selectedBranchId:n?._id})]}),n&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"#36454F"},children:"2. Choose Service"}),e.jsx("button",{onClick:()=>r(null),className:"text-sm px-3 py-1 rounded border",style:{color:"#F68B24",borderColor:"#F68B24"},children:"Change Branch"})]}),e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:n.name})," - ",n.address]})}),!A||A.length===0?e.jsx(xa,{style:{backgroundColor:"white",border:"1px solid #E0E0E0"},children:e.jsx("p",{className:"text-center text-gray-500 py-4",children:A===void 0?"Loading services...":"No services available at this branch"})}):e.jsx("div",{className:"grid gap-3",children:A.map(z=>e.jsxs(xa,{className:"cursor-pointer transition-all",style:{backgroundColor:"white",border:l?.id===z.id?"2px solid #F68B24":"1px solid #E0E0E0"},onClick:()=>i(z),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",style:{color:"#36454F"},children:z.name}),e.jsx("p",{className:"text-sm mt-1",style:{color:"#8B8B8B"},children:z.description}),e.jsxs("p",{className:"text-sm mt-2",style:{color:"#8B8B8B"},children:[z.duration_minutes," minutes"]})]}),e.jsx("div",{className:"text-right ml-4",children:e.jsx("p",{className:"font-bold text-lg",style:{color:"#F68B24"},children:E(z.price)})})]}),l?.id===z.id&&e.jsx("div",{className:"mt-3 pt-3",style:{borderTop:"1px solid #F68B24"},children:e.jsx("span",{className:"text-sm font-medium",style:{color:"#F68B24"},children:" Selected"})})]},z.id))})]}),n&&l&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"#36454F"},children:"3. Choose Date"}),e.jsx(xa,{style:{backgroundColor:"white",border:"1px solid #E0E0E0"},children:e.jsx("input",{type:"date",value:c,onChange:z=>x(z.target.value),min:new Date().toISOString().split("T")[0],className:"w-full p-3 border-2 rounded-lg focus:outline-none",style:{borderColor:"#E0E0E0"},onFocus:z=>z.target.style.borderColor="#F68B24",onBlur:z=>z.target.style.borderColor="#E0E0E0"})})]}),n&&l&&c&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"#36454F"},children:"4. Choose Time"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:M.map(z=>e.jsx("button",{onClick:()=>g(z),className:"p-3 rounded-lg border-2 text-sm font-medium transition-colors",style:{backgroundColor:u===z?"#F68B24":"white",borderColor:u===z?"#F68B24":"#E0E0E0",color:u===z?"white":"#36454F"},onMouseEnter:V=>{u!==z&&(V.target.style.borderColor="#F68B24")},onMouseLeave:V=>{u!==z&&(V.target.style.borderColor="#E0E0E0")},children:S(z)},z))})]}),n&&l&&c&&u&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",style:{color:"#36454F"},children:"5. Choose Barber (Optional)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>f(null),className:"w-full p-4 rounded-lg border-2 text-left transition-colors",style:{backgroundColor:m===null?"rgba(246, 139, 36, 0.1)":"white",borderColor:m===null?"#F68B24":"#E0E0E0"},onMouseEnter:z=>{m!==null&&(z.target.style.borderColor="#F68B24")},onMouseLeave:z=>{m!==null&&(z.target.style.borderColor="#E0E0E0")},children:[e.jsx("span",{className:"font-medium",style:{color:"#36454F"},children:"No preference"}),e.jsx("p",{className:"text-sm",style:{color:"#8B8B8B"},children:"Any available barber"})]}),_&&_.length>0?_.map(z=>e.jsxs("button",{onClick:()=>f(z),className:"w-full p-4 rounded-lg border-2 text-left transition-colors",style:{backgroundColor:m?._id===z._id?"rgba(246, 139, 36, 0.1)":"white",borderColor:m?._id===z._id?"#F68B24":"#E0E0E0"},onMouseEnter:V=>{m?._id!==z._id&&(V.target.style.borderColor="#F68B24")},onMouseLeave:V=>{m?._id!==z._id&&(V.target.style.borderColor="#E0E0E0")},children:[e.jsx("span",{className:"font-medium",style:{color:"#36454F"},children:z.full_name}),e.jsx("p",{className:"text-sm",style:{color:"#8B8B8B"},children:"Professional barber"})]},z._id)):e.jsx(xa,{style:{backgroundColor:"white",border:"1px solid #E0E0E0"},children:e.jsx("p",{className:"text-center text-gray-500 py-4",children:_===void 0?"Loading barbers...":"No barbers available at this branch"})})]})]}),n&&l&&c&&u&&!y&&e.jsx("div",{className:"mt-6",children:e.jsx(Zt,{onClick:P,disabled:U,className:"w-full transition-colors",style:{backgroundColor:U?"#8B8B8B":"#F68B24",color:"white",cursor:U?"not-allowed":"pointer"},onMouseEnter:z=>{U||(z.target.style.backgroundColor="#E67E22")},onMouseLeave:z=>{U||(z.target.style.backgroundColor="#F68B24")},children:U?"Creating Booking...":"Confirm Booking"})})]}),e.jsx("div",{className:"h-8"})]})}const k5=()=>{const{user:n}=Tt(),[r,l]=v.useState(new Date().toISOString().split("T")[0]),[i,c]=v.useState("all"),[x,u]=v.useState(""),[g,m]=v.useState(null),[f,b]=v.useState(!1),p=n?.branch_id?fe(J.services.barbers.getBarbersByBranch,{branch_id:n.branch_id}):fe(J.services.barbers.getAllBarbers),y=p?.find(E=>E.user===n?._id),N=n?.branch_id?fe(J.services.services.getServicesByBranch,{branch_id:n.branch_id}):fe(J.services.services.getAllServices),j=Ee(J.services.barbers.createBarberProfile);ma.useEffect(()=>{n?.role==="barber"&&p&&!y&&n._id&&n.branch_id&&j({userId:n._id,branch_id:n.branch_id}).catch(E=>{console.error("Failed to create barber profile:",E)})},[n,p,y,j]);const C=((n?.branch_id?fe(J.services.bookings.getBookingsByBranch,{branch_id:n.branch_id}):fe(J.services.bookings.getAllBookings))?.filter(E=>E.barber===y?._id)||[]).filter(E=>{const S=E.date===r,$=i==="all"||E.status===i,P=x===""||E.customer_name?.toLowerCase().includes(x.toLowerCase())||E.service_name?.toLowerCase().includes(x.toLowerCase());return S&&$&&P}),L=Ee(J.services.bookings.updateBooking),A=async(E,S)=>{try{await L({id:E,status:S}),window.location.reload()}catch($){console.error("Failed to update booking status:",$),alert("Failed to update booking status")}},_=E=>{m(E)},O=async()=>{if(g){b(!0);try{if(!N?.find(S=>S._id===g.service)){alert("Service not found. Cannot complete booking.");return}await L({id:g._id,status:"completed"}),m(null),window.location.reload()}catch(E){console.error("Failed to complete booking:",E),alert("Failed to complete booking. Please try again.")}finally{b(!1)}}},U=E=>{switch(E){case"confirmed":return"text-green-400 bg-green-500/10 border border-green-500/20";case"completed":return"text-blue-400 bg-blue-500/10 border border-blue-500/20";case"cancelled":return"text-red-400 bg-red-500/10 border border-red-500/20";case"pending":return"text-yellow-400 bg-yellow-500/10 border border-yellow-500/20";default:return"text-gray-400 bg-gray-500/10 border border-gray-500/20"}},M=E=>{switch(E){case"confirmed":return e.jsx(Qe,{className:"w-3 h-3"});case"completed":return e.jsx(Qe,{className:"w-3 h-3"});case"cancelled":return e.jsx(Pt,{className:"w-3 h-3"});case"pending":return e.jsx(at,{className:"w-3 h-3"});default:return e.jsx(jt,{className:"w-3 h-3"})}};return y?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] pb-20 md:pb-0",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"})]}),e.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#1A1A1A]/95 to-[#2A2A2A]/95 backdrop-blur-xl border-b border-[#444444]/30 sticky top-0",children:e.jsx("div",{className:"px-4 py-2.5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-white",children:"Appointments"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Manage bookings"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400",children:r===new Date().toISOString().split("T")[0]?"Today":"Selected"}),e.jsx("div",{className:"text-sm font-semibold text-[#FF8C42]",children:C.length})]})]})})}),e.jsxs("div",{className:"relative z-10 px-4 md:max-w-7xl md:mx-auto md:px-6 lg:px-8 py-4 md:py-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg shadow-md border border-[#444444]/30 p-4 mb-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","confirmed","completed","cancelled"].map(E=>e.jsx("button",{onClick:()=>c(E),className:`px-3 py-2 rounded-lg text-xs font-medium transition-all duration-200 active:scale-95 flex-shrink-0 ${i===E?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-md":"bg-[#1A1A1A] border border-[#444444] text-gray-300 hover:bg-[#333333] hover:border-[#555555]"}`,children:E==="all"?"All":E.charAt(0).toUpperCase()+E.slice(1)},E))})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Re,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Date"})]}),e.jsx("input",{type:"date",value:r,onChange:E=>l(E.target.value),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42] text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Jt,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("label",{className:"text-sm font-semibold text-gray-300",children:"Search"})]}),e.jsx("input",{type:"text",placeholder:"Customer or service...",value:x,onChange:E=>u(E.target.value),className:"w-full px-3 py-2 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42] text-sm"})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:C.length===0?e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg shadow-md border border-[#444444]/30 p-6 text-center",children:[e.jsx(Re,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm font-semibold text-white mb-2",children:"No Appointments Found"}),e.jsx("p",{className:"text-xs text-gray-400",children:i==="all"?"No appointments scheduled for this date.":`No ${i} appointments for this date.`})]}):C.map(E=>e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg shadow-md border border-[#444444]/30 p-3 active:scale-[0.98] transition-all duration-200 hover:border-[#FF8C42]/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:`px-2 py-0.5 rounded-full border text-xs font-medium flex items-center space-x-1 ${U(E.status)}`,children:[M(E.status),e.jsx("span",{className:"capitalize text-xs",children:E.status})]}),e.jsx("span",{className:"text-gray-400 text-xs font-medium",children:E.time})]}),e.jsx("h3",{className:"font-bold text-white text-sm truncate mb-1",children:E.service_name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-400 text-xs min-w-0 flex-1",children:[e.jsx(Le,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:E.customer_name})]}),e.jsxs("span",{className:"font-bold text-[#FF8C42] text-sm ml-2 flex-shrink-0",children:["",E.price]})]}),E.customer_phone&&e.jsxs("div",{className:"flex items-center text-gray-500 text-xs mt-1",children:[e.jsx(Is,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:E.customer_phone})]}),E.notes&&e.jsx("div",{className:"mt-2 p-2 bg-[#1A1A1A]/50 rounded-md border-l-2 border-[#FF8C42]/50",children:e.jsxs("p",{className:"text-xs text-gray-300 truncate",children:[" ",E.notes]})})]}),e.jsxs("div",{className:"flex flex-col space-y-1 flex-shrink-0",children:[E.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>A(E._id,"confirmed"),className:"px-2 py-1.5 bg-green-600 text-white rounded text-xs font-medium active:scale-95 transition-all hover:bg-green-700 min-w-[60px]",children:" Confirm"}),e.jsx("button",{onClick:()=>A(E._id,"cancelled"),className:"px-2 py-1.5 bg-red-600 text-white rounded text-xs font-medium active:scale-95 transition-all hover:bg-red-700 min-w-[60px]",children:" Cancel"})]}),E.status==="confirmed"&&e.jsx("button",{onClick:()=>_(E),className:"px-2 py-1.5 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded text-xs font-medium active:scale-95 transition-all hover:from-[#FF7A2B] hover:to-[#FF6B1A] min-w-[60px]",children:" Complete"}),E.status==="completed"&&e.jsx("div",{className:"px-2 py-1.5 bg-green-600/20 border border-green-500/30 rounded text-xs text-green-400 font-medium text-center min-w-[60px]",children:" Done"})]})]})},E._id))})]}),g&&e.jsx(D5,{booking:g,onConfirm:O,onClose:()=>m(null),loading:f})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(at,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Barber Profile Not Found"}),e.jsx("p",{className:"text-gray-400",children:"Please contact admin to set up your barber profile."})]})})},D5=({booking:n,onConfirm:r,onClose:l,loading:i})=>n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full shadow-xl border border-gray-200",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Qe,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:"Complete Booking?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Are you sure you want to mark this booking as completed? This will finalize the service and update customer records."})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 text-left mb-6",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Service:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n.service_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Customer:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n.customer_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n.date})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Time:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n.time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Price:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["",n.price]})]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,disabled:i,className:"flex-1 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:r,disabled:i,className:"flex-1 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:i?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Completing..."})]}):"Complete Booking"})]})]})})}):null,S5=()=>{const{user:n,logout:r}=Tt(),[l,i]=v.useState(!1),[c,x]=v.useState({full_name:"",email:"",phone:"",experience:"",specialties:[],bio:"",avatar:""}),[u,g]=v.useState(""),m=fe(J.services.barbers.getAllBarbers),f=m?.find(A=>A.user===n?._id),b=Ee(J.services.auth.updateUserProfile),p=Ee(J.services.barbers.createBarberProfile);v.useEffect(()=>{n?.role==="barber"&&m&&!f&&n._id&&p({userId:n._id}).catch(A=>{console.error("Failed to create barber profile:",A)})},[n,m,f,p]),v.useEffect(()=>{f&&n&&x({full_name:f.full_name||"",email:f.email||n.email||"",phone:f.phone||n.mobile_number||"",experience:f.experience||"",specialties:f.specialties||[],bio:n.bio||"",avatar:n.avatar||""})},[f,n]);const y=(A,_)=>{x(O=>({...O,[A]:_}))},N=()=>{u.trim()&&!c.specialties.includes(u.trim())&&(x(A=>({...A,specialties:[...A.specialties,u.trim()]})),g(""))},j=A=>{x(_=>({..._,specialties:_.specialties.filter(O=>O!==A)}))},w=async()=>{try{const A=localStorage.getItem("sessionToken");A&&await b({sessionToken:A,bio:c.bio,avatar:c.avatar}),i(!1),alert("Profile updated successfully!")}catch(A){console.error("Failed to update profile:",A),alert("Failed to update profile. Please try again.")}},D=()=>{f&&n&&x({full_name:f.full_name||"",email:f.email||n.email||"",phone:f.phone||n.mobile_number||"",experience:f.experience||"",specialties:f.specialties||[],bio:n.bio||"",avatar:n.avatar||""}),i(!1)},C=A=>A.split(" ").map(_=>_.charAt(0)).join("").toUpperCase().slice(0,2),L=()=>{window.confirm("Are you sure you want to logout?")&&r()};return f?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] pb-20 md:pb-0",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"max-w-md mx-auto px-4",children:e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center shadow-lg",children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h1",{className:"text-sm font-bold text-white",children:"My Profile"}),e.jsx("div",{className:"bg-[#FF8C42]/20 backdrop-blur-sm rounded-full px-1.5 py-0.5 border border-[#FF8C42]/30",children:e.jsx("span",{className:"text-xs font-semibold text-[#FF8C42]",children:"Barber"})})]}),e.jsx("p",{className:"text-xs font-medium text-[#FF8C42]",children:"Professional Dashboard"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:w,className:"p-2 text-green-400 rounded-xl hover:bg-green-500/10 transition-all duration-200",children:e.jsx(na,{className:"w-4 h-4"})}),e.jsx("button",{onClick:D,className:"p-2 text-gray-400 rounded-xl hover:bg-white/10 transition-all duration-200",children:e.jsx(rt,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(!0),className:"p-2 text-white rounded-xl hover:bg-white/10 transition-all duration-200",children:e.jsx(jj,{className:"w-4 h-4"})}),e.jsx("button",{onClick:L,className:"p-2 text-red-400 rounded-xl hover:bg-red-500/10 transition-all duration-200",children:e.jsx(ac,{className:"w-4 h-4"})})]})})]})})}),e.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-4 py-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl p-5 border border-[#555555]/30 shadow-lg mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[c.avatar?e.jsx("img",{src:c.avatar,alt:"Profile",className:"w-16 h-16 rounded-xl object-cover border-2 border-[#FF8C42]/50 shadow-lg"}):e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white text-lg font-bold",children:C(c.full_name||n?.username||"U")})}),l&&e.jsx("button",{className:"absolute -bottom-1 -right-1 p-1.5 bg-[#FF8C42] text-white rounded-lg hover:bg-[#E67A1A] transition-colors shadow-lg",children:e.jsx(Ja,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex-1",children:[l?e.jsx("input",{type:"text",value:c.full_name,onChange:A=>y("full_name",A.target.value),className:"text-lg font-bold text-white bg-transparent border-b border-[#FF8C42]/50 focus:outline-none focus:border-[#FF8C42] mb-2 w-full",placeholder:"Full Name"}):e.jsx("h2",{className:"text-lg font-bold text-white mb-1",children:f.full_name}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-400 mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"w-3 h-3 text-yellow-400"}),e.jsxs("span",{children:[f.rating,"/5"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Vn,{className:"w-3 h-3 text-[#FF8C42]"}),e.jsxs("span",{children:[f.totalBookings," bookings"]})]})]}),l?e.jsx("textarea",{value:c.bio,onChange:A=>y("bio",A.target.value),className:"w-full p-2 bg-[#2A2A2A] border border-[#555555] rounded-lg focus:ring-1 focus:ring-[#FF8C42] focus:border-[#FF8C42] resize-none text-white text-sm",rows:"2",placeholder:"Tell customers about yourself..."}):e.jsx("p",{className:"text-gray-400 text-sm",children:n?.bio||"No bio available"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl p-4 border border-[#555555]/30 shadow-lg mb-4",children:[e.jsxs("h3",{className:"text-base font-bold text-white mb-3 flex items-center",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Email Address"}),l?e.jsx("input",{type:"email",value:c.email,onChange:A=>y("email",A.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#555555] rounded-lg focus:ring-1 focus:ring-[#FF8C42] focus:border-[#FF8C42] text-white text-sm"}):e.jsx("p",{className:"px-3 py-2 bg-[#2A2A2A]/50 rounded-lg text-white text-sm",children:f.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Phone Number"}),l?e.jsx("input",{type:"tel",value:c.phone,onChange:A=>y("phone",A.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#555555] rounded-lg focus:ring-1 focus:ring-[#FF8C42] focus:border-[#FF8C42] text-white text-sm"}):e.jsx("p",{className:"px-3 py-2 bg-[#2A2A2A]/50 rounded-lg text-white text-sm",children:f.phone||"Not provided"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl p-4 border border-[#555555]/30 shadow-lg mb-4",children:[e.jsxs("h3",{className:"text-base font-bold text-white mb-3 flex items-center",children:[e.jsx(Vn,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Professional Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Experience"}),l?e.jsx("input",{type:"text",value:c.experience,onChange:A=>y("experience",A.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#555555] rounded-lg focus:ring-1 focus:ring-[#FF8C42] focus:border-[#FF8C42] text-white text-sm",placeholder:"e.g., 5 years"}):e.jsx("p",{className:"px-3 py-2 bg-[#2A2A2A]/50 rounded-lg text-white text-sm",children:f.experience})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Specialties"}),l?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:u,onChange:A=>g(A.target.value),className:"flex-1 px-3 py-2 bg-[#2A2A2A] border border-[#555555] rounded-lg focus:ring-1 focus:ring-[#FF8C42] focus:border-[#FF8C42] text-white text-sm",placeholder:"Add a specialty",onKeyPress:A=>A.key==="Enter"&&N()}),e.jsx("button",{onClick:N,className:"px-3 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#E67A1A] transition-colors text-sm",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:c.specialties.map((A,_)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-[#FF8C42] text-white rounded-lg text-xs",children:[A,e.jsx("button",{onClick:()=>j(A),className:"ml-1 hover:text-red-200",children:e.jsx(rt,{className:"w-3 h-3"})})]},_))})]}):e.jsx("div",{className:"flex flex-wrap gap-1",children:f.specialties?.length>0?f.specialties.map((A,_)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-[#FF8C42] text-white rounded-lg text-xs",children:A},_)):e.jsx("p",{className:"text-gray-400 text-sm",children:"No specialties listed"})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl rounded-2xl p-4 border border-[#555555]/30 shadow-lg",children:[e.jsxs("h3",{className:"text-base font-bold text-white mb-3 flex items-center",children:[e.jsx(nt,{className:"w-4 h-4 mr-2 text-[#FF8C42]"}),"Performance Overview"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-xl border border-green-500/30",children:[e.jsxs("div",{className:"text-lg font-bold text-green-400 mb-1",children:[f.rating,"/5"]}),e.jsx("div",{className:"text-xs text-gray-400",children:"Rating"})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-500/20 to-blue-600/20 rounded-xl border border-blue-500/30",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400 mb-1",children:f.totalBookings}),e.jsx("div",{className:"text-xs text-gray-400",children:"Bookings"})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-[#FF8C42]/20 to-[#FF7A2B]/20 rounded-xl border border-[#FF8C42]/30",children:[e.jsxs("div",{className:"text-lg font-bold text-[#FF8C42] mb-1",children:["",f.monthlyRevenue?.toLocaleString()||0]}),e.jsx("div",{className:"text-xs text-gray-400",children:"Revenue"})]})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Barber Profile Not Found"}),e.jsx("p",{className:"text-gray-400",children:"Please contact admin to set up your barber profile."})]})})},_5=()=>{const{user:n}=Tt(),r=Vs(),[l,i]=v.useState("overview");if(!(r.pathname==="/barber/dashboard"))return null;const x=n?.branch_id?fe(J.services.barbers.getBarbersByBranch,{branch_id:n.branch_id}):fe(J.services.barbers.getAllBarbers),u=x?.find(A=>A.user===n?._id),g=Ee(J.services.barbers.createBarberProfile);ma.useEffect(()=>{n?.role==="barber"&&x&&!u&&n._id&&n.branch_id&&g({userId:n._id,branch_id:n.branch_id}).then(()=>{}).catch(A=>{console.error("Failed to create barber profile:",A)})},[n,x,u,g]);const m=n?.branch_id?fe(J.services.transactions.getTransactionsByBranch,{branch_id:n.branch_id}):fe(J.services.transactions.getAllTransactions),f=fe(J.services.bookings.getBookingsByBarber,u?{barberId:u._id}:"skip")||[],b=fe(J.services.ratings.getBarberRatingsAnalytics,u?{barberId:u._id}:"skip"),p=n?.branch_id?fe(J.services.bookings.getBookingsByBranch,{branch_id:n.branch_id}):fe(J.services.bookings.getAllBookings);console.log("Debug - currentBarber:",u),console.log("Debug - currentBarber._id:",u?._id),console.log("Debug - barberBookings from specific query:",f),console.log("Debug - allBookings:",p),p&&(console.log("Debug - Bookings with barber field:",p.filter(A=>A.barber)),console.log("Debug - All barber field values:",p.map(A=>({id:A._id,barber:A.barber}))));const y=m?.filter(A=>A.barber===u?._id&&A.payment_status==="completed")||[],N=new Date().toISOString().split("T")[0],j=f.filter(A=>A.date===N);y.filter(A=>new Date(A.createdAt).toISOString().split("T")[0]===N).reduce((A,_)=>A+_.total_amount,0);const w=new Date().toISOString().slice(0,7);f.filter(A=>A.date.startsWith(w)),y.filter(A=>new Date(A.createdAt).toISOString().slice(0,7)===w).reduce((A,_)=>A+_.total_amount,0);const D=[{id:"overview",label:"Overview",icon:ks},{id:"bookings",label:"Bookings",icon:Re},{id:"profile",label:"Profile",icon:gt}],C=[{id:"overview",label:"Overview",icon:ks},{id:"bookings",label:"Bookings",icon:Re},{id:"profile",label:"Profile",icon:gt}],L=()=>{switch(l){case"bookings":return e.jsx(k5,{});case"profile":return e.jsx(S5,{});default:return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-3 md:hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] rounded-xl p-3 text-white shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-bold",children:"Welcome back!"}),e.jsx("p",{className:"text-xs opacity-90",children:"Ready to make today amazing?"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs opacity-80",children:"Today"}),e.jsx("div",{className:"text-sm font-semibold",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})})}),e.jsx("div",{className:"hidden md:block relative z-10 bg-gradient-to-r from-[#2A2A2A]/95 to-[#333333]/95 backdrop-blur-xl border-b border-[#444444]/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-white",children:["Welcome back, ",u?.full_name||n?.username,"!"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Here's your performance overview"})]})})}),e.jsxs("div",{className:"px-4 md:max-w-7xl md:mx-auto md:px-6 lg:px-8 py-4 md:py-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg shadow-md border border-[#444444]/30 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-1",children:"Total Bookings"}),e.jsx("p",{className:"text-lg font-bold text-[#FF8C42]",children:f.length})]}),e.jsx("div",{className:"bg-[#FF8C42]/10 p-2 rounded-lg",children:e.jsx(Re,{className:"w-4 h-4 text-[#FF8C42]"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg shadow-md border border-[#444444]/30 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-400 mb-1",children:"Rating"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("p",{className:"text-lg font-bold text-yellow-400",children:b?.averageRating||u?.rating||0}),e.jsx(nt,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"})]})]}),e.jsx("div",{className:"bg-yellow-400/10 p-2 rounded-lg",children:e.jsx(nt,{className:"w-4 h-4 text-yellow-400"})})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg shadow-md border border-[#444444]/30 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"Today's Appointments"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Re,{className:"w-4 h-4 text-[#FF8C42]"}),e.jsx("span",{className:"text-xs text-[#FF8C42] font-medium",children:j.length})]})]}),e.jsx("div",{className:"space-y-2",children:j.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Re,{className:"w-8 h-8 text-gray-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"No appointments today"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Enjoy your free time! "})]}):e.jsxs(e.Fragment,{children:[j.slice(0,3).map(A=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-[#1A1A1A] rounded-md hover:bg-[#222222] transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white text-sm truncate",children:A.customer_name}),e.jsx("p",{className:"text-xs text-gray-400 truncate",children:A.service_name})]}),e.jsxs("div",{className:"text-right ml-2",children:[e.jsx("p",{className:"font-medium text-white text-xs",children:A.time}),e.jsxs("p",{className:"text-xs text-[#FF8C42]",children:["",A.price]})]})]},A._id)),j.length>3&&e.jsxs("button",{onClick:()=>i("bookings"),className:"w-full mt-3 py-2 bg-[#FF8C42]/10 hover:bg-[#FF8C42]/20 text-[#FF8C42] rounded-lg transition-colors font-medium text-xs active:scale-95",children:["View All ",j.length," Appointments "]})]})})]}),b&&b.totalRatings>0&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-lg shadow-md border border-[#444444]/30 p-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"Customer Ratings"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),e.jsxs("span",{className:"text-xs text-yellow-400 font-medium",children:[b.averageRating,"/5"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(A=>e.jsx(nt,{className:`w-4 h-4 ${A<=Math.round(b.averageRating)?"text-yellow-400 fill-yellow-400":"text-gray-500"}`},A))}),e.jsx("span",{className:"text-sm text-white font-medium",children:b.averageRating})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[b.totalRatings," reviews"]})]}),e.jsx("div",{className:"space-y-1",children:[5,4,3,2,1].map(A=>{const _=b.ratingBreakdown[A]||0,O=b.totalRatings>0?_/b.totalRatings*100:0;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-400 w-2",children:A}),e.jsx(nt,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("div",{className:"flex-1 bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-yellow-400 h-1.5 rounded-full transition-all duration-300",style:{width:`${O}%`}})}),e.jsx("span",{className:"text-xs text-gray-400 w-6 text-right",children:_})]},A)})}),b.recentRatings&&b.recentRatings.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 mb-2",children:"Recent Reviews"}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:b.recentRatings.slice(0,3).map((A,_)=>e.jsxs("div",{className:"bg-[#1A1A1A] rounded-md p-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(O=>e.jsx(nt,{className:`w-3 h-3 ${O<=A.rating?"text-yellow-400 fill-yellow-400":"text-gray-500"}`},O))}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(A.created_at).toLocaleDateString()})]}),A.feedback&&e.jsx("p",{className:"text-xs text-gray-300 line-clamp-2",children:A.feedback})]},_))})]})]})]})]})]})}};return u?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] pb-20 md:pb-0",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(255,140,66,0.03),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(255,140,66,0.02),transparent_50%)]"}),e.jsx("div",{className:"h-full bg-cover bg-center bg-no-repeat opacity-5",style:{backgroundImage:"url(/img/pnglog.png)",filter:"brightness(0.3)"}})]}),e.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#1A1A1A]/95 to-[#2A2A2A]/95 backdrop-blur-xl border-b border-[#444444]/30 sticky top-0",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TipunoX Angeles Barbershop Logo",className:"w-10 h-10 object-contain"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[120px]",children:u?.full_name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Today"}),e.jsx("div",{className:"text-sm font-semibold text-[#FF8C42]",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})})}),e.jsx("div",{className:"hidden md:block relative z-10 bg-gradient-to-br from-[#333333]/90 to-[#444444]/90 backdrop-blur-xl border-b border-[#555555]/30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-1 overflow-x-auto py-3",children:C.map(A=>{const _=A.icon;return e.jsxs("button",{onClick:()=>i(A.id),className:`flex items-center space-x-2 px-4 py-3 rounded-xl font-medium text-sm whitespace-nowrap transition-all duration-200 ${l===A.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg":"text-gray-400 hover:text-gray-300 hover:bg-white/5"}`,children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:A.label})]},A.id)})})})}),e.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-gradient-to-t from-[#1A1A1A]/95 to-[#2A2A2A]/95 backdrop-blur-xl border-t border-[#444444]/30",children:e.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:D.map(A=>{const _=A.icon;return e.jsxs("button",{onClick:()=>i(A.id),className:`flex flex-col items-center justify-center py-2 px-1 rounded-lg transition-all duration-200 ${l===A.id?"bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white shadow-lg scale-95":"text-gray-400 hover:text-gray-300 hover:bg-white/5 active:scale-95"}`,children:[e.jsx("div",{className:`p-1 rounded-md ${l===A.id?"bg-white/20":"bg-transparent"}`,children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-xs font-medium mt-1 truncate",children:A.label})]},A.id)})})}),e.jsx("div",{className:"relative z-10",children:L()})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(gt,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Barber Profile Not Found"}),e.jsx("p",{className:"text-gray-400",children:"Please contact admin to set up your barber profile."})]})})},T5=({barber:n,className:r="w-12 h-12"})=>{const[l,i]=v.useState(!1),x=(n.avatarStorageId?fe(J.services.barbers.getImageUrl,{storageId:n.avatarStorageId}):null)||n.avatarUrl||"/img/avatar_default.jpg";return l||!x?e.jsx("div",{className:`flex items-center justify-center bg-gray-600 rounded-full ${r}`,children:e.jsx(Le,{className:"w-6 h-6 text-gray-300"})}):e.jsx("img",{src:x,alt:`${n.full_name||n.name} avatar`,className:`${r} rounded-full object-cover`,onError:()=>i(!0)})};function M5(){const[n,r]=v.useState(null),[l,i]=v.useState(null),[c,x]=v.useState(null),[u,g]=v.useState(1),[m,f]=v.useState(""),[b,p]=v.useState(!1),[y,N]=v.useState(null),[j,w]=v.useState(null),[D,C]=v.useState(!0),[L,A]=v.useState(""),[_,O]=v.useState(""),[U,M]=v.useState(""),E=v.useRef(null),S=fe(J.services.services.getActiveServices),$=fe(J.services.barbers.getActiveBarbers),P=Ee(J.services.bookings.createWalkInBooking),q=fe(J.services.bookings.getBookingById,y?._id?{id:y._id}:"skip"),z=new Date().toISOString().split("T")[0],V=fe(J.services.bookings.getBookingsByBarberAndDate,l&&z?{barberId:l._id,date:z}:"skip"),Z=S===void 0||$===void 0;v.useEffect(()=>{u===5&&C(!0)},[u]),v.useEffect(()=>{if(u===5&&y?._id&&q?.booking_code){console.log("Step 4 reached with booking ID:",y._id,"actual booking code:",q.booking_code);const W=(K=0)=>{if(E.current){console.log("Canvas found, generating QR code with actual booking data");const Y=q,ge=Y.booking_code;console.log("Generating QR with data:",ge),Ds.toCanvas(E.current,ge,{width:192,margin:2,color:{dark:"#36454F",light:"#ffffff"},errorCorrectionLevel:"H"},pe=>{pe?console.error("QR Code generation error:",pe):console.log("QR Code generated successfully with booking code:",Y.booking_code),C(!1)})}else K<5?(console.log(`Canvas ref not available, retrying... (${K+1}/5)`),setTimeout(()=>W(K+1),200)):(console.error("Canvas ref still not available after 5 retries"),C(!1))},le=setTimeout(()=>W(),100);return()=>clearTimeout(le)}},[u,y?._id,q?.booking_code,n,l]);const B=ma.useMemo(()=>{if(!l)return[];const W=[],le=9,K=18,Y=new Date,ge=Y.getHours(),pe=Y.getMinutes(),ye=V?V.filter(Ae=>Ae.status!=="cancelled").map(Ae=>Ae.time.substring(0,5)):[];for(let Ae=le;Ae<K;Ae++)for(let Te of[0,30]){const Ge=`${Ae.toString().padStart(2,"0")}:${Te.toString().padStart(2,"0")}`,Ze=Ae===12?`12:${Te.toString().padStart(2,"0")} PM`:Ae>12?`${Ae-12}:${Te.toString().padStart(2,"0")} PM`:`${Ae}:${Te.toString().padStart(2,"0")} AM`;let Ye=!0,Xe=null;ye.includes(Ge)&&(Ye=!1,Xe="booked"),(Ae<ge||Ae===ge&&Te<=pe)&&(Ye=!1,Xe="past"),W.push({time:Ge,displayTime:Ze,available:Ye,reason:Xe})}return W},[l,V]),k=()=>{if(!n||!$)return $||[];const W=$.filter(le=>le.services&&Array.isArray(le.services)&&le.services.some(K=>K===n._id));return console.log(`Found ${W.length} barbers for service ${n.name}`),W},I=W=>{const le=W?.toLowerCase()||"";return le.includes("haircut")||le.includes("cut")?e.jsx(It,{className:"w-5 h-5 text-white"}):le.includes("beard")?e.jsx(Tr,{className:"w-5 h-5 text-white"}):le.includes("shave")?e.jsx(di,{className:"w-5 h-5 text-white"}):le.includes("wash")?e.jsx(Fa,{className:"w-5 h-5 text-white"}):le.includes("package")||le.includes("complete")?e.jsx(Ea,{className:"w-5 h-5 text-white"}):e.jsx(nt,{className:"w-5 h-5 text-white"})},se=async()=>{if(!n||!c||!l||!L.trim()){alert("Please fill in all required booking details including customer name");return}try{p(!0);const W=c.includes(":")?`${c}:00`:c,le={customer_name:L.trim(),customer_phone:_.trim()||void 0,customer_email:U.trim()||void 0,service:n._id,barber:l._id,date:z,time:W,status:"pending",notes:`Kiosk walk-in booking for ${n.name}`};console.log("Creating walk-in booking with data:",le);const Y={_id:await P(le),booking_code:null,service:n,barber:l,date:z,time:W,status:"pending",customer_name:L,customer_phone:_,customer_email:U};N(Y),g(5)}catch(W){console.error("Error creating booking:",W),alert(W.message||"Failed to create booking. Please try again.")}finally{p(!1)}},T=()=>{r(null),i(null),x(null),A(""),O(""),M(""),g(1),N(null),f(""),w(null)},H=()=>{const W=window.open("","_blank");W.document.write(`
      <html>
        <head>
          <title>TipunoX Angeles Barbershop - Booking QR Code</title>
          <style>
            body { 
              font-family: Arial, sans-serif; 
              text-align: center; 
              padding: 20px;
              margin: 0;
            }
            .header { 
              color: #36454F; 
              margin-bottom: 20px; 
            }
            .qr-container { 
              margin: 20px 0; 
            }
            .service-info { 
              background: #F0F8FF; 
              padding: 15px; 
              border-radius: 10px; 
              margin: 20px 0; 
              border: 1px solid #E0E0E0;
            }
            .footer { 
              color: #8B8B8B; 
              font-size: 12px; 
              margin-top: 30px; 
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>TipunoX Angeles Barbershop</h1>
            <h2>Booking Confirmation</h2>
          </div>
          <div class="service-info">
            <h3>Service: ${n?.name}</h3>
            <p>Price: ${n?.price}</p>
            <p>Barber: ${l?.full_name||l?.name}</p>
            <p>Date: ${new Date().toLocaleDateString()}</p>
            <p>Time: ${c}</p>
          </div>
          <div class="qr-container">
            <canvas ref="qrCanvas"></canvas>
          </div>
          <div class="footer">
            <p>Show this QR code at the kiosk to confirm your appointment</p>
            <p>Thank you for choosing TipunoX Angeles Barbershop!</p>
          </div>
        </body>
      </html>
    `),W.document.close(),W.print()},oe=()=>e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center space-x-3",children:[1,2,3,4].map(W=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 ${u>=W?"text-white shadow-md":"text-gray-500"}`,style:{backgroundColor:u>=W?"#FF8C42":"#444444"},children:u>W?"":W}),W<4&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded transition-all duration-300",style:{backgroundColor:u>W?"#FF8C42":"#444444"}})]},W))})});return Z?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[#FF8C42] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-white",children:"Loading Services..."})]})}):j?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 bg-red-500/20",children:e.jsx(Pt,{className:"w-8 h-8 text-red-400"})}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Error Loading Data"}),e.jsx("p",{className:"text-red-400 mb-4",children:j}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 text-white font-bold rounded-xl transition-colors duration-200 bg-[#FF8C42] hover:bg-[#E67A1F]",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[u<5&&oe(),u===1&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Service"}),e.jsx("p",{className:"text-gray-300",children:"Select the service you'd like to book"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:S&&S.map(W=>e.jsx("button",{onClick:()=>{r(W),i(null),x(null),g(2)},className:"group relative w-full bg-gradient-to-br from-[#1A1A1A]/50 to-[#2A2A2A]/50 rounded-xl p-4 border-2 border-[#444444]/50 hover:border-[#FF8C42]/50 transition-all duration-200 hover:scale-105",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-full w-12 h-12 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-200",children:I(W.name)})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h3",{className:"text-base font-bold text-white group-hover:text-[#FF8C42] transition-colors duration-200",children:W.name}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:W.description||"Professional grooming service"}),e.jsx("div",{className:"flex items-center space-x-4 mt-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(jt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-400",children:W.duration_minutes?`${W.duration_minutes} min`:"Duration varies"})]})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"rounded-xl px-3 py-2 bg-[#FF8C42]/20 border border-[#FF8C42]/30",children:e.jsxs("div",{className:"text-base font-bold text-[#FF8C42]",children:["",parseFloat(W.price||0).toLocaleString()]})})})]})},W._id))})]}),u===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-4 border border-[#444444]/50",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"rounded-full w-10 h-10 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] flex items-center justify-center",children:I(n?.name)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base font-bold text-white",children:n?.name}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsxs("span",{className:"font-bold text-[#FF8C42]",children:["",n?.price.toLocaleString()]}),e.jsxs("span",{className:"font-medium text-gray-400",children:[n?.duration_minutes," min"]})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-white",children:"Choose Your Barber"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k().length>0?k().map(W=>e.jsx("button",{onClick:()=>{i(W),x(null)},className:`p-4 rounded-xl border-2 transition-all duration-200 text-left hover:scale-105 ${l?._id===W._id?"border-[#FF8C42] bg-[#FF8C42]/10":"border-[#444444]/50 bg-[#1A1A1A]/50 hover:border-[#FF8C42]/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T5,{barber:W,className:"w-12 h-12"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-white",children:W.full_name||W.name||"Professional Barber"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("div",{className:"flex text-yellow-400 text-xs",children:""}),e.jsx("span",{className:"text-xs text-gray-400",children:"5.0  Professional"})]})]}),l?._id===W._id&&e.jsx(Qe,{className:"w-5 h-5 text-[#FF8C42]"})]})},W._id)):e.jsxs("div",{className:"col-span-2 text-center py-6",children:[e.jsx("p",{className:"text-[#FF8C42] font-medium",children:"No barbers available for this service"}),e.jsx("button",{onClick:()=>g(1),className:"mt-3 px-4 py-2 bg-[#FF8C42] text-white rounded-lg hover:bg-[#E67A1F] transition-colors",children:"Choose Different Service"})]})})]}),l&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Available Times"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Today - ",new Date().toLocaleDateString()]})]}),B.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-[#FF8C42] font-medium",children:"No available times today"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Please try again tomorrow"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3 mb-4",children:B.map(W=>e.jsx("button",{onClick:()=>W.available&&x(W.time),disabled:!W.available,className:`p-3 rounded-lg font-semibold text-center transition-all duration-200 border text-sm ${W.available?c===W.time?"bg-[#FF8C42] text-white border-[#FF8C42]":"bg-[#1A1A1A]/50 text-white border-[#444444]/50 hover:border-[#FF8C42]/50":"bg-gray-600/30 text-gray-500 border-gray-600/30 cursor-not-allowed"}`,title:W.available?`Book at ${W.displayTime}`:`${W.displayTime} - ${W.reason==="past"?"Past time":"Already booked"}`,children:W.displayTime},W.time))}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-[#1A1A1A]/50 border border-[#444444]/50"}),e.jsx("span",{className:"text-gray-400",children:"Available"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-[#FF8C42]"}),e.jsx("span",{className:"text-gray-400",children:"Selected"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-gray-600/30"}),e.jsx("span",{className:"text-gray-400",children:"Unavailable"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>g(1),className:"flex-1 py-3 px-4 border border-[#444444] text-gray-300 rounded-xl hover:bg-[#1A1A1A]/50 transition-all duration-200",children:" Back to Services"}),c&&l&&e.jsx("button",{onClick:()=>g(3),className:"flex-1 py-3 px-4 bg-[#FF8C42] text-white font-bold rounded-xl hover:bg-[#E67A1F] transition-all duration-200",children:"Continue to Customer Info"})]})]}),u===3&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Customer Information"}),e.jsx("p",{className:"text-gray-300",children:"Please provide your contact details"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:L,onChange:W=>A(W.target.value),placeholder:"Enter your full name",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-[#FF8C42] focus:ring-1 focus:ring-[#FF8C42] transition-colors",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",value:_,onChange:W=>O(W.target.value),placeholder:"Enter your phone number",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-[#FF8C42] focus:ring-1 focus:ring-[#FF8C42] transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address (Optional)"}),e.jsx("input",{type:"email",value:U,onChange:W=>M(W.target.value),placeholder:"Enter your email address",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#444444] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-[#FF8C42] focus:ring-1 focus:ring-[#FF8C42] transition-colors"})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>g(2),className:"flex-1 py-3 px-4 border border-[#444444] text-gray-300 rounded-xl hover:bg-[#1A1A1A]/50 transition-all duration-200",children:" Back to Time Selection"}),L.trim()&&e.jsx("button",{onClick:()=>g(4),className:"flex-1 py-3 px-4 bg-[#FF8C42] text-white font-bold rounded-xl hover:bg-[#E67A1F] transition-all duration-200",children:"Continue to Confirmation"})]})]}),u===4&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-6 border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Confirm Your Booking"}),e.jsx("p",{className:"text-gray-300",children:"Please review your appointment details"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Customer:"}),e.jsx("span",{className:"font-bold text-white",children:L})]}),_&&e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"}),e.jsx("span",{className:"font-bold text-white",children:_})]}),U&&e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("span",{className:"font-bold text-white",children:U})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Service:"}),e.jsx("span",{className:"font-bold text-white",children:n?.name})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Barber:"}),e.jsx("span",{className:"font-bold text-white",children:l?.full_name||l?.name})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Date:"}),e.jsxs("span",{className:"font-bold text-white",children:["Today - ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-[#444444]/50",children:[e.jsx("span",{className:"text-gray-400",children:"Time:"}),e.jsx("span",{className:"font-bold text-white",children:B.find(W=>W.time===c)?.displayTime})]}),e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("span",{className:"text-gray-400",children:"Price:"}),e.jsxs("span",{className:"font-bold text-[#FF8C42] text-xl",children:["",n?.price.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>g(3),className:"flex-1 py-3 px-4 border border-[#444444] text-gray-300 rounded-xl hover:bg-[#1A1A1A]/50 transition-all duration-200",children:" Back to Customer Info"}),e.jsx("button",{onClick:se,disabled:b,className:`flex-1 py-3 px-4 text-white font-bold rounded-xl transition-all duration-200 ${b?"bg-gray-600 cursor-not-allowed":"bg-[#FF8C42] hover:bg-[#E67A1F]"}`,children:b?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(xs,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Creating Booking..."})]}):"Confirm Booking"})]})]}),u===5&&e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-xl p-8 text-center border border-[#444444]/50",children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl bg-green-500",children:e.jsx(Qe,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold mb-2 text-white",children:"Booking Confirmed!"}),e.jsx("p",{className:"text-lg mb-6 text-green-400",children:"Your appointment has been scheduled"}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-[#36454F]",children:"Your Booking QR Code"}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-white rounded-2xl border-2 border-[#E0E0E0] shadow-sm",children:e.jsxs("div",{className:"relative w-48 h-48",children:[(D||!q?.booking_code)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-[#FF8C42] border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-sm text-[#8B8B8B]",children:q?.booking_code?"Generating QR Code...":"Loading booking details..."})]})}),e.jsx("canvas",{ref:E,className:"rounded-xl w-full h-full",style:{display:D||!q?.booking_code?"none":"block"}})]})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("div",{className:"text-lg font-bold text-[#36454F]",children:["Booking Code: ",q?.booking_code?q.booking_code:e.jsxs("span",{className:"inline-flex items-center space-x-2",children:[e.jsx("span",{children:"Generating..."}),e.jsx("div",{className:"animate-pulse w-2 h-2 bg-[#FF8C42] rounded-full"})]})]}),e.jsx("p",{className:"text-sm text-[#8B8B8B]",children:"Show this QR code when you arrive"})]})]}),e.jsx("div",{className:"bg-[#FF8C42]/10 border border-[#FF8C42]/30 rounded-xl p-6 mb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Customer:"}),e.jsx("span",{className:"font-bold text-white",children:L})]}),_&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Phone:"}),e.jsx("span",{className:"font-bold text-white",children:_})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Service:"}),e.jsx("span",{className:"font-bold text-white",children:n?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Barber:"}),e.jsx("span",{className:"font-bold text-white",children:l?.full_name||l?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Date & Time:"}),e.jsxs("span",{className:"font-bold text-white",children:["Today, ",B.find(W=>W.time===c)?.displayTime]})]}),e.jsxs("div",{className:"flex justify-between border-t border-[#FF8C42]/30 pt-3",children:[e.jsx("span",{className:"font-bold text-gray-300",children:"Total:"}),e.jsxs("span",{className:"font-bold text-[#FF8C42] text-xl",children:["",n?.price.toLocaleString()]})]})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:H,className:"flex-1 py-3 px-4 bg-[#1A1A1A] border border-[#444444] text-white font-bold rounded-xl hover:bg-[#2A2A2A] transition-all duration-200",children:"Print QR Code"}),e.jsx("button",{onClick:T,className:"flex-1 py-3 px-4 bg-[#FF8C42] text-white font-bold rounded-xl hover:bg-[#E67A1F] transition-all duration-200",children:"Book Another Service"})]})]})]})}const R5=()=>{const[n,r]=v.useState(!1),[l,i]=v.useState(!1),c=async()=>{try{return navigator.permissions?(await navigator.permissions.query({name:"camera"})).state==="granted":!0}catch(g){return console.log("Permissions API not available:",g),!0}},x=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?{video:{facingMode:{ideal:"environment"},width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},frameRate:{ideal:30,max:60},aspectRatio:{ideal:16/9}},audio:!1}:{video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},audio:!1};return{cameraPermissionDenied:n,setCameraPermissionDenied:r,requestingPermission:l,setRequestingPermission:i,checkCameraPermissions:c,requestCameraPermission:async()=>{i(!0),r(!1);try{let g=null;try{g=await navigator.mediaDevices.getUserMedia(x())}catch(m){console.log("Optimal constraints failed, trying fallback:",m),g=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{min:320,ideal:640},height:{min:240,ideal:480}},audio:!1})}return g&&g.getTracks().forEach(m=>m.stop()),i(!1),!0}catch(g){return console.error("Camera permission denied:",g),i(!1),g.name==="NotAllowedError"||g.name==="PermissionDeniedError"?(r(!0),{error:"Camera access denied. Please allow camera permissions and refresh the page."}):g.name==="NotFoundError"?{error:"No camera found on this device."}:g.name==="OverconstrainedError"?{error:"Camera constraints not supported. Please try a different device."}:{error:"Camera access failed. Please check your device settings."}}}}},P5=({onRetry:n})=>e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center text-white p-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"#F44336"},children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Camera Access Required"}),e.jsx("p",{className:"text-sm mb-4 opacity-90",children:"This kiosk needs camera access to scan QR codes. Please:"}),e.jsxs("div",{className:"text-left text-sm mb-6 space-y-2 opacity-90",children:[e.jsx("p",{children:"1. Click the camera icon in your browser's address bar"}),e.jsx("p",{children:'2. Select "Allow" for camera access'}),e.jsx("p",{children:"3. Refresh this page"})]}),e.jsx("button",{onClick:n,className:"px-6 py-3 bg-white text-black font-bold rounded-xl transition-colors duration-200 hover:bg-gray-100",children:"Try Again"})]})}),L5=({requestingPermission:n})=>e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent rounded-full animate-spin mx-auto mb-3",style:{borderColor:"#F68B24",borderTopColor:"transparent"}}),e.jsx("p",{className:"text-lg font-medium",children:n?"Requesting Camera Access...":"Initializing Camera..."}),e.jsx("p",{className:"text-sm mt-2",style:{color:"#F68B24",opacity:.8},children:n?"Please allow camera access in the popup":"Please allow camera access"})]})}),O5=({onQRDetected:n,scannerError:r,setScannerError:l,showCamera:i,setShowCamera:c})=>{const x=v.useRef(null),u=v.useRef(null),{cameraPermissionDenied:g,setCameraPermissionDenied:m,requestingPermission:f,checkCameraPermissions:b,requestCameraPermission:p}=R5(),y=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:"environment",maxScansPerSecond:3,calculateScanRegion:C=>{const L=Math.min(C.videoWidth,C.videoHeight),A=Math.floor(L*.6),_=Math.floor((C.videoWidth-A)/2),O=Math.floor((C.videoHeight-A)/2);return{x:_,y:O,width:A,height:A}}}:{highlightScanRegion:!0,highlightCodeOutline:!0,preferredCamera:"environment",maxScansPerSecond:5},N=async()=>{try{if(!x.current)return;if(!await b()){const L=await p();if(L?.error){l(L.error);return}}const C=x.current;C.setAttribute("playsinline","true"),C.setAttribute("webkit-playsinline","true"),C.setAttribute("muted","true"),C.setAttribute("autoplay","true"),C.style.touchAction="manipulation",u.current=new kr(C,async L=>{console.log("QR Code detected:",L.data),navigator.vibrate&&navigator.vibrate(100),await n(L.data)},y()),await u.current.start(),c(!0),m(!1),l("")}catch(D){console.error("Error starting camera:",D),D.name==="NotAllowedError"||D.name==="PermissionDeniedError"?(m(!0),l("Camera access denied. Please allow camera permissions in your browser settings.")):D.name==="NotFoundError"?l("No camera found on this device."):D.name==="OverconstrainedError"?l("Camera settings not supported on this device. Please try a different browser."):l("Failed to start camera. Please refresh the page and try again.")}},j=()=>{u.current&&(u.current.stop(),u.current.destroy(),u.current=null),c(!1)};v.useEffect(()=>(N(),()=>{j()}),[]);const w=async()=>{m(!1),l(""),await N()};return e.jsxs("div",{className:"relative bg-black rounded-2xl overflow-hidden",style:{aspectRatio:"16/9"},children:[e.jsx("video",{ref:x,className:"w-full h-full object-cover",playsInline:!0,"webkit-playsinline":"true",muted:!0,autoPlay:!0,style:{touchAction:"manipulation",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"}}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-64 h-64 border-4 rounded-2xl relative",style:{borderColor:"#F68B24",opacity:.8},children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-6 h-6 border-t-4 border-l-4 rounded-tl-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 border-t-4 border-r-4 rounded-tr-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-6 h-6 border-b-4 border-l-4 rounded-bl-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 border-b-4 border-r-4 rounded-br-2xl",style:{borderColor:"#F68B24"}}),e.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:e.jsx("div",{className:"absolute w-full h-1 animate-pulse",style:{top:"50%",transform:"translateY(-50%)",background:"linear-gradient(to right, transparent, #F68B24, transparent)"}})})]}),e.jsx("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2 text-center",children:e.jsx("p",{className:"text-white text-lg font-medium bg-black/50 px-4 py-2 rounded-full backdrop-blur-sm",children:"Position QR code within frame"})})]})}),!i&&!g&&e.jsx(L5,{requestingPermission:f}),g&&e.jsx(P5,{onRetry:w})]})]})},U5=({scannedBooking:n,onDone:r,onValidateAndConfirm:l,isProcessingBooking:i})=>{if(console.log("BookingDetails rendering with:",n),!n)return null;const c=u=>{switch(u){case"confirmed":return"text-green-700 bg-green-100 border-green-200";case"pending":return"text-yellow-700 bg-yellow-100 border-yellow-200";case"completed":return"text-blue-700 bg-blue-100 border-blue-200";case"cancelled":return"text-red-700 bg-red-100 border-red-200";case"scanned":return"text-blue-700 bg-blue-100 border-blue-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}},x=u=>{switch(u){case"confirmed":case"pending":return e.jsx(Qe,{className:"w-5 h-5 text-green-600"});case"completed":return e.jsx(Qe,{className:"w-5 h-5 text-blue-600"});case"cancelled":case"invalid":return e.jsx(Pt,{className:"w-5 h-5 text-red-600"});case"scanned":return e.jsx(Vt,{className:"w-5 h-5 text-blue-600"});default:return e.jsx(Pt,{className:"w-5 h-5 text-gray-600"})}};return e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:x(n.status)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-black text-white font-mono",children:n.id}),e.jsx("span",{className:`px-3 py-1 text-sm font-bold rounded-full border-2 uppercase ${c(n.status)}`,children:n.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Customer:"}),e.jsx("p",{className:"text-white font-semibold",children:n.customer})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Vt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Service:"}),e.jsx("p",{className:"text-white font-semibold",children:n.service?.name})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Date & Time:"}),e.jsxs("p",{className:"text-white font-semibold",children:[n.date," at ",n.time]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Staff:"}),e.jsx("p",{className:"text-white font-semibold",children:n.barber?.name})]})]})]})]}),n.phone!=="N/A"&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-[#444444]/50",children:[e.jsx("span",{className:"font-bold text-gray-400 text-sm",children:"Phone:"}),e.jsx("p",{className:"text-white font-semibold",children:n.phone})]}),n.status==="confirmed"&&e.jsx("div",{className:"mt-4 p-3 bg-green-500/20 border border-green-500/50 rounded-xl",children:e.jsx("p",{className:"text-green-300 font-bold text-sm",children:" Booking confirmed - Ready for service!"})}),n.status==="scanned"&&e.jsx("div",{className:"mt-4 p-3 bg-blue-500/20 border border-blue-500/50 rounded-xl",children:e.jsx("p",{className:"text-blue-300 font-bold text-sm",children:" QR Code scanned - Please confirm your booking"})}),n.status==="pending"&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-xl",children:e.jsx("p",{className:"text-yellow-800 font-bold text-sm",children:" Confirming booking..."})}),n.status==="completed"&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-xl",children:e.jsx("p",{className:"text-gray-800 font-bold text-sm",children:" This booking has already been completed"})}),n.status==="cancelled"&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:e.jsx("p",{className:"text-red-800 font-bold text-sm",children:" This booking has been cancelled"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[n.status==="scanned"&&e.jsx("button",{onClick:l,disabled:i,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-green-600 text-white font-bold rounded-xl transition-all duration-200 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:i?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Confirming..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-5 h-5"}),e.jsx("span",{children:"Confirm Booking"})]})}),e.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-[#1A1A1A] border border-[#444444] text-white font-bold rounded-xl transition-all duration-200 hover:bg-[#2A2A2A] hover:border-[#FF8C42]/50 shadow-lg",children:[e.jsx(Pt,{className:"w-5 h-5"}),e.jsx("span",{children:"Done"})]})]})]})})};function z5(){const[n,r]=v.useState("home"),[l,i]=v.useState(""),[c,x]=v.useState(""),[u,g]=v.useState(""),[m,f]=v.useState(!1),[b,p]=v.useState(!1),[y,N]=v.useState(null),[j,w]=v.useState(!1),[D,C]=v.useState(""),[L,A]=v.useState(!1),_=Ee(J.services.bookings.updateBooking);v.useEffect(()=>{(async()=>{try{const $=await Ds.toDataURL("https://tpx-booking-app.vercel.app//download",{width:200,margin:1,color:{dark:"#36454F",light:"#FFFFFF"}});g($)}catch(S){console.error("Error generating app download QR:",S)}})()},[]);const O=E=>{r(E),E==="home"&&(N(null),C(""),w(!1),A(!1))},U=async()=>{if(!y||!y.id){C("No booking to validate.");return}try{A(!0),C(""),await _({id:y.id,status:"confirmed"}),console.log("Booking confirmed successfully");const E={...y,status:"confirmed"};N(E),C("")}catch(E){console.error("Error confirming booking:",E),C("Failed to confirm booking. Please try again.")}finally{A(!1)}},M=async E=>{console.log("Kiosk QR Data:",E),w(!0),C("");try{let S=null;if(E.startsWith("{"))try{S=JSON.parse(E),console.log("Parsed booking data:",S)}catch{C("Invalid QR code format."),w(!1);return}else{C("Invalid QR code format. Expected JSON data."),w(!1);return}if(!S.bookingId){C("Missing booking ID in QR code."),w(!1);return}const $={id:S.bookingId,booking_code:S.bookingCode||"N/A",customer:"Customer",service:{name:S.service||"N/A"},date:S.date||"N/A",time:S.time||"N/A",barber:{name:S.barber||"N/A"},status:"scanned",phone:"N/A",barbershop:S.barbershop||"N/A"};console.log("Setting scannedBooking:",$),N($),w(!1),console.log("Scanner loading set to false")}catch(S){console.error("Error processing booking QR code:",S),C("Failed to process booking QR code. Please try again."),w(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[e.jsx("style",{children:`
        /* Tablet optimizations */
        @media screen and (min-width: 768px) and (max-width: 1024px) {
          .kiosk-container {
            padding: 2rem;
            max-width: 90vw;
          }
          .camera-container {
            aspect-ratio: 16/10;
            max-height: 50vh;
          }
          .action-cards {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          }
        }
        
        /* Mobile optimizations */
        @media screen and (max-width: 767px) {
          .kiosk-container {
            padding: 1rem;
          }
          .camera-container {
            aspect-ratio: 4/3;
            max-height: 60vh;
          }
        }
        
        /* Prevent zoom and improve touch */
        input, select, textarea {
          font-size: 16px !important;
        }
        
        .mobile-optimized {
          -webkit-user-select: none;
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: transparent;
        }
        
        /* Dark mode scrollbar */
        ::-webkit-scrollbar {
          width: 8px;
        }
        ::-webkit-scrollbar-track {
          background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
          background: #4b5563;
          border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
          background: #6b7280;
        }
      `}),e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 bg-gradient-to-r from-[#2A2A2A] to-[#333333] shadow-lg border-b border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 md:space-x-4",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center bg-gradient-to-r from-[#FF8C42] to-[#FF8C42]/80 shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-lg md:text-xl",children:"T"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"TipunoX Angeles Barbershop"}),e.jsx("div",{className:"bg-[#FF8C42]/20 rounded-full px-2 py-0.5 border border-[#FF8C42]/30",children:e.jsx("span",{className:"text-xs font-semibold text-[#FF8C42]",children:"v2.0.0"})})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-300",children:"Self-Service Kiosk"})]})]}),e.jsx(ps,{to:"/login",className:"px-3 py-2 md:px-4 md:py-2 text-white rounded-xl transition-all duration-200 flex items-center space-x-2 text-sm md:text-base bg-[#1A1A1A] border border-[#444444] hover:bg-[#2A2A2A] hover:border-[#FF8C42]/50",children:e.jsx("span",{children:"Back to Login"})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto kiosk-container mobile-optimized",children:[n==="home"&&e.jsxs("div",{className:"space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-white",children:"Live Camera Feed"}),e.jsx("p",{className:"text-base md:text-lg text-gray-300",children:"Point your camera at a QR code to scan automatically"})]}),e.jsx("div",{className:"relative camera-container",style:{minHeight:"300px"},children:e.jsx(O5,{onQRDetected:M,scannerError:D,setScannerError:C,showCamera:b,setShowCamera:p})}),L&&e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx(xs,{className:"w-6 h-6 text-[#FF8C42] animate-spin"}),e.jsx("span",{className:"text-gray-300 font-medium",children:"Processing booking..."})]})}),D&&e.jsx("div",{className:"bg-red-500/20 border-2 border-red-500/50 rounded-2xl p-4 mt-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Pt,{className:"w-6 h-6 text-red-400"}),e.jsx("p",{className:"text-red-300 font-bold",children:D})]})})]}),y&&e.jsx(U5,{scannedBooking:y,onDone:()=>{N(null),C(""),w(!1),A(!1)},onValidateAndConfirm:U,isProcessingBooking:L}),e.jsxs("div",{className:"grid md:grid-cols-2 xl:grid-cols-3 gap-6 action-cards",children:[e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50 transition-all duration-300 hover:scale-105 hover:border-[#FF8C42]/50",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto bg-gradient-to-r from-green-500/20 to-green-600/20 border-2 border-green-500/50",children:e.jsx(Vt,{className:"w-8 h-8 text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Scan Your Booking QR"}),e.jsx("p",{className:"text-gray-300",children:"Point the camera above at your booking QR code to confirm your appointment"})]}),j&&e.jsx("div",{className:"rounded-lg p-4 bg-green-500/20 border border-green-500/50",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-green-400 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"font-medium text-green-400",children:"Validating Booking..."})]})}),D&&e.jsx("div",{className:"rounded-lg p-4 bg-red-500/20 border border-red-500/50",children:e.jsx("p",{className:"text-red-300 text-sm font-medium text-center",children:D})}),!j&&!D&&e.jsxs("div",{className:"rounded-lg p-4 bg-[#1A1A1A]/50 border border-[#444444]/50",children:[e.jsx("h4",{className:"font-medium mb-2 text-white",children:"Instructions:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-left text-gray-300",children:[e.jsx("li",{children:" Hold your device steady"}),e.jsx("li",{children:" Ensure good lighting"}),e.jsx("li",{children:" Keep QR code within the camera frame above"}),e.jsx("li",{children:" Wait for automatic detection"})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50 transition-all duration-300 hover:scale-105 hover:border-[#FF8C42]/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 bg-gradient-to-r from-[#FF8C42] to-[#FF8C42]/80 shadow-lg",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),e.jsx("h2",{className:"text-xl font-bold mb-3 text-white",children:"Download Our App"}),e.jsx("p",{className:"mb-4 text-base text-gray-300",children:"Get exclusive vouchers and loyalty rewards"}),e.jsx("div",{className:"rounded-xl p-3 mb-4 mx-auto w-fit bg-[#1A1A1A]/50 border border-[#444444]/50",children:e.jsx("div",{className:"w-24 h-24 rounded-lg flex items-center justify-center overflow-hidden bg-white",children:u?e.jsx("img",{src:u,alt:"Download App QR Code",className:"w-full h-full object-contain"}):e.jsx("div",{className:"text-xs text-center text-gray-500",children:"Loading..."})})}),e.jsx("p",{className:"text-sm text-gray-300",children:"Scan to download and unlock exclusive offers!"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl p-6 shadow-xl border border-[#444444]/50 transition-all duration-300 hover:scale-105 hover:border-[#FF8C42]/50 md:col-span-2 xl:col-span-1",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 bg-gradient-to-r from-[#FF8C42] to-[#FF8C42]/80 shadow-lg",children:e.jsx(Vt,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-xl font-bold mb-3 text-white",children:"Book Appointment"}),e.jsx("p",{className:"mb-4 text-base text-gray-300",children:"Schedule your service and get a QR confirmation"}),e.jsx("button",{onClick:()=>O("generate"),className:"w-full py-3 text-white font-bold rounded-xl transition-all duration-200 text-base shadow-lg bg-gradient-to-r from-[#FF8C42] to-[#FF8C42]/80 hover:from-[#FF8C42]/90 hover:to-[#FF8C42]/70 transform hover:scale-105",children:"Book Now"})]})})]})]}),n==="generate"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Book & Generate QR"}),e.jsx("button",{onClick:()=>O("home"),className:"px-4 py-2 text-white rounded-xl transition-all duration-200 flex items-center space-x-2 bg-[#1A1A1A] border border-[#444444] hover:bg-[#2A2A2A] hover:border-[#FF8C42]/50",children:e.jsx("span",{children:" Back"})})]}),e.jsx(M5,{})]})]})]})}const q5=()=>{const n=ys(),[r]=ap(),[l,i]=v.useState(null),[c,x]=v.useState(!1),u=Ee(J.services.payments.updatePaymentStatus);fe(J.services.payments.getPaymentByRequestId,l?.paymentId?{paymentRequestId:l.paymentId}:"skip"),v.useEffect(()=>{const f=r.get("payment_request_id"),b=r.get("reference_id"),p=r.get("status");f&&i({paymentId:f,referenceId:b,status:p})},[r]),v.useEffect(()=>{(async()=>{if(l?.paymentId&&l?.status==="COMPLETED"&&!c)try{console.log("Updating payment status for successful payment:",l.paymentId),await u({payment_request_id:l.paymentId,status:"SUCCEEDED",metadata:{source:"payment_success_page",timestamp:new Date().toISOString()}}),x(!0),console.log("Payment status updated successfully")}catch(b){console.error("Error updating payment status:",b)}})()},[l,u,c]);const g=()=>{n("/customer/dashboard")},m=()=>{n("/customer/dashboard?section=bookings")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-xl border border-[#444444]/50 p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(Qe,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Your booking payment has been processed successfully."}),l&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Payment ID:"}),e.jsxs("span",{className:"text-white font-mono text-xs",children:[l.paymentId?.substring(0,20),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Reference:"}),e.jsx("span",{className:"text-white font-mono text-xs",children:l.referenceId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:"text-green-400 font-semibold",children:l.status||"COMPLETED"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Booking Status:"}),e.jsx("span",{className:`font-semibold ${c?"text-green-400":"text-yellow-400"}`,children:c?"Updated":"Updating..."})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:m,className:"w-full py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white font-semibold rounded-xl hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-all duration-200 shadow-lg flex items-center justify-center space-x-2",children:[e.jsx(Re,{className:"w-5 h-5"}),e.jsx("span",{children:"View My Bookings"})]}),e.jsxs("button",{onClick:g,className:"w-full py-3 border border-[#555555] text-gray-300 font-semibold rounded-xl hover:bg-[#444444] transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"You will receive a confirmation email shortly."})})]})})},$5=()=>{const n=ys(),[r]=ap(),[l,i]=v.useState(null);v.useEffect(()=>{const u=r.get("payment_request_id"),g=r.get("reference_id"),m=r.get("status"),f=r.get("failure_reason");u&&i({paymentId:u,referenceId:g,status:m,failureReason:f})},[r]);const c=()=>{n("/customer/dashboard")},x=()=>{n("/customer/dashboard?section=booking")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#1A1A1A] via-[#2A2A2A] to-[#1A1A1A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] rounded-2xl shadow-xl border border-[#444444]/50 p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(Pt,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"We couldn't process your payment. Please try again or use a different payment method."}),l&&e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Payment ID:"}),e.jsxs("span",{className:"text-white font-mono text-xs",children:[l.paymentId?.substring(0,20),"..."]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Reference:"}),e.jsx("span",{className:"text-white font-mono text-xs",children:l.referenceId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:"text-red-400 font-semibold",children:l.status||"FAILED"})]}),l.failureReason&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Reason:"}),e.jsx("span",{className:"text-red-400 text-xs",children:l.failureReason})]})]})]}),e.jsxs("div",{className:"bg-[#1A1A1A] rounded-xl p-4 mb-6 text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Common Issues"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[e.jsx("li",{children:" Insufficient balance in your e-wallet"}),e.jsx("li",{children:" Network connection issues"}),e.jsx("li",{children:" Payment method temporarily unavailable"}),e.jsx("li",{children:" Transaction timeout"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:x,className:"w-full py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white font-semibold rounded-xl hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-all duration-200 shadow-lg flex items-center justify-center space-x-2",children:[e.jsx(xs,{className:"w-5 h-5"}),e.jsx("span",{children:"Try Again"})]}),e.jsxs("button",{onClick:c,className:"w-full py-3 border border-[#555555] text-gray-300 font-semibold rounded-xl hover:bg-[#444444] transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(rs,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Need help? Contact our support team."})})]})})},I5=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-200",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-10",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Privacy Policy"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Effective date: ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-6 bg-gray-800/60 rounded-2xl p-6 border border-gray-700/50",children:[e.jsx("p",{children:"This Privacy Policy describes how we collect, use, and protect your personal information when you use our services. By using our website and application, you consent to the data practices described in this policy."}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Information We Collect"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Account details such as name, email, and mobile number."}),e.jsx("li",{children:"Booking information and transaction history."}),e.jsx("li",{children:"Authentication data from third parties when you choose social login (e.g., Facebook name and profile image URL)."}),e.jsx("li",{children:"Technical data for security and analytics (IP address, device, and usage)."})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"How We Use Your Information"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Provide and improve booking and account features."}),e.jsx("li",{children:"Send service notifications, booking confirmations, and updates."}),e.jsx("li",{children:"Maintain platform security and prevent fraud."})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Data Sharing"}),e.jsx("p",{children:"We do not sell your personal data. We may share limited data with processors (e.g., payment, analytics, hosting) under strict agreements and only as necessary to operate the service."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Your Rights"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Access, update, or correct your information."}),e.jsx("li",{children:"Request deletion of your account and associated personal data."}),e.jsx("li",{children:"Withdraw consent for optional processing."})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Contact"}),e.jsxs("p",{children:["For privacy requests, contact us at ",e.jsx("span",{className:"text-orange-400",children:"support@tpx-barbershop.example"})," or visit the"," ",e.jsx(ps,{to:"/account-deletion",className:"text-orange-400 hover:text-orange-300",children:"Account Deletion"})," ","page."]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(ps,{to:"/",className:"text-orange-400 hover:text-orange-300",children:"Back to Home"})})]})}),V5=()=>e.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-200",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-10",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Account Deletion"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Request deletion of your account and personal data"})]}),e.jsxs("div",{className:"space-y-6 bg-gray-800/60 rounded-2xl p-6 border border-gray-700/50",children:[e.jsx("p",{children:"You can permanently delete your account and associated personal data from our systems. This action is irreversible. Once we process your request, you will lose access to bookings, vouchers, and saved preferences."}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"How to Request Deletion"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-300",children:[e.jsx("li",{children:"Make sure you are signed in to the account you wish to delete."}),e.jsxs("li",{children:["Send an email to ",e.jsx("span",{className:"text-orange-400",children:"privacy@tpx-barbershop.example"}),' with the subject "Account Deletion Request".']}),e.jsx("li",{children:"Include your registered email address and a brief confirmation that you want the account deleted."})]}),e.jsx("p",{className:"mt-3 text-gray-400 text-sm",children:"We will verify your identity and process deletion within 714 business days."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"What Will Be Deleted"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-300",children:[e.jsx("li",{children:"Profile data (name, email, phone, avatar)."}),e.jsx("li",{children:"Authentication tokens and sessions."}),e.jsx("li",{children:"Booking history and voucher associations, where applicable."})]}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Certain records may be retained as required by law (e.g., financial records)."})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(ps,{to:"/",className:"text-orange-400 hover:text-orange-300",children:"Back to Home"})})]})}),H5="service_bczerea",Q5="template_qqctchj",Y5="rIfJ3j9HQe8hynx_3";pi.init(Y5);const Tp=()=>!0,_0=async n=>{try{console.log(" Sending email via EmailJS:",{to:n.to,subject:n.subject,hasHtml:!!n.html_content}),Tp();const r={to_email:n.to,to_name:n.to_name||n.to,subject:n.subject,html_content:n.html_content,text_content:n.text_content||n.html_content?.replace(/<[^>]*>/g,"")||"",company_name:"TPX Barber",current_year:new Date().getFullYear()};console.log(" EmailJS template params:",{...r,html_content:r.html_content?"HTML_CONTENT_PROVIDED":"NO_HTML"});const l=await pi.send(H5,Q5,r);return console.log(" Email sent successfully via EmailJS:",l),{success:!0,data:l}}catch(r){return console.error(" EmailJS sending failed:",r),{success:!1,error:r.message||"Failed to send email",details:r}}},Mp=async n=>_0({to:n,to_name:"Test User",subject:" TPX Barber - Test Email",html_content:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
        <div style="background: linear-gradient(135deg, #ff8c42 0%, #ff7a2b 100%); padding: 30px; text-align: center; border-radius: 10px;">
          <h1 style="color: white; margin: 0;"> Test Email</h1>
          <p style="color: white; margin: 10px 0 0;">Your EmailJS integration is working!</p>
        </div>
        <div style="padding: 30px 20px; background: #1a1a1a; border-radius: 0 0 10px 10px;">
          <p style="color: #e5e5e5; margin: 0 0 20px;">Hello!</p>
          <p style="color: #e5e5e5; margin: 0 0 20px;">
            This test email confirms your TPX Barber email system is properly configured with EmailJS.
          </p>
          <p style="color: #e5e5e5; margin: 0;">
            If you received this email, everything is working correctly! 
          </p>
        </div>
      </div>
    `,text_content:"Test email from TPX Barber. Your EmailJS integration is working!"}),G5=async({campaignData:n,recipients:r,onProgress:l})=>{const i={total:r.length,sent:0,failed:0,errors:[]};console.log(` Starting EmailJS campaign: ${n.name} to ${r.length} recipients`);for(let c=0;c<r.length;c++){const x=r[c];try{const u=await _0({to:x.email,to_name:x.username||x.email,subject:n.subject,html_content:n.html_content,text_content:n.text_content});u.success?(i.sent++,console.log(` Email sent to: ${x.email}`)):(i.failed++,i.errors.push({email:x.email,error:u.error}),console.error(` Failed to send to: ${x.email}`,u.error))}catch(u){i.failed++,i.errors.push({email:x.email,error:u.message}),console.error(` Error sending to: ${x.email}`,u)}l&&l({current:c+1,total:r.length,sent:i.sent,failed:i.failed,percentage:Math.round((c+1)/r.length*100)}),c<r.length-1&&await new Promise(u=>setTimeout(u,100))}return console.log(` EmailJS Campaign completed. Sent: ${i.sent}, Failed: ${i.failed}`),i},Fg=Object.freeze(Object.defineProperty({__proto__:null,isEmailServiceConfigured:Tp,sendCampaignEmails:G5,sendEmailViaEmailJS:_0,sendTestEmail:Mp},Symbol.toStringTag,{value:"Module"})),X5=()=>{const[n,r]=v.useState(""),[l,i]=v.useState(!1),[c,x]=v.useState(null),u=async()=>{if(!n||!n.includes("@")){alert("Please enter a valid email address");return}i(!0),x(null);try{console.log(" Testing email to:",n);const g=await Mp(n);x(g),g.success?console.log(" Test email sent successfully!"):console.error(" Test email failed:",g.error)}catch(g){console.error(" Test email error:",g),x({success:!1,error:g.message||"Unknown error occurred"})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#0A0A0A] to-[#1A1A1A]",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[e.jsx(ps,{to:"/staff/dashboard",className:"p-2 bg-[#2A2A2A] text-gray-300 rounded-lg hover:bg-[#3A3A3A] transition-colors",children:e.jsx(rs,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Email Configuration Test"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Debug and test your Resend email integration"})]})]}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-6 rounded-xl border border-[#444444]/50",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Current Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"EmailJS Service ID"}),e.jsx("div",{className:"text-white font-mono text-sm",children:`${"service_bczerea".substring(0,8)}...`})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"EmailJS Template ID"}),e.jsx("div",{className:"text-white font-mono text-sm",children:`${"template_qqctchj".substring(0,8)}...`})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"EmailJS Public Key"}),e.jsx("div",{className:"text-white font-mono text-sm",children:`${"rIfJ3j9HQe8hynx_3".substring(0,8)}...`})]}),e.jsxs("div",{className:"bg-[#1A1A1A] p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Service Status"}),e.jsx("div",{className:"text-green-400 font-mono text-sm",children:" EmailJS (No Restrictions)"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-[#2A2A2A] to-[#333333] p-6 rounded-xl border border-[#444444]/50",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-[#FF8C42] to-[#FF7A2B] rounded-lg",children:e.jsx(Ft,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Send Test Email"}),e.jsx("p",{className:"text-gray-400",children:"Verify your Resend integration is working"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Test Email Address"}),e.jsx("input",{type:"email",value:n,onChange:g=>r(g.target.value),placeholder:"your.email@example.com",className:"w-full px-4 py-3 bg-[#1A1A1A] border border-[#555555] text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-[#FF8C42] focus:border-[#FF8C42] transition-colors",disabled:l}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:" EmailJS can send to any email address - no restrictions!"})]}),e.jsx("button",{onClick:u,disabled:l||!n,className:"w-full px-6 py-3 bg-gradient-to-r from-[#FF8C42] to-[#FF7A2B] text-white rounded-lg hover:from-[#FF7A2B] hover:to-[#FF6B1A] transition-colors flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:l?e.jsxs(e.Fragment,{children:[e.jsx(mp,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Sending Test Email..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($o,{className:"w-5 h-5"}),e.jsx("span",{children:"Send Test Email"})]})})]})]}),c&&e.jsx("div",{className:`p-6 rounded-xl border ${c.success?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-start space-x-4",children:[c.success?e.jsx(Qe,{className:"w-8 h-8 text-green-400 flex-shrink-0 mt-1"}):e.jsx(at,{className:"w-8 h-8 text-red-400 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-lg font-semibold ${c.success?"text-green-400":"text-red-400"}`,children:c.success?"Test Email Sent Successfully!":"Test Email Failed"}),c.success?e.jsxs("div",{className:"text-green-300 mt-2 space-y-1",children:[e.jsxs("p",{children:[" Email sent to: ",e.jsx("span",{className:"font-mono",children:n})]}),e.jsx("p",{children:" Resend integration is working correctly"}),c.data?.id&&e.jsxs("p",{className:"text-sm text-green-400",children:["Email ID: ",e.jsx("span",{className:"font-mono",children:c.data.id})]})]}):e.jsxs("div",{className:"text-red-300 mt-2",children:[e.jsxs("p",{className:"font-medium",children:[" Error: ",c.error]}),e.jsxs("div",{className:"text-sm text-red-400 mt-3 bg-red-900/20 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-2",children:"Common troubleshooting steps:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Verify VITE_RESEND_API_KEY is correct in .env.local"}),e.jsx("li",{children:"Ensure from email domain is verified in Resend dashboard"}),e.jsx("li",{children:"Check if you've exceeded rate limits"}),e.jsx("li",{children:"Verify network connectivity"}),e.jsx("li",{children:"Check browser console for detailed errors"})]})]})]})]})]})}),e.jsxs("div",{className:"bg-[#1A1A1A] p-6 rounded-xl border border-[#444444]/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Debug Information"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Environment:"}),e.jsx("span",{className:"text-white",children:"production"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"EmailJS Service:"}),e.jsx("span",{className:"text-white font-mono",children:"Client-side sending"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Browser Console:"}),e.jsx("span",{className:"text-white",children:"Check for detailed logs"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Restrictions:"}),e.jsx("span",{className:"text-green-400",children:"None - send to any email!"})]})]})]})]})]})})};var Vo={exports:{}},K5=Vo.exports,Bg;function Z5(){return Bg||(Bg=1,function(n,r){(function(l,i){i()})(K5,function(){function l(f,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function i(f,b,p){var y=new XMLHttpRequest;y.open("GET",f),y.responseType="blob",y.onload=function(){m(y.response,b,p)},y.onerror=function(){console.error("could not download file")},y.send()}function c(f){var b=new XMLHttpRequest;b.open("HEAD",f,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function x(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(b)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof So=="object"&&So.global===So?So:void 0,g=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(f,b,p){var y=u.URL||u.webkitURL,N=document.createElement("a");b=b||f.name||"download",N.download=b,N.rel="noopener",typeof f=="string"?(N.href=f,N.origin===location.origin?x(N):c(N.href)?i(f,b,p):x(N,N.target="_blank")):(N.href=y.createObjectURL(f),setTimeout(function(){y.revokeObjectURL(N.href)},4e4),setTimeout(function(){x(N)},0))}:"msSaveOrOpenBlob"in navigator?function(f,b,p){if(b=b||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(l(f,p),b);else if(c(f))i(f,b,p);else{var y=document.createElement("a");y.href=f,y.target="_blank",setTimeout(function(){x(y)})}}:function(f,b,p,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof f=="string")return i(f,b,p);var N=f.type==="application/octet-stream",j=/constructor/i.test(u.HTMLElement)||u.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||N&&j||g)&&typeof FileReader<"u"){var D=new FileReader;D.onloadend=function(){var A=D.result;A=w?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=A:location=A,y=null},D.readAsDataURL(f)}else{var C=u.URL||u.webkitURL,L=C.createObjectURL(f);y?y.location=L:location.href=L,y=null,setTimeout(function(){C.revokeObjectURL(L)},4e4)}});u.saveAs=m.saveAs=m,n.exports=m})}(Vo)),Vo.exports}var J5=Z5();let W5={data:""},e9=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||W5,t9=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,s9=/\/\*[^]*?\*\/|  +/g,kg=/\n+/g,Br=(n,r)=>{let l="",i="",c="";for(let x in n){let u=n[x];x[0]=="@"?x[1]=="i"?l=x+" "+u+";":i+=x[1]=="f"?Br(u,x):x+"{"+Br(u,x[1]=="k"?"":r)+"}":typeof u=="object"?i+=Br(u,r?r.replace(/([^,])+/g,g=>x.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,g):g?g+" "+m:m)):x):u!=null&&(x=/^--/.test(x)?x:x.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=Br.p?Br.p(x,u):x+":"+u+";")}return l+(r&&c?r+"{"+c+"}":c)+i},Qa={},Rp=n=>{if(typeof n=="object"){let r="";for(let l in n)r+=l+Rp(n[l]);return r}return n},a9=(n,r,l,i,c)=>{let x=Rp(n),u=Qa[x]||(Qa[x]=(m=>{let f=0,b=11;for(;f<m.length;)b=101*b+m.charCodeAt(f++)>>>0;return"go"+b})(x));if(!Qa[u]){let m=x!==n?n:(f=>{let b,p,y=[{}];for(;b=t9.exec(f.replace(s9,""));)b[4]?y.shift():b[3]?(p=b[3].replace(kg," ").trim(),y.unshift(y[0][p]=y[0][p]||{})):y[0][b[1]]=b[2].replace(kg," ").trim();return y[0]})(n);Qa[u]=Br(c?{["@keyframes "+u]:m}:m,l?"":"."+u)}let g=l&&Qa.g?Qa.g:null;return l&&(Qa.g=Qa[u]),((m,f,b,p)=>{p?f.data=f.data.replace(p,m):f.data.indexOf(m)===-1&&(f.data=b?m+f.data:f.data+m)})(Qa[u],r,i,g),u},r9=(n,r,l)=>n.reduce((i,c,x)=>{let u=r[x];if(u&&u.call){let g=u(l),m=g&&g.props&&g.props.className||/^go/.test(g)&&g;u=m?"."+m:g&&typeof g=="object"?g.props?"":Br(g,""):g===!1?"":g}return i+c+(u??"")},"");function rc(n){let r=this||{},l=n.call?n(r.p):n;return a9(l.unshift?l.raw?r9(l,[].slice.call(arguments,1),r.p):l.reduce((i,c)=>Object.assign(i,c&&c.call?c(r.p):c),{}):l,e9(r.target),r.g,r.o,r.k)}let Pp,m0,h0;rc.bind({g:1});let Wa=rc.bind({k:1});function n9(n,r,l,i){Br.p=r,Pp=n,m0=l,h0=i}function Mr(n,r){let l=this||{};return function(){let i=arguments;function c(x,u){let g=Object.assign({},x),m=g.className||c.className;l.p=Object.assign({theme:m0&&m0()},g),l.o=/ *go\d+/.test(m),g.className=rc.apply(l,i)+(m?" "+m:"");let f=n;return n[0]&&(f=g.as||n,delete g.as),h0&&f[0]&&h0(g),Pp(f,g)}return c}}var l9=n=>typeof n=="function",f0=(n,r)=>l9(n)?n(r):n,i9=(()=>{let n=0;return()=>(++n).toString()})(),o9=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let r=matchMedia("(prefers-reduced-motion: reduce)");n=!r||r.matches}return n}})(),c9=20,Lp="default",Op=(n,r)=>{let{toastLimit:l}=n.settings;switch(r.type){case 0:return{...n,toasts:[r.toast,...n.toasts].slice(0,l)};case 1:return{...n,toasts:n.toasts.map(u=>u.id===r.toast.id?{...u,...r.toast}:u)};case 2:let{toast:i}=r;return Op(n,{type:n.toasts.find(u=>u.id===i.id)?1:0,toast:i});case 3:let{toastId:c}=r;return{...n,toasts:n.toasts.map(u=>u.id===c||c===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return r.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(u=>u.id!==r.toastId)};case 5:return{...n,pausedAt:r.time};case 6:let x=r.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+x}))}}},x9=[],d9={toasts:[],pausedAt:void 0,settings:{toastLimit:c9}},Hn={},Up=(n,r=Lp)=>{Hn[r]=Op(Hn[r]||d9,n),x9.forEach(([l,i])=>{l===r&&i(Hn[r])})},zp=n=>Object.keys(Hn).forEach(r=>Up(n,r)),u9=n=>Object.keys(Hn).find(r=>Hn[r].toasts.some(l=>l.id===n)),T0=(n=Lp)=>r=>{Up(r,n)},m9=(n,r="blank",l)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:r,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...l,id:l?.id||i9()}),bi=n=>(r,l)=>{let i=m9(r,n,l);return T0(i.toasterId||u9(i.id))({type:2,toast:i}),i.id},Rt=(n,r)=>bi("blank")(n,r);Rt.error=bi("error");Rt.success=bi("success");Rt.loading=bi("loading");Rt.custom=bi("custom");Rt.dismiss=(n,r)=>{let l={type:3,toastId:n};r?T0(r)(l):zp(l)};Rt.dismissAll=n=>Rt.dismiss(void 0,n);Rt.remove=(n,r)=>{let l={type:4,toastId:n};r?T0(r)(l):zp(l)};Rt.removeAll=n=>Rt.remove(void 0,n);Rt.promise=(n,r,l)=>{let i=Rt.loading(r.loading,{...l,...l?.loading});return typeof n=="function"&&(n=n()),n.then(c=>{let x=r.success?f0(r.success,c):void 0;return x?Rt.success(x,{id:i,...l,...l?.success}):Rt.dismiss(i),c}).catch(c=>{let x=r.error?f0(r.error,c):void 0;x?Rt.error(x,{id:i,...l,...l?.error}):Rt.dismiss(i)}),n};var h9=Wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,f9=Wa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,g9=Wa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,p9=Mr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${h9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${f9} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${g9} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,b9=Wa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,y9=Mr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${b9} 1s linear infinite;
`,v9=Wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,j9=Wa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,N9=Mr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${v9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${j9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,w9=Mr("div")`
  position: absolute;
`,C9=Mr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,A9=Wa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,E9=Mr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${A9} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,F9=({toast:n})=>{let{icon:r,type:l,iconTheme:i}=n;return r!==void 0?typeof r=="string"?v.createElement(E9,null,r):r:l==="blank"?null:v.createElement(C9,null,v.createElement(y9,{...i}),l!=="loading"&&v.createElement(w9,null,l==="error"?v.createElement(p9,{...i}):v.createElement(N9,{...i})))},B9=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,k9=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,D9="0%{opacity:0;} 100%{opacity:1;}",S9="0%{opacity:1;} 100%{opacity:0;}",_9=Mr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,T9=Mr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,M9=(n,r)=>{let l=n.includes("top")?1:-1,[i,c]=o9()?[D9,S9]:[B9(l),k9(l)];return{animation:r?`${Wa(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wa(c)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};v.memo(({toast:n,position:r,style:l,children:i})=>{let c=n.height?M9(n.position||r||"top-center",n.visible):{opacity:0},x=v.createElement(F9,{toast:n}),u=v.createElement(T9,{...n.ariaProps},f0(n.message,n));return v.createElement(_9,{className:n.className,style:{...c,...l,...n.style}},typeof i=="function"?i({icon:x,message:u}):v.createElement(v.Fragment,null,x,u))});n9(v.createElement);rc`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;class R9{constructor(){this.downloadQueue=[],this.activeDownloads=new Map}async downloadAPK(r={}){const{onProgress:l=()=>{},onComplete:i=()=>{},onError:c=()=>{},fileName:x="tipuo-app.apk",showToasts:u=!0}=r;try{const m=`${window.location.origin}/apk/tipuo-app.apk`;u&&Rt.loading("Preparing download...",{id:"apk-download"});const f=await fetch(m);if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const b=f.headers.get("content-length"),p=b?parseInt(b,10):0;let y=0;const N=f.body.getReader(),j=[];for(;;){const{done:L,value:A}=await N.read();if(L)break;if(j.push(A),y+=A.length,p>0){const _=Math.round(y/p*100);l(_)}}const w=new Blob(j,{type:"application/vnd.android.package-archive"}),C=`TPX-Barbershop-${new Date().toISOString().replace(/[:.]/g,"-")}.apk`;J5.saveAs(w,C),u&&Rt.success("Download completed successfully!",{id:"apk-download"}),i()}catch(g){throw console.error("Download failed:",g),u&&Rt.error("Download failed. Please try again.",{id:"apk-download"}),c(g),g}}directDownload(r="tipuo-app.apk"){try{const i=`${window.location.origin}/apk/tipuo-app.apk`,c=document.createElement("a");c.href=i,c.download=r,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),Rt.success("Download started!")}catch(l){console.error("Direct download failed:",l),Rt.error("Download failed. Please try again.")}}async checkAPKAvailability(){try{const l=`${window.location.origin}/apk/tipuo-app.apk`;return(await fetch(l,{method:"HEAD"})).ok}catch(r){return console.error("APK availability check failed:",r),!1}}async getAPKSize(){try{const l=`${window.location.origin}/apk/tipuo-app.apk`,i=await fetch(l,{method:"HEAD"});if(i.ok){const c=i.headers.get("content-length");return c?parseInt(c,10):0}return 0}catch(r){return console.error("Failed to get APK size:",r),0}}formatFileSize(r){if(r===0)return"0 Bytes";const l=1024,i=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(r)/Math.log(l));return parseFloat((r/Math.pow(l,c)).toFixed(2))+" "+i[c]}simulateDownload(r,l=3e3){return new Promise(i=>{const c=Date.now(),x=setInterval(()=>{const u=Date.now()-c,g=Math.min(100,u/l*100);r(Math.round(g)),g>=100&&(clearInterval(x),i())},100)})}queueDownloads(r){r.forEach((l,i)=>{this.downloadAPK({...l,showToasts:!1,onComplete:()=>{Rt.success(`Download ${i+1} completed!`)}})})}cancelDownload(r){this.activeDownloads.has(r)&&(this.activeDownloads.get(r).abort(),this.activeDownloads.delete(r),Rt.info("Download cancelled"))}getStats(){return{activeDownloads:this.activeDownloads.size,queuedDownloads:this.downloadQueue.length,totalDownloads:this.activeDownloads.size+this.downloadQueue.length}}}const P9=new R9,L9=()=>{ys();const[n,r]=v.useState(0),[l,i]=v.useState(!1),[c,x]=v.useState(!1),[u,g]=v.useState(!1),m=async()=>{try{i(!0),r(0),x(!1),await P9.downloadAPK({onProgress:y=>{r(y)},onComplete:()=>{i(!1),x(!0)},onError:y=>{i(!1),console.error("Download failed:",y)}})}catch(y){i(!1),console.error("Download failed:",y)}},f=[{icon:Re,title:"Easy Booking",description:"Schedule appointments instantly with real-time availability"},{icon:Fa,title:"AI Style Assistant",description:"Get personalized haircut recommendations powered by AI"},{icon:gt,title:"Loyalty Rewards",description:"Earn points and unlock exclusive member benefits"},{icon:It,title:"Service Tracking",description:"Keep track of your grooming history and preferences"}],b=[{label:"Downloads",value:"10K+",icon:Xa},{label:"Rating",value:"4.9",icon:nt},{label:"Active Users",value:"5K+",icon:gt},{label:"Updates",value:"24/7",icon:di}],p=["Android 6.0 or higher","50MB storage space","Internet connection for initial setup","Camera access for QR code scanning (optional)"];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-gray-900/95 backdrop-blur-md border-b border-gray-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(ps,{to:"/",className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/img/tipuno_x_logo_white.avif",alt:"TPX Barbershop",className:"w-8 h-8 object-contain"}),e.jsx("span",{className:"text-white font-bold text-lg",children:"TPX Barbershop"})]})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[e.jsx(ps,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"Home"}),e.jsx(ps,{to:"/platform-selection",className:"text-gray-300 hover:text-white transition-colors",children:"Platform Selection"}),e.jsxs("button",{onClick:()=>g(!0),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-2 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center gap-2",children:[e.jsx(Xa,{className:"w-4 h-4"}),"Install App"]})]})]})})}),e.jsxs("section",{className:"relative py-20 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-600/20 border border-green-500/30 text-green-400 px-4 py-2 rounded-full text-sm font-medium mb-8",children:[e.jsx(Qj,{className:"w-4 h-4"}),"Android App Available"]}),e.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6 leading-tight",children:["Download the",e.jsx("span",{className:"text-green-500",children:" TPX Barbershop"}),"App"]}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"Experience the future of grooming with our Android app. Book appointments, get AI-powered style recommendations, and manage your loyalty points all in one place."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-12",children:[e.jsx("button",{onClick:m,disabled:l||c,className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-green-700 hover:to-green-800 transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-green-500/25 disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Downloading..."]}):c?e.jsxs(e.Fragment,{children:[e.jsx(Ga,{className:"w-5 h-5"}),"Download Complete"]}):e.jsxs(e.Fragment,{children:[e.jsx(Xa,{className:"w-5 h-5"}),"Download APK"]})}),e.jsxs("button",{onClick:()=>g(!0),className:"border-2 border-green-600 text-green-400 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-green-600/10 transition-all duration-200",children:[e.jsx(dp,{className:"w-5 h-5 mr-2"}),"Install Guide"]})]}),l&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[e.jsx("span",{children:"Downloading tipuo-app.apk"}),e.jsxs("span",{children:[Math.round(n),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-8 border-t border-gray-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"100%"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Secure"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"4.9"}),e.jsxs("div",{className:"text-sm text-gray-400 flex items-center",children:[e.jsx(nt,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),"Rating"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:"Free"}),e.jsx("div",{className:"text-sm text-gray-400",children:"No Ads"})]})]})]}),e.jsx("div",{className:"relative flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-80 h-[600px] bg-gray-800 rounded-[3rem] p-4 shadow-2xl border border-gray-700",children:e.jsxs("div",{className:"w-full h-full bg-black rounded-[2rem] overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-32 h-6 bg-black rounded-b-2xl z-10"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/20 to-black p-6 pt-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:"/img/android.png",alt:"Android",className:"w-16 h-16 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-bold text-lg",children:"TPX Barbershop"}),e.jsx("p",{className:"text-green-400 text-sm",children:"Premium Grooming"})]}),e.jsx("div",{className:"space-y-4",children:[{icon:Re,text:"Book Appointment"},{icon:Fa,text:"AI Assistant"},{icon:gt,text:"Loyalty Points"},{icon:ks,text:"Service History"}].map((y,N)=>e.jsxs("div",{className:"flex items-center gap-3 bg-gray-800/50 rounded-lg p-3",children:[e.jsx(y.icon,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-white text-sm",children:y.text})]},N))}),e.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:e.jsx("div",{className:"bg-green-600 text-white text-center py-3 rounded-lg font-semibold",children:"Download Now"})})]})]})}),e.jsx("div",{className:"absolute -top-8 -right-8 w-16 h-16 bg-green-600/20 rounded-full flex items-center justify-center",children:e.jsx(Xa,{className:"w-8 h-8 text-green-400"})}),e.jsx("div",{className:"absolute -bottom-8 -left-8 w-12 h-12 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx(nt,{className:"w-6 h-6 text-yellow-400"})})]})})]})})]}),e.jsx("section",{className:"py-20 bg-gray-800/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Why Choose Our App?"}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Experience the perfect blend of technology and traditional grooming excellence"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:f.map((y,N)=>{const j=y.icon;return e.jsxs("div",{className:"group bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6 hover:border-green-500/30 transition-all duration-300",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-600 to-green-700 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:e.jsx(j,{className:"w-7 h-7 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:y.title}),e.jsx("p",{className:"text-gray-400 leading-relaxed",children:y.description})]},N)})})]})}),e.jsx("section",{className:"py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:b.map((y,N)=>{const j=y.icon;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-8 h-8 text-green-400"})}),e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:y.value}),e.jsx("div",{className:"text-gray-400",children:y.label})]},N)})})})}),e.jsx("section",{className:"py-20 bg-gray-800/50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"System Requirements"}),e.jsx("p",{className:"text-gray-300",children:"Make sure your device meets these requirements for the best experience"})]}),e.jsxs("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-8",children:[e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:p.map((y,N)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ga,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-gray-300",children:y})]},N))}),e.jsx("div",{className:"mt-8 p-6 bg-gray-900/50 rounded-xl border border-gray-700",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tr,{className:"w-6 h-6 text-green-400 flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-2",children:"100% Secure & Safe"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Our APK is scanned regularly for viruses and malware. We respect your privacy and never collect unnecessary data."})]})]})})]})]})}),u&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>g(!1)}),e.jsxs("div",{className:"relative bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-800 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Installation Guide"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(rt,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-3",children:"Step 1: Download the APK"}),e.jsx("p",{className:"text-gray-400 mb-3",children:"Click the download button to get the tipuo-app.apk file"}),e.jsx("button",{onClick:()=>{g(!1),m()},className:"bg-green-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Download APK"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-3",children:"Step 2: Enable Unknown Sources"}),e.jsx("p",{className:"text-gray-400 mb-3",children:"Go to Settings > Security > Unknown sources and enable it"}),e.jsx("div",{className:"bg-gray-900/50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"This allows you to install apps from outside the Google Play Store"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-3",children:"Step 3: Install the App"}),e.jsx("p",{className:"text-gray-400 mb-3",children:'Open the downloaded APK file and tap "Install"'}),e.jsx("div",{className:"bg-gray-900/50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"You may see a security warning - this is normal for apps outside the Play Store"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold mb-3",children:"Step 4: Launch and Enjoy!"}),e.jsx("p",{className:"text-gray-400",children:"Open the app and sign in or create an account to start booking"})]})]})})]})]}),e.jsx("footer",{className:"bg-gray-900 py-12 border-t border-gray-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center",children:e.jsx("img",{src:"/img/android.png",alt:"Android",className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"TPX Barbershop"}),e.jsx("p",{className:"text-green-400 text-sm font-medium",children:"Android App"})]})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:" 2024 TPX Barbershop. All rights reserved."}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Version 1.0  Compatible with Android 6.0+"})]})})})]})},O9=()=>{if(typeof window>"u")return{isNativeApp:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isDesktop:!1,isWebView:!1};const n=navigator.userAgent||navigator.vendor||window.opera,r=typeof window.Capacitor<"u",l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n),i=/Android/i.test(n),c=/iPhone|iPad|iPod/i.test(n),x=!l,u=r||l&&/; wv\)|Instagram|FBAN|FBAV|Twitter/i.test(n);return{isNativeApp:r,isMobile:l,isAndroid:i,isIOS:c,isDesktop:x,isWebView:u}},U9=()=>O9().isNativeApp?"/auth/login":"/";function z9(){const n=U9();return e.jsx(t1,{children:e.jsx(Hv,{children:e.jsx("div",{className:"min-h-screen bg-gray-light",children:e.jsxs(jv,{children:[e.jsx(St,{path:"/",element:n==="/auth/login"?e.jsx(sa,{to:"/auth/login",replace:!0}):e.jsx(Hf,{})}),e.jsx(St,{path:"/landing",element:e.jsx(Hf,{})}),e.jsx(St,{path:"/platform-selection",element:e.jsx(v8,{})}),e.jsx(St,{path:"/privacy",element:e.jsx(I5,{})}),e.jsx(St,{path:"/account-deletion",element:e.jsx(V5,{})}),e.jsx(St,{path:"/email-test",element:e.jsx(X5,{})}),e.jsx(St,{path:"/auth/login",element:e.jsx(Uf,{children:e.jsx(C8,{})})}),e.jsx(St,{path:"/auth/facebook/callback",element:e.jsx(E8,{})}),e.jsx(St,{path:"/auth/register",element:e.jsx(Uf,{children:e.jsx(A8,{})})}),e.jsx(St,{path:"/admin",element:e.jsx(sa,{to:"/admin/dashboard",replace:!0})}),e.jsx(St,{path:"/admin/dashboard",element:e.jsx(Jr,{requireSuperAdmin:!0,children:e.jsx(a5,{})})}),e.jsx(St,{path:"/staff",element:e.jsx(sa,{to:"/staff/dashboard",replace:!0})}),e.jsx(St,{path:"/staff/dashboard",element:e.jsx(Jr,{requireStaff:!0,children:e.jsx(I3,{})})}),e.jsx(St,{path:"/staff/pos",element:e.jsx(Jr,{requireStaff:!0,children:e.jsx(Q3,{})})}),e.jsx(St,{path:"/barber",element:e.jsx(sa,{to:"/barber/dashboard",replace:!0})}),e.jsx(St,{path:"/barber/dashboard",element:e.jsx(Jr,{requireBarber:!0,children:e.jsx(_5,{})})}),e.jsx(St,{path:"/customer/dashboard",element:e.jsx(Jr,{children:e.jsx(Eg,{})})}),e.jsx(St,{path:"/customer/booking",element:e.jsx(Jr,{children:e.jsx(B5,{})})}),e.jsx(St,{path:"/customer/client",element:e.jsx(Jr,{children:e.jsx(Eg,{})})}),e.jsx(St,{path:"/kiosk",element:e.jsx(z5,{})}),e.jsx(St,{path:"/booking/payment/success",element:e.jsx(q5,{})}),e.jsx(St,{path:"/booking/payment/failure",element:e.jsx($5,{})}),e.jsx(St,{path:"/download-app",element:e.jsx(L9,{})})]})})})})}const q9=new wy("https://woozy-whale-1.convex.cloud");s2.createRoot(document.getElementById("root")).render(e.jsx(v.StrictMode,{children:e.jsx(Ay,{client:q9,children:e.jsx(z9,{})})}));
